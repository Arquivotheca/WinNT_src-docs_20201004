<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: ia64/initkr.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>initkr.c File Reference</h1><code>#include "<a class="el" href="../../d1/d9/ki_8h-source.html">ki.h</a>"</code><br>

<p>
<a href="../../d9/d1/ia64_2initkr_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d2/ia64_2initkr_8c.html#a5">KiInitializeKernel</a> (IN <a class="el" href="../../d5/d7/struct__KPROCESS.html">PKPROCESS</a> Process, IN <a class="el" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a> Thread, IN PVOID IdleStack, IN PKPRCB Prcb, IN CCHAR Number, IN <a class="el" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>KSPIN_LOCK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d2/ia64_2initkr_8c.html#a0">KiTbBroadcastLock</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>KSPIN_LOCK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d2/ia64_2initkr_8c.html#a1">KiMasterRidLock</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>KSPIN_LOCK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d2/ia64_2initkr_8c.html#a2">KiCacheFlushLock</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d2/ia64_2initkr_8c.html#a3">KiUserSharedDataPage</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d2/ia64_2initkr_8c.html#a4">KiKernelPcrPage</a> = 0i64</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a5" doxytag="ia64/initkr.c::KiInitializeKernel" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KiInitializeKernel           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d5/d7/struct__KPROCESS.html">PKPROCESS</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Process</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Thread</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>IdleStack</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PKPRCB&nbsp;</td>
          <td class="mdname" nowrap> <em>Prcb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Number</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>LoaderBlock</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html#l00078">78</a> of file <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html">ia64/initkr.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00086">APC_LEVEL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00041">DBG_STATUS_CONTROL_C</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00087">DISPATCH_LEVEL</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02496">DMA_READ_DCACHE_INVALIDATE</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02498">DMA_WRITE_DCACHE_SNOOP</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d0/d0/ki_8h.html#a86">ExpInitializeExecutive()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d7/hal_8h.html#a196">HalInitializeProcessor()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00091">HIGH_LEVEL</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d6/d5/4_2kdinit_8c-source.html#l00072">KdInitSystem()</a>, <a class="el" href="../../d8/d5/4_2kdlock_8c-source.html#l00093">KdPollBreakIn()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02766">KeActiveProcessors</a>, <a class="el" href="../../d0/d1/bugcheck_8c-source.html#l00070">KeBugCheck()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02780">KeFeatureBits</a>, <a class="el" href="../../d4/d4/procobj_8c-source.html#l00063">KeInitializeProcess()</a>, <a class="el" href="../../d4/d9/ke_8h.html#a354">KeInitializeSpinLock()</a>, <a class="el" href="../../d0/d1/thredobj_8c-source.html#l00043">KeInitializeThread()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02773">KeLoaderBlock</a>, <a class="el" href="../../d9/d5/verifier_8c.html#a117">KeLowerIrql()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02774">KeMaximumIncrement</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02776">KeNumberProcessors</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02777">KeProcessorArchitecture</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02778">KeProcessorLevel</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02779">KeProcessorRevision</a>, <a class="el" href="../../d9/d5/verifier_8c.html#a116">KeRaiseIrql()</a>, <a class="el" href="../../d0/d1/thredobj_8c-source.html#l01838">KeSetPriorityThread()</a>, <a class="el" href="../../d9/d9/cmdat3_8c-source.html#l00127">KiAdjustDpcThreshold</a>, <a class="el" href="../../d0/d0/ki_8h.html#a97">KiApcInterrupt()</a>, <a class="el" href="../../d2/d4/ia64_2flush_8c-source.html#l00039">KiCacheFlushLock</a>, <a class="el" href="../../d3/d9/kiinit_8c-source.html#l00237">KiComputeReciprocal()</a>, <a class="el" href="../../d1/d9/ki_8h-source.html#l01113">KiContextSwapLock</a>, <a class="el" href="../../d0/d0/ki_8h.html#a111">KiDispatchInterrupt()</a>, <a class="el" href="../../d6/d8/kernldat_8c-source.html#l00301">KiDmaIoCoherency</a>, <a class="el" href="../../d6/d8/kernldat_8c-source.html#l00044">KiIdleSummary</a>, <a class="el" href="../../d3/d9/kiinit_8c-source.html#l00096">KiInitSystem()</a>, <a class="el" href="../../d0/d5/ia64_2flushtb_8c-source.html#l00029">KiMasterRidLock</a>, <a class="el" href="../../d9/d9/cmdat3_8c-source.html#l00125">KiMaximumDpcQueueDepth</a>, <a class="el" href="../../d9/d9/cmdat3_8c-source.html#l00126">KiMinimumDpcRate</a>, <a class="el" href="../../d0/d0/ki_8h.html#a129">KiPassiveRelease()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02782">KiProcessorBlock</a>, <a class="el" href="../../d0/d5/ia64_2flushtb_8c-source.html#l00028">KiTbBroadcastLock</a>, <a class="el" href="../../d6/d8/kernldat_8c-source.html#l00505">KiTimeIncrementReciprocal</a>, <a class="el" href="../../d6/d8/kernldat_8c-source.html#l00512">KiTimeIncrementShiftCount</a>, <a class="el" href="../../d0/d0/ki_8h.html#a142">KiUnexpectedInterrupt()</a>, <a class="el" href="../../d7/d5/ia64_2allproc_8c-source.html#l00056">KiUserSharedDataPage</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l01420">MAXIMUM_PROCESSORS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00599">PAGE_SIZE</a>, <a class="el" href="../../d2/d2/ppcdef_8h-source.html#l00079">PASSIVE_LEVEL</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l00367">PKSTART_ROUTINE</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l00379">PKSYSTEM_ROUTINE</a>, <a class="el" href="../../d1/d2/po_8h.html#a57">PoInitializePrcb()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00177">PRCB_MAJOR_VERSION</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00176">PRCB_MINOR_VERSION</a>, <a class="el" href="../../d2/d8/ps_8h-source.html#l00580">PsNtosImageBase</a>, <a class="el" href="../../d9/d8/imagedir_8c-source.html#l00250">RtlImageDirectoryEntryToData()</a>, <a class="el" href="../../d4/d9/ke_8h.html#a406a193">Running</a>, <a class="el" href="../../d1/d9/ki_8h-source.html#l00065">SetMember</a>, <a class="el" href="../../d9/d6/lh__open_2pi__mem_8h-source.html#l00017">Size</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
<pre class="fragment"><div>00089                    :
00090 
00091     This function gains <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a58">control</a> after <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> system has been bootstrapped and
00092     before <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> system has been initialized. Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to initialize
00093     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> kernel data structures, initialize <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> idle thread and process objects,
00094     initialize <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> processor <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a58">control</a> block, call <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> executive initialization
00095     routine, and then <span class="keywordflow">return</span> to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> system startup routine. This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
00096     also called to initialize <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> processor specific structures when a <span class="keyword">new</span>
00097     processor <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> brought on line.
00098 
00099 Arguments:
00100 
00101     Process - Supplies a pointer to a <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a58">control</a> object of <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> process <span class="keywordflow">for</span>
00102         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified processor.
00103 
00104     Thread - Supplies a pointer to a dispatcher object of <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> thread <span class="keywordflow">for</span>
00105         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified processor.
00106 
00107     IdleStack - Supplies a pointer <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> base of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> real kernel stack <span class="keywordflow">for</span>
00108         idle thread on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified processor.
00109 
00110     Prcb - Supplies a pointer to a processor <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a58">control</a> block <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified
00111         processor.
00112 
00113     Number - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> processor that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> being
00114         initialized.
00115 
00116     LoaderBlock - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> loader parameter block.
00117 
00118 Return Value:
00119 
00120     None.
00121 
00122 --*/
00123 
00124 {
00125 
00126     LONG <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00127     KIRQL OldIrql;
00128     ULONG_PTR DirectoryTableBase[2];
00129 
00130     <span class="comment">//</span>
00131     <span class="comment">// Perform platform dependent processor initialization.</span>
00132     <span class="comment">//</span>
00133 
00134     <a class="code" href="../../d2/d7/hal_8h.html#a196">HalInitializeProcessor</a>(Number, LoaderBlock);
00135 
00136     <span class="comment">//</span>
00137     <span class="comment">// Save the address of the loader parameter block.</span>
00138     <span class="comment">//</span>
00139 
00140     <a class="code" href="../../d4/d9/ke_8h.html#a130">KeLoaderBlock</a> = LoaderBlock;
00141 
00142     <span class="comment">//</span>
00143     <span class="comment">// Initialize the processor block.</span>
00144     <span class="comment">//</span>
00145 
00146     Prcb-&gt;MinorVersion = <a class="code" href="../../d6/d7/halmips_8h.html#a101">PRCB_MINOR_VERSION</a>;
00147     Prcb-&gt;MajorVersion = <a class="code" href="../../d6/d7/halmips_8h.html#a102">PRCB_MAJOR_VERSION</a>;
00148     Prcb-&gt;BuildType = 0;
00149 
00150 <span class="preprocessor">#if DBG</span>
00151 <span class="preprocessor"></span>
00152     Prcb-&gt;BuildType |= PRCB_BUILD_DEBUG;
00153 
00154 <span class="preprocessor">#endif</span>
00155 <span class="preprocessor"></span>
00156 <span class="preprocessor">#if defined(NT_UP)</span>
00157 <span class="preprocessor"></span>
00158     Prcb-&gt;BuildType |= PRCB_BUILD_UNIPROCESSOR;
00159 
00160 <span class="preprocessor">#endif</span>
00161 <span class="preprocessor"></span>
00162     Prcb-&gt;CurrentThread = Thread;
00163     Prcb-&gt;NextThread = (<a class="code" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a>)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00164     Prcb-&gt;IdleThread = Thread;
00165     Prcb-&gt;Number = Number;
00166     Prcb-&gt;SetMember = 1 &lt;&lt; Number;
00167     Prcb-&gt;PcrPage = LoaderBlock-&gt;u.Ia64.PcrPage;
00168 
00169 <span class="preprocessor">#if !defined(NT_UP)</span>
00170 <span class="preprocessor"></span>
00171     Prcb-&gt;TargetSet = 0;
00172     Prcb-&gt;WorkerRoutine = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00173     Prcb-&gt;RequestSummary = 0;
00174     Prcb-&gt;IpiFrozen = 0;
00175 
00176 <span class="preprocessor">#if NT_INST</span>
00177 <span class="preprocessor"></span>
00178     Prcb-&gt;IpiCounts = &amp;KiIpiCounts[Number];
00179 
00180 <span class="preprocessor">#endif</span>
00181 <span class="preprocessor"></span>
00182 <span class="preprocessor">#endif</span>
00183 <span class="preprocessor"></span>
00184     Prcb-&gt;MaximumDpcQueueDepth = <a class="code" href="../../d8/d0/cmdat3_8c.html#a64">KiMaximumDpcQueueDepth</a>;
00185     Prcb-&gt;MinimumDpcRate = <a class="code" href="../../d8/d0/cmdat3_8c.html#a65">KiMinimumDpcRate</a>;
00186     Prcb-&gt;AdjustDpcThreshold = <a class="code" href="../../d8/d0/cmdat3_8c.html#a66">KiAdjustDpcThreshold</a>;
00187 
00188     <span class="comment">//</span>
00189     <span class="comment">// Initialize DPC listhead and lock.</span>
00190     <span class="comment">//</span>
00191 
00192     InitializeListHead(&amp;Prcb-&gt;DpcListHead);
00193     <a class="code" href="../../d4/d9/ke_8h.html#a354">KeInitializeSpinLock</a>(&amp;Prcb-&gt;DpcLock);
00194 
00195     <span class="comment">//</span>
00196     <span class="comment">// Set address of processor block.</span>
00197     <span class="comment">//</span>
00198 
00199     <a class="code" href="../../d4/d9/ke_8h.html#a139">KiProcessorBlock</a>[Number] = Prcb;
00200 
00201     <span class="comment">//</span>
00202     <span class="comment">// Initialize processors PowerState</span>
00203     <span class="comment">//</span>
00204 
00205     <a class="code" href="../../d1/d2/po_8h.html#a57">PoInitializePrcb</a> (Prcb);
00206 
00207     <span class="comment">//</span>
00208     <span class="comment">// Set global processor architecture, level and revision.  The</span>
00209     <span class="comment">// latter two are the least common denominator on an MP system.</span>
00210     <span class="comment">//</span>
00211 
00212     <a class="code" href="../../d4/d9/ke_8h.html#a134">KeProcessorArchitecture</a> = PROCESSOR_ARCHITECTURE_IA64;
00213     <a class="code" href="../../d4/d9/ke_8h.html#a137">KeFeatureBits</a> = 0;
00214     <span class="comment">// *** TBD when processor info available</span>
00215     <span class="comment">//    if ( KeProcessorLevel == 0 ||</span>
00216     <span class="comment">//     KeProcessorLevel &gt; (USHORT)(PCR-&gt;ProcessorId &gt;&gt; 8)</span>
00217     <span class="comment">//   ) {</span>
00218     <span class="comment">//     KeProcessorLevel = (USHORT)(PCR-&gt;ProcessorId &gt;&gt; 8);</span>
00219     <span class="comment">// }</span>
00220     <span class="comment">// if ( KeProcessorRevision == 0 ||</span>
00221     <span class="comment">//     KeProcessorRevision &gt; (USHORT)(PCR-&gt;ProcessorId &amp; 0xFF)</span>
00222     <span class="comment">//   ) {</span>
00223     <span class="comment">//    KeProcessorRevision = (USHORT)(PCR-&gt;ProcessorId &amp; 0xFF);</span>
00224     <span class="comment">// }</span>
00225 
00226     <a class="code" href="../../d4/d9/ke_8h.html#a135">KeProcessorLevel</a> = 1;
00227     <a class="code" href="../../d4/d9/ke_8h.html#a136">KeProcessorRevision</a> = 1;
00228 
00229     <span class="comment">//</span>
00230     <span class="comment">// Initialize the address of the bus error routines / machine check</span>
00231     <span class="comment">//</span>
00232     <span class="comment">// **** TBD</span>
00233 
00234     <span class="comment">//</span>
00235     <span class="comment">// Initialize the idle thread initial kernel stack and limit address value.</span>
00236     <span class="comment">//</span>
00237 
00238     PCR-&gt;InitialStack = (ULONGLONG)IdleStack;  
00239     PCR-&gt;InitialBStore = (ULONGLONG)IdleStack; 
00240     PCR-&gt;StackLimit = (ULONGLONG)((ULONG_PTR)IdleStack - KERNEL_STACK_SIZE);  
00241     PCR-&gt;BStoreLimit = (ULONGLONG)((ULONG_PTR)IdleStack + KERNEL_BSTORE_SIZE);
00242 
00243     <span class="comment">//</span>
00244     <span class="comment">// Initialize all interrupt vectors to transfer control to the unexpected</span>
00245     <span class="comment">// interrupt routine.</span>
00246     <span class="comment">//</span>
00247     <span class="comment">// N.B. This interrupt object is never actually "connected" to an interrupt</span>
00248     <span class="comment">//      vector via KeConnectInterrupt. It is initialized and then connected</span>
00249     <span class="comment">//      by simply storing the address of the dispatch code in the interrupt</span>
00250     <span class="comment">//      vector.</span>
00251     <span class="comment">//</span>
00252 
00253     <span class="keywordflow">if</span> (Number == 0) {
00254 
00255         <span class="comment">//</span>
00256         <span class="comment">// Initialize the context swap spinlock.</span>
00257         <span class="comment">//</span>
00258  
00259         <a class="code" href="../../d4/d9/ke_8h.html#a354">KeInitializeSpinLock</a>(&amp;KiContextSwapLock);
00260 
00261         <span class="comment">//</span>
00262         <span class="comment">// Initialize the Tb Broadcast spinlock.</span>
00263         <span class="comment">//</span>
00264 
00265         <a class="code" href="../../d4/d9/ke_8h.html#a354">KeInitializeSpinLock</a>(&amp;KiTbBroadcastLock);
00266 
00267         <span class="comment">//</span>
00268         <span class="comment">// Initialize the Master Rid spinlock.</span>
00269         <span class="comment">//</span>
00270 
00271         <a class="code" href="../../d4/d9/ke_8h.html#a354">KeInitializeSpinLock</a>(&amp;KiMasterRidLock);
00272 
00273         <span class="comment">//</span>
00274         <span class="comment">// Initialize the cache flush spinlock.</span>
00275         <span class="comment">//</span>
00276 
00277         <a class="code" href="../../d4/d9/ke_8h.html#a354">KeInitializeSpinLock</a>(&amp;KiCacheFlushLock);
00278 
00279         <span class="comment">//</span>
00280         <span class="comment">// Initial the address of the interrupt dispatch routine.</span>
00281         <span class="comment">//</span>
00282 
00283         KxUnexpectedInterrupt.DispatchAddress = <a class="code" href="../../d0/d0/ki_8h.html#a142">KiUnexpectedInterrupt</a>;
00284 
00285         <span class="comment">//</span>
00286         <span class="comment">// Copy the interrupt dispatch function descriptor into the interrupt</span>
00287         <span class="comment">// object.</span>
00288         <span class="comment">//</span>
00289 
00290         <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; DISPATCH_LENGTH; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> += 1) {
00291             KxUnexpectedInterrupt.DispatchCode[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>] =
00292                 *(((PULONG)(KxUnexpectedInterrupt.DispatchAddress))+<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>);
00293         }
00294 
00295         <span class="comment">//</span>
00296         <span class="comment">// Set the default DMA I/O coherency attributes.  IA64</span>
00297         <span class="comment">// architecture dictates that the D-Cache is fully coherent.</span>
00298         <span class="comment">//</span>
00299 
00300         <a class="code" href="../../d5/d9/kernldat_8c.html#a34">KiDmaIoCoherency</a> = <a class="code" href="../../d4/d9/ke_8h.html#a40">DMA_READ_DCACHE_INVALIDATE</a> | <a class="code" href="../../d4/d9/ke_8h.html#a42">DMA_WRITE_DCACHE_SNOOP</a>;
00301 
00302         <span class="comment">//</span>
00303         <span class="comment">// Set KiSharedUserData for MP boot</span>
00304         <span class="comment">//</span>
00305 
00306         <a class="code" href="../../d6/d6/ia64_2allproc_8c.html#a4">KiUserSharedDataPage</a> = LoaderBlock-&gt;u.Ia64.PcrPage2;
00307 
00308     }
00309 
00310     <span class="comment">//</span>
00311     <span class="comment">// Point to UnexpectedInterrupt function pointer</span>
00312     <span class="comment">//</span>
00313 
00314     <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; MAXIMUM_VECTOR; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> += 1) {
00315         PCR-&gt;InterruptRoutine[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>] =
00316                     (PKINTERRUPT_ROUTINE)(&amp;KxUnexpectedInterrupt.DispatchCode);
00317     }
00318 
00319     <span class="comment">//</span>
00320     <span class="comment">// Initialize the profile count and interval.</span>
00321     <span class="comment">//</span>
00322 
00323     PCR-&gt;ProfileCount = 0;
00324     PCR-&gt;ProfileInterval = 0x200000;
00325 
00326     <span class="comment">//</span>
00327     <span class="comment">// Initialize the passive release, APC, and DPC interrupt vectors.</span>
00328     <span class="comment">//</span>
00329 
00330     PCR-&gt;InterruptRoutine[0] = <a class="code" href="../../d0/d0/ki_8h.html#a129">KiPassiveRelease</a>;
00331     PCR-&gt;InterruptRoutine[APC_VECTOR] = <a class="code" href="../../d0/d0/ki_8h.html#a97">KiApcInterrupt</a>;
00332     PCR-&gt;InterruptRoutine[DISPATCH_VECTOR] = <a class="code" href="../../d0/d0/ki_8h.html#a111">KiDispatchInterrupt</a>;
00333 
00334     <span class="comment">//</span>
00335     <span class="comment">// N.B. Reserve levels, not vectors</span>
00336     <span class="comment">//</span>
00337 
00338     PCR-&gt;ReservedVectors = (1 &lt;&lt; <a class="code" href="../../d1/d3/ppcdef_8h.html#a21">PASSIVE_LEVEL</a>) | (1 &lt;&lt; <a class="code" href="../../d6/d7/halmips_8h.html#a52">APC_LEVEL</a>) | (1 &lt;&lt; <a class="code" href="../../d6/d7/halmips_8h.html#a53">DISPATCH_LEVEL</a>);
00339 
00340     <span class="comment">//</span>
00341     <span class="comment">// Initialize the set member for the current processor, set IRQL to</span>
00342     <span class="comment">// APC_LEVEL, and set the processor number.</span>
00343     <span class="comment">//</span>
00344 
00345     <a class="code" href="../../d9/d5/verifier_8c.html#a117">KeLowerIrql</a>(APC_LEVEL);
00346     PCR-&gt;SetMember = 1 &lt;&lt; Number;
00347     PCR-&gt;NotMember = ~PCR-&gt;SetMember;
00348     PCR-&gt;Number = Number;
00349 
00350     <span class="comment">//</span>
00351     <span class="comment">// Set the initial stall execution scale factor. This value will be</span>
00352     <span class="comment">// recomputed later by the HAL.</span>
00353     <span class="comment">//</span>
00354 
00355     PCR-&gt;StallScaleFactor = 50;
00356 
00357     <span class="comment">//</span>
00358     <span class="comment">// Set address of process object in thread object.</span>
00359     <span class="comment">//</span>
00360 
00361     Thread-&gt;ApcState.Process = Process;
00362 
00363 
00364     <span class="comment">//</span>
00365     <span class="comment">// Set idle process id (region id) to STARTID</span>
00366     <span class="comment">//</span>
00367 
00368     Process-&gt;ProcessRegion.RegionId = START_PROCESS_RID;
00369     Process-&gt;ProcessRegion.SequenceNumber = START_SEQUENCE;
00370     Process-&gt;SessionRegion.RegionId = START_SESSION_RID;
00371     Process-&gt;SessionRegion.RegionId = START_SEQUENCE;
00372 
00373     <span class="comment">//</span>
00374     <span class="comment">// Set the appropriate member in the active processors set.</span>
00375     <span class="comment">//</span>
00376 
00377     <a class="code" href="../../d0/d0/ki_8h.html#a7">SetMember</a>(Number, KeActiveProcessors);
00378 
00379     <span class="comment">//</span>
00380     <span class="comment">// Set the number of processors based on the maximum of the current</span>
00381     <span class="comment">// number of processors and the current processor number.</span>
00382     <span class="comment">//</span>
00383 
00384     <span class="keywordflow">if</span> ((Number + 1) &gt; <a class="code" href="../../d4/d9/ke_8h.html#a133">KeNumberProcessors</a>) {
00385         <a class="code" href="../../d4/d9/ke_8h.html#a133">KeNumberProcessors</a> = (CCHAR)(Number + 1);
00386     }
00387 
00388     <span class="comment">//</span>
00389     <span class="comment">// If the initial processor is being initialized, then initialize the</span>
00390     <span class="comment">// per system data structures.</span>
00391     <span class="comment">//</span>
00392 
00393     <span class="keywordflow">if</span> (Number == 0) {
00394 
00395         Prcb-&gt;RestartBlock = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00396 
00397         <span class="comment">//</span>
00398         <span class="comment">// Initialize the kernel debugger.</span>
00399         <span class="comment">//</span>
00400 
00401         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/4_2kdinit_8c.html#a4">KdInitSystem</a>(LoaderBlock, FALSE) == <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) {
00402             <a class="code" href="../../d9/d1/bugcheck_8c.html#a13">KeBugCheck</a>(PHASE0_INITIALIZATION_FAILED);
00403         }
00404 
00405 <span class="preprocessor">#if DBG</span>
00406 <span class="preprocessor"></span>
00407         <span class="comment">//</span>
00408         <span class="comment">// Allow a breakin to the kernel debugger if one is pending.</span>
00409         <span class="comment">//</span>
00410 
00411         <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6/4_2kdlock_8c.html#a2">KdPollBreakIn</a>() != <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>){
00412             DbgBreakPointWithStatus(DBG_STATUS_CONTROL_C);
00413         }
00414 
00415 <span class="preprocessor">#endif //DBG</span>
00416 <span class="preprocessor"></span>
00417         <span class="comment">//</span>
00418         <span class="comment">// Initialize processor block array.</span>
00419         <span class="comment">//</span>
00420 
00421         <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 1; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; <a class="code" href="../../d9/d5/ndismain_8h.html#a183">MAXIMUM_PROCESSORS</a>; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> += 1) {
00422             <a class="code" href="../../d4/d9/ke_8h.html#a139">KiProcessorBlock</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>] = (PKPRCB)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00423         }
00424 
00425         <span class="comment">//</span>
00426         <span class="comment">// Perform architecture independent initialization.</span>
00427         <span class="comment">//</span>
00428 
00429         <a class="code" href="../../d2/d0/kiinit_8c.html#a1">KiInitSystem</a>();
00430 
00431         <span class="comment">//</span>
00432         <span class="comment">// Initialize idle thread process object and then set:</span>
00433         <span class="comment">//</span>
00434         <span class="comment">//      1. all the quantum values to the maximum possible.</span>
00435         <span class="comment">//      2. the process in the balance set.</span>
00436         <span class="comment">//      3. the active processor mask to the specified processor.</span>
00437         <span class="comment">//</span>
00438 
00439         DirectoryTableBase[0] = 0;
00440         DirectoryTableBase[1] = 0;
00441 
00442         <a class="code" href="../../d3/d5/procobj_8c.html#a3">KeInitializeProcess</a>(Process,
00443                             (KPRIORITY)0,
00444                             (KAFFINITY)(0x7f),
00445                             &amp;DirectoryTableBase[0],
00446                             FALSE);
00447 
00448         Process-&gt;ThreadQuantum = MAXCHAR;
00449 
00450     }
00451 
00452     <span class="comment">//</span>
00453     <span class="comment">// Initialize idle thread object and then set:</span>
00454     <span class="comment">//</span>
00455     <span class="comment">//      1. the initial kernel stack to the specified idle stack.</span>
00456     <span class="comment">//      2. the next processor number to the specified processor.</span>
00457     <span class="comment">//      3. the thread priority to the highest possible value.</span>
00458     <span class="comment">//      4. the state of the thread to running.</span>
00459     <span class="comment">//      5. the thread affinity to the specified processor.</span>
00460     <span class="comment">//      6. the specified processor member in the process active processors</span>
00461     <span class="comment">//          set.</span>
00462     <span class="comment">//</span>
00463 
00464     <a class="code" href="../../d9/d1/thredobj_8c.html#a1">KeInitializeThread</a>(Thread, (PVOID)((ULONG_PTR)IdleStack - PAGE_SIZE),
00465                        (PKSYSTEM_ROUTINE)KeBugCheck,
00466                        (PKSTART_ROUTINE)NULL,
00467                        (PVOID)NULL, (PCONTEXT)NULL, (PVOID)NULL, Process);
00468 
00469     Thread-&gt;InitialStack = IdleStack;
00470     Thread-&gt;InitialBStore = IdleStack;
00471     Thread-&gt;StackBase = IdleStack;
00472     Thread-&gt;StackLimit = (PVOID)((ULONG_PTR)IdleStack - KERNEL_STACK_SIZE);
00473     Thread-&gt;BStoreLimit = (PVOID)((ULONG_PTR)IdleStack + KERNEL_BSTORE_SIZE);
00474     Thread-&gt;NextProcessor = Number;
00475     Thread-&gt;Priority = HIGH_PRIORITY;
00476     Thread-&gt;State = <a class="code" href="../../d4/d9/ke_8h.html#a406a193">Running</a>;
00477     Thread-&gt;Affinity = (KAFFINITY)(1 &lt;&lt; Number);
00478     Thread-&gt;WaitIrql = <a class="code" href="../../d6/d7/halmips_8h.html#a53">DISPATCH_LEVEL</a>;
00479 
00480     <span class="comment">//</span>
00481     <span class="comment">// If the current processor is 0, then set the appropriate bit in the</span>
00482     <span class="comment">// active summary of the idle process.</span>
00483     <span class="comment">//</span>
00484 
00485     <span class="keywordflow">if</span> (Number == 0) {
00486         <a class="code" href="../../d0/d0/ki_8h.html#a7">SetMember</a>(Number, Process-&gt;ActiveProcessors);
00487     }
00488 
00489     <span class="comment">//</span>
00490     <span class="comment">// Execute the executive initialization.</span>
00491     <span class="comment">//</span>
00492 
00493     <span class="keywordflow">try</span> {
00494         <a class="code" href="../../d0/d0/ki_8h.html#a86">ExpInitializeExecutive</a>(Number, LoaderBlock);
00495 
00496     } except (EXCEPTION_EXECUTE_HANDLER) {
00497         <a class="code" href="../../d9/d1/bugcheck_8c.html#a13">KeBugCheck</a> (PHASE0_EXCEPTION);
00498     }
00499 
00500 <span class="preprocessor">#if 0</span>
00501 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (Number == 0) {
00502         RUNTIME_FUNCTION LocalEntry;
00503         PRUNTIME_FUNCTION FunctionTable, FunctionEntry = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00504         ULONGLONG ControlPc;
00505         ULONG SizeOfExceptionTable;
00506         ULONG <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
00507         LONG High;
00508         LONG Middle;
00509         LONG Low;
00510         <span class="keyword">extern</span> <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a> KiNormalSystemCall(VOID);
00511 
00512         FunctionTable = (PRUNTIME_FUNCTION)<a class="code" href="../../d8/d9/imagedir_8c.html#a5">RtlImageDirectoryEntryToData</a>(
00513                             (PVOID) PsNtosImageBase,
00514                             TRUE,
00515                             IMAGE_DIRECTORY_ENTRY_EXCEPTION,
00516                             &amp;SizeOfExceptionTable);
00517 
00518         <span class="keywordflow">if</span> (FunctionTable != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00519 
00520             Low = 0;
00521             High = (SizeOfExceptionTable / <span class="keyword">sizeof</span>(RUNTIME_FUNCTION)) - 1;
00522             ControlPc = ((PPLABEL_DESCRIPTOR)KiNormalSystemCall)-&gt;EntryPoint - (ULONG_PTR)<a class="code" href="../../d1/d9/ps_8h.html#a54">PsNtosImageBase</a>;
00523 
00524             <span class="keywordflow">while</span> (High &gt;= Low) {
00525 
00526                 Middle = (Low + High) &gt;&gt; 1;
00527                 FunctionEntry = &amp;FunctionTable[Middle];
00528 
00529                 <span class="keywordflow">if</span> (ControlPc &lt; FunctionEntry-&gt;BeginAddress) {
00530                     High = Middle - 1;
00531                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ControlPc &gt;= FunctionEntry-&gt;EndAddress) {
00532                     Low = Middle + 1;
00533                 } <span class="keywordflow">else</span> {
00534                     <span class="keywordflow">break</span>;
00535                 }
00536             }
00537         }
00538 
00539         LocalEntry = *FunctionEntry;
00540         ControlPc = MM_EPC_VA - ((PPLABEL_DESCRIPTOR)KiNormalSystemCall)-&gt;EntryPoint;
00541         LocalEntry.BeginAddress += (ULONG)ControlPc;
00542         LocalEntry.EndAddress += (ULONG)ControlPc;
00543         <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a> = SizeOfExceptionTable - (ULONG)((ULONG_PTR)FunctionEntry - (ULONG_PTR)FunctionTable) - <span class="keyword">sizeof</span>(RUNTIME_FUNCTION);
00544         
00545         RtlMoveMemory((PVOID)FunctionEntry, (PVOID)(FunctionEntry+1), Size);
00546         FunctionEntry = (PRUNTIME_FUNCTION)((ULONG_PTR)FunctionTable + SizeOfExceptionTable - <span class="keyword">sizeof</span>(RUNTIME_FUNCTION));
00547         *FunctionEntry = LocalEntry;
00548     }
00549 <span class="preprocessor">#endif // 0</span>
00550 <span class="preprocessor"></span>
00551     <span class="comment">//</span>
00552     <span class="comment">// If the initial processor is being initialized, then compute the</span>
00553     <span class="comment">// timer table reciprocal value and reset the PRCB values for the</span>
00554     <span class="comment">// controllable DPC behavior in order to reflect any registry</span>
00555     <span class="comment">// overrides.</span>
00556     <span class="comment">//</span>
00557 
00558     <span class="keywordflow">if</span> (Number == 0) {
00559         <a class="code" href="../../d5/d9/kernldat_8c.html#a59">KiTimeIncrementReciprocal</a> = <a class="code" href="../../d2/d0/kiinit_8c.html#a2">KiComputeReciprocal</a>((LONG)KeMaximumIncrement,
00560                                                         &amp;KiTimeIncrementShiftCount);
00561 
00562         Prcb-&gt;MaximumDpcQueueDepth = <a class="code" href="../../d8/d0/cmdat3_8c.html#a64">KiMaximumDpcQueueDepth</a>;
00563         Prcb-&gt;MinimumDpcRate = <a class="code" href="../../d8/d0/cmdat3_8c.html#a65">KiMinimumDpcRate</a>;
00564         Prcb-&gt;AdjustDpcThreshold = <a class="code" href="../../d8/d0/cmdat3_8c.html#a66">KiAdjustDpcThreshold</a>;
00565     }
00566 
00567     <span class="comment">//</span>
00568     <span class="comment">// Raise IRQL to dispatch level and set the priority of the idle thread</span>
00569     <span class="comment">// to zero. This will have the effect of immediately causing the phase</span>
00570     <span class="comment">// one initialization thread to get scheduled for execution. The idle</span>
00571     <span class="comment">// thread priority is then set to the lowest realtime priority. This is</span>
00572     <span class="comment">// necessary so that mutexes aquired at DPC level do not cause the active</span>
00573     <span class="comment">// matrix to get corrupted.</span>
00574     <span class="comment">//</span>
00575 
00576     <a class="code" href="../../d9/d5/verifier_8c.html#a116">KeRaiseIrql</a>(DISPATCH_LEVEL, &amp;OldIrql);
00577     <a class="code" href="../../d9/d1/thredobj_8c.html#a24">KeSetPriorityThread</a>(Thread, (KPRIORITY)0);
00578     Thread-&gt;Priority = LOW_REALTIME_PRIORITY;
00579 
00580     <span class="comment">//</span>
00581     <span class="comment">// Raise IRQL to the highest level.</span>
00582     <span class="comment">//</span>
00583 
00584     <a class="code" href="../../d9/d5/verifier_8c.html#a116">KeRaiseIrql</a>(HIGH_LEVEL, &amp;OldIrql);
00585 
00586 <span class="preprocessor">#if !defined(NT_UP)</span>
00587 <span class="preprocessor"></span>
00588     <span class="comment">//</span>
00589     <span class="comment">// Indicate boot complete on secondary processor</span>
00590     <span class="comment">//</span>
00591 
00592     LoaderBlock-&gt;Prcb = 0;
00593 
00594     <span class="comment">//</span>
00595     <span class="comment">// If the current processor is not 0, then set the appropriate bit in</span>
00596     <span class="comment">// idle summary.</span>
00597     <span class="comment">//</span>
00598 
00599     <span class="keywordflow">if</span> (Number != 0) {
00600         <a class="code" href="../../d0/d0/ki_8h.html#a7">SetMember</a>(Number, KiIdleSummary);
00601     }
00602 
00603 <span class="preprocessor">#endif</span>
00604 <span class="preprocessor"></span>
00605     <span class="keywordflow">return</span>;
00606 }
}
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a2" doxytag="ia64/initkr.c::KiCacheFlushLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> KSPIN_LOCK <a class="el" href="../../d8/d2/ia64_2initkr_8c.html#a2">KiCacheFlushLock</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html#l00060">60</a> of file <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html">ia64/initkr.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/ia64_2flush_8c-source.html#l00276">KeSweepDcache()</a>, <a class="el" href="../../d2/d4/ia64_2flush_8c-source.html#l00143">KeSweepIcache()</a>, and <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html#l00078">KiInitializeKernel()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="ia64/initkr.c::KiKernelPcrPage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR <a class="el" href="../../d8/d2/ia64_2initkr_8c.html#a4">KiKernelPcrPage</a> = 0i64          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html#l00074">74</a> of file <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html">ia64/initkr.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d5/ia64_2allproc_8c-source.html#l00082">KeStartAllProcessors()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="ia64/initkr.c::KiMasterRidLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> KSPIN_LOCK <a class="el" href="../../d8/d2/ia64_2initkr_8c.html#a1">KiMasterRidLock</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html#l00053">53</a> of file <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html">ia64/initkr.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/ke_2ia64_2region_8c-source.html#l00543">KeDetachSessionSpace()</a>, <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html#l00078">KiInitializeKernel()</a>, <a class="el" href="../../d8/d5/ke_2ia64_2region_8c-source.html#l00122">KiSyncNewRegionId()</a>, <a class="el" href="../../d8/d5/ke_2ia64_2region_8c-source.html#l00041">KiSyncNewRegionIdTarget()</a>, and <a class="el" href="../../d8/d5/ke_2ia64_2region_8c-source.html#l00468">KiSyncSessionTarget()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="ia64/initkr.c::KiTbBroadcastLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> KSPIN_LOCK <a class="el" href="../../d8/d2/ia64_2initkr_8c.html#a0">KiTbBroadcastLock</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html#l00046">46</a> of file <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html">ia64/initkr.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d5/ia64_2flushtb_8c-source.html#l00247">KeFlushMultipleTb()</a>, <a class="el" href="../../d0/d5/ia64_2flushtb_8c-source.html#l00427">KeFlushSingleTb()</a>, and <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html#l00078">KiInitializeKernel()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="ia64/initkr.c::KiUserSharedDataPage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR <a class="el" href="../../d8/d2/ia64_2initkr_8c.html#a3">KiUserSharedDataPage</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html#l00067">67</a> of file <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html">ia64/initkr.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d5/ia64_2allproc_8c-source.html#l00082">KeStartAllProcessors()</a>, and <a class="el" href="../../d9/d1/ia64_2initkr_8c-source.html#l00078">KiInitializeKernel()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:12 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

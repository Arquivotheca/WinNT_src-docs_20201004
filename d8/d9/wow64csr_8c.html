<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: wow64csr.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>wow64csr.c File Reference</h1><code>#include "<a class="el" href="../../d0/d9/csrdll_8h-source.html">csrdll.h</a>"</code><br>
<code>#include "<a class="el" href="../../d0/d2/ldrp_8h-source.html">ldrp.h</a>"</code><br>
<code>#include "<a class="el" href="../../d3/d9/ntwow64_8h-source.html">ntwow64.h</a>"</code><br>

<p>
<a href="../../d9/d8/wow64csr_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d9/wow64csr_8c.html#a0">CsrClientConnectToServer</a> (IN PWSTR ObjectDirectory, IN ULONG ServerDllIndex, IN PCSR_CALLBACK_INFO CallbackInformation OPTIONAL, IN PVOID ConnectionInformation, IN OUT PULONG ConnectionInformationLength OPTIONAL, OUT PBOOLEAN CalledFromServer OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d9/wow64csr_8c.html#a1">CsrNewThread</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d9/wow64csr_8c.html#a2">CsrIdentifyAlertableThread</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d9/wow64csr_8c.html#a3">CsrSetPriorityClass</a> (IN HANDLE ProcessHandle, IN OUT PULONG PriorityClass)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a> (IN OUT PCSR_API_MSG m, IN OUT PCSR_CAPTURE_HEADER CaptureBuffer OPTIONAL, IN CSR_API_NUMBER ApiNumber, IN ULONG ArgLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCSR_CAPTURE_HEADER&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a> (IN ULONG CountMessagePointers, IN ULONG Sizecd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a> (IN PCSR_CAPTURE_HEADER CaptureBuffer)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d9/wow64csr_8c.html#a7">CsrAllocateMessagePointer</a> (IN OUT PCSR_CAPTURE_HEADER CaptureBuffer, IN ULONG Length, OUT PVOID *Pointer)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a> (IN OUT PCSR_CAPTURE_HEADER CaptureBuffer, IN PVOID <a class="el" href="../../d8/d6/ttri_8c.html#a3">Buffer</a> OPTIONAL, IN ULONG Length, OUT PVOID *CapturedBuffer)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d9/wow64csr_8c.html#a9">CsrCaptureMessageString</a> (IN OUT PCSR_CAPTURE_HEADER CaptureBuffer, IN PCSTR <a class="el" href="../../d0/d0/tdetach_8c.html#a0">String</a> OPTIONAL, IN ULONG Length, IN ULONG MaximumLength, OUT PSTRING CapturedString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PLARGE_INTEGER&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d9/wow64csr_8c.html#a10">CsrCaptureTimeout</a> (IN ULONG MilliSeconds, OUT PLARGE_INTEGER Timeout)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d9/wow64csr_8c.html#a11">CsrProbeForWrite</a> (IN PVOID Address, IN ULONG Length, IN ULONG Alignment)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d9/wow64csr_8c.html#a12">CsrProbeForRead</a> (IN PVOID Address, IN ULONG Length, IN ULONG Alignment)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a5" doxytag="wow64csr.c::CsrAllocateCaptureBuffer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCSR_CAPTURE_HEADER CsrAllocateCaptureBuffer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>CountMessagePointers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Sizecd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">88</a> of file <a class="el" href="../../d9/d8/wow64csr_8c-source.html">wow64csr.c</a>.
<p>
References <a class="el" href="../../d2/d0/ntwow64_8h.html#a4">NtWow64CsrAllocateCaptureBuffer()</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00126">AddConsoleAliasInternal()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00656">AllocConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01666">CreateConsoleScreenBuffer()</a>, <a class="el" href="../../d2/d9/csrinit_8c-source.html#l00106">CsrClientConnectToServer()</a>, <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00338">DeviceEventWorker()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00733">ExpungeConsoleCommandHistoryInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00550">GetConsoleAliasesInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00425">GetConsoleAliasesLengthInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00647">GetConsoleAliasExesInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00280">GetConsoleAliasInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00945">GetConsoleCommandHistoryInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00877">GetConsoleCommandHistoryLengthInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00414">GetConsoleFontInfo()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">GetConsoleInput()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01070">GetConsoleTitleInternal()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00191">ReadConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00585">ReadConsoleOutputInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00974">ReadConsoleOutputString()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00322">RegisterConsoleVDM()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00602">SetConsoleKeyShortcuts()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00798">SetConsoleNumberOfCommandsInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01170">SetConsoleTitleInternal()</a>, <a class="el" href="../../d5/d6/convdm_8c-source.html#l00026">VDMConsoleOperation()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00335">WriteConsoleInputInternal()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00408">WriteConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00771">WriteConsoleOutputInternal()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01212">WriteConsoleOutputString()</a>.
<p>
<pre class="fragment"><div>00092 {
00093    <span class="keywordflow">return</span> <a class="code" href="../../d2/d0/ntwow64_8h.html#a4">NtWow64CsrAllocateCaptureBuffer</a>(CountMessagePointers, Sizecd);
00094 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="wow64csr.c::CsrAllocateMessagePointer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG CsrAllocateMessagePointer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT PCSR_CAPTURE_HEADER&nbsp;</td>
          <td class="mdname" nowrap> <em>CaptureBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PVOID *&nbsp;</td>
          <td class="mdname" nowrap> <em>Pointer</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00109">109</a> of file <a class="el" href="../../d9/d8/wow64csr_8c-source.html">wow64csr.c</a>.
<p>
References <a class="el" href="../../d2/d0/ntwow64_8h.html#a6">NtWow64CsrAllocateMessagePointer()</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/csrutil_8c-source.html#l00442">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d6/d9/csrutil_8c-source.html#l00507">CsrCaptureMessageString()</a>, and <a class="el" href="../../d2/d9/csrinit_8c-source.html#l00106">CsrClientConnectToServer()</a>.
<p>
<pre class="fragment"><div>00114 {
00115  
00116    <span class="keywordflow">return</span> <a class="code" href="../../d2/d0/ntwow64_8h.html#a6">NtWow64CsrAllocateMessagePointer</a>(CaptureBuffer, Length, Pointer);
00117 
00118 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="wow64csr.c::CsrCaptureMessageBuffer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CsrCaptureMessageBuffer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT PCSR_CAPTURE_HEADER&nbsp;</td>
          <td class="mdname" nowrap> <em>CaptureBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID <a class="el" href="../../d8/d6/ttri_8c.html#a3">Buffer</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PVOID *&nbsp;</td>
          <td class="mdname" nowrap> <em>CapturedBuffer</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">122</a> of file <a class="el" href="../../d9/d8/wow64csr_8c-source.html">wow64csr.c</a>.
<p>
References <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, and <a class="el" href="../../d2/d0/ntwow64_8h.html#a7">NtWow64CsrCaptureMessageBuffer()</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00126">AddConsoleAliasInternal()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00656">AllocConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01666">CreateConsoleScreenBuffer()</a>, <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00338">DeviceEventWorker()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00733">ExpungeConsoleCommandHistoryInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00550">GetConsoleAliasesInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00425">GetConsoleAliasesLengthInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00647">GetConsoleAliasExesInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00280">GetConsoleAliasInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00945">GetConsoleCommandHistoryInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00877">GetConsoleCommandHistoryLengthInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00414">GetConsoleFontInfo()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">GetConsoleInput()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01070">GetConsoleTitleInternal()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00191">ReadConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00585">ReadConsoleOutputInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00974">ReadConsoleOutputString()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00322">RegisterConsoleVDM()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00602">SetConsoleKeyShortcuts()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00798">SetConsoleNumberOfCommandsInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01170">SetConsoleTitleInternal()</a>, <a class="el" href="../../d5/d6/convdm_8c-source.html#l00026">VDMConsoleOperation()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00335">WriteConsoleInputInternal()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00408">WriteConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00771">WriteConsoleOutputInternal()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01212">WriteConsoleOutputString()</a>.
<p>
<pre class="fragment"><div>00128 {
00129 
00130    <a class="code" href="../../d2/d0/ntwow64_8h.html#a7">NtWow64CsrCaptureMessageBuffer</a>(CaptureBuffer,Buffer,Length,CapturedBuffer);
00131 
00132 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="wow64csr.c::CsrCaptureMessageString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CsrCaptureMessageString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT PCSR_CAPTURE_HEADER&nbsp;</td>
          <td class="mdname" nowrap> <em>CaptureBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCSTR <a class="el" href="../../d0/d0/tdetach_8c.html#a0">String</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MaximumLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>CapturedString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00135">135</a> of file <a class="el" href="../../d9/d8/wow64csr_8c-source.html">wow64csr.c</a>.
<p>
References <a class="el" href="../../d2/d0/ntwow64_8h.html#a8">NtWow64CsrCaptureMessageString()</a>, and <a class="el" href="../../d5/d8/talloc_8c-source.html#l00027">String</a>.
<p>
<pre class="fragment"><div>00143 {
00144 
00145   <a class="code" href="../../d2/d0/ntwow64_8h.html#a8">NtWow64CsrCaptureMessageString</a>(CaptureBuffer, String, Length, MaximumLength, CapturedString);
00146 
00147 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="wow64csr.c::CsrCaptureTimeout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PLARGE_INTEGER CsrCaptureTimeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MilliSeconds</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PLARGE_INTEGER&nbsp;</td>
          <td class="mdname" nowrap> <em>Timeout</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00152">152</a> of file <a class="el" href="../../d9/d8/wow64csr_8c-source.html">wow64csr.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>00156 {
00157     <span class="keywordflow">if</span> (MilliSeconds == -1) {
00158         <span class="keywordflow">return</span>( <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> );
00159         }
00160     <span class="keywordflow">else</span> {
00161         Timeout-&gt;QuadPart = Int32x32To64( MilliSeconds, -10000 );
00162         <span class="keywordflow">return</span>( (PLARGE_INTEGER)Timeout );
00163         }
00164 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="wow64csr.c::CsrClientCallServer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS CsrClientCallServer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT PCSR_API_MSG&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PCSR_CAPTURE_HEADER CaptureBuffer&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CSR_API_NUMBER&nbsp;</td>
          <td class="mdname" nowrap> <em>ApiNumber</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ArgLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">75</a> of file <a class="el" href="../../d9/d8/wow64csr_8c-source.html">wow64csr.c</a>.
<p>
References <a class="el" href="../../d2/d0/ntwow64_8h.html#a3">NtWow64CsrClientCallServer()</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00126">AddConsoleAliasInternal()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00656">AllocConsoleInternal()</a>, <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00042">CallUserpExitWindowsEx()</a>, <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00228">CallUserpRegisterLogonProcess()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00553">CloseConsoleHandle()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00138">ConsoleMenuControl()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01666">CreateConsoleScreenBuffer()</a>, <a class="el" href="../../d2/d9/csrinit_8c-source.html#l00106">CsrClientConnectToServer()</a>, <a class="el" href="../../d5/d9/csrtask_8c-source.html#l00051">CsrIdentifyAlertableThread()</a>, <a class="el" href="../../d5/d9/csrtask_8c-source.html#l00073">CsrSetPriorityClass()</a>, <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00338">DeviceEventWorker()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00597">DuplicateConsoleHandle()</a>, <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00181">EndTask()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00733">ExpungeConsoleCommandHistoryInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01448">FillConsoleOutput()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00782">FlushConsoleInputBuffer()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00922">FreeConsoleInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00674">GenerateConsoleCtrlEvent()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00550">GetConsoleAliasesInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00425">GetConsoleAliasesLengthInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00647">GetConsoleAliasExesInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00500">GetConsoleAliasExesLengthInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00280">GetConsoleAliasInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00945">GetConsoleCommandHistoryInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00877">GetConsoleCommandHistoryLengthInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01316">GetConsoleCP()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00308">GetConsoleCursorInfo()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00548">GetConsoleDisplayMode()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00414">GetConsoleFontInfo()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00495">GetConsoleFontSize()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00680">GetConsoleHandleInformation()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00425">GetConsoleHardwareState()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">GetConsoleInput()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01543">GetConsoleKeyboardLayoutNameWorker()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00296">GetConsoleLangId()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00029">GetConsoleMode()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01429">GetConsoleOutputCP()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00247">GetConsoleScreenBufferInfo()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01070">GetConsoleTitleInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01617">GetConsoleWindow()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00546">GetCurrentConsoleFont()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00198">GetLargestConsoleWindowSize()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00100">GetNumberOfConsoleFonts()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00144">GetNumberOfConsoleInputEvents()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00363">GetNumberOfConsoleMouseButtons()</a>, <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00298">GetThreadDesktop()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01752">InvalidateConsoleDIBits()</a>, <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00210">Logon()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00044">OpenConsoleWInternal()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00191">ReadConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00585">ReadConsoleOutputInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00974">ReadConsoleOutputString()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00322">RegisterConsoleVDM()</a>, <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00275">RegisterServicesProcess()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01036">ScrollConsoleScreenBufferInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00736">SetConsoleActiveScreenBuffer()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01043">SetConsoleCommandHistoryMode()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01356">SetConsoleCP()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00038">SetConsoleCursor()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00925">SetConsoleCursorInfo()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00876">SetConsoleCursorPosition()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00225">SetConsoleDisplayMode()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01203">SetConsoleFont()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00734">SetConsoleHandleInformation()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00489">SetConsoleHardwareState()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01251">SetConsoleIcon()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00602">SetConsoleKeyShortcuts()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00685">SetConsoleMenuClose()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00608">SetConsoleMode()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00798">SetConsoleNumberOfCommandsInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01469">SetConsoleOutputCPInternal()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00191">SetConsolePaletteInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00827">SetConsoleScreenBufferSize()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01155">SetConsoleTextAttribute()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01170">SetConsoleTitleInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00980">SetConsoleWindowInfo()</a>, <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00250">SetLastConsoleEventActiveInternal()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00092">ShowConsoleCursor()</a>, <a class="el" href="../../d5/d6/convdm_8c-source.html#l00026">VDMConsoleOperation()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00787">VerifyConsoleIoHandle()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00335">WriteConsoleInputInternal()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00408">WriteConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00771">WriteConsoleOutputInternal()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01212">WriteConsoleOutputString()</a>.
<p>
<pre class="fragment"><div>00081 {
00082 
00083     <span class="keywordflow">return</span> <a class="code" href="../../d2/d0/ntwow64_8h.html#a3">NtWow64CsrClientCallServer</a>(m,CaptureBuffer,ApiNumber,ArgLength);
00084 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="wow64csr.c::CsrClientConnectToServer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS CsrClientConnectToServer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>ObjectDirectory</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ServerDllIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCSR_CALLBACK_INFO CallbackInformation&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>ConnectionInformation</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PULONG ConnectionInformationLength&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN CalledFromServer&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00031">31</a> of file <a class="el" href="../../d9/d8/wow64csr_8c-source.html">wow64csr.c</a>.
<p>
References <a class="el" href="../../d2/d0/ntwow64_8h.html#a0">NtWow64CsrClientConnectToServer()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00373">ConnectConsoleInternal()</a>, and <a class="el" href="../../d1/d9/csrhlpr_8h-source.html#l00055">UserConnectToServer()</a>.
<p>
<pre class="fragment"><div>00040 {
00041     <span class="keywordflow">return</span> <a class="code" href="../../d2/d0/ntwow64_8h.html#a0">NtWow64CsrClientConnectToServer</a>(ObjectDirectory,
00042                                            ServerDllIndex,
00043                                            CallbackInformation,
00044                                            ConnectionInformation,
00045                                            ConnectionInformationLength,
00046                                            CalledFromServer);
00047 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="wow64csr.c::CsrFreeCaptureBuffer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CsrFreeCaptureBuffer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCSR_CAPTURE_HEADER&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>CaptureBuffer</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">98</a> of file <a class="el" href="../../d9/d8/wow64csr_8c-source.html">wow64csr.c</a>.
<p>
References <a class="el" href="../../d2/d0/ntwow64_8h.html#a5">NtWow64CsrFreeCaptureBuffer()</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00126">AddConsoleAliasInternal()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00656">AllocConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01666">CreateConsoleScreenBuffer()</a>, <a class="el" href="../../d2/d9/csrinit_8c-source.html#l00106">CsrClientConnectToServer()</a>, <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00338">DeviceEventWorker()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00733">ExpungeConsoleCommandHistoryInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00550">GetConsoleAliasesInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00425">GetConsoleAliasesLengthInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00647">GetConsoleAliasExesInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00280">GetConsoleAliasInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00945">GetConsoleCommandHistoryInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00877">GetConsoleCommandHistoryLengthInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00414">GetConsoleFontInfo()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">GetConsoleInput()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01070">GetConsoleTitleInternal()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00191">ReadConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00585">ReadConsoleOutputInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00974">ReadConsoleOutputString()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00322">RegisterConsoleVDM()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00602">SetConsoleKeyShortcuts()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00798">SetConsoleNumberOfCommandsInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01170">SetConsoleTitleInternal()</a>, <a class="el" href="../../d5/d6/convdm_8c-source.html#l00026">VDMConsoleOperation()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00335">WriteConsoleInputInternal()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00408">WriteConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00771">WriteConsoleOutputInternal()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01212">WriteConsoleOutputString()</a>.
<p>
<pre class="fragment"><div>00102 {
00103 
00104     <a class="code" href="../../d2/d0/ntwow64_8h.html#a5">NtWow64CsrFreeCaptureBuffer</a>(CaptureBuffer);
00105 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="wow64csr.c::CsrIdentifyAlertableThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS CsrIdentifyAlertableThread           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00058">58</a> of file <a class="el" href="../../d9/d8/wow64csr_8c-source.html">wow64csr.c</a>.
<p>
References <a class="el" href="../../d2/d0/ntwow64_8h.html#a2">NtWow64CsrIdentifyAlertableThread()</a>.
<p>
<pre class="fragment"><div>00059 {
00060     <span class="keywordflow">return</span> <a class="code" href="../../d2/d0/ntwow64_8h.html#a2">NtWow64CsrIdentifyAlertableThread</a>();
00061 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="wow64csr.c::CsrNewThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS CsrNewThread           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00050">50</a> of file <a class="el" href="../../d9/d8/wow64csr_8c-source.html">wow64csr.c</a>.
<p>
References <a class="el" href="../../d2/d0/ntwow64_8h.html#a1">NtWow64CsrNewThread()</a>.
<p>
<pre class="fragment"><div>00053 {
00054     <span class="keywordflow">return</span> <a class="code" href="../../d2/d0/ntwow64_8h.html#a1">NtWow64CsrNewThread</a>();
00055 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="wow64csr.c::CsrProbeForRead" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CsrProbeForRead           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>Address</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Alignment</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00238">238</a> of file <a class="el" href="../../d9/d8/wow64csr_8c-source.html">wow64csr.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, and <a class="el" href="../../d0/d9/ppc_2exdsptch_8c-source.html#l00563">RtlRaiseStatus()</a>.
<p>
<pre class="fragment"><div>00246                    :
00247 
00248     This function probes a structure <span class="keywordflow">for</span> read accessibility.
00249     If <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> structure <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not accessible, then an exception <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> raised.
00250 
00251 Arguments:
00252 
00253     Address - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> structure to be probed.
00254 
00255     Length - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> structure.
00256 
00257     Alignment - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> required alignment of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> structure expressed
00258         as <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of bytes in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> primitive datatype (e.g., 1 <span class="keywordflow">for</span> <span class="keywordtype">char</span>,
00259         2 <span class="keywordflow">for</span> <span class="keywordtype">short</span>, 4 <span class="keywordflow">for</span> <span class="keywordtype">long</span>, and 8 <span class="keywordflow">for</span> quad).
00260 
00261 Return Value:
00262 
00263     None.
00264 
00265 --*/
00266 
00267 {
00268     <span class="keyword">volatile</span> <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> *StartAddress;
00269     <span class="keyword">volatile</span> <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> *EndAddress;
00270     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> Temp;
00271 
00272     <span class="comment">//</span>
00273     <span class="comment">// If the structure has zero length, then do not probe the structure for</span>
00274     <span class="comment">// read accessibility or alignment.</span>
00275     <span class="comment">//</span>
00276 
00277     <span class="keywordflow">if</span> (Length != 0) {
00278 
00279         <span class="comment">//</span>
00280         <span class="comment">// If the structure is not properly aligned, then raise a data</span>
00281         <span class="comment">// misalignment exception.</span>
00282         <span class="comment">//</span>
00283 
00284         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>((Alignment == 1) || (Alignment == 2) ||
00285                (Alignment == 4) || (Alignment == 8));
00286         StartAddress = (<span class="keyword">volatile</span> <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> *)Address;
00287 
00288         <span class="keywordflow">if</span> (((ULONG_PTR)StartAddress &amp; (Alignment - 1)) != 0) {
00289             <a class="code" href="../../d9/d9/ppc_2exdsptch_8c.html#a10">RtlRaiseStatus</a>(STATUS_DATATYPE_MISALIGNMENT);
00290         } <span class="keywordflow">else</span> {
00291             Temp = *StartAddress;
00292             EndAddress = StartAddress + Length - 1;
00293             Temp = *EndAddress;
00294         }
00295     }
00296 }
}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="wow64csr.c::CsrProbeForWrite" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CsrProbeForWrite           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>Address</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Alignment</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00167">167</a> of file <a class="el" href="../../d9/d8/wow64csr_8c-source.html">wow64csr.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d0/d9/csrdll_8h-source.html#l00122">CsrNtSysInfo</a>, and <a class="el" href="../../d0/d9/ppc_2exdsptch_8c-source.html#l00563">RtlRaiseStatus()</a>.
<p>
<pre class="fragment"><div>00175                    :
00176 
00177     This function probes a structure <span class="keywordflow">for</span> read accessibility.
00178     If <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> structure <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not accessible, then an exception <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> raised.
00179 
00180 Arguments:
00181 
00182     Address - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> structure to be probed.
00183 
00184     Length - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> structure.
00185 
00186     Alignment - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> required alignment of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> structure expressed
00187         as <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of bytes in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> primitive datatype (e.g., 1 <span class="keywordflow">for</span> <span class="keywordtype">char</span>,
00188         2 <span class="keywordflow">for</span> <span class="keywordtype">short</span>, 4 <span class="keywordflow">for</span> <span class="keywordtype">long</span>, and 8 <span class="keywordflow">for</span> quad).
00189 
00190 Return Value:
00191 
00192     None.
00193 
00194 --*/
00195 
00196 {
00197     <span class="keyword">volatile</span> <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> *StartAddress;
00198     <span class="keyword">volatile</span> <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> *EndAddress;
00199     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> Temp;
00200 
00201     <span class="comment">//</span>
00202     <span class="comment">// If the structure has zero length, then do not probe the structure for</span>
00203     <span class="comment">// write accessibility or alignment.</span>
00204     <span class="comment">//</span>
00205 
00206     <span class="keywordflow">if</span> (Length != 0) {
00207 
00208         <span class="comment">//</span>
00209         <span class="comment">// If the structure is not properly aligned, then raise a data</span>
00210         <span class="comment">// misalignment exception.</span>
00211         <span class="comment">//</span>
00212 
00213         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>((Alignment == 1) || (Alignment == 2) ||
00214                (Alignment == 4) || (Alignment == 8));
00215         StartAddress = (<span class="keyword">volatile</span> <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> *)Address;
00216 
00217         <span class="keywordflow">if</span> (((ULONG_PTR)StartAddress &amp; (Alignment - 1)) != 0) {
00218             <a class="code" href="../../d9/d9/ppc_2exdsptch_8c.html#a10">RtlRaiseStatus</a>(STATUS_DATATYPE_MISALIGNMENT);
00219         } <span class="keywordflow">else</span> {
00220             <span class="comment">//</span>
00221             <span class="comment">// BUG, BUG - this should not be necessary once the 386 kernel</span>
00222             <span class="comment">// makes system space inaccessable to user mode.</span>
00223             <span class="comment">//</span>
00224             <span class="keywordflow">if</span> ((ULONG_PTR)StartAddress &gt; <a class="code" href="../../d9/d9/csrdll_8h.html#a11">CsrNtSysInfo</a>.MaximumUserModeAddress) {
00225                 <a class="code" href="../../d9/d9/ppc_2exdsptch_8c.html#a10">RtlRaiseStatus</a>(STATUS_ACCESS_VIOLATION);
00226             }
00227 
00228             Temp = *StartAddress;
00229             *StartAddress = Temp;
00230             EndAddress = StartAddress + Length - 1;
00231             Temp = *EndAddress;
00232             *EndAddress = Temp;
00233         }
00234     }
00235 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="wow64csr.c::CsrSetPriorityClass" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS CsrSetPriorityClass           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>ProcessHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>PriorityClass</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00064">64</a> of file <a class="el" href="../../d9/d8/wow64csr_8c-source.html">wow64csr.c</a>.
<p>
References <a class="el" href="../../d2/d0/ntwow64_8h.html#a9">NtWow64CsrSetPriorityClass()</a>.
<p>
<pre class="fragment"><div>00068 {
00069 
00070    <span class="keywordflow">return</span> <a class="code" href="../../d2/d0/ntwow64_8h.html#a9">NtWow64CsrSetPriorityClass</a>(ProcessHandle, PriorityClass); 
00071 
00072 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:46:09 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

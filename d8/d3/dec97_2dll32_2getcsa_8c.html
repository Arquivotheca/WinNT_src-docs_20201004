<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: dec97/dll32/getcsa.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>getcsa.c File Reference</h1><code>#include "<a class="el" href="../../d1/d9/dec97_2dll32_2generic_8h-source.html">generic.h</a>"</code><br>
<code>#include "<a class="el" href="../../d7/d7/dec97_2dll32_2icmstr_8h-source.html">icmstr.h</a>"</code><br>

<p>
<a href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a0">ICMSEG</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a2">CreateColSpArray</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> CPTag, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a3">CreateColSpProc</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> CPTag, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a4">CreateFloatString</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> CPTag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a5">SendCSABWPoint</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> IlluminantWP, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> MediaWP)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a6">GetMediaWP</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> IlluminantWP, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> MediaWP)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a7">GetDeviceRGB</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a8">GetDeviceCMYK</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a9">GetDeviceGray</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a10">GetPublicArrayName</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> IntentSig, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> PublicArrayName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a11">EnableGlobalDict</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a12">GetPS2CSA_DEFG</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> <a class="el" href="../../d7/d0/cmdat2_8c.html#a27">Index</a>, int Type, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a13">GetPS2CSA_ABC</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a14">GetPS2CSA_ABC_LAB</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a15">GetPS2CSA_MONO_ABC</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a16">GetPS2CSA_MONO_A</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a17">GetPS2CSA_MONO</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a18">GetCSAFromProfile</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> DrvColorSpace, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a19">GetPS2CSA_DEFG_Intent</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBuffer, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, int Type, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL EXTERN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a20">GetPS2ColorSpaceArray</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InputIntent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBuffer, LPDWORD lpcbSize, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d3/dec97_2dll32_2getcsa_8c.html#a1">DecodeABCLab</a> []</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="dec97/dll32/getcsa.c::ICMSEG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ICMSEG          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a2" doxytag="dec97/dll32/getcsa.c::CreateColSpArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateColSpArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CPTag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="dec97/dll32/getcsa.c::CreateColSpProc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateColSpProc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CPTag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="dec97/dll32/getcsa.c::CreateFloatString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateFloatString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CPTag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="dec97/dll32/getcsa.c::EnableGlobalDict" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> EnableGlobalDict           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpMem</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00199">199</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00056">BeginOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00053">CurrentGlobalOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00052">GlobalDictOp</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00054">SetGlobalOp</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00058">TrueOp</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00200 {
00201     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00202 
00203     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00204     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, GlobalDictOp);
00205     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginOp);
00206 
00207     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CurrentGlobalOp);
00208     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TrueOp);
00209     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, SetGlobalOp);
00210     <span class="keywordflow">return</span> (lpMem - lpOldMem);
00211 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="dec97/dll32/getcsa.c::GetCSAFromProfile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetCSAFromProfile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DrvColorSpace</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l01442">1442</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01485">Convert2Ascii()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04180">GetCPElementData()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04121">GetCPElementDataSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00253">icSigGrayData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00172">icSigPs2CSATag</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d9/d6/lh__open_2pi__mem_8h-source.html#l00017">Size</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>01449 {
01450     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01451     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
01452     <span class="keywordflow">if</span> ((DrvColorSpace == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>) &amp;&amp; (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>))
01453         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01454 
01455     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigPs2CSATag) &amp;&amp;
01456         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigPs2CSATag, (LPSINT) &amp; Index) &amp;&amp;
01457         <a class="code" href="../../d2/d9/ps2_8c.html#a193">GetCPElementDataSize</a> (cp, Index, (LPSINT) &amp; Size) &amp;&amp;
01458         ((lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || <a class="code" href="../../d2/d9/ps2_8c.html#a196">GetCPElementData</a> (cp, Index, lpMem, Size)) &amp;&amp;
01459         (*lpcbSize = <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a55">Convert2Ascii</a> (cp, Index, lpMem, *lpcbSize, Size, AllowBinary)))
01460     {
01461         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01462     } <span class="keywordflow">else</span>
01463     {
01464         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01465     }
01466 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="dec97/dll32/getcsa.c::GetDeviceCMYK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetDeviceCMYK           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00079">79</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00043">DeviceCMYKTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00256">icSigCmykData</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00083 {
00084     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00085     <span class="keywordflow">if</span> ((InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>) &amp;&amp;
00086         (InpDrvClrSp != 0))
00087         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00088     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00089     {
00090         *lpcbSize = lstrlen (DeviceCMYKTag) + 8;
00091         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00092     }
00093     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00094     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DeviceCMYKTag);
00095 
00096     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00097     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00098 
00099 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="dec97/dll32/getcsa.c::GetDeviceGray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetDeviceGray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00105">105</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00044">DeviceGrayTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00042">DeviceRGBTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00253">icSigGrayData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00109 {
00110     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00111     <span class="keywordflow">if</span> ((InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) ||
00112         (InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) ||
00113         (InpDrvClrSp == 0))
00114     {
00115         <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00116         {
00117             *lpcbSize = lstrlen (DeviceRGBTag) + 8;
00118             <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00119         }
00120         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00121         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DeviceRGBTag);
00122 
00123         *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00124         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00125     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>)
00126     {
00127         <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00128         {
00129             *lpcbSize = lstrlen (DeviceGrayTag) + 8;
00130             <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00131         }
00132         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00133         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DeviceGrayTag);
00134 
00135         *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00136         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00137     }
00138 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="dec97/dll32/getcsa.c::GetDeviceRGB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetDeviceRGB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00039">39</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00042">DeviceRGBTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00043 {
00044     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00045     <span class="keywordflow">if</span> ((InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) &amp;&amp;
00046         (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) &amp;&amp;
00047         (InpDrvClrSp != 0))
00048         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00049 
00050     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00051     {
00052         *lpcbSize = lstrlen (DeviceRGBTag) + 8;
00053         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00054     }
00055     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00056     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DeviceRGBTag);
00057 
00058     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00059     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00060 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="dec97/dll32/getcsa.c::GetMediaWP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void GetMediaWP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>IlluminantWP</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>MediaWP</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00185">185</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l04087">GetCPMediaWhitePoint()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>.
<p>
<pre class="fragment"><div>00187 {
00188     <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00189     {
00190         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a192">GetCPMediaWhitePoint</a> (cp, (LPSFLOAT) &amp; MediaWP)) <span class="comment">// .. Media WhitePoint</span>
00191         {
00192             MediaWP[0] = IlluminantWP[0];
00193             MediaWP[1] = IlluminantWP[1];
00194             MediaWP[2] = IlluminantWP[2];
00195         }
00196     }
00197 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="dec97/dll32/getcsa.c::GetPS2ColorSpaceArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL EXTERN GetPS2ColorSpaceArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l01571">1571</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00070">GetCPDevSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00071">GetCPRenderIntent</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l01172">GetCSAFromProfile()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00090">GetDeviceCMYK()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00115">GetDeviceGray()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00039">GetDeviceRGB()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l01519">GetPS2CSA_ABC()</a>, <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l00812">GetPS2CSA_ABC_LAB()</a>, <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l01502">GetPS2CSA_DEFG_Intent()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l01244">GetPS2CSA_MONO()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00256">icSigCmykData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00253">icSigGrayData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00307">icUseRenderingIntent</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00124">NotSupportDEFG_S</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00125">SupportDEFG_E</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00013">TYPE_CIEBASEDDEFG</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>01578 {
01579     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> ColorSpace, <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
01580     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01581     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwSaveSize;
01582     <span class="keywordflow">if</span> (!cp)
01583         <span class="keywordflow">return</span> Success;
01584 
01585     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; ColorSpace) ||
01586         !<a class="code" href="../../d2/d9/ps2_8c.html#a42">GetCPRenderIntent</a> (cp, (LPCSIG) &amp; Intent))
01587     {
01588         <span class="keywordflow">return</span> Success;
01589     }
01590     dwSaveSize = *lpcbSize;
01591     <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a146">icUseRenderingIntent</a>)
01592         InputIntent = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
01593 
01594  <span class="comment">// Get ColorSpace from Profile.</span>
01595     <span class="keywordflow">if</span> ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>) InputIntent == <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01596     {
01597         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a182">GetCSAFromProfile</a> (cp, lpBuffer, lpcbSize,
01598                                      InpDrvClrSp, ColorSpace, AllowBinary);
01599     }
01600     <span class="keywordflow">if</span> (!Success)
01601     {
01602         <span class="keywordflow">switch</span> (ColorSpace)
01603         {
01604             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>:
01605                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01606                                                  InpDrvClrSp, (CSIG) InputIntent, 
01607                                                  TYPE_CIEBASEDDEF, AllowBinary);
01608                 <span class="keywordflow">if</span> (Success)
01609                 {                       <span class="comment">// Create CieBasedABC or DeviceRGB</span>
01610                                         <span class="comment">// for the printer</span>
01611                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01612                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01613                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01614                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01615                     <span class="keywordflow">if</span> (lpBuffer)
01616                     {
01617                         lpNewBuffer = lpBuffer + *lpcbSize;
01618                         lpOldBuffer = lpNewBuffer;
01619                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01620                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01621                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NotSupportDEFG_S);
01622                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01623                     } <span class="keywordflow">else</span>
01624                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01625 
01626                     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a184">GetPS2CSA_ABC</a> (cp, lpNewBuffer, &amp;cbNewSize,
01627                                         (CSIG)InputIntent, InpDrvClrSp, AllowBinary))
01628                         <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a7">GetDeviceRGB</a> (lpNewBuffer, &amp;cbNewSize, InpDrvClrSp);
01629 
01630                     <span class="keywordflow">if</span> (lpBuffer)
01631                     {
01632                         lpNewBuffer += cbNewSize;
01633                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01634                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, SupportDEFG_E);
01635                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01636                     } <span class="keywordflow">else</span>
01637                         *lpcbSize += cbNewSize;
01638 
01639                 }
01640                 <span class="keywordflow">if</span> (!Success)
01641                 {                           <span class="comment">// Create CieBasedABC</span>
01642                     Success = <a class="code" href="../../d2/d9/ps2_8c.html#a184">GetPS2CSA_ABC</a> (cp, lpBuffer, lpcbSize,
01643                                          (CSIG)InputIntent, InpDrvClrSp, AllowBinary);
01644                 }
01645                 <span class="keywordflow">if</span> (!Success)
01646                 {                           <span class="comment">// Create DeviceRGB</span>
01647                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a7">GetDeviceRGB</a> (lpBuffer, lpcbSize, InpDrvClrSp);
01648                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01649                 }
01650                 <span class="keywordflow">break</span>;
01651             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>:
01652                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01653                                                  InpDrvClrSp, (CSIG) InputIntent, 
01654                                                  TYPE_CIEBASEDDEFG, AllowBinary);
01655                 <span class="keywordflow">if</span> (Success)
01656                 {                       <span class="comment">// Create DeviceCMYK for the printer</span>
01657                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01658                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01659                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01660                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01661                     <span class="keywordflow">if</span> (lpBuffer)
01662                     {
01663                         lpNewBuffer = lpBuffer + *lpcbSize;
01664                         lpOldBuffer = lpNewBuffer;
01665                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01666                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01667                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NotSupportDEFG_S);
01668                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01669                     } <span class="keywordflow">else</span>
01670                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01671 
01672                     <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a8">GetDeviceCMYK</a> (lpNewBuffer, &amp;cbNewSize, InpDrvClrSp);
01673 
01674                     <span class="keywordflow">if</span> (lpBuffer)
01675                     {
01676                         lpNewBuffer += cbNewSize;
01677                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01678                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, SupportDEFG_E);
01679                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01680                     } <span class="keywordflow">else</span>
01681                         *lpcbSize += cbNewSize;
01682                 }
01683                 <span class="keywordflow">if</span> (!Success)
01684                 {                           <span class="comment">// Create DeviceCMYK</span>
01685                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a8">GetDeviceCMYK</a> (lpBuffer, lpcbSize, InpDrvClrSp);
01686                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01687                 }
01688                 <span class="keywordflow">break</span>;
01689             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>:
01690                 Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a19">GetPS2CSA_MONO</a> (cp, lpBuffer, lpcbSize, InpDrvClrSp, 
01691                                           (CSIG)InputIntent, AllowBinary);
01692                 <span class="keywordflow">if</span> (!Success)
01693                 {                           <span class="comment">// Create DeviceGray</span>
01694                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a9">GetDeviceGray</a> (lpBuffer, lpcbSize, InpDrvClrSp);
01695                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01696                 }
01697                 <span class="keywordflow">break</span>;
01698             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>:
01699                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01700                                                  InpDrvClrSp, (CSIG) InputIntent, 
01701                                                  TYPE_CIEBASEDDEF, AllowBinary);
01702                 <span class="keywordflow">if</span> (Success)
01703                 {                       <span class="comment">// Create CieBasedABC or DeviceRGB</span>
01704                                         <span class="comment">// for the printer</span>
01705                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01706                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01707                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01708                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01709                     <span class="keywordflow">if</span> (lpBuffer)
01710                     {
01711                         lpNewBuffer = lpBuffer + *lpcbSize;
01712                         lpOldBuffer = lpNewBuffer;
01713                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01714                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01715                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NotSupportDEFG_S);
01716                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01717                     } <span class="keywordflow">else</span>
01718                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01719 
01720                     <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a3">GetPS2CSA_ABC_LAB</a> (cp, lpNewBuffer, &amp;cbNewSize,
01721                                         (CSIG)InputIntent, InpDrvClrSp, AllowBinary);
01722 
01723                     <span class="keywordflow">if</span> (lpBuffer)
01724                     {
01725                         lpNewBuffer += cbNewSize;
01726                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01727                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, SupportDEFG_E);
01728                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01729                     } <span class="keywordflow">else</span>
01730                         *lpcbSize += cbNewSize;
01731                 }
01732                 <span class="keywordflow">if</span> (!Success)
01733                 {                           <span class="comment">// Create CieBasedABC</span>
01734                     Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a3">GetPS2CSA_ABC_LAB</a> (cp, lpBuffer, lpcbSize,
01735                                          (CSIG)InputIntent, InpDrvClrSp, AllowBinary);
01736                 }
01737                 <span class="keywordflow">break</span>;
01738 
01739             <span class="keywordflow">default</span>:
01740                 <span class="keywordflow">break</span>;
01741         }
01742     }
01743     <span class="keywordflow">return</span> Success;
01744 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="dec97/dll32/getcsa.c::GetPS2CSA_ABC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_ABC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00634">634</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
<pre class="fragment"><div>00636 {
00637     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> PCS, Dev;
00638     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
00639     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
00640 
00641     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i;
00642     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00643     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> Ret = 0;
00644  <span class="comment">// Check if we can generate the CS.</span>
00645  <span class="comment">// Required  tags are: red, green and blue Colorants.</span>
00646  <span class="comment">// As for TRC tags - we are quite flexible here - if we cannot find the</span>
00647  <span class="comment">// required tag - we assume the linear responce</span>
00648     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00649         !<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; Dev) ||
00650         (Dev != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) ||
00651         !<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigRedColorantTag) ||
00652         !<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigGreenColorantTag) ||
00653         !<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigBlueColorantTag) ||
00654         !<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigRedTRCTag) ||
00655         !<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigGreenTRCTag) ||
00656         !<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigBlueTRCTag))
00657     {
00658         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00659     }
00660     <span class="keywordflow">if</span> ((InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) &amp;&amp;
00661         (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) &amp;&amp;
00662         (InpDrvClrSp != 0))
00663     {
00664         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00665     }
00666  <span class="comment">// Estimate the memory size required to hold CS</span>
00667 
00668     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
00669     {
00670         *lpcbSize = 65530;
00671         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00672     }
00673  <span class="comment">// Get info about Illuminant White Point from the header</span>
00674     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);     <span class="comment">// .. Illuminant</span>
00675                                                          
00676  <span class="comment">// Support absolute whitePoint</span>
00677     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
00678 
00679  <span class="comment">//*********** Creating global data</span>
00680     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00681     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CieBasedABCBegin);
00682 
00683     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a220">EnableGlobalDict</a>(lpMem);
00684 
00685     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a212">CreateColSpArray</a> (cp, lpMem, icSigRedTRCTag, AllowBinary);
00686     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a212">CreateColSpArray</a> (cp, lpMem, icSigGreenTRCTag, AllowBinary);
00687     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a212">CreateColSpArray</a> (cp, lpMem, icSigBlueTRCTag, AllowBinary);
00688 
00689     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00690     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, SetGlobalOp);
00691     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndOp);
00692 
00693 
00694  <span class="comment">//*********** Start creating the ColorSpace</span>
00695     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00696     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
00697  <span class="comment">//********** /CIEBasedABC</span>
00698     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedABCTag);   <span class="comment">// Create entry</span>
00699     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
00700 
00701  <span class="comment">//********** Black/White Point</span>
00702     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
00703 
00704  <span class="comment">//********** /DecodeABC</span>
00705     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00706     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeABCTag);
00707     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00708 
00709     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00710     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a213">CreateColSpProc</a> (cp, lpMem, icSigRedTRCTag, AllowBinary);
00711     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00712     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a213">CreateColSpProc</a> (cp, lpMem, icSigGreenTRCTag, AllowBinary);
00713     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00714     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a213">CreateColSpProc</a> (cp, lpMem, icSigBlueTRCTag, AllowBinary);
00715     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00716 
00717  <span class="comment">//********** /MatrixABC</span>
00718     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00719     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCTag);
00720     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00721 
00722     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a214">CreateFloatString</a> (cp, lpMem, icSigRedColorantTag);
00723     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a214">CreateFloatString</a> (cp, lpMem, icSigGreenColorantTag);
00724     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a214">CreateFloatString</a> (cp, lpMem, icSigBlueColorantTag);
00725 
00726     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00727 
00728  <span class="comment">//********** /RangeLMN</span>
00729     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00730     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMNTag);
00731     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMN);
00732 
00733  <span class="comment">//********** /DecodeLMN</span>
00734     <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00735     {
00736         <span class="comment">// Support absolute whitePoint</span>
00737         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00738         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNTag);
00739         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00740         <span class="keywordflow">for</span> (i = 0; i &lt; 3; i ++)
00741         {
00742             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
00743             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)MediaWP[i]/IlluminantWP[i]);
00744             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MulOp); 
00745             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00746         }
00747         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00748     }
00749 
00750  <span class="comment">//********** End dictionary definition</span>
00751     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00752     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndDict);
00753     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00754 
00755     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00756     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CieBasedABCEnd);
00757     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) ((lpMem - lpOldMem));
00758     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00759 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="dec97/dll32/getcsa.c::GetPS2CSA_ABC_LAB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_ABC_LAB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00786">786</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00074">CieBasedABCEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00036">CIEBasedABCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00136">DecodeABCLab1</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00040">DecodeABCTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00138">DecodeLMNLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00041">DecodeLMNTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00070">GetCPDevSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05068">GetMediaWP()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00135">MatrixABCLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00029">MatrixABCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00060">MulOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00079">RangeABC_Lab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00027">RangeABCTag</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05027">SendCSABWPoint()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00069">SFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00788 {
00789     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> PCS, Dev;
00790     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
00791     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
00792 
00793     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i;
00794     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00795     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> Ret = 0;
00796  <span class="comment">// Check if we can generate the CS.</span>
00797  <span class="comment">// Required  tags are: red, green and blue Colorants.</span>
00798  <span class="comment">// As for TRC tags - we are quite flexible here - if we cannot find the</span>
00799  <span class="comment">// required tag - we assume the linear responce</span>
00800     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00801         !<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; Dev) ||
00802         (Dev != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>))
00803     {
00804         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00805     }
00806     <span class="keywordflow">if</span> ((InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>) &amp;&amp;
00807         (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) &amp;&amp;
00808         (InpDrvClrSp != 0))
00809     {
00810         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00811     }
00812  <span class="comment">// Estimate the memory size required to hold CS</span>
00813 
00814     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
00815     {
00816         *lpcbSize = 65530;
00817         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00818     }
00819  <span class="comment">// Get info about Illuminant White Point from the header</span>
00820     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);     <span class="comment">// .. Illuminant</span>
00821                                                          
00822  <span class="comment">// Support absolute whitePoint</span>
00823     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
00824 
00825  <span class="comment">//*********** Start creating the ColorSpace</span>
00826     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00827     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
00828 
00829  <span class="comment">//********** /CIEBasedABC</span>
00830     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedABCTag);   <span class="comment">// Create entry</span>
00831     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
00832 
00833  <span class="comment">//********** Black/White Point</span>
00834     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
00835 
00836  <span class="comment">//********** /RangeABC</span>
00837     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00838     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeABCTag);
00839     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeABC_Lab);
00840 
00841  <span class="comment">//********** /DecodeABC</span>
00842     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00843     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeABCTag);
00844     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeABCLab1);
00845 
00846  <span class="comment">//********** /MatrixABC</span>
00847     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00848     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCTag);
00849     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCLab);
00850 
00851  <span class="comment">//********** /DecodeLMN</span>
00852     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00853     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNTag);
00854     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00855     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i ++)
00856     {
00857         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
00858         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNLab);
00859         <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00860         {
00861             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) MediaWP[i]);
00862         }
00863         <span class="keywordflow">else</span>
00864         {
00865             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) IlluminantWP[i]);
00866         }
00867         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MulOp); 
00868         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00869         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00870     }
00871     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00872 
00873 
00874  <span class="comment">//********** End dictionary definition</span>
00875     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00876     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndDict);
00877     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00878 
00879     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00880     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CieBasedABCEnd);
00881     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) ((lpMem - lpOldMem));
00882     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00883 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="dec97/dll32/getcsa.c::GetPS2CSA_DEFG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_DEFG           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Index</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00237">237</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00005">BeginString</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00069">CieBasedDEFBegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00073">CieBasedDEFEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00068">CieBasedDEFGBegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00072">CieBasedDEFGEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00037">CIEBasedDEFGTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00038">CIEBasedDEFTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00083">Clip01</a>, <a class="el" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a48a47">CP_POSTSCRIPT_ERR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02709">CreateInputArray()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02834">CreateOutputArray()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00006">DecodeABCLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00040">DecodeABCTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00046">DecodeDEFGTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00047">DecodeDEFTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00138">DecodeLMNLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00041">DecodeLMNTag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04987">EnableGlobalDict()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00147">EncodeABCLab1</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00148">EncodeABCLab2</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00128">EndClip</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00057">EndOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00006">EndString</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00099">GetCLUTinfo()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00461">GetCPTagSig()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05068">GetMediaWP()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02953">GetPublicArrayName()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00220">icSigLut16Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00247">icSigXYZData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00115">IndexArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00110">IndexArray16b</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00087">InputArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00135">MatrixABCLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00029">MatrixABCTag</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00060">MulOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00088">OutputArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00077">RangeLMN</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00031">RangeLMNTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00131">Scale16</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00132">Scale16XYZ</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00130">Scale8</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05027">SendCSABWPoint()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00021">SetCPLastError()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00054">SetGlobalOp</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00069">SFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00127">StartClip</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00125">SupportDEFG_E</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00123">SupportDEFG_S</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00045">TableTag</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00006">TempBfSize</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00120">TestingDEFG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00134">TFunction8XYZ</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00013">TYPE_CIEBASEDDEFG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04401">WriteByteString()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00081">WriteHex</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04351">WriteHexBuffer()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04422">WriteInt2ByteString()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01152">WriteObjectN()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04381">WriteStringToken()</a>.
<p>
<pre class="fragment"><div>00245 {
00246     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> PCS, LutTag;
00247     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> IntentSig;
00248     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
00249     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
00250     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> nInputCh, nOutputCh, nGrids, SecondGrids;
00251     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> nInputTable, nOutputTable, nNumbers;
00252     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i, j, k;
00253     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
00254     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00255     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLut = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00256     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
00257     HGLOBAL hLut = 0;
00258     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> LutSize;
00259     <span class="keywordtype">char</span> PublicArrayName[<a class="code" href="../../d8/d8/aug98_2dll32_2csprof_8c.html#a1">TempBfSize</a>];
00260  <span class="comment">// Check if we can generate the CS.</span>
00261  <span class="comment">// Required  tags are: red, green and blue Colorants.</span>
00262  <span class="comment">// As for TRC tags - we are quite flexible here - if we cannot find the</span>
00263  <span class="comment">// required tag - we assume the linear responce</span>
00264     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00265         (PCS != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>) &amp;&amp; (PCS != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>) ||
00266         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a15">GetCPTagSig</a> (cp, Index, (LPCSIG) &amp; IntentSig))
00267     {
00268         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00269     }
00270     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; LutTag) ||
00271         ((LutTag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>) &amp;&amp; (LutTag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a90">icSigLut16Type</a>)) ||
00272         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; LutSize) ||
00273         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (LutSize, (HGLOBAL FAR *) &amp;hLut, (LPMEMPTR) &amp; lpLut) ||
00274         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, lpLut, LutSize))
00275     {
00276         <span class="keywordflow">if</span> (0 != hLut)
00277         {
00278             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00279         }
00280         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00281     }
00282  <span class="comment">// Estimate the memory size required to hold CS</span>
00283 
00284     <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a7">GetCLUTinfo</a>(LutTag, lpLut, &amp;nInputCh, &amp;nOutputCh, 
00285         &amp;nGrids, &amp;nInputTable, &amp;nOutputTable, &amp;i);
00286 
00287  <span class="comment">// Level 2 printers support only tri-component CIEBasedABC input,</span>
00288  <span class="comment">// but can have either 3 or 4 output channels.</span>
00289     <span class="keywordflow">if</span> (!(nOutputCh == 3) ||
00290         !((nInputCh == 3) &amp;&amp; (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a0">TYPE_CIEBASEDDEF</a>)) &amp;&amp;
00291         !((nInputCh == 4) &amp;&amp; (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)))
00292     {
00293         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a39">SetCPLastError</a> (CP_POSTSCRIPT_ERR);
00294         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00295         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00296     }
00297     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
00298     {
00299         <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00300             *lpcbSize = nOutputCh * nGrids * nGrids * nGrids * nGrids * 2;  <span class="comment">// LUT HEX bytes</span>
00301         <span class="keywordflow">else</span>
00302             *lpcbSize = nOutputCh * nGrids * nGrids * nGrids * 2;   <span class="comment">// LUT HEX bytes</span>
00303 
00304         *lpcbSize = *lpcbSize +
00305             nInputCh * nInputTable * 6 +
00306             nOutputCh * nOutputTable * 6 +  <span class="comment">// Number of INT bytes</span>
00307             nInputCh * (lstrlen (IndexArray) +
00308                         lstrlen (StartClip) +
00309                         lstrlen (EndClip)) +
00310             nOutputCh * (lstrlen (IndexArray) +
00311                          lstrlen (StartClip) +
00312                          lstrlen (EndClip)) +
00313             4096;                       <span class="comment">// + other PS stuff</span>
00314 
00315 
00316         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00317     }
00318  <span class="comment">// Get info about Illuminant White Point from the header</span>
00319     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);          <span class="comment">// .. Illuminant</span>
00320 
00321  <span class="comment">// Support absolute whitePoint</span>
00322     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
00323 
00324  <span class="comment">//*********** Testing CieBasedDEFG support</span>
00325     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00326     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TestingDEFG);
00327     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00328     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, SupportDEFG_S);
00329 
00330  <span class="comment">//*********** Creating global data</span>
00331     <a class="code" href="../../d2/d9/ps2_8c.html#a217">GetPublicArrayName</a> (cp, IntentSig, PublicArrayName);
00332     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00333     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00334         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CieBasedDEFGBegin);
00335     <span class="keywordflow">else</span>
00336         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CieBasedDEFBegin);
00337 
00338     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a220">EnableGlobalDict</a>(lpMem);
00339 
00340     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a215">CreateInputArray</a> (lpMem, nInputCh, nInputTable,
00341              (MEMPTR) PublicArrayName, LutTag, lpLut, AllowBinary, NULL);
00342 
00343     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00344     {
00345         i = nInputTable * nInputCh +
00346             nGrids * nGrids * nGrids * nGrids * nOutputCh;
00347     } <span class="keywordflow">else</span>
00348     {
00349         i = nInputTable * nInputCh +
00350             nGrids * nGrids * nGrids * nOutputCh;
00351     }
00352     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a216">CreateOutputArray</a> (lpMem, nOutputCh, nOutputTable, i,
00353              (MEMPTR) PublicArrayName, LutTag, lpLut, AllowBinary, NULL);
00354 
00355     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00356     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, SetGlobalOp);
00357     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndOp);
00358 
00359  <span class="comment">//*********** Start creating the ColorSpace</span>
00360     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00361     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
00362 
00363  <span class="comment">//********** /CIEBasedDEF(G)</span>
00364     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00365         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedDEFGTag);
00366     <span class="keywordflow">else</span>
00367         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedDEFTag);
00368     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
00369 
00370  <span class="comment">//********** Black/White Point</span>
00371     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
00372 
00373  <span class="comment">//********** /DecodeDEF(G)</span>
00374     lpLineStart = lpMem;
00375     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00376     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00377         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeDEFGTag);
00378     <span class="keywordflow">else</span>
00379         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeDEFTag);
00380 
00381     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00382     <span class="keywordflow">for</span> (i = 0; i &lt; nInputCh; i++)
00383     {
00384         lpLineStart = lpMem;
00385         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00386 
00387         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
00388 <span class="preprocessor">#if 0</span>
00389 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
00390         {
00391             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem,
00392                                   (0 == i) ? EncodeABCLab1 : EncodeABCLab2);
00393         }
00394 <span class="preprocessor">#endif</span>
00395 <span class="preprocessor"></span>        lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, StartClip);
00396         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, InputArray);
00397         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a44">WriteObjectN</a> (lpMem, (MEMPTR) PublicArrayName, lstrlen (PublicArrayName));
00398         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, i);
00399 
00400         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a27">AllowBinary</a>)               <span class="comment">// Output ASCII</span>
00401         {
00402             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
00403         } <span class="keywordflow">else</span>
00404         {                               <span class="comment">// Output BINARY</span>
00405             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00406             {
00407                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
00408             } <span class="keywordflow">else</span>
00409             {
00410                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray16b);
00411             }
00412         }
00413         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, (LutTag == icSigLut8Type) ? Scale8 : Scale16);
00414         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndClip);
00415         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00416     }
00417     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00418 
00419  <span class="comment">//********** /Table</span>
00420     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00421     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TableTag);
00422     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00423 
00424     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, nGrids);  <span class="comment">// Send down Nh</span>
00425     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, nGrids);  <span class="comment">// Send down Ni</span>
00426     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, nGrids);  <span class="comment">// Send down Nj</span>
00427     nNumbers = nGrids * nGrids * nOutputCh;
00428     SecondGrids = 1;
00429     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00430     {
00431         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, nGrids);  <span class="comment">// Send down Nk</span>
00432 <span class="comment">//      nNumbers = nGrids * nGrids * nGrids * nOutputCh ;</span>
00433         SecondGrids = nGrids;
00434     }
00435     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00436     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00437     <span class="keywordflow">for</span> (i = 0; i &lt; nGrids; i++)        <span class="comment">// Nh strings should be sent</span>
00438     {
00439         <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00440         {
00441             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00442             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00443         }
00444         <span class="keywordflow">for</span> (k = 0; k &lt; SecondGrids; k++)
00445         {
00446             lpLineStart = lpMem;
00447             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00448             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00449             {
00450                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) lpLut)-&gt;lut.data) +
00451                     nInputTable * nInputCh +
00452                     nNumbers * (i * SecondGrids + k);
00453             } <span class="keywordflow">else</span>
00454             {
00455                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) lpLut)-&gt;lut.data) +
00456                     2 * nInputTable * nInputCh +
00457                     2 * nNumbers * (i * SecondGrids + k);
00458             }
00459 
00460             <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a27">AllowBinary</a>)           <span class="comment">// Output ASCII</span>
00461             {
00462                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginString);
00463                 <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00464                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a227">WriteHexBuffer</a> (lpMem, lpTable, lpLineStart, nNumbers);
00465                 <span class="keywordflow">else</span>
00466                 {
00467                     <span class="keywordflow">for</span> (j = 0; j &lt; nNumbers; j++)
00468                     {
00469                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a45">WriteHex</a> (lpMem, ui16toSINT (lpTable) / 256);
00470                         lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
00471                         <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
00472                         {
00473                             lpLineStart = lpMem;
00474                             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00475                         }
00476                     }
00477                 }
00478                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndString);
00479             } <span class="keywordflow">else</span>
00480             {                           <span class="comment">// Output BINARY</span>
00481                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a228">WriteStringToken</a> (lpMem, 143, nNumbers);
00482                 <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00483                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a229">WriteByteString</a> (lpMem, lpTable, nNumbers);
00484                 <span class="keywordflow">else</span>
00485                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a230">WriteInt2ByteString</a> (lpMem, lpTable, nNumbers);
00486             }
00487             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00488         }
00489         <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00490         {
00491             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00492         }
00493     }
00494     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00495     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray); <span class="comment">// End array</span>
00496 
00497  <span class="comment">//********** /DecodeABC</span>
00498     lpLineStart = lpMem;
00499     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00500     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeABCTag);
00501     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00502     <span class="keywordflow">for</span> (i = 0; i &lt; nOutputCh; i++)
00503     {
00504         lpLineStart = lpMem;
00505         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00506 
00507         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
00508         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Clip01);
00509         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, OutputArray);
00510         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a44">WriteObjectN</a> (lpMem, (MEMPTR) PublicArrayName, lstrlen (PublicArrayName));
00511         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, i);
00512 
00513         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a27">AllowBinary</a>)               <span class="comment">// Output ASCII CRD</span>
00514         {
00515             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00516 
00517             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00518             {
00519                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TFunction8XYZ);
00520             } <span class="keywordflow">else</span>
00521             {
00522                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
00523                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16XYZ);
00524             }
00525         } <span class="keywordflow">else</span>
00526         {                               <span class="comment">// Output BINARY CRD</span>
00527             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00528             {
00529                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TFunction8XYZ);
00530             } <span class="keywordflow">else</span>
00531             {
00532                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray16b);
00533                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16XYZ);
00534             }
00535         }
00536 
00537  <span class="comment">// Now, We get CieBasedXYZ output. Output range 0 --&gt; 1.99997</span>
00538  <span class="comment">// If the connection space is absolute XYZ, We need to convert </span>
00539  <span class="comment">// from relative XYZ to absolute XYZ.</span>
00540         <span class="keywordflow">if</span> ((PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>) &amp;&amp;
00541             (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>))
00542         {
00543             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)MediaWP[i]/IlluminantWP[i]);
00544             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MulOp); 
00545         }
00546  <span class="comment">// If the connection space is Lab, We need to convert XYZ to Lab.</span>
00547         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
00548             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeABCLab[i]);
00549         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00550     }
00551     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00552 
00553     <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
00554     {
00555  <span class="comment">//********** /MatrixABC</span>
00556         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00557         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCTag);
00558         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCLab);
00559 
00560  <span class="comment">//********** /DecodeLMN</span>
00561         lpLineStart = lpMem;
00562         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00563         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNTag);
00564         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00565         <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
00566         {
00567             lpLineStart = lpMem;
00568             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00569 
00570             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
00571             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNLab);
00572             <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00573                 lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) MediaWP[i]);
00574             <span class="keywordflow">else</span> 
00575                 lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) IlluminantWP[i]);
00576             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MulOp);
00577             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00578         }
00579         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00580     } <span class="keywordflow">else</span>
00581     {
00582  <span class="comment">//********** /RangeLMN</span>
00583         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00584         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMNTag);
00585         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMN);
00586     }
00587 
00588  <span class="comment">//********** End dictionary definition</span>
00589     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00590     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndDict);
00591     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00592 
00593     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00594     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00595         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CieBasedDEFGEnd);
00596     <span class="keywordflow">else</span>
00597         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CieBasedDEFEnd);
00598 
00599     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00600     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, SupportDEFG_E);
00601 
00602     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00603 
00604     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00605     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00606 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="dec97/dll32/getcsa.c::GetPS2CSA_DEFG_Intent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_DEFG_Intent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l01494">1494</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l01895">GetPS2CSA_DEFG()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00303">icPerceptual</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00304">icRelativeColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00305">icSaturation</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00139">icSigAToB0Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00140">icSigAToB1Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00141">icSigAToB2Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00256">icSigCmykData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>, and <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00013">TYPE_CIEBASEDDEFG</a>.
<p>
<pre class="fragment"><div>01502 {
01503     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01504     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01505     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> icSigAToBx;
01506 
01507  <span class="comment">// Try to create CieBasedDEFG CSA first.</span>
01508     <span class="keywordflow">if</span> (((Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>) &amp;&amp; (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>) ||
01509          (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a0">TYPE_CIEBASEDDEF</a>) &amp;&amp; (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>)) &amp;&amp;
01510         (InpDrvClrSp != 0))
01511     {
01512         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01513     }
01514     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01515     {
01516         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>:
01517             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a17">icSigAToB0Tag</a>;
01518             <span class="keywordflow">break</span>;
01519         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>:
01520             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a18">icSigAToB1Tag</a>;
01521             <span class="keywordflow">break</span>;
01522         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>:
01523             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a19">icSigAToB2Tag</a>;
01524             <span class="keywordflow">break</span>;
01525         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>:
01526             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a18">icSigAToB1Tag</a>;
01527             <span class="keywordflow">break</span>;
01528         <span class="keywordflow">default</span>:
01529             <span class="keywordflow">return</span> Success;
01530     }
01531 
01532     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigAToBx) &amp;&amp;
01533         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigAToBx, (LPSINT) &amp; Index))
01534     {
01535         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a186">GetPS2CSA_DEFG</a> (cp, lpBuffer, lpcbSize, Intent, Index, Type, AllowBinary);
01536     }
01537 
01538     <span class="keywordflow">return</span> Success;
01539 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="dec97/dll32/getcsa.c::GetPS2CSA_MONO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_MONO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l01246">1246</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l01279">GetPS2CSA_MONO_A()</a>, <a class="el" href="../../d1/d3/jul98_2dll32_2getcsa_8c-source.html#l00916">GetPS2CSA_MONO_ABC()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00258">icSigDefData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00253">icSigGrayData</a>, and <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>.
<p>
<pre class="fragment"><div>01248 {
01249     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01250 <span class="preprocessor">#if 0</span>
01251 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ((InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) ||
01252         (InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) ||
01253         (InpDrvClrSp == 0))
01254     {
01255         Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a17">GetPS2CSA_MONO_ABC</a> (cp, lpMem, lpcbSize, InputIntent, AllowBinary);
01256     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>)
01257     {
01258         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a183">GetPS2CSA_MONO_A</a> (cp, lpMem, lpcbSize, InputIntent, AllowBinary);
01259     }
01260 <span class="preprocessor">#else</span>
01261 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ((InpDrvClrSp == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>) ||
01262         (InpDrvClrSp == 0))
01263     {
01264         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a183">GetPS2CSA_MONO_A</a> (cp, lpMem, lpcbSize, InputIntent, AllowBinary);
01265     }
01266     <span class="keywordflow">else</span>
01267     {
01268         Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01269     }
01270 <span class="preprocessor">#endif</span>
01271 <span class="preprocessor"></span>    <span class="keywordflow">return</span> Success;
01272 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="dec97/dll32/getcsa.c::GetPS2CSA_MONO_A" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_MONO_A           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l01073">1073</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00071">CieBasedABegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00075">CieBasedAEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00035">CIEBasedATag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00084">DecodeA3</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00137">DecodeALab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00039">DecodeATag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00138">DecodeLMNLab</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00128">EndClip</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05068">GetMediaWP()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00217">icSigCurveType</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00155">icSigGrayTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00115">IndexArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00117">lpcpCurveType</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00028">MatrixATag</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00077">RangeLMN</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00031">RangeLMNTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00131">Scale16</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05027">SendCSABWPoint()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00069">SFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00127">StartClip</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00137">ui32toSINT</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>01075 {
01076     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> nCount;
01077     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> Tag, PCS;
01078     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i, <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01079     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
01080     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
01081     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
01082     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpBuff = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01083     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> MemSize = 0;
01084     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
01085     HGLOBAL hBuff;
01086     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
01087  <span class="comment">// Check if we can generate the CS</span>
01088     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigGrayTRCTag) ||
01089         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigGrayTRCTag, &amp;Index) ||
01090         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; Tag) ||
01091         (Tag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a87">icSigCurveType</a>) ||
01092         !<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
01093         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; MemSize) ||
01094         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (MemSize, (HGLOBAL FAR *)&amp;hBuff, (LPMEMPTR) &amp; lpBuff) ||
01095         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, lpBuff, MemSize))
01096     {
01097         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> != lpBuff)
01098         {
01099             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
01100         }
01101         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01102     }
01103     nCount = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a3">ui32toSINT</a> (((lpcpCurveType) lpBuff)-&gt;curve.count);
01104 
01105  <span class="comment">// Estimate the memory size required to hold CS</span>
01106     *lpcbSize = nCount * 6 +            <span class="comment">// Number of INT elements</span>
01107         3 * (lstrlen (IndexArray) +
01108              lstrlen (StartClip) +
01109              lstrlen (EndClip)) +
01110         2048;                           <span class="comment">// + other PS stuff</span>
01111     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
01112     {
01113         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
01114         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01115     }
01116  <span class="comment">// Get info about Illuminant White Point from the header</span>
01117     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);          <span class="comment">// .. Illuminant</span>
01118 
01119  <span class="comment">// Support absolute whitePoint</span>
01120     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
01121 
01122  <span class="comment">//*********** Start creating the ColorSpace</span>
01123     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01124     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CieBasedABegin);
01125 
01126     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01127     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
01128  <span class="comment">//********** /CIEBasedA</span>
01129     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedATag); <span class="comment">// Create entry</span>
01130     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
01131 
01132  <span class="comment">//********** Black/White Point</span>
01133     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
01134 
01135  <span class="comment">//********** /DecodeA</span>
01136     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01137     lpLineStart = lpMem;
01138 
01139     <span class="keywordflow">if</span> (nCount != 0)
01140     {
01141         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeATag);
01142         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01143 
01144         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
01145         <span class="keywordflow">if</span> (nCount == 1)                <span class="comment">// Gamma supplied in ui16 format</span>
01146         {
01147             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpBuff)-&gt;curve.data);
01148             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
01149             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeA3);
01150     <span class="comment">// If the PCS is Lab, we need to convert Lab to XYZ</span>
01151     <span class="comment">// Now, the range is from 0 --&gt; 0.99997.</span>
01152     <span class="comment">// Actually, the conversion from Lab to XYZ is not needed.</span>
01153             <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
01154             {
01155                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeALab);
01156                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNLab);
01157             }
01158         } <span class="keywordflow">else</span>
01159         {
01160             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, StartClip);
01161             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpBuff)-&gt;curve.data);
01162             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01163             <span class="keywordflow">for</span> (i = 0; i &lt; nCount; i++)
01164             {
01165                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
01166                 lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
01167                 <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
01168                 {
01169                     lpLineStart = lpMem;
01170                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01171                 }
01172             }
01173             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01174             lpLineStart = lpMem;
01175             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01176 
01177             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
01178             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16);
01179     <span class="comment">// If the PCS is Lab, we need to convert Lab to XYZ</span>
01180     <span class="comment">// Now, the range is from 0 --&gt; .99997.</span>
01181     <span class="comment">// Actually, the conversion from Lab to XYZ is not needed.</span>
01182             <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
01183             {
01184                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeALab);
01185                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNLab);
01186             }
01187             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndClip);
01188         }
01189         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
01190         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01191     }
01192 
01193  <span class="comment">//********** /MatrixA</span>
01194     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01195     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixATag);
01196     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01197     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01198     {
01199         <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
01200             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) MediaWP[i]);
01201         <span class="keywordflow">else</span>
01202             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) IlluminantWP[i]);
01203     }
01204     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01205 
01206  <span class="comment">//********** /RangeLMN</span>
01207     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01208     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMNTag);
01209     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMN);
01210 
01211  <span class="comment">//********** /End dictionary</span>
01212     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndDict);  <span class="comment">// End dictionary definition</span>
01213     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01214 
01215     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
01216 
01217     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01218     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CieBasedAEnd);
01219     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
01220     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01221 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="dec97/dll32/getcsa.c::GetPS2CSA_MONO_ABC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_MONO_ABC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00908">908</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00070">CieBasedABCBegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00074">CieBasedABCEnd</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00036">CIEBasedABCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00084">DecodeA3</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00040">DecodeABCTag</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00050">DupOp</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00128">EndClip</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05068">GetMediaWP()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00217">icSigCurveType</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00155">icSigGrayTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00115">IndexArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00117">lpcpCurveType</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00029">MatrixABCTag</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00077">RangeLMN</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00031">RangeLMNTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00131">Scale16</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05027">SendCSABWPoint()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00069">SFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00127">StartClip</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00137">ui32toSINT</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00910 {
00911     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> nCount;
00912     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> Tag, PCS;
00913     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i, j, <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00914     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
00915     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
00916     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
00917     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpBuff = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00918     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> MemSize = 0;
00919     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00920     HGLOBAL hBuff;
00921     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
00922  <span class="comment">// Check if we can generate the CS</span>
00923     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigGrayTRCTag) ||
00924         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigGrayTRCTag, &amp;Index) ||
00925         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; Tag) ||
00926         (Tag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a87">icSigCurveType</a>) ||
00927         !<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00928         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; MemSize) ||
00929         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (MemSize, (HGLOBAL FAR *)&amp;hBuff, (LPMEMPTR) &amp; lpBuff) ||
00930         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, lpBuff, MemSize))
00931     {
00932         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> != lpBuff)
00933         {
00934             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
00935         }
00936         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00937     }
00938     nCount = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a3">ui32toSINT</a> (((lpcpCurveType) lpBuff)-&gt;curve.count);
00939 
00940  <span class="comment">// Estimate the memory size required to hold CS</span>
00941     *lpcbSize = nCount * 6 +            <span class="comment">// Number of INT elements</span>
00942         3 * (lstrlen (IndexArray) +
00943              lstrlen (StartClip) +
00944              lstrlen (EndClip)) +
00945         2048;                           <span class="comment">// + other PS stuff</span>
00946     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
00947     {
00948         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
00949         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00950     }
00951  <span class="comment">// Get info about Illuminant White Point from the header</span>
00952     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);          <span class="comment">// .. Illuminant</span>
00953 
00954  <span class="comment">// Support absolute whitePoint</span>
00955     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
00956 
00957  <span class="comment">//*********** Start creating the ColorSpace</span>
00958     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00959     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CieBasedABCBegin);
00960 
00961     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00962     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
00963  <span class="comment">//********** /CIEBasedABC</span>
00964     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedABCTag);   <span class="comment">// Create entry</span>
00965     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
00966 
00967  <span class="comment">//********** Black/White Point</span>
00968     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
00969 
00970  <span class="comment">//********** /DecodeABC</span>
00971     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00972     lpLineStart = lpMem;
00973 
00974     <span class="keywordflow">if</span> (nCount != 0)
00975     {
00976         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeABCTag);
00977         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00978 
00979         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
00980         <span class="keywordflow">if</span> (nCount == 1)                <span class="comment">// Gamma supplied in ui16 format</span>
00981         {
00982             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpBuff)-&gt;curve.data);
00983             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
00984             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeA3);
00985         } <span class="keywordflow">else</span>
00986         {
00987             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, StartClip);
00988             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpBuff)-&gt;curve.data);
00989             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00990             <span class="keywordflow">for</span> (i = 0; i &lt; nCount; i++)
00991             {
00992                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
00993                 lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
00994                 <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
00995                 {
00996                     lpLineStart = lpMem;
00997                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00998                 }
00999             }
01000             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01001             lpLineStart = lpMem;
01002             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01003 
01004             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
01005             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16);
01006             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndClip);
01007         }
01008         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
01009         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DupOp);
01010         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DupOp);
01011         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01012     }
01013  <span class="comment">//********** /MatrixABC</span>
01014     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01015     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCTag);
01016     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01017     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i ++)
01018     {
01019         <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++)
01020         {
01021             <span class="keywordflow">if</span> (i != j)
01022                 lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)0);
01023             <span class="keywordflow">else</span>
01024             {
01025                 <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
01026                     lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)MediaWP[i]);
01027                 <span class="keywordflow">else</span>
01028                     lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)IlluminantWP[i]);
01029             }
01030         }
01031     }
01032     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01033 
01034  <span class="comment">//********** /RangeLMN</span>
01035     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01036     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMNTag);
01037     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMN);
01038 
01039 
01040     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndDict);  <span class="comment">// End dictionary definition</span>
01041     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01042 
01043     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hBuff);
01044 
01045     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01046     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CieBasedABCEnd);
01047     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
01048     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01049 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="dec97/dll32/getcsa.c::GetPublicArrayName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> GetPublicArrayName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>IntentSig</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PublicArrayName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00144">144</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>.
<p>
<pre class="fragment"><div>00145 {
00146     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> OldPtr;
00147     OldPtr = PublicArrayName;
00148     PublicArrayName[0] = 0;
00149     MemCopy (PublicArrayName, (MEMPTR) &amp; IntentSig, <span class="keyword">sizeof</span> (CSIG));
00150     PublicArrayName += <span class="keyword">sizeof</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>);
00151     PublicArrayName[0] = 0;
00152     <span class="keywordflow">return</span> (PublicArrayName - OldPtr);
00153 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="dec97/dll32/getcsa.c::SendCSABWPoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> SendCSABWPoint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>IlluminantWP</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>MediaWP</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00155">155</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00013">BlackPoint</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00022">BlackPointTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00021">WhitePointTag</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>00157 {
00158     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>   i;
00159     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00160 
00161  <span class="comment">//********** /BlackPoint</span>
00162     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00163     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BlackPointTag);
00164     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BlackPoint);
00165 
00166  <span class="comment">//********** /WhitePoint</span>
00167     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00168     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, WhitePointTag);
00169     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00170     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
00171     {
00172         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a> == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00173         {
00174             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) MediaWP[i]);
00175         }
00176         <span class="keywordflow">else</span>
00177         {
00178             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) IlluminantWP[i]);
00179         }
00180     }
00181     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00182     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpMem - lpOldMem);
00183 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a1" doxytag="dec97/dll32/getcsa.c::DecodeABCLab" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* <a class="el" href="../../d2/d9/ps2_8c.html#a172">DecodeABCLab</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {<span class="stringliteral">"50 mul 16 add 116 div "</span>, 
                               <span class="stringliteral">"128 mul 128 sub 500 div"</span>, 
                               <span class="stringliteral">"128 mul 128 sub 200 div"</span>}
</div></pre>
<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00006">6</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00237">GetPS2CSA_DEFG()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:52 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: getsetrg.c Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>getsetrg.c</h1><a href="../../d7/d5/mips_2getsetrg_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*++</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1991  Microsoft Corporation</span>
00004 <span class="comment"></span>
00005 <span class="comment">Module Name:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    getsetrg.c</span>
00008 <span class="comment"></span>
00009 <span class="comment">Abstract:</span>
00010 <span class="comment"></span>
00011 <span class="comment">    This module implement the code necessary to get and set register values.</span>
00012 <span class="comment">    These routines are used during the emulation of unaligned data references</span>
00013 <span class="comment">    and floating point exceptions.</span>
00014 <span class="comment"></span>
00015 <span class="comment">Author:</span>
00016 <span class="comment"></span>
00017 <span class="comment">    David N. Cutler (davec) 17-Jun-1991</span>
00018 <span class="comment"></span>
00019 <span class="comment">Environment:</span>
00020 <span class="comment"></span>
00021 <span class="comment">    Kernel mode only.</span>
00022 <span class="comment"></span>
00023 <span class="comment">Revision History:</span>
00024 <span class="comment"></span>
00025 <span class="comment">--*/</span>
00026 
00027 <span class="preprocessor">#include "<a class="code" href="../../d0/d0/ki_8h.html">ki.h</a>"</span>
00028 
00029 ULONG
<a name="l00030"></a><a class="code" href="../../d7/d5/mips_2getsetrg_8c.html#a0">00030</a> <a class="code" href="../../d8/d5/ppc_2getsetrg_8c.html#a0">KiGetRegisterValue</a> (
00031     IN ULONG Register,
00032     IN PKEXCEPTION_FRAME ExceptionFrame,
00033     IN PKTRAP_FRAME TrapFrame
00034     )
00035 
00036 <span class="comment">/*++</span>
00037 <span class="comment"></span>
00038 <span class="comment">Routine Description:</span>
00039 <span class="comment"></span>
00040 <span class="comment">    This function is called to get the 32-bit value of a register from the</span>
00041 <span class="comment">    specified exception or trap frame.</span>
00042 <span class="comment"></span>
00043 <span class="comment">Arguments:</span>
00044 <span class="comment"></span>
00045 <span class="comment">    Register - Supplies the number of the register whose value is to be</span>
00046 <span class="comment">        returned. Integer registers are specified as 0 - 31 and floating</span>
00047 <span class="comment">        registers are specified as 32 - 63.</span>
00048 <span class="comment"></span>
00049 <span class="comment">    ExceptionFrame - Supplies a pointer to an exception frame.</span>
00050 <span class="comment"></span>
00051 <span class="comment">    TrapFrame - Supplies a pointer to a trap frame.</span>
00052 <span class="comment"></span>
00053 <span class="comment">Return Value:</span>
00054 <span class="comment"></span>
00055 <span class="comment">    The value of the specified register is returned as the function value.</span>
00056 <span class="comment"></span>
00057 <span class="comment">--*/</span>
00058 
00059 {
00060 
00061     <span class="comment">//</span>
00062     <span class="comment">// Dispatch on the register number.</span>
00063     <span class="comment">//</span>
00064 
00065     <span class="keywordflow">if</span> (Register == 0) {
00066         <span class="keywordflow">return</span> 0;
00067 
00068     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Register &lt; 32) {
00069         <span class="keywordflow">return</span> (ULONG)(&amp;TrapFrame-&gt;XIntZero)[Register];
00070 
00071     } <span class="keywordflow">else</span> {
00072         <span class="keywordflow">switch</span> (Register) {
00073 
00074             <span class="comment">//</span>
00075             <span class="comment">// Floating register F0.</span>
00076             <span class="comment">//</span>
00077 
00078         <span class="keywordflow">case</span> 32:
00079             <span class="keywordflow">return</span> TrapFrame-&gt;FltF0;
00080 
00081             <span class="comment">//</span>
00082             <span class="comment">// Floating register F1.</span>
00083             <span class="comment">//</span>
00084 
00085         <span class="keywordflow">case</span> 33:
00086             <span class="keywordflow">return</span> TrapFrame-&gt;FltF1;
00087 
00088             <span class="comment">//</span>
00089             <span class="comment">// Floating register F2.</span>
00090             <span class="comment">//</span>
00091 
00092         <span class="keywordflow">case</span> 34:
00093             <span class="keywordflow">return</span> TrapFrame-&gt;FltF2;
00094 
00095             <span class="comment">//</span>
00096             <span class="comment">// Floating register F3.</span>
00097             <span class="comment">//</span>
00098 
00099         <span class="keywordflow">case</span> 35:
00100             <span class="keywordflow">return</span> TrapFrame-&gt;FltF3;
00101 
00102             <span class="comment">//</span>
00103             <span class="comment">// Floating register F4.</span>
00104             <span class="comment">//</span>
00105 
00106         <span class="keywordflow">case</span> 36:
00107             <span class="keywordflow">return</span> TrapFrame-&gt;FltF4;
00108 
00109             <span class="comment">//</span>
00110             <span class="comment">// Floating register F5.</span>
00111             <span class="comment">//</span>
00112 
00113         <span class="keywordflow">case</span> 37:
00114             <span class="keywordflow">return</span> TrapFrame-&gt;FltF5;
00115 
00116             <span class="comment">//</span>
00117             <span class="comment">// Floating register F6.</span>
00118             <span class="comment">//</span>
00119 
00120         <span class="keywordflow">case</span> 38:
00121             <span class="keywordflow">return</span> TrapFrame-&gt;FltF6;
00122 
00123             <span class="comment">//</span>
00124             <span class="comment">// Floating register F7.</span>
00125             <span class="comment">//</span>
00126 
00127         <span class="keywordflow">case</span> 39:
00128             <span class="keywordflow">return</span> TrapFrame-&gt;FltF7;
00129 
00130             <span class="comment">//</span>
00131             <span class="comment">// Floating register F8.</span>
00132             <span class="comment">//</span>
00133 
00134         <span class="keywordflow">case</span> 40:
00135             <span class="keywordflow">return</span> TrapFrame-&gt;FltF8;
00136 
00137             <span class="comment">//</span>
00138             <span class="comment">// Floating register F9.</span>
00139             <span class="comment">//</span>
00140 
00141         <span class="keywordflow">case</span> 41:
00142             <span class="keywordflow">return</span> TrapFrame-&gt;FltF9;
00143 
00144             <span class="comment">//</span>
00145             <span class="comment">// Floating register F10.</span>
00146             <span class="comment">//</span>
00147 
00148         <span class="keywordflow">case</span> 42:
00149             <span class="keywordflow">return</span> TrapFrame-&gt;FltF10;
00150 
00151             <span class="comment">//</span>
00152             <span class="comment">// Floating register F11.</span>
00153             <span class="comment">//</span>
00154 
00155         <span class="keywordflow">case</span> 43:
00156             <span class="keywordflow">return</span> TrapFrame-&gt;FltF11;
00157 
00158             <span class="comment">//</span>
00159             <span class="comment">// Floating register F12.</span>
00160             <span class="comment">//</span>
00161 
00162         <span class="keywordflow">case</span> 44:
00163             <span class="keywordflow">return</span> TrapFrame-&gt;FltF12;
00164 
00165             <span class="comment">//</span>
00166             <span class="comment">// Floating register F13.</span>
00167             <span class="comment">//</span>
00168 
00169         <span class="keywordflow">case</span> 45:
00170             <span class="keywordflow">return</span> TrapFrame-&gt;FltF13;
00171 
00172             <span class="comment">//</span>
00173             <span class="comment">// Floating register F14.</span>
00174             <span class="comment">//</span>
00175 
00176         <span class="keywordflow">case</span> 46:
00177             <span class="keywordflow">return</span> TrapFrame-&gt;FltF14;
00178 
00179             <span class="comment">//</span>
00180             <span class="comment">// Floating register F15.</span>
00181             <span class="comment">//</span>
00182 
00183         <span class="keywordflow">case</span> 47:
00184             <span class="keywordflow">return</span> TrapFrame-&gt;FltF15;
00185 
00186             <span class="comment">//</span>
00187             <span class="comment">// Floating register F16.</span>
00188             <span class="comment">//</span>
00189 
00190         <span class="keywordflow">case</span> 48:
00191             <span class="keywordflow">return</span> TrapFrame-&gt;FltF16;
00192 
00193             <span class="comment">//</span>
00194             <span class="comment">// Floating register F17.</span>
00195             <span class="comment">//</span>
00196 
00197         <span class="keywordflow">case</span> 49:
00198             <span class="keywordflow">return</span> TrapFrame-&gt;FltF17;
00199 
00200             <span class="comment">//</span>
00201             <span class="comment">// Floating register F18.</span>
00202             <span class="comment">//</span>
00203 
00204         <span class="keywordflow">case</span> 50:
00205             <span class="keywordflow">return</span> TrapFrame-&gt;FltF18;
00206 
00207             <span class="comment">//</span>
00208             <span class="comment">// Floating register F19.</span>
00209             <span class="comment">//</span>
00210 
00211         <span class="keywordflow">case</span> 51:
00212             <span class="keywordflow">return</span> TrapFrame-&gt;FltF19;
00213 
00214             <span class="comment">//</span>
00215             <span class="comment">// Floating register F20.</span>
00216             <span class="comment">//</span>
00217 
00218         <span class="keywordflow">case</span> 52:
00219             <span class="keywordflow">return</span> ExceptionFrame-&gt;FltF20;
00220 
00221             <span class="comment">//</span>
00222             <span class="comment">// Floating register F21.</span>
00223             <span class="comment">//</span>
00224 
00225         <span class="keywordflow">case</span> 53:
00226             <span class="keywordflow">return</span> ExceptionFrame-&gt;FltF21;
00227 
00228             <span class="comment">//</span>
00229             <span class="comment">// Floating register F22.</span>
00230             <span class="comment">//</span>
00231 
00232         <span class="keywordflow">case</span> 54:
00233             <span class="keywordflow">return</span> ExceptionFrame-&gt;FltF22;
00234 
00235             <span class="comment">//</span>
00236             <span class="comment">// Floating register F23.</span>
00237             <span class="comment">//</span>
00238 
00239         <span class="keywordflow">case</span> 55:
00240             <span class="keywordflow">return</span> ExceptionFrame-&gt;FltF23;
00241 
00242             <span class="comment">//</span>
00243             <span class="comment">// Floating register F24.</span>
00244             <span class="comment">//</span>
00245 
00246         <span class="keywordflow">case</span> 56:
00247             <span class="keywordflow">return</span> ExceptionFrame-&gt;FltF24;
00248 
00249             <span class="comment">//</span>
00250             <span class="comment">// Floating register F25.</span>
00251             <span class="comment">//</span>
00252 
00253         <span class="keywordflow">case</span> 57:
00254             <span class="keywordflow">return</span> ExceptionFrame-&gt;FltF25;
00255 
00256             <span class="comment">//</span>
00257             <span class="comment">// Floating register F26.</span>
00258             <span class="comment">//</span>
00259 
00260         <span class="keywordflow">case</span> 58:
00261             <span class="keywordflow">return</span> ExceptionFrame-&gt;FltF26;
00262 
00263             <span class="comment">//</span>
00264             <span class="comment">// Floating register F27.</span>
00265             <span class="comment">//</span>
00266 
00267         <span class="keywordflow">case</span> 59:
00268             <span class="keywordflow">return</span> ExceptionFrame-&gt;FltF27;
00269 
00270             <span class="comment">//</span>
00271             <span class="comment">// Floating register F28.</span>
00272             <span class="comment">//</span>
00273 
00274         <span class="keywordflow">case</span> 60:
00275             <span class="keywordflow">return</span> ExceptionFrame-&gt;FltF28;
00276 
00277             <span class="comment">//</span>
00278             <span class="comment">// Floating register F29.</span>
00279             <span class="comment">//</span>
00280 
00281         <span class="keywordflow">case</span> 61:
00282             <span class="keywordflow">return</span> ExceptionFrame-&gt;FltF29;
00283 
00284             <span class="comment">//</span>
00285             <span class="comment">// Floating register F30.</span>
00286             <span class="comment">//</span>
00287 
00288         <span class="keywordflow">case</span> 62:
00289             <span class="keywordflow">return</span> ExceptionFrame-&gt;FltF30;
00290 
00291             <span class="comment">//</span>
00292             <span class="comment">// Floating register F31.</span>
00293             <span class="comment">//</span>
00294 
00295         <span class="keywordflow">case</span> 63:
00296             <span class="keywordflow">return</span> ExceptionFrame-&gt;FltF31;
00297         }
00298     }
00299 }
00300 
00301 ULONGLONG
<a name="l00302"></a><a class="code" href="../../d7/d5/mips_2getsetrg_8c.html#a1">00302</a> <a class="code" href="../../d7/d5/mips_2getsetrg_8c.html#a1">KiGetRegisterValue64</a> (
00303     IN ULONG Register,
00304     IN PKEXCEPTION_FRAME ExceptionFrame,
00305     IN PKTRAP_FRAME TrapFrame
00306     )
00307 
00308 <span class="comment">/*++</span>
00309 <span class="comment"></span>
00310 <span class="comment">Routine Description:</span>
00311 <span class="comment"></span>
00312 <span class="comment">    This function is called to get the 64-bit value of a register from the</span>
00313 <span class="comment">    specified exception or trap frame.</span>
00314 <span class="comment"></span>
00315 <span class="comment">Arguments:</span>
00316 <span class="comment"></span>
00317 <span class="comment">    Register - Supplies the number of the register whose value is to be</span>
00318 <span class="comment">        returned. Integer registers are specified as 0 - 31 and floating</span>
00319 <span class="comment">        registers are specified as 32 - 63.</span>
00320 <span class="comment"></span>
00321 <span class="comment">    ExceptionFrame - Supplies a pointer to an exception frame.</span>
00322 <span class="comment"></span>
00323 <span class="comment">    TrapFrame - Supplies a pointer to a trap frame.</span>
00324 <span class="comment"></span>
00325 <span class="comment">Return Value:</span>
00326 <span class="comment"></span>
00327 <span class="comment">    The value of the specified register is returned as the function value.</span>
00328 <span class="comment"></span>
00329 <span class="comment">--*/</span>
00330 
00331 {
00332 
00333     <span class="comment">//</span>
00334     <span class="comment">// Dispatch on the register number.</span>
00335     <span class="comment">//</span>
00336 
00337     <span class="keywordflow">if</span> (Register == 0) {
00338         <span class="keywordflow">return</span> 0;
00339 
00340     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Register &lt; 32) {
00341         <span class="keywordflow">return</span> (&amp;TrapFrame-&gt;XIntZero)[Register];
00342 
00343     } <span class="keywordflow">else</span> {
00344         <span class="keywordflow">switch</span> (Register) {
00345 
00346             <span class="comment">//</span>
00347             <span class="comment">// Floating register F0.</span>
00348             <span class="comment">//</span>
00349 
00350         <span class="keywordflow">case</span> 32:
00351             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF0;
00352 
00353             <span class="comment">//</span>
00354             <span class="comment">// Floating register F1.</span>
00355             <span class="comment">//</span>
00356 
00357         <span class="keywordflow">case</span> 33:
00358             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF1;
00359 
00360             <span class="comment">//</span>
00361             <span class="comment">// Floating register F2.</span>
00362             <span class="comment">//</span>
00363 
00364         <span class="keywordflow">case</span> 34:
00365             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF2;
00366 
00367             <span class="comment">//</span>
00368             <span class="comment">// Floating register F3.</span>
00369             <span class="comment">//</span>
00370 
00371         <span class="keywordflow">case</span> 35:
00372             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF3;
00373 
00374             <span class="comment">//</span>
00375             <span class="comment">// Floating register F4.</span>
00376             <span class="comment">//</span>
00377 
00378         <span class="keywordflow">case</span> 36:
00379             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF4;
00380 
00381             <span class="comment">//</span>
00382             <span class="comment">// Floating register F5.</span>
00383             <span class="comment">//</span>
00384 
00385         <span class="keywordflow">case</span> 37:
00386             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF5;
00387 
00388             <span class="comment">//</span>
00389             <span class="comment">// Floating register F6.</span>
00390             <span class="comment">//</span>
00391 
00392         <span class="keywordflow">case</span> 38:
00393             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF6;
00394 
00395             <span class="comment">//</span>
00396             <span class="comment">// Floating register F7.</span>
00397             <span class="comment">//</span>
00398 
00399         <span class="keywordflow">case</span> 39:
00400             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF7;
00401 
00402             <span class="comment">//</span>
00403             <span class="comment">// Floating register F8.</span>
00404             <span class="comment">//</span>
00405 
00406         <span class="keywordflow">case</span> 40:
00407             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF8;
00408 
00409             <span class="comment">//</span>
00410             <span class="comment">// Floating register F9.</span>
00411             <span class="comment">//</span>
00412 
00413         <span class="keywordflow">case</span> 41:
00414             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF9;
00415 
00416             <span class="comment">//</span>
00417             <span class="comment">// Floating register F10.</span>
00418             <span class="comment">//</span>
00419 
00420         <span class="keywordflow">case</span> 42:
00421             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF10;
00422 
00423             <span class="comment">//</span>
00424             <span class="comment">// Floating register F11.</span>
00425             <span class="comment">//</span>
00426 
00427         <span class="keywordflow">case</span> 43:
00428             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF11;
00429 
00430             <span class="comment">//</span>
00431             <span class="comment">// Floating register F12.</span>
00432             <span class="comment">//</span>
00433 
00434         <span class="keywordflow">case</span> 44:
00435             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF12;
00436 
00437             <span class="comment">//</span>
00438             <span class="comment">// Floating register F13.</span>
00439             <span class="comment">//</span>
00440 
00441         <span class="keywordflow">case</span> 45:
00442             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF13;
00443 
00444             <span class="comment">//</span>
00445             <span class="comment">// Floating register F14.</span>
00446             <span class="comment">//</span>
00447 
00448         <span class="keywordflow">case</span> 46:
00449             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF14;
00450 
00451             <span class="comment">//</span>
00452             <span class="comment">// Floating register F15.</span>
00453             <span class="comment">//</span>
00454 
00455         <span class="keywordflow">case</span> 47:
00456             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF15;
00457 
00458             <span class="comment">//</span>
00459             <span class="comment">// Floating register F16.</span>
00460             <span class="comment">//</span>
00461 
00462         <span class="keywordflow">case</span> 48:
00463             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF16;
00464 
00465             <span class="comment">//</span>
00466             <span class="comment">// Floating register F17.</span>
00467             <span class="comment">//</span>
00468 
00469         <span class="keywordflow">case</span> 49:
00470             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF17;
00471 
00472             <span class="comment">//</span>
00473             <span class="comment">// Floating register F18.</span>
00474             <span class="comment">//</span>
00475 
00476         <span class="keywordflow">case</span> 50:
00477             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF18;
00478 
00479             <span class="comment">//</span>
00480             <span class="comment">// Floating register F19.</span>
00481             <span class="comment">//</span>
00482 
00483         <span class="keywordflow">case</span> 51:
00484             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF19;
00485 
00486             <span class="comment">//</span>
00487             <span class="comment">// Floating register F20.</span>
00488             <span class="comment">//</span>
00489 
00490         <span class="keywordflow">case</span> 52:
00491             <span class="keywordflow">return</span> ExceptionFrame-&gt;XFltF20;
00492 
00493             <span class="comment">//</span>
00494             <span class="comment">// Floating register F21.</span>
00495             <span class="comment">//</span>
00496 
00497         <span class="keywordflow">case</span> 53:
00498             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF21;
00499 
00500             <span class="comment">//</span>
00501             <span class="comment">// Floating register F22.</span>
00502             <span class="comment">//</span>
00503 
00504         <span class="keywordflow">case</span> 54:
00505             <span class="keywordflow">return</span> ExceptionFrame-&gt;XFltF22;
00506 
00507             <span class="comment">//</span>
00508             <span class="comment">// Floating register F23.</span>
00509             <span class="comment">//</span>
00510 
00511         <span class="keywordflow">case</span> 55:
00512             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF23;
00513 
00514             <span class="comment">//</span>
00515             <span class="comment">// Floating register F24.</span>
00516             <span class="comment">//</span>
00517 
00518         <span class="keywordflow">case</span> 56:
00519             <span class="keywordflow">return</span> ExceptionFrame-&gt;XFltF24;
00520 
00521             <span class="comment">//</span>
00522             <span class="comment">// Floating register F25.</span>
00523             <span class="comment">//</span>
00524 
00525         <span class="keywordflow">case</span> 57:
00526             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF25;
00527 
00528             <span class="comment">//</span>
00529             <span class="comment">// Floating register F26.</span>
00530             <span class="comment">//</span>
00531 
00532         <span class="keywordflow">case</span> 58:
00533             <span class="keywordflow">return</span> ExceptionFrame-&gt;XFltF26;
00534 
00535             <span class="comment">//</span>
00536             <span class="comment">// Floating register F27.</span>
00537             <span class="comment">//</span>
00538 
00539         <span class="keywordflow">case</span> 59:
00540             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF27;
00541 
00542             <span class="comment">//</span>
00543             <span class="comment">// Floating register F28.</span>
00544             <span class="comment">//</span>
00545 
00546         <span class="keywordflow">case</span> 60:
00547             <span class="keywordflow">return</span> ExceptionFrame-&gt;XFltF28;
00548 
00549             <span class="comment">//</span>
00550             <span class="comment">// Floating register F29.</span>
00551             <span class="comment">//</span>
00552 
00553         <span class="keywordflow">case</span> 61:
00554             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF29;
00555 
00556             <span class="comment">//</span>
00557             <span class="comment">// Floating register F30.</span>
00558             <span class="comment">//</span>
00559 
00560         <span class="keywordflow">case</span> 62:
00561             <span class="keywordflow">return</span> ExceptionFrame-&gt;XFltF30;
00562 
00563             <span class="comment">//</span>
00564             <span class="comment">// Floating register F31.</span>
00565             <span class="comment">//</span>
00566 
00567         <span class="keywordflow">case</span> 63:
00568             <span class="keywordflow">return</span> TrapFrame-&gt;XFltF31;
00569         }
00570     }
00571 }
00572 
00573 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00574"></a><a class="code" href="../../d7/d5/mips_2getsetrg_8c.html#a2">00574</a> <a class="code" href="../../d8/d5/ppc_2getsetrg_8c.html#a1">KiSetRegisterValue</a> (
00575     IN ULONG Register,
00576     IN ULONG Value,
00577     OUT PKEXCEPTION_FRAME ExceptionFrame,
00578     OUT PKTRAP_FRAME TrapFrame
00579     )
00580 
00581 <span class="comment">/*++</span>
00582 <span class="comment"></span>
00583 <span class="comment">Routine Description:</span>
00584 <span class="comment"></span>
00585 <span class="comment">    This function is called to set the 32-bit value of a register in the</span>
00586 <span class="comment">    specified exception or trap frame.</span>
00587 <span class="comment"></span>
00588 <span class="comment">Arguments:</span>
00589 <span class="comment"></span>
00590 <span class="comment">    Register - Supplies the number of the register whose value is to be</span>
00591 <span class="comment">        stored. Integer registers are specified as 0 - 31 and floating</span>
00592 <span class="comment">        registers are specified as 32 - 63.</span>
00593 <span class="comment"></span>
00594 <span class="comment">    Value - Supplies the value to be stored in the specified register.</span>
00595 <span class="comment"></span>
00596 <span class="comment">    ExceptionFrame - Supplies a pointer to an exception frame.</span>
00597 <span class="comment"></span>
00598 <span class="comment">    TrapFrame - Supplies a pointer to a trap frame.</span>
00599 <span class="comment"></span>
00600 <span class="comment">Return Value:</span>
00601 <span class="comment"></span>
00602 <span class="comment">    None.</span>
00603 <span class="comment"></span>
00604 <span class="comment">--*/</span>
00605 
00606 {
00607 
00608     <span class="comment">//</span>
00609     <span class="comment">// Dispatch on the register number.</span>
00610     <span class="comment">//</span>
00611 
00612     <span class="keywordflow">if</span> (Register &lt; 32) {
00613         (&amp;TrapFrame-&gt;XIntZero)[Register] = (LONG)Value;
00614 
00615     } <span class="keywordflow">else</span> {
00616         <span class="keywordflow">switch</span> (Register) {
00617 
00618             <span class="comment">//</span>
00619             <span class="comment">// Floating register F0.</span>
00620             <span class="comment">//</span>
00621 
00622         <span class="keywordflow">case</span> 32:
00623             TrapFrame-&gt;FltF0 = Value;
00624             <span class="keywordflow">return</span>;
00625 
00626             <span class="comment">//</span>
00627             <span class="comment">// Floating register F1.</span>
00628             <span class="comment">//</span>
00629 
00630         <span class="keywordflow">case</span> 33:
00631             TrapFrame-&gt;FltF1 = Value;
00632             <span class="keywordflow">return</span>;
00633 
00634             <span class="comment">//</span>
00635             <span class="comment">// Floating register F2.</span>
00636             <span class="comment">//</span>
00637 
00638         <span class="keywordflow">case</span> 34:
00639             TrapFrame-&gt;FltF2 = Value;
00640             <span class="keywordflow">return</span>;
00641 
00642             <span class="comment">//</span>
00643             <span class="comment">// Floating register F3.</span>
00644             <span class="comment">//</span>
00645 
00646         <span class="keywordflow">case</span> 35:
00647             TrapFrame-&gt;FltF3 = Value;
00648             <span class="keywordflow">return</span>;
00649 
00650             <span class="comment">//</span>
00651             <span class="comment">// Floating register F4.</span>
00652             <span class="comment">//</span>
00653 
00654         <span class="keywordflow">case</span> 36:
00655             TrapFrame-&gt;FltF4 = Value;
00656             <span class="keywordflow">return</span>;
00657 
00658             <span class="comment">//</span>
00659             <span class="comment">// Floating register F5.</span>
00660             <span class="comment">//</span>
00661 
00662         <span class="keywordflow">case</span> 37:
00663             TrapFrame-&gt;FltF5 = Value;
00664             <span class="keywordflow">return</span>;
00665 
00666             <span class="comment">//</span>
00667             <span class="comment">// Floating register F6.</span>
00668             <span class="comment">//</span>
00669 
00670         <span class="keywordflow">case</span> 38:
00671             TrapFrame-&gt;FltF6 = Value;
00672             <span class="keywordflow">return</span>;
00673 
00674             <span class="comment">//</span>
00675             <span class="comment">// Floating register F7.</span>
00676             <span class="comment">//</span>
00677 
00678         <span class="keywordflow">case</span> 39:
00679             TrapFrame-&gt;FltF7 = Value;
00680             <span class="keywordflow">return</span>;
00681 
00682             <span class="comment">//</span>
00683             <span class="comment">// Floating register F8.</span>
00684             <span class="comment">//</span>
00685 
00686         <span class="keywordflow">case</span> 40:
00687             TrapFrame-&gt;FltF8 = Value;
00688             <span class="keywordflow">return</span>;
00689 
00690             <span class="comment">//</span>
00691             <span class="comment">// Floating register F9.</span>
00692             <span class="comment">//</span>
00693 
00694         <span class="keywordflow">case</span> 41:
00695             TrapFrame-&gt;FltF9 = Value;
00696             <span class="keywordflow">return</span>;
00697 
00698             <span class="comment">//</span>
00699             <span class="comment">// Floating register F10.</span>
00700             <span class="comment">//</span>
00701 
00702         <span class="keywordflow">case</span> 42:
00703             TrapFrame-&gt;FltF10 = Value;
00704             <span class="keywordflow">return</span>;
00705 
00706             <span class="comment">//</span>
00707             <span class="comment">// Floating register F11.</span>
00708             <span class="comment">//</span>
00709 
00710         <span class="keywordflow">case</span> 43:
00711             TrapFrame-&gt;FltF11 = Value;
00712             <span class="keywordflow">return</span>;
00713 
00714             <span class="comment">//</span>
00715             <span class="comment">// Floating register F12.</span>
00716             <span class="comment">//</span>
00717 
00718         <span class="keywordflow">case</span> 44:
00719             TrapFrame-&gt;FltF12 = Value;
00720             <span class="keywordflow">return</span>;
00721 
00722             <span class="comment">//</span>
00723             <span class="comment">// Floating register F13.</span>
00724             <span class="comment">//</span>
00725 
00726         <span class="keywordflow">case</span> 45:
00727             TrapFrame-&gt;FltF13 = Value;
00728             <span class="keywordflow">return</span>;
00729 
00730             <span class="comment">//</span>
00731             <span class="comment">// Floating register F14.</span>
00732             <span class="comment">//</span>
00733 
00734         <span class="keywordflow">case</span> 46:
00735             TrapFrame-&gt;FltF14 = Value;
00736             <span class="keywordflow">return</span>;
00737 
00738             <span class="comment">//</span>
00739             <span class="comment">// Floating register F15.</span>
00740             <span class="comment">//</span>
00741 
00742         <span class="keywordflow">case</span> 47:
00743             TrapFrame-&gt;FltF15 = Value;
00744             <span class="keywordflow">return</span>;
00745 
00746             <span class="comment">//</span>
00747             <span class="comment">// Floating register F16.</span>
00748             <span class="comment">//</span>
00749 
00750         <span class="keywordflow">case</span> 48:
00751             TrapFrame-&gt;FltF16 = Value;
00752             <span class="keywordflow">return</span>;
00753 
00754             <span class="comment">//</span>
00755             <span class="comment">// Floating register F17.</span>
00756             <span class="comment">//</span>
00757 
00758         <span class="keywordflow">case</span> 49:
00759             TrapFrame-&gt;FltF17 = Value;
00760             <span class="keywordflow">return</span>;
00761 
00762             <span class="comment">//</span>
00763             <span class="comment">// Floating register F18.</span>
00764             <span class="comment">//</span>
00765 
00766         <span class="keywordflow">case</span> 50:
00767             TrapFrame-&gt;FltF18 = Value;
00768             <span class="keywordflow">return</span>;
00769 
00770             <span class="comment">//</span>
00771             <span class="comment">// Floating register F19.</span>
00772             <span class="comment">//</span>
00773 
00774         <span class="keywordflow">case</span> 51:
00775             TrapFrame-&gt;FltF19 = Value;
00776             <span class="keywordflow">return</span>;
00777 
00778             <span class="comment">//</span>
00779             <span class="comment">// Floating register F20.</span>
00780             <span class="comment">//</span>
00781 
00782         <span class="keywordflow">case</span> 52:
00783             ExceptionFrame-&gt;FltF20 = Value;
00784             <span class="keywordflow">return</span>;
00785 
00786             <span class="comment">//</span>
00787             <span class="comment">// Floating register F21.</span>
00788             <span class="comment">//</span>
00789 
00790         <span class="keywordflow">case</span> 53:
00791             ExceptionFrame-&gt;FltF21 = Value;
00792             <span class="keywordflow">return</span>;
00793 
00794             <span class="comment">//</span>
00795             <span class="comment">// Floating register F22.</span>
00796             <span class="comment">//</span>
00797 
00798         <span class="keywordflow">case</span> 54:
00799             ExceptionFrame-&gt;FltF22 = Value;
00800             <span class="keywordflow">return</span>;
00801 
00802             <span class="comment">//</span>
00803             <span class="comment">// Floating register F23.</span>
00804             <span class="comment">//</span>
00805 
00806         <span class="keywordflow">case</span> 55:
00807             ExceptionFrame-&gt;FltF23 = Value;
00808             <span class="keywordflow">return</span>;
00809 
00810             <span class="comment">//</span>
00811             <span class="comment">// Floating register F24.</span>
00812             <span class="comment">//</span>
00813 
00814         <span class="keywordflow">case</span> 56:
00815             ExceptionFrame-&gt;FltF24 = Value;
00816             <span class="keywordflow">return</span>;
00817 
00818             <span class="comment">//</span>
00819             <span class="comment">// Floating register F25.</span>
00820             <span class="comment">//</span>
00821 
00822         <span class="keywordflow">case</span> 57:
00823             ExceptionFrame-&gt;FltF25 = Value;
00824             <span class="keywordflow">return</span>;
00825 
00826             <span class="comment">//</span>
00827             <span class="comment">// Floating register F26.</span>
00828             <span class="comment">//</span>
00829 
00830         <span class="keywordflow">case</span> 58:
00831             ExceptionFrame-&gt;FltF26 = Value;
00832             <span class="keywordflow">return</span>;
00833 
00834             <span class="comment">//</span>
00835             <span class="comment">// Floating register F27.</span>
00836             <span class="comment">//</span>
00837 
00838         <span class="keywordflow">case</span> 59:
00839             ExceptionFrame-&gt;FltF27 = Value;
00840             <span class="keywordflow">return</span>;
00841 
00842             <span class="comment">//</span>
00843             <span class="comment">// Floating register F28.</span>
00844             <span class="comment">//</span>
00845 
00846         <span class="keywordflow">case</span> 60:
00847             ExceptionFrame-&gt;FltF28 = Value;
00848             <span class="keywordflow">return</span>;
00849 
00850             <span class="comment">//</span>
00851             <span class="comment">// Floating register F29.</span>
00852             <span class="comment">//</span>
00853 
00854         <span class="keywordflow">case</span> 61:
00855             ExceptionFrame-&gt;FltF29 = Value;
00856             <span class="keywordflow">return</span>;
00857 
00858             <span class="comment">//</span>
00859             <span class="comment">// Floating register F30.</span>
00860             <span class="comment">//</span>
00861 
00862         <span class="keywordflow">case</span> 62:
00863             ExceptionFrame-&gt;FltF30 = Value;
00864             <span class="keywordflow">return</span>;
00865 
00866             <span class="comment">//</span>
00867             <span class="comment">// Floating register F31.</span>
00868             <span class="comment">//</span>
00869 
00870         <span class="keywordflow">case</span> 63:
00871             ExceptionFrame-&gt;FltF31 = Value;
00872             <span class="keywordflow">return</span>;
00873         }
00874     }
00875 }
00876 
00877 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00878"></a><a class="code" href="../../d7/d5/mips_2getsetrg_8c.html#a3">00878</a> <a class="code" href="../../d7/d5/mips_2getsetrg_8c.html#a3">KiSetRegisterValue64</a> (
00879     IN ULONG Register,
00880     IN ULONGLONG Value,
00881     OUT PKEXCEPTION_FRAME ExceptionFrame,
00882     OUT PKTRAP_FRAME TrapFrame
00883     )
00884 
00885 <span class="comment">/*++</span>
00886 <span class="comment"></span>
00887 <span class="comment">Routine Description:</span>
00888 <span class="comment"></span>
00889 <span class="comment">    This function is called to set the 64-bit value of a register in the</span>
00890 <span class="comment">    specified exception or trap frame.</span>
00891 <span class="comment"></span>
00892 <span class="comment">Arguments:</span>
00893 <span class="comment"></span>
00894 <span class="comment">    Register - Supplies the number of the register whose value is to be</span>
00895 <span class="comment">        stored. Integer registers are specified as 0 - 31 and floating</span>
00896 <span class="comment">        registers are specified as 32 - 63.</span>
00897 <span class="comment"></span>
00898 <span class="comment">    Value - Supplies the value to be stored in the specified register.</span>
00899 <span class="comment"></span>
00900 <span class="comment">    ExceptionFrame - Supplies a pointer to an exception frame.</span>
00901 <span class="comment"></span>
00902 <span class="comment">    TrapFrame - Supplies a pointer to a trap frame.</span>
00903 <span class="comment"></span>
00904 <span class="comment">Return Value:</span>
00905 <span class="comment"></span>
00906 <span class="comment">    None.</span>
00907 <span class="comment"></span>
00908 <span class="comment">--*/</span>
00909 
00910 {
00911 
00912     <span class="comment">//</span>
00913     <span class="comment">// Dispatch on the register number.</span>
00914     <span class="comment">//</span>
00915 
00916     <span class="keywordflow">if</span> (Register &lt; 32) {
00917         (&amp;TrapFrame-&gt;XIntZero)[Register] = Value;
00918 
00919     } <span class="keywordflow">else</span> {
00920         <span class="keywordflow">switch</span> (Register) {
00921 
00922             <span class="comment">//</span>
00923             <span class="comment">// Floating register F0.</span>
00924             <span class="comment">//</span>
00925 
00926         <span class="keywordflow">case</span> 32:
00927             TrapFrame-&gt;XFltF0 = Value;
00928             <span class="keywordflow">return</span>;
00929 
00930             <span class="comment">//</span>
00931             <span class="comment">// Floating register F1.</span>
00932             <span class="comment">//</span>
00933 
00934         <span class="keywordflow">case</span> 33:
00935             TrapFrame-&gt;XFltF1 = Value;
00936             <span class="keywordflow">return</span>;
00937 
00938             <span class="comment">//</span>
00939             <span class="comment">// Floating register F2.</span>
00940             <span class="comment">//</span>
00941 
00942         <span class="keywordflow">case</span> 34:
00943             TrapFrame-&gt;XFltF2 = Value;
00944             <span class="keywordflow">return</span>;
00945 
00946             <span class="comment">//</span>
00947             <span class="comment">// Floating register F3.</span>
00948             <span class="comment">//</span>
00949 
00950         <span class="keywordflow">case</span> 35:
00951             TrapFrame-&gt;XFltF3 = Value;
00952             <span class="keywordflow">return</span>;
00953 
00954             <span class="comment">//</span>
00955             <span class="comment">// Floating register F4.</span>
00956             <span class="comment">//</span>
00957 
00958         <span class="keywordflow">case</span> 36:
00959             TrapFrame-&gt;XFltF4 = Value;
00960             <span class="keywordflow">return</span>;
00961 
00962             <span class="comment">//</span>
00963             <span class="comment">// Floating register F5.</span>
00964             <span class="comment">//</span>
00965 
00966         <span class="keywordflow">case</span> 37:
00967             TrapFrame-&gt;XFltF5 = Value;
00968             <span class="keywordflow">return</span>;
00969 
00970             <span class="comment">//</span>
00971             <span class="comment">// Floating register F6.</span>
00972             <span class="comment">//</span>
00973 
00974         <span class="keywordflow">case</span> 38:
00975             TrapFrame-&gt;XFltF6 = Value;
00976             <span class="keywordflow">return</span>;
00977 
00978             <span class="comment">//</span>
00979             <span class="comment">// Floating register F7.</span>
00980             <span class="comment">//</span>
00981 
00982         <span class="keywordflow">case</span> 39:
00983             TrapFrame-&gt;XFltF7 = Value;
00984             <span class="keywordflow">return</span>;
00985 
00986             <span class="comment">//</span>
00987             <span class="comment">// Floating register F8.</span>
00988             <span class="comment">//</span>
00989 
00990         <span class="keywordflow">case</span> 40:
00991             TrapFrame-&gt;XFltF8 = Value;
00992             <span class="keywordflow">return</span>;
00993 
00994             <span class="comment">//</span>
00995             <span class="comment">// Floating register F9.</span>
00996             <span class="comment">//</span>
00997 
00998         <span class="keywordflow">case</span> 41:
00999             TrapFrame-&gt;XFltF9 = Value;
01000             <span class="keywordflow">return</span>;
01001 
01002             <span class="comment">//</span>
01003             <span class="comment">// Floating register F10.</span>
01004             <span class="comment">//</span>
01005 
01006         <span class="keywordflow">case</span> 42:
01007             TrapFrame-&gt;XFltF10 = Value;
01008             <span class="keywordflow">return</span>;
01009 
01010             <span class="comment">//</span>
01011             <span class="comment">// Floating register F11.</span>
01012             <span class="comment">//</span>
01013 
01014         <span class="keywordflow">case</span> 43:
01015             TrapFrame-&gt;XFltF11 = Value;
01016             <span class="keywordflow">return</span>;
01017 
01018             <span class="comment">//</span>
01019             <span class="comment">// Floating register F12.</span>
01020             <span class="comment">//</span>
01021 
01022         <span class="keywordflow">case</span> 44:
01023             TrapFrame-&gt;XFltF12 = Value;
01024             <span class="keywordflow">return</span>;
01025 
01026             <span class="comment">//</span>
01027             <span class="comment">// Floating register F13.</span>
01028             <span class="comment">//</span>
01029 
01030         <span class="keywordflow">case</span> 45:
01031             TrapFrame-&gt;XFltF13 = Value;
01032             <span class="keywordflow">return</span>;
01033 
01034             <span class="comment">//</span>
01035             <span class="comment">// Floating register F14.</span>
01036             <span class="comment">//</span>
01037 
01038         <span class="keywordflow">case</span> 46:
01039             TrapFrame-&gt;XFltF14 = Value;
01040             <span class="keywordflow">return</span>;
01041 
01042             <span class="comment">//</span>
01043             <span class="comment">// Floating register F15.</span>
01044             <span class="comment">//</span>
01045 
01046         <span class="keywordflow">case</span> 47:
01047             TrapFrame-&gt;XFltF15 = Value;
01048             <span class="keywordflow">return</span>;
01049 
01050             <span class="comment">//</span>
01051             <span class="comment">// Floating register F16.</span>
01052             <span class="comment">//</span>
01053 
01054         <span class="keywordflow">case</span> 48:
01055             TrapFrame-&gt;XFltF16 = Value;
01056             <span class="keywordflow">return</span>;
01057 
01058             <span class="comment">//</span>
01059             <span class="comment">// Floating register F17.</span>
01060             <span class="comment">//</span>
01061 
01062         <span class="keywordflow">case</span> 49:
01063             TrapFrame-&gt;XFltF17 = Value;
01064             <span class="keywordflow">return</span>;
01065 
01066             <span class="comment">//</span>
01067             <span class="comment">// Floating register F18.</span>
01068             <span class="comment">//</span>
01069 
01070         <span class="keywordflow">case</span> 50:
01071             TrapFrame-&gt;XFltF18 = Value;
01072             <span class="keywordflow">return</span>;
01073 
01074             <span class="comment">//</span>
01075             <span class="comment">// Floating register F19.</span>
01076             <span class="comment">//</span>
01077 
01078         <span class="keywordflow">case</span> 51:
01079             TrapFrame-&gt;XFltF19 = Value;
01080             <span class="keywordflow">return</span>;
01081 
01082             <span class="comment">//</span>
01083             <span class="comment">// Floating register F20.</span>
01084             <span class="comment">//</span>
01085 
01086         <span class="keywordflow">case</span> 52:
01087             ExceptionFrame-&gt;XFltF20 = Value;
01088             <span class="keywordflow">return</span>;
01089 
01090             <span class="comment">//</span>
01091             <span class="comment">// Floating register F21.</span>
01092             <span class="comment">//</span>
01093 
01094         <span class="keywordflow">case</span> 53:
01095             TrapFrame-&gt;XFltF21 = Value;
01096             <span class="keywordflow">return</span>;
01097 
01098             <span class="comment">//</span>
01099             <span class="comment">// Floating register F22.</span>
01100             <span class="comment">//</span>
01101 
01102         <span class="keywordflow">case</span> 54:
01103             ExceptionFrame-&gt;XFltF22 = Value;
01104             <span class="keywordflow">return</span>;
01105 
01106             <span class="comment">//</span>
01107             <span class="comment">// Floating register F23.</span>
01108             <span class="comment">//</span>
01109 
01110         <span class="keywordflow">case</span> 55:
01111             TrapFrame-&gt;XFltF23 = Value;
01112             <span class="keywordflow">return</span>;
01113 
01114             <span class="comment">//</span>
01115             <span class="comment">// Floating register F24.</span>
01116             <span class="comment">//</span>
01117 
01118         <span class="keywordflow">case</span> 56:
01119             ExceptionFrame-&gt;XFltF24 = Value;
01120             <span class="keywordflow">return</span>;
01121 
01122             <span class="comment">//</span>
01123             <span class="comment">// Floating register F25.</span>
01124             <span class="comment">//</span>
01125 
01126         <span class="keywordflow">case</span> 57:
01127             TrapFrame-&gt;XFltF25 = Value;
01128             <span class="keywordflow">return</span>;
01129 
01130             <span class="comment">//</span>
01131             <span class="comment">// Floating register F26.</span>
01132             <span class="comment">//</span>
01133 
01134         <span class="keywordflow">case</span> 58:
01135             ExceptionFrame-&gt;XFltF26 = Value;
01136             <span class="keywordflow">return</span>;
01137 
01138             <span class="comment">//</span>
01139             <span class="comment">// Floating register F27.</span>
01140             <span class="comment">//</span>
01141 
01142         <span class="keywordflow">case</span> 59:
01143             TrapFrame-&gt;XFltF27 = Value;
01144             <span class="keywordflow">return</span>;
01145 
01146             <span class="comment">//</span>
01147             <span class="comment">// Floating register F28.</span>
01148             <span class="comment">//</span>
01149 
01150         <span class="keywordflow">case</span> 60:
01151             ExceptionFrame-&gt;XFltF28 = Value;
01152             <span class="keywordflow">return</span>;
01153 
01154             <span class="comment">//</span>
01155             <span class="comment">// Floating register F29.</span>
01156             <span class="comment">//</span>
01157 
01158         <span class="keywordflow">case</span> 61:
01159             TrapFrame-&gt;XFltF29 = Value;
01160             <span class="keywordflow">return</span>;
01161 
01162             <span class="comment">//</span>
01163             <span class="comment">// Floating register F30.</span>
01164             <span class="comment">//</span>
01165 
01166         <span class="keywordflow">case</span> 62:
01167             ExceptionFrame-&gt;XFltF30 = Value;
01168             <span class="keywordflow">return</span>;
01169 
01170             <span class="comment">//</span>
01171             <span class="comment">// Floating register F31.</span>
01172             <span class="comment">//</span>
01173 
01174         <span class="keywordflow">case</span> 63:
01175             TrapFrame-&gt;XFltF31 = Value;
01176             <span class="keywordflow">return</span>;
01177         }
01178     }
01179 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:13 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: sbctl.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>sbctl.c File Reference</h1><code>#include "<a class="el" href="../../d1/d3/w32_2ntuser_2kernel_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d9/d3/sbctl_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a0">IsScrollBarControl</a>(h)&nbsp;&nbsp;&nbsp;(GETFNID(h) == FNID_SCROLLBAR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a1">WSB_HORZ_LF</a>&nbsp;&nbsp;&nbsp;0x0001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a2">WSB_HORZ_RT</a>&nbsp;&nbsp;&nbsp;0x0002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a3">WSB_VERT_UP</a>&nbsp;&nbsp;&nbsp;0x0004</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a4">WSB_VERT_DN</a>&nbsp;&nbsp;&nbsp;0x0008</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a5">WSB_VERT</a>&nbsp;&nbsp;&nbsp;(WSB_VERT_UP | WSB_VERT_DN)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a6">WSB_HORZ</a>&nbsp;&nbsp;&nbsp;(WSB_HORZ_LF | WSB_HORZ_RT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a7">RETURN_IF_PSBTRACK_INVALID</a>(pSBTrack, pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a8">REEVALUATE_PSBTRACK</a>(pSBTrack, pwnd, str)&nbsp;&nbsp;&nbsp;(pSBTrack) = PWNDTOPSBTRACK(pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a9">ES_NOTHING</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a10">ES_DISABLE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a11">ES_ENABLE</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a12">CalcSBStuff</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a> pSBCalc, BOOL fVert)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a13">DrawCtlThumb</a> (<a class="el" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a14">HitTestScrollBar</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, BOOL fVert, POINT pt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a15">_SBGetParms</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, int code, <a class="el" href="../../d4/d5/structtagSBDATA.html">PSBDATA</a> pw, LPSCROLLINFO lpsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a16">GetWndSBDisableFlags</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, BOOL fVert)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a17">xxxEnableSBCtlArrows</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT wArrows)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a18">xxxEnableWndSBArrows</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT wSBflags, UINT wArrows)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a19">xxxEnableScrollBar</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT wSBflags, UINT wArrows)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void FAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a20">DrawSize</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, HDC hdc, int cxFrame, int cyFrame)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HBRUSH&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a21">xxxGetColorObjects</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, HDC hdc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void NEAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a22">DrawGroove</a> (HDC hdc, HBRUSH hbr, LPRECT prc, BOOL fVert)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a23">CalcTrackDragRect</a> (<a class="el" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a24">RecalcTrackRect</a> (<a class="el" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a25">DrawThumb2</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a> pSBCalc, HDC hdc, HBRUSH hbr, BOOL fVert, UINT wDisable)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a26">xxxDrawSB2</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a> pSBCalc, HDC hdc, BOOL fVert, UINT wDisable)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a27">zzzSetSBCaretPos</a> (<a class="el" href="../../d7/d5/structtagSBWND.html">PSBWND</a> psbwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a28">CalcSBStuff2</a> (<a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a> pSBCalc, LPRECT lprc, CONST <a class="el" href="../../d4/d5/structtagSBDATA.html">PSBDATA</a> pw, BOOL fVert)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a29">SBCtlSetup</a> (<a class="el" href="../../d7/d5/structtagSBWND.html">PSBWND</a> psbwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a30">SBSetParms</a> (<a class="el" href="../../d4/d5/structtagSBDATA.html">PSBDATA</a> pw, LPSCROLLINFO lpsi, LPBOOL lpfScroll, LPLONG lplres)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a31">xxxDrawThumb</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a> pSBCalc, BOOL fVert)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a32">xxxSetScrollBar</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, int code, LPSCROLLINFO lpsi, BOOL fRedraw)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a33">xxxDrawScrollBar</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, HDC hdc, BOOL fVert)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a34">SBPosFromPx</a> (<a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a> pSBCalc, int px)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a35">InvertScrollHilite</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a36">xxxDoScroll</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndNotify, int cmd, int pos, BOOL fVert)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a37">xxxMoveThumb</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a> pSBCalc, int px)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a38">zzzDrawInvertScrollArea</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack, BOOL fHit, UINT cmd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a39">xxxEndScroll</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, BOOL fCancel)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a40">xxxContScroll</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, UINT_PTR ID, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a41">xxxTrackBox</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a> pSBCalc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a42">xxxTrackThumb</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a> pSBCalc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a43">xxxSBTrackLoop</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, LPARAM lParam, <a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a> pSBCalc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a44">xxxSBTrackInit</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, LPARAM lParam, int curArea, UINT uType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a45">xxxGetScrollMenu</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, BOOL fVert)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a46">xxxDoScrollMenu</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndNotify, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndSB, BOOL fVert, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/sbctl_8c.html#a47">xxxSBWndProc</a> (<a class="el" href="../../d7/d5/structtagSBWND.html">PSBWND</a> psbwnd, UINT message, WPARAM wParam, LPARAM lParam)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a10" doxytag="sbctl.c::ES_DISABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ES_DISABLE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00392">xxxEnableScrollBar()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="sbctl.c::ES_ENABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ES_ENABLE&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00392">xxxEnableScrollBar()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="sbctl.c::ES_NOTHING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ES_NOTHING&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00392">xxxEnableScrollBar()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="sbctl.c::IsScrollBarControl" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IsScrollBarControl          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">h&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(GETFNID(h) == FNID_SCROLLBAR)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00021">21</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00481">DrawSize()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00081">HitTestScrollBar()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00540">xxxGetColorObjects()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="sbctl.c::REEVALUATE_PSBTRACK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define REEVALUATE_PSBTRACK          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pSBTrack,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>pwnd,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>str&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(pSBTrack) = PWNDTOPSBTRACK(pwnd)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00071">71</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01596">xxxMoveThumb()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">xxxSBTrackInit()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02123">xxxSBTrackLoop()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="sbctl.c::RETURN_IF_PSBTRACK_INVALID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define RETURN_IF_PSBTRACK_INVALID          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pSBTrack,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>pwnd&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div><span class="keywordflow">if</span> ((pSBTrack) != <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd)) {      \
        UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd) == NULL);  \
        <span class="keywordflow">return</span>;                                    \
    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00050">50</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01913">xxxContScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01782">xxxEndScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">xxxSBTrackInit()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01971">xxxTrackBox()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="sbctl.c::WSB_HORZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WSB_HORZ&nbsp;&nbsp;&nbsp;(WSB_HORZ_LF | WSB_HORZ_RT)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00035">35</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00186">GetWndSBDisableFlags()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="sbctl.c::WSB_HORZ_LF" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WSB_HORZ_LF&nbsp;&nbsp;&nbsp;0x0001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00029">29</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="sbctl.c::WSB_HORZ_RT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WSB_HORZ_RT&nbsp;&nbsp;&nbsp;0x0002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00030">30</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="sbctl.c::WSB_VERT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WSB_VERT&nbsp;&nbsp;&nbsp;(WSB_VERT_UP | WSB_VERT_DN)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00034">34</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00186">GetWndSBDisableFlags()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="sbctl.c::WSB_VERT_DN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WSB_VERT_DN&nbsp;&nbsp;&nbsp;0x0008          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00032">32</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="sbctl.c::WSB_VERT_UP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WSB_VERT_UP&nbsp;&nbsp;&nbsp;0x0004          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00031">31</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a15" doxytag="sbctl.c::_SBGetParms" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _SBGetParms           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>code</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d4/d5/structtagSBDATA.html">PSBDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pw</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSCROLLINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00140">140</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02876">tagSBTRACK::nBar</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01781">tagSBDATA::page</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01782">tagSBDATA::pos</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01780">tagSBDATA::posMax</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01779">tagSBDATA::posMin</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02875">tagSBTRACK::posNew</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03397">PWNDTOPSBTRACK</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02865">tagSBTRACK::spwndTrack</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09719">NtUserSBGetParms()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.
<p>
<pre class="fragment"><div>00145 {
00146     <a class="code" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack;
00147 
00148     pSBTrack = <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd);
00149 
00150 
00151     <span class="keywordflow">if</span> (lpsi-&gt;fMask &amp; SIF_RANGE) {
00152         lpsi-&gt;nMin = pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o0">posMin</a>;
00153         lpsi-&gt;nMax = pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o1">posMax</a>;
00154     }
00155 
00156     <span class="keywordflow">if</span> (lpsi-&gt;fMask &amp; SIF_PAGE)
00157         lpsi-&gt;nPage = pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o2">page</a>;
00158 
00159     <span class="keywordflow">if</span> (lpsi-&gt;fMask &amp; SIF_POS) {
00160         lpsi-&gt;nPos = pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o3">pos</a>;
00161     }
00162 
00163     <span class="keywordflow">if</span> (lpsi-&gt;fMask &amp; SIF_TRACKPOS)
00164     {
00165         <span class="keywordflow">if</span> (pSBTrack &amp;&amp; (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o15">nBar</a> == code) &amp;&amp; (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o4">spwndTrack</a> == pwnd)) {
00166             <span class="comment">// posNew is in the context of psbiSB's window and bar code</span>
00167             lpsi-&gt;nTrackPos = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o14">posNew</a>;
00168         } <span class="keywordflow">else</span> {
00169             lpsi-&gt;nTrackPos = pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o3">pos</a>;
00170         }
00171     }
00172     <span class="keywordflow">return</span> ((lpsi-&gt;fMask &amp; SIF_ALL) ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00173 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="sbctl.c::CalcSBStuff" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CalcSBStuff           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pSBCalc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fVert</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01191">1191</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d0/d0/miscutil_8c-source.html#l00183">_InitPwSB()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00925">CalcSBStuff2()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00856">GetRect()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03420">GRECT_CLIENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03425">GRECT_WINDOWCOORDS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01791">tagSBINFO::Horz</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01848">tagWND::pSBInfo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01792">tagSBINFO::Vert</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02374">WEFLEFTSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02261">WFHPRESENT</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02260">WFVPRESENT</a>.
<p>
<pre class="fragment"><div>01195 {
01196     RECT    rcT;
01197     RECT    rcClient;
01198 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01199 <span class="preprocessor"></span>    <span class="keywordtype">int</span>     cx, iTemp;
01200 <span class="preprocessor">#endif</span>
01201 <span class="preprocessor"></span>
01202     <span class="comment">//</span>
01203     <span class="comment">// Get client rectangle.  We know that scrollbars always align to the right</span>
01204     <span class="comment">// and to the bottom of the client area.</span>
01205     <span class="comment">//</span>
01206     <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a12">GetRect</a>(pwnd, &amp;rcClient, GRECT_CLIENT | GRECT_WINDOWCOORDS);
01207 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01208 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLAYOUTRTL)) {
01209         cx             = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.right - pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left;
01210         iTemp          = rcClient.left;
01211         rcClient.left  = cx - rcClient.right;
01212         rcClient.right = cx - iTemp;
01213     }
01214 <span class="preprocessor">#endif</span>
01215 <span class="preprocessor"></span>
01216     <span class="keywordflow">if</span> (fVert) {
01217          <span class="comment">// Only add on space if vertical scrollbar is really there.</span>
01218         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLEFTSCROLL)) {
01219             rcT.right = rcT.left = rcClient.left;
01220             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVPRESENT))
01221                 rcT.left -= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL);
01222         } <span class="keywordflow">else</span> {
01223             rcT.right = rcT.left = rcClient.right;
01224             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVPRESENT))
01225                 rcT.right += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL);
01226         }
01227 
01228         rcT.top = rcClient.top;
01229         rcT.bottom = rcClient.bottom;
01230     } <span class="keywordflow">else</span> {
01231         <span class="comment">// Only add on space if horizontal scrollbar is really there.</span>
01232         rcT.bottom = rcT.top = rcClient.bottom;
01233         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFHPRESENT))
01234             rcT.bottom += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYHSCROLL);
01235 
01236         rcT.left = rcClient.left;
01237         rcT.right = rcClient.right;
01238     }
01239 
01240     <span class="comment">// If InitPwSB stuff fails (due to our heap being full) there isn't anything reasonable</span>
01241     <span class="comment">// we can do here, so just let it go through.  We won't fault but the scrollbar won't work</span>
01242     <span class="comment">// properly either...</span>
01243     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a1566">_InitPwSB</a>(pwnd))
01244         <a class="code" href="../../d4/d1/userk_8h.html#a1423">CalcSBStuff2</a>(pSBCalc, &amp;rcT, (fVert) ? &amp;pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o14">pSBInfo</a>-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o2">Vert</a> :  &amp;pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o14">pSBInfo</a>-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o1">Horz</a>, fVert);
01245 
01246 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="sbctl.c::CalcSBStuff2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CalcSBStuff2           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pSBCalc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST <a class="el" href="../../d4/d5/structtagSBDATA.html">PSBDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pw</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fVert</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00925">925</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02856">tagSBCALC::cpx</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02850">tagSBCALC::cpxThumb</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02847">tagSBCALC::pxBottom</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02852">tagSBCALC::pxDownArrow</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02848">tagSBCALC::pxLeft</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02857">tagSBCALC::pxMin</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02849">tagSBCALC::pxRight</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02854">tagSBCALC::pxThumbBottom</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02855">tagSBCALC::pxThumbTop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02846">tagSBCALC::pxTop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02851">tagSBCALC::pxUpArrow</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/winable2_8c-source.html#l00309">_GetScrollBarInfo()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01191">CalcSBStuff()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01012">SBCtlSetup()</a>.
<p>
<pre class="fragment"><div>00930 {
00931     <span class="keywordtype">int</span> cpx;
00932     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwRange;
00933     <span class="keywordtype">int</span> denom;
00934 
00935     <span class="keywordflow">if</span> (fVert) {
00936         pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o1">pxTop</a> = lprc-&gt;top;
00937         pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o2">pxBottom</a> = lprc-&gt;bottom;
00938         pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o3">pxLeft</a> = lprc-&gt;left;
00939         pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o4">pxRight</a> = lprc-&gt;right;
00940         pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o5">cpxThumb</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYVSCROLL);
00941     } <span class="keywordflow">else</span> {
00942 
00943         <span class="comment">/*</span>
00944 <span class="comment">         * For horiz scroll bars, "left" &amp; "right" are "top" and "bottom",</span>
00945 <span class="comment">         * and vice versa.</span>
00946 <span class="comment">         */</span>
00947         pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o1">pxTop</a> = lprc-&gt;left;
00948         pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o2">pxBottom</a> = lprc-&gt;right;
00949         pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o3">pxLeft</a> = lprc-&gt;top;
00950         pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o4">pxRight</a> = lprc-&gt;bottom;
00951         pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o5">cpxThumb</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXHSCROLL);
00952     }
00953 
00954     pSBCalc-&gt;pos = pw-&gt;pos;
00955     pSBCalc-&gt;page = pw-&gt;page;
00956     pSBCalc-&gt;posMin = pw-&gt;posMin;
00957     pSBCalc-&gt;posMax = pw-&gt;posMax;
00958 
00959     dwRange = ((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(pSBCalc-&gt;posMax - pSBCalc-&gt;posMin)) + 1;
00960 
00961     <span class="comment">//</span>
00962     <span class="comment">// For the case of short scroll bars that don't have enough</span>
00963     <span class="comment">// room to fit the full-sized up and down arrows, shorten</span>
00964     <span class="comment">// their sizes to make 'em fit</span>
00965     <span class="comment">//</span>
00966     cpx = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>((pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o2">pxBottom</a> - pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o1">pxTop</a>) / 2, pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o5">cpxThumb</a>);
00967 
00968     pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o6">pxUpArrow</a>   = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o1">pxTop</a>    + cpx;
00969     pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a> = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o2">pxBottom</a> - cpx;
00970 
00971     <span class="keywordflow">if</span> ((pw-&gt;page != 0) &amp;&amp; (dwRange != 0)) {
00972         <span class="comment">// JEFFBOG -- This is the one and only place where we should</span>
00973         <span class="comment">// see 'range'.  Elsewhere it should be 'range - page'.</span>
00974 
00975         <span class="comment">/*</span>
00976 <span class="comment">         * The minimun thumb size used to depend on the frame/edge metrics.</span>
00977 <span class="comment">         * People that increase the scrollbar width/height expect the minimun</span>
00978 <span class="comment">         *  to grow with proportianally. So NT5 bases the minimun on</span>
00979 <span class="comment">         *  CXH/YVSCROLL, which is set by default in cpxThumb.</span>
00980 <span class="comment">         */</span>
00981         <span class="comment">/*</span>
00982 <span class="comment">         * i is used to keep the macro "max" from executing EngMulDiv twice.</span>
00983 <span class="comment">         */</span>
00984         <span class="keywordtype">int</span> i = EngMulDiv(pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a> - pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o6">pxUpArrow</a>,
00985                                              pw-&gt;page, dwRange);
00986         pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o5">cpxThumb</a> = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o5">cpxThumb</a> / 2, i);
00987     }
00988 
00989     pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o12">pxMin</a> = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o1">pxTop</a> + cpx;
00990     pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o11">cpx</a> = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o2">pxBottom</a> - cpx - pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o5">cpxThumb</a> - pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o12">pxMin</a>;
00991 
00992     denom = dwRange - (pw-&gt;page ? pw-&gt;page : 1);
00993     <span class="keywordflow">if</span> (denom)
00994         pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a> = EngMulDiv(pw-&gt;pos - pw-&gt;posMin,
00995             pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o11">cpx</a>, denom) +
00996             pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o12">pxMin</a>;
00997     <span class="keywordflow">else</span>
00998         pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a> = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o12">pxMin</a> - 1;
00999 
01000     pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o9">pxThumbBottom</a> = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a> + pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o5">cpxThumb</a>;
01001 
01002 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="sbctl.c::CalcTrackDragRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CalcTrackDragRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pSBTrack</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00600">600</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02862">tagSBTRACK::fTrackVert</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02877">tagSBTRACK::pSBCalc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02847">tagSBCALC::pxBottom</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02848">tagSBCALC::pxLeft</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02849">tagSBCALC::pxRight</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02846">tagSBCALC::pxTop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02868">tagSBTRACK::rcTrack</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00645">RecalcTrackRect()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">xxxSBTrackInit()</a>.
<p>
<pre class="fragment"><div>00600                                           {
00601 
00602     <span class="keywordtype">int</span>     cx;
00603     <span class="keywordtype">int</span>     <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>;
00604     LPINT   pwX, pwY;
00605 
00606     <span class="comment">//</span>
00607     <span class="comment">// Point pwX and pwY at the parts of the rectangle</span>
00608     <span class="comment">// corresponding to pSBCalc-&gt;pxLeft, pxTop, etc.</span>
00609     <span class="comment">//</span>
00610     <span class="comment">// pSBTrack-&gt;pSBCalc-&gt;pxLeft is the left edge of a vertical</span>
00611     <span class="comment">// scrollbar and the top edge of horizontal one.</span>
00612     <span class="comment">// pSBTrack-&gt;pSBCalc-&gt;pxTop is the top of a vertical</span>
00613     <span class="comment">// scrollbar and the left of horizontal one.</span>
00614     <span class="comment">// etc...</span>
00615     <span class="comment">//</span>
00616     <span class="comment">// Point pwX and pwY to the corresponding parts</span>
00617     <span class="comment">// of pSBTrack-&gt;rcTrack.</span>
00618     <span class="comment">//</span>
00619 
00620     pwX = pwY = (LPINT)&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o7">rcTrack</a>;
00621 
00622     <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>) {
00623         <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYVTHUMB);
00624         pwY++;
00625     } <span class="keywordflow">else</span> {
00626         <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXHTHUMB);
00627         pwX++;
00628     }
00629     <span class="comment">/*</span>
00630 <span class="comment">     * Later5.0 GerardoB: People keep complaining about this tracking region</span>
00631 <span class="comment">     *  being too narrow so let's make it wider while PM decides what to do</span>
00632 <span class="comment">     *  about it.</span>
00633 <span class="comment">     * We also used to have some hard coded min and max values but that should</span>
00634 <span class="comment">     *  depend on some metric, if at all needed.</span>
00635 <span class="comment">     */</span>
00636     cx = (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o4">pxRight</a> - pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o3">pxLeft</a>) * 8;
00637     <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> *= 2;
00638 
00639     *(pwX + 0) = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o3">pxLeft</a> - cx;
00640     *(pwY + 0) = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o1">pxTop</a> - <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>;
00641     *(pwX + 2) = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o4">pxRight</a> + cx;
00642     *(pwY + 2) = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o2">pxBottom</a> + <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>;
00643 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="sbctl.c::DrawCtlThumb" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DrawCtlThumb           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d5/structtagSBWND.html">PSBWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01253">1253</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00201">_GetWindowDC()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00183">_ReleaseDC()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00697">DrawThumb2()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00057">PWND</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01012">SBCtlSetup()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00540">xxxGetColorObjects()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01782">xxxEndScroll()</a>.
<p>
<pre class="fragment"><div>01254 {
01255     HBRUSH  hbr, hbrSave;
01256     HDC     hdc = (HDC) <a class="code" href="../../d4/d1/userk_8h.html#a1696">_GetWindowDC</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>) psb);
01257 
01258     <a class="code" href="../../d4/d1/userk_8h.html#a1421">SBCtlSetup</a>(psb);
01259 
01260     hbrSave = GreSelectBrush(hdc, hbr = <a class="code" href="../../d8/d4/sbctl_8c.html#a21">xxxGetColorObjects</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>) psb, hdc));
01261 
01262     <a class="code" href="../../d4/d1/userk_8h.html#a1485">DrawThumb2</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>) psb, &amp;psb-&gt;SBCalc, hdc, hbr, psb-&gt;fVert, psb-&gt;wDisableFlags);
01263 
01264     GreSelectBrush(hdc, hbrSave);
01265     <a class="code" href="../../d4/d1/userk_8h.html#a1697">_ReleaseDC</a>(hdc);
01266 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="sbctl.c::DrawGroove" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void NEAR DrawGroove           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HBRUSH&nbsp;</td>
          <td class="mdname" nowrap> <em>hbr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>prc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fVert</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00573">573</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00896">DrawEdge()</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00061">FillRect()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00212">SYSHBR</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00697">DrawThumb2()</a>.
<p>
<pre class="fragment"><div>00574 {
00575     <span class="keywordflow">if</span> ((hbr == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a22">SYSHBR</a>(3DHILIGHT)) || (hbr == <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;hbrGray))
00576         <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a3">FillRect</a>(hdc, prc, hbr);
00577     <span class="keywordflow">else</span>
00578     {
00579         RECT    rc;
00580 
00581     <span class="comment">// Draw sides</span>
00582         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rc, prc);
00583         <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a15">DrawEdge</a>(hdc, &amp;rc, EDGE_SUNKEN, BF_ADJUST | BF_FLAT |
00584             (fVert ? BF_LEFT | BF_RIGHT : BF_TOP | BF_BOTTOM));
00585 
00586     <span class="comment">// Fill middle</span>
00587         <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a3">FillRect</a>(hdc, &amp;rc, hbr);
00588     }
00589 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="sbctl.c::DrawSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FAR DrawSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cxFrame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cyFrame</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00481">481</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d0/d2/mngrayc_8c-source.html#l00029">BitBltSysBmp()</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00460">DrawBox()</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00021">IsScrollBarControl</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01004">OBI_NCGRIP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01051">OBI_NCGRIP_L</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02508">SBFSIZEGRIP</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00636">SizeBoxHwnd()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00212">SYSHBR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02374">WEFLEFTSCROLL</a>.
<p>
Referenced by <a class="el" href="../../d2/d1/drawfrm_8c-source.html#l00076">xxxDrawWindowFrame()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.
<p>
<pre class="fragment"><div>00482 {
00483     <span class="keywordtype">int</span>     x, y;
00484     <span class="comment">//HBRUSH  hbrSave;</span>
00485 
00486     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLEFTSCROLL)) {
00487         x = cxFrame;
00488     } <span class="keywordflow">else</span> {
00489         x = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.right - pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left - cxFrame - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL);
00490     }
00491     y = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.bottom - pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top  - cyFrame - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYHSCROLL);
00492 
00493     <span class="comment">// If we have a scrollbar control, or the sizebox is not associated with</span>
00494     <span class="comment">// a sizeable window, draw the flat gray sizebox.  Otherwise, use the</span>
00495     <span class="comment">// sizing grip.</span>
00496     <span class="keywordflow">if</span> (<a class="code" href="../../d8/d4/sbctl_8c.html#a0">IsScrollBarControl</a>(pwnd))
00497     {
00498         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, SBFSIZEGRIP))
00499             <span class="keywordflow">goto</span> DrawSizeGrip;
00500         <span class="keywordflow">else</span>
00501             <span class="keywordflow">goto</span> <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a9">DrawBox</a>;
00502 
00503     }
00504     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a8">SizeBoxHwnd</a>(pwnd))
00505     {
00506 <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a9">DrawBox</a>:
00507         {
00508             <span class="comment">//hbrSave = GreSelectBrush(hdc, SYSHBR(3DFACE));</span>
00509             <span class="comment">//GrePatBlt(hdc, x, y, SYSMET(CXVSCROLL), SYSMET(CYHSCROLL), PATCOPY);</span>
00510             <span class="comment">//GreSelectBrush(hdc, hbrSave);</span>
00511 
00512             POLYPATBLT PolyData;
00513 
00514             PolyData.x         = x;
00515             PolyData.y         = y;
00516             PolyData.cx        = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL);
00517             PolyData.cy        = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYHSCROLL);
00518             PolyData.BrClr.hbr = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a22">SYSHBR</a>(3DFACE);
00519 
00520             GrePolyPatBlt(hdc,PATCOPY,&amp;PolyData,1,PPB_BRUSH);
00521 
00522         }
00523     }
00524     <span class="keywordflow">else</span>
00525     {
00526 DrawSizeGrip:
00527         <span class="comment">// Blt out the grip bitmap.</span>
00528         <a class="code" href="../../d4/d1/userk_8h.html#a1773">BitBltSysBmp</a>(hdc, x, y, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLEFTSCROLL) ? OBI_NCGRIP_L : OBI_NCGRIP);
00529     }
00530 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="sbctl.c::DrawThumb2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DrawThumb2           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pSBCalc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HBRUSH&nbsp;</td>
          <td class="mdname" nowrap> <em>hbr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fVert</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wDisable</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00697">697</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02870">tagSBTRACK::cmdSB</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02850">tagSBCALC::cpxThumb</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00573">DrawGroove()</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l01125">DrawPushButton()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02864">tagSBTRACK::fTrackRecalc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02862">tagSBTRACK::fTrackVert</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00096">InvertRect()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02690">LTUPFLAG</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03397">PWNDTOPSBTRACK</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02847">tagSBCALC::pxBottom</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02852">tagSBCALC::pxDownArrow</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02848">tagSBCALC::pxLeft</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02849">tagSBCALC::pxRight</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02854">tagSBCALC::pxThumbBottom</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02855">tagSBCALC::pxThumbTop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02846">tagSBCALC::pxTop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02851">tagSBCALC::pxUpArrow</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02868">tagSBTRACK::rcTrack</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00645">RecalcTrackRect()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02691">RTDNFLAG</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02865">tagSBTRACK::spwndTrack</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01253">DrawCtlThumb()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00800">xxxDrawSB2()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01277">xxxDrawThumb()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01596">xxxMoveThumb()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.
<p>
<pre class="fragment"><div>00704 {
00705     <span class="keywordtype">int</span>    *pLength;
00706     <span class="keywordtype">int</span>    *pWidth;
00707     RECT   rcSB;
00708     <a class="code" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack;
00709 
00710     <span class="comment">//</span>
00711     <span class="comment">// Bail out if the scrollbar has an empty rect</span>
00712     <span class="comment">//</span>
00713     <span class="keywordflow">if</span> ((pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o1">pxTop</a> &gt;= pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o2">pxBottom</a>) || (pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o3">pxLeft</a> &gt;= pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o4">pxRight</a>))
00714         <span class="keywordflow">return</span>;
00715     pLength = (LPINT)&amp;rcSB;
00716     <span class="keywordflow">if</span> (fVert)
00717         pWidth = pLength++;
00718     <span class="keywordflow">else</span>
00719         pWidth  = pLength + 1;
00720 
00721     pWidth[0] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o3">pxLeft</a>;
00722     pWidth[2] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o4">pxRight</a>;
00723 
00724     <span class="comment">/*</span>
00725 <span class="comment">     * If both scroll bar arrows are disabled, then we should not draw</span>
00726 <span class="comment">     * the thumb.  So, quit now!</span>
00727 <span class="comment">     */</span>
00728     <span class="keywordflow">if</span> (((wDisable &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a765">LTUPFLAG</a>) &amp;&amp; (wDisable &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a766">RTDNFLAG</a>)) ||
00729         ((pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a> - pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o6">pxUpArrow</a>) &lt; pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o5">cpxThumb</a>)) {
00730         pLength[0] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o6">pxUpArrow</a>;
00731         pLength[2] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a>;
00732 
00733         <a class="code" href="../../d8/d4/sbctl_8c.html#a22">DrawGroove</a>(hdc, hbr, &amp;rcSB, fVert);
00734         <span class="keywordflow">return</span>;
00735     }
00736 
00737     <span class="keywordflow">if</span> (pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o6">pxUpArrow</a> &lt; pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a>) {
00738         <span class="comment">// Fill in space above Thumb</span>
00739         pLength[0] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o6">pxUpArrow</a>;
00740         pLength[2] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a>;
00741 
00742         <a class="code" href="../../d8/d4/sbctl_8c.html#a22">DrawGroove</a>(hdc, hbr, &amp;rcSB, fVert);
00743     }
00744 
00745     <span class="keywordflow">if</span> (pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o9">pxThumbBottom</a> &lt; pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a>) {
00746         <span class="comment">// Fill in space below Thumb</span>
00747         pLength[0] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o9">pxThumbBottom</a>;
00748         pLength[2] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a>;
00749 
00750         <a class="code" href="../../d8/d4/sbctl_8c.html#a22">DrawGroove</a>(hdc, hbr, &amp;rcSB, fVert);
00751     }
00752 
00753     <span class="comment">//</span>
00754     <span class="comment">// Draw elevator</span>
00755     <span class="comment">//</span>
00756     pLength[0] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a>;
00757     pLength[2] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o9">pxThumbBottom</a>;
00758 
00759     <span class="comment">// Not soft!</span>
00760     <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a16">DrawPushButton</a>(hdc, &amp;rcSB, 0, 0);
00761 
00762     <span class="comment">/*</span>
00763 <span class="comment">     * If we're tracking a page scroll, then we've obliterated the hilite.</span>
00764 <span class="comment">     * We need to correct the hiliting rectangle, and rehilite it.</span>
00765 <span class="comment">     */</span>
00766     pSBTrack = <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd);
00767 
00768     <span class="keywordflow">if</span> (pSBTrack &amp;&amp; (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> == SB_PAGEUP || pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> == SB_PAGEDOWN) &amp;&amp;
00769             (pwnd == pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o4">spwndTrack</a>) &amp;&amp;
00770             (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a> == fVert) {
00771 
00772         <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o3">fTrackRecalc</a>) {
00773             <a class="code" href="../../d8/d4/sbctl_8c.html#a24">RecalcTrackRect</a>(pSBTrack);
00774             pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o3">fTrackRecalc</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00775         }
00776 
00777         pLength = (<span class="keywordtype">int</span> *)&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o7">rcTrack</a>;
00778 
00779         <span class="keywordflow">if</span> (fVert)
00780             pLength++;
00781 
00782         <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> == SB_PAGEUP)
00783             pLength[2] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a>;
00784         <span class="keywordflow">else</span>
00785             pLength[0] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o9">pxThumbBottom</a>;
00786 
00787         <span class="keywordflow">if</span> (pLength[0] &lt; pLength[2])
00788             <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a4">InvertRect</a>(hdc, &amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o7">rcTrack</a>);
00789     }
00790 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="sbctl.c::GetWndSBDisableFlags" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT GetWndSBDisableFlags           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fVert</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00186">186</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01848">tagWND::pSBInfo</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00035">WSB_HORZ</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00034">WSB_VERT</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01790">tagSBINFO::WSBflags</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/winable2_8c-source.html#l00309">_GetScrollBarInfo()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00081">HitTestScrollBar()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02489">xxxDoScrollMenu()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01464">xxxDrawScrollBar()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01277">xxxDrawThumb()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">xxxSBTrackInit()</a>.
<p>
<pre class="fragment"><div>00189 {
00190     <a class="code" href="../../d5/d5/structtagSBINFO.html">PSBINFO</a> pw;
00191 
00192     <span class="keywordflow">if</span> ((pw = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o14">pSBInfo</a>) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00193         RIPERR0(ERROR_NO_SCROLLBARS, RIP_VERBOSE, <span class="stringliteral">""</span>);
00194         <span class="keywordflow">return</span> 0;
00195     }
00196 
00197     <span class="keywordflow">return</span> (fVert ? (pw-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o0">WSBflags</a> &amp; <a class="code" href="../../d8/d4/sbctl_8c.html#a5">WSB_VERT</a>) &gt;&gt; 2 : pw-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o0">WSBflags</a> &amp; <a class="code" href="../../d8/d4/sbctl_8c.html#a6">WSB_HORZ</a>);
00198 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="sbctl.c::HitTestScrollBar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int HitTestScrollBar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fVert</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>POINT&nbsp;</td>
          <td class="mdname" nowrap> <em>pt</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00081">81</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d1/userk_8h.html#a1422">CalcSBStuff()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00186">GetWndSBDisableFlags()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06699">HTSCROLLDOWN</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06701">HTSCROLLDOWNPAGE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06702">HTSCROLLTHUMB</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06698">HTSCROLLUP</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06700">HTSCROLLUPPAGE</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00021">IsScrollBarControl</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02690">LTUPFLAG</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02852">tagSBCALC::pxDownArrow</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02854">tagSBCALC::pxThumbBottom</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02855">tagSBCALC::pxThumbTop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02851">tagSBCALC::pxUpArrow</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02691">RTDNFLAG</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1081">SBCALC</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>00082 {
00083     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wDisable;
00084     <span class="keywordtype">int</span> px;
00085     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fCtl = <a class="code" href="../../d8/d4/sbctl_8c.html#a0">IsScrollBarControl</a>(pwnd);
00086     <a class="code" href="../../d3/d5/structtagSBCALC.html">SBCALC</a> SBCalc, *pSBCalc;
00087 
00088     <span class="keywordflow">if</span> (fCtl) {
00089         wDisable = ((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)pwnd)-&gt;wDisableFlags;
00090     } <span class="keywordflow">else</span> {
00091 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00092 <span class="preprocessor"></span>        <span class="comment">//</span>
00093         <span class="comment">// Reflect the click coordinates on the horizontal</span>
00094         <span class="comment">// scroll bar if the window is mirrored</span>
00095         <span class="comment">//</span>
00096         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd,WEFLAYOUTRTL) &amp;&amp; !fVert) {
00097             pt.x = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.right - pt.x;
00098         }
00099         <span class="keywordflow">else</span>
00100 <span class="preprocessor">#endif</span>
00101 <span class="preprocessor"></span>        pt.x -= pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left;
00102 
00103         pt.y -= pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top;
00104         wDisable = <a class="code" href="../../d4/d1/userk_8h.html#a1486">GetWndSBDisableFlags</a>(pwnd, fVert);
00105     }
00106 
00107     <span class="keywordflow">if</span> ((wDisable &amp; SB_DISABLE_MASK) == SB_DISABLE_MASK) {
00108         <span class="keywordflow">return</span> HTERROR;
00109     }
00110 
00111     <span class="keywordflow">if</span> (fCtl) {
00112         pSBCalc = &amp;(((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)pwnd)-&gt;SBCalc);
00113     } <span class="keywordflow">else</span> {
00114         pSBCalc = &amp;SBCalc;
00115         <a class="code" href="../../d4/d1/userk_8h.html#a1422">CalcSBStuff</a>(pwnd, pSBCalc, fVert);
00116     }
00117 
00118     px = fVert ? pt.y : pt.x;
00119 
00120     <span class="keywordflow">if</span> (px &lt; pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o6">pxUpArrow</a>) {
00121         <span class="keywordflow">if</span> (wDisable &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a765">LTUPFLAG</a>) {
00122             <span class="keywordflow">return</span> HTERROR;
00123         }
00124         <span class="keywordflow">return</span> <a class="code" href="../../d4/d1/userk_8h.html#a668">HTSCROLLUP</a>;
00125     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (px &gt;= pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a>) {
00126         <span class="keywordflow">if</span> (wDisable &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a766">RTDNFLAG</a>) {
00127             <span class="keywordflow">return</span> HTERROR;
00128         }
00129         <span class="keywordflow">return</span> <a class="code" href="../../d4/d1/userk_8h.html#a669">HTSCROLLDOWN</a>;
00130     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (px &lt; pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a>) {
00131         <span class="keywordflow">return</span> <a class="code" href="../../d4/d1/userk_8h.html#a670">HTSCROLLUPPAGE</a>;
00132     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (px &lt; pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o9">pxThumbBottom</a>) {
00133         <span class="keywordflow">return</span> <a class="code" href="../../d4/d1/userk_8h.html#a672">HTSCROLLTHUMB</a>;
00134     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (px &lt; pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a>) {
00135         <span class="keywordflow">return</span> <a class="code" href="../../d4/d1/userk_8h.html#a671">HTSCROLLDOWNPAGE</a>;
00136     }
00137     <span class="keywordflow">return</span> HTERROR;
00138 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="sbctl.c::InvertScrollHilite" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void InvertScrollHilite           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pSBTrack</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01519">1519</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00201">_GetWindowDC()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00183">_ReleaseDC()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02864">tagSBTRACK::fTrackRecalc</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00096">InvertRect()</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00101">IsRectEmpty()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02868">tagSBTRACK::rcTrack</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00645">RecalcTrackRect()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01678">zzzDrawInvertScrollArea()</a>.
<p>
<pre class="fragment"><div>01522 {
01523     HDC hdc;
01524 
01525     <span class="comment">/*</span>
01526 <span class="comment">     * Don't invert if the thumb is all the way at the top or bottom</span>
01527 <span class="comment">     * or you will end up inverting the line between the arrow and the thumb.</span>
01528 <span class="comment">     */</span>
01529     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/rect_8c.html#a4">IsRectEmpty</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o7">rcTrack</a>)) {
01530         <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o3">fTrackRecalc</a>) {
01531             <a class="code" href="../../d8/d4/sbctl_8c.html#a24">RecalcTrackRect</a>(pSBTrack);
01532             pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o3">fTrackRecalc</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01533         }
01534 
01535         hdc = (HDC)<a class="code" href="../../d4/d1/userk_8h.html#a1696">_GetWindowDC</a>(pwnd);
01536         <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a4">InvertRect</a>(hdc, &amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o7">rcTrack</a>);
01537         <a class="code" href="../../d4/d1/userk_8h.html#a1697">_ReleaseDC</a>(hdc);
01538     }
01539 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="sbctl.c::RecalcTrackRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void RecalcTrackRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pSBTrack</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00645">645</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d4/d1/userk_8h.html#a1422">CalcSBStuff()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00600">CalcTrackDragRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02870">tagSBTRACK::cmdSB</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02863">tagSBTRACK::fCtlSB</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02862">tagSBTRACK::fTrackVert</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02877">tagSBTRACK::pSBCalc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02847">tagSBCALC::pxBottom</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02852">tagSBCALC::pxDownArrow</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02848">tagSBCALC::pxLeft</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02849">tagSBCALC::pxRight</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02854">tagSBCALC::pxThumbBottom</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02855">tagSBCALC::pxThumbTop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02846">tagSBCALC::pxTop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02851">tagSBCALC::pxUpArrow</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02868">tagSBTRACK::rcTrack</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02865">tagSBTRACK::spwndTrack</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00697">DrawThumb2()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01519">InvertScrollHilite()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01971">xxxTrackBox()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02061">xxxTrackThumb()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01678">zzzDrawInvertScrollArea()</a>.
<p>
<pre class="fragment"><div>00645                                         {
00646     LPINT pwX, pwY;
00647     RECT rcSB;
00648 
00649 
00650     <span class="keywordflow">if</span> (!pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o2">fCtlSB</a>)
00651         <a class="code" href="../../d4/d1/userk_8h.html#a1422">CalcSBStuff</a>(pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o4">spwndTrack</a>, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>);
00652 
00653     pwX = (LPINT)&amp;rcSB;
00654     pwY = pwX + 1;
00655     <span class="keywordflow">if</span> (!pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>)
00656         pwX = pwY--;
00657 
00658     *(pwX + 0) = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o3">pxLeft</a>;
00659     *(pwY + 0) = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o1">pxTop</a>;
00660     *(pwX + 2) = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o4">pxRight</a>;
00661     *(pwY + 2) = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o2">pxBottom</a>;
00662 
00663     <span class="keywordflow">switch</span>(pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a>) {
00664     <span class="keywordflow">case</span> SB_LINEUP:
00665         *(pwY + 2) = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o6">pxUpArrow</a>;
00666         <span class="keywordflow">break</span>;
00667     <span class="keywordflow">case</span> SB_LINEDOWN:
00668         *(pwY + 0) = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a>;
00669         <span class="keywordflow">break</span>;
00670     <span class="keywordflow">case</span> SB_PAGEUP:
00671         *(pwY + 0) = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o6">pxUpArrow</a>;
00672         *(pwY + 2) = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a>;
00673         <span class="keywordflow">break</span>;
00674     <span class="keywordflow">case</span> SB_THUMBPOSITION:
00675         <a class="code" href="../../d8/d4/sbctl_8c.html#a23">CalcTrackDragRect</a>(pSBTrack);
00676         <span class="keywordflow">break</span>;
00677     <span class="keywordflow">case</span> SB_PAGEDOWN:
00678         *(pwY + 0) = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o9">pxThumbBottom</a>;
00679         *(pwY + 2) = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a>;
00680         <span class="keywordflow">break</span>;
00681     }
00682 
00683     <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> != SB_THUMBPOSITION) {
00684         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o7">rcTrack</a>, &amp;rcSB);
00685     }
00686 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="sbctl.c::SBCtlSetup" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SBCtlSetup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d5/structtagSBWND.html">PSBWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>psbwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01012">1012</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00925">CalcSBStuff2()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00856">GetRect()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03420">GRECT_CLIENT</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03424">GRECT_CLIENTCOORDS</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01253">DrawCtlThumb()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02489">xxxDoScrollMenu()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.
<p>
<pre class="fragment"><div>01014 {
01015     RECT rc;
01016 
01017     <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a12">GetRect</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, &amp;rc, GRECT_CLIENT | GRECT_CLIENTCOORDS);
01018     <a class="code" href="../../d4/d1/userk_8h.html#a1423">CalcSBStuff2</a>(&amp;psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o3">SBCalc</a>, &amp;rc, (<a class="code" href="../../d4/d5/structtagSBDATA.html">PSBDATA</a>)&amp;psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o3">SBCalc</a>, psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o1">fVert</a>);
01019 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="sbctl.c::SBPosFromPx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int SBPosFromPx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pSBCalc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>px</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01493">1493</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02856">tagSBCALC::cpx</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02857">tagSBCALC::pxMin</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01596">xxxMoveThumb()</a>.
<p>
<pre class="fragment"><div>01496 {
01497     <span class="keywordflow">if</span> (px &lt; pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o12">pxMin</a>) {
01498         <span class="keywordflow">return</span> pSBCalc-&gt;posMin;
01499     }
01500     <span class="keywordflow">if</span> (px &gt;= pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o12">pxMin</a> + pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o11">cpx</a>) {
01501         <span class="keywordflow">return</span> (pSBCalc-&gt;posMax - (pSBCalc-&gt;page ? pSBCalc-&gt;page - 1 : 0));
01502     }
01503     <span class="keywordflow">if</span> (pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o11">cpx</a>)
01504         <span class="keywordflow">return</span> (pSBCalc-&gt;posMin + EngMulDiv(pSBCalc-&gt;posMax - pSBCalc-&gt;posMin -
01505             (pSBCalc-&gt;page ? pSBCalc-&gt;page - 1 : 0),
01506             px - pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o12">pxMin</a>, pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o11">cpx</a>));
01507     <span class="keywordflow">else</span>
01508         <span class="keywordflow">return</span> (pSBCalc-&gt;posMin - 1);
01509 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="sbctl.c::SBSetParms" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SBSetParms           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d5/structtagSBDATA.html">PSBDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pw</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSCROLLINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpsi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPBOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>lpfScroll</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPLONG&nbsp;</td>
          <td class="mdname" nowrap> <em>lplres</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01087">1087</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l02354">abs</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01781">tagSBDATA::page</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01782">tagSBDATA::pos</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01780">tagSBDATA::posMax</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01779">tagSBDATA::posMin</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01316">xxxSetScrollBar()</a>.
<p>
<pre class="fragment"><div>01088 {
01089     <span class="comment">// pass the struct because we modify the struct but don't want that</span>
01090     <span class="comment">// modified version to get back to the calling app</span>
01091 
01092     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fChanged = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01093 
01094     <span class="keywordflow">if</span> (lpsi-&gt;fMask &amp; SIF_RETURNOLDPOS)
01095         <span class="comment">// save previous position</span>
01096         *lplres = pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o3">pos</a>;
01097 
01098     <span class="keywordflow">if</span> (lpsi-&gt;fMask &amp; SIF_RANGE) {
01099         <span class="comment">// if the range MAX is below the range MIN -- then treat is as a</span>
01100         <span class="comment">// zero range starting at the range MIN.</span>
01101         <span class="keywordflow">if</span> (lpsi-&gt;nMax &lt; lpsi-&gt;nMin)
01102             lpsi-&gt;nMax = lpsi-&gt;nMin;
01103 
01104         <span class="keywordflow">if</span> ((pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o0">posMin</a> != lpsi-&gt;nMin) || (pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o1">posMax</a> != lpsi-&gt;nMax)) {
01105             pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o0">posMin</a> = lpsi-&gt;nMin;
01106             pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o1">posMax</a> = lpsi-&gt;nMax;
01107 
01108             <span class="keywordflow">if</span> (!(lpsi-&gt;fMask &amp; SIF_PAGE)) {
01109                 lpsi-&gt;fMask |= SIF_PAGE;
01110                 lpsi-&gt;nPage = pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o2">page</a>;
01111             }
01112 
01113             <span class="keywordflow">if</span> (!(lpsi-&gt;fMask &amp; SIF_POS)) {
01114                 lpsi-&gt;fMask |= SIF_POS;
01115                 lpsi-&gt;nPos = pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o3">pos</a>;
01116             }
01117 
01118             fChanged = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01119         }
01120     }
01121 
01122     <span class="keywordflow">if</span> (lpsi-&gt;fMask &amp; SIF_PAGE) {
01123         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwMaxPage = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) <a class="code" href="../../d4/d1/userk_8h.html#a259">abs</a>(pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o1">posMax</a> - pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o0">posMin</a>) + 1;
01124 
01125         <span class="comment">// Clip page to 0, posMax - posMin + 1</span>
01126 
01127         <span class="keywordflow">if</span> (lpsi-&gt;nPage &gt; dwMaxPage)
01128             lpsi-&gt;nPage = dwMaxPage;
01129 
01130 
01131         <span class="keywordflow">if</span> (pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o2">page</a> != (<span class="keywordtype">int</span>)(lpsi-&gt;nPage)) {
01132             pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o2">page</a> = lpsi-&gt;nPage;
01133 
01134             <span class="keywordflow">if</span> (!(lpsi-&gt;fMask &amp; SIF_POS)) {
01135                 lpsi-&gt;fMask |= SIF_POS;
01136                 lpsi-&gt;nPos = pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o3">pos</a>;
01137             }
01138 
01139             fChanged = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01140         }
01141     }
01142 
01143     <span class="keywordflow">if</span> (lpsi-&gt;fMask &amp; SIF_POS) {
01144         <span class="keywordtype">int</span> iMaxPos = pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o1">posMax</a> - ((pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o2">page</a>) ? pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o2">page</a> - 1 : 0);
01145         <span class="comment">// Clip pos to posMin, posMax - (page - 1).</span>
01146 
01147         <span class="keywordflow">if</span> (lpsi-&gt;nPos &lt; pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o0">posMin</a>)
01148             lpsi-&gt;nPos = pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o0">posMin</a>;
01149         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lpsi-&gt;nPos &gt; iMaxPos)
01150             lpsi-&gt;nPos = iMaxPos;
01151 
01152 
01153         <span class="keywordflow">if</span> (pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o3">pos</a> != lpsi-&gt;nPos) {
01154             pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o3">pos</a> = lpsi-&gt;nPos;
01155             fChanged = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01156         }
01157     }
01158 
01159     <span class="keywordflow">if</span> (!(lpsi-&gt;fMask &amp; SIF_RETURNOLDPOS)) {
01160         <span class="comment">// Return the new position</span>
01161         *lplres = pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o3">pos</a>;
01162     }
01163 
01164     <span class="comment">/*</span>
01165 <span class="comment">     * This was added by JimA as Cairo merge but will conflict</span>
01166 <span class="comment">     * with the documentation for SetScrollPos</span>
01167 <span class="comment">     */</span>
01168 <span class="comment">/*</span>
01169 <span class="comment">    else if (*lplres == pw-&gt;pos)</span>
01170 <span class="comment">        *lplres = 0;</span>
01171 <span class="comment">*/</span>
01172     <span class="keywordflow">if</span> (lpsi-&gt;fMask &amp; SIF_RANGE) {
01173         <span class="keywordflow">if</span> (*lpfScroll = (pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o0">posMin</a> != pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o1">posMax</a>))
01174             <span class="keywordflow">goto</span> checkPage;
01175     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lpsi-&gt;fMask &amp; SIF_PAGE)
01176 checkPage:
01177         *lpfScroll = (pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o2">page</a> &lt;= (pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o1">posMax</a> - pw-&gt;<a class="code" href="../../d4/d5/structtagSBDATA.html#o0">posMin</a>));
01178 
01179     <span class="keywordflow">return</span> fChanged;
01180 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="sbctl.c::xxxContScroll" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxContScroll           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>ID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01913">1913</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l01205">_GetMessagePos()</a>, <a class="el" href="../../d5/d1/timers_8c-source.html#l00078">_SetSystemTimer()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02870">tagSBTRACK::cmdSB</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02861">tagSBTRACK::fHitOld</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02862">tagSBTRACK::fTrackVert</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00143">GET_X_LPARAM</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00147">GET_Y_LPARAM</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02720">tagSBTRACK::hTimerSB</a>, <a class="el" href="../../d5/d8/smbtrsup_8c-source.html#l00151">ID</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00310">IDSYS_SCROLL</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03397">PWNDTOPSBTRACK</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00050">RETURN_IF_PSBTRACK_INVALID</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02866">tagSBTRACK::spwndSB</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02867">tagSBTRACK::spwndSBNotify</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01913">xxxContScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01549">xxxDoScroll()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01971">xxxTrackBox()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01913">xxxContScroll()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01971">xxxTrackBox()</a>.
<p>
<pre class="fragment"><div>01918 {
01919     LONG pt;
01920     <a class="code" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack = <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd);
01921 
01922     UNREFERENCED_PARAMETER(message);
01923     UNREFERENCED_PARAMETER(ID);
01924     UNREFERENCED_PARAMETER(lParam);
01925 
01926     <span class="keywordflow">if</span> (pSBTrack == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01927         <span class="keywordflow">return</span>;
01928 
01929     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
01930 
01931     pt = <a class="code" href="../../d4/d1/userk_8h.html#a1639">_GetMessagePos</a>();
01932 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01933 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLAYOUTRTL)) {
01934         pt = MAKELONG(pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.right - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(pt), <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(pt) - pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top);
01935     } <span class="keywordflow">else</span>
01936 <span class="preprocessor">#endif</span>
01937 <span class="preprocessor"></span>    {
01938         pt = MAKELONG( <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(pt) - pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(pt) - pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top);
01939     }
01940     <a class="code" href="../../d4/d1/userk_8h.html#a1440">xxxTrackBox</a>(pwnd, WM_NULL, 0, pt, NULL);
01941     <span class="comment">// After xxxTrackBox, revalidate pSBTrack</span>
01942     <a class="code" href="../../d8/d4/sbctl_8c.html#a7">RETURN_IF_PSBTRACK_INVALID</a>(pSBTrack, pwnd);
01943 
01944     <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o0">fHitOld</a>) {
01945         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o10">hTimerSB</a> = <a class="code" href="../../d4/d1/userk_8h.html#a1894">_SetSystemTimer</a>(pwnd, IDSYS_SCROLL,
01946                 <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtScroll / 8, xxxContScroll);
01947 
01948         <span class="comment">/*</span>
01949 <span class="comment">         * DoScroll does thread locking on these two pwnds -</span>
01950 <span class="comment">         * this is ok since they are not used after this</span>
01951 <span class="comment">         * call.</span>
01952 <span class="comment">         */</span>
01953         <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01954             <a class="code" href="../../d8/d4/sbctl_8c.html#a36">xxxDoScroll</a>(pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a>,
01955                     pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a>, 0, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>);
01956             <span class="comment">// Note: after xxx, pSBTrack may no longer be valid (but we return now)</span>
01957         }
01958     }
01959 
01960     <span class="keywordflow">return</span>;
01961 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="sbctl.c::xxxDoScroll" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxDoScroll           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndNotify</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fVert</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01549">1549</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00688">xxxSendMessage()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01913">xxxContScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02489">xxxDoScrollMenu()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01782">xxxEndScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01596">xxxMoveThumb()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">xxxSBTrackInit()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01971">xxxTrackBox()</a>.
<p>
<pre class="fragment"><div>01556 {
01557     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndNotify;
01558 
01559     <span class="comment">/*</span>
01560 <span class="comment">     * Special case!!!! this routine is always passed pwnds that are</span>
01561 <span class="comment">     * not thread locked, so they need to be thread locked here.  The</span>
01562 <span class="comment">     * callers always know that by the time DoScroll() returns,</span>
01563 <span class="comment">     * pwnd and pwndNotify could be invalid.</span>
01564 <span class="comment">     */</span>
01565     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndNotify, &amp;tlpwndNotify);
01566     <a class="code" href="../../d4/d1/userk_8h.html#a1579">xxxSendMessage</a>(pwndNotify, (UINT)(fVert ? WM_VSCROLL : WM_HSCROLL),
01567             MAKELONG(cmd, pos), (LPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwnd));
01568 
01569     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndNotify);
01570 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="sbctl.c::xxxDoScrollMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxDoScrollMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndNotify</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndSB</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fVert</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02489">2489</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d4/d1/userk_8h.html#a1422">CalcSBStuff()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00143">GET_X_LPARAM</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00147">GET_Y_LPARAM</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l01014">GetAppCompatFlags()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00186">GetWndSBDisableFlags()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01012">SBCtlSetup()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l04827">SCROLL_MENU</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01549">xxxDoScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02444">xxxGetScrollMenu()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">xxxSBTrackInit()</a>, and <a class="el" href="../../d3/d2/mnpopup_8c-source.html#l00052">xxxTrackPopupMenuEx()</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.
<p>
<pre class="fragment"><div>02494 {
02495     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pMenu;
02496     <a class="code" href="../../d3/d5/structtagSBCALC.html">SBCALC</a> SBCalc, *pSBCalc;
02497     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cmd;
02498     POINT pt;
02499     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpmenu;
02500     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wDisable;
02501 
02502     <span class="comment">/*</span>
02503 <span class="comment">     * Check the compatibility flag.  Word 6.0 AV's when selecting an item</span>
02504 <span class="comment">     * in this menu.</span>
02505 <span class="comment">     * NOTE: If this hack is to be extended for other apps we should use</span>
02506 <span class="comment">     * another bit for GACF_NOSCROLLBARCTXMENU as the current one is re-used</span>
02507 <span class="comment">     *  MCostea #119380</span>
02508 <span class="comment">     */</span>
02509     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d3/queue_8c.html#a34">GetAppCompatFlags</a>(NULL) &amp; GACF_NOSCROLLBARCTXMENU) {
02510         <span class="keywordflow">return</span>;
02511     }
02512 
02513     <span class="comment">/*</span>
02514 <span class="comment">     * Initialize some stuff.</span>
02515 <span class="comment">     */</span>
02516     POINTSTOPOINT(pt, lParam);
02517     <span class="keywordflow">if</span> (pwndSB) {
02518         <a class="code" href="../../d4/d1/userk_8h.html#a1421">SBCtlSetup</a>((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)pwndSB);
02519         pSBCalc = &amp;(((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)pwndSB)-&gt;SBCalc);
02520         wDisable = ((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)pwndSB)-&gt;wDisableFlags;
02521         pt.x -= pwndSB-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left;
02522         pt.y -= pwndSB-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top;
02523     } <span class="keywordflow">else</span> {
02524         pSBCalc = &amp;SBCalc;
02525         <a class="code" href="../../d4/d1/userk_8h.html#a1422">CalcSBStuff</a>(pwndNotify, pSBCalc, fVert);
02526         wDisable = <a class="code" href="../../d4/d1/userk_8h.html#a1486">GetWndSBDisableFlags</a>(pwndNotify, fVert);
02527         pt.x -= pwndNotify-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left;
02528         pt.y -= pwndNotify-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top;
02529     }
02530 
02531     <span class="comment">/*</span>
02532 <span class="comment">     * Make sure the scrollbar isn't disabled.</span>
02533 <span class="comment">     */</span>
02534     <span class="keywordflow">if</span> ((wDisable &amp; SB_DISABLE_MASK) == SB_DISABLE_MASK) {
02535         <span class="keywordflow">return</span>;
02536     }
02537 
02538     <span class="comment">/*</span>
02539 <span class="comment">     * Put up a menu and scroll accordingly.</span>
02540 <span class="comment">     */</span>
02541     <span class="keywordflow">if</span> ((pMenu = <a class="code" href="../../d8/d4/sbctl_8c.html#a45">xxxGetScrollMenu</a>(pwndNotify, fVert)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02542         <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pMenu, &amp;tlpmenu);
02543         cmd = <a class="code" href="../../d4/d1/userk_8h.html#a1597">xxxTrackPopupMenuEx</a>(pMenu,
02544                                   TPM_RIGHTBUTTON | TPM_RETURNCMD | TPM_NONOTIFY,
02545                                   <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lParam),
02546                                   <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(lParam),
02547                                   pwndNotify,
02548                                   NULL);
02549         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpmenu);
02550         <span class="keywordflow">if</span> (cmd) {
02551             <span class="keywordflow">if</span> ((cmd &amp; 0x00FF) == SB_THUMBPOSITION) {
02552                 <span class="keywordflow">if</span> (pwndSB) {
02553                     <a class="code" href="../../d4/d1/userk_8h.html#a1420">xxxSBTrackInit</a>(pwndSB, MAKELPARAM(pt.x, pt.y), 0, SCROLL_MENU);
02554                 } <span class="keywordflow">else</span> {
02555                     <a class="code" href="../../d4/d1/userk_8h.html#a1420">xxxSBTrackInit</a>(pwndNotify, lParam, fVert ? HTVSCROLL : HTHSCROLL, SCROLL_MENU);
02556                 }
02557             } <span class="keywordflow">else</span> {
02558                 <a class="code" href="../../d8/d4/sbctl_8c.html#a36">xxxDoScroll</a>(pwndSB,
02559                             pwndNotify,
02560                             cmd &amp; 0x00FF,
02561                             0,
02562                             fVert
02563                 );
02564                 <a class="code" href="../../d8/d4/sbctl_8c.html#a36">xxxDoScroll</a>(pwndSB,
02565                             pwndNotify,
02566                             SB_ENDSCROLL,
02567                             0,
02568                             fVert
02569                 );
02570             }
02571         }
02572     }
02573 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="sbctl.c::xxxDrawSB2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxDrawSB2           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pSBCalc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fVert</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wDisable</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00800">800</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d0/d2/mngrayc_8c-source.html#l00029">BitBltSysBmp()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00729">DrawFrameControl()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00697">DrawThumb2()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02690">LTUPFLAG</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01009">OBI_DNARROW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01012">OBI_DNARROW_I</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01017">OBI_LFARROW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01020">OBI_LFARROW_I</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01013">OBI_RGARROW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01016">OBI_RGARROW_I</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01005">OBI_UPARROW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01008">OBI_UPARROW_I</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02847">tagSBCALC::pxBottom</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02848">tagSBCALC::pxLeft</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02849">tagSBCALC::pxRight</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02846">tagSBCALC::pxTop</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02691">RTDNFLAG</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00212">SYSHBR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00540">xxxGetColorObjects()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01464">xxxDrawScrollBar()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.
<p>
<pre class="fragment"><div>00806 {
00807 
00808     <span class="keywordtype">int</span>     cLength;
00809     <span class="keywordtype">int</span>     cWidth;
00810     <span class="keywordtype">int</span>     *pwX;
00811     <span class="keywordtype">int</span>     *pwY;
00812     HBRUSH hbr;
00813     HBRUSH hbrSave;
00814     <span class="keywordtype">int</span> cpxArrow;
00815     RECT    rc, rcSB;
00816     COLORREF crText, crBk;
00817 
00818     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00819 
00820     cLength = (pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o2">pxBottom</a> - pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o1">pxTop</a>) / 2;
00821     cWidth = (pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o4">pxRight</a> - pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o3">pxLeft</a>);
00822 
00823     <span class="keywordflow">if</span> ((cLength &lt;= 0) || (cWidth &lt;= 0)) {
00824         <span class="keywordflow">return</span>;
00825     }
00826     <span class="keywordflow">if</span> (fVert)
00827         cpxArrow = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYVSCROLL);
00828     <span class="keywordflow">else</span>
00829         cpxArrow = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXHSCROLL);
00830 
00831     <span class="comment">/*</span>
00832 <span class="comment">     * Save background and DC color, since they get changed in</span>
00833 <span class="comment">     * xxxGetColorObjects. Restore before we return.</span>
00834 <span class="comment">     */</span>
00835     crBk = GreGetBkColor(hdc);
00836     crText = GreGetTextColor(hdc);
00837 
00838     hbr = <a class="code" href="../../d8/d4/sbctl_8c.html#a21">xxxGetColorObjects</a>(pwnd, hdc);
00839 
00840     <span class="keywordflow">if</span> (cLength &gt; cpxArrow)
00841         cLength = cpxArrow;
00842     pwX = (<span class="keywordtype">int</span> *)&amp;rcSB;
00843     pwY = pwX + 1;
00844     <span class="keywordflow">if</span> (!fVert)
00845         pwX = pwY--;
00846 
00847     pwX[0] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o3">pxLeft</a>;
00848     pwY[0] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o1">pxTop</a>;
00849     pwX[2] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o4">pxRight</a>;
00850     pwY[2] = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o2">pxBottom</a>;
00851 
00852     hbrSave = GreSelectBrush(hdc, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a22">SYSHBR</a>(BTNTEXT));
00853 
00854     <span class="comment">//</span>
00855     <span class="comment">// BOGUS</span>
00856     <span class="comment">// Draw scrollbar arrows as disabled if the scrollbar itself is</span>
00857     <span class="comment">// disabled OR if the window it is a part of is disabled?</span>
00858     <span class="comment">//</span>
00859     <span class="keywordflow">if</span> (fVert) {
00860         <span class="keywordflow">if</span> ((cLength == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYVSCROLL)) &amp;&amp; (cWidth == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL))) {
00861             <a class="code" href="../../d4/d1/userk_8h.html#a1773">BitBltSysBmp</a>(hdc, rcSB.left, rcSB.top, (wDisable &amp; LTUPFLAG) ? OBI_UPARROW_I : OBI_UPARROW);
00862             <a class="code" href="../../d4/d1/userk_8h.html#a1773">BitBltSysBmp</a>(hdc, rcSB.left, rcSB.bottom - cLength, (wDisable &amp; RTDNFLAG) ? OBI_DNARROW_I : OBI_DNARROW);
00863         } <span class="keywordflow">else</span> {
00864             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rc, &amp;rcSB);
00865             rc.bottom = rc.top + cLength;
00866             <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a14">DrawFrameControl</a>(hdc, &amp;rc, DFC_SCROLL,
00867                 DFCS_SCROLLUP | ((wDisable &amp; LTUPFLAG) ? DFCS_INACTIVE : 0));
00868 
00869             rc.bottom = rcSB.bottom;
00870             rc.top = rcSB.bottom - cLength;
00871             <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a14">DrawFrameControl</a>(hdc, &amp;rc, DFC_SCROLL,
00872                 DFCS_SCROLLDOWN | ((wDisable &amp; RTDNFLAG) ? DFCS_INACTIVE : 0));
00873         }
00874     } <span class="keywordflow">else</span> {
00875         <span class="keywordflow">if</span> ((cLength == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXHSCROLL)) &amp;&amp; (cWidth == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYHSCROLL))) {
00876             <a class="code" href="../../d4/d1/userk_8h.html#a1773">BitBltSysBmp</a>(hdc, rcSB.left, rcSB.top, (wDisable &amp; LTUPFLAG) ? OBI_LFARROW_I : OBI_LFARROW);
00877             <a class="code" href="../../d4/d1/userk_8h.html#a1773">BitBltSysBmp</a>(hdc, rcSB.right - cLength, rcSB.top, (wDisable &amp; RTDNFLAG) ? OBI_RGARROW_I : OBI_RGARROW);
00878         } <span class="keywordflow">else</span> {
00879             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rc, &amp;rcSB);
00880             rc.right = rc.left + cLength;
00881             <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a14">DrawFrameControl</a>(hdc, &amp;rc, DFC_SCROLL,
00882                 DFCS_SCROLLLEFT | ((wDisable &amp; LTUPFLAG) ? DFCS_INACTIVE : 0));
00883 
00884             rc.right = rcSB.right;
00885             rc.left = rcSB.right - cLength;
00886             <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a14">DrawFrameControl</a>(hdc, &amp;rc, DFC_SCROLL,
00887                 DFCS_SCROLLRIGHT | ((wDisable &amp; RTDNFLAG) ? DFCS_INACTIVE : 0));
00888         }
00889     }
00890 
00891     hbrSave = GreSelectBrush(hdc, hbrSave);
00892     <a class="code" href="../../d4/d1/userk_8h.html#a1485">DrawThumb2</a>(pwnd, pSBCalc, hdc, hbr, fVert, wDisable);
00893     GreSelectBrush(hdc, hbrSave);
00894 
00895     GreSetBkColor(hdc, crBk);
00896     GreSetTextColor(hdc, crText);
00897 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="sbctl.c::xxxDrawScrollBar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxDrawScrollBar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fVert</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01464">1464</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d1/userk_8h.html#a1422">CalcSBStuff()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02863">tagSBTRACK::fCtlSB</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02862">tagSBTRACK::fTrackVert</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00186">GetWndSBDisableFlags()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02877">tagSBTRACK::pSBCalc</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03397">PWNDTOPSBTRACK</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02865">tagSBTRACK::spwndTrack</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00800">xxxDrawSB2()</a>.
<p>
Referenced by <a class="el" href="../../d2/d1/drawfrm_8c-source.html#l00076">xxxDrawWindowFrame()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00271">xxxEnableWndSBArrows()</a>.
<p>
<pre class="fragment"><div>01468 {
01469     <a class="code" href="../../d3/d5/structtagSBCALC.html">SBCALC</a> SBCalc;
01470     <a class="code" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a> pSBCalc;
01471     <a class="code" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack = <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd);
01472 
01473     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
01474     <span class="keywordflow">if</span> (pSBTrack &amp;&amp; (pwnd == pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o4">spwndTrack</a>) &amp;&amp; (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o2">fCtlSB</a> == <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>)
01475          &amp;&amp; (fVert == (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>)) {
01476         pSBCalc = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>;
01477     } <span class="keywordflow">else</span> {
01478         pSBCalc = &amp;SBCalc;
01479     }
01480     <a class="code" href="../../d4/d1/userk_8h.html#a1422">CalcSBStuff</a>(pwnd, pSBCalc, fVert);
01481 
01482     <a class="code" href="../../d8/d4/sbctl_8c.html#a26">xxxDrawSB2</a>(pwnd, pSBCalc, hdc, fVert, <a class="code" href="../../d4/d1/userk_8h.html#a1486">GetWndSBDisableFlags</a>(pwnd, fVert));
01483 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="sbctl.c::xxxDrawThumb" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxDrawThumb           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pSBCalc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fVert</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01277">1277</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00201">_GetWindowDC()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00183">_ReleaseDC()</a>, <a class="el" href="../../d4/d1/userk_8h.html#a1422">CalcSBStuff()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00697">DrawThumb2()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00186">GetWndSBDisableFlags()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00540">xxxGetColorObjects()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01782">xxxEndScroll()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01316">xxxSetScrollBar()</a>.
<p>
<pre class="fragment"><div>01281 {
01282     HBRUSH hbr, hbrSave;
01283     HDC hdc;
01284     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wDisableFlags;
01285     <a class="code" href="../../d3/d5/structtagSBCALC.html">SBCALC</a> SBCalc;
01286 
01287     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
01288 
01289     <span class="keywordflow">if</span> (!pSBCalc) pSBCalc = &amp;SBCalc;
01290     hdc = (HDC)<a class="code" href="../../d4/d1/userk_8h.html#a1696">_GetWindowDC</a>(pwnd);
01291 
01292     <a class="code" href="../../d4/d1/userk_8h.html#a1422">CalcSBStuff</a>(pwnd, &amp;SBCalc, fVert);
01293     wDisableFlags = <a class="code" href="../../d4/d1/userk_8h.html#a1486">GetWndSBDisableFlags</a>(pwnd, fVert);
01294 
01295     hbrSave = GreSelectBrush(hdc, hbr = <a class="code" href="../../d8/d4/sbctl_8c.html#a21">xxxGetColorObjects</a>(pwnd, hdc));
01296 
01297     <a class="code" href="../../d4/d1/userk_8h.html#a1485">DrawThumb2</a>(pwnd, &amp;SBCalc, hdc, hbr, fVert, wDisableFlags);
01298 
01299     GreSelectBrush(hdc, hbrSave);
01300 
01301     <span class="comment">/*</span>
01302 <span class="comment">     * Won't hurt even if DC is already released (which happens automatically</span>
01303 <span class="comment">     * if window is destroyed during xxxSelectColorObjects)</span>
01304 <span class="comment">     */</span>
01305     <a class="code" href="../../d4/d1/userk_8h.html#a1697">_ReleaseDC</a>(hdc);
01306 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="sbctl.c::xxxEnableSBCtlArrows" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxEnableSBCtlArrows           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wArrows</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00211">211</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00537">IsVisible()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06472">IsWinEventNotifyDeferredOK</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06464">WEF_USEPWNDTHREAD</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l00039">xxxInvalidateRect()</a>, and <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00274">xxxWindowEvent()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.
<p>
<pre class="fragment"><div>00214 {
00215     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wOldFlags;
00216 
00217     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00218     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a616">IsWinEventNotifyDeferredOK</a>());
00219 
00220     wOldFlags = ((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)pwnd)-&gt;wDisableFlags; <span class="comment">// Get the original status</span>
00221 
00222     <span class="keywordflow">if</span> (wArrows == ESB_ENABLE_BOTH) {      <span class="comment">// Enable both the arrows</span>
00223         ((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)pwnd)-&gt;wDisableFlags &amp;= ~SB_DISABLE_MASK;
00224     } <span class="keywordflow">else</span> {
00225         ((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)pwnd)-&gt;wDisableFlags |= wArrows;
00226     }
00227 
00228     <span class="comment">/*</span>
00229 <span class="comment">     * Check if the status has changed because of this call</span>
00230 <span class="comment">     */</span>
00231     <span class="keywordflow">if</span> (wOldFlags == ((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)pwnd)-&gt;wDisableFlags)
00232         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00233 
00234     <span class="comment">/*</span>
00235 <span class="comment">     * Else, redraw the scroll bar control to reflect the new state</span>
00236 <span class="comment">     */</span>
00237     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a6">IsVisible</a>(pwnd))
00238         <a class="code" href="../../d4/d1/userk_8h.html#a1669">xxxInvalidateRect</a>(pwnd, NULL, TRUE);
00239 
00240     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00241         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wNewFlags = ((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)pwnd)-&gt;wDisableFlags;
00242 
00243         <span class="comment">/*</span>
00244 <span class="comment">         * state change notifications</span>
00245 <span class="comment">         */</span>
00246         <span class="keywordflow">if</span> ((wOldFlags &amp; ESB_DISABLE_UP) != (wNewFlags &amp; ESB_DISABLE_UP)) {
00247             <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_OBJECT_STATECHANGE, pwnd, OBJID_CLIENT,
00248                     INDEX_SCROLLBAR_UP, WEF_USEPWNDTHREAD);
00249         }
00250 
00251         <span class="keywordflow">if</span> ((wOldFlags &amp; ESB_DISABLE_DOWN) != (wNewFlags &amp; ESB_DISABLE_DOWN)) {
00252             <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_OBJECT_STATECHANGE, pwnd, OBJID_CLIENT,
00253                     INDEX_SCROLLBAR_DOWN, WEF_USEPWNDTHREAD);
00254         }
00255     }
00256 
00257     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00258 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="sbctl.c::xxxEnableScrollBar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxEnableScrollBar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wSBflags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wArrows</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00392">392</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d4/sbctl_8c.html#a10">ES_DISABLE</a>, <a class="el" href="../../d8/d4/sbctl_8c.html#a11">ES_ENABLE</a>, <a class="el" href="../../d8/d4/sbctl_8c.html#a9">ES_NOTHING</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02418">WFDISABLED</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00184">xxxEnableWindow()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00271">xxxEnableWndSBArrows()</a>, and <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00688">xxxSendMessage()</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04344">NtUserEnableScrollBar()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.
<p>
<pre class="fragment"><div>00396                                                             :
00397                     <span class="comment">// ESB_ENABLE_BOTH = &gt; Enable both arrows.</span>
00398                     <span class="comment">// ESB_DISABLE_LTUP = &gt; Disable Left/Up arrow;</span>
00399                     <span class="comment">// ESB_DISABLE_RTDN = &gt; DIsable Right/Down arrow;</span>
00400                     <span class="comment">// ESB_DISABLE_BOTH = &gt; Disable both the arrows;</span>
00401 {
00402 <span class="preprocessor">#define ES_NOTHING 0</span>
00403 <span class="preprocessor"></span><span class="preprocessor">#define ES_DISABLE 1</span>
00404 <span class="preprocessor"></span><span class="preprocessor">#define ES_ENABLE  2</span>
00405 <span class="preprocessor"></span>    <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wOldFlags;
00406     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wEnableWindow;
00407 
00408     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00409 
00410     <span class="keywordflow">if</span>(wSBflags != SB_CTL) {
00411         <span class="keywordflow">return</span> <a class="code" href="../../d8/d4/sbctl_8c.html#a18">xxxEnableWndSBArrows</a>(pwnd, wSBflags, wArrows);
00412     }
00413 
00414     <span class="comment">/*</span>
00415 <span class="comment">     *  Let us assume that we don't have to call EnableWindow</span>
00416 <span class="comment">     */</span>
00417     wEnableWindow = <a class="code" href="../../d8/d4/sbctl_8c.html#a9">ES_NOTHING</a>;
00418 
00419     wOldFlags = ((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)pwnd)-&gt;wDisableFlags &amp; (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)SB_DISABLE_MASK;
00420 
00421     <span class="comment">/*</span>
00422 <span class="comment">     * Check if the present state of the arrows is exactly the same</span>
00423 <span class="comment">     *  as what the caller wants:</span>
00424 <span class="comment">     */</span>
00425     <span class="keywordflow">if</span> (wOldFlags == wArrows)
00426         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> ;          <span class="comment">// If so, nothing needs to be done;</span>
00427 
00428     <span class="comment">/*</span>
00429 <span class="comment">     * Check if the caller wants to disable both the arrows</span>
00430 <span class="comment">     */</span>
00431     <span class="keywordflow">if</span> (wArrows == ESB_DISABLE_BOTH) {
00432         wEnableWindow = <a class="code" href="../../d8/d4/sbctl_8c.html#a10">ES_DISABLE</a>;      <span class="comment">// Yes! So, disable the whole SB Ctl.</span>
00433     } <span class="keywordflow">else</span> {
00434 
00435         <span class="comment">/*</span>
00436 <span class="comment">         * Check if the caller wants to enable both the arrows</span>
00437 <span class="comment">         */</span>
00438         <span class="keywordflow">if</span>(wArrows == ESB_ENABLE_BOTH) {
00439 
00440             <span class="comment">/*</span>
00441 <span class="comment">             * We need to enable the SB Ctl only if it was already disabled.</span>
00442 <span class="comment">             */</span>
00443             <span class="keywordflow">if</span>(wOldFlags == ESB_DISABLE_BOTH)
00444                 wEnableWindow = <a class="code" href="../../d8/d4/sbctl_8c.html#a11">ES_ENABLE</a>;<span class="comment">// EnableWindow(.., TRUE);</span>
00445         } <span class="keywordflow">else</span> {
00446 
00447             <span class="comment">/*</span>
00448 <span class="comment">             * Now, Caller wants to disable only one arrow;</span>
00449 <span class="comment">             * Check if one of the arrows was already disabled and we want</span>
00450 <span class="comment">             * to disable the other;If so, the whole SB Ctl will have to be</span>
00451 <span class="comment">             * disabled; Check if this is the case:</span>
00452 <span class="comment">             */</span>
00453             <span class="keywordflow">if</span>((wOldFlags | wArrows) == ESB_DISABLE_BOTH)
00454                 wEnableWindow = <a class="code" href="../../d8/d4/sbctl_8c.html#a10">ES_DISABLE</a>;      <span class="comment">// EnableWindow(, FALSE);</span>
00455          }
00456     }
00457     <span class="keywordflow">if</span>(wEnableWindow != <a class="code" href="../../d8/d4/sbctl_8c.html#a9">ES_NOTHING</a>) {
00458 
00459         <span class="comment">/*</span>
00460 <span class="comment">         * EnableWindow returns old state of the window; We must return</span>
00461 <span class="comment">         * TRUE only if the Old state is different from new state.</span>
00462 <span class="comment">         */</span>
00463         <span class="keywordflow">if</span>(<a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a3">xxxEnableWindow</a>(pwnd, (BOOL)(wEnableWindow == ES_ENABLE))) {
00464             <span class="keywordflow">return</span> !(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFDISABLED));
00465         } <span class="keywordflow">else</span> {
00466             <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFDISABLED);
00467         }
00468     }
00469 
00470     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d4/d1/userk_8h.html#a1579">xxxSendMessage</a>(pwnd, SBM_ENABLE_ARROWS, (DWORD)wArrows, 0);
00471 <span class="preprocessor">#undef ES_NOTHING</span>
00472 <span class="preprocessor"></span><span class="preprocessor">#undef ES_DISABLE</span>
00473 <span class="preprocessor"></span><span class="preprocessor">#undef ES_ENABLE</span>
00474 <span class="preprocessor"></span>}

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="sbctl.c::xxxEnableWndSBArrows" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxEnableWndSBArrows           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wSBflags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wArrows</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00271">271</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00201">_GetWindowDC()</a>, <a class="el" href="../../d0/d0/miscutil_8c-source.html#l00183">_InitPwSB()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00183">_ReleaseDC()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00537">IsVisible()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06472">IsWinEventNotifyDeferredOK</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01848">tagWND::pSBInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06464">WEF_USEPWNDTHREAD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02261">WFHPRESENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02420">WFMINIMIZED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02260">WFVPRESENT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01790">tagSBINFO::WSBflags</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01464">xxxDrawScrollBar()</a>, and <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00274">xxxWindowEvent()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00392">xxxEnableScrollBar()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01316">xxxSetScrollBar()</a>.
<p>
<pre class="fragment"><div>00275 {
00276     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> wOldFlags;
00277     <a class="code" href="../../d5/d5/structtagSBINFO.html">PSBINFO</a> pw;
00278     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bRetValue = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00279     HDC hdc;
00280 
00281     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00282     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a616">IsWinEventNotifyDeferredOK</a>());
00283 
00284     <span class="keywordflow">if</span> ((pw = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o14">pSBInfo</a>) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00285         wOldFlags = pw-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o0">WSBflags</a>;
00286     } <span class="keywordflow">else</span> {
00287 
00288         <span class="comment">/*</span>
00289 <span class="comment">         * Originally everything is enabled; Check to see if this function is</span>
00290 <span class="comment">         * asked to disable anything; Otherwise, no change in status; So, must</span>
00291 <span class="comment">         * return immediately;</span>
00292 <span class="comment">         */</span>
00293         <span class="keywordflow">if</span>(!wArrows)
00294             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;          <span class="comment">// No change in status!</span>
00295 
00296         wOldFlags = 0;    <span class="comment">// Both are originally enabled;</span>
00297         <span class="keywordflow">if</span>((pw = <a class="code" href="../../d4/d1/userk_8h.html#a1566">_InitPwSB</a>(pwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)  <span class="comment">// Allocate the pSBInfo for hWnd</span>
00298             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00299     }
00300 
00301 
00302     <span class="keywordflow">if</span>((hdc = <a class="code" href="../../d4/d1/userk_8h.html#a1696">_GetWindowDC</a>(pwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00303         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00304 
00305     <span class="comment">/*</span>
00306 <span class="comment">     *  First Take care of the Horizontal Scroll bar, if one exists.</span>
00307 <span class="comment">     */</span>
00308     <span class="keywordflow">if</span>((wSBflags == SB_HORZ) || (wSBflags == SB_BOTH)) {
00309         <span class="keywordflow">if</span>(wArrows == ESB_ENABLE_BOTH)      <span class="comment">// Enable both the arrows</span>
00310             pw-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o0">WSBflags</a> &amp;= ~SB_DISABLE_MASK;
00311         <span class="keywordflow">else</span>
00312             pw-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o0">WSBflags</a> |= wArrows;
00313 
00314         <span class="comment">/*</span>
00315 <span class="comment">         * Update the display of the Horizontal Scroll Bar;</span>
00316 <span class="comment">         */</span>
00317         <span class="keywordflow">if</span>(pw-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o0">WSBflags</a> != wOldFlags) {
00318             bRetValue = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00319             wOldFlags = pw-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o0">WSBflags</a>;
00320             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFHPRESENT) &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMINIMIZED) &amp;&amp;
00321                     <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a6">IsVisible</a>(pwnd)) {
00322                 <a class="code" href="../../d4/d1/userk_8h.html#a1439">xxxDrawScrollBar</a>(pwnd, hdc, FALSE);  <span class="comment">// Horizontal Scroll Bar.</span>
00323             }
00324         }
00325         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00326             <span class="comment">// Left button</span>
00327             <span class="keywordflow">if</span> ((wOldFlags &amp; ESB_DISABLE_LEFT) != (pw-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o0">WSBflags</a> &amp; ESB_DISABLE_LEFT)) {
00328                 <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_OBJECT_STATECHANGE, pwnd, OBJID_HSCROLL,
00329                         INDEX_SCROLLBAR_UP, WEF_USEPWNDTHREAD);
00330             }
00331 
00332             <span class="comment">// Right button</span>
00333             <span class="keywordflow">if</span> ((wOldFlags &amp; ESB_DISABLE_RIGHT) != (pw-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o0">WSBflags</a> &amp; ESB_DISABLE_RIGHT)) {
00334                 <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_OBJECT_STATECHANGE, pwnd, OBJID_HSCROLL,
00335                         INDEX_SCROLLBAR_DOWN, WEF_USEPWNDTHREAD);
00336             }
00337         }
00338     }
00339 
00340     <span class="comment">/*</span>
00341 <span class="comment">     *  Then take care of the Vertical Scroll bar, if one exists.</span>
00342 <span class="comment">     */</span>
00343     <span class="keywordflow">if</span>((wSBflags == SB_VERT) || (wSBflags == SB_BOTH)) {
00344         <span class="keywordflow">if</span>(wArrows == ESB_ENABLE_BOTH)      <span class="comment">// Enable both the arrows</span>
00345             pw-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o0">WSBflags</a> &amp;= ~(SB_DISABLE_MASK &lt;&lt; 2);
00346         <span class="keywordflow">else</span>
00347             pw-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o0">WSBflags</a> |= (wArrows &lt;&lt; 2);
00348 
00349         <span class="comment">/*</span>
00350 <span class="comment">         * Update the display of the Vertical Scroll Bar;</span>
00351 <span class="comment">         */</span>
00352         <span class="keywordflow">if</span>(pw-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o0">WSBflags</a> != wOldFlags) {
00353             bRetValue = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00354             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVPRESENT) &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMINIMIZED) &amp;&amp;
00355                     <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a6">IsVisible</a>(pwnd)) {
00356                 <a class="code" href="../../d4/d1/userk_8h.html#a1439">xxxDrawScrollBar</a>(pwnd, hdc, TRUE);  <span class="comment">// Vertical Scroll Bar</span>
00357             }
00358 
00359             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00360                 <span class="comment">// Up button</span>
00361                 <span class="keywordflow">if</span> ((wOldFlags &amp; (ESB_DISABLE_UP &lt;&lt; 2)) != (pw-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o0">WSBflags</a> &amp; (ESB_DISABLE_UP &lt;&lt; 2))) {
00362                     <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_OBJECT_STATECHANGE, pwnd, OBJID_VSCROLL,
00363                             INDEX_SCROLLBAR_UP, WEF_USEPWNDTHREAD);
00364                 }
00365 
00366                 <span class="comment">// Down button</span>
00367                 <span class="keywordflow">if</span> ((wOldFlags &amp; (ESB_DISABLE_DOWN &lt;&lt; 2)) != (pw-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o0">WSBflags</a> &amp; (ESB_DISABLE_DOWN &lt;&lt; 2))) {
00368                     <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_OBJECT_STATECHANGE, pwnd, OBJID_VSCROLL,
00369                             INDEX_SCROLLBAR_DOWN, WEF_USEPWNDTHREAD);
00370                 }
00371             }
00372         }
00373     }
00374 
00375     <a class="code" href="../../d4/d1/userk_8h.html#a1697">_ReleaseDC</a>(hdc);
00376 
00377     <span class="keywordflow">return</span> bRetValue;
00378 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="sbctl.c::xxxEndScroll" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxEndScroll           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fCancel</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01782">1782</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l01205">_GetMessagePos()</a>, <a class="el" href="../../d5/d1/timers_8c-source.html#l00431">_KillSystemTimer()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02557">ClrWF</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02870">tagSBTRACK::cmdSB</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01253">DrawCtlThumb()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02863">tagSBTRACK::fCtlSB</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02862">tagSBTRACK::fTrackVert</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00143">GET_X_LPARAM</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00147">GET_Y_LPARAM</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02720">tagSBTRACK::hTimerSB</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00310">IDSYS_SCROLL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06471">IsWinEventNotifyDeferred</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02874">tagSBTRACK::posOld</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02877">tagSBTRACK::pSBCalc</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00118">PtInRect()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03397">PWNDTOPSBTRACK</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02868">tagSBTRACK::rcTrack</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00050">RETURN_IF_PSBTRACK_INVALID</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02866">tagSBTRACK::spwndSB</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02867">tagSBTRACK::spwndSBNotify</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02865">tagSBTRACK::spwndTrack</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02334">WFSCROLLBUTTONDOWN</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02335">WFVERTSCROLLTRACK</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01549">xxxDoScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01277">xxxDrawThumb()</a>, <a class="el" href="../../d6/d5/structtagSBTRACK.html#o8">tagSBTRACK::xxxpfnSB</a>, <a class="el" href="../../d4/d4/w32_2ntuser_2kernel_2capture_8c-source.html#l00078">xxxReleaseCapture()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01971">xxxTrackBox()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02061">xxxTrackThumb()</a>, <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00274">xxxWindowEvent()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01678">zzzDrawInvertScrollArea()</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00413">zzzShowCaret()</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/dwp_8c-source.html#l00802">xxxDWP_DoCancelMode()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01971">xxxTrackBox()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02061">xxxTrackThumb()</a>.
<p>
<pre class="fragment"><div>01785 {
01786     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> oldcmd;
01787     <a class="code" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack;
01788     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
01789     UserAssert(!<a class="code" href="../../d4/d1/userk_8h.html#a615">IsWinEventNotifyDeferred</a>());
01790 
01791     pSBTrack = <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd);
01792     <span class="keywordflow">if</span> (pSBTrack &amp;&amp; <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;pq-&gt;spwndCapture == pwnd &amp;&amp; pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o8">xxxpfnSB</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01793 
01794         oldcmd = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a>;
01795         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> = 0;
01796         <a class="code" href="../../d4/d1/userk_8h.html#a1713">xxxReleaseCapture</a>();
01797 
01798         <span class="comment">// After xxxReleaseCapture, revalidate pSBTrack</span>
01799         <a class="code" href="../../d8/d4/sbctl_8c.html#a7">RETURN_IF_PSBTRACK_INVALID</a>(pSBTrack, pwnd);
01800 
01801         <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o8">xxxpfnSB</a> == <a class="code" href="../../d8/d4/sbctl_8c.html#a42">xxxTrackThumb</a>) {
01802 
01803             <span class="keywordflow">if</span> (fCancel) {
01804                 pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o13">posOld</a> = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>-&gt;pos;
01805             }
01806 
01807             <span class="comment">/*</span>
01808 <span class="comment">             * DoScroll does thread locking on these two pwnds -</span>
01809 <span class="comment">             * this is ok since they are not used after this</span>
01810 <span class="comment">             * call.</span>
01811 <span class="comment">             */</span>
01812             <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01813                 <a class="code" href="../../d8/d4/sbctl_8c.html#a36">xxxDoScroll</a>(pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a>,
01814                         SB_THUMBPOSITION, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o13">posOld</a>, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>
01815                 );
01816                 <span class="comment">// After xxxDoScroll, revalidate pSBTrack</span>
01817                 <a class="code" href="../../d8/d4/sbctl_8c.html#a7">RETURN_IF_PSBTRACK_INVALID</a>(pSBTrack, pwnd);
01818             }
01819 
01820             <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o2">fCtlSB</a>) {
01821                 <a class="code" href="../../d8/d4/sbctl_8c.html#a13">DrawCtlThumb</a>((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>) pwnd);
01822             } <span class="keywordflow">else</span> {
01823                 <a class="code" href="../../d8/d4/sbctl_8c.html#a31">xxxDrawThumb</a>(pwnd, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a>, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>);
01824                 <span class="comment">// Note: after xxx, pSBTrack may no longer be valid</span>
01825             }
01826 
01827         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o8">xxxpfnSB</a> == <a class="code" href="../../d8/d4/sbctl_8c.html#a41">xxxTrackBox</a>) {
01828             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> lParam;
01829             POINT ptMsg;
01830 
01831             <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o10">hTimerSB</a> != 0) {
01832                 <a class="code" href="../../d4/d1/userk_8h.html#a1567">_KillSystemTimer</a>(pwnd, IDSYS_SCROLL);
01833                 pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o10">hTimerSB</a> = 0;
01834             }
01835             lParam = <a class="code" href="../../d4/d1/userk_8h.html#a1639">_GetMessagePos</a>();
01836 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01837 <span class="preprocessor"></span>            <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLAYOUTRTL)) {
01838                 ptMsg.x = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.right - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lParam);
01839             } <span class="keywordflow">else</span>
01840 <span class="preprocessor">#endif</span>
01841 <span class="preprocessor"></span>            {
01842                 ptMsg.x = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lParam) - pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left;
01843             }
01844             ptMsg.y = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(lParam) - pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top;
01845             <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o7">rcTrack</a>, ptMsg)) {
01846                 <a class="code" href="../../d8/d4/sbctl_8c.html#a38">zzzDrawInvertScrollArea</a>(pwnd, pSBTrack, FALSE, oldcmd);
01847                 <span class="comment">// Note: after zzz, pSBTrack may no longer be valid</span>
01848             }
01849         }
01850 
01851         <span class="comment">/*</span>
01852 <span class="comment">         * Always send SB_ENDSCROLL message.</span>
01853 <span class="comment">         *</span>
01854 <span class="comment">         * DoScroll does thread locking on these two pwnds -</span>
01855 <span class="comment">         * this is ok since they are not used after this</span>
01856 <span class="comment">         * call.</span>
01857 <span class="comment">         */</span>
01858 
01859         <span class="comment">// After xxxDrawThumb or zzzDrawInvertScrollArea, revalidate pSBTrack</span>
01860         <a class="code" href="../../d8/d4/sbctl_8c.html#a7">RETURN_IF_PSBTRACK_INVALID</a>(pSBTrack, pwnd);
01861 
01862         <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01863             <a class="code" href="../../d8/d4/sbctl_8c.html#a36">xxxDoScroll</a>(pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a>,
01864                     SB_ENDSCROLL, 0, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>);
01865             <span class="comment">// After xxxDoScroll, revalidate pSBTrack</span>
01866             <a class="code" href="../../d8/d4/sbctl_8c.html#a7">RETURN_IF_PSBTRACK_INVALID</a>(pSBTrack, pwnd);
01867         }
01868 
01869         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a733">ClrWF</a>(pwnd, WFSCROLLBUTTONDOWN);
01870         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a733">ClrWF</a>(pwnd, WFVERTSCROLLTRACK);
01871 
01872         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
01873             <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_SYSTEM_SCROLLINGEND, pwnd,
01874                     (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o2">fCtlSB</a> ? OBJID_CLIENT :
01875                             (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a> ? OBJID_VSCROLL : OBJID_HSCROLL)),
01876                     INDEXID_CONTAINER, 0);
01877             <span class="comment">// After xxxWindowEvent, revalidate pSBTrack</span>
01878             <a class="code" href="../../d8/d4/sbctl_8c.html#a7">RETURN_IF_PSBTRACK_INVALID</a>(pSBTrack, pwnd);
01879         }
01880 
01881         <span class="comment">/*</span>
01882 <span class="comment">         * If this is a Scroll Bar Control, turn the caret back on.</span>
01883 <span class="comment">         */</span>
01884         <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01885             <a class="code" href="../../d4/d1/userk_8h.html#a1725">zzzShowCaret</a>(pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>);
01886             <span class="comment">// After zzz, revalidate pSBTrack</span>
01887             <a class="code" href="../../d8/d4/sbctl_8c.html#a7">RETURN_IF_PSBTRACK_INVALID</a>(pSBTrack, pwnd);
01888         }
01889 
01890 
01891         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o8">xxxpfnSB</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01892 
01893         <span class="comment">/*</span>
01894 <span class="comment">         * Unlock structure members so they are no longer holding down windows.</span>
01895 <span class="comment">         */</span>
01896         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>);
01897         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a>);
01898         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o4">spwndTrack</a>);
01899         UserFreePool(pSBTrack);
01900         <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd) = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01901     }
01902 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="sbctl.c::xxxGetColorObjects" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HBRUSH xxxGetColorObjects           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00540">540</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00021">IsScrollBarControl</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, and <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00241">xxxGetControlBrush()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01253">DrawCtlThumb()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00800">xxxDrawSB2()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01277">xxxDrawThumb()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01596">xxxMoveThumb()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.
<p>
<pre class="fragment"><div>00543 {
00544     HBRUSH hbrRet;
00545 
00546     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00547 
00548     <span class="comment">// Use the scrollbar color even if the scrollbar is disabeld.</span>
00549     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d4/sbctl_8c.html#a0">IsScrollBarControl</a>(pwnd))
00550         hbrRet = (HBRUSH)<a class="code" href="../../d4/d1/userk_8h.html#a1632">xxxDefWindowProc</a>(pwnd, WM_CTLCOLORSCROLLBAR, (WPARAM)hdc, (LPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd));
00551     <span class="keywordflow">else</span> {
00552         <span class="comment">// B#12770 - GetControlBrush sends a WM_CTLCOLOR message to the</span>
00553         <span class="comment">// owner.  If the app doesn't process the message, DefWindowProc32</span>
00554         <span class="comment">// will always return the appropriate system brush. If the app.</span>
00555         <span class="comment">// returns an invalid object, GetControlBrush will call DWP for</span>
00556         <span class="comment">// the default brush. Thus hbrRet doesn't need any validation</span>
00557         <span class="comment">// here.</span>
00558         hbrRet = <a class="code" href="../../d4/d1/userk_8h.html#a1564">xxxGetControlBrush</a>(pwnd, hdc, WM_CTLCOLORSCROLLBAR);
00559     }
00560 
00561     <span class="keywordflow">return</span> hbrRet;
00562 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="sbctl.c::xxxGetScrollMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a> xxxGetScrollMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fVert</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02444">2444</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00796">_GetSubMenu()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01827">tagWND::head</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02596">ID_HSCROLLMENU</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02597">ID_VSCROLLMENU</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00074">LockDesktopMenu()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d0/base_8c-source.html#l00204">RtlInitUnicodeStringOrId()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02826">TIF_INCLEANUP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02828">TIF_SYSTEMTHREAD</a>, and <a class="el" href="../../d4/d1/userk_8h.html#a1009">xxxClientLoadMenu()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02489">xxxDoScrollMenu()</a>.
<p>
<pre class="fragment"><div>02447 {
02448     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pMenu;
02449     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> *ppDesktopMenu;
02450 
02451     <span class="comment">/*</span>
02452 <span class="comment">     * Grab the menu from the desktop.  If the desktop menu</span>
02453 <span class="comment">     * has not been loaded and this is not a system thread,</span>
02454 <span class="comment">     * load it now.  Callbacks cannot be made from a system</span>
02455 <span class="comment">     * thread or when a thread is in cleanup.</span>
02456 <span class="comment">     */</span>
02457     <span class="keywordflow">if</span> (fVert) {
02458         ppDesktopMenu = &amp;pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o0">head</a>.rpdesk-&gt;spmenuVScroll;
02459     } <span class="keywordflow">else</span> {
02460         ppDesktopMenu = &amp;pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o0">head</a>.rpdesk-&gt;spmenuHScroll;
02461     }
02462     pMenu = *ppDesktopMenu;
02463     <span class="keywordflow">if</span> (pMenu == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; !(<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;TIF_flags &amp; (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a797">TIF_SYSTEMTHREAD</a> | <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a795">TIF_INCLEANUP</a>))) {
02464         UNICODE_STRING strMenuName;
02465 
02466         <a class="code" href="../../d4/d1/userk_8h.html#a1005">RtlInitUnicodeStringOrId</a>(&amp;strMenuName,
02467             fVert ? MAKEINTRESOURCE(ID_VSCROLLMENU) : MAKEINTRESOURCE(ID_HSCROLLMENU));
02468         pMenu = <a class="code" href="../../d4/d1/userk_8h.html#a1009">xxxClientLoadMenu</a>(NULL, &amp;strMenuName);
02469         <a class="code" href="../../d4/d1/userk_8h.html#a1603">LockDesktopMenu</a>(ppDesktopMenu, pMenu);
02470     }
02471 
02472     <span class="comment">/*</span>
02473 <span class="comment">     * Return the handle to the scroll menu.</span>
02474 <span class="comment">     */</span>
02475     <span class="keywordflow">if</span> (pMenu != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02476         <span class="keywordflow">return</span> <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a15">_GetSubMenu</a>(pMenu, 0);
02477     }
02478 
02479     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02480 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="sbctl.c::xxxMoveThumb" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxMoveThumb           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pSBCalc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>px</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01596">1596</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00201">_GetWindowDC()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00183">_ReleaseDC()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02856">tagSBCALC::cpx</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02850">tagSBCALC::cpxThumb</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00697">DrawThumb2()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02862">tagSBTRACK::fTrackVert</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02875">tagSBTRACK::posNew</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02874">tagSBTRACK::posOld</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03397">PWNDTOPSBTRACK</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02857">tagSBCALC::pxMin</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02873">tagSBTRACK::pxOld</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02854">tagSBCALC::pxThumbBottom</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02855">tagSBCALC::pxThumbTop</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00071">REEVALUATE_PSBTRACK</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01493">SBPosFromPx()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02866">tagSBTRACK::spwndSB</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02867">tagSBTRACK::spwndSBNotify</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01549">xxxDoScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00540">xxxGetColorObjects()</a>, and <a class="el" href="../../d6/d5/structtagSBTRACK.html#o8">tagSBTRACK::xxxpfnSB</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02061">xxxTrackThumb()</a>.
<p>
<pre class="fragment"><div>01600 {
01601     HBRUSH  hbr, hbrSave;
01602     HDC     hdc;
01603     <a class="code" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack;
01604 
01605     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
01606 
01607     pSBTrack = <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd);
01608 
01609     <span class="keywordflow">if</span> ((pSBTrack == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (px == pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o12">pxOld</a>))
01610         <span class="keywordflow">return</span>;
01611 
01612 pxReCalc:
01613 
01614     pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o14">posNew</a> = <a class="code" href="../../d8/d4/sbctl_8c.html#a34">SBPosFromPx</a>(pSBCalc, px);
01615 
01616     <span class="comment">/* Tentative position changed -- notify the guy. */</span>
01617     <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o14">posNew</a> != pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o13">posOld</a>) {
01618         <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01619             <a class="code" href="../../d8/d4/sbctl_8c.html#a36">xxxDoScroll</a>(pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a>, SB_THUMBTRACK, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o14">posNew</a>, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>
01620             );
01621 
01622         }
01623         <span class="comment">// After xxxDoScroll, re-evaluate pSBTrack</span>
01624         <a class="code" href="../../d8/d4/sbctl_8c.html#a8">REEVALUATE_PSBTRACK</a>(pSBTrack, pwnd, <span class="stringliteral">"xxxMoveThumb(1)"</span>);
01625         <span class="keywordflow">if</span> ((pSBTrack == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o8">xxxpfnSB</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>))
01626             <span class="keywordflow">return</span>;
01627 
01628         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o13">posOld</a> = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o14">posNew</a>;
01629 
01630         <span class="comment">//</span>
01631         <span class="comment">// Anything can happen after the SendMessage above!</span>
01632         <span class="comment">// Make sure that the SBINFO structure contains data for the</span>
01633         <span class="comment">// window being tracked -- if not, recalculate data in SBINFO</span>
01634         <span class="comment">//</span>
01635 <span class="comment">//        CheckScrollRecalc(pwnd, pSBState, pSBCalc);</span>
01636         <span class="comment">// when we yield, our range can get messed with</span>
01637         <span class="comment">// so make sure we handle this</span>
01638 
01639         <span class="keywordflow">if</span> (px &gt;= pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o12">pxMin</a> + pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o11">cpx</a>)
01640         {
01641             px = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o12">pxMin</a> + pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o11">cpx</a>;
01642             <span class="keywordflow">goto</span> pxReCalc;
01643         }
01644 
01645     }
01646 
01647     hdc = <a class="code" href="../../d4/d1/userk_8h.html#a1696">_GetWindowDC</a>(pwnd);
01648 
01649     pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a> = px;
01650     pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o9">pxThumbBottom</a> = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a> + pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o5">cpxThumb</a>;
01651 
01652     <span class="comment">// at this point, the disable flags are always going to be 0 --</span>
01653     <span class="comment">// we're in the middle of tracking.</span>
01654     hbrSave = GreSelectBrush(hdc, hbr = <a class="code" href="../../d8/d4/sbctl_8c.html#a21">xxxGetColorObjects</a>(pwnd, hdc));
01655 
01656     <span class="comment">// After xxxGetColorObjects, re-evaluate pSBTrack</span>
01657     <a class="code" href="../../d8/d4/sbctl_8c.html#a8">REEVALUATE_PSBTRACK</a>(pSBTrack, pwnd, <span class="stringliteral">"xxxMoveThumb(2)"</span>);
01658     <span class="keywordflow">if</span> (pSBTrack == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01659         RIPMSG1(RIP_ERROR, <span class="stringliteral">"Did we use to leak hdc %#p?"</span>, hdc) ;
01660         <a class="code" href="../../d4/d1/userk_8h.html#a1697">_ReleaseDC</a>(hdc);
01661         <span class="keywordflow">return</span>;
01662     }
01663     <a class="code" href="../../d4/d1/userk_8h.html#a1485">DrawThumb2</a>(pwnd, pSBCalc, hdc, hbr, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>, 0);
01664     GreSelectBrush(hdc, hbrSave);
01665     <a class="code" href="../../d4/d1/userk_8h.html#a1697">_ReleaseDC</a>(hdc);
01666 
01667     pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o12">pxOld</a> = px;
01668 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="sbctl.c::xxxSBTrackInit" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxSBTrackInit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>curArea</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uType</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">2196</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d4/d1/userk_8h.html#a1422">CalcSBStuff()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00600">CalcTrackDragRect()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02850">tagSBCALC::cpxThumb</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00143">GET_X_LPARAM</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00147">GET_Y_LPARAM</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00186">GetWndSBDisableFlags()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00367">Lock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02690">LTUPFLAG</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03397">PWNDTOPSBTRACK</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02847">tagSBCALC::pxBottom</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02852">tagSBCALC::pxDownArrow</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02848">tagSBCALC::pxLeft</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02849">tagSBCALC::pxRight</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02853">tagSBCALC::pxStart</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02854">tagSBCALC::pxThumbBottom</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02855">tagSBCALC::pxThumbTop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02846">tagSBCALC::pxTop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02851">tagSBCALC::pxUpArrow</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00071">REEVALUATE_PSBTRACK</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00050">RETURN_IF_PSBTRACK_INVALID</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02691">RTDNFLAG</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l04826">SCROLL_DIRECT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l04827">SCROLL_MENU</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01745">tagWND::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03850">WINDOW_CAPTURE</a>, <a class="el" href="../../d4/d4/w32_2ntuser_2kernel_2capture_8c-source.html#l00124">xxxCapture()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01549">xxxDoScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02123">xxxSBTrackLoop()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01971">xxxTrackBox()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02061">xxxTrackThumb()</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00413">zzzShowCaret()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02489">xxxDoScrollMenu()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>, and <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00193">xxxSysCommand()</a>.
<p>
<pre class="fragment"><div>02201 {
02202     <span class="keywordtype">int</span> px;
02203     LPINT pwX;
02204     LPINT pwY;
02205     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wDisable;     <span class="comment">// Scroll bar disable flags;</span>
02206     <a class="code" href="../../d3/d5/structtagSBCALC.html">SBCALC</a> SBCalc;
02207     <a class="code" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a> pSBCalc;
02208     RECT rcSB;
02209     <a class="code" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack;
02210 
02211     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
02212 
02213 
02214     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd)) {
02215         RIPMSG1(RIP_WARNING, <span class="stringliteral">"xxxSBTrackInit: PWNDTOPSBTRACK(pwnd) == %#p"</span>,
02216                 <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd));
02217         <span class="keywordflow">return</span>;
02218     }
02219 
02220     pSBTrack = (<a class="code" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a>)UserAllocPoolWithQuota(<span class="keyword">sizeof</span>(*pSBTrack), TAG_SCROLLTRACK);
02221     <span class="keywordflow">if</span> (pSBTrack == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
02222         <span class="keywordflow">return</span>;
02223 
02224     pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o10">hTimerSB</a> = 0;
02225     pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o0">fHitOld</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02226 
02227     pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o8">xxxpfnSB</a> = <a class="code" href="../../d8/d4/sbctl_8c.html#a41">xxxTrackBox</a>;
02228 
02229     pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o4">spwndTrack</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02230     pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02231     pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02232     <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o4">spwndTrack</a>, pwnd);
02233     <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd) = pSBTrack;
02234 
02235     pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o2">fCtlSB</a> = (!curArea);
02236     <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o2">fCtlSB</a>) {
02237 
02238         <span class="comment">/*</span>
02239 <span class="comment">         * This is a scroll bar control.</span>
02240 <span class="comment">         */</span>
02241         <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>, pwnd);
02242         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a> = ((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)pwnd)-&gt;fVert;
02243         <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a>, pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a>);
02244         wDisable = ((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)pwnd)-&gt;wDisableFlags;
02245         pSBCalc = &amp;((<a class="code" href="../../d7/d5/structtagSBWND.html">PSBWND</a>)pwnd)-&gt;SBCalc;
02246         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o15">nBar</a> = SB_CTL;
02247     } <span class="keywordflow">else</span> {
02248 
02249         <span class="comment">/*</span>
02250 <span class="comment">         * This is a scroll bar that is part of the window frame.</span>
02251 <span class="comment">         */</span>
02252 
02253 <span class="preprocessor">#ifdef USE_MIRRORING</span>
02254 <span class="preprocessor"></span>        <span class="comment">//</span>
02255         <span class="comment">// Mirror the window coord of the scroll bar,</span>
02256         <span class="comment">// if it is a mirrored one</span>
02257         <span class="comment">//</span>
02258         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd,WEFLAYOUTRTL)) {
02259             lParam = MAKELONG(
02260                     pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.right - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lParam),
02261                     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(lParam) - pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top);
02262         }
02263         <span class="keywordflow">else</span> {
02264 <span class="preprocessor">#endif</span>
02265 <span class="preprocessor"></span>        lParam = MAKELONG(
02266                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lParam) - pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left,
02267                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(lParam) - pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top);
02268 
02269 <span class="preprocessor">#ifdef USE_MIRRORING</span>
02270 <span class="preprocessor"></span>        }
02271 <span class="preprocessor">#endif</span>
02272 <span class="preprocessor"></span>        <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a>, pwnd);
02273         <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>, NULL);
02274         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a> = (curArea - HTHSCROLL);
02275         wDisable = <a class="code" href="../../d4/d1/userk_8h.html#a1486">GetWndSBDisableFlags</a>(pwnd, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>);
02276         pSBCalc = &amp;SBCalc;
02277         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o15">nBar</a> = (curArea - HTHSCROLL) ? SB_VERT : SB_HORZ;
02278     }
02279 
02280     pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o16">pSBCalc</a> = pSBCalc;
02281     <span class="comment">/*</span>
02282 <span class="comment">     *  Check if the whole scroll bar is disabled</span>
02283 <span class="comment">     */</span>
02284     <span class="keywordflow">if</span>((wDisable &amp; SB_DISABLE_MASK) == SB_DISABLE_MASK) {
02285         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a>);
02286         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>);
02287         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o4">spwndTrack</a>);
02288         UserFreePool(pSBTrack);
02289         <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd) = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02290         <span class="keywordflow">return</span>;  <span class="comment">// It is a disabled scroll bar; So, do not respond.</span>
02291     }
02292 
02293     <span class="keywordflow">if</span> (!pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o2">fCtlSB</a>) {
02294         <a class="code" href="../../d4/d1/userk_8h.html#a1422">CalcSBStuff</a>(pwnd, pSBCalc, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>);
02295     }
02296 
02297     pwX = (LPINT)&amp;rcSB;
02298     pwY = pwX + 1;
02299     <span class="keywordflow">if</span> (!pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>)
02300         pwX = pwY--;
02301 
02302     px = (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a> ? <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(lParam) : <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lParam));
02303 
02304     *(pwX + 0) = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o3">pxLeft</a>;
02305     *(pwY + 0) = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o1">pxTop</a>;
02306     *(pwX + 2) = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o4">pxRight</a>;
02307     *(pwY + 2) = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o2">pxBottom</a>;
02308     pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)-1;
02309     <span class="keywordflow">if</span> (px &lt; pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o6">pxUpArrow</a>) {
02310 
02311         <span class="comment">/*</span>
02312 <span class="comment">         *  The click occurred on Left/Up arrow; Check if it is disabled</span>
02313 <span class="comment">         */</span>
02314         <span class="keywordflow">if</span>(wDisable &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a765">LTUPFLAG</a>) {
02315             <span class="keywordflow">if</span>(pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o2">fCtlSB</a>) {   <span class="comment">// If this is a scroll bar control,</span>
02316                 <a class="code" href="../../d4/d1/userk_8h.html#a1725">zzzShowCaret</a>(pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>);  <span class="comment">// show the caret before returning;</span>
02317                 <span class="comment">// After zzzShowCaret, revalidate pSBTrack</span>
02318                 <a class="code" href="../../d8/d4/sbctl_8c.html#a7">RETURN_IF_PSBTRACK_INVALID</a>(pSBTrack, pwnd);
02319             }
02320 
02321             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a>);
02322             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>);
02323             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o4">spwndTrack</a>);
02324             UserFreePool(pSBTrack);
02325             <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd) = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02326             <span class="keywordflow">return</span>;         <span class="comment">// Yes! disabled. Do not respond.</span>
02327         }
02328 
02329         <span class="comment">// LINEUP -- make rcSB the Up Arrow's Rectangle</span>
02330         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> = SB_LINEUP;
02331         *(pwY + 2) = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o6">pxUpArrow</a>;
02332     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (px &gt;= pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a>) {
02333 
02334         <span class="comment">/*</span>
02335 <span class="comment">         * The click occurred on Right/Down arrow; Check if it is disabled</span>
02336 <span class="comment">         */</span>
02337         <span class="keywordflow">if</span> (wDisable &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a766">RTDNFLAG</a>) {
02338             <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o2">fCtlSB</a>) {    <span class="comment">// If this is a scroll bar control,</span>
02339                 <a class="code" href="../../d4/d1/userk_8h.html#a1725">zzzShowCaret</a>(pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>);  <span class="comment">// show the caret before returning;</span>
02340                 <span class="comment">// After zzzShowCaret, revalidate pSBTrack</span>
02341                 <a class="code" href="../../d8/d4/sbctl_8c.html#a7">RETURN_IF_PSBTRACK_INVALID</a>(pSBTrack, pwnd);
02342             }
02343 
02344             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a>);
02345             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>);
02346             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o4">spwndTrack</a>);
02347             UserFreePool(pSBTrack);
02348             <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd) = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02349             <span class="keywordflow">return</span>;<span class="comment">// Yes! disabled. Do not respond.</span>
02350         }
02351 
02352         <span class="comment">// LINEDOWN -- make rcSB the Down Arrow's Rectangle</span>
02353         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> = SB_LINEDOWN;
02354         *(pwY + 0) = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a>;
02355     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (px &lt; pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a>) {
02356         <span class="comment">// PAGEUP -- make rcSB the rectangle between Up Arrow and Thumb</span>
02357         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> = SB_PAGEUP;
02358         *(pwY + 0) = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o6">pxUpArrow</a>;
02359         *(pwY + 2) = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a>;
02360     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (px &lt; pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o9">pxThumbBottom</a>) {
02361 
02362 DoThumbPos:
02363         <span class="comment">/*</span>
02364 <span class="comment">         * Elevator isn't there if there's no room.</span>
02365 <span class="comment">         */</span>
02366         <span class="keywordflow">if</span> (pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a> - pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o6">pxUpArrow</a> &lt;= pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o5">cpxThumb</a>) {
02367             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a>);
02368             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>);
02369             <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o4">spwndTrack</a>);
02370             UserFreePool(pSBTrack);
02371             <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd) = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02372             <span class="keywordflow">return</span>;
02373         }
02374         <span class="comment">// THUMBPOSITION -- we're tracking with the thumb</span>
02375         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> = SB_THUMBPOSITION;
02376         <a class="code" href="../../d8/d4/sbctl_8c.html#a23">CalcTrackDragRect</a>(pSBTrack);
02377 
02378         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o8">xxxpfnSB</a> = <a class="code" href="../../d8/d4/sbctl_8c.html#a42">xxxTrackThumb</a>;
02379         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o12">pxOld</a> = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o8">pxStart</a> = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a>;
02380         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o14">posNew</a> = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o13">posOld</a> = pSBCalc-&gt;pos;
02381         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o11">dpxThumb</a> = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o8">pxStart</a> - px;
02382 
02383         <a class="code" href="../../d4/d1/userk_8h.html#a1516">xxxCapture</a>(<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>(), pwnd, WINDOW_CAPTURE);
02384         <span class="comment">// After xxxCapture, revalidate pSBTrack</span>
02385         <a class="code" href="../../d8/d4/sbctl_8c.html#a7">RETURN_IF_PSBTRACK_INVALID</a>(pSBTrack, pwnd);
02386 
02387         <span class="comment">/*</span>
02388 <span class="comment">         * DoScroll does thread locking on these two pwnds -</span>
02389 <span class="comment">         * this is ok since they are not used after this</span>
02390 <span class="comment">         * call.</span>
02391 <span class="comment">         */</span>
02392         <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02393             <a class="code" href="../../d8/d4/sbctl_8c.html#a36">xxxDoScroll</a>(pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a>,
02394                     SB_THUMBTRACK, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o13">posOld</a>, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>
02395             );
02396             <span class="comment">// Note: after xxx, pSBTrack may no longer be valid</span>
02397         }
02398     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (px &lt; pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a>) {
02399         <span class="comment">// PAGEDOWN -- make rcSB the rectangle between Thumb and Down Arrow</span>
02400         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> = SB_PAGEDOWN;
02401         *(pwY + 0) = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o9">pxThumbBottom</a>;
02402         *(pwY + 2) = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o7">pxDownArrow</a>;
02403     }
02404 
02405     <span class="comment">/*</span>
02406 <span class="comment">     * If the shift key is down, we'll position the thumb directly so it's</span>
02407 <span class="comment">     * centered on the click point.</span>
02408 <span class="comment">     */</span>
02409     <span class="keywordflow">if</span> ((uType == <a class="code" href="../../d4/d1/userk_8h.html#a547">SCROLL_DIRECT</a> &amp;&amp; pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> != SB_LINEUP &amp;&amp; pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> != SB_LINEDOWN) ||
02410             (uType == <a class="code" href="../../d4/d1/userk_8h.html#a548">SCROLL_MENU</a>)) {
02411         <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> != SB_THUMBPOSITION) {
02412             <span class="keywordflow">goto</span> DoThumbPos;
02413         }
02414         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o11">dpxThumb</a> = -(pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o5">cpxThumb</a> / 2);
02415     }
02416 
02417     <a class="code" href="../../d4/d1/userk_8h.html#a1516">xxxCapture</a>(<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>(), pwnd, WINDOW_CAPTURE);
02418     <span class="comment">// After xxxCapture, revalidate pSBTrack</span>
02419     <a class="code" href="../../d8/d4/sbctl_8c.html#a7">RETURN_IF_PSBTRACK_INVALID</a>(pSBTrack, pwnd);
02420 
02421     <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a> != SB_THUMBPOSITION) {
02422         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o7">rcTrack</a>, &amp;rcSB);
02423     }
02424 
02425     <a class="code" href="../../d8/d4/sbctl_8c.html#a43">xxxSBTrackLoop</a>(pwnd, lParam, pSBCalc);
02426 
02427     <span class="comment">// After xxx, re-evaluate pSBTrack</span>
02428     <a class="code" href="../../d8/d4/sbctl_8c.html#a8">REEVALUATE_PSBTRACK</a>(pSBTrack, pwnd, <span class="stringliteral">"xxxTrackLoop"</span>);
02429     <span class="keywordflow">if</span> (pSBTrack) {
02430         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a>);
02431         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>);
02432         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o4">spwndTrack</a>);
02433         UserFreePool(pSBTrack);
02434         <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd) = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02435     }
02436 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="sbctl.c::xxxSBTrackLoop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxSBTrackLoop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pSBCalc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02123">2123</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d2/d1/hooks_8c-source.html#l01210">_CallMsgFilter()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02863">tagSBTRACK::fCtlSB</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02862">tagSBTRACK::fTrackVert</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06472">IsWinEventNotifyDeferredOK</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03397">PWNDTOPSBTRACK</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00071">REEVALUATE_PSBTRACK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02556">SetWF</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03109">tagQ::spwndCapture</a>, <a class="el" href="../../d2/d1/mnaccel_8c-source.html#l00461">SystoChar()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d0/d6/iop_8h.html#a145">VOID()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02335">WFVERTSCROLLTRACK</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00762">xxxDispatchMessage()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05555">xxxGetMessage</a>, <a class="el" href="../../d6/d5/structtagSBTRACK.html#o8">tagSBTRACK::xxxpfnSB</a>, <a class="el" href="../../d0/d9/keyconv_8c-source.html#l00028">xxxTranslateMessage()</a>, and <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00274">xxxWindowEvent()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">xxxSBTrackInit()</a>.
<p>
<pre class="fragment"><div>02127 {
02128     MSG <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
02129     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cmd;
02130     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
02131     <a class="code" href="../../d0/d6/iop_8h.html#a145">VOID</a> (*xxxpfnSB)(<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>, <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>, WPARAM, LPARAM, <a class="code" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a>);
02132     <a class="code" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack;
02133 
02134     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
02135     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a616">IsWinEventNotifyDeferredOK</a>());
02136 
02137     pSBTrack = <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd);
02138 
02139     <span class="keywordflow">if</span> ((pSBTrack == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> == (xxxpfnSB = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o8">xxxpfnSB</a>)))
02140         <span class="comment">// mode cancelled -- exit track loop</span>
02141         <span class="keywordflow">return</span>;
02142 
02143     <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>)
02144         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a732">SetWF</a>(pwnd, WFVERTSCROLLTRACK);
02145 
02146     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
02147         <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_SYSTEM_SCROLLINGSTART, pwnd,
02148                 (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o2">fCtlSB</a> ? OBJID_CLIENT :
02149                         (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a> ? OBJID_VSCROLL : OBJID_HSCROLL)),
02150                 INDEXID_CONTAINER, 0);
02151         <span class="comment">// Note: after xxx, pSBTrack may no longer be valid</span>
02152     }
02153 
02154     (*xxxpfnSB)(pwnd, WM_LBUTTONDOWN, 0, lParam, pSBCalc);
02155     <span class="comment">// Note: after xxx, pSBTrack may no longer be valid</span>
02156 
02157     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
02158 
02159     <span class="keywordflow">while</span> (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o6">spwndCapture</a> == pwnd) {
02160         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a577">xxxGetMessage</a>(&amp;msg, NULL, 0, 0)) {
02161             <span class="comment">// Note: after xxx, pSBTrack may no longer be valid</span>
02162             <span class="keywordflow">break</span>;
02163         }
02164 
02165         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a1818">_CallMsgFilter</a>(&amp;msg, MSGF_SCROLLBAR)) {
02166             cmd = <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.message;
02167 
02168             <span class="keywordflow">if</span> (<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.hwnd == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd) &amp;&amp; ((cmd &gt;= WM_MOUSEFIRST &amp;&amp; cmd &lt;=
02169                     WM_MOUSELAST) || (cmd &gt;= WM_KEYFIRST &amp;&amp;
02170                     cmd &lt;= WM_KEYLAST))) {
02171                 cmd = <a class="code" href="../../d4/d1/userk_8h.html#a1517">SystoChar</a>(cmd, <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.lParam);
02172 
02173                 <span class="comment">// After xxxWindowEvent, xxxpfnSB, xxxTranslateMessage or</span>
02174                 <span class="comment">// xxxDispatchMessage, re-evaluate pSBTrack.</span>
02175                 <a class="code" href="../../d8/d4/sbctl_8c.html#a8">REEVALUATE_PSBTRACK</a>(pSBTrack, pwnd, <span class="stringliteral">"xxxTrackLoop"</span>);
02176                 <span class="keywordflow">if</span> ((pSBTrack == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> == (xxxpfnSB = pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o8">xxxpfnSB</a>)))
02177                     <span class="comment">// mode cancelled -- exit track loop</span>
02178                     <span class="keywordflow">return</span>;
02179 
02180                 (*xxxpfnSB)(pwnd, cmd, <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.wParam, <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.lParam, pSBCalc);
02181             } <span class="keywordflow">else</span> {
02182                 <a class="code" href="../../d4/d1/userk_8h.html#a1646">xxxTranslateMessage</a>(&amp;msg, 0);
02183                 <a class="code" href="../../d4/d1/userk_8h.html#a1640">xxxDispatchMessage</a>(&amp;msg);
02184             }
02185         }
02186     }
02187 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="sbctl.c::xxxSBWndProc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT xxxSBWndProc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d5/structtagSBWND.html">PSBWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>psbwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">2582</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00893">_ClientToScreen()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00294">_FChildVisible()</a>, <a class="el" href="../../d8/d8/keyboard_8c-source.html#l00027">_GetKeyState()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00201">_GetWindowDC()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00183">_ReleaseDC()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00140">_SBGetParms()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02557">ClrWF</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00481">DrawSize()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00697">DrawThumb2()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00784">FNID_SCROLLBAR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00143">GET_X_LPARAM</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00147">GET_Y_LPARAM</a>, <a class="el" href="../../d1/d4/tooltips_8c.html#a12">HitTestScrollBar()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06472">IsWinEventNotifyDeferredOK</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00057">PWND</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01012">SBCtlSetup()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01087">SBSetParms()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l04826">SCROLL_DIRECT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l04825">SCROLL_NORMAL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02556">SetWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01745">tagWND::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l02725">TrackMouseEvent()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00227">VALIDATECLASSANDSIZE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06464">WEF_USEPWNDTHREAD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02404">WFSIZEBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02401">WFTABSTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, <a class="el" href="../../d4/d1/userk_8h.html#a1710">xxxBeginPaint()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00254">xxxCreateCaret()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01549">xxxDoScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02489">xxxDoScrollMenu()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00800">xxxDrawSB2()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00211">xxxEnableSBCtlArrows()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00392">xxxEnableScrollBar()</a>, <a class="el" href="../../d4/d1/userk_8h.html#a1711">xxxEndPaint()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00540">xxxGetColorObjects()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00144">xxxMoveWindow()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">xxxSBTrackInit()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00688">xxxSendMessage()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01815">xxxSetFocus()</a>, <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00274">xxxWindowEvent()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00234">zzzDestroyCaret()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00434">zzzHideCaret()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00907">zzzSetSBCaretPos()</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00413">zzzShowCaret()</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l00975">InitFunctionTables()</a>, <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l02313">InitializeClientPfnArrays()</a>, and <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l01863">LW_RegisterWindows()</a>.
<p>
<pre class="fragment"><div>02587 {
02588     LONG l;
02589     LONG lres;
02590     <span class="keywordtype">int</span> cx;
02591     <span class="keywordtype">int</span> <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>;
02592     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cmd;
02593     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uSide;
02594     HDC hdc;
02595     RECT rc;
02596     POINT pt;
02597     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fSizeReal;
02598     HBRUSH hbrSave;
02599     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fSize;
02600     PAINTSTRUCT ps;
02601     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> style;
02602     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndParent;
02603     SCROLLINFO      si;
02604     LPSCROLLINFO    lpsi = &amp;si;
02605     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>            fRedraw = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02606     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>            fScroll;
02607 
02608     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(psbwnd);
02609     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a616">IsWinEventNotifyDeferredOK</a>());
02610 
02611     <a class="code" href="../../d6/d0/usercli_8h.html#a28">VALIDATECLASSANDSIZE</a>(((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd), message, wParam, lParam, FNID_SCROLLBAR, WM_CREATE);
02612 
02613     style = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o0">wnd</a>.style);
02614     fSize = ((style &amp; (SBS_SIZEBOX | SBS_SIZEGRIP)) != 0);
02615 
02616     <span class="keywordflow">switch</span> (message) {
02617     <span class="keywordflow">case</span> WM_CREATE:
02618         <span class="comment">/*</span>
02619 <span class="comment">         * Guard against lParam being NULL since the thunk allows it [51986]</span>
02620 <span class="comment">         */</span>
02621         <span class="keywordflow">if</span> (lParam) {
02622             rc.right = (rc.left = ((LPCREATESTRUCT)lParam)-&gt;x) +
02623                     ((LPCREATESTRUCT)lParam)-&gt;cx;
02624             rc.bottom = (rc.top = ((LPCREATESTRUCT)lParam)-&gt;y) +
02625                     ((LPCREATESTRUCT)lParam)-&gt;cy;
02626             <span class="comment">// This is because we can't just rev CardFile -- we should fix the</span>
02627             <span class="comment">// problem here in case anyone else happened to have some EXTRA</span>
02628             <span class="comment">// scroll styles on their scroll bar controls (jeffbog 03/21/94)</span>
02629             <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, WFWIN40COMPAT))
02630                 psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o0">wnd</a>.style &amp;= ~(WS_HSCROLL | WS_VSCROLL);
02631 
02632             <span class="keywordflow">if</span> (!fSize) {
02633                 l = PtrToLong(((LPCREATESTRUCT)lParam)-&gt;lpCreateParams);
02634                 psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o3">SBCalc</a>.pos = psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o3">SBCalc</a>.posMin = LOWORD(l);
02635                 psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o3">SBCalc</a>.posMax = HIWORD(l);
02636                 psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o1">fVert</a> = ((<a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o0">wnd</a>.style) &amp; SBS_VERT) != 0);
02637                 psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o3">SBCalc</a>.page = 0;
02638             }
02639 
02640             <span class="keywordflow">if</span> (psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o0">wnd</a>.style &amp; WS_DISABLED)
02641                 psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o2">wDisableFlags</a> = SB_DISABLE_MASK;
02642 
02643             <span class="keywordflow">if</span> (style &amp; (SBS_TOPALIGN | SBS_BOTTOMALIGN)) {
02644                 <span class="keywordflow">if</span> (fSize) {
02645                     <span class="keywordflow">if</span> (style &amp; SBS_SIZEBOXBOTTOMRIGHTALIGN) {
02646                         rc.left = rc.right - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL);
02647                         rc.top = rc.bottom - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYHSCROLL);
02648                     }
02649 
02650                     rc.right = rc.left + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL);
02651                     rc.bottom = rc.top + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYHSCROLL);
02652                 } <span class="keywordflow">else</span> {
02653                     <span class="keywordflow">if</span> (style &amp; SBS_VERT) {
02654                         <span class="keywordflow">if</span> (style &amp; SBS_LEFTALIGN)
02655                             rc.right = rc.left + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL);
02656                         <span class="keywordflow">else</span>
02657                             rc.left = rc.right - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL);
02658                     } <span class="keywordflow">else</span> {
02659                         <span class="keywordflow">if</span> (style &amp; SBS_TOPALIGN)
02660                             rc.bottom = rc.top + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYHSCROLL);
02661                         <span class="keywordflow">else</span>
02662                             rc.top = rc.bottom - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYHSCROLL);
02663                     }
02664                 }
02665 
02666                 <a class="code" href="../../d4/d1/userk_8h.html#a1621">xxxMoveWindow</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, rc.left, rc.top, rc.right - rc.left,
02667                          rc.bottom - rc.top, FALSE);
02668             }
02669         } <span class="comment">/* if */</span>
02670 
02671         <span class="keywordflow">else</span> {
02672             RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING,
02673                     <span class="stringliteral">"xxxSBWndProc - NULL lParam for WM_CREATE\n"</span>) ;
02674         } <span class="comment">/* else */</span>
02675 
02676         <span class="keywordflow">break</span>;
02677 
02678     <span class="keywordflow">case</span> WM_SIZE:
02679         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;pq-&gt;spwndFocus != (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd)
02680             <span class="keywordflow">break</span>;
02681 
02682         <span class="comment">// scroll bar has the focus -- recalc it's thumb caret size</span>
02683         <span class="comment">// no need to DeferWinEventNotify() - see xxxCreateCaret below.</span>
02684         <a class="code" href="../../d4/d5/caret_8c.html#a3">zzzDestroyCaret</a>();
02685 
02686             <span class="comment">//   |             |</span>
02687             <span class="comment">//   |  FALL THRU  |</span>
02688             <span class="comment">//   V             V</span>
02689 
02690     <span class="keywordflow">case</span> WM_SETFOCUS:
02691         <a class="code" href="../../d4/d1/userk_8h.html#a1421">SBCtlSetup</a>(psbwnd);
02692 
02693         cx = (psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o1">fVert</a> ? psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o0">wnd</a>.<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.right - psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o0">wnd</a>.<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left
02694                             : psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o3">SBCalc</a>.<a class="code" href="../../d3/d5/structtagSBCALC.html#o5">cpxThumb</a>) - 2 * <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXEDGE);
02695         <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = (psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o1">fVert</a> ? psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o3">SBCalc</a>.<a class="code" href="../../d3/d5/structtagSBCALC.html#o5">cpxThumb</a>
02696                             : psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o0">wnd</a>.<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.bottom - psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o0">wnd</a>.<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top) - 2 * <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE);
02697 
02698         <a class="code" href="../../d4/d1/userk_8h.html#a1724">xxxCreateCaret</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, (HBITMAP)1, cx, cy);
02699         <a class="code" href="../../d8/d4/sbctl_8c.html#a27">zzzSetSBCaretPos</a>(psbwnd);
02700         <a class="code" href="../../d4/d1/userk_8h.html#a1725">zzzShowCaret</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd);
02701         <span class="keywordflow">break</span>;
02702 
02703     <span class="keywordflow">case</span> WM_KILLFOCUS:
02704         <a class="code" href="../../d4/d5/caret_8c.html#a3">zzzDestroyCaret</a>();
02705         <span class="keywordflow">break</span>;
02706 
02707     <span class="keywordflow">case</span> WM_ERASEBKGND:
02708 
02709         <span class="comment">/*</span>
02710 <span class="comment">         * Do nothing, but don't let DefWndProc() do it either.</span>
02711 <span class="comment">         * It will be erased when its painted.</span>
02712 <span class="comment">         */</span>
02713         <span class="keywordflow">return</span> (LONG)<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02714 
02715     <span class="keywordflow">case</span> WM_PRINTCLIENT:
02716     <span class="keywordflow">case</span> WM_PAINT:
02717         <span class="keywordflow">if</span> ((hdc = (HDC)wParam) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02718             hdc = <a class="code" href="../../d4/d1/userk_8h.html#a1710">xxxBeginPaint</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, (LPPAINTSTRUCT)&amp;ps);
02719         }
02720         <span class="keywordflow">if</span> (!fSize) {
02721             <a class="code" href="../../d4/d1/userk_8h.html#a1421">SBCtlSetup</a>(psbwnd);
02722             <a class="code" href="../../d8/d4/sbctl_8c.html#a26">xxxDrawSB2</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, &amp;psbwnd-&gt;SBCalc, hdc, psbwnd-&gt;fVert, psbwnd-&gt;wDisableFlags);
02723         } <span class="keywordflow">else</span> {
02724             fSizeReal = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, WFSIZEBOX);
02725             <span class="keywordflow">if</span> (!fSizeReal)
02726                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a732">SetWF</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, WFSIZEBOX);
02727 
02728             <a class="code" href="../../d4/d1/userk_8h.html#a1425">DrawSize</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, hdc, 0, 0);
02729 
02730             <span class="keywordflow">if</span> (!fSizeReal)
02731                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a733">ClrWF</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, WFSIZEBOX);
02732         }
02733 
02734         <span class="keywordflow">if</span> (wParam == 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>)
02735             <a class="code" href="../../d4/d1/userk_8h.html#a1711">xxxEndPaint</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, (LPPAINTSTRUCT)&amp;ps);
02736         <span class="keywordflow">break</span>;
02737 
02738     <span class="keywordflow">case</span> WM_GETDLGCODE:
02739         <span class="keywordflow">return</span> DLGC_WANTARROWS;
02740 
02741     <span class="keywordflow">case</span> WM_CONTEXTMENU:
02742             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(psbwnd-&gt;wnd.<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a>, &amp;tlpwndParent);
02743             <a class="code" href="../../d4/d1/userk_8h.html#a1427">xxxDoScrollMenu</a>(psbwnd-&gt;wnd.<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a>, (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, psbwnd-&gt;fVert, lParam);
02744             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
02745         <span class="keywordflow">break</span>;
02746 
02747     <span class="keywordflow">case</span> WM_NCHITTEST:
02748         <span class="keywordflow">if</span> (style &amp; SBS_SIZEGRIP) {
02749 <span class="preprocessor">#ifdef USE_MIRRORING</span>
02750 <span class="preprocessor"></span>            <span class="comment">/*</span>
02751 <span class="comment">             * If the scroll bar is RTL mirrored, then</span>
02752 <span class="comment">             * mirror the hittest of the grip location.</span>
02753 <span class="comment">             */</span>
02754             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, WEFLAYOUTRTL))
02755                 <span class="keywordflow">return</span> HTBOTTOMLEFT;
02756             <span class="keywordflow">else</span>
02757 <span class="preprocessor">#endif</span>
02758 <span class="preprocessor"></span>                <span class="keywordflow">return</span> HTBOTTOMRIGHT;
02759         } <span class="keywordflow">else</span> {
02760             <span class="keywordflow">goto</span> DoDefault;
02761         }
02762         <span class="keywordflow">break</span>;
02763 
02764 <span class="preprocessor">#ifdef COLOR_HOTTRACKING</span>
02765 <span class="preprocessor"></span>    <span class="keywordflow">case</span> WM_MOUSELEAVE:
02766         xxxHotTrackSBCtl(psbwnd, 0, FALSE);
02767         psbwnd-&gt;ht = 0;
02768         <span class="keywordflow">break</span>;
02769 
02770     <span class="keywordflow">case</span> WM_MOUSEMOVE:
02771         {
02772             <span class="keywordtype">int</span> ht;
02773 
02774             <span class="keywordflow">if</span> (psbwnd-&gt;ht == 0) {
02775                 TRACKMOUSEEVENT tme = {<span class="keyword">sizeof</span>(TRACKMOUSEEVENT), TME_LEAVE, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(psbwnd), 0};
02776                 <a class="code" href="../../d5/d3/ntuser_2kernel_2input_8c.html#a47">TrackMouseEvent</a>(&amp;tme);
02777             }
02778 
02779             pt.x = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lParam);
02780             pt.y = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(lParam);
02781             ht = <a class="code" href="../../d1/d4/tooltips_8c.html#a12">HitTestScrollBar</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, psbwnd-&gt;fVert, pt);
02782             <span class="keywordflow">if</span> (psbwnd-&gt;ht != ht) {
02783                 xxxHotTrackSBCtl(psbwnd, ht, TRUE);
02784                 psbwnd-&gt;ht = ht;
02785             }
02786         }
02787         <span class="keywordflow">break</span>;
02788 <span class="preprocessor">#endif // COLOR_HOTTRACKING</span>
02789 <span class="preprocessor"></span>
02790     <span class="keywordflow">case</span> WM_LBUTTONDBLCLK:
02791         cmd = SC_ZOOM;
02792         <span class="keywordflow">if</span> (fSize)
02793             <span class="keywordflow">goto</span> postmsg;
02794 
02795         <span class="comment">/*</span>
02796 <span class="comment">         *** FALL THRU **</span>
02797 <span class="comment">         */</span>
02798 
02799     <span class="keywordflow">case</span> WM_LBUTTONDOWN:
02800             <span class="comment">//</span>
02801             <span class="comment">// Note that SBS_SIZEGRIP guys normally won't ever see button</span>
02802             <span class="comment">// downs.  This is because they return HTBOTTOMRIGHT to</span>
02803             <span class="comment">// WindowHitTest handling.  This will walk up the parent chain</span>
02804             <span class="comment">// to the first sizeable ancestor, bailing out at caption windows</span>
02805             <span class="comment">// of course.  That dude, if he exists, will handle the sizing</span>
02806             <span class="comment">// instead.</span>
02807             <span class="comment">//</span>
02808         <span class="keywordflow">if</span> (!fSize) {
02809             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, WFTABSTOP)) {
02810                 <a class="code" href="../../d4/d1/userk_8h.html#a1662">xxxSetFocus</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd);
02811             }
02812 
02813             <a class="code" href="../../d4/d1/userk_8h.html#a1726">zzzHideCaret</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd);
02814             <a class="code" href="../../d4/d1/userk_8h.html#a1421">SBCtlSetup</a>(psbwnd);
02815 
02816             <span class="comment">/*</span>
02817 <span class="comment">             * SBCtlSetup enters SEM_SB, and xxxSBTrackInit leaves it.</span>
02818 <span class="comment">             */</span>
02819             <a class="code" href="../../d4/d1/userk_8h.html#a1420">xxxSBTrackInit</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, lParam, 0, (<a class="code" href="../../d7/d9/keyboard_8c.html#a1">_GetKeyState</a>(VK_SHIFT) &lt; 0) ? SCROLL_DIRECT : SCROLL_NORMAL);
02820             <span class="keywordflow">break</span>;
02821         } <span class="keywordflow">else</span> {
02822             cmd = SC_SIZE;
02823 postmsg:
02824             pt.x = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lParam);
02825             pt.y = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(lParam);
02826             <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a18">_ClientToScreen</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, &amp;pt);
02827             lParam = MAKELONG(pt.x, pt.y);
02828 
02829             <span class="comment">/*</span>
02830 <span class="comment">             * convert HT value into a move value.  This is bad,</span>
02831 <span class="comment">             * but this is purely temporary.</span>
02832 <span class="comment">             */</span>
02833 <span class="preprocessor">#ifdef USE_MIRRORING</span>
02834 <span class="preprocessor"></span>            <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd)-&gt;spwndParent,WEFLAYOUTRTL)) {
02835                 uSide = HTBOTTOMLEFT;
02836             } <span class="keywordflow">else</span> 
02837 <span class="preprocessor">#endif</span>
02838 <span class="preprocessor"></span>            {
02839                 uSide = HTBOTTOMRIGHT;
02840             }
02841             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd)-&gt;spwndParent, &amp;tlpwndParent);
02842             <a class="code" href="../../d4/d1/userk_8h.html#a1579">xxxSendMessage</a>(((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd)-&gt;spwndParent, WM_SYSCOMMAND,
02843                     (cmd | (uSide - HTSIZEFIRST + 1)), lParam);
02844             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndParent);
02845         }
02846         <span class="keywordflow">break</span>;
02847 
02848     <span class="keywordflow">case</span> WM_KEYUP:
02849         <span class="keywordflow">switch</span> (wParam) {
02850         <span class="keywordflow">case</span> VK_HOME:
02851         <span class="keywordflow">case</span> VK_END:
02852         <span class="keywordflow">case</span> VK_PRIOR:
02853         <span class="keywordflow">case</span> VK_NEXT:
02854         <span class="keywordflow">case</span> VK_LEFT:
02855         <span class="keywordflow">case</span> VK_UP:
02856         <span class="keywordflow">case</span> VK_RIGHT:
02857         <span class="keywordflow">case</span> VK_DOWN:
02858 
02859             <span class="comment">/*</span>
02860 <span class="comment">             * Send end scroll message when user up clicks on keyboard</span>
02861 <span class="comment">             * scrolling.</span>
02862 <span class="comment">             *</span>
02863 <span class="comment">             * DoScroll does thread locking on these two pwnds -</span>
02864 <span class="comment">             * this is ok since they are not used after this</span>
02865 <span class="comment">             * call.</span>
02866 <span class="comment">             */</span>
02867             <a class="code" href="../../d8/d4/sbctl_8c.html#a36">xxxDoScroll</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, psbwnd-&gt;wnd.<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a>,
02868                     SB_ENDSCROLL, 0, psbwnd-&gt;fVert
02869             );
02870             <span class="keywordflow">break</span>;
02871 
02872         <span class="keywordflow">default</span>:
02873             <span class="keywordflow">break</span>;
02874         }
02875         <span class="keywordflow">break</span>;
02876 
02877     <span class="keywordflow">case</span> WM_KEYDOWN:
02878         <span class="keywordflow">switch</span> (wParam) {
02879         <span class="keywordflow">case</span> VK_HOME:
02880             wParam = SB_TOP;
02881             <span class="keywordflow">goto</span> KeyScroll;
02882 
02883         <span class="keywordflow">case</span> VK_END:
02884             wParam = SB_BOTTOM;
02885             <span class="keywordflow">goto</span> KeyScroll;
02886 
02887         <span class="keywordflow">case</span> VK_PRIOR:
02888             wParam = SB_PAGEUP;
02889             <span class="keywordflow">goto</span> KeyScroll;
02890 
02891         <span class="keywordflow">case</span> VK_NEXT:
02892             wParam = SB_PAGEDOWN;
02893             <span class="keywordflow">goto</span> KeyScroll;
02894 
02895         <span class="keywordflow">case</span> VK_LEFT:
02896         <span class="keywordflow">case</span> VK_UP:
02897             wParam = SB_LINEUP;
02898             <span class="keywordflow">goto</span> KeyScroll;
02899 
02900         <span class="keywordflow">case</span> VK_RIGHT:
02901         <span class="keywordflow">case</span> VK_DOWN:
02902             wParam = SB_LINEDOWN;
02903 KeyScroll:
02904 
02905             <span class="comment">/*</span>
02906 <span class="comment">             * DoScroll does thread locking on these two pwnds -</span>
02907 <span class="comment">             * this is ok since they are not used after this</span>
02908 <span class="comment">             * call.</span>
02909 <span class="comment">             */</span>
02910             <a class="code" href="../../d8/d4/sbctl_8c.html#a36">xxxDoScroll</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, psbwnd-&gt;wnd.<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a>, (<span class="keywordtype">int</span>)wParam,
02911                     0, psbwnd-&gt;fVert
02912             );
02913             <span class="keywordflow">break</span>;
02914 
02915         <span class="keywordflow">default</span>:
02916             <span class="keywordflow">break</span>;
02917         }
02918         <span class="keywordflow">break</span>;
02919 
02920     <span class="keywordflow">case</span> WM_ENABLE:
02921         <span class="keywordflow">return</span> <a class="code" href="../../d4/d1/userk_8h.html#a1579">xxxSendMessage</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, SBM_ENABLE_ARROWS,
02922                (wParam ? ESB_ENABLE_BOTH : ESB_DISABLE_BOTH), 0);
02923 
02924     <span class="keywordflow">case</span> SBM_ENABLE_ARROWS:
02925 
02926         <span class="comment">/*</span>
02927 <span class="comment">         * This is used to enable/disable the arrows in a SB ctrl</span>
02928 <span class="comment">         */</span>
02929         <span class="keywordflow">return</span> (LONG)<a class="code" href="../../d8/d4/sbctl_8c.html#a17">xxxEnableSBCtlArrows</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, (UINT)wParam);
02930 
02931     <span class="keywordflow">case</span> SBM_GETPOS:
02932         <span class="keywordflow">return</span> (LONG)psbwnd-&gt;SBCalc.pos;
02933 
02934     <span class="keywordflow">case</span> SBM_GETRANGE:
02935         *((LPINT)wParam) = psbwnd-&gt;SBCalc.posMin;
02936         *((LPINT)lParam) = psbwnd-&gt;SBCalc.posMax;
02937         <span class="keywordflow">return</span> MAKELRESULT(LOWORD(psbwnd-&gt;SBCalc.posMin), LOWORD(psbwnd-&gt;SBCalc.posMax));
02938 
02939     <span class="keywordflow">case</span> SBM_GETSCROLLINFO:
02940         <span class="keywordflow">return</span> (LONG)<a class="code" href="../../d8/d4/sbctl_8c.html#a15">_SBGetParms</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, SB_CTL, (<a class="code" href="../../d4/d5/structtagSBDATA.html">PSBDATA</a>)&amp;psbwnd-&gt;SBCalc, (LPSCROLLINFO) lParam);
02941 
02942     <span class="keywordflow">case</span> SBM_SETRANGEREDRAW:
02943         fRedraw = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02944 
02945     <span class="keywordflow">case</span> SBM_SETRANGE:
02946         <span class="comment">// Save the old values of Min and Max for return value</span>
02947         si.cbSize = <span class="keyword">sizeof</span>(si);
02948 <span class="comment">//        si.nMin = LOWORD(lParam);</span>
02949 <span class="comment">//        si.nMax = HIWORD(lParam);</span>
02950         si.nMin = (<span class="keywordtype">int</span>)wParam;
02951         si.nMax = (<span class="keywordtype">int</span>)lParam;
02952         si.fMask = SIF_RANGE | SIF_RETURNOLDPOS;
02953         <span class="keywordflow">goto</span> SetInfo;
02954 
02955     <span class="keywordflow">case</span> SBM_SETPOS:
02956         fRedraw = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>) lParam;
02957         si.cbSize = <span class="keyword">sizeof</span>(si);
02958         si.fMask = SIF_POS | SIF_RETURNOLDPOS;
02959         si.nPos  = (<span class="keywordtype">int</span>)wParam;
02960         <span class="keywordflow">goto</span> SetInfo;
02961 
02962     <span class="keywordflow">case</span> SBM_SETSCROLLINFO:
02963         lpsi = (LPSCROLLINFO) lParam;
02964         fRedraw = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>) wParam;
02965 SetInfo:
02966         fScroll = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02967 
02968         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d4/sbctl_8c.html#a30">SBSetParms</a>((<a class="code" href="../../d4/d5/structtagSBDATA.html">PSBDATA</a>)&amp;psbwnd-&gt;SBCalc, lpsi, &amp;fScroll, &amp;lres) &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
02969             <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_OBJECT_VALUECHANGE, (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, OBJID_CLIENT,
02970                     INDEX_SCROLLBAR_SELF, WEF_USEPWNDTHREAD);
02971         }
02972 
02973         <span class="keywordflow">if</span> (!fRedraw)
02974             <span class="keywordflow">return</span> lres;
02975 
02976 
02977         <span class="comment">/*</span>
02978 <span class="comment">         * We must set the new position of the caret irrespective of</span>
02979 <span class="comment">         * whether the window is visible or not;</span>
02980 <span class="comment">         * Still, this will work only if the app has done a xxxSetScrollPos</span>
02981 <span class="comment">         * with fRedraw = TRUE;</span>
02982 <span class="comment">         * Fix for Bug #5188 --SANKAR-- 10-15-89</span>
02983 <span class="comment">         * No need to DeferWinEventNotify since psbwnd is locked.</span>
02984 <span class="comment">         */</span>
02985         <a class="code" href="../../d4/d1/userk_8h.html#a1726">zzzHideCaret</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd);
02986         <a class="code" href="../../d4/d1/userk_8h.html#a1421">SBCtlSetup</a>(psbwnd);
02987         <a class="code" href="../../d8/d4/sbctl_8c.html#a27">zzzSetSBCaretPos</a>(psbwnd);
02988 
02989             <span class="comment">/*</span>
02990 <span class="comment">             ** The following zzzShowCaret() must be done after the DrawThumb2(),</span>
02991 <span class="comment">             ** otherwise this caret will be erased by DrawThumb2() resulting</span>
02992 <span class="comment">             ** in this bug:</span>
02993 <span class="comment">             ** Fix for Bug #9263 --SANKAR-- 02-09-90</span>
02994 <span class="comment">             *</span>
02995 <span class="comment">             */</span>
02996 
02997             <span class="comment">/*</span>
02998 <span class="comment">             *********** zzzShowCaret((PWND)psbwnd); ******</span>
02999 <span class="comment">             */</span>
03000 
03001         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a1">_FChildVisible</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd) &amp;&amp; fRedraw) {
03002             <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>    wDisable;
03003             HBRUSH  hbrUse;
03004 
03005             <span class="keywordflow">if</span> (!fScroll)
03006                 fScroll = !(lpsi-&gt;fMask &amp; SIF_DISABLENOSCROLL);
03007 
03008             wDisable = (fScroll) ? ESB_ENABLE_BOTH : ESB_DISABLE_BOTH;
03009             <a class="code" href="../../d4/d1/userk_8h.html#a1424">xxxEnableScrollBar</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>) psbwnd, SB_CTL, wDisable);
03010 
03011             hdc = <a class="code" href="../../d4/d1/userk_8h.html#a1696">_GetWindowDC</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd);
03012             hbrSave = GreSelectBrush(hdc, hbrUse = <a class="code" href="../../d8/d4/sbctl_8c.html#a21">xxxGetColorObjects</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, hdc));
03013 
03014                 <span class="comment">/*</span>
03015 <span class="comment">                 * Before we used to only hideshowthumb() if the mesage was</span>
03016 <span class="comment">                 * not SBM_SETPOS.  I am not sure why but this case was ever</span>
03017 <span class="comment">                 * needed for win 3.x but on NT it resulted in trashing the border</span>
03018 <span class="comment">                 * of the scrollbar when the app called SetScrollPos() during</span>
03019 <span class="comment">                 * scrollbar tracking.  - mikehar 8/26</span>
03020 <span class="comment">                 */</span>
03021             <a class="code" href="../../d4/d1/userk_8h.html#a1485">DrawThumb2</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, &amp;psbwnd-&gt;SBCalc, hdc, hbrUse, psbwnd-&gt;fVert,
03022                          psbwnd-&gt;wDisableFlags);
03023             GreSelectBrush(hdc, hbrSave);
03024             <a class="code" href="../../d4/d1/userk_8h.html#a1697">_ReleaseDC</a>(hdc);
03025         }
03026 
03027             <span class="comment">/*</span>
03028 <span class="comment">             * This zzzShowCaret() has been moved to this place from above</span>
03029 <span class="comment">             * Fix for Bug #9263 --SANKAR-- 02-09-90</span>
03030 <span class="comment">             */</span>
03031         <a class="code" href="../../d4/d1/userk_8h.html#a1725">zzzShowCaret</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd);
03032         <span class="keywordflow">return</span> lres;
03033 
03034     <span class="keywordflow">default</span>:
03035 DoDefault:
03036         <span class="keywordflow">return</span> <a class="code" href="../../d4/d1/userk_8h.html#a1632">xxxDefWindowProc</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd, message, wParam, lParam);
03037     }
03038 
03039     <span class="keywordflow">return</span> 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
03040 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="sbctl.c::xxxSetScrollBar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG xxxSetScrollBar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>code</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSCROLLINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpsi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fRedraw</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01316">1316</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d0/d0/miscutil_8c-source.html#l00183">_InitPwSB()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02557">ClrWF</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02697">DesktopFree</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02864">tagSBTRACK::fTrackRecalc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02862">tagSBTRACK::fTrackVert</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01827">tagWND::head</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01791">tagSBINFO::Horz</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00537">IsVisible()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06472">IsWinEventNotifyDeferredOK</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01780">tagSBDATA::posMax</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01779">tagSBDATA::posMin</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01848">tagWND::pSBInfo</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03397">PWNDTOPSBTRACK</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01087">SBSetParms()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02556">SetWF</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02865">tagSBTRACK::spwndTrack</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02827">TIF_16BIT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01792">tagSBINFO::Vert</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06464">WEF_USEPWNDTHREAD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02261">WFHPRESENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02406">WFHSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02260">WFVPRESENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02407">WFVSCROLL</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01277">xxxDrawThumb()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00271">xxxEnableWndSBArrows()</a>, <a class="el" href="../../d6/d5/structtagSBTRACK.html#o8">tagSBTRACK::xxxpfnSB</a>, <a class="el" href="../../d2/d1/drawfrm_8c-source.html#l00192">xxxRedrawFrame()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00688">xxxSendMessage()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02061">xxxTrackThumb()</a>, and <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00274">xxxWindowEvent()</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05986">NtUserSetScrollInfo()</a>.
<p>
<pre class="fragment"><div>01321 {
01322     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>        fVert;
01323     <a class="code" href="../../d4/d5/structtagSBDATA.html">PSBDATA</a> pw;
01324     <a class="code" href="../../d5/d5/structtagSBINFO.html">PSBINFO</a> pSBInfo;
01325     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fOldScroll;
01326     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fScroll;
01327     WORD        wfScroll;
01328     LONG     lres;
01329     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>        fNewScroll;
01330 
01331     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
01332     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a616">IsWinEventNotifyDeferredOK</a>());
01333 
01334     <span class="keywordflow">if</span> (fRedraw)
01335         <span class="comment">// window must be visible to redraw</span>
01336         fRedraw = <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a6">IsVisible</a>(pwnd);
01337 
01338     <span class="keywordflow">if</span> (code == SB_CTL)
01339 <span class="preprocessor">#ifdef FE_SB // xxxSetScrollBar()</span>
01340 <span class="preprocessor"></span>        <span class="comment">// scroll bar control; send the control a message</span>
01341         <span class="keywordflow">if</span>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwnd)-&gt;TIF_flags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a796">TIF_16BIT</a>) {
01342             <span class="comment">//</span>
01343             <span class="comment">// If the target application is 16bit apps, we don't pass win40's message.</span>
01344             <span class="comment">// This fix for Ichitaro v6.3. It eats the message. It never forwards</span>
01345             <span class="comment">// the un-processed messages to original windows procedure via</span>
01346             <span class="comment">// CallWindowProc().</span>
01347             <span class="comment">//</span>
01348             <span class="comment">// Is this from xxxSetScrollPos() ?</span>
01349             <span class="keywordflow">if</span>(lpsi-&gt;fMask == (SIF_POS|SIF_RETURNOLDPOS)) {
01350                 <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)<a class="code" href="../../d4/d1/userk_8h.html#a1579">xxxSendMessage</a>(pwnd, SBM_SETPOS, lpsi-&gt;nPos, fRedraw);
01351             <span class="comment">// Is this from xxxSetScrollRange() ?</span>
01352             } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(lpsi-&gt;fMask == SIF_RANGE) {
01353                 <a class="code" href="../../d4/d1/userk_8h.html#a1579">xxxSendMessage</a>(pwnd, SBM_SETRANGE, lpsi-&gt;nMin, lpsi-&gt;nMax);
01354                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01355             <span class="comment">// Others...</span>
01356             } <span class="keywordflow">else</span> {
01357                 <span class="keywordflow">return</span> (LONG)<a class="code" href="../../d4/d1/userk_8h.html#a1579">xxxSendMessage</a>(pwnd, SBM_SETSCROLLINFO, (WPARAM) fRedraw, (LPARAM) lpsi);
01358             }
01359         } <span class="keywordflow">else</span> {
01360             <span class="keywordflow">return</span> (LONG)<a class="code" href="../../d4/d1/userk_8h.html#a1579">xxxSendMessage</a>(pwnd, SBM_SETSCROLLINFO, (WPARAM) fRedraw, (LPARAM) lpsi);
01361         }
01362 <span class="preprocessor">#else</span>
01363 <span class="preprocessor"></span>        <span class="comment">// scroll bar control; send the control a message</span>
01364         <span class="keywordflow">return</span> (LONG)<a class="code" href="../../d4/d1/userk_8h.html#a1579">xxxSendMessage</a>(pwnd, SBM_SETSCROLLINFO, (WPARAM) fRedraw, (LPARAM) lpsi);
01365 <span class="preprocessor">#endif // FE_SB</span>
01366 <span class="preprocessor"></span>
01367     fVert = (code != SB_HORZ);
01368 
01369     wfScroll = (fVert) ? <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a641">WFVSCROLL</a> : <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a640">WFHSCROLL</a>;
01370 
01371     fScroll = fOldScroll = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, wfScroll)) ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01372 
01373     <span class="comment">/*</span>
01374 <span class="comment">     * Don't do anything if we're setting position of a nonexistent scroll bar.</span>
01375 <span class="comment">     */</span>
01376     <span class="keywordflow">if</span> (!(lpsi-&gt;fMask &amp; SIF_RANGE) &amp;&amp; !fOldScroll &amp;&amp; (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o14">pSBInfo</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
01377         RIPERR0(ERROR_NO_SCROLLBARS, RIP_VERBOSE, <span class="stringliteral">""</span>);
01378         <span class="keywordflow">return</span> 0;
01379     }
01380 
01381     <span class="keywordflow">if</span> (fNewScroll = !(pSBInfo = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o14">pSBInfo</a>)) {
01382         <span class="keywordflow">if</span> ((pSBInfo = <a class="code" href="../../d4/d1/userk_8h.html#a1566">_InitPwSB</a>(pwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01383             <span class="keywordflow">return</span> 0;
01384     }
01385 
01386     pw = (fVert) ? &amp;(pSBInfo-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o2">Vert</a>) : &amp;(pSBInfo-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o1">Horz</a>);
01387 
01388     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d4/sbctl_8c.html#a30">SBSetParms</a>(pw, lpsi, &amp;fScroll, &amp;lres) &amp;&amp; !fNewScroll) {
01389         <span class="comment">// no change -- but if REDRAW is specified and there's a scrollbar,</span>
01390         <span class="comment">// redraw the thumb</span>
01391         <span class="keywordflow">if</span> (fOldScroll &amp;&amp; fRedraw)
01392             <span class="keywordflow">goto</span> redrawAfterSet;
01393 
01394         <span class="keywordflow">return</span> lres;
01395     }
01396 
01397     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a733">ClrWF</a>(pwnd, wfScroll);
01398 
01399     <span class="keywordflow">if</span> (fScroll)
01400         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a732">SetWF</a>(pwnd, wfScroll);
01401     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, (WFHSCROLL | WFVSCROLL))) {
01402         <span class="comment">// if neither scroll bar is set and both ranges are 0, then free up the</span>
01403         <span class="comment">// scroll info</span>
01404 
01405         pSBInfo = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o14">pSBInfo</a>;
01406 
01407         <span class="keywordflow">if</span> ((pSBInfo-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o1">Horz</a>.<a class="code" href="../../d4/d5/structtagSBDATA.html#o0">posMin</a> == pSBInfo-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o1">Horz</a>.<a class="code" href="../../d4/d5/structtagSBDATA.html#o1">posMax</a>) &amp;&amp;
01408             (pSBInfo-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o2">Vert</a>.<a class="code" href="../../d4/d5/structtagSBDATA.html#o0">posMin</a> == pSBInfo-&gt;<a class="code" href="../../d5/d5/structtagSBINFO.html#o2">Vert</a>.<a class="code" href="../../d4/d5/structtagSBDATA.html#o1">posMax</a>)) {
01409             <a class="code" href="../../d4/d1/userk_8h.html#a313">DesktopFree</a>(pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o0">head</a>.rpdesk, (HANDLE)(pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o14">pSBInfo</a>));
01410             pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o14">pSBInfo</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01411         }
01412     }
01413 
01414     <span class="keywordflow">if</span> (lpsi-&gt;fMask &amp; SIF_DISABLENOSCROLL) {
01415         <span class="keywordflow">if</span> (fOldScroll) {
01416             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a732">SetWF</a>(pwnd, wfScroll);
01417             <a class="code" href="../../d8/d4/sbctl_8c.html#a18">xxxEnableWndSBArrows</a>(pwnd, code, (fScroll) ? ESB_ENABLE_BOTH : ESB_DISABLE_BOTH);
01418         }
01419     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fOldScroll ^ fScroll) {
01420         <a class="code" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack = <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd);
01421         <span class="keywordflow">if</span> (pSBTrack &amp;&amp; (pwnd == pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o4">spwndTrack</a>)) {
01422             pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o3">fTrackRecalc</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01423         }
01424         <a class="code" href="../../d4/d1/userk_8h.html#a1499">xxxRedrawFrame</a>(pwnd);
01425         <span class="comment">// Note: after xxx, pSBTrack may no longer be valid (but we return now)</span>
01426         <span class="keywordflow">return</span> lres;
01427     }
01428 
01429     <span class="keywordflow">if</span> (fScroll &amp;&amp; fRedraw &amp;&amp; (fVert ? <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVPRESENT) : <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a552">WFHPRESENT</a>))) {
01430         <a class="code" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack;
01431 redrawAfterSet:
01432         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
01433             <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_OBJECT_VALUECHANGE, pwnd, (fVert ? OBJID_VSCROLL : OBJID_HSCROLL),
01434                     INDEX_SCROLLBAR_SELF, WEF_USEPWNDTHREAD);
01435         }
01436         pSBTrack = <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd);
01437         <span class="comment">// Bail out if the caller is trying to change the position of</span>
01438         <span class="comment">// a scrollbar that is in the middle of tracking.  We'll hose</span>
01439         <span class="comment">// TrackThumb() otherwise.</span>
01440 
01441         <span class="keywordflow">if</span> (pSBTrack &amp;&amp; (pwnd == pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o4">spwndTrack</a>) &amp;&amp;
01442                 ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)(pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>) == fVert) &amp;&amp;
01443                 (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o8">xxxpfnSB</a> == <a class="code" href="../../d8/d4/sbctl_8c.html#a42">xxxTrackThumb</a>)) {
01444             <span class="keywordflow">return</span> lres;
01445         }
01446 
01447         <a class="code" href="../../d8/d4/sbctl_8c.html#a31">xxxDrawThumb</a>(pwnd, NULL, fVert);
01448         <span class="comment">// Note: after xxx, pSBTrack may no longer be valid (but we return now)</span>
01449     }
01450 
01451     <span class="keywordflow">return</span> lres;
01452 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="sbctl.c::xxxTrackBox" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxTrackBox           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pSBCalc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01971">1971</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d5/d1/timers_8c-source.html#l00078">_SetSystemTimer()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02870">tagSBTRACK::cmdSB</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02861">tagSBTRACK::fHitOld</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02864">tagSBTRACK::fTrackRecalc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02862">tagSBTRACK::fTrackVert</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00143">GET_X_LPARAM</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00147">GET_Y_LPARAM</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02720">tagSBTRACK::hTimerSB</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00310">IDSYS_SCROLL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06472">IsWinEventNotifyDeferredOK</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00118">PtInRect()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03397">PWNDTOPSBTRACK</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02868">tagSBTRACK::rcTrack</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00645">RecalcTrackRect()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00050">RETURN_IF_PSBTRACK_INVALID</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02866">tagSBTRACK::spwndSB</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02867">tagSBTRACK::spwndSBNotify</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01913">xxxContScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01549">xxxDoScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01782">xxxEndScroll()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01678">zzzDrawInvertScrollArea()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01913">xxxContScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01782">xxxEndScroll()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">xxxSBTrackInit()</a>.
<p>
<pre class="fragment"><div>01977 {
01978     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fHit;
01979     POINT ptHit;
01980     <a class="code" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack = <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd);
01981     <span class="keywordtype">int</span> cmsTimer;
01982 
01983     UNREFERENCED_PARAMETER(wParam);
01984     UNREFERENCED_PARAMETER(pSBCalc);
01985 
01986     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
01987     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a616">IsWinEventNotifyDeferredOK</a>());
01988 
01989     <span class="keywordflow">if</span> (pSBTrack == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01990         <span class="keywordflow">return</span>;
01991 
01992     <span class="keywordflow">if</span> (message != WM_NULL &amp;&amp; <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(message) != <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(WM_MOUSEFIRST))
01993         <span class="keywordflow">return</span>;
01994 
01995     <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o3">fTrackRecalc</a>) {
01996         <a class="code" href="../../d8/d4/sbctl_8c.html#a24">RecalcTrackRect</a>(pSBTrack);
01997         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o3">fTrackRecalc</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01998     }
01999 
02000     ptHit.x = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lParam);
02001     ptHit.y = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(lParam);
02002     fHit = <a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o7">rcTrack</a>, ptHit);
02003 
02004     <span class="keywordflow">if</span> (fHit != (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o0">fHitOld</a>) {
02005         <a class="code" href="../../d8/d4/sbctl_8c.html#a38">zzzDrawInvertScrollArea</a>(pwnd, pSBTrack, fHit, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a>);
02006         <span class="comment">// After zzz, pSBTrack may no longer be valid</span>
02007         <a class="code" href="../../d8/d4/sbctl_8c.html#a7">RETURN_IF_PSBTRACK_INVALID</a>(pSBTrack, pwnd);
02008     }
02009 
02010     cmsTimer = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtScroll / 8;
02011 
02012     <span class="keywordflow">switch</span> (message) {
02013     <span class="keywordflow">case</span> WM_LBUTTONUP:
02014         <a class="code" href="../../d4/d1/userk_8h.html#a1442">xxxEndScroll</a>(pwnd, FALSE);
02015         <span class="comment">// Note: after xxx, pSBTrack may no longer be valid</span>
02016         <span class="keywordflow">break</span>;
02017 
02018     <span class="keywordflow">case</span> WM_LBUTTONDOWN:
02019         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o10">hTimerSB</a> = 0;
02020         cmsTimer = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtScroll;
02021 
02022         <span class="comment">/*</span>
02023 <span class="comment">         *** FALL THRU **</span>
02024 <span class="comment">         */</span>
02025 
02026     <span class="keywordflow">case</span> WM_MOUSEMOVE:
02027         <span class="keywordflow">if</span> (fHit &amp;&amp; fHit != (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o0">fHitOld</a>) {
02028 
02029             <span class="comment">/*</span>
02030 <span class="comment">             * We moved back into the normal rectangle: reset timer</span>
02031 <span class="comment">             */</span>
02032             pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o10">hTimerSB</a> = <a class="code" href="../../d4/d1/userk_8h.html#a1894">_SetSystemTimer</a>(pwnd, IDSYS_SCROLL,
02033                     cmsTimer, xxxContScroll);
02034 
02035             <span class="comment">/*</span>
02036 <span class="comment">             * DoScroll does thread locking on these two pwnds -</span>
02037 <span class="comment">             * this is ok since they are not used after this</span>
02038 <span class="comment">             * call.</span>
02039 <span class="comment">             */</span>
02040             <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02041                 <a class="code" href="../../d8/d4/sbctl_8c.html#a36">xxxDoScroll</a>(pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o5">spwndSB</a>, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o6">spwndSBNotify</a>,
02042                         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o9">cmdSB</a>, 0, pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>);
02043                 <span class="comment">// Note: after xxx, pSBTrack may no longer be valid</span>
02044             }
02045         }
02046     }
02047     <span class="comment">// After xxxDoScroll or xxxEndScroll, revalidate pSBTrack</span>
02048     <a class="code" href="../../d8/d4/sbctl_8c.html#a7">RETURN_IF_PSBTRACK_INVALID</a>(pSBTrack, pwnd);
02049     pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o0">fHitOld</a> = fHit;
02050 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="sbctl.c::xxxTrackThumb" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxTrackThumb           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d3/d5/structtagSBCALC.html">PSBCALC</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pSBCalc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02061">2061</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d8/d8/keyboard_8c-source.html#l00027">_GetKeyState()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02856">tagSBCALC::cpx</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02872">tagSBTRACK::dpxThumb</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02864">tagSBTRACK::fTrackRecalc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02862">tagSBTRACK::fTrackVert</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00143">GET_X_LPARAM</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00147">GET_Y_LPARAM</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00118">PtInRect()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03397">PWNDTOPSBTRACK</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02857">tagSBCALC::pxMin</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02853">tagSBCALC::pxStart</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02868">tagSBTRACK::rcTrack</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00645">RecalcTrackRect()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01782">xxxEndScroll()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01596">xxxMoveThumb()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01782">xxxEndScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">xxxSBTrackInit()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01316">xxxSetScrollBar()</a>.
<p>
<pre class="fragment"><div>02067 {
02068     <span class="keywordtype">int</span> px;
02069     <a class="code" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a> pSBTrack = <a class="code" href="../../d4/d1/userk_8h.html#a384">PWNDTOPSBTRACK</a>(pwnd);
02070     POINT pt;
02071 
02072     UNREFERENCED_PARAMETER(wParam);
02073 
02074     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
02075 
02076     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(message) != <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(WM_MOUSEFIRST))
02077         <span class="keywordflow">return</span>;
02078 
02079     <span class="keywordflow">if</span> (pSBTrack == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
02080         <span class="keywordflow">return</span>;
02081 
02082     <span class="comment">// Make sure that the SBINFO structure contains data for the</span>
02083     <span class="comment">// window being tracked -- if not, recalculate data in SBINFO</span>
02084 <span class="comment">//    CheckScrollRecalc(pwnd, pSBState, pSBCalc);</span>
02085     <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o3">fTrackRecalc</a>) {
02086         <a class="code" href="../../d8/d4/sbctl_8c.html#a24">RecalcTrackRect</a>(pSBTrack);
02087         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o3">fTrackRecalc</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02088     }
02089 
02090 
02091     pt.y = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(lParam);
02092     pt.x = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lParam);
02093     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o7">rcTrack</a>, pt))
02094         px = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o8">pxStart</a>;
02095     <span class="keywordflow">else</span> {
02096         px = (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a> ? pt.y : pt.x) + pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o11">dpxThumb</a>;
02097         <span class="keywordflow">if</span> (px &lt; pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o12">pxMin</a>)
02098             px = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o12">pxMin</a>;
02099         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (px &gt;= pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o12">pxMin</a> + pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o11">cpx</a>)
02100             px = pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o12">pxMin</a> + pSBCalc-&gt;<a class="code" href="../../d3/d5/structtagSBCALC.html#o11">cpx</a>;
02101     }
02102 
02103     <a class="code" href="../../d8/d4/sbctl_8c.html#a37">xxxMoveThumb</a>(pwnd, pSBCalc, px);
02104 
02105     <span class="comment">/*</span>
02106 <span class="comment">     * We won't get the WM_LBUTTONUP message if we got here through</span>
02107 <span class="comment">     * the scroll menu, so test the button state directly.</span>
02108 <span class="comment">     */</span>
02109     <span class="keywordflow">if</span> (message == WM_LBUTTONUP || <a class="code" href="../../d7/d9/keyboard_8c.html#a1">_GetKeyState</a>(VK_LBUTTON) &gt;= 0) {
02110         <a class="code" href="../../d4/d1/userk_8h.html#a1442">xxxEndScroll</a>(pwnd, FALSE);
02111     }
02112 
02113 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="sbctl.c::zzzDrawInvertScrollArea" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void zzzDrawInvertScrollArea           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d5/structtagSBTRACK.html">PSBTRACK</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pSBTrack</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fHit</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cmd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01678">1678</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00201">_GetWindowDC()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00183">_ReleaseDC()</a>, <a class="el" href="../../d0/d2/mngrayc_8c-source.html#l00029">BitBltSysBmp()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02557">ClrWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00243">CopyRect</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00944">DOBI_PUSHED</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00729">DrawFrameControl()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02863">tagSBTRACK::fCtlSB</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02864">tagSBTRACK::fTrackRecalc</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02862">tagSBTRACK::fTrackVert</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01519">InvertScrollHilite()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01009">OBI_DNARROW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01017">OBI_LFARROW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01013">OBI_RGARROW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01005">OBI_UPARROW</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02868">tagSBTRACK::rcTrack</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00645">RecalcTrackRect()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02556">SetWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06464">WEF_USEPWNDTHREAD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02333">WFLINEDNBUTTONDOWN</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02330">WFLINEUPBUTTONDOWN</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02332">WFPAGEDNBUTTONDOWN</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02331">WFPAGEUPBUTTONDOWN</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l06494">zzzWindowEvent</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01782">xxxEndScroll()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01971">xxxTrackBox()</a>.
<p>
<pre class="fragment"><div>01683 {
01684     HDC hdc;
01685     RECT rcTemp;
01686     <span class="keywordtype">int</span> cx, <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>;
01687     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> bm;
01688 
01689     <span class="keywordflow">if</span> ((cmd != SB_LINEUP) &amp;&amp; (cmd != SB_LINEDOWN)) {
01690         <span class="comment">// not hitting on arrow -- just invert the area and return</span>
01691         <a class="code" href="../../d8/d4/sbctl_8c.html#a35">InvertScrollHilite</a>(pwnd, pSBTrack);
01692 
01693         <span class="keywordflow">if</span> (cmd == SB_PAGEUP) {
01694             <span class="keywordflow">if</span> (fHit)
01695                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a732">SetWF</a>(pwnd, WFPAGEUPBUTTONDOWN);
01696             <span class="keywordflow">else</span>
01697                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a733">ClrWF</a>(pwnd, WFPAGEUPBUTTONDOWN);
01698         } <span class="keywordflow">else</span> {
01699             <span class="keywordflow">if</span> (fHit)
01700                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a732">SetWF</a>(pwnd, WFPAGEDNBUTTONDOWN);
01701             <span class="keywordflow">else</span>
01702                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a733">ClrWF</a>(pwnd, WFPAGEDNBUTTONDOWN);
01703         }
01704 
01705         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
01706             <a class="code" href="../../d4/d1/userk_8h.html#a619">zzzWindowEvent</a>(EVENT_OBJECT_STATECHANGE, pwnd,
01707                     (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o2">fCtlSB</a> ? OBJID_CLIENT : (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a> ? OBJID_VSCROLL : OBJID_HSCROLL)),
01708                     ((cmd == SB_PAGEUP) ? INDEX_SCROLLBAR_UPPAGE : INDEX_SCROLLBAR_DOWNPAGE),
01709                     WEF_USEPWNDTHREAD);
01710             <span class="comment">// Note: after zzz, pSBTrack may no longer be valid (but we return now)</span>
01711         }
01712         <span class="keywordflow">return</span>;
01713     }
01714 
01715     <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o3">fTrackRecalc</a>) {
01716         <a class="code" href="../../d8/d4/sbctl_8c.html#a24">RecalcTrackRect</a>(pSBTrack);
01717         pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o3">fTrackRecalc</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01718     }
01719 
01720     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a33">CopyRect</a>(&amp;rcTemp, &amp;pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o7">rcTrack</a>);
01721 
01722     hdc = <a class="code" href="../../d4/d1/userk_8h.html#a1696">_GetWindowDC</a>(pwnd);
01723 
01724     <span class="keywordflow">if</span> (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>) {
01725         cx = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXVSCROLL);
01726         <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYVSCROLL);
01727     } <span class="keywordflow">else</span> {
01728         cx = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXHSCROLL);
01729         <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYHSCROLL);
01730     }
01731 
01732     <span class="keywordflow">if</span> ((cx == (rcTemp.right - rcTemp.left)) &amp;&amp;
01733         (<a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> == (rcTemp.bottom - rcTemp.top))) {
01734         <span class="keywordflow">if</span> (cmd == SB_LINEUP)
01735             bm = (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>) ? <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a313">OBI_UPARROW</a> : <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a325">OBI_LFARROW</a>;
01736         <span class="keywordflow">else</span> <span class="comment">// SB_LINEDOWN</span>
01737             bm = (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>) ? <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a317">OBI_DNARROW</a> : <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a321">OBI_RGARROW</a>;
01738 
01739         <span class="keywordflow">if</span> (fHit)
01740             bm += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a257">DOBI_PUSHED</a>;
01741 
01742         <a class="code" href="../../d4/d1/userk_8h.html#a1773">BitBltSysBmp</a>(hdc, rcTemp.left, rcTemp.top, bm);
01743     } <span class="keywordflow">else</span> {
01744         <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a14">DrawFrameControl</a>(hdc, &amp;rcTemp, DFC_SCROLL,
01745             ((pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a>) ? DFCS_SCROLLVERT : DFCS_SCROLLHORZ) |
01746             ((fHit) ? DFCS_PUSHED | DFCS_FLAT : 0) |
01747             ((cmd == SB_LINEUP) ? DFCS_SCROLLMIN : DFCS_SCROLLMAX));
01748     }
01749 
01750     <a class="code" href="../../d4/d1/userk_8h.html#a1697">_ReleaseDC</a>(hdc);
01751 
01752 
01753     <span class="keywordflow">if</span> (cmd == SB_LINEUP) {
01754         <span class="keywordflow">if</span> (fHit)
01755             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a732">SetWF</a>(pwnd, WFLINEUPBUTTONDOWN);
01756         <span class="keywordflow">else</span>
01757             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a733">ClrWF</a>(pwnd, WFLINEUPBUTTONDOWN);
01758     } <span class="keywordflow">else</span> {
01759         <span class="keywordflow">if</span> (fHit)
01760             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a732">SetWF</a>(pwnd, WFLINEDNBUTTONDOWN);
01761         <span class="keywordflow">else</span>
01762             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a733">ClrWF</a>(pwnd, WFLINEDNBUTTONDOWN);
01763     }
01764 
01765     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
01766         <a class="code" href="../../d4/d1/userk_8h.html#a619">zzzWindowEvent</a>(EVENT_OBJECT_STATECHANGE, pwnd,
01767                 (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o2">fCtlSB</a> ? OBJID_CLIENT : (pSBTrack-&gt;<a class="code" href="../../d6/d5/structtagSBTRACK.html#o1">fTrackVert</a> ? OBJID_VSCROLL : OBJID_HSCROLL)),
01768                 (cmd == SB_LINEUP ? INDEX_SCROLLBAR_UP : INDEX_SCROLLBAR_DOWN),
01769                 WEF_USEPWNDTHREAD);
01770         <span class="comment">// Note: after zzz, pSBTrack may no longer be valid (but we return now)</span>
01771     }
01772 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="sbctl.c::zzzSetSBCaretPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void zzzSetSBCaretPos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d7/d5/structtagSBWND.html">PSBWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>psbwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00907">907</a> of file <a class="el" href="../../d9/d3/sbctl_8c-source.html">sbctl.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03145">tagSBWND::fVert</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02848">tagSBCALC::pxLeft</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02855">tagSBCALC::pxThumbTop</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03150">tagSBWND::SBCalc</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00550">zzzSetCaretPos()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.
<p>
<pre class="fragment"><div>00909 {
00910 
00911     <span class="keywordflow">if</span> ((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)psbwnd == <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;pq-&gt;spwndFocus) {
00912         <a class="code" href="../../d4/d1/userk_8h.html#a1728">zzzSetCaretPos</a>((psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o1">fVert</a> ? psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o3">SBCalc</a>.<a class="code" href="../../d3/d5/structtagSBCALC.html#o3">pxLeft</a> : psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o3">SBCalc</a>.<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a>) + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXEDGE),
00913                 (psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o1">fVert</a> ? psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o3">SBCalc</a>.<a class="code" href="../../d3/d5/structtagSBCALC.html#o10">pxThumbTop</a> : psbwnd-&gt;<a class="code" href="../../d7/d5/structtagSBWND.html#o3">SBCalc</a>.<a class="code" href="../../d3/d5/structtagSBCALC.html#o3">pxLeft</a>) + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE));
00914     }
00915 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:32 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

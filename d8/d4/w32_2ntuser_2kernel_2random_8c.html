<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: w32/ntuser/kernel/random.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>random.c File Reference</h1><code>#include "<a class="el" href="../../d1/d3/w32_2ntuser_2kernel_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a0">NUM_BYTES</a>&nbsp;&nbsp;&nbsp;16</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a2">xxxUpdateWindows</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, HRGN hrgn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a3">ValidateState</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a4">SetWindowState</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a5">ClearWindowState</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a6">CheckPwndFilter</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndFilter)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a7">AllocateUnicodeString</a> (PUNICODE_STRING pstrDst, PUNICODE_STRING cczpstrSrc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HBRUSH&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a8">xxxGetControlColor</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndCtl, HDC hdc, UINT message)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HBRUSH&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a9">xxxGetControlBrush</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, HDC hdc, UINT message)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a10">xxxHardErrorControl</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCmd, HANDLE handle, PDESKRESTOREDATA pdrdRestore)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>CONST <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a1">abValidateState</a> [NUM_BYTES]</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="w32/ntuser/kernel/random.c::NUM_BYTES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NUM_BYTES&nbsp;&nbsp;&nbsp;16          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00046">46</a> of file <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html">w32/ntuser/kernel/random.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00067">ValidateState()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a7" doxytag="w32/ntuser/kernel/random.c::AllocateUnicodeString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL AllocateUnicodeString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrDst</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>cczpstrSrc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00155">155</a> of file <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html">w32/ntuser/kernel/random.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d5/d3/kernel_2acons_8c-source.html#l00319">_SetCursorIconData()</a>, <a class="el" href="../../d3/d6/class_8c-source.html#l00244">InternalRegisterClassEx()</a>, and <a class="el" href="../../d3/d6/class_8c-source.html#l01399">xxxSetClassData()</a>.
<p>
<pre class="fragment"><div>00158 {
00159     <span class="keywordflow">if</span> (cczpstrSrc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00160         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(pstrDst, NULL);
00161         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00162     }
00163 
00164     pstrDst-&gt;Buffer = UserAllocPoolWithQuota(cczpstrSrc-&gt;Length+<span class="keyword">sizeof</span>(UNICODE_NULL), TAG_TEXT);
00165     <span class="keywordflow">if</span> (pstrDst-&gt;Buffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00166         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00167     }
00168 
00169     <span class="keywordflow">try</span> {
00170         RtlCopyMemory(pstrDst-&gt;Buffer, cczpstrSrc-&gt;Buffer, cczpstrSrc-&gt;Length);
00171     } except (W32ExceptionHandler(FALSE, RIP_WARNING)) {
00172         UserFreePool(pstrDst-&gt;Buffer);
00173         pstrDst-&gt;Buffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00174         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00175     }
00176     pstrDst-&gt;MaximumLength = cczpstrSrc-&gt;Length+<span class="keyword">sizeof</span>(UNICODE_NULL);
00177     pstrDst-&gt;Length = cczpstrSrc-&gt;Length;
00178     pstrDst-&gt;Buffer[pstrDst-&gt;Length / <span class="keyword">sizeof</span>(WCHAR)] = 0;
00179 
00180     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00181 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="w32/ntuser/kernel/random.c::CheckPwndFilter" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CheckPwndFilter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndFilter</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00131">131</a> of file <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html">w32/ntuser/kernel/random.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00826">_IsChild()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d2/paint_8c-source.html#l00574">DoPaint()</a>, <a class="el" href="../../d5/d1/timers_8c-source.html#l00538">DoTimer()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l03336">FindQMsg()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l03305">xxxScanSysQueue()</a>, and <a class="el" href="../../d0/d8/winwhere_8c-source.html#l00315">xxxWindowHitTest2()</a>.
<p>
<pre class="fragment"><div>00134 {
00135     <span class="keywordflow">if</span> ((pwndFilter == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (pwndFilter == pwnd) ||
00136             ((pwndFilter == (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)1) &amp;&amp; (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>))) {
00137         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00138     }
00139 
00140     <span class="keywordflow">return</span> <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a16">_IsChild</a>(pwndFilter, pwnd);
00141 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="w32/ntuser/kernel/random.c::ClearWindowState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ClearWindowState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00102">102</a> of file <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html">w32/ntuser/kernel/random.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02557">ClrWF</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, and <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00067">ValidateState()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00810">AnimateWindow()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00200">CalcClientScrolling()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00031">CBNcCreateHandler()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00285">ECNcCreate()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00516">ECSetPasswordChar()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00165">MDIAddSysMenu()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, and <a class="el" href="../../d5/d4/edmlonce_8c-source.html#l00023">MLCreate()</a>.
<p>
<pre class="fragment"><div>00105 {
00106     <span class="comment">/*</span>
00107 <span class="comment">     * Don't let anyone mess with someone else's window</span>
00108 <span class="comment">     */</span>
00109     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwnd)-&gt;ppi == <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;ppi) {
00110         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a3">ValidateState</a>(dwFlags)) {
00111             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a733">ClrWF</a>(pwnd, dwFlags);
00112         } <span class="keywordflow">else</span> {
00113             RIPMSG1(RIP_ERROR, <span class="stringliteral">"SetWindowState: invalid flag %x"</span>, dwFlags);
00114         }
00115     } <span class="keywordflow">else</span> {
00116         RIPMSG1(RIP_WARNING, <span class="stringliteral">"ClearWindowState: current ppi doesn't own pwnd %#p"</span>, pwnd);
00117     }
00118 
00119 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="w32/ntuser/kernel/random.c::SetWindowState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SetWindowState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00083">83</a> of file <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html">w32/ntuser/kernel/random.c</a>.
<p>
References <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02556">SetWF</a>, and <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00067">ValidateState()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00810">AnimateWindow()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00200">CalcClientScrolling()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00031">CBNcCreateHandler()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00516">ECSetPasswordChar()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00289">MDIRemoveSysMenu()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>.
<p>
<pre class="fragment"><div>00086 {
00087     <span class="comment">/*</span>
00088 <span class="comment">     * Don't let anyone mess with someone else's window</span>
00089 <span class="comment">     */</span>
00090     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwnd)-&gt;ppi == <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;ppi) {
00091         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a3">ValidateState</a>(dwFlags)) {
00092             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a732">SetWF</a>(pwnd, dwFlags);
00093         } <span class="keywordflow">else</span> {
00094             RIPMSG1(RIP_ERROR, <span class="stringliteral">"SetWindowState: invalid flag %x"</span>, dwFlags);
00095         }
00096     } <span class="keywordflow">else</span> {
00097         RIPMSG1(RIP_WARNING, <span class="stringliteral">"SetWindowState: current ppi doesn't own pwnd %#p"</span>, pwnd);
00098     }
00099 
00100 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="w32/ntuser/kernel/random.c::ValidateState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ValidateState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dwFlags</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00067">67</a> of file <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html">w32/ntuser/kernel/random.c</a>.
<p>
References <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00048">abValidateState</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, and <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00046">NUM_BYTES</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00102">ClearWindowState()</a>, and <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00083">SetWindowState()</a>.
<p>
<pre class="fragment"><div>00068 {
00069     <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> bOffset = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(dwFlags), bState = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(dwFlags);
00070 
00071     <span class="keywordflow">if</span> (bOffset &gt; <a class="code" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a0">NUM_BYTES</a> - 1)
00072         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00073 
00074     <span class="keywordflow">return</span> ((bState &amp; <a class="code" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a1">abValidateState</a>[bOffset]) == bState);
00075 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="w32/ntuser/kernel/random.c::xxxGetControlBrush" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HBRUSH xxxGetControlBrush           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00241">241</a> of file <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html">w32/ntuser/kernel/random.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01747">tagWND::spwndOwner</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01745">tagWND::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02565">TestwndPopup</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, and <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00193">xxxGetControlColor()</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04948">NtUserGetControlBrush()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00540">xxxGetColorObjects()</a>.
<p>
<pre class="fragment"><div>00245 {
00246     HBRUSH hbr;
00247     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndSend;
00248     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndSend;
00249 
00250     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00251 
00252     <span class="keywordflow">if</span> ((pwndSend = (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a739">TestwndPopup</a>(pwnd) ? pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o5">spwndOwner</a> : pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a>))
00253          == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00254         pwndSend = pwnd;
00255 
00256     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndSend, &amp;tlpwndSend);
00257 
00258     <span class="comment">/*</span>
00259 <span class="comment">     * Last parameter changes the message into a ctlcolor id.</span>
00260 <span class="comment">     */</span>
00261     hbr = <a class="code" href="../../d4/d1/userk_8h.html#a1565">xxxGetControlColor</a>(pwndSend, pwnd, hdc, message);
00262     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndSend);
00263 
00264     <span class="keywordflow">return</span> hbr;
00265 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="w32/ntuser/kernel/random.c::xxxGetControlColor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HBRUSH xxxGetControlColor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndCtl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00193">193</a> of file <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html">w32/ntuser/kernel/random.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00084">PpiCurrent</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, and <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00688">xxxSendMessage()</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04974">NtUserGetControlColor()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00241">xxxGetControlBrush()</a>, and <a class="el" href="../../d0/d2/paint_8c-source.html#l00072">xxxPaintRect()</a>.
<p>
<pre class="fragment"><div>00198 {
00199     HBRUSH hbrush;
00200 
00201     <span class="comment">/*</span>
00202 <span class="comment">     * If we're sending to a window of another thread, don't send this message</span>
00203 <span class="comment">     * but instead call DefWindowProc().  New rule about the CTLCOLOR messages.</span>
00204 <span class="comment">     * Need to do this so that we don't send an hdc owned by one thread to</span>
00205 <span class="comment">     * another thread.  It is also a harmless change.</span>
00206 <span class="comment">     */</span>
00207     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a16">PpiCurrent</a>() != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwndParent)-&gt;ppi) {
00208         <span class="keywordflow">return</span> (HBRUSH)<a class="code" href="../../d4/d1/userk_8h.html#a1632">xxxDefWindowProc</a>(pwndParent, message, (WPARAM)hdc, (LPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndCtl));
00209     }
00210 
00211     hbrush = (HBRUSH)<a class="code" href="../../d4/d1/userk_8h.html#a1579">xxxSendMessage</a>(pwndParent, message, (WPARAM)hdc, (LPARAM)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwndCtl));
00212 
00213     <span class="comment">/*</span>
00214 <span class="comment">     * If the brush returned from the parent is invalid, get a valid brush from</span>
00215 <span class="comment">     * xxxDefWindowProc.</span>
00216 <span class="comment">     */</span>
00217     <span class="keywordflow">if</span> ((hbrush == 0) || !GreValidateServerHandle(hbrush, BRUSH_TYPE)) {
00218 <span class="preprocessor">#if DBG</span>
00219 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (hbrush != 0)
00220             RIPMSG2(RIP_WARNING,
00221                     <span class="stringliteral">"Invalid HBRUSH from WM_CTLCOLOR*** msg %lX brush %lX"</span>, message, hbrush);
00222 <span class="preprocessor">#endif</span>
00223 <span class="preprocessor"></span>        hbrush = (HBRUSH)<a class="code" href="../../d4/d1/userk_8h.html#a1632">xxxDefWindowProc</a>(pwndParent, message,
00224                 (WPARAM)hdc, (LPARAM)pwndCtl);
00225     }
00226 
00227     <span class="keywordflow">return</span> hbrush;
00228 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="w32/ntuser/kernel/random.c::xxxHardErrorControl" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT xxxHardErrorControl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCmd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDESKRESTOREDATA&nbsp;</td>
          <td class="mdname" nowrap> <em>pdrdRestore</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00276">276</a> of file <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html">w32/ntuser/kernel/random.c</a>.
<p>
References <a class="el" href="../../d7/d2/queue_8c-source.html#l02102">AllocQueue()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01838">BEGINATOMICCHECK</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01056">CanForceForeground()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03132">tagQ::cLockCount</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03342">tagTHREADINFO::cQuit</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03131">tagQ::cThreads</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06469">DeferWinEventNotify</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01842">ENDATOMICCHECK</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00956">gbDisconnectHardErrorAttach</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00597">gHardErrorHandler</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00099">gpqForeground</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00092">gptiBlockInput</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00456">grpdeskRitInput</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00934">gspdeskDisconnect</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00936">gspdeskShouldBeForeground</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00095">ISCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d0/obref_8c-source.html#l00542">ObReferenceObjectByHandle()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l04569">POBJECT_NAME</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03319">tagTHREADINFO::ppi</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01987">tagHARDERRORHANDLER::pqAttach</a>, <a class="el" href="../../d0/d8/ntos_8h-source.html#l00089">PsThreadType</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01986">tagHARDERRORHANDLER::pti</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00087">PtiFromThread</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03327">tagTHREADINFO::rpdesk</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02831">TIF_ALLOWFOREGROUNDACTIVATE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03331">tagTHREADINFO::TIF_flags</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l04487">UnlockThread</a>, <a class="el" href="../../d0/d9/ntosdef_8h.html#a76a70">UserMode</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l05804">xxxRestoreCsrssThreadDesktop()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l05713">xxxSetCsrssThreadDesktop()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l05940">zzzAttachToQueue()</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l06473">zzzEndDeferWinEventNotify</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00643">NtUserHardErrorControl()</a>.
<p>
<pre class="fragment"><div>00280 {
00281     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiClient, ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
00282     <a class="code" href="../../d0/d3/structtagDESKTOP.html">PDESKTOP</a> pdesk;
00283     PUNICODE_STRING pstrName;
00284     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00285     <a class="code" href="../../d5/d6/struct__ETHREAD.html">PETHREAD</a> Thread;
00286     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fAllowForeground;
00287 
00288     <span class="comment">/*</span>
00289 <span class="comment">     * turn off BlockInput so the user can respond to the hard error popup</span>
00290 <span class="comment">     */</span>
00291     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a26">gptiBlockInput</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00292 
00293     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>());
00294     <span class="keywordflow">switch</span> (dwCmd) {
00295     <span class="keywordflow">case</span> HardErrorSetup:
00296 
00297         <span class="comment">/*</span>
00298 <span class="comment">         * Don't do it if the system has not been initialized.</span>
00299 <span class="comment">         */</span>
00300         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a176">grpdeskRitInput</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00301             RIPMSG0(RIP_WARNING, <span class="stringliteral">"HardErrorControl: System not initialized"</span>);
00302             <span class="keywordflow">return</span> HEC_ERROR;
00303         }
00304 
00305         <span class="comment">/*</span>
00306 <span class="comment">         * Setup caller as the hard error handler.</span>
00307 <span class="comment">         */</span>
00308         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o0">pti</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00309             RIPMSG1(RIP_WARNING, <span class="stringliteral">"HardErrorControl: pti not NULL %#p"</span>, <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o0">pti</a>);
00310             <span class="keywordflow">return</span> HEC_ERROR;
00311         }
00312 
00313         <span class="comment">/*</span>
00314 <span class="comment">         * Mark the handler as active.</span>
00315 <span class="comment">         */</span>
00316         <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o0">pti</a> = ptiCurrent;
00317 
00318         <span class="comment">/*</span>
00319 <span class="comment">         * Clear any pending quits.</span>
00320 <span class="comment">         */</span>
00321         ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o16">cQuit</a> = 0;
00322 
00323         <span class="keywordflow">break</span>;
00324 
00325     <span class="keywordflow">case</span> HardErrorCleanup:
00326 
00327         <span class="comment">/*</span>
00328 <span class="comment">         * Remove caller as the hard error handler.</span>
00329 <span class="comment">         */</span>
00330         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o0">pti</a> != ptiCurrent)  {
00331             <span class="keywordflow">return</span> HEC_ERROR;
00332         }
00333 
00334         <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o0">pti</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00335         <span class="keywordflow">break</span>;
00336 
00337     <span class="keywordflow">case</span> HardErrorAttachUser:
00338     <span class="keywordflow">case</span> HardErrorInDefDesktop:
00339         <span class="comment">/*</span>
00340 <span class="comment">         * Check for exit conditions. We do not allow attaches to the</span>
00341 <span class="comment">         * disconnect desktop.</span>
00342 <span class="comment">         */</span>
00343         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00344             <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a176">grpdeskRitInput</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) ||
00345 
00346                  ((<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a176">grpdeskRitInput</a> == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a329">gspdeskDisconnect</a>) &amp;&amp;
00347                   (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a330">gspdeskShouldBeForeground</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) ||
00348 
00349                  ((<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a176">grpdeskRitInput</a> == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a329">gspdeskDisconnect</a>) &amp;&amp;
00350                   (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a330">gspdeskShouldBeForeground</a> == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a329">gspdeskDisconnect</a>))) {
00351                 <span class="keywordflow">return</span> HEC_ERROR;
00352             }
00353         }
00354 
00355         <span class="comment">/*</span>
00356 <span class="comment">         * Only attach to a user desktop.</span>
00357 <span class="comment">         */</span>
00358         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>() &amp;&amp; <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a176">grpdeskRitInput</a> == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a329">gspdeskDisconnect</a>) {
00359             pstrName = <a class="code" href="../../d4/d1/userk_8h.html#a522">POBJECT_NAME</a>(gspdeskShouldBeForeground);
00360         } <span class="keywordflow">else</span> {
00361             pstrName = <a class="code" href="../../d4/d1/userk_8h.html#a522">POBJECT_NAME</a>(grpdeskRitInput);
00362         }
00363 
00364         <span class="keywordflow">if</span> (pstrName &amp;&amp; (!_wcsicmp(TEXT(<span class="stringliteral">"Winlogon"</span>), pstrName-&gt;Buffer) ||
00365                 !_wcsicmp(TEXT(<span class="stringliteral">"Disconnect"</span>), pstrName-&gt;Buffer) ||
00366                 !_wcsicmp(TEXT(<span class="stringliteral">"Screen-saver"</span>), pstrName-&gt;Buffer))) {
00367             RIPERR0(ERROR_ACCESS_DENIED, RIP_VERBOSE, <span class="stringliteral">""</span>);
00368             <span class="keywordflow">return</span> HEC_WRONGDESKTOP;
00369         }
00370         <span class="keywordflow">if</span> (dwCmd == HardErrorInDefDesktop) {
00371             <span class="comment">/*</span>
00372 <span class="comment">             * Clear any pending quits.</span>
00373 <span class="comment">             */</span>
00374             ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o16">cQuit</a> = 0;
00375             <span class="keywordflow">return</span> HEC_SUCCESS;
00376         }
00377 
00378 
00379         <span class="comment">/*</span>
00380 <span class="comment">         * Fall through.</span>
00381 <span class="comment">         */</span>
00382 
00383     <span class="keywordflow">case</span> HardErrorAttach:
00384 
00385         <span class="comment">/*</span>
00386 <span class="comment">         * Save a pointer to and prevent destruction of the</span>
00387 <span class="comment">         * current queue.  This will give us a queue to return</span>
00388 <span class="comment">         * to if journalling is occuring when we tear down the</span>
00389 <span class="comment">         * hard error popup.</span>
00390 <span class="comment">         */</span>
00391         <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o1">pqAttach</a> = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>;
00392         (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o23">cLockCount</a>)++;
00393 
00394         <span class="comment">/*</span>
00395 <span class="comment">         * Fall through.</span>
00396 <span class="comment">         */</span>
00397 
00398     <span class="keywordflow">case</span> HardErrorAttachNoQueue:
00399 
00400         <span class="comment">/*</span>
00401 <span class="comment">         * Check for exit conditions. We do not allow attaches to the</span>
00402 <span class="comment">         * disconnect desktop.</span>
00403 <span class="comment">         */</span>
00404         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00405             <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a176">grpdeskRitInput</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) ||
00406 
00407                  ((<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a176">grpdeskRitInput</a> == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a329">gspdeskDisconnect</a>) &amp;&amp;
00408                   (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a330">gspdeskShouldBeForeground</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) ||
00409 
00410                  ((<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a176">grpdeskRitInput</a> == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a329">gspdeskDisconnect</a>) &amp;&amp;
00411                   (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a330">gspdeskShouldBeForeground</a> == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a329">gspdeskDisconnect</a>))) {
00412                 <span class="keywordflow">return</span> HEC_ERROR;
00413             }
00414         }
00415 
00416         <span class="comment">/*</span>
00417 <span class="comment">         * Attach the handler to the current desktop.</span>
00418 <span class="comment">         */</span>
00419         <span class="comment">/*</span>
00420 <span class="comment">         * Don't allow an attach to the disconnected desktop, but</span>
00421 <span class="comment">         * remember this for later when we detach.</span>
00422 <span class="comment">         */</span>
00423         <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a345">gbDisconnectHardErrorAttach</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00424 
00425         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>() &amp;&amp; <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a176">grpdeskRitInput</a> == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a329">gspdeskDisconnect</a>) {
00426             pdesk = <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a330">gspdeskShouldBeForeground</a>;
00427             <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a345">gbDisconnectHardErrorAttach</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00428         } <span class="keywordflow">else</span> {
00429             pdesk = <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a176">grpdeskRitInput</a>;
00430         }
00431 
00432         UserAssert(pdesk != NULL);
00433 
00434         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d4/d1/userk_8h.html#a1829">xxxSetCsrssThreadDesktop</a>(pdesk, pdrdRestore);
00435 
00436         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00437             RIPMSG1(RIP_WARNING, <span class="stringliteral">"HardErrorControl: HardErrorAttachNoQueue failed:%#lx"</span>, Status);
00438             <span class="keywordflow">if</span> (dwCmd != HardErrorAttachNoQueue) {
00439                 <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o1">pqAttach</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00440                 UserAssert(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o23">cLockCount</a>);
00441                 (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o23">cLockCount</a>)--;
00442             }
00443             <span class="keywordflow">return</span> HEC_ERROR;
00444         }
00445 
00446         <span class="comment">/*</span>
00447 <span class="comment">         * Make sure we actually set the pdesk in the current thread</span>
00448 <span class="comment">         */</span>
00449         UserAssert(ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o6">rpdesk</a> != NULL);
00450 
00451         <span class="comment">/*</span>
00452 <span class="comment">         * Determine if this box can come to the foreground.</span>
00453 <span class="comment">         * Let it come to the foreground if it doesn't have a pti</span>
00454 <span class="comment">         * (it might have just failed to load).</span>
00455 <span class="comment">         */</span>
00456         fAllowForeground = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00457         <span class="keywordflow">if</span> (handle != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00458             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d1/obref_8c.html#a4">ObReferenceObjectByHandle</a>(handle,
00459                                                 THREAD_QUERY_INFORMATION,
00460                                                 *PsThreadType,
00461                                                 UserMode,
00462                                                 &amp;Thread,
00463                                                 NULL);
00464             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00465                 ptiClient = <a class="code" href="../../d4/d1/userk_8h.html#a17">PtiFromThread</a>(Thread);
00466                 <span class="keywordflow">if</span> ((ptiClient == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || <a class="code" href="../../d4/d1/userk_8h.html#a1663">CanForceForeground</a>(ptiClient-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o2">ppi</a>)) {
00467                     fAllowForeground = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00468                 }
00469 
00470                 <a class="code" href="../../d4/d1/userk_8h.html#a518">UnlockThread</a>(Thread);
00471 
00472             } <span class="keywordflow">else</span> {
00473                 RIPMSG2(RIP_WARNING, <span class="stringliteral">"HardErrorControl: HardErrorAttach failed to get thread (%#lx) pointer:%#lx"</span>, handle, Status);
00474             }
00475         }
00476 
00477         <span class="keywordflow">if</span> (fAllowForeground) {
00478             ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o9">TIF_flags</a> |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a800">TIF_ALLOWFOREGROUNDACTIVATE</a>;
00479             TAGMSG1(DBGTAG_FOREGROUND, <span class="stringliteral">"xxxHardErrorControl set TIF %#lx"</span>, ptiCurrent);
00480         } <span class="keywordflow">else</span> {
00481             ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o9">TIF_flags</a> &amp;= ~<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a800">TIF_ALLOWFOREGROUNDACTIVATE</a>;
00482             TAGMSG1(DBGTAG_FOREGROUND, <span class="stringliteral">"xxxHardErrorControl clear TIF %#lx"</span>, ptiCurrent);
00483         }
00484 
00485         <span class="keywordflow">break</span>;
00486 
00487     <span class="keywordflow">case</span> HardErrorDetach:
00488 
00489         <span class="comment">/*</span>
00490 <span class="comment">         * xxxSwitchDesktop may have sent WM_QUIT to the msgbox, so</span>
00491 <span class="comment">         * ensure that the quit flag is reset.</span>
00492 <span class="comment">         */</span>
00493         ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o16">cQuit</a> = 0;
00494 
00495         <span class="comment">/*</span>
00496 <span class="comment">         * We will reset the hard-error queue to the pre-allocated</span>
00497 <span class="comment">         * one so if we end up looping back (i.e. from a desktop</span>
00498 <span class="comment">         * switch), we will have a valid queue in case the desktop</span>
00499 <span class="comment">         * was deleted.</span>
00500 <span class="comment">         */</span>
00501         UserAssert(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o1">pqAttach</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o23">cLockCount</a>);
00502         (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o1">pqAttach</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o23">cLockCount</a>)--;
00503 
00504         <a class="code" href="../../d4/d1/userk_8h.html#a614">DeferWinEventNotify</a>();
00505 
00506         <a class="code" href="../../d4/d1/userk_8h.html#a159">BEGINATOMICCHECK</a>();
00507 
00508         <span class="keywordflow">if</span> (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a> != <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o1">pqAttach</a>) {
00509             UserAssert(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o1">pqAttach</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o22">cThreads</a> == 0);
00510             <a class="code" href="../../d4/d1/userk_8h.html#a1204">AllocQueue</a>(NULL, <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o1">pqAttach</a>);
00511             <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o1">pqAttach</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o22">cThreads</a>++;
00512             <a class="code" href="../../d4/d1/userk_8h.html#a1213">zzzAttachToQueue</a>(ptiCurrent, <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o1">pqAttach</a>, NULL, FALSE);
00513         }
00514 
00515         <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o1">pqAttach</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00516 
00517         <a class="code" href="../../d4/d1/userk_8h.html#a163">ENDATOMICCHECK</a>();
00518 
00519         <a class="code" href="../../d4/d1/userk_8h.html#a617">zzzEndDeferWinEventNotify</a>();
00520 
00521         <span class="comment">/*</span>
00522 <span class="comment">         * Fall through.</span>
00523 <span class="comment">         */</span>
00524 
00525     <span class="keywordflow">case</span> HardErrorDetachNoQueue:
00526         <span class="comment">/*</span>
00527 <span class="comment">         * Detach the handler from the desktop and return</span>
00528 <span class="comment">         * status to indicate if a switch has occured.</span>
00529 <span class="comment">         */</span>
00530         pdesk = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o6">rpdesk</a>;
00531         <a class="code" href="../../d4/d1/userk_8h.html#a1830">xxxRestoreCsrssThreadDesktop</a>(pdrdRestore);
00532 
00533         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00534             <span class="comment">/*</span>
00535 <span class="comment">             * The hard error message box gets a desktop switch notification,</span>
00536 <span class="comment">             * so remember that we lied to him and lie (or unlie) to him again.</span>
00537 <span class="comment">             * A desktop switch did occur.</span>
00538 <span class="comment">             */</span>
00539             <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a345">gbDisconnectHardErrorAttach</a>) {
00540                <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a345">gbDisconnectHardErrorAttach</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00541                <span class="keywordflow">return</span> HEC_DESKTOPSWITCH;
00542             }
00543 <span class="preprocessor">#ifdef WAY_LATER</span>
00544 <span class="preprocessor"></span>            <span class="comment">/*</span>
00545 <span class="comment">             * This happened once and caused a trap when a KeyEvent() came in and we</span>
00546 <span class="comment">             * directed it to this queue.  I think this is a MS window that we caught</span>
00547 <span class="comment">             * since we use this so much for license popup's.</span>
00548 <span class="comment">             */</span>
00549             <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a227">gHardErrorHandler</a>.<a class="code" href="../../d2/d6/structtagHARDERRORHANDLER.html#o1">pqAttach</a> == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a29">gpqForeground</a>) {
00550                 <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a29">gpqForeground</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00551             }
00552 <span class="preprocessor">#endif</span>
00553 <span class="preprocessor"></span>        }
00554 
00555         <span class="keywordflow">return</span> (pdesk != <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a176">grpdeskRitInput</a> ? HEC_DESKTOPSWITCH : HEC_SUCCESS);
00556     }
00557     <span class="keywordflow">return</span> HEC_SUCCESS;
00558 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="w32/ntuser/kernel/random.c::xxxUpdateWindows" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxUpdateWindows           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HRGN&nbsp;</td>
          <td class="mdname" nowrap> <em>hrgn</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00025">25</a> of file <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html">w32/ntuser/kernel/random.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d9/d2/movesize_8c-source.html#l01523">xxxUpdateThreadsWindows()</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sprite_8c-source.html#l00467">xxxSetLayeredWindow()</a>.
<p>
<pre class="fragment"><div>00026 {
00027     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00028 
00029     <a class="code" href="../../d4/d1/userk_8h.html#a1943">xxxUpdateThreadsWindows</a>(<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>(), pwnd, hrgn);
00030 
00031     <span class="comment">/*</span>
00032 <span class="comment">     * This function needs to return a value, since it is</span>
00033 <span class="comment">     * called through NtUserCallHwndParam.</span>
00034 <span class="comment">     */</span>
00035     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00036 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a1" doxytag="w32/ntuser/kernel/random.c::abValidateState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> <a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2random_8c.html#a1">abValidateState</a>[NUM_BYTES]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    0,      
    0,      
    0,      
    0,      
    0,      
    <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(WFWIN40COMPAT),
    0,      
    <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(WFNOANIMATE),
    0,      
    <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(WEFEDGEMASK),
    <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(WEFSTATICEDGE),
    0,      
    <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(EFPASSWORD),
    <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(CBFHASSTRINGS | EFREADONLY),
    <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(WFTABSTOP | WFSYSMENU | WFVSCROLL | WFHSCROLL | WFBORDER),

}
</div></pre>
<p>
Definition at line <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00048">48</a> of file <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html">w32/ntuser/kernel/random.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00067">ValidateState()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:26 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

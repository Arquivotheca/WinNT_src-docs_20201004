<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: winloop2.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>winloop2.c File Reference</h1><code>#include "<a class="el" href="../../d1/d3/w32_2ntuser_2kernel_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d9/d6/winloop2_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d7/winloop2_8c.html#a0">IsVSlick</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d7/winloop2_8c.html#a1">Is31TrayWindow</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d7/winloop2_8c.html#a2">IsTrayWindow</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d7/winloop2_8c.html#a3">xxxSetTrayWindow</a> (<a class="el" href="../../d0/d3/structtagDESKTOP.html">PDESKTOP</a> pdesk, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a> pMonitor)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d7/winloop2_8c.html#a4">xxxAddFullScreen</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a> pMonitor)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d7/winloop2_8c.html#a5">xxxRemoveFullScreen</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, <a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a> pMonitor)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a1" doxytag="winloop2.c::Is31TrayWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL Is31TrayWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00040">40</a> of file <a class="el" href="../../d9/d6/winloop2_8c-source.html">winloop2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05845">FHas31TrayStyles</a>, <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00017">IsVSlick()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01747">tagWND::spwndOwner</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02364">WEFTOOLWINDOW</a>.
<p>
Referenced by <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00062">IsTrayWindow()</a>, and <a class="el" href="../../d4/d5/focusact_8c-source.html#l00374">xxxUpdateTray()</a>.
<p>
<pre class="fragment"><div>00041 {
00042     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd2;
00043 
00044     <span class="keywordflow">if</span> (!(pwnd2 = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o5">spwndOwner</a>))
00045         <span class="keywordflow">return</span> (!<a class="code" href="../../d8/d7/winloop2_8c.html#a0">IsVSlick</a>(pwnd)); <span class="comment">// unowned -- do we want you?</span>
00046 
00047     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd2, WEFTOOLWINDOW))
00048         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>); <span class="comment">// owned by a tool window -- we don't want</span>
00049 
00050     <span class="keywordflow">return</span>((<a class="code" href="../../d4/d1/userk_8h.html#a597">FHas31TrayStyles</a>(pwnd2) ? (<a class="code" href="../../d8/d7/winloop2_8c.html#a0">IsVSlick</a>(pwnd2)) : <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>));
00051 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="winloop2.c::IsTrayWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL IsTrayWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00062">62</a> of file <a class="el" href="../../d9/d6/winloop2_8c-source.html">winloop2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05831">FCallHookTray</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05830">FDoTray</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05845">FHas31TrayStyles</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05832">FPostTray</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05844">FTopLevel</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01827">tagWND::head</a>, <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00040">Is31TrayWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01747">tagWND::spwndOwner</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02379">WEFAPPWINDOW</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02534">WEFNOACTIVATE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02364">WEFTOOLWINDOW</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>.
<p>
Referenced by <a class="el" href="../../d5/d8/minmax_8c-source.html#l00324">ParkIcon()</a>, <a class="el" href="../../d8/d8/icons_8c-source.html#l00031">xxxArrangeIconicWindows()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00821">xxxCalcValidRects()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l01591">xxxDestroyWindow()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00027">xxxFlashWindow()</a>, <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00499">xxxHandleOwnerSwitch()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l01329">xxxMinMaximize()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01683">xxxMNPositionHierarchy()</a>, <a class="el" href="../../d2/d1/drawfrm_8c-source.html#l00205">xxxRedrawFrameAndHook()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00766">xxxRedrawTitle()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01235">xxxSetForegroundWindow()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00232">xxxSetSysMenu()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00374">xxxUpdateTray()</a>, and <a class="el" href="../../d3/d7/swp_8c-source.html#l01955">zzzChangeStates()</a>.
<p>
<pre class="fragment"><div>00063 {
00064     <span class="keywordflow">if</span> ((pwnd==<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || !(<a class="code" href="../../d4/d1/userk_8h.html#a592">FDoTray</a>() &amp;&amp; (<a class="code" href="../../d4/d1/userk_8h.html#a593">FCallHookTray</a>() || <a class="code" href="../../d4/d1/userk_8h.html#a594">FPostTray</a>(pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o0">head</a>.rpdesk))) ||
00065             !<a class="code" href="../../d4/d1/userk_8h.html#a596">FTopLevel</a>(pwnd))
00066         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00067 
00068     <span class="comment">// Check for WS_EX_APPWINDOW or WS_EX_TOOLWINDOW "overriding" bits</span>
00069     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFAPPWINDOW))
00070         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00071 
00072     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFTOOLWINDOW))
00073         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00074 
00075     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFNOACTIVATE)) {
00076         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00077     }
00078 
00079     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT)) {
00080         <span class="keywordflow">if</span> (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o5">spwndOwner</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00081             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00082         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o5">spwndOwner</a>, WFWIN40COMPAT))
00083             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00084         <span class="comment">// if this window is owned by a 3.1 window, check it like a 3.1 window</span>
00085     }
00086 
00087     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a597">FHas31TrayStyles</a>(pwnd))
00088         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00089 
00090     <span class="keywordflow">return</span>(<a class="code" href="../../d8/d7/winloop2_8c.html#a1">Is31TrayWindow</a>(pwnd));
00091 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="winloop2.c::IsVSlick" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL IsVSlick           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00017">17</a> of file <a class="el" href="../../d9/d6/winloop2_8c-source.html">winloop2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02201">tagDISPLAYINFO::cMonitors</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00464">gpDispInfo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02206">tagDISPLAYINFO::rcScreen</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00040">Is31TrayWindow()</a>.
<p>
<pre class="fragment"><div>00018 {
00019     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o11">cMonitors</a> == 1 &amp;&amp;
00020         ((<span class="keywordtype">unsigned</span>) pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left &gt; (<span class="keywordtype">unsigned</span>) <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o14">rcScreen</a>.right ) &amp;&amp;
00021         ((<span class="keywordtype">unsigned</span>) pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top  &gt; (<span class="keywordtype">unsigned</span>) <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o14">rcScreen</a>.bottom) &amp;&amp;
00022         (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top == (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o14">rcScreen</a>.bottom+100)) &amp;&amp;
00023         (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left == (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o14">rcScreen</a>.right+100)))
00024     {
00025         <span class="comment">// MUST BE THE ONE AND ONLY V-SLICK</span>
00026         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00027     }
00028 
00029     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00030 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="winloop2.c::xxxAddFullScreen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxAddFullScreen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pMonitor</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00151">151</a> of file <a class="el" href="../../d9/d6/winloop2_8c-source.html">winloop2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02160">tagMONITOR::cFullScreen</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05833">FCallTray</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01827">tagWND::head</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02556">SetWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01747">tagWND::spwndOwner</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05823">STW_SAME</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02421">WFCHILD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02311">WFFULLSCREEN</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>, and <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00100">xxxSetTrayWindow()</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/swp_8c-source.html#l05305">xxxCheckFullScreen()</a>.
<p>
<pre class="fragment"><div>00152 {
00153     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fYielded;
00154 
00155     <a class="code" href="../../d0/d3/structtagDESKTOP.html">PDESKTOP</a> pdesk = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o0">head</a>.rpdesk;
00156 
00157     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00158     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pMonitor);
00159 
00160     <span class="keywordflow">if</span> (pdesk == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00161         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00162 
00163     fYielded = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00164     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFFULLSCREEN) &amp;&amp; <a class="code" href="../../d4/d1/userk_8h.html#a595">FCallTray</a>(pdesk))
00165     {
00166         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a732">SetWF</a>(pwnd, WFFULLSCREEN);
00167 
00168         <span class="keywordflow">if</span> (pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o6">cFullScreen</a>++ == 0) {
00169             <a class="code" href="../../d8/d7/winloop2_8c.html#a3">xxxSetTrayWindow</a>(pdesk, STW_SAME, pMonitor);
00170             fYielded = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00171         }
00172 
00173         pwnd = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o5">spwndOwner</a>;
00174         <span class="keywordflow">if</span> (    pwnd &amp;&amp;
00175                 !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFCHILD) &amp;&amp;
00176                 pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.right == 0 &amp;&amp;
00177                 pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left == 0 &amp;&amp;
00178                 !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVISIBLE)) {
00179 
00180             <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
00181             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwnd, &amp;tlpwnd);
00182             <span class="keywordflow">if</span> (<a class="code" href="../../d8/d7/winloop2_8c.html#a4">xxxAddFullScreen</a>(pwnd, pMonitor)) {
00183                 fYielded = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00184             }
00185 
00186             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
00187         }
00188     }
00189 
00190     <span class="keywordflow">return</span> fYielded;
00191 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="winloop2.c::xxxRemoveFullScreen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxRemoveFullScreen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pMonitor</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00205">205</a> of file <a class="el" href="../../d9/d6/winloop2_8c-source.html">winloop2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02160">tagMONITOR::cFullScreen</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02557">ClrWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05833">FCallTray</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01827">tagWND::head</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05823">STW_SAME</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02311">WFFULLSCREEN</a>, and <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00100">xxxSetTrayWindow()</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/swp_8c-source.html#l05305">xxxCheckFullScreen()</a>, and <a class="el" href="../../d5/d7/createw_8c-source.html#l02218">xxxFreeWindow()</a>.
<p>
<pre class="fragment"><div>00206 {
00207     <a class="code" href="../../d0/d3/structtagDESKTOP.html">PDESKTOP</a> pdesk = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o0">head</a>.rpdesk;
00208     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fYielded;
00209 
00210     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00211     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pMonitor);
00212 
00213     <span class="keywordflow">if</span> (pdesk == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00214         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00215 
00216     fYielded = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00217     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFFULLSCREEN) &amp;&amp; <a class="code" href="../../d4/d1/userk_8h.html#a595">FCallTray</a>(pdesk)) {
00218         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a733">ClrWF</a>(pwnd, WFFULLSCREEN);
00219 
00220         <span class="keywordflow">if</span> (--pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o6">cFullScreen</a> == 0) {
00221             <a class="code" href="../../d8/d7/winloop2_8c.html#a3">xxxSetTrayWindow</a>(pdesk, STW_SAME, pMonitor);
00222             fYielded = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00223         }
00224 
00225         <span class="comment">/*</span>
00226 <span class="comment">         * (adams): Remove this assertion temporarily while I work on</span>
00227 <span class="comment">         * a fix for the problem.</span>
00228 <span class="comment">         *</span>
00229 <span class="comment">         * UserAssert(pMonitor-&gt;cFullScreen &gt;= 0);</span>
00230 <span class="comment">         */</span>
00231     }
00232 
00233     <span class="keywordflow">return</span> fYielded;
00234 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="winloop2.c::xxxSetTrayWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxSetTrayWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d3/structtagDESKTOP.html">PDESKTOP</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pdesk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pMonitor</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00100">100</a> of file <a class="el" href="../../d9/d6/winloop2_8c-source.html">winloop2.c</a>.
<p>
References <a class="el" href="../../d0/d1/mmrtl_8c-source.html#l00426">_MonitorFromWindow()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02160">tagMONITOR::cFullScreen</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05831">FCallHookTray</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05832">FPostTray</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02604">GetPrimaryMonitor()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00367">Lock</a>, <a class="el" href="../../d5/d4/rare_8c-source.html#l03719">PostShellHookMessages()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02659">tagDESKTOP::spwndTray</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05823">STW_SAME</a>, and <a class="el" href="../../d2/d1/hooks_8c-source.html#l01246">xxxCallHook()</a>.
<p>
Referenced by <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00151">xxxAddFullScreen()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l04773">xxxEndDeferWindowPosEx()</a>, <a class="el" href="../../d9/d6/winloop2_8c-source.html#l00205">xxxRemoveFullScreen()</a>, and <a class="el" href="../../d4/d5/focusact_8c-source.html#l00374">xxxUpdateTray()</a>.
<p>
<pre class="fragment"><div>00101 {
00102     HWND hwnd;
00103 
00104     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pMonitor);
00105 
00106     <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d1/userk_8h.html#a591">STW_SAME</a>) {
00107         pwnd = pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o12">spwndTray</a>;
00108         hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwnd);
00109     } <span class="keywordflow">else</span> {
00110         <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00111         hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pwnd);
00112         <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;(pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o12">spwndTray</a>), pwnd);
00113     }
00114 
00115     <span class="keywordflow">if</span> (!pMonitor) {
00116         <span class="keywordflow">if</span> (pwnd) {
00117             pMonitor = <a class="code" href="../../d9/d1/mmrtl_8c.html#a8">_MonitorFromWindow</a>(pwnd, MONITOR_DEFAULTTOPRIMARY);
00118         } <span class="keywordflow">else</span> {
00119             pMonitor = <a class="code" href="../../d6/d0/usercli_8h.html#a793">GetPrimaryMonitor</a>();
00120         }
00121     }
00122 
00123     <span class="keywordflow">if</span> ( <a class="code" href="../../d4/d1/userk_8h.html#a594">FPostTray</a>(pdesk)) {
00124         <a class="code" href="../../d4/d1/userk_8h.html#a1867">PostShellHookMessages</a>(
00125                 pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o6">cFullScreen</a> ?
00126                         HSHELL_RUDEAPPACTIVATED : HSHELL_WINDOWACTIVATED,
00127                 (LPARAM) hwnd);
00128     }
00129 
00130     <span class="keywordflow">if</span> ( <a class="code" href="../../d4/d1/userk_8h.html#a593">FCallHookTray</a>() ) {
00131         <a class="code" href="../../d4/d1/userk_8h.html#a1521">xxxCallHook</a>(
00132                 HSHELL_WINDOWACTIVATED,
00133                 (WPARAM) hwnd,
00134                 (pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o6">cFullScreen</a> ? 1 : 0),
00135                 WH_SHELL);
00136     }
00137 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:46:09 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: ki.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>ki.h</h1><a href="../../d0/d0/ki_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*++</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1989  Microsoft Corporation</span>
00004 <span class="comment"></span>
00005 <span class="comment">Module Name:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    ki.h</span>
00008 <span class="comment"></span>
00009 <span class="comment">Abstract:</span>
00010 <span class="comment"></span>
00011 <span class="comment">    This module contains the private (internal) header file for the</span>
00012 <span class="comment">    kernel.</span>
00013 <span class="comment"></span>
00014 <span class="comment">Author:</span>
00015 <span class="comment"></span>
00016 <span class="comment">    David N. Cutler (davec) 28-Feb-1989</span>
00017 <span class="comment"></span>
00018 <span class="comment">Revision History:</span>
00019 <span class="comment"></span>
00020 <span class="comment">--*/</span>
00021 
00022 <span class="preprocessor">#ifndef _KI_</span>
00023 <span class="preprocessor"></span><span class="preprocessor">#define _KI_</span>
00024 <span class="preprocessor"></span><span class="preprocessor">#include "<a class="code" href="../../d9/d8/ntos_8h.html">ntos.h</a>"</span>
00025 <span class="preprocessor">#include "stdio.h"</span>
00026 <span class="preprocessor">#include "stdlib.h"</span>
00027 <span class="preprocessor">#include "zwapi.h"</span>
00028 
00029 <span class="comment">//</span>
00030 <span class="comment">// Private (internal) constant definitions.</span>
00031 <span class="comment">//</span>
00032 <span class="comment">// Priority increment value definitions</span>
00033 <span class="comment">//</span>
00034 
<a name="l00035"></a><a class="code" href="../../d0/d0/ki_8h.html#a0">00035</a> <span class="preprocessor">#define ALERT_INCREMENT 2           // Alerted unwait priority increment</span>
<a name="l00036"></a><a class="code" href="../../d0/d0/ki_8h.html#a1">00036</a> <span class="preprocessor"></span><span class="preprocessor">#define BALANCE_INCREMENT 10        // Balance set priority increment</span>
<a name="l00037"></a><a class="code" href="../../d0/d0/ki_8h.html#a2">00037</a> <span class="preprocessor"></span><span class="preprocessor">#define RESUME_INCREMENT 0          // Resume thread priority increment</span>
<a name="l00038"></a><a class="code" href="../../d0/d0/ki_8h.html#a3">00038</a> <span class="preprocessor"></span><span class="preprocessor">#define TIMER_EXPIRE_INCREMENT 0    // Timer expiration priority increment</span>
00039 <span class="preprocessor"></span>
00040 <span class="comment">//</span>
00041 <span class="comment">// Define time critical priority class base.</span>
00042 <span class="comment">//</span>
00043 
<a name="l00044"></a><a class="code" href="../../d0/d0/ki_8h.html#a4">00044</a> <span class="preprocessor">#define TIME_CRITICAL_PRIORITY_BOUND 14</span>
00045 <span class="preprocessor"></span>
00046 <span class="comment">//</span>
00047 <span class="comment">// Define NIL pointer value.</span>
00048 <span class="comment">//</span>
00049 
<a name="l00050"></a><a class="code" href="../../d0/d0/ki_8h.html#a5">00050</a> <span class="preprocessor">#define NIL (PVOID)NULL             // Null pointer to void</span>
00051 <span class="preprocessor"></span>
00052 <span class="comment">//</span>
00053 <span class="comment">// Define macros which are used in the kernel only</span>
00054 <span class="comment">//</span>
00055 <span class="comment">// Clear member in set</span>
00056 <span class="comment">//</span>
00057 
<a name="l00058"></a><a class="code" href="../../d0/d0/ki_8h.html#a6">00058</a> <span class="preprocessor">#define ClearMember(Member, Set) \</span>
00059 <span class="preprocessor">    Set = Set &amp; (~(1 &lt;&lt; (Member)))</span>
00060 <span class="preprocessor"></span>
00061 <span class="comment">//</span>
00062 <span class="comment">// Set member in set</span>
00063 <span class="comment">//</span>
00064 
<a name="l00065"></a><a class="code" href="../../d0/d0/ki_8h.html#a7">00065</a> <span class="preprocessor">#define SetMember(Member, Set) \</span>
00066 <span class="preprocessor">    Set = Set | (1 &lt;&lt; (Member))</span>
00067 <span class="preprocessor"></span>
<a name="l00068"></a><a class="code" href="../../d0/d0/ki_8h.html#a8">00068</a> <span class="preprocessor">#define FindFirstSetLeftMember(Set, Member) {                          \</span>
00069 <span class="preprocessor">    ULONG _Bit;                                                        \</span>
00070 <span class="preprocessor">    ULONG _Mask;                                                       \</span>
00071 <span class="preprocessor">    ULONG _Offset = 16;                                                \</span>
00072 <span class="preprocessor">    if ((_Mask = Set &gt;&gt; 16) == 0) {                                    \</span>
00073 <span class="preprocessor">        _Offset = 0;                                                   \</span>
00074 <span class="preprocessor">        _Mask = Set;                                                   \</span>
00075 <span class="preprocessor">    }                                                                  \</span>
00076 <span class="preprocessor">    if (_Mask &gt;&gt; 8) {                                                  \</span>
00077 <span class="preprocessor">        _Offset += 8;                                                  \</span>
00078 <span class="preprocessor">    }                                                                  \</span>
00079 <span class="preprocessor">    if ((_Bit = Set &gt;&gt; _Offset) &amp; 0xf0) {                              \</span>
00080 <span class="preprocessor">        _Bit &gt;&gt;= 4;                                                    \</span>
00081 <span class="preprocessor">        _Offset += 4;                                                  \</span>
00082 <span class="preprocessor">    }                                                                  \</span>
00083 <span class="preprocessor">    *(Member) = KiFindLeftNibbleBitTable[_Bit] + _Offset;              \</span>
00084 <span class="preprocessor">}</span>
00085 <span class="preprocessor"></span>
00086 <span class="comment">//</span>
00087 <span class="comment">// Lock and unlock APC queue lock.</span>
00088 <span class="comment">//</span>
00089 
00090 <span class="preprocessor">#if defined(NT_UP)</span>
00091 <span class="preprocessor"></span><span class="preprocessor">#define KiLockApcQueue(Thread, OldIrql) \</span>
00092 <span class="preprocessor">    *(OldIrql) = KeRaiseIrqlToSynchLevel()</span>
00093 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00094"></a><a class="code" href="../../d0/d0/ki_8h.html#a9">00094</a> <span class="preprocessor"></span><span class="preprocessor">#define KiLockApcQueue(Thread, OldIrql) \</span>
00095 <span class="preprocessor">    *(OldIrql) = KeAcquireSpinLockRaiseToSynch(&amp;(Thread)-&gt;ApcQueueLock)</span>
00096 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00097 <span class="preprocessor"></span>
00098 <span class="preprocessor">#if defined(NT_UP)</span>
00099 <span class="preprocessor"></span><span class="preprocessor">#define KiUnlockApcQueue(Thread, OldIrql) KeLowerIrql((OldIrql))</span>
00100 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00101"></a><a class="code" href="../../d0/d0/ki_8h.html#a10">00101</a> <span class="preprocessor"></span><span class="preprocessor">#define KiUnlockApcQueue(Thread, OldIrql) KeReleaseSpinLock(&amp;(Thread)-&gt;ApcQueueLock, (OldIrql))</span>
00102 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00103 <span class="preprocessor"></span>
00104 <span class="comment">//</span>
00105 <span class="comment">// Lock and unlock context swap lock.</span>
00106 <span class="comment">//</span>
00107 
00108 <span class="preprocessor">#if defined(_ALPHA_) || defined(_X86_)</span>
00109 <span class="preprocessor"></span>
00110 <span class="preprocessor">#define KiLockContextSwap(OldIrql) \</span>
00111 <span class="preprocessor">    *(OldIrql) = KeAcquireQueuedSpinLockRaiseToSynch(LockQueueContextSwapLock)</span>
00112 <span class="preprocessor"></span>
00113 <span class="preprocessor">#define KiUnlockContextSwap(OldIrql) \</span>
00114 <span class="preprocessor">    KeReleaseQueuedSpinLock(LockQueueContextSwapLock, OldIrql)</span>
00115 <span class="preprocessor"></span>
00116 <span class="preprocessor">#else</span>
00117 <span class="preprocessor"></span>
00118 <span class="preprocessor">#if defined(NT_UP)</span>
00119 <span class="preprocessor"></span>
00120 <span class="preprocessor">#define KiLockContextSwap(OldIrql) \</span>
00121 <span class="preprocessor">    *(OldIrql) = KeRaiseIrqlToSynchLevel()</span>
00122 <span class="preprocessor"></span>
00123 <span class="preprocessor">#define KiUnlockContextSwap(OldIrql) \</span>
00124 <span class="preprocessor">    KeLowerIrql((OldIrql))</span>
00125 <span class="preprocessor"></span>
00126 <span class="preprocessor">#else</span>
00127 <span class="preprocessor"></span>
<a name="l00128"></a><a class="code" href="../../d0/d0/ki_8h.html#a11">00128</a> <span class="preprocessor">#define KiLockContextSwap(OldIrql) \</span>
00129 <span class="preprocessor">    *(OldIrql) = KeAcquireSpinLockRaiseToSynch(&amp;KiContextSwapLock)</span>
00130 <span class="preprocessor"></span>
<a name="l00131"></a><a class="code" href="../../d0/d0/ki_8h.html#a12">00131</a> <span class="preprocessor">#define KiUnlockContextSwap(OldIrql) \</span>
00132 <span class="preprocessor">    KeReleaseSpinLock(&amp;KiContextSwapLock, (OldIrql))</span>
00133 <span class="preprocessor"></span>
00134 <span class="preprocessor">#endif</span>
00135 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00136 <span class="preprocessor"></span>
00137 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00138 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00139 <a class="code" href="../../d0/d0/ki_8h.html#a84">KiUnlockDispatcherDatabase</a> (
00140     IN KIRQL OldIrql
00141     );
00142 
00143 LOGICAL
00144 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00145 <a class="code" href="../../d0/d0/ki_8h.html#a85">KiTryToAcquireQueuedSpinLock</a> (
00146     IN <a class="code" href="../../d0/d8/struct__KSPIN__LOCK__QUEUE.html">PKSPIN_LOCK_QUEUE</a> QueuedLock
00147     );
00148 
<a name="l00149"></a><a class="code" href="../../d0/d0/ki_8h.html#a13">00149</a> <span class="preprocessor">#define KiQueuedSpinLockContext(n)  (&amp;(KeGetCurrentPrcb()-&gt;LockQueue[n]))</span>
00150 <span class="preprocessor"></span>
00151 
00152 <span class="comment">// VOID</span>
00153 <span class="comment">// KiBoostPriorityThread (</span>
00154 <span class="comment">//    IN PKTHREAD Thread,</span>
00155 <span class="comment">//    IN KPRIORITY Increment</span>
00156 <span class="comment">//    )</span>
00157 <span class="comment">//</span>
00158 <span class="comment">//*++</span>
00159 <span class="comment">//</span>
00160 <span class="comment">// Routine Description:</span>
00161 <span class="comment">//</span>
00162 <span class="comment">//    This function boosts the priority of the specified thread using</span>
00163 <span class="comment">//    the same algorithm used when a thread gets a boost from a wait</span>
00164 <span class="comment">//    operation.</span>
00165 <span class="comment">//</span>
00166 <span class="comment">// Arguments:</span>
00167 <span class="comment">//</span>
00168 <span class="comment">//    Thread  - Supplies a pointer to a dispatcher object of type thread.</span>
00169 <span class="comment">//</span>
00170 <span class="comment">//    Increment - Supplies the priority increment that is to be applied to</span>
00171 <span class="comment">//        the thread's priority.</span>
00172 <span class="comment">//</span>
00173 <span class="comment">// Return Value:</span>
00174 <span class="comment">//</span>
00175 <span class="comment">//    None.</span>
00176 <span class="comment">//</span>
00177 <span class="comment">//--*</span>
00178 
<a name="l00179"></a><a class="code" href="../../d0/d0/ki_8h.html#a14">00179</a> <span class="preprocessor">#define KiBoostPriorityThread(Thread, Increment) {              \</span>
00180 <span class="preprocessor">    KPRIORITY NewPriority;                                      \</span>
00181 <span class="preprocessor">    PKPROCESS Process;                                          \</span>
00182 <span class="preprocessor">                                                                \</span>
00183 <span class="preprocessor">    if ((Thread)-&gt;Priority &lt; LOW_REALTIME_PRIORITY) {           \</span>
00184 <span class="preprocessor">        if ((Thread)-&gt;PriorityDecrement == 0) {                 \</span>
00185 <span class="preprocessor">            NewPriority = (Thread)-&gt;BasePriority + (Increment); \</span>
00186 <span class="preprocessor">            if (NewPriority &gt; (Thread)-&gt;Priority) {             \</span>
00187 <span class="preprocessor">                if (NewPriority &gt;= LOW_REALTIME_PRIORITY) {     \</span>
00188 <span class="preprocessor">                    NewPriority = LOW_REALTIME_PRIORITY - 1;    \</span>
00189 <span class="preprocessor">                }                                               \</span>
00190 <span class="preprocessor">                                                                \</span>
00191 <span class="preprocessor">                Process = (Thread)-&gt;ApcState.Process;           \</span>
00192 <span class="preprocessor">                (Thread)-&gt;Quantum = Process-&gt;ThreadQuantum;     \</span>
00193 <span class="preprocessor">                KiSetPriorityThread((Thread), NewPriority);     \</span>
00194 <span class="preprocessor">            }                                                   \</span>
00195 <span class="preprocessor">        }                                                       \</span>
00196 <span class="preprocessor">    }                                                           \</span>
00197 <span class="preprocessor">}</span>
00198 <span class="preprocessor"></span>
00199 <span class="comment">// VOID</span>
00200 <span class="comment">// KiInsertWaitList (</span>
00201 <span class="comment">//    IN KPROCESSOR_MODE WaitMode,</span>
00202 <span class="comment">//    IN PKTHREAD Thread</span>
00203 <span class="comment">//    )</span>
00204 <span class="comment">//</span>
00205 <span class="comment">//*++</span>
00206 <span class="comment">//</span>
00207 <span class="comment">// Routine Description:</span>
00208 <span class="comment">//</span>
00209 <span class="comment">//    This function inserts the specified thread in the appropriate</span>
00210 <span class="comment">//    wait list.</span>
00211 <span class="comment">//</span>
00212 <span class="comment">// Arguments:</span>
00213 <span class="comment">//</span>
00214 <span class="comment">//    WaitMode - Supplies the processor mode of the wait operation.</span>
00215 <span class="comment">//</span>
00216 <span class="comment">//    Thread - Supplies a pointer to a dispatcher object of type</span>
00217 <span class="comment">//        thread.</span>
00218 <span class="comment">//</span>
00219 <span class="comment">// Return Value:</span>
00220 <span class="comment">//</span>
00221 <span class="comment">//    None.</span>
00222 <span class="comment">//</span>
00223 <span class="comment">//--*</span>
00224 
<a name="l00225"></a><a class="code" href="../../d0/d0/ki_8h.html#a15">00225</a> <span class="preprocessor">#define KiInsertWaitList(_WaitMode, _Thread) {                  \</span>
00226 <span class="preprocessor">    PLIST_ENTRY _ListHead;                                      \</span>
00227 <span class="preprocessor">    _ListHead = &amp;KiWaitInListHead;                              \</span>
00228 <span class="preprocessor">    if (((_WaitMode) == KernelMode) ||                          \</span>
00229 <span class="preprocessor">        ((_Thread)-&gt;EnableStackSwap == FALSE) ||                \</span>
00230 <span class="preprocessor">        ((_Thread)-&gt;Priority &gt;= (LOW_REALTIME_PRIORITY + 9))) { \</span>
00231 <span class="preprocessor">        _ListHead = &amp;KiWaitOutListHead;                         \</span>
00232 <span class="preprocessor">    }                                                           \</span>
00233 <span class="preprocessor">    InsertTailList(_ListHead, &amp;(_Thread)-&gt;WaitListEntry);       \</span>
00234 <span class="preprocessor">}</span>
00235 <span class="preprocessor"></span>
00236 <span class="comment">//</span>
00237 <span class="comment">// Private (internal) structure definitions.</span>
00238 <span class="comment">//</span>
00239 <span class="comment">// APC Parameter structure.</span>
00240 <span class="comment">//</span>
00241 
<a name="l00242"></a><a class="code" href="../../d2/d5/struct__KAPC__RECORD.html">00242</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d2/d5/struct__KAPC__RECORD.html">_KAPC_RECORD</a> {
<a name="l00243"></a><a class="code" href="../../d2/d5/struct__KAPC__RECORD.html#o0">00243</a>     <a class="code" href="../../d0/d9/ntosdef_8h.html#a41">PKNORMAL_ROUTINE</a> <a class="code" href="../../d2/d5/struct__KAPC__RECORD.html#o0">NormalRoutine</a>;
<a name="l00244"></a><a class="code" href="../../d2/d5/struct__KAPC__RECORD.html#o1">00244</a>     PVOID <a class="code" href="../../d2/d5/struct__KAPC__RECORD.html#o1">NormalContext</a>;
<a name="l00245"></a><a class="code" href="../../d2/d5/struct__KAPC__RECORD.html#o2">00245</a>     PVOID <a class="code" href="../../d2/d5/struct__KAPC__RECORD.html#o2">SystemArgument1</a>;
<a name="l00246"></a><a class="code" href="../../d2/d5/struct__KAPC__RECORD.html#o3">00246</a>     PVOID <a class="code" href="../../d2/d5/struct__KAPC__RECORD.html#o3">SystemArgument2</a>;
00247 } <a class="code" href="../../d2/d5/struct__KAPC__RECORD.html">KAPC_RECORD</a>, *<a class="code" href="../../d2/d5/struct__KAPC__RECORD.html">PKAPC_RECORD</a>;
00248 
00249 <span class="comment">//</span>
00250 <span class="comment">// Executive initialization.</span>
00251 <span class="comment">//</span>
00252 
00253 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00254 <a class="code" href="../../d0/d0/ki_8h.html#a86">ExpInitializeExecutive</a> (
00255     IN ULONG Number,
00256     IN <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock
00257     );
00258 
00259 <span class="comment">//</span>
00260 <span class="comment">// Kernel executive object function definitions.</span>
00261 <span class="comment">//</span>
00262 
00263 BOOLEAN
00264 <a class="code" href="../../d0/d0/ki_8h.html#a87">KiChannelInitialization</a> (
00265     VOID
00266     );
00267 
00268 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00269 <a class="code" href="../../d0/d0/ki_8h.html#a88">KiRundownChannel</a> (
00270     VOID
00271     );
00272 
00273 <span class="comment">//</span>
00274 <span class="comment">// Interprocessor interrupt function definitions.</span>
00275 <span class="comment">//</span>
00276 <span class="comment">// Define immediate interprocessor commands.</span>
00277 <span class="comment">//</span>
00278 
<a name="l00279"></a><a class="code" href="../../d0/d0/ki_8h.html#a16">00279</a> <span class="preprocessor">#define IPI_APC 1                       // APC interrupt request</span>
<a name="l00280"></a><a class="code" href="../../d0/d0/ki_8h.html#a17">00280</a> <span class="preprocessor"></span><span class="preprocessor">#define IPI_DPC 2                       // DPC interrupt request</span>
<a name="l00281"></a><a class="code" href="../../d0/d0/ki_8h.html#a18">00281</a> <span class="preprocessor"></span><span class="preprocessor">#define IPI_FREEZE 4                    // freeze execution request</span>
<a name="l00282"></a><a class="code" href="../../d0/d0/ki_8h.html#a19">00282</a> <span class="preprocessor"></span><span class="preprocessor">#define IPI_PACKET_READY 8              // packet ready request</span>
<a name="l00283"></a><a class="code" href="../../d0/d0/ki_8h.html#a20">00283</a> <span class="preprocessor"></span><span class="preprocessor">#define IPI_SYNCH_REQUEST 0x10          // synchronous Reverse Stall packet</span>
00284 <span class="preprocessor"></span>
00285 <span class="comment">//</span>
00286 <span class="comment">// Define interprocess interrupt types.</span>
00287 <span class="comment">//</span>
00288 
<a name="l00289"></a><a class="code" href="../../d0/d0/ki_8h.html#a32">00289</a> <span class="keyword">typedef</span> ULONG <a class="code" href="../../d0/d0/ki_8h.html#a32">KIPI_REQUEST</a>;
00290 
00291 <span class="keyword">typedef</span>
00292 ULONG_PTR
<a name="l00293"></a><a class="code" href="../../d0/d0/ki_8h.html#a33">00293</a> (*PKIPI_BROADCAST_WORKER)(
00294     IN ULONG_PTR Argument
00295     );
00296 
00297 <span class="preprocessor">#if NT_INST</span>
00298 <span class="preprocessor"></span>
00299 <span class="preprocessor">#define IPI_INSTRUMENT_COUNT(a,b) KiIpiCounts[a].b++;</span>
00300 <span class="preprocessor"></span>
00301 <span class="preprocessor">#else</span>
00302 <span class="preprocessor"></span>
<a name="l00303"></a><a class="code" href="../../d0/d0/ki_8h.html#a21">00303</a> <span class="preprocessor">#define IPI_INSTRUMENT_COUNT(a,b)</span>
00304 <span class="preprocessor"></span>
00305 <span class="preprocessor">#endif</span>
00306 <span class="preprocessor"></span>
00307 <span class="comment">//</span>
00308 <span class="comment">// Define interprocessor interrupt function prototypes.</span>
00309 <span class="comment">//</span>
00310 
00311 ULONG_PTR
00312 <a class="code" href="../../d2/d1/xipi_8c.html#a1">KiIpiGenericCall</a> (
00313     IN PKIPI_BROADCAST_WORKER BroadcastFunction,
00314     IN ULONG_PTR Context
00315     );
00316 
00317 <span class="preprocessor">#if defined(_ALPHA_) || defined(_IA64_)</span>
00318 <span class="preprocessor"></span>
00319 ULONG
00320 <a class="code" href="../../d9/d3/mpipi_8c.html#a4">KiIpiProcessRequests</a> (
00321     VOID
00322     );
00323 
00324 <span class="preprocessor">#endif</span>
00325 <span class="preprocessor"></span>
00326 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00327 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00328 <a class="code" href="../../d0/d0/ki_8h.html#a90">KiIpiSend</a> (
00329     IN KAFFINITY TargetProcessors,
00330     IN KIPI_REQUEST Request
00331     );
00332 
00333 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00334 <a class="code" href="../../d0/d0/ki_8h.html#a91">KiIpiSendPacket</a> (
00335     IN KAFFINITY TargetProcessors,
00336     IN PKIPI_WORKER WorkerFunction,
00337     IN PVOID Parameter1,
00338     IN PVOID Parameter2,
00339     IN PVOID Parameter3
00340     );
00341 
00342 <span class="comment">// begin_nthal</span>
00343 
00344 BOOLEAN
00345 <a class="code" href="../../d9/d6/ppc_2ipi_8c.html#a4">KiIpiServiceRoutine</a> (
00346     IN <span class="keyword">struct</span> _KTRAP_FRAME *TrapFrame,
00347     IN <span class="keyword">struct</span> _KEXCEPTION_FRAME *ExceptionFrame
00348     );
00349 
00350 <span class="comment">// end_nthal</span>
00351 
00352 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00353 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00354 <a class="code" href="../../d0/d0/ki_8h.html#a93">KiIpiSignalPacketDone</a> (
00355     IN PKIPI_CONTEXT SignalDone
00356     );
00357 
00358 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00359 <a class="code" href="../../d2/d1/xipi_8c.html#a2">KiIpiStallOnPacketTargets</a> (
00360     KAFFINITY TargetSet
00361     );
00362 
00363 <span class="preprocessor">#if defined(_X86_)</span>
00364 <span class="preprocessor"></span>
00365 <span class="comment">//</span>
00366 <span class="comment">// VOID</span>
00367 <span class="comment">// KiIpiSendSynchronousPacket (</span>
00368 <span class="comment">//   IN PKPRCB Prcb,</span>
00369 <span class="comment">//   IN KAFFINITY TargetProcessors,</span>
00370 <span class="comment">//   IN PKIPI_WORKER WorkerFunction,</span>
00371 <span class="comment">//   IN PVOID Parameter1,</span>
00372 <span class="comment">//   IN PVOID Parameter2,</span>
00373 <span class="comment">//   IN PVOID Parameter3</span>
00374 <span class="comment">//   )</span>
00375 <span class="comment">//</span>
00376 <span class="comment">// Routine Description:</span>
00377 <span class="comment">//</span>
00378 <span class="comment">//   Similar to KiIpiSendPacket except that the pointer to the</span>
00379 <span class="comment">//   originating PRCB (SignalDone) is kept in the global variable</span>
00380 <span class="comment">//   KiSynchPacket and is protected by the context swap lock.  The</span>
00381 <span class="comment">//   actual IPI is sent via KiIpiSend with a request type of</span>
00382 <span class="comment">//   IPI_SYNCH_REQUEST.  This mechanism is used to send IPI's that</span>
00383 <span class="comment">//   (reverse) stall until released by the originator.   This avoids</span>
00384 <span class="comment">//   a deadlock that can occur if two processors are trying to deliver</span>
00385 <span class="comment">//   IPI packets at the same time and one of them is a reverse stall.</span>
00386 <span class="comment">//</span>
00387 
00388 <span class="preprocessor">#define KiIpiSendSynchronousPacket(Prcb,Target,Function,P1,P2,P3)       \</span>
00389 <span class="preprocessor">    {                                                                   \</span>
00390 <span class="preprocessor">        extern PKPRCB KiSynchPacket;                                    \</span>
00391 <span class="preprocessor">                                                                        \</span>
00392 <span class="preprocessor">        Prcb-&gt;CurrentPacket[0] = (PVOID)(P1);                           \</span>
00393 <span class="preprocessor">        Prcb-&gt;CurrentPacket[1] = (PVOID)(P2);                           \</span>
00394 <span class="preprocessor">        Prcb-&gt;CurrentPacket[2] = (PVOID)(P3);                           \</span>
00395 <span class="preprocessor">        Prcb-&gt;TargetSet = (Target);                                     \</span>
00396 <span class="preprocessor">        Prcb-&gt;WorkerRoutine = (Function);                               \</span>
00397 <span class="preprocessor">        KiSynchPacket = (Prcb);                                         \</span>
00398 <span class="preprocessor">        KiIpiSend((Target),IPI_SYNCH_REQUEST);                          \</span>
00399 <span class="preprocessor">    }</span>
00400 <span class="preprocessor"></span>
00401 <span class="preprocessor">#endif</span>
00402 <span class="preprocessor"></span>
00403 <span class="comment">//</span>
00404 <span class="comment">// Private (internal) function definitions.</span>
00405 <span class="comment">//</span>
00406 
00407 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00408 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00409 <a class="code" href="../../d8/d3/queueobj_8c.html#a7">KiActivateWaiterQueue</a> (
00410     IN <a class="code" href="../../d7/d7/struct__KQUEUE.html">PRKQUEUE</a> Queue
00411     );
00412 
00413 BOOLEAN
00414 <a class="code" href="../../d7/d0/ke_2miscc_8c.html#a8">KiAdjustInterruptTime</a> (
00415     IN LONGLONG TimeDelta
00416     );
00417 
00418 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00419 <a class="code" href="../../d0/d0/ki_8h.html#a97">KiApcInterrupt</a> (
00420     VOID
00421     );
00422 
00423 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00424 <a class="code" href="../../d0/d0/ki_8h.html#a98">KiCallUserMode</a> (
00425     IN PVOID *OutputBuffer,
00426     IN PULONG OutputLength
00427     );
00428 
<a name="l00429"></a><a class="code" href="../../d7/d0/structADJUST__INTERRUPT__TIME__CONTEXT.html">00429</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00430"></a><a class="code" href="../../d7/d0/structADJUST__INTERRUPT__TIME__CONTEXT.html#o0">00430</a>     ULONGLONG               Adjustment;
<a name="l00431"></a><a class="code" href="../../d7/d0/structADJUST__INTERRUPT__TIME__CONTEXT.html#o1">00431</a>     LARGE_INTEGER           NewCount;
<a name="l00432"></a><a class="code" href="../../d7/d0/structADJUST__INTERRUPT__TIME__CONTEXT.html#o2">00432</a>     <span class="keyword">volatile</span> LONG           KiNumber;
<a name="l00433"></a><a class="code" href="../../d7/d0/structADJUST__INTERRUPT__TIME__CONTEXT.html#o3">00433</a>     <span class="keyword">volatile</span> LONG           HalNumber;
<a name="l00434"></a><a class="code" href="../../d7/d0/structADJUST__INTERRUPT__TIME__CONTEXT.html#o4">00434</a>     <span class="keyword">volatile</span> LONG           Barrier;
00435 } <a class="code" href="../../d7/d0/structADJUST__INTERRUPT__TIME__CONTEXT.html">ADJUST_INTERRUPT_TIME_CONTEXT</a>, *<a class="code" href="../../d0/d0/ki_8h.html#a34">PADJUST_INTERRUPT_TIME_CONTEXT</a>;
00436 
00437 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00438 <a class="code" href="../../d7/d0/ke_2miscc_8c.html#a9">KiCalibrateTimeAdjustment</a> (
00439     PADJUST_INTERRUPT_TIME_CONTEXT Adjust
00440     );
00441 
00442 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00443 <a class="code" href="../../d0/d0/ki_8h.html#a100">KiChainedDispatch</a> (
00444     VOID
00445     );
00446 
00447 <span class="preprocessor">#if DBG</span>
00448 <span class="preprocessor"></span>
00449 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00450 KiCheckTimerTable (
00451     IN ULARGE_INTEGER SystemTime
00452     );
00453 
00454 <span class="preprocessor">#endif</span>
00455 <span class="preprocessor"></span>
00456 LARGE_INTEGER
00457 <a class="code" href="../../d2/d0/kiinit_8c.html#a2">KiComputeReciprocal</a> (
00458     IN LONG Divisor,
00459     OUT PCCHAR Shift
00460     );
00461 
00462 ULONG
00463 <a class="code" href="../../d0/d0/ki_8h.html#a102">KiComputeTimerTableIndex</a> (
00464     IN LARGE_INTEGER Interval,
00465     IN LARGE_INTEGER CurrentCount,
00466     IN <a class="code" href="../../d3/d8/struct__KTIMER.html">PRKTIMER</a> Timer
00467     );
00468 
00469 PLARGE_INTEGER
00470 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00471 <a class="code" href="../../d1/d7/wait_8c.html#a6">KiComputeWaitInterval</a> (
00472     IN PLARGE_INTEGER OriginalTime,
00473     IN PLARGE_INTEGER DueTime,
00474     IN OUT PLARGE_INTEGER NewTime
00475     );
00476 
00477 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00478 <a class="code" href="../../d5/d4/raisexcp_8c.html#a1">KiContinue</a> (
00479     IN PCONTEXT ContextRecord,
00480     IN PKEXCEPTION_FRAME ExceptionFrame,
00481     IN PKTRAP_FRAME TrapFrame
00482     );
00483 
00484 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00485 <a class="code" href="../../d0/d0/ki_8h.html#a105">KiDeliverApc</a> (
00486     IN KPROCESSOR_MODE PreviousMode,
00487     IN PKEXCEPTION_FRAME ExceptionFrame,
00488     IN PKTRAP_FRAME TrapFrame
00489     );
00490 
00491 BOOLEAN
00492 <a class="code" href="../../d0/d0/ki_8h.html#a106">KiDisableInterrupts</a> (
00493     VOID
00494     );
00495 
00496 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00497 <a class="code" href="../../d0/d0/ki_8h.html#a107">KiRestoreInterrupts</a> (
00498     IN BOOLEAN Enable
00499     );
00500 
00501 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00502 <a class="code" href="../../d2/d9/ppc_2exceptn_8c.html#a11">KiDispatchException</a> (
00503     IN PEXCEPTION_RECORD ExceptionRecord,
00504     IN PKEXCEPTION_FRAME ExceptionFrame,
00505     IN PKTRAP_FRAME TrapFrame,
00506     IN KPROCESSOR_MODE PreviousMode,
00507     IN BOOLEAN FirstChance
00508     );
00509 
00510 <a class="code" href="../../d4/d9/ke_8h.html#a408">KCONTINUE_STATUS</a>
00511 <a class="code" href="../../d0/d0/ki_8h.html#a109">KiSetDebugProcessor</a> (
00512     IN PKTRAP_FRAME TrapFrame,
00513     IN PKEXCEPTION_FRAME ExceptionFrame,
00514     IN KPROCESSOR_MODE PreviousMode
00515     );
00516 
00517 ULONG
00518 <a class="code" href="../../d2/d9/ppc_2exceptn_8c.html#a12">KiCopyInformation</a> (
00519     IN OUT PEXCEPTION_RECORD ExceptionRecord1,
00520     IN PEXCEPTION_RECORD ExceptionRecord2
00521     );
00522 
00523 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00524 <a class="code" href="../../d0/d0/ki_8h.html#a111">KiDispatchInterrupt</a> (
00525     VOID
00526     );
00527 
00528 <a class="code" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a>
00529 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00530 <a class="code" href="../../d0/d2/thredsup_8c.html#a2">KiFindReadyThread</a> (
00531     IN ULONG Processor,
00532     KPRIORITY LowPriority
00533     );
00534 
00535 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00536 <a class="code" href="../../d0/d0/ki_8h.html#a113">KiFloatingDispatch</a> (
00537     VOID
00538     );
00539 
00540 <span class="preprocessor">#if !defined(_IA64_)</span>
00541 <span class="preprocessor"></span>
00542 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00543 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00544 <a class="code" href="../../d0/d0/ki_8h.html#a114">KiFlushSingleTb</a> (
00545     IN BOOLEAN Invalid,
00546     IN PVOID Virtual
00547     );
00548 
00549 <span class="preprocessor">#endif // !_IA64_</span>
00550 <span class="preprocessor"></span>
00551 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00552 <a class="code" href="../../d0/d0/ki_8h.html#a115">KiFlushMultipleTb</a> (
00553     IN BOOLEAN Invalid,
00554     IN PVOID *Virtual,
00555     IN ULONG Count
00556     );
00557 
00558 <span class="preprocessor">#if defined(_ALPHA_)</span>
00559 <span class="preprocessor"></span>
00560 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00561 KiFlushMultipleTb64 (
00562     IN BOOLEAN Invalid,
00563     IN PULONG_PTR Virtual,
00564     IN ULONG Count
00565     );
00566 
00567 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00568 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00569 KiFlushSingleTb64 (
00570     IN BOOLEAN Invalid,
00571     IN ULONG_PTR Virtual
00572     );
00573 
00574 <span class="preprocessor">#endif</span>
00575 <span class="preprocessor"></span>
00576 PULONG
00577 <a class="code" href="../../d0/d0/ki_8h.html#a116">KiGetUserModeStackAddress</a> (
00578     VOID
00579     );
00580 
00581 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00582 <a class="code" href="../../d8/d1/ppc_2thredini_8c.html#a2">KiInitializeContextThread</a> (
00583     IN <a class="code" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a> Thread,
00584     IN PKSYSTEM_ROUTINE SystemRoutine,
00585     IN PKSTART_ROUTINE StartRoutine OPTIONAL,
00586     IN PVOID StartContext OPTIONAL,
00587     IN PCONTEXT ContextFrame OPTIONAL
00588     );
00589 
00590 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00591 <a class="code" href="../../d0/d3/ppc_2initkr_8c.html#a11">KiInitializeKernel</a> (
00592     IN <a class="code" href="../../d5/d7/struct__KPROCESS.html">PKPROCESS</a> Process,
00593     IN <a class="code" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a> Thread,
00594     IN PVOID IdleStack,
00595     IN PKPRCB Prcb,
00596     IN CCHAR Number,
00597     IN <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock
00598     );
00599 
00600 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00601 <a class="code" href="../../d2/d0/kiinit_8c.html#a1">KiInitSystem</a> (
00602     VOID
00603     );
00604 
00605 BOOLEAN
00606 <a class="code" href="../../d0/d0/ki_8h.html#a120">KiInitMachineDependent</a> (
00607     VOID
00608     );
00609 
00610 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00611 <a class="code" href="../../d1/d8/ppc_2apcuser_8c.html#a1">KiInitializeUserApc</a> (
00612     IN PKEXCEPTION_FRAME ExceptionFrame,
00613     IN PKTRAP_FRAME TrapFrame,
00614     IN PKNORMAL_ROUTINE NormalRoutine,
00615     IN PVOID NormalContext,
00616     IN PVOID SystemArgument1,
00617     IN PVOID SystemArgument2
00618     );
00619 
00620 LONG
00621 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00622 <a class="code" href="../../d8/d3/queueobj_8c.html#a8">KiInsertQueue</a> (
00623     IN <a class="code" href="../../d7/d7/struct__KQUEUE.html">PRKQUEUE</a> Queue,
00624     IN PLIST_ENTRY Entry,
00625     IN BOOLEAN Head
00626     );
00627 
00628 BOOLEAN
00629 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00630 <a class="code" href="../../d0/d0/ki_8h.html#a123">KiInsertQueueApc</a> (
00631     IN <a class="code" href="../../d1/d5/struct__KAPC.html">PKAPC</a> Apc,
00632     IN KPRIORITY Increment
00633     );
00634 
00635 LOGICAL
00636 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00637 <a class="code" href="../../d5/d2/timersup_8c.html#a1">KiInsertTreeTimer</a> (
00638     IN <a class="code" href="../../d3/d8/struct__KTIMER.html">PRKTIMER</a> Timer,
00639     IN LARGE_INTEGER Interval
00640     );
00641 
00642 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00643 <a class="code" href="../../d0/d0/ki_8h.html#a125">KiInterruptDispatch</a> (
00644     VOID
00645     );
00646 
00647 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00648 <a class="code" href="../../d0/d0/ki_8h.html#a126">KiInterruptDispatchRaise</a> (
00649     IN <a class="code" href="../../d0/d7/struct__KINTERRUPT.html">PKINTERRUPT</a> Interrupt
00650     );
00651 
00652 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00653 <a class="code" href="../../d0/d0/ki_8h.html#a127">KiInterruptDispatchSame</a> (
00654     IN <a class="code" href="../../d0/d7/struct__KINTERRUPT.html">PKINTERRUPT</a> Interrupt
00655     );
00656 
00657 <span class="preprocessor">#if defined(i386)</span>
00658 <span class="preprocessor"></span>
00659 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00660 <a class="code" href="../../d6/d9/kernlini_8c.html#a57">KiInitializePcr</a> (
00661     IN ULONG Processor,
00662     IN PKPCR    Pcr,
00663     IN PKIDTENTRY Idt,
00664     IN PKGDTENTRY Gdt,
00665     IN PKTSS Tss,
00666     IN <a class="code" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a> Thread,
00667     IN PVOID DpcStack
00668     );
00669 
00670 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00671 KiFlushNPXState (
00672     PFLOATING_SAVE_AREA
00673     );
00674 
00675 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00676 <a class="code" href="../../d9/d1/cyrix_8c.html#a27">Ke386ConfigureCyrixProcessor</a> (
00677     VOID
00678     );
00679 
00680 ULONG
00681 <a class="code" href="../../d2/d9/ppc_2exceptn_8c.html#a12">KiCopyInformation</a> (
00682     IN OUT PEXCEPTION_RECORD ExceptionRecord1,
00683     IN PEXCEPTION_RECORD ExceptionRecord2
00684     );
00685 
00686 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00687 KiSetHardwareTrigger (
00688     VOID
00689     );
00690 
00691 <span class="preprocessor">#ifdef DBGMP</span>
00692 <span class="preprocessor"></span><a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00693 KiPollDebugger (
00694     VOID
00695     );
00696 <span class="preprocessor">#endif</span>
00697 <span class="preprocessor"></span>
00698 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00699 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00700 KiIpiSignalPacketDoneAndStall (
00701     IN PKIPI_CONTEXT Signaldone,
00702     IN ULONG <span class="keyword">volatile</span> *ReverseStall
00703     );
00704 
00705 <span class="preprocessor">#endif</span>
00706 <span class="preprocessor"></span>
00707 
00708 KIRQL
00709 <a class="code" href="../../d0/d0/ki_8h.html#a128">KiLockDeviceQueue</a> (
00710     IN <a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html">PKDEVICE_QUEUE</a> DeviceQueue
00711     );
00712 
00713 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00714 <a class="code" href="../../d0/d0/ki_8h.html#a129">KiPassiveRelease</a> (
00715     VOID
00716     );
00717 
00718 <a class="code" href="../../d1/d8/struct__KTHREAD.html">PRKTHREAD</a>
00719 <a class="code" href="../../d5/d1/dpcsup_8c.html#a3">KiQuantumEnd</a> (
00720     VOID
00721     );
00722 
00723 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00724 <a class="code" href="../../d5/d4/raisexcp_8c.html#a2">KiRaiseException</a> (
00725     IN PEXCEPTION_RECORD ExceptionRecord,
00726     IN PCONTEXT ContextRecord,
00727     IN PKEXCEPTION_FRAME ExceptionFrame,
00728     IN PKTRAP_FRAME TrapFrame,
00729     IN BOOLEAN FirstChance
00730     );
00731 
00732 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00733 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00734 <a class="code" href="../../d0/d2/thredsup_8c.html#a3">KiReadyThread</a> (
00735     IN <a class="code" href="../../d1/d8/struct__KTHREAD.html">PRKTHREAD</a> Thread
00736     );
00737 
00738 LOGICAL
00739 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00740 <a class="code" href="../../d5/d2/timersup_8c.html#a2">KiReinsertTreeTimer</a> (
00741     IN <a class="code" href="../../d3/d8/struct__KTIMER.html">PRKTIMER</a> Timer,
00742     IN ULARGE_INTEGER DueTime
00743     );
00744 
00745 <span class="preprocessor">#if DBG</span>
00746 <span class="preprocessor"></span>
00747 <span class="preprocessor">#define KiRemoveTreeTimer(Timer)               \</span>
00748 <span class="preprocessor">    (Timer)-&gt;Header.Inserted = FALSE;          \</span>
00749 <span class="preprocessor">    RemoveEntryList(&amp;(Timer)-&gt;TimerListEntry); \</span>
00750 <span class="preprocessor">    (Timer)-&gt;TimerListEntry.Flink = NULL;      \</span>
00751 <span class="preprocessor">    (Timer)-&gt;TimerListEntry.Blink = NULL</span>
00752 <span class="preprocessor"></span>
00753 <span class="preprocessor">#else</span>
00754 <span class="preprocessor"></span>
<a name="l00755"></a><a class="code" href="../../d0/d0/ki_8h.html#a22">00755</a> <span class="preprocessor">#define KiRemoveTreeTimer(Timer)               \</span>
00756 <span class="preprocessor">    (Timer)-&gt;Header.Inserted = FALSE;          \</span>
00757 <span class="preprocessor">    RemoveEntryList(&amp;(Timer)-&gt;TimerListEntry)</span>
00758 <span class="preprocessor"></span>
00759 <span class="preprocessor">#endif</span>
00760 <span class="preprocessor"></span>
00761 <span class="preprocessor">#if defined(NT_UP)</span>
00762 <span class="preprocessor"></span>
00763 <span class="preprocessor">#define KiRequestApcInterrupt(Processor) KiRequestSoftwareInterrupt(APC_LEVEL)</span>
00764 <span class="preprocessor"></span>
00765 <span class="preprocessor">#else</span>
00766 <span class="preprocessor"></span>
<a name="l00767"></a><a class="code" href="../../d0/d0/ki_8h.html#a23">00767</a> <span class="preprocessor">#define KiRequestApcInterrupt(Processor)                  \</span>
00768 <span class="preprocessor">    if (KeGetCurrentPrcb()-&gt;Number == (CCHAR)Processor) { \</span>
00769 <span class="preprocessor">        KiRequestSoftwareInterrupt(APC_LEVEL);            \</span>
00770 <span class="preprocessor">    } else {                                              \</span>
00771 <span class="preprocessor">        KiIpiSend((KAFFINITY)(1 &lt;&lt; Processor), IPI_APC);  \</span>
00772 <span class="preprocessor">    }</span>
00773 <span class="preprocessor"></span>
00774 <span class="preprocessor">#endif</span>
00775 <span class="preprocessor"></span>
00776 <span class="preprocessor">#if defined(NT_UP)</span>
00777 <span class="preprocessor"></span>
00778 <span class="preprocessor">#define KiRequestDispatchInterrupt(Processor)</span>
00779 <span class="preprocessor"></span>
00780 <span class="preprocessor">#else</span>
00781 <span class="preprocessor"></span>
<a name="l00782"></a><a class="code" href="../../d0/d0/ki_8h.html#a24">00782</a> <span class="preprocessor">#define KiRequestDispatchInterrupt(Processor)             \</span>
00783 <span class="preprocessor">    if (KeGetCurrentPrcb()-&gt;Number != (CCHAR)Processor) { \</span>
00784 <span class="preprocessor">        KiIpiSend((KAFFINITY)(1 &lt;&lt; Processor), IPI_DPC);  \</span>
00785 <span class="preprocessor">    }</span>
00786 <span class="preprocessor"></span>
00787 <span class="preprocessor">#endif</span>
00788 <span class="preprocessor"></span>
00789 <a class="code" href="../../d1/d8/struct__KTHREAD.html">PRKTHREAD</a>
00790 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00791 <a class="code" href="../../d0/d2/thredsup_8c.html#a4">KiSelectNextThread</a> (
00792     IN <a class="code" href="../../d1/d8/struct__KTHREAD.html">PRKTHREAD</a> Thread
00793     );
00794 
00795 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00796 <a class="code" href="../../d0/d0/ki_8h.html#a134">KiSetSystemTime</a> (
00797     IN PLARGE_INTEGER NewTime,
00798     OUT PLARGE_INTEGER OldTime
00799     );
00800 
00801 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00802 <a class="code" href="../../d0/d2/thredsup_8c.html#a1">KiSuspendNop</a> (
00803     IN <span class="keyword">struct</span> <a class="code" href="../../d1/d5/struct__KAPC.html">_KAPC</a> *Apc,
00804     IN OUT PKNORMAL_ROUTINE *NormalRoutine,
00805     IN OUT PVOID *NormalContext,
00806     IN OUT PVOID *SystemArgument1,
00807     IN OUT PVOID *SystemArgument2
00808     );
00809 
00810 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00811 <a class="code" href="../../d0/d2/thredsup_8c.html#a6">KiSuspendThread</a> (
00812     IN PVOID NormalContext,
00813     IN PVOID SystemArgument1,
00814     IN PVOID SystemArgument2
00815     );
00816 
00817 BOOLEAN
00818 <a class="code" href="../../d0/d0/ki_8h.html#a137">KiSwapProcess</a> (
00819     IN <a class="code" href="../../d5/d7/struct__KPROCESS.html">PKPROCESS</a> NewProcess,
00820     IN <a class="code" href="../../d5/d7/struct__KPROCESS.html">PKPROCESS</a> OldProcess
00821     );
00822 
00823 LONG_PTR
00824 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00825 <a class="code" href="../../d0/d0/ki_8h.html#a138">KiSwapThread</a> (
00826     VOID
00827     );
00828 
00829 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00830 <a class="code" href="../../d0/d0/ki_8h.html#a139">KiThreadStartup</a> (
00831     IN PVOID StartContext
00832     );
00833 
00834 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00835 <a class="code" href="../../d0/d0/ki_8h.html#a140">KiTimerExpiration</a> (
00836     IN <a class="code" href="../../d1/d6/struct__KDPC.html">PKDPC</a> Dpc,
00837     IN PVOID DeferredContext,
00838     IN PVOID SystemArgument1,
00839     IN PVOID SystemArgument2
00840     );
00841 
00842 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00843 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00844 <a class="code" href="../../d0/d0/ki_8h.html#a141">KiTimerListExpire</a> (
00845     IN PLIST_ENTRY ExpiredListHead,
00846     IN KIRQL OldIrql
00847     );
00848 
00849 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00850 <a class="code" href="../../d0/d0/ki_8h.html#a142">KiUnexpectedInterrupt</a> (
00851     VOID
00852     );
00853 
00854 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00855 <a class="code" href="../../d0/d0/ki_8h.html#a143">KiUnlockDeviceQueue</a> (
00856     IN <a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html">PKDEVICE_QUEUE</a> DeviceQueue,
00857     IN KIRQL OldIrql
00858     );
00859 
00860 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00861 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00862 <a class="code" href="../../d2/d7/waitsup_8c.html#a0">KiUnwaitThread</a> (
00863     IN <a class="code" href="../../d1/d8/struct__KTHREAD.html">PRKTHREAD</a> Thread,
00864     IN LONG_PTR WaitStatus,
00865     IN KPRIORITY Increment
00866     );
00867 
00868 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00869 <a class="code" href="../../d0/d0/ki_8h.html#a145">KiUserApcDispatcher</a> (
00870     IN PVOID NormalContext,
00871     IN PVOID SystemArgument1,
00872     IN PVOID SystemArgument2,
00873     IN PKNORMAL_ROUTINE NormalRoutine
00874     );
00875 
00876 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00877 <a class="code" href="../../d0/d0/ki_8h.html#a146">KiUserExceptionDispatcher</a> (
00878     IN PEXCEPTION_RECORD ExceptionRecord,
00879     IN PCONTEXT ContextFrame
00880     );
00881 
00882 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00883 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00884 <a class="code" href="../../d2/d7/waitsup_8c.html#a2">KiWaitSatisfyAll</a> (
00885     IN <a class="code" href="../../d4/d8/struct__KWAIT__BLOCK.html">PRKWAIT_BLOCK</a> WaitBlock
00886     );
00887 
00888 <span class="comment">//</span>
00889 <span class="comment">// VOID</span>
00890 <span class="comment">// FASTCALL</span>
00891 <span class="comment">// KiWaitSatisfyAny (</span>
00892 <span class="comment">//    IN PKMUTANT Object,</span>
00893 <span class="comment">//    IN PKTHREAD Thread</span>
00894 <span class="comment">//    )</span>
00895 <span class="comment">//</span>
00896 <span class="comment">//</span>
00897 <span class="comment">// Routine Description:</span>
00898 <span class="comment">//</span>
00899 <span class="comment">//    This function satisfies a wait for any type of object and performs</span>
00900 <span class="comment">//    any side effects that are necessary.</span>
00901 <span class="comment">//</span>
00902 <span class="comment">// Arguments:</span>
00903 <span class="comment">//</span>
00904 <span class="comment">//    Object - Supplies a pointer to a dispatcher object.</span>
00905 <span class="comment">//</span>
00906 <span class="comment">//    Thread - Supplies a pointer to a dispatcher object of type thread.</span>
00907 <span class="comment">//</span>
00908 <span class="comment">// Return Value:</span>
00909 <span class="comment">//</span>
00910 <span class="comment">//    None.</span>
00911 <span class="comment">//</span>
00912 
<a name="l00913"></a><a class="code" href="../../d0/d0/ki_8h.html#a25">00913</a> <span class="preprocessor">#define KiWaitSatisfyAny(_Object_, _Thread_) {                               \</span>
00914 <span class="preprocessor">    if (((_Object_)-&gt;Header.Type &amp; DISPATCHER_OBJECT_TYPE_MASK) == EventSynchronizationObject) { \</span>
00915 <span class="preprocessor">        (_Object_)-&gt;Header.SignalState = 0;                                  \</span>
00916 <span class="preprocessor">                                                                             \</span>
00917 <span class="preprocessor">    } else if ((_Object_)-&gt;Header.Type == SemaphoreObject) {                 \</span>
00918 <span class="preprocessor">        (_Object_)-&gt;Header.SignalState -= 1;                                 \</span>
00919 <span class="preprocessor">                                                                             \</span>
00920 <span class="preprocessor">    } else if ((_Object_)-&gt;Header.Type == MutantObject) {                    \</span>
00921 <span class="preprocessor">        (_Object_)-&gt;Header.SignalState -= 1;                                 \</span>
00922 <span class="preprocessor">        if ((_Object_)-&gt;Header.SignalState == 0) {                           \</span>
00923 <span class="preprocessor">            (_Thread_)-&gt;KernelApcDisable -= (_Object_)-&gt;ApcDisable;          \</span>
00924 <span class="preprocessor">            (_Object_)-&gt;OwnerThread = (_Thread_);                            \</span>
00925 <span class="preprocessor">            if ((_Object_)-&gt;Abandoned == TRUE) {                             \</span>
00926 <span class="preprocessor">                (_Object_)-&gt;Abandoned = FALSE;                               \</span>
00927 <span class="preprocessor">                (_Thread_)-&gt;WaitStatus = STATUS_ABANDONED;                   \</span>
00928 <span class="preprocessor">            }                                                                \</span>
00929 <span class="preprocessor">                                                                             \</span>
00930 <span class="preprocessor">            InsertHeadList((_Thread_)-&gt;MutantListHead.Blink,                 \</span>
00931 <span class="preprocessor">                           &amp;(_Object_)-&gt;MutantListEntry);                    \</span>
00932 <span class="preprocessor">        }                                                                    \</span>
00933 <span class="preprocessor">    }                                                                        \</span>
00934 <span class="preprocessor">}</span>
00935 <span class="preprocessor"></span>
00936 <span class="comment">//</span>
00937 <span class="comment">// VOID</span>
00938 <span class="comment">// FASTCALL</span>
00939 <span class="comment">// KiWaitSatisfyMutant (</span>
00940 <span class="comment">//    IN PKMUTANT Object,</span>
00941 <span class="comment">//    IN PKTHREAD Thread</span>
00942 <span class="comment">//    )</span>
00943 <span class="comment">//</span>
00944 <span class="comment">//</span>
00945 <span class="comment">// Routine Description:</span>
00946 <span class="comment">//</span>
00947 <span class="comment">//    This function satisfies a wait for a mutant object.</span>
00948 <span class="comment">//</span>
00949 <span class="comment">// Arguments:</span>
00950 <span class="comment">//</span>
00951 <span class="comment">//    Object - Supplies a pointer to a dispatcher object.</span>
00952 <span class="comment">//</span>
00953 <span class="comment">//    Thread - Supplies a pointer to a dispatcher object of type thread.</span>
00954 <span class="comment">//</span>
00955 <span class="comment">// Return Value:</span>
00956 <span class="comment">//</span>
00957 <span class="comment">//    None.</span>
00958 <span class="comment">//</span>
00959 
<a name="l00960"></a><a class="code" href="../../d0/d0/ki_8h.html#a26">00960</a> <span class="preprocessor">#define KiWaitSatisfyMutant(_Object_, _Thread_) {                            \</span>
00961 <span class="preprocessor">    (_Object_)-&gt;Header.SignalState -= 1;                                     \</span>
00962 <span class="preprocessor">    if ((_Object_)-&gt;Header.SignalState == 0) {                               \</span>
00963 <span class="preprocessor">        (_Thread_)-&gt;KernelApcDisable -= (_Object_)-&gt;ApcDisable;              \</span>
00964 <span class="preprocessor">        (_Object_)-&gt;OwnerThread = (_Thread_);                                \</span>
00965 <span class="preprocessor">        if ((_Object_)-&gt;Abandoned == TRUE) {                                 \</span>
00966 <span class="preprocessor">            (_Object_)-&gt;Abandoned = FALSE;                                   \</span>
00967 <span class="preprocessor">            (_Thread_)-&gt;WaitStatus = STATUS_ABANDONED;                       \</span>
00968 <span class="preprocessor">        }                                                                    \</span>
00969 <span class="preprocessor">                                                                             \</span>
00970 <span class="preprocessor">        InsertHeadList((_Thread_)-&gt;MutantListHead.Blink,                     \</span>
00971 <span class="preprocessor">                       &amp;(_Object_)-&gt;MutantListEntry);                        \</span>
00972 <span class="preprocessor">    }                                                                        \</span>
00973 <span class="preprocessor">}</span>
00974 <span class="preprocessor"></span>
00975 <span class="comment">//</span>
00976 <span class="comment">// VOID</span>
00977 <span class="comment">// FASTCALL</span>
00978 <span class="comment">// KiWaitSatisfyOther (</span>
00979 <span class="comment">//    IN PKMUTANT Object</span>
00980 <span class="comment">//    )</span>
00981 <span class="comment">//</span>
00982 <span class="comment">//</span>
00983 <span class="comment">// Routine Description:</span>
00984 <span class="comment">//</span>
00985 <span class="comment">//    This function satisfies a wait for any type of object except a mutant</span>
00986 <span class="comment">//    and performs any side effects that are necessary.</span>
00987 <span class="comment">//</span>
00988 <span class="comment">// Arguments:</span>
00989 <span class="comment">//</span>
00990 <span class="comment">//    Object - Supplies a pointer to a dispatcher object.</span>
00991 <span class="comment">//</span>
00992 <span class="comment">// Return Value:</span>
00993 <span class="comment">//</span>
00994 <span class="comment">//    None.</span>
00995 <span class="comment">//</span>
00996 
<a name="l00997"></a><a class="code" href="../../d0/d0/ki_8h.html#a27">00997</a> <span class="preprocessor">#define KiWaitSatisfyOther(_Object_) {                                       \</span>
00998 <span class="preprocessor">    if (((_Object_)-&gt;Header.Type &amp; DISPATCHER_OBJECT_TYPE_MASK) == EventSynchronizationObject) { \</span>
00999 <span class="preprocessor">        (_Object_)-&gt;Header.SignalState = 0;                                  \</span>
01000 <span class="preprocessor">                                                                             \</span>
01001 <span class="preprocessor">    } else if ((_Object_)-&gt;Header.Type == SemaphoreObject) {                 \</span>
01002 <span class="preprocessor">        (_Object_)-&gt;Header.SignalState -= 1;                                 \</span>
01003 <span class="preprocessor">                                                                             \</span>
01004 <span class="preprocessor">    }                                                                        \</span>
01005 <span class="preprocessor">}</span>
01006 <span class="preprocessor"></span>
01007 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01008 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01009 <a class="code" href="../../d2/d7/waitsup_8c.html#a3">KiWaitTest</a> (
01010     IN PVOID Object,
01011     IN KPRIORITY Increment
01012     );
01013 
01014 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01015 <a class="code" href="../../d0/d0/ki_8h.html#a149">KiFreezeTargetExecution</a> (
01016     IN PKTRAP_FRAME TrapFrame,
01017     IN PKEXCEPTION_FRAME ExceptionFrame
01018     );
01019 
01020 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01021 <a class="code" href="../../d0/d0/ki_8h.html#a150">KiPollFreezeExecution</a> (
01022     VOID
01023     );
01024 
01025 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01026 <a class="code" href="../../d9/d6/ppc_2ipi_8c.html#a3">KiSaveProcessorState</a> (
01027     IN PKTRAP_FRAME TrapFrame,
01028     IN PKEXCEPTION_FRAME ExceptionFrame
01029     );
01030 
01031 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01032 <a class="code" href="../../d9/d6/ppc_2ipi_8c.html#a1">KiSaveProcessorControlState</a> (
01033     IN PKPROCESSOR_STATE ProcessorState
01034     );
01035 
01036 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01037 <a class="code" href="../../d9/d6/ppc_2ipi_8c.html#a2">KiRestoreProcessorState</a> (
01038     IN PKTRAP_FRAME TrapFrame,
01039     IN PKEXCEPTION_FRAME ExceptionFrame
01040     );
01041 
01042 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01043 <a class="code" href="../../d9/d6/ppc_2ipi_8c.html#a0">KiRestoreProcessorControlState</a> (
01044     IN PKPROCESSOR_STATE ProcessorState
01045     );
01046 
01047 <span class="preprocessor">#if defined(_ALPHA_)</span>
01048 <span class="preprocessor"></span>
01049 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01050 KiSynchronizeProcessIds (
01051     VOID
01052     );
01053 
01054 <span class="preprocessor">#endif</span>
01055 <span class="preprocessor"></span>
01056 BOOLEAN
01057 <a class="code" href="../../d0/d0/ki_8h.html#a155">KiTryToAcquireSpinLock</a> (
01058     IN PKSPIN_LOCK SpinLock
01059     );
01060 
01061 <span class="preprocessor">#if defined(_ALPHA_)</span>
01062 <span class="preprocessor"></span>
01063 <span class="comment">//</span>
01064 <span class="comment">// Prototypes for memory barrier instructions</span>
01065 <span class="comment">//</span>
01066 
01067 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01068 KiImb(
01069     VOID
01070     );
01071 
01072 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01073 KiMb(
01074     VOID
01075     );
01076 
01077 <span class="comment">//</span>
01078 <span class="comment">// Functions for enabling/disabling alignment exceptions</span>
01079 <span class="comment">//</span>
01080 <span class="keyword">extern</span> ULONG <a class="code" href="../../d8/d8/alpha_2exceptn_8c.html#a1">KiEnableAlignmentFaultExceptions</a>;
01081 
01082 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01083 <a class="code" href="../../d0/d0/ki_8h.html#a28">KiEnableAlignmentExceptions</a>(
01084     VOID
01085     );
01086 
01087 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01088 <a class="code" href="../../d0/d0/ki_8h.html#a29">KiDisableAlignmentExceptions</a>(
01089     VOID
01090     );
01091 
01092 <span class="preprocessor">#else</span>
01093 <span class="preprocessor"></span>
<a name="l01094"></a><a class="code" href="../../d0/d0/ki_8h.html#a28">01094</a> <span class="preprocessor">#define KiEnableAlignmentExceptions()</span>
<a name="l01095"></a><a class="code" href="../../d0/d0/ki_8h.html#a29">01095</a> <span class="preprocessor"></span><span class="preprocessor">#define KiDisableAlignmentExceptions()</span>
01096 <span class="preprocessor"></span>
01097 <span class="preprocessor">#endif</span>
01098 <span class="preprocessor"></span>
01099 <span class="preprocessor">#endif // _KI_</span>
01100 <span class="preprocessor"></span>
01101 <span class="comment">//</span>
01102 <span class="comment">// External references to private kernel data structures</span>
01103 <span class="comment">//</span>
01104 
01105 <span class="preprocessor">#if DEVL</span>
01106 <span class="preprocessor"></span><span class="keyword">extern</span> PMESSAGE_RESOURCE_DATA  KiBugCodeMessages;
01107 <span class="preprocessor">#endif</span>
01108 <span class="preprocessor"></span>
<a name="l01109"></a><a class="code" href="../../d0/d0/ki_8h.html#a36">01109</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a34">KiDmaIoCoherency</a>;
<a name="l01110"></a><a class="code" href="../../d0/d0/ki_8h.html#a37">01110</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d8/d0/cmdat3_8c.html#a64">KiMaximumDpcQueueDepth</a>;
<a name="l01111"></a><a class="code" href="../../d0/d0/ki_8h.html#a38">01111</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d8/d0/cmdat3_8c.html#a65">KiMinimumDpcRate</a>;
<a name="l01112"></a><a class="code" href="../../d0/d0/ki_8h.html#a39">01112</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d8/d0/cmdat3_8c.html#a66">KiAdjustDpcThreshold</a>;
<a name="l01113"></a><a class="code" href="../../d0/d0/ki_8h.html#a40">01113</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d0/d0/ki_8h.html#a40">KiContextSwapLock</a>;
<a name="l01114"></a><a class="code" href="../../d0/d0/ki_8h.html#a41">01114</a> <span class="keyword">extern</span> <a class="code" href="../../d4/d9/ke_8h.html#a64">PKDEBUG_ROUTINE</a> <a class="code" href="../../d0/d7/kdp_8h.html#a24">KiDebugRoutine</a>;
<a name="l01115"></a><a class="code" href="../../d0/d0/ki_8h.html#a42">01115</a> <span class="keyword">extern</span> <a class="code" href="../../d4/d9/ke_8h.html#a65">PKDEBUG_SWITCH_ROUTINE</a> <a class="code" href="../../d0/d7/kdp_8h.html#a25">KiDebugSwitchRoutine</a>;
<a name="l01116"></a><a class="code" href="../../d0/d0/ki_8h.html#a43">01116</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d5/d9/kernldat_8c.html#a38">KiDispatcherLock</a>;
<a name="l01117"></a><a class="code" href="../../d0/d0/ki_8h.html#a44">01117</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a0">KiDispatcherReadyListHead</a>[MAXIMUM_PRIORITY];
<a name="l01118"></a><a class="code" href="../../d0/d0/ki_8h.html#a45">01118</a> <span class="keyword">extern</span> CCHAR <a class="code" href="../../d8/d0/hivecell_8c.html#a6">KiFindFirstSetLeft</a>[256];
<a name="l01119"></a><a class="code" href="../../d0/d0/ki_8h.html#a46">01119</a> <span class="keyword">extern</span> <a class="code" href="../../d8/d6/struct__CALL__PERFORMANCE__DATA.html">CALL_PERFORMANCE_DATA</a> <a class="code" href="../../d0/d0/ki_8h.html#a46">KiFlushSingleCallData</a>;
<a name="l01120"></a><a class="code" href="../../d0/d0/ki_8h.html#a47">01120</a> <span class="keyword">extern</span> ULONG_PTR <a class="code" href="../../d4/d4/alpha_2splocks_8c.html#a12">KiHardwareTrigger</a>;
<a name="l01121"></a><a class="code" href="../../d0/d0/ki_8h.html#a48">01121</a> <span class="keyword">extern</span> KAFFINITY <a class="code" href="../../d5/d9/kernldat_8c.html#a1">KiIdleSummary</a>;
<a name="l01122"></a><a class="code" href="../../d0/d0/ki_8h.html#a49">01122</a> <span class="keyword">extern</span> UCHAR <a class="code" href="../../d5/d9/kernldat_8c.html#a45">KiFindLeftNibbleBitTable</a>[];
<a name="l01123"></a><a class="code" href="../../d0/d0/ki_8h.html#a50">01123</a> <span class="keyword">extern</span> <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d5/d9/kernldat_8c.html#a47">KiSwapEvent</a>;
<a name="l01124"></a><a class="code" href="../../d0/d0/ki_8h.html#a51">01124</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a48">KiProcessInSwapListHead</a>;
<a name="l01125"></a><a class="code" href="../../d0/d0/ki_8h.html#a52">01125</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a49">KiProcessOutSwapListHead</a>;
<a name="l01126"></a><a class="code" href="../../d0/d0/ki_8h.html#a53">01126</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a50">KiStackInSwapListHead</a>;
<a name="l01127"></a><a class="code" href="../../d0/d0/ki_8h.html#a54">01127</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a51">KiProfileSourceListHead</a>;
<a name="l01128"></a><a class="code" href="../../d0/d0/ki_8h.html#a55">01128</a> <span class="keyword">extern</span> BOOLEAN <a class="code" href="../../d5/d9/kernldat_8c.html#a52">KiProfileAlignmentFixup</a>;
<a name="l01129"></a><a class="code" href="../../d0/d0/ki_8h.html#a56">01129</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a53">KiProfileAlignmentFixupInterval</a>;
<a name="l01130"></a><a class="code" href="../../d0/d0/ki_8h.html#a57">01130</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a54">KiProfileAlignmentFixupCount</a>;
<a name="l01131"></a><a class="code" href="../../d0/d0/ki_8h.html#a58">01131</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a55">KiProfileInterval</a>;
<a name="l01132"></a><a class="code" href="../../d0/d0/ki_8h.html#a59">01132</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a56">KiProfileListHead</a>;
<a name="l01133"></a><a class="code" href="../../d0/d0/ki_8h.html#a60">01133</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d4/d4/alpha_2splocks_8c.html#a14">KiProfileLock</a>;
<a name="l01134"></a><a class="code" href="../../d0/d0/ki_8h.html#a61">01134</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a2">KiReadySummary</a>;
<a name="l01135"></a><a class="code" href="../../d0/d0/ki_8h.html#a62">01135</a> <span class="keyword">extern</span> UCHAR <a class="code" href="../../d0/d0/ki_8h.html#a62">KiArgumentTable</a>[];
<a name="l01136"></a><a class="code" href="../../d0/d0/ki_8h.html#a63">01136</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d0/d0/ki_8h.html#a63">KiServiceLimit</a>;
<a name="l01137"></a><a class="code" href="../../d0/d0/ki_8h.html#a64">01137</a> <span class="keyword">extern</span> ULONG_PTR <a class="code" href="../../d0/d0/ki_8h.html#a64">KiServiceTable</a>[];
<a name="l01138"></a><a class="code" href="../../d0/d0/ki_8h.html#a65">01138</a> <span class="keyword">extern</span> <a class="code" href="../../d8/d6/struct__CALL__PERFORMANCE__DATA.html">CALL_PERFORMANCE_DATA</a> <a class="code" href="../../d0/d0/ki_8h.html#a65">KiSetEventCallData</a>;
<a name="l01139"></a><a class="code" href="../../d0/d0/ki_8h.html#a66">01139</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d0/d0/ki_8h.html#a66">KiTickOffset</a>;
<a name="l01140"></a><a class="code" href="../../d0/d0/ki_8h.html#a67">01140</a> <span class="keyword">extern</span> LARGE_INTEGER <a class="code" href="../../d5/d9/kernldat_8c.html#a59">KiTimeIncrementReciprocal</a>;
<a name="l01141"></a><a class="code" href="../../d0/d0/ki_8h.html#a68">01141</a> <span class="keyword">extern</span> CCHAR <a class="code" href="../../d5/d9/kernldat_8c.html#a60">KiTimeIncrementShiftCount</a>;
<a name="l01142"></a><a class="code" href="../../d0/d0/ki_8h.html#a69">01142</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a3">KiTimerTableListHead</a>[<a class="code" href="../../d4/d9/ke_8h.html#a10">TIMER_TABLE_SIZE</a>];
<a name="l01143"></a><a class="code" href="../../d0/d0/ki_8h.html#a70">01143</a> <span class="keyword">extern</span> KAFFINITY <a class="code" href="../../d0/d0/ki_8h.html#a70">KiTimeProcessor</a>;
<a name="l01144"></a><a class="code" href="../../d0/d0/ki_8h.html#a71">01144</a> <span class="keyword">extern</span> <a class="code" href="../../d1/d6/struct__KDPC.html">KDPC</a> <a class="code" href="../../d5/d9/kernldat_8c.html#a58">KiTimerExpireDpc</a>;
<a name="l01145"></a><a class="code" href="../../d0/d0/ki_8h.html#a72">01145</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d4/d4/alpha_2splocks_8c.html#a10">KiFreezeExecutionLock</a>;
<a name="l01146"></a><a class="code" href="../../d0/d0/ki_8h.html#a73">01146</a> <span class="keyword">extern</span> BOOLEAN <a class="code" href="../../d0/d0/ki_8h.html#a73">KiSlavesStartExecution</a>;
<a name="l01147"></a><a class="code" href="../../d0/d0/ki_8h.html#a74">01147</a> <span class="keyword">extern</span> <a class="code" href="../../d4/d9/ke_8h.html#a120">PSWAP_CONTEXT_NOTIFY_ROUTINE</a> <a class="code" href="../../d5/d9/kernldat_8c.html#a4">KiSwapContextNotifyRoutine</a>;
<a name="l01148"></a><a class="code" href="../../d0/d0/ki_8h.html#a75">01148</a> <span class="keyword">extern</span> <a class="code" href="../../d4/d9/ke_8h.html#a121">PTHREAD_SELECT_NOTIFY_ROUTINE</a> <a class="code" href="../../d5/d9/kernldat_8c.html#a5">KiThreadSelectNotifyRoutine</a>;
<a name="l01149"></a><a class="code" href="../../d0/d0/ki_8h.html#a76">01149</a> <span class="keyword">extern</span> <a class="code" href="../../d4/d9/ke_8h.html#a122">PTIME_UPDATE_NOTIFY_ROUTINE</a> <a class="code" href="../../d5/d9/kernldat_8c.html#a6">KiTimeUpdateNotifyRoutine</a>;
<a name="l01150"></a><a class="code" href="../../d0/d0/ki_8h.html#a77">01150</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a61">KiWaitInListHead</a>;
<a name="l01151"></a><a class="code" href="../../d0/d0/ki_8h.html#a78">01151</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a62">KiWaitOutListHead</a>;
<a name="l01152"></a><a class="code" href="../../d0/d0/ki_8h.html#a79">01152</a> <span class="keyword">extern</span> <a class="code" href="../../d8/d6/struct__CALL__PERFORMANCE__DATA.html">CALL_PERFORMANCE_DATA</a> <a class="code" href="../../d0/d0/ki_8h.html#a79">KiWaitSingleCallData</a>;
<a name="l01153"></a><a class="code" href="../../d0/d0/ki_8h.html#a80">01153</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d8/d0/cmdat3_8c.html#a63">KiEnableTimerWatchdog</a>;
01154 
01155 <span class="preprocessor">#if defined(_IA64_)</span>
01156 <span class="preprocessor"></span>
01157 <span class="keyword">extern</span> ULONG KiGlobalRid;
01158 <span class="keyword">extern</span> ULONG KiMasterRid;
01159 <span class="keyword">extern</span> ULONG KiMasterSequence;
01160 <span class="keyword">extern</span> ULONG <a class="code" href="../../d8/d0/cmdat3_8c.html#a67">KiIdealDpcRate</a>;
01161 
01162 <span class="preprocessor">#if !defined(UP_NT)</span>
01163 <span class="preprocessor"></span>
01164 <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d9/d5/ia64_2flushtb_8c.html#a8">KiMasterRidLock</a>;
01165 
01166 <span class="preprocessor">#endif</span>
01167 <span class="preprocessor"></span>
01168 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01169 KiSaveEmDebugContext (
01170     IN OUT PCONTEXT Context
01171     );
01172 
01173 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01174 KiLoadEmDebugContext (
01175     IN PCONTEXT Context
01176     );
01177 
01178 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01179 KiFlushRse (
01180     VOID
01181     );
01182 
01183 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01184 KiInvalidateStackedRegisters (
01185     VOID
01186     );
01187 
01188 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01189 KiSetNewRid (
01190     ULONG NewGlobalRid,
01191     ULONG NewProcessRid
01192     );
01193 
01194 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01195 <a class="code" href="../../d4/d4/iafptrap_8c.html#a11">Ki386CheckDivideByZeroTrap</a>(
01196     IN PKTRAP_FRAME Frame
01197     );
01198 
01199 <span class="preprocessor">#endif // defined(_IA64_)</span>
01200 <span class="preprocessor"></span>
01201 <span class="preprocessor">#if defined(i386)</span>
01202 <span class="preprocessor"></span>
01203 <span class="keyword">extern</span> KIRQL <a class="code" href="../../d7/d3/i386init_8c.html#a0">KiProfileIrql</a>;
01204 
01205 BOOLEAN
01206 <a class="code" href="../../d0/d5/i386_2flush_8c.html#a2">KeInvalidateAllCaches</a> (
01207     IN BOOLEAN AllProcessors
01208     );
01209 
01210 <span class="preprocessor">#endif</span>
01211 <span class="preprocessor"></span>
01212 <span class="preprocessor">#if defined(_ALPHA_)</span>
01213 <span class="preprocessor"></span>
01214 <span class="keyword">extern</span> ULONG KiMaximumAsn;
01215 <span class="keyword">extern</span> ULONGLONG KiMasterSequence;
01216 <span class="keyword">extern</span> LONG KiMbTimeStamp;
01217 <span class="keyword">extern</span> ULONG KiSynchIrql;
01218 
01219 <span class="preprocessor">#endif</span>
01220 <span class="preprocessor"></span>
01221 <span class="preprocessor">#if defined(_ALPHA_) || defined(_IA64_)</span>
01222 <span class="preprocessor"></span>
01223 <span class="keyword">extern</span> <a class="code" href="../../d0/d7/struct__KINTERRUPT.html">KINTERRUPT</a> KxUnexpectedInterrupt;
01224 
01225 <span class="preprocessor">#endif</span>
01226 <span class="preprocessor"></span>
01227 <span class="preprocessor">#if NT_INST</span>
01228 <span class="preprocessor"></span>
01229 <span class="keyword">extern</span> <a class="code" href="../../d1/d7/struct__KIPI__COUNTS.html">KIPI_COUNTS</a> KiIpiCounts[<a class="code" href="../../d9/d5/ndismain_8h.html#a183">MAXIMUM_PROCESSORS</a>];
01230 
01231 <span class="preprocessor">#endif</span>
01232 <span class="preprocessor"></span>
<a name="l01233"></a><a class="code" href="../../d0/d0/ki_8h.html#a81">01233</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d4/d4/alpha_2splocks_8c.html#a11">KiFreezeLockBackup</a>;
<a name="l01234"></a><a class="code" href="../../d0/d0/ki_8h.html#a82">01234</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a43">KiFreezeFlag</a>;
<a name="l01235"></a><a class="code" href="../../d0/d0/ki_8h.html#a83">01235</a> <span class="keyword">extern</span> <span class="keyword">volatile</span> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a44">KiSuspendState</a>;
01236 
01237 <span class="preprocessor">#if DBG</span>
01238 <span class="preprocessor"></span>
01239 <span class="keyword">extern</span> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a35">KiMaximumSearchCount</a>;
01240 
01241 <span class="preprocessor">#endif</span>
01242 <span class="preprocessor"></span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:35 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

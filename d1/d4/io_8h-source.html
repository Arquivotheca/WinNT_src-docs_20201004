<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: io.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>io.h</h1><a href="../../d0/d5/io_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*++ BUILD Version: 0013    // Increment this if a change has global effects</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1989  Microsoft Corporation</span>
00004 <span class="comment"></span>
00005 <span class="comment">Module Name:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    io.h</span>
00008 <span class="comment"></span>
00009 <span class="comment">Abstract:</span>
00010 <span class="comment"></span>
00011 <span class="comment">    This module contains the internal structure definitions and APIs used by</span>
00012 <span class="comment">    the NT I/O system.</span>
00013 <span class="comment"></span>
00014 <span class="comment">Author:</span>
00015 <span class="comment"></span>
00016 <span class="comment">    Darryl E. Havens (darrylh) 12-Apr-1989</span>
00017 <span class="comment"></span>
00018 <span class="comment"></span>
00019 <span class="comment">Revision History:</span>
00020 <span class="comment"></span>
00021 <span class="comment"></span>
00022 <span class="comment">--*/</span>
00023 
00024 <span class="preprocessor">#ifndef _IO_</span>
00025 <span class="preprocessor"></span><span class="preprocessor">#define _IO_</span>
00026 <span class="preprocessor"></span>
00027 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs begin_ntndis</span>
00028 <span class="comment">//</span>
00029 <span class="comment">// Define I/O system data structure type codes.  Each major data structure in</span>
00030 <span class="comment">// the I/O system has a type code  The type field in each structure is at the</span>
00031 <span class="comment">// same offset.  The following values can be used to determine which type of</span>
00032 <span class="comment">// data structure a pointer refers to.</span>
00033 <span class="comment">//</span>
00034 
<a name="l00035"></a><a class="code" href="../../d0/d5/io_8h.html#a0">00035</a> <span class="preprocessor">#define IO_TYPE_ADAPTER                 0x00000001</span>
<a name="l00036"></a><a class="code" href="../../d0/d5/io_8h.html#a1">00036</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_TYPE_CONTROLLER              0x00000002</span>
<a name="l00037"></a><a class="code" href="../../d0/d5/io_8h.html#a2">00037</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_TYPE_DEVICE                  0x00000003</span>
<a name="l00038"></a><a class="code" href="../../d0/d5/io_8h.html#a3">00038</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_TYPE_DRIVER                  0x00000004</span>
<a name="l00039"></a><a class="code" href="../../d0/d5/io_8h.html#a4">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_TYPE_FILE                    0x00000005</span>
<a name="l00040"></a><a class="code" href="../../d0/d5/io_8h.html#a5">00040</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_TYPE_IRP                     0x00000006</span>
<a name="l00041"></a><a class="code" href="../../d0/d5/io_8h.html#a6">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_TYPE_MASTER_ADAPTER          0x00000007</span>
<a name="l00042"></a><a class="code" href="../../d0/d5/io_8h.html#a7">00042</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_TYPE_OPEN_PACKET             0x00000008</span>
<a name="l00043"></a><a class="code" href="../../d0/d5/io_8h.html#a8">00043</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_TYPE_TIMER                   0x00000009</span>
<a name="l00044"></a><a class="code" href="../../d0/d5/io_8h.html#a9">00044</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_TYPE_VPB                     0x0000000a</span>
<a name="l00045"></a><a class="code" href="../../d0/d5/io_8h.html#a10">00045</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_TYPE_ERROR_LOG               0x0000000b</span>
<a name="l00046"></a><a class="code" href="../../d0/d5/io_8h.html#a11">00046</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_TYPE_ERROR_MESSAGE           0x0000000c</span>
<a name="l00047"></a><a class="code" href="../../d0/d5/io_8h.html#a12">00047</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_TYPE_DEVICE_OBJECT_EXTENSION 0x0000000d</span>
00048 <span class="preprocessor"></span>
00049 
00050 <span class="comment">//</span>
00051 <span class="comment">// Define the major function codes for IRPs.</span>
00052 <span class="comment">//</span>
00053 
00054 
<a name="l00055"></a><a class="code" href="../../d0/d5/io_8h.html#a13">00055</a> <span class="preprocessor">#define IRP_MJ_CREATE                   0x00</span>
<a name="l00056"></a><a class="code" href="../../d0/d5/io_8h.html#a14">00056</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_CREATE_NAMED_PIPE        0x01</span>
<a name="l00057"></a><a class="code" href="../../d0/d5/io_8h.html#a15">00057</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_CLOSE                    0x02</span>
<a name="l00058"></a><a class="code" href="../../d0/d5/io_8h.html#a16">00058</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_READ                     0x03</span>
<a name="l00059"></a><a class="code" href="../../d0/d5/io_8h.html#a17">00059</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_WRITE                    0x04</span>
<a name="l00060"></a><a class="code" href="../../d0/d5/io_8h.html#a18">00060</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_QUERY_INFORMATION        0x05</span>
<a name="l00061"></a><a class="code" href="../../d0/d5/io_8h.html#a19">00061</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_SET_INFORMATION          0x06</span>
<a name="l00062"></a><a class="code" href="../../d0/d5/io_8h.html#a20">00062</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_QUERY_EA                 0x07</span>
<a name="l00063"></a><a class="code" href="../../d0/d5/io_8h.html#a21">00063</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_SET_EA                   0x08</span>
<a name="l00064"></a><a class="code" href="../../d0/d5/io_8h.html#a22">00064</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_FLUSH_BUFFERS            0x09</span>
<a name="l00065"></a><a class="code" href="../../d0/d5/io_8h.html#a23">00065</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_QUERY_VOLUME_INFORMATION 0x0a</span>
<a name="l00066"></a><a class="code" href="../../d0/d5/io_8h.html#a24">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_SET_VOLUME_INFORMATION   0x0b</span>
<a name="l00067"></a><a class="code" href="../../d0/d5/io_8h.html#a25">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_DIRECTORY_CONTROL        0x0c</span>
<a name="l00068"></a><a class="code" href="../../d0/d5/io_8h.html#a26">00068</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_FILE_SYSTEM_CONTROL      0x0d</span>
<a name="l00069"></a><a class="code" href="../../d0/d5/io_8h.html#a27">00069</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_DEVICE_CONTROL           0x0e</span>
<a name="l00070"></a><a class="code" href="../../d0/d5/io_8h.html#a28">00070</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_INTERNAL_DEVICE_CONTROL  0x0f</span>
<a name="l00071"></a><a class="code" href="../../d0/d5/io_8h.html#a29">00071</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_SHUTDOWN                 0x10</span>
<a name="l00072"></a><a class="code" href="../../d0/d5/io_8h.html#a30">00072</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_LOCK_CONTROL             0x11</span>
<a name="l00073"></a><a class="code" href="../../d0/d5/io_8h.html#a31">00073</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_CLEANUP                  0x12</span>
<a name="l00074"></a><a class="code" href="../../d0/d5/io_8h.html#a32">00074</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_CREATE_MAILSLOT          0x13</span>
<a name="l00075"></a><a class="code" href="../../d0/d5/io_8h.html#a33">00075</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_QUERY_SECURITY           0x14</span>
<a name="l00076"></a><a class="code" href="../../d0/d5/io_8h.html#a34">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_SET_SECURITY             0x15</span>
<a name="l00077"></a><a class="code" href="../../d0/d5/io_8h.html#a35">00077</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_POWER                    0x16</span>
<a name="l00078"></a><a class="code" href="../../d0/d5/io_8h.html#a36">00078</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_SYSTEM_CONTROL           0x17</span>
<a name="l00079"></a><a class="code" href="../../d0/d5/io_8h.html#a37">00079</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_DEVICE_CHANGE            0x18</span>
<a name="l00080"></a><a class="code" href="../../d0/d5/io_8h.html#a38">00080</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_QUERY_QUOTA              0x19</span>
<a name="l00081"></a><a class="code" href="../../d0/d5/io_8h.html#a39">00081</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_SET_QUOTA                0x1a</span>
<a name="l00082"></a><a class="code" href="../../d0/d5/io_8h.html#a40">00082</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_PNP                      0x1b</span>
<a name="l00083"></a><a class="code" href="../../d0/d5/io_8h.html#a41">00083</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_PNP_POWER                IRP_MJ_PNP      // Obsolete....</span>
<a name="l00084"></a><a class="code" href="../../d0/d5/io_8h.html#a42">00084</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MJ_MAXIMUM_FUNCTION         0x1b</span>
00085 <span class="preprocessor"></span>
00086 <span class="comment">//</span>
00087 <span class="comment">// Make the Scsi major code the same as internal device control.</span>
00088 <span class="comment">//</span>
00089 
<a name="l00090"></a><a class="code" href="../../d0/d5/io_8h.html#a43">00090</a> <span class="preprocessor">#define IRP_MJ_SCSI                     IRP_MJ_INTERNAL_DEVICE_CONTROL</span>
00091 <span class="preprocessor"></span>
00092 <span class="comment">//</span>
00093 <span class="comment">// Define the minor function codes for IRPs.  The lower 128 codes, from 0x00 to</span>
00094 <span class="comment">// 0x7f are reserved to Microsoft.  The upper 128 codes, from 0x80 to 0xff, are</span>
00095 <span class="comment">// reserved to customers of Microsoft.</span>
00096 <span class="comment">//</span>
00097 
00098 <span class="comment">// end_wdm end_ntndis</span>
00099 <span class="comment">//</span>
00100 <span class="comment">// Directory control minor function codes</span>
00101 <span class="comment">//</span>
00102 
<a name="l00103"></a><a class="code" href="../../d0/d5/io_8h.html#a44">00103</a> <span class="preprocessor">#define IRP_MN_QUERY_DIRECTORY          0x01</span>
<a name="l00104"></a><a class="code" href="../../d0/d5/io_8h.html#a45">00104</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_NOTIFY_CHANGE_DIRECTORY  0x02</span>
00105 <span class="preprocessor"></span>
00106 <span class="comment">//</span>
00107 <span class="comment">// File system control minor function codes.  Note that "user request" is</span>
00108 <span class="comment">// assumed to be zero by both the I/O system and file systems.  Do not change</span>
00109 <span class="comment">// this value.</span>
00110 <span class="comment">//</span>
00111 
<a name="l00112"></a><a class="code" href="../../d0/d5/io_8h.html#a46">00112</a> <span class="preprocessor">#define IRP_MN_USER_FS_REQUEST          0x00</span>
<a name="l00113"></a><a class="code" href="../../d0/d5/io_8h.html#a47">00113</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_MOUNT_VOLUME             0x01</span>
<a name="l00114"></a><a class="code" href="../../d0/d5/io_8h.html#a48">00114</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_VERIFY_VOLUME            0x02</span>
<a name="l00115"></a><a class="code" href="../../d0/d5/io_8h.html#a49">00115</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_LOAD_FILE_SYSTEM         0x03</span>
<a name="l00116"></a><a class="code" href="../../d0/d5/io_8h.html#a50">00116</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_TRACK_LINK               0x04    // To be obsoleted soon</span>
<a name="l00117"></a><a class="code" href="../../d0/d5/io_8h.html#a51">00117</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_KERNEL_CALL              0x04</span>
00118 <span class="preprocessor"></span>
00119 <span class="comment">//</span>
00120 <span class="comment">// Lock control minor function codes</span>
00121 <span class="comment">//</span>
00122 
<a name="l00123"></a><a class="code" href="../../d0/d5/io_8h.html#a52">00123</a> <span class="preprocessor">#define IRP_MN_LOCK                     0x01</span>
<a name="l00124"></a><a class="code" href="../../d0/d5/io_8h.html#a53">00124</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_UNLOCK_SINGLE            0x02</span>
<a name="l00125"></a><a class="code" href="../../d0/d5/io_8h.html#a54">00125</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_UNLOCK_ALL               0x03</span>
<a name="l00126"></a><a class="code" href="../../d0/d5/io_8h.html#a55">00126</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_UNLOCK_ALL_BY_KEY        0x04</span>
00127 <span class="preprocessor"></span>
00128 <span class="comment">//</span>
00129 <span class="comment">// Read and Write minor function codes for file systems supporting Lan Manager</span>
00130 <span class="comment">// software.  All of these subfunction codes are invalid if the file has been</span>
00131 <span class="comment">// opened with FO_NO_INTERMEDIATE_BUFFERING.  They are also invalid in combi-</span>
00132 <span class="comment">// nation with synchronous calls (Irp Flag or file open option).</span>
00133 <span class="comment">//</span>
00134 <span class="comment">// Note that "normal" is assumed to be zero by both the I/O system and file</span>
00135 <span class="comment">// systems.  Do not change this value.</span>
00136 <span class="comment">//</span>
00137 
<a name="l00138"></a><a class="code" href="../../d0/d5/io_8h.html#a56">00138</a> <span class="preprocessor">#define IRP_MN_NORMAL                   0x00</span>
<a name="l00139"></a><a class="code" href="../../d0/d5/io_8h.html#a57">00139</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_DPC                      0x01</span>
<a name="l00140"></a><a class="code" href="../../d0/d5/io_8h.html#a58">00140</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_MDL                      0x02</span>
<a name="l00141"></a><a class="code" href="../../d0/d5/io_8h.html#a59">00141</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_COMPLETE                 0x04</span>
<a name="l00142"></a><a class="code" href="../../d0/d5/io_8h.html#a60">00142</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_COMPRESSED               0x08</span>
00143 <span class="preprocessor"></span>
<a name="l00144"></a><a class="code" href="../../d0/d5/io_8h.html#a61">00144</a> <span class="preprocessor">#define IRP_MN_MDL_DPC                  (IRP_MN_MDL | IRP_MN_DPC)</span>
<a name="l00145"></a><a class="code" href="../../d0/d5/io_8h.html#a62">00145</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_COMPLETE_MDL             (IRP_MN_COMPLETE | IRP_MN_MDL)</span>
<a name="l00146"></a><a class="code" href="../../d0/d5/io_8h.html#a63">00146</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_COMPLETE_MDL_DPC         (IRP_MN_COMPLETE_MDL | IRP_MN_DPC)</span>
00147 <span class="preprocessor"></span>
00148 <span class="comment">// begin_wdm</span>
00149 <span class="comment">//</span>
00150 <span class="comment">// Device Control Request minor function codes for SCSI support. Note that</span>
00151 <span class="comment">// user requests are assumed to be zero.</span>
00152 <span class="comment">//</span>
00153 
<a name="l00154"></a><a class="code" href="../../d0/d5/io_8h.html#a64">00154</a> <span class="preprocessor">#define IRP_MN_SCSI_CLASS               0x01</span>
00155 <span class="preprocessor"></span>
00156 <span class="comment">//</span>
00157 <span class="comment">// PNP minor function codes.</span>
00158 <span class="comment">//</span>
00159 
<a name="l00160"></a><a class="code" href="../../d0/d5/io_8h.html#a65">00160</a> <span class="preprocessor">#define IRP_MN_START_DEVICE                 0x00</span>
<a name="l00161"></a><a class="code" href="../../d0/d5/io_8h.html#a66">00161</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_QUERY_REMOVE_DEVICE          0x01</span>
<a name="l00162"></a><a class="code" href="../../d0/d5/io_8h.html#a67">00162</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_REMOVE_DEVICE                0x02</span>
<a name="l00163"></a><a class="code" href="../../d0/d5/io_8h.html#a68">00163</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_CANCEL_REMOVE_DEVICE         0x03</span>
<a name="l00164"></a><a class="code" href="../../d0/d5/io_8h.html#a69">00164</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_STOP_DEVICE                  0x04</span>
<a name="l00165"></a><a class="code" href="../../d0/d5/io_8h.html#a70">00165</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_QUERY_STOP_DEVICE            0x05</span>
<a name="l00166"></a><a class="code" href="../../d0/d5/io_8h.html#a71">00166</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_CANCEL_STOP_DEVICE           0x06</span>
00167 <span class="preprocessor"></span>
<a name="l00168"></a><a class="code" href="../../d0/d5/io_8h.html#a72">00168</a> <span class="preprocessor">#define IRP_MN_QUERY_DEVICE_RELATIONS       0x07</span>
<a name="l00169"></a><a class="code" href="../../d0/d5/io_8h.html#a73">00169</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_QUERY_INTERFACE              0x08</span>
<a name="l00170"></a><a class="code" href="../../d0/d5/io_8h.html#a74">00170</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_QUERY_CAPABILITIES           0x09</span>
<a name="l00171"></a><a class="code" href="../../d0/d5/io_8h.html#a75">00171</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_QUERY_RESOURCES              0x0A</span>
<a name="l00172"></a><a class="code" href="../../d0/d5/io_8h.html#a76">00172</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_QUERY_RESOURCE_REQUIREMENTS  0x0B</span>
<a name="l00173"></a><a class="code" href="../../d0/d5/io_8h.html#a77">00173</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_QUERY_DEVICE_TEXT            0x0C</span>
<a name="l00174"></a><a class="code" href="../../d0/d5/io_8h.html#a78">00174</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_FILTER_RESOURCE_REQUIREMENTS 0x0D</span>
00175 <span class="preprocessor"></span>
<a name="l00176"></a><a class="code" href="../../d0/d5/io_8h.html#a79">00176</a> <span class="preprocessor">#define IRP_MN_READ_CONFIG                  0x0F</span>
<a name="l00177"></a><a class="code" href="../../d0/d5/io_8h.html#a80">00177</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_WRITE_CONFIG                 0x10</span>
<a name="l00178"></a><a class="code" href="../../d0/d5/io_8h.html#a81">00178</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_EJECT                        0x11</span>
<a name="l00179"></a><a class="code" href="../../d0/d5/io_8h.html#a82">00179</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_SET_LOCK                     0x12</span>
<a name="l00180"></a><a class="code" href="../../d0/d5/io_8h.html#a83">00180</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_QUERY_ID                     0x13</span>
<a name="l00181"></a><a class="code" href="../../d0/d5/io_8h.html#a84">00181</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_QUERY_PNP_DEVICE_STATE       0x14</span>
<a name="l00182"></a><a class="code" href="../../d0/d5/io_8h.html#a85">00182</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_QUERY_BUS_INFORMATION        0x15</span>
<a name="l00183"></a><a class="code" href="../../d0/d5/io_8h.html#a86">00183</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_DEVICE_USAGE_NOTIFICATION    0x16</span>
<a name="l00184"></a><a class="code" href="../../d0/d5/io_8h.html#a87">00184</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_SURPRISE_REMOVAL             0x17</span>
00185 <span class="preprocessor"></span><span class="comment">// end_wdm</span>
<a name="l00186"></a><a class="code" href="../../d0/d5/io_8h.html#a88">00186</a> <span class="preprocessor">#define IRP_MN_QUERY_LEGACY_BUS_INFORMATION 0x18</span>
00187 <span class="preprocessor"></span><span class="comment">// begin_wdm</span>
00188 
00189 <span class="comment">//</span>
00190 <span class="comment">// POWER minor function codes</span>
00191 <span class="comment">//</span>
<a name="l00192"></a><a class="code" href="../../d0/d5/io_8h.html#a89">00192</a> <span class="preprocessor">#define IRP_MN_WAIT_WAKE                    0x00</span>
<a name="l00193"></a><a class="code" href="../../d0/d5/io_8h.html#a90">00193</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_POWER_SEQUENCE               0x01</span>
<a name="l00194"></a><a class="code" href="../../d0/d5/io_8h.html#a91">00194</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_SET_POWER                    0x02</span>
<a name="l00195"></a><a class="code" href="../../d0/d5/io_8h.html#a92">00195</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_QUERY_POWER                  0x03</span>
00196 <span class="preprocessor"></span>
00197 <span class="comment">// begin_ntminiport</span>
00198 <span class="comment">//</span>
00199 <span class="comment">// WMI minor function codes under IRP_MJ_SYSTEM_CONTROL</span>
00200 <span class="comment">//</span>
00201 
<a name="l00202"></a><a class="code" href="../../d0/d5/io_8h.html#a93">00202</a> <span class="preprocessor">#define IRP_MN_QUERY_ALL_DATA               0x00</span>
<a name="l00203"></a><a class="code" href="../../d0/d5/io_8h.html#a94">00203</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_QUERY_SINGLE_INSTANCE        0x01</span>
<a name="l00204"></a><a class="code" href="../../d0/d5/io_8h.html#a95">00204</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_CHANGE_SINGLE_INSTANCE       0x02</span>
<a name="l00205"></a><a class="code" href="../../d0/d5/io_8h.html#a96">00205</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_CHANGE_SINGLE_ITEM           0x03</span>
<a name="l00206"></a><a class="code" href="../../d0/d5/io_8h.html#a97">00206</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_ENABLE_EVENTS                0x04</span>
<a name="l00207"></a><a class="code" href="../../d0/d5/io_8h.html#a98">00207</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_DISABLE_EVENTS               0x05</span>
<a name="l00208"></a><a class="code" href="../../d0/d5/io_8h.html#a99">00208</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_ENABLE_COLLECTION            0x06</span>
<a name="l00209"></a><a class="code" href="../../d0/d5/io_8h.html#a100">00209</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_DISABLE_COLLECTION           0x07</span>
<a name="l00210"></a><a class="code" href="../../d0/d5/io_8h.html#a101">00210</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_REGINFO                      0x08</span>
<a name="l00211"></a><a class="code" href="../../d0/d5/io_8h.html#a102">00211</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MN_EXECUTE_METHOD               0x09</span>
00212 <span class="preprocessor"></span>
00213 <span class="comment">// end_ntminiport</span>
00214 <span class="comment">// end_wdm end_ntddk end_nthal end_ntifs</span>
00215 
00216 <span class="comment">// begin_wmikm</span>
00217 <span class="comment">// The following minor code is reserved as a private WMI minor function</span>
00218 <span class="comment">// For drivers who cannot include io.h, please see wmiumkm.h</span>
00219 <span class="comment">//</span>
<a name="l00220"></a><a class="code" href="../../d0/d5/io_8h.html#a103">00220</a> <span class="preprocessor">#define IRP_MN_SET_TRACE_NOTIFY             0x0A</span>
00221 <span class="preprocessor"></span>
00222 <span class="comment">// end_wmikm</span>
00223 <span class="comment">// begin_wdm begin_ntddk begin_nthal begin_ntifs</span>
00224 
00225 <span class="comment">//</span>
00226 <span class="comment">// Define option flags for IoCreateFile.  Note that these values must be</span>
00227 <span class="comment">// exactly the same as the SL_... flags for a create function.  Note also</span>
00228 <span class="comment">// that there are flags that may be passed to IoCreateFile that are not</span>
00229 <span class="comment">// placed in the stack location for the create IRP.  These flags start in</span>
00230 <span class="comment">// the next byte.</span>
00231 <span class="comment">//</span>
00232 
<a name="l00233"></a><a class="code" href="../../d0/d5/io_8h.html#a104">00233</a> <span class="preprocessor">#define IO_FORCE_ACCESS_CHECK           0x0001</span>
<a name="l00234"></a><a class="code" href="../../d0/d5/io_8h.html#a105">00234</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_OPEN_PAGING_FILE             0x0002</span>
<a name="l00235"></a><a class="code" href="../../d0/d5/io_8h.html#a106">00235</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_OPEN_TARGET_DIRECTORY        0x0004</span>
00236 <span class="preprocessor"></span><span class="comment">// end_ntddk end_wdm end_nthal</span>
00237 
00238 <span class="comment">//</span>
00239 <span class="comment">// Flags not passed to driver</span>
00240 <span class="comment">//</span>
00241 
00242 <span class="comment">// begin_ntddk begin_wdm</span>
<a name="l00243"></a><a class="code" href="../../d0/d5/io_8h.html#a107">00243</a> <span class="preprocessor">#define IO_NO_PARAMETER_CHECKING        0x0100</span>
00244 <span class="preprocessor"></span>
00245 <span class="comment">//</span>
00246 <span class="comment">// Define Information fields for whether or not a REPARSE or a REMOUNT has</span>
00247 <span class="comment">// occurred in the file system.</span>
00248 <span class="comment">//</span>
00249 
<a name="l00250"></a><a class="code" href="../../d0/d5/io_8h.html#a108">00250</a> <span class="preprocessor">#define IO_REPARSE                      0x0</span>
<a name="l00251"></a><a class="code" href="../../d0/d5/io_8h.html#a109">00251</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_REMOUNT                      0x1</span>
00252 <span class="preprocessor"></span>
00253 <span class="comment">// end_ntddk end_wdm</span>
00254 
<a name="l00255"></a><a class="code" href="../../d0/d5/io_8h.html#a110">00255</a> <span class="preprocessor">#define IO_CHECK_CREATE_PARAMETERS      0x0200</span>
<a name="l00256"></a><a class="code" href="../../d0/d5/io_8h.html#a111">00256</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_ATTACH_DEVICE                0x0400</span>
00257 <span class="preprocessor"></span>
00258 <span class="comment">//</span>
00259 <span class="comment">// Define kernel-only, internal option flags</span>
00260 <span class="comment">//</span>
00261 
<a name="l00262"></a><a class="code" href="../../d0/d5/io_8h.html#a112">00262</a> <span class="preprocessor">#define IO_ATTACH_DEVICE_API            0x80000000</span>
00263 <span class="preprocessor"></span>
00264 
00265 <span class="comment">// end_ntifs</span>
00266 
00267 <span class="comment">//</span>
00268 <span class="comment">// Define the driver interfaces required to write memory dumps.</span>
00269 <span class="comment">//</span>
00270 
00271 <span class="comment">//</span>
00272 <span class="comment">// Define stall routine type for the dump driver.</span>
00273 <span class="comment">//</span>
00274 
00275 <span class="keyword">typedef</span>
00276 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00277"></a><a class="code" href="../../d0/d5/io_8h.html#a266">00277</a> (*PSTALL_ROUTINE) (
00278     IN ULONG <a class="code" href="../../d7/d0/ctlnpqos_8c.html#a2">Delay</a>
00279     );
00280 
00281 <span class="comment">//</span>
00282 <span class="comment">// Define the interfaces for the dump driver's routines.</span>
00283 <span class="comment">//</span>
00284 
00285 <span class="keyword">typedef</span>
00286 BOOLEAN
<a name="l00287"></a><a class="code" href="../../d0/d5/io_8h.html#a267">00287</a> (*PDUMP_DRIVER_OPEN) (
00288     IN LARGE_INTEGER PartitionOffset
00289     );
00290 
00291 <span class="keyword">typedef</span>
00292 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
<a name="l00293"></a><a class="code" href="../../d0/d5/io_8h.html#a268">00293</a> (*PDUMP_DRIVER_WRITE) (
00294     IN PLARGE_INTEGER DiskByteOffset,
00295     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> Mdl
00296     );
00297 
00298 
00299 <span class="keyword">typedef</span>
00300 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00301"></a><a class="code" href="../../d0/d5/io_8h.html#a269">00301</a> (*PDUMP_DRIVER_FINISH) (
00302     <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00303     );
00304 
00305 <span class="keyword">struct </span><a class="code" href="../../d7/d5/struct__ADAPTER__OBJECT.html">_ADAPTER_OBJECT</a>;
00306 
00307 <span class="comment">//</span>
00308 <span class="comment">// This is the information passed from the system to the disk dump driver</span>
00309 <span class="comment">// during the driver's initialization.</span>
00310 <span class="comment">//</span>
00311 
<a name="l00312"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html">00312</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html">_INITIALIZATION_CONTEXT</a> {
<a name="l00313"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o0">00313</a>     ULONG <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o0">Length</a>;
<a name="l00314"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o1">00314</a>     ULONG <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o1">DiskSignature</a>;
<a name="l00315"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o2">00315</a>     PVOID <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o2">MemoryBlock</a>;
<a name="l00316"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o3">00316</a>     PVOID <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o3">CommonBuffer</a>[2];
<a name="l00317"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o4">00317</a>     PHYSICAL_ADDRESS <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o4">PhysicalAddress</a>[2];
<a name="l00318"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o5">00318</a>     <a class="code" href="../../d0/d5/io_8h.html#a266">PSTALL_ROUTINE</a> <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o5">StallRoutine</a>;
<a name="l00319"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o6">00319</a>     <a class="code" href="../../d0/d5/io_8h.html#a267">PDUMP_DRIVER_OPEN</a> <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o6">OpenRoutine</a>;
<a name="l00320"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o7">00320</a>     <a class="code" href="../../d0/d5/io_8h.html#a268">PDUMP_DRIVER_WRITE</a> <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o7">WriteRoutine</a>;
<a name="l00321"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o8">00321</a>     <a class="code" href="../../d0/d5/io_8h.html#a269">PDUMP_DRIVER_FINISH</a> <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o8">FinishRoutine</a>;
<a name="l00322"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o9">00322</a>     <span class="keyword">struct </span><a class="code" href="../../d7/d5/struct__ADAPTER__OBJECT.html">_ADAPTER_OBJECT</a> *<a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o9">AdapterObject</a>;
<a name="l00323"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o10">00323</a>     PVOID <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o10">MappedRegisterBase</a>;
<a name="l00324"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o11">00324</a>     PVOID <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o11">PortConfiguration</a>;
<a name="l00325"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o12">00325</a>     BOOLEAN <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o12">CrashDump</a>;
<a name="l00326"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o13">00326</a>     ULONG <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o13">MaximumTransferSize</a>;
<a name="l00327"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o14">00327</a>     ULONG <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o14">CommonBufferSize</a>;
<a name="l00328"></a><a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o15">00328</a>     PVOID <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html#o15">TargetAddress</a>; <span class="comment">//Opaque pointer to target address structure</span>
00329 } <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html">INITIALIZATION_CONTEXT</a>, *<a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html">PINITIALIZATION_CONTEXT</a>;
00330 
00331 <span class="comment">// begin_ntddk</span>
00332 <span class="comment">//</span>
00333 <span class="comment">// Define callout routine type for use in IoQueryDeviceDescription().</span>
00334 <span class="comment">//</span>
00335 
<a name="l00336"></a><a class="code" href="../../d0/d5/io_8h.html#a272">00336</a> <span class="keyword">typedef</span> <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> (*<a class="code" href="../../d0/d5/io_8h.html#a272">PIO_QUERY_DEVICE_ROUTINE</a>)(
00337     IN PVOID Context,
00338     IN PUNICODE_STRING PathName,
00339     IN INTERFACE_TYPE BusType,
00340     IN ULONG <a class="code" href="../../d2/d7/hal_8h.html#a75">BusNumber</a>,
00341     IN PKEY_VALUE_FULL_INFORMATION *BusInformation,
00342     IN <a class="code" href="../../d1/d9/arc_8h.html#a56">CONFIGURATION_TYPE</a> <a class="code" href="../../d4/d9/arcinst_8h.html#a174a65">ControllerType</a>,
00343     IN ULONG ControllerNumber,
00344     IN PKEY_VALUE_FULL_INFORMATION *ControllerInformation,
00345     IN <a class="code" href="../../d1/d9/arc_8h.html#a56">CONFIGURATION_TYPE</a> <a class="code" href="../../d4/d9/arcinst_8h.html#a174a66">PeripheralType</a>,
00346     IN ULONG PeripheralNumber,
00347     IN PKEY_VALUE_FULL_INFORMATION *PeripheralInformation
00348     );
00349 
00350 <span class="comment">//</span>
00351 <span class="comment">// Defines the order of the information in the array of</span>
00352 <span class="comment">// PKEY_VALUE_FULL_INFORMATION.</span>
00353 <span class="comment">//</span>
00354 
<a name="l00355"></a><a class="code" href="../../d0/d5/io_8h.html#a599">00355</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d0/d5/io_8h.html#a599">_IO_QUERY_DEVICE_DATA_FORMAT</a> {
00356     <a class="code" href="../../d0/d5/io_8h.html#a599a402">IoQueryDeviceIdentifier</a> = 0,
00357     <a class="code" href="../../d0/d5/io_8h.html#a599a403">IoQueryDeviceConfigurationData</a>,
00358     <a class="code" href="../../d0/d5/io_8h.html#a599a404">IoQueryDeviceComponentInformation</a>,
00359     <a class="code" href="../../d0/d5/io_8h.html#a599a405">IoQueryDeviceMaxData</a>
00360 } <a class="code" href="../../d0/d5/io_8h.html#a273">IO_QUERY_DEVICE_DATA_FORMAT</a>, *<a class="code" href="../../d0/d5/io_8h.html#a274">PIO_QUERY_DEVICE_DATA_FORMAT</a>;
00361 
00362 <span class="comment">// begin_wdm begin_ntifs</span>
00363 <span class="comment">//</span>
00364 <span class="comment">// Define the objects that can be created by IoCreateFile.</span>
00365 <span class="comment">//</span>
00366 
<a name="l00367"></a><a class="code" href="../../d0/d5/io_8h.html#a600">00367</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d0/d5/io_8h.html#a600">_CREATE_FILE_TYPE</a> {
00368     <a class="code" href="../../d0/d5/io_8h.html#a600a406">CreateFileTypeNone</a>,
00369     <a class="code" href="../../d0/d5/io_8h.html#a600a407">CreateFileTypeNamedPipe</a>,
00370     <a class="code" href="../../d0/d5/io_8h.html#a600a408">CreateFileTypeMailslot</a>
00371 } <a class="code" href="../../d0/d5/io_8h.html#a275">CREATE_FILE_TYPE</a>;
00372 
00373 <span class="comment">// end_ntddk end_wdm end_ntifs</span>
00374 
00375 <span class="comment">//</span>
00376 <span class="comment">// Define the named pipe create parameters structure used for internal calls</span>
00377 <span class="comment">// to IoCreateFile when a named pipe is being created.  This structure allows</span>
00378 <span class="comment">// code invoking this routine to pass information specific to this function</span>
00379 <span class="comment">// when creating a named pipe.</span>
00380 <span class="comment">//</span>
00381 
<a name="l00382"></a><a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html">00382</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html">_NAMED_PIPE_CREATE_PARAMETERS</a> {
<a name="l00383"></a><a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o0">00383</a>     ULONG <a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o0">NamedPipeType</a>;
<a name="l00384"></a><a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o1">00384</a>     ULONG <a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o1">ReadMode</a>;
<a name="l00385"></a><a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o2">00385</a>     ULONG <a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o2">CompletionMode</a>;
<a name="l00386"></a><a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o3">00386</a>     ULONG <a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o3">MaximumInstances</a>;
<a name="l00387"></a><a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o4">00387</a>     ULONG <a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o4">InboundQuota</a>;
<a name="l00388"></a><a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o5">00388</a>     ULONG <a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o5">OutboundQuota</a>;
<a name="l00389"></a><a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o6">00389</a>     LARGE_INTEGER <a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o6">DefaultTimeout</a>;
<a name="l00390"></a><a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o7">00390</a>     BOOLEAN <a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html#o7">TimeoutSpecified</a>;
00391 } <a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html">NAMED_PIPE_CREATE_PARAMETERS</a>, *<a class="code" href="../../d3/d1/struct__NAMED__PIPE__CREATE__PARAMETERS.html">PNAMED_PIPE_CREATE_PARAMETERS</a>;
00392 
00393 <span class="comment">//</span>
00394 <span class="comment">// Define the mailslot create parameters structure used for internal calls</span>
00395 <span class="comment">// to IoCreateFile when a mailslot is being created.  This structure allows</span>
00396 <span class="comment">// code invoking this routine to pass information specific to this function</span>
00397 <span class="comment">// when creating a mailslot.</span>
00398 <span class="comment">//</span>
00399 
<a name="l00400"></a><a class="code" href="../../d2/d6/struct__MAILSLOT__CREATE__PARAMETERS.html">00400</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d2/d6/struct__MAILSLOT__CREATE__PARAMETERS.html">_MAILSLOT_CREATE_PARAMETERS</a> {
<a name="l00401"></a><a class="code" href="../../d2/d6/struct__MAILSLOT__CREATE__PARAMETERS.html#o0">00401</a>     ULONG <a class="code" href="../../d2/d6/struct__MAILSLOT__CREATE__PARAMETERS.html#o0">MailslotQuota</a>;
<a name="l00402"></a><a class="code" href="../../d2/d6/struct__MAILSLOT__CREATE__PARAMETERS.html#o1">00402</a>     ULONG <a class="code" href="../../d2/d6/struct__MAILSLOT__CREATE__PARAMETERS.html#o1">MaximumMessageSize</a>;
<a name="l00403"></a><a class="code" href="../../d2/d6/struct__MAILSLOT__CREATE__PARAMETERS.html#o2">00403</a>     LARGE_INTEGER <a class="code" href="../../d2/d6/struct__MAILSLOT__CREATE__PARAMETERS.html#o2">ReadTimeout</a>;
<a name="l00404"></a><a class="code" href="../../d2/d6/struct__MAILSLOT__CREATE__PARAMETERS.html#o3">00404</a>     BOOLEAN <a class="code" href="../../d2/d6/struct__MAILSLOT__CREATE__PARAMETERS.html#o3">TimeoutSpecified</a>;
00405 } <a class="code" href="../../d2/d6/struct__MAILSLOT__CREATE__PARAMETERS.html">MAILSLOT_CREATE_PARAMETERS</a>, *<a class="code" href="../../d2/d6/struct__MAILSLOT__CREATE__PARAMETERS.html">PMAILSLOT_CREATE_PARAMETERS</a>;
00406 
00407 <span class="comment">//</span>
00408 <span class="comment">// Define the dump driver stack context structure</span>
00409 <span class="comment">//</span>
00410 
<a name="l00411"></a><a class="code" href="../../d4/d8/structDUMP__STACK__IMAGE.html">00411</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00412"></a><a class="code" href="../../d4/d8/structDUMP__STACK__IMAGE.html#o0">00412</a>     LIST_ENTRY                  Link;
<a name="l00413"></a><a class="code" href="../../d4/d8/structDUMP__STACK__IMAGE.html#o1">00413</a>     PLDR_DATA_TABLE_ENTRY       Image;
<a name="l00414"></a><a class="code" href="../../d4/d8/structDUMP__STACK__IMAGE.html#o2">00414</a>     PVOID                       ImageBase;
<a name="l00415"></a><a class="code" href="../../d4/d8/structDUMP__STACK__IMAGE.html#o3">00415</a>     ULONG                       SizeOfImage;
00416 } <a class="code" href="../../d4/d8/structDUMP__STACK__IMAGE.html">DUMP_STACK_IMAGE</a>, *<a class="code" href="../../d0/d5/io_8h.html#a280">PDUMP_STACK_IMAGE</a>;
00417 
<a name="l00418"></a><a class="code" href="../../d3/d8/structDUMP__STACK__CONTEXT.html">00418</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00419"></a><a class="code" href="../../d3/d8/structDUMP__STACK__CONTEXT.html#o0">00419</a>     <a class="code" href="../../d6/d2/struct__INITIALIZATION__CONTEXT.html">INITIALIZATION_CONTEXT</a>      Init;
<a name="l00420"></a><a class="code" href="../../d3/d8/structDUMP__STACK__CONTEXT.html#o1">00420</a>     LARGE_INTEGER               PartitionOffset;
<a name="l00421"></a><a class="code" href="../../d3/d8/structDUMP__STACK__CONTEXT.html#o2">00421</a>     PVOID                       DumpPointers;
<a name="l00422"></a><a class="code" href="../../d3/d8/structDUMP__STACK__CONTEXT.html#o3">00422</a>     ULONG                       PointersLength;
<a name="l00423"></a><a class="code" href="../../d3/d8/structDUMP__STACK__CONTEXT.html#o4">00423</a>     PWCHAR                      ModulePrefix;
<a name="l00424"></a><a class="code" href="../../d3/d8/structDUMP__STACK__CONTEXT.html#o5">00424</a>     LIST_ENTRY                  DriverList;
<a name="l00425"></a><a class="code" href="../../d3/d8/structDUMP__STACK__CONTEXT.html#o6">00425</a>     ANSI_STRING                 InitMsg;
<a name="l00426"></a><a class="code" href="../../d3/d8/structDUMP__STACK__CONTEXT.html#o7">00426</a>     ANSI_STRING                 ProgMsg;
<a name="l00427"></a><a class="code" href="../../d3/d8/structDUMP__STACK__CONTEXT.html#o8">00427</a>     ANSI_STRING                 DoneMsg;
<a name="l00428"></a><a class="code" href="../../d3/d8/structDUMP__STACK__CONTEXT.html#o9">00428</a>     PVOID                       FileObject;
<a name="l00429"></a><a class="code" href="../../d3/d8/structDUMP__STACK__CONTEXT.html#o10">00429</a>     <span class="keyword">enum</span> <a class="code" href="../../d0/d5/io_8h.html#a603">_DEVICE_USAGE_NOTIFICATION_TYPE</a>    UsageType;
00430 } <a class="code" href="../../d3/d8/structDUMP__STACK__CONTEXT.html">DUMP_STACK_CONTEXT</a>, *<a class="code" href="../../d0/d5/io_8h.html#a281">PDUMP_STACK_CONTEXT</a>;
00431 
<a name="l00432"></a><a class="code" href="../../d0/d5/io_8h.html#a113">00432</a> <span class="preprocessor">#define IO_DUMP_MAX_MDL_PAGES           8</span>
<a name="l00433"></a><a class="code" href="../../d0/d5/io_8h.html#a114">00433</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_DUMP_MEMORY_BLOCK_PAGES      8</span>
<a name="l00434"></a><a class="code" href="../../d0/d5/io_8h.html#a115">00434</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_DUMP_COMMON_BUFFER_SIZE      0x2000</span>
00435 <span class="preprocessor"></span>
00436 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00437 <a class="code" href="../../d2/d3/dumpctl_8c.html#a36">IoGetDumpStack</a>(
00438     IN PWCHAR ModulePrefix,
00439     OUT PDUMP_STACK_CONTEXT *DumpStack,
00440     IN <span class="keyword">enum</span> _DEVICE_USAGE_NOTIFICATION_TYPE UsageType,
00441     IN ULONG IgnoreDeviceUsageFailure
00442     );
00443 
00444 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00445 <a class="code" href="../../d2/d3/dumpctl_8c.html#a39">IoInitializeDumpStack</a>(
00446     IN PDUMP_STACK_CONTEXT  DumpStack,
00447     IN PUCHAR               MessageBuffer OPTIONAL
00448     );
00449 
00450 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00451 <a class="code" href="../../d2/d3/dumpctl_8c.html#a40">IoGetDumpHiberRanges</a> (
00452     IN PVOID                    HiberContext,
00453     IN PDUMP_STACK_CONTEXT      DumpStack
00454     );
00455 
00456 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00457 BOOLEAN
00458 <a class="code" href="../../d2/d3/dumpctl_8c.html#a43">IoWriteCrashDump</a>(
00459     IN ULONG BugCheckCode,
00460     IN ULONG_PTR BugCheckParameter1,
00461     IN ULONG_PTR BugCheckParameter2,
00462     IN ULONG_PTR BugCheckParameter3,
00463     IN ULONG_PTR BugCheckParameter4,
00464     IN PVOID Context
00465     );
00466 
00467 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00468 <a class="code" href="../../d2/d3/dumpctl_8c.html#a41">IoFreeDumpStack</a>(
00469     IN PDUMP_STACK_CONTEXT DumpStack
00470     );
00471 
00472 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
00473 <span class="comment">//</span>
00474 <span class="comment">// Define the structures used by the I/O system</span>
00475 <span class="comment">//</span>
00476 
00477 <span class="comment">//</span>
00478 <span class="comment">// Define empty typedefs for the _IRP, _DEVICE_OBJECT, and _DRIVER_OBJECT</span>
00479 <span class="comment">// structures so they may be referenced by function types before they are</span>
00480 <span class="comment">// actually defined.</span>
00481 <span class="comment">//</span>
00482 <span class="keyword">struct </span><a class="code" href="../../d7/d3/struct__DEVICE__DESCRIPTION.html">_DEVICE_DESCRIPTION</a>;
00483 <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a>;
00484 <span class="keyword">struct </span><a class="code" href="../../d7/d6/struct__DMA__ADAPTER.html">_DMA_ADAPTER</a>;
00485 <span class="keyword">struct </span><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">_DRIVER_OBJECT</a>;
00486 <span class="keyword">struct </span>_DRIVE_LAYOUT_INFORMATION;
00487 <span class="keyword">struct </span>_DISK_PARTITION;
00488 <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a>;
00489 <span class="keyword">struct </span><a class="code" href="../../d0/d2/struct__IRP.html">_IRP</a>;
00490 <span class="keyword">struct </span>_SCSI_REQUEST_BLOCK;
00491 
00492 <span class="comment">//</span>
00493 <span class="comment">// Define the I/O version of a DPC routine.</span>
00494 <span class="comment">//</span>
00495 
00496 <span class="keyword">typedef</span>
00497 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00498"></a><a class="code" href="../../d0/d5/io_8h.html#a282">00498</a> (*PIO_DPC_ROUTINE) (
00499     IN <a class="code" href="../../d1/d6/struct__KDPC.html">PKDPC</a> Dpc,
00500     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject,
00501     IN <span class="keyword">struct </span><a class="code" href="../../d0/d2/struct__IRP.html">_IRP</a> *<a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>,
00502     IN PVOID Context
00503     );
00504 
00505 <span class="comment">//</span>
00506 <span class="comment">// Define driver timer routine type.</span>
00507 <span class="comment">//</span>
00508 
00509 <span class="keyword">typedef</span>
00510 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00511"></a><a class="code" href="../../d0/d5/io_8h.html#a283">00511</a> (*PIO_TIMER_ROUTINE) (
00512     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject,
00513     IN PVOID Context
00514     );
00515 
00516 <span class="comment">//</span>
00517 <span class="comment">// Define driver initialization routine type.</span>
00518 <span class="comment">//</span>
00519 
00520 <span class="keyword">typedef</span>
00521 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
<a name="l00522"></a><a class="code" href="../../d0/d5/io_8h.html#a284">00522</a> (*PDRIVER_INITIALIZE) (
00523     IN <span class="keyword">struct </span><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">_DRIVER_OBJECT</a> *DriverObject,
00524     IN PUNICODE_STRING RegistryPath
00525     );
00526 
00527 <span class="comment">// end_wdm</span>
00528 <span class="comment">//</span>
00529 <span class="comment">// Define driver reinitialization routine type.</span>
00530 <span class="comment">//</span>
00531 
00532 <span class="keyword">typedef</span>
00533 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00534"></a><a class="code" href="../../d0/d5/io_8h.html#a285">00534</a> (*PDRIVER_REINITIALIZE) (
00535     IN <span class="keyword">struct </span><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">_DRIVER_OBJECT</a> *DriverObject,
00536     IN PVOID Context,
00537     IN ULONG <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>
00538     );
00539 
00540 <span class="comment">// begin_wdm begin_ntndis</span>
00541 <span class="comment">//</span>
00542 <span class="comment">// Define driver cancel routine type.</span>
00543 <span class="comment">//</span>
00544 
00545 <span class="keyword">typedef</span>
00546 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00547"></a><a class="code" href="../../d0/d5/io_8h.html#a286">00547</a> (*PDRIVER_CANCEL) (
00548     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject,
00549     IN <span class="keyword">struct </span><a class="code" href="../../d0/d2/struct__IRP.html">_IRP</a> *<a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>
00550     );
00551 
00552 <span class="comment">//</span>
00553 <span class="comment">// Define driver dispatch routine type.</span>
00554 <span class="comment">//</span>
00555 
00556 <span class="keyword">typedef</span>
00557 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
<a name="l00558"></a><a class="code" href="../../d0/d5/io_8h.html#a287">00558</a> (*PDRIVER_DISPATCH) (
00559     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject,
00560     IN <span class="keyword">struct </span><a class="code" href="../../d0/d2/struct__IRP.html">_IRP</a> *<a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>
00561     );
00562 
00563 <span class="comment">//</span>
00564 <span class="comment">// Define driver start I/O routine type.</span>
00565 <span class="comment">//</span>
00566 
00567 <span class="keyword">typedef</span>
00568 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00569"></a><a class="code" href="../../d0/d5/io_8h.html#a288">00569</a> (*PDRIVER_STARTIO) (
00570     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject,
00571     IN <span class="keyword">struct </span><a class="code" href="../../d0/d2/struct__IRP.html">_IRP</a> *<a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>
00572     );
00573 
00574 <span class="comment">//</span>
00575 <span class="comment">// Define driver unload routine type.</span>
00576 <span class="comment">//</span>
00577 
00578 <span class="keyword">typedef</span>
00579 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00580"></a><a class="code" href="../../d0/d5/io_8h.html#a289">00580</a> (*PDRIVER_UNLOAD) (
00581     IN <span class="keyword">struct </span><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">_DRIVER_OBJECT</a> *DriverObject
00582     );
00583 
00584 <span class="comment">//</span>
00585 <span class="comment">// Define driver AddDevice routine type.</span>
00586 <span class="comment">//</span>
00587 
00588 <span class="keyword">typedef</span>
00589 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
<a name="l00590"></a><a class="code" href="../../d0/d5/io_8h.html#a290">00590</a> (*PDRIVER_ADD_DEVICE) (
00591     IN <span class="keyword">struct </span><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">_DRIVER_OBJECT</a> *DriverObject,
00592     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *PhysicalDeviceObject
00593     );
00594 
00595 <span class="comment">// end_ntddk end_wdm end_nthal end_ntndis</span>
00596 
00597 <span class="comment">//</span>
00598 <span class="comment">// Define driver FS notification change routine type.</span>
00599 <span class="comment">//</span>
00600 
00601 <span class="keyword">typedef</span>
00602 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00603"></a><a class="code" href="../../d0/d5/io_8h.html#a291">00603</a> (*PDRIVER_FS_NOTIFICATION) (
00604     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject,
00605     IN BOOLEAN FsActive
00606     );
00607 
00608 <span class="comment">// begin_ntddk begin_wdm</span>
00609 
00610 <span class="comment">//</span>
00611 <span class="comment">// Define fast I/O procedure prototypes.</span>
00612 <span class="comment">//</span>
00613 <span class="comment">// Fast I/O read and write procedures.</span>
00614 <span class="comment">//</span>
00615 
00616 <span class="keyword">typedef</span>
00617 BOOLEAN
<a name="l00618"></a><a class="code" href="../../d0/d5/io_8h.html#a292">00618</a> (*PFAST_IO_CHECK_IF_POSSIBLE) (
00619     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00620     IN PLARGE_INTEGER FileOffset,
00621     IN ULONG Length,
00622     IN BOOLEAN Wait,
00623     IN ULONG LockKey,
00624     IN BOOLEAN CheckForReadOperation,
00625     OUT PIO_STATUS_BLOCK IoStatus,
00626     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00627     );
00628 
00629 <span class="keyword">typedef</span>
00630 BOOLEAN
<a name="l00631"></a><a class="code" href="../../d0/d5/io_8h.html#a293">00631</a> (*PFAST_IO_READ) (
00632     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00633     IN PLARGE_INTEGER FileOffset,
00634     IN ULONG Length,
00635     IN BOOLEAN Wait,
00636     IN ULONG LockKey,
00637     OUT PVOID <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>,
00638     OUT PIO_STATUS_BLOCK IoStatus,
00639     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00640     );
00641 
00642 <span class="keyword">typedef</span>
00643 BOOLEAN
<a name="l00644"></a><a class="code" href="../../d0/d5/io_8h.html#a294">00644</a> (*PFAST_IO_WRITE) (
00645     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00646     IN PLARGE_INTEGER FileOffset,
00647     IN ULONG Length,
00648     IN BOOLEAN Wait,
00649     IN ULONG LockKey,
00650     IN PVOID <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>,
00651     OUT PIO_STATUS_BLOCK IoStatus,
00652     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00653     );
00654 
00655 <span class="comment">//</span>
00656 <span class="comment">// Fast I/O query basic and standard information procedures.</span>
00657 <span class="comment">//</span>
00658 
00659 <span class="keyword">typedef</span>
00660 BOOLEAN
<a name="l00661"></a><a class="code" href="../../d0/d5/io_8h.html#a295">00661</a> (*PFAST_IO_QUERY_BASIC_INFO) (
00662     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00663     IN BOOLEAN Wait,
00664     OUT PFILE_BASIC_INFORMATION <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>,
00665     OUT PIO_STATUS_BLOCK IoStatus,
00666     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00667     );
00668 
00669 <span class="keyword">typedef</span>
00670 BOOLEAN
<a name="l00671"></a><a class="code" href="../../d0/d5/io_8h.html#a296">00671</a> (*PFAST_IO_QUERY_STANDARD_INFO) (
00672     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00673     IN BOOLEAN Wait,
00674     OUT PFILE_STANDARD_INFORMATION <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>,
00675     OUT PIO_STATUS_BLOCK IoStatus,
00676     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00677     );
00678 
00679 <span class="comment">//</span>
00680 <span class="comment">// Fast I/O lock and unlock procedures.</span>
00681 <span class="comment">//</span>
00682 
00683 <span class="keyword">typedef</span>
00684 BOOLEAN
<a name="l00685"></a><a class="code" href="../../d0/d5/io_8h.html#a297">00685</a> (*PFAST_IO_LOCK) (
00686     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00687     IN PLARGE_INTEGER FileOffset,
00688     IN PLARGE_INTEGER Length,
00689     <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> ProcessId,
00690     ULONG <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a51">Key</a>,
00691     BOOLEAN FailImmediately,
00692     BOOLEAN ExclusiveLock,
00693     OUT PIO_STATUS_BLOCK IoStatus,
00694     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00695     );
00696 
00697 <span class="keyword">typedef</span>
00698 BOOLEAN
<a name="l00699"></a><a class="code" href="../../d0/d5/io_8h.html#a298">00699</a> (*PFAST_IO_UNLOCK_SINGLE) (
00700     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00701     IN PLARGE_INTEGER FileOffset,
00702     IN PLARGE_INTEGER Length,
00703     <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> ProcessId,
00704     ULONG <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a51">Key</a>,
00705     OUT PIO_STATUS_BLOCK IoStatus,
00706     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00707     );
00708 
00709 <span class="keyword">typedef</span>
00710 BOOLEAN
<a name="l00711"></a><a class="code" href="../../d0/d5/io_8h.html#a299">00711</a> (*PFAST_IO_UNLOCK_ALL) (
00712     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00713     <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> ProcessId,
00714     OUT PIO_STATUS_BLOCK IoStatus,
00715     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00716     );
00717 
00718 <span class="keyword">typedef</span>
00719 BOOLEAN
<a name="l00720"></a><a class="code" href="../../d0/d5/io_8h.html#a300">00720</a> (*PFAST_IO_UNLOCK_ALL_BY_KEY) (
00721     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00722     PVOID ProcessId,
00723     ULONG <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a51">Key</a>,
00724     OUT PIO_STATUS_BLOCK IoStatus,
00725     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00726     );
00727 
00728 <span class="comment">//</span>
00729 <span class="comment">// Fast I/O device control procedure.</span>
00730 <span class="comment">//</span>
00731 
00732 <span class="keyword">typedef</span>
00733 BOOLEAN
<a name="l00734"></a><a class="code" href="../../d0/d5/io_8h.html#a301">00734</a> (*PFAST_IO_DEVICE_CONTROL) (
00735     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00736     IN BOOLEAN Wait,
00737     IN PVOID InputBuffer OPTIONAL,
00738     IN ULONG InputBufferLength,
00739     OUT PVOID OutputBuffer OPTIONAL,
00740     IN ULONG OutputBufferLength,
00741     IN ULONG IoControlCode,
00742     OUT PIO_STATUS_BLOCK IoStatus,
00743     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00744     );
00745 
00746 <span class="comment">//</span>
00747 <span class="comment">// Define callbacks for NtCreateSection to synchronize correctly with</span>
00748 <span class="comment">// the file system.  It pre-acquires the resources that will be needed</span>
00749 <span class="comment">// when calling to query and set file/allocation size in the file system.</span>
00750 <span class="comment">//</span>
00751 
00752 <span class="keyword">typedef</span>
00753 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00754"></a><a class="code" href="../../d0/d5/io_8h.html#a302">00754</a> (*PFAST_IO_ACQUIRE_FILE) (
00755     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject
00756     );
00757 
00758 <span class="keyword">typedef</span>
00759 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00760"></a><a class="code" href="../../d0/d5/io_8h.html#a303">00760</a> (*PFAST_IO_RELEASE_FILE) (
00761     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject
00762     );
00763 
00764 <span class="comment">//</span>
00765 <span class="comment">// Define callback for drivers that have device objects attached to lower-</span>
00766 <span class="comment">// level drivers' device objects.  This callback is made when the lower-level</span>
00767 <span class="comment">// driver is deleting its device object.</span>
00768 <span class="comment">//</span>
00769 
00770 <span class="keyword">typedef</span>
00771 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00772"></a><a class="code" href="../../d0/d5/io_8h.html#a304">00772</a> (*PFAST_IO_DETACH_DEVICE) (
00773     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *SourceDevice,
00774     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *TargetDevice
00775     );
00776 
00777 <span class="comment">//</span>
00778 <span class="comment">// This structure is used by the server to quickly get the information needed</span>
00779 <span class="comment">// to service a server open call.  It is takes what would be two fast io calls</span>
00780 <span class="comment">// one for basic information and the other for standard information and makes</span>
00781 <span class="comment">// it into one call.</span>
00782 <span class="comment">//</span>
00783 
00784 <span class="keyword">typedef</span>
00785 BOOLEAN
<a name="l00786"></a><a class="code" href="../../d0/d5/io_8h.html#a305">00786</a> (*PFAST_IO_QUERY_NETWORK_OPEN_INFO) (
00787     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00788     IN BOOLEAN Wait,
00789     OUT <span class="keyword">struct </span>_FILE_NETWORK_OPEN_INFORMATION *<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>,
00790     OUT <span class="keyword">struct </span>_IO_STATUS_BLOCK *IoStatus,
00791     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00792     );
00793 
00794 <span class="comment">//</span>
00795 <span class="comment">//  Define Mdl-based routines for the server to call</span>
00796 <span class="comment">//</span>
00797 
00798 <span class="keyword">typedef</span>
00799 BOOLEAN
<a name="l00800"></a><a class="code" href="../../d0/d5/io_8h.html#a306">00800</a> (*PFAST_IO_MDL_READ) (
00801     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00802     IN PLARGE_INTEGER FileOffset,
00803     IN ULONG Length,
00804     IN ULONG LockKey,
00805     OUT <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> *MdlChain,
00806     OUT PIO_STATUS_BLOCK IoStatus,
00807     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00808     );
00809 
00810 <span class="keyword">typedef</span>
00811 BOOLEAN
<a name="l00812"></a><a class="code" href="../../d0/d5/io_8h.html#a307">00812</a> (*PFAST_IO_MDL_READ_COMPLETE) (
00813     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00814     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MdlChain,
00815     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00816     );
00817 
00818 <span class="keyword">typedef</span>
00819 BOOLEAN
<a name="l00820"></a><a class="code" href="../../d0/d5/io_8h.html#a308">00820</a> (*PFAST_IO_PREPARE_MDL_WRITE) (
00821     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00822     IN PLARGE_INTEGER FileOffset,
00823     IN ULONG Length,
00824     IN ULONG LockKey,
00825     OUT <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> *MdlChain,
00826     OUT PIO_STATUS_BLOCK IoStatus,
00827     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00828     );
00829 
00830 <span class="keyword">typedef</span>
00831 BOOLEAN
<a name="l00832"></a><a class="code" href="../../d0/d5/io_8h.html#a309">00832</a> (*PFAST_IO_MDL_WRITE_COMPLETE) (
00833     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00834     IN PLARGE_INTEGER FileOffset,
00835     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MdlChain,
00836     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00837     );
00838 
00839 <span class="comment">//</span>
00840 <span class="comment">//  If this routine is present, it will be called by FsRtl</span>
00841 <span class="comment">//  to acquire the file for the mapped page writer.</span>
00842 <span class="comment">//</span>
00843 
00844 <span class="keyword">typedef</span>
00845 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
<a name="l00846"></a><a class="code" href="../../d0/d5/io_8h.html#a310">00846</a> (*PFAST_IO_ACQUIRE_FOR_MOD_WRITE) (
00847     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00848     IN PLARGE_INTEGER EndingOffset,
00849     OUT <span class="keyword">struct </span><a class="code" href="../../d6/d4/struct__ERESOURCE.html">_ERESOURCE</a> **ResourceToRelease,
00850     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00851              );
00852 
00853 <span class="keyword">typedef</span>
00854 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
<a name="l00855"></a><a class="code" href="../../d0/d5/io_8h.html#a311">00855</a> (*PFAST_IO_RELEASE_FOR_MOD_WRITE) (
00856     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00857     IN <span class="keyword">struct </span><a class="code" href="../../d6/d4/struct__ERESOURCE.html">_ERESOURCE</a> *ResourceToRelease,
00858     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00859              );
00860 
00861 <span class="comment">//</span>
00862 <span class="comment">//  If this routine is present, it will be called by FsRtl</span>
00863 <span class="comment">//  to acquire the file for the mapped page writer.</span>
00864 <span class="comment">//</span>
00865 
00866 <span class="keyword">typedef</span>
00867 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
<a name="l00868"></a><a class="code" href="../../d0/d5/io_8h.html#a312">00868</a> (*PFAST_IO_ACQUIRE_FOR_CCFLUSH) (
00869     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00870     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00871              );
00872 
00873 <span class="keyword">typedef</span>
00874 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
<a name="l00875"></a><a class="code" href="../../d0/d5/io_8h.html#a313">00875</a> (*PFAST_IO_RELEASE_FOR_CCFLUSH) (
00876     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00877     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00878              );
00879 
00880 <span class="keyword">typedef</span>
00881 BOOLEAN
<a name="l00882"></a><a class="code" href="../../d0/d5/io_8h.html#a314">00882</a> (*PFAST_IO_READ_COMPRESSED) (
00883     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00884     IN PLARGE_INTEGER FileOffset,
00885     IN ULONG Length,
00886     IN ULONG LockKey,
00887     OUT PVOID <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>,
00888     OUT <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> *MdlChain,
00889     OUT PIO_STATUS_BLOCK IoStatus,
00890     OUT <span class="keyword">struct </span>_COMPRESSED_DATA_INFO *CompressedDataInfo,
00891     IN ULONG CompressedDataInfoLength,
00892     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00893     );
00894 
00895 <span class="keyword">typedef</span>
00896 BOOLEAN
<a name="l00897"></a><a class="code" href="../../d0/d5/io_8h.html#a315">00897</a> (*PFAST_IO_WRITE_COMPRESSED) (
00898     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00899     IN PLARGE_INTEGER FileOffset,
00900     IN ULONG Length,
00901     IN ULONG LockKey,
00902     IN PVOID <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>,
00903     OUT <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> *MdlChain,
00904     OUT PIO_STATUS_BLOCK IoStatus,
00905     IN <span class="keyword">struct </span>_COMPRESSED_DATA_INFO *CompressedDataInfo,
00906     IN ULONG CompressedDataInfoLength,
00907     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00908     );
00909 
00910 <span class="keyword">typedef</span>
00911 BOOLEAN
<a name="l00912"></a><a class="code" href="../../d0/d5/io_8h.html#a316">00912</a> (*PFAST_IO_MDL_READ_COMPLETE_COMPRESSED) (
00913     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00914     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MdlChain,
00915     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00916     );
00917 
00918 <span class="keyword">typedef</span>
00919 BOOLEAN
<a name="l00920"></a><a class="code" href="../../d0/d5/io_8h.html#a317">00920</a> (*PFAST_IO_MDL_WRITE_COMPLETE_COMPRESSED) (
00921     IN <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *FileObject,
00922     IN PLARGE_INTEGER FileOffset,
00923     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MdlChain,
00924     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00925     );
00926 
00927 <span class="keyword">typedef</span>
00928 BOOLEAN
<a name="l00929"></a><a class="code" href="../../d0/d5/io_8h.html#a318">00929</a> (*PFAST_IO_QUERY_OPEN) (
00930     IN <span class="keyword">struct </span><a class="code" href="../../d0/d2/struct__IRP.html">_IRP</a> *<a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>,
00931     OUT PFILE_NETWORK_OPEN_INFORMATION NetworkInformation,
00932     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject
00933     );
00934 
00935 <span class="comment">//</span>
00936 <span class="comment">// Define the structure to describe the Fast I/O dispatch routines.  Any</span>
00937 <span class="comment">// additions made to this structure MUST be added monotonically to the end</span>
00938 <span class="comment">// of the structure, and fields CANNOT be removed from the middle.</span>
00939 <span class="comment">//</span>
00940 
<a name="l00941"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html">00941</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html">_FAST_IO_DISPATCH</a> {
<a name="l00942"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o0">00942</a>     ULONG <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o0">SizeOfFastIoDispatch</a>;
<a name="l00943"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o1">00943</a>     <a class="code" href="../../d0/d5/io_8h.html#a292">PFAST_IO_CHECK_IF_POSSIBLE</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o1">FastIoCheckIfPossible</a>;
<a name="l00944"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o2">00944</a>     <a class="code" href="../../d0/d5/io_8h.html#a293">PFAST_IO_READ</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o2">FastIoRead</a>;
<a name="l00945"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o3">00945</a>     <a class="code" href="../../d0/d5/io_8h.html#a294">PFAST_IO_WRITE</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o3">FastIoWrite</a>;
<a name="l00946"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o4">00946</a>     <a class="code" href="../../d0/d5/io_8h.html#a295">PFAST_IO_QUERY_BASIC_INFO</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o4">FastIoQueryBasicInfo</a>;
<a name="l00947"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o5">00947</a>     <a class="code" href="../../d0/d5/io_8h.html#a296">PFAST_IO_QUERY_STANDARD_INFO</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o5">FastIoQueryStandardInfo</a>;
<a name="l00948"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o6">00948</a>     <a class="code" href="../../d0/d5/io_8h.html#a297">PFAST_IO_LOCK</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o6">FastIoLock</a>;
<a name="l00949"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o7">00949</a>     <a class="code" href="../../d0/d5/io_8h.html#a298">PFAST_IO_UNLOCK_SINGLE</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o7">FastIoUnlockSingle</a>;
<a name="l00950"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o8">00950</a>     <a class="code" href="../../d0/d5/io_8h.html#a299">PFAST_IO_UNLOCK_ALL</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o8">FastIoUnlockAll</a>;
<a name="l00951"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o9">00951</a>     <a class="code" href="../../d0/d5/io_8h.html#a300">PFAST_IO_UNLOCK_ALL_BY_KEY</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o9">FastIoUnlockAllByKey</a>;
<a name="l00952"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o10">00952</a>     <a class="code" href="../../d0/d5/io_8h.html#a301">PFAST_IO_DEVICE_CONTROL</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o10">FastIoDeviceControl</a>;
<a name="l00953"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o11">00953</a>     <a class="code" href="../../d0/d5/io_8h.html#a302">PFAST_IO_ACQUIRE_FILE</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o11">AcquireFileForNtCreateSection</a>;
<a name="l00954"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o12">00954</a>     <a class="code" href="../../d0/d5/io_8h.html#a303">PFAST_IO_RELEASE_FILE</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o12">ReleaseFileForNtCreateSection</a>;
<a name="l00955"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o13">00955</a>     <a class="code" href="../../d0/d5/io_8h.html#a304">PFAST_IO_DETACH_DEVICE</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o13">FastIoDetachDevice</a>;
<a name="l00956"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o14">00956</a>     <a class="code" href="../../d0/d5/io_8h.html#a305">PFAST_IO_QUERY_NETWORK_OPEN_INFO</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o14">FastIoQueryNetworkOpenInfo</a>;
<a name="l00957"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o15">00957</a>     <a class="code" href="../../d0/d5/io_8h.html#a310">PFAST_IO_ACQUIRE_FOR_MOD_WRITE</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o15">AcquireForModWrite</a>;
<a name="l00958"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o16">00958</a>     <a class="code" href="../../d0/d5/io_8h.html#a306">PFAST_IO_MDL_READ</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o16">MdlRead</a>;
<a name="l00959"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o17">00959</a>     <a class="code" href="../../d0/d5/io_8h.html#a307">PFAST_IO_MDL_READ_COMPLETE</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o17">MdlReadComplete</a>;
<a name="l00960"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o18">00960</a>     <a class="code" href="../../d0/d5/io_8h.html#a308">PFAST_IO_PREPARE_MDL_WRITE</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o18">PrepareMdlWrite</a>;
<a name="l00961"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o19">00961</a>     <a class="code" href="../../d0/d5/io_8h.html#a309">PFAST_IO_MDL_WRITE_COMPLETE</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o19">MdlWriteComplete</a>;
<a name="l00962"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o20">00962</a>     <a class="code" href="../../d0/d5/io_8h.html#a314">PFAST_IO_READ_COMPRESSED</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o20">FastIoReadCompressed</a>;
<a name="l00963"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o21">00963</a>     <a class="code" href="../../d0/d5/io_8h.html#a315">PFAST_IO_WRITE_COMPRESSED</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o21">FastIoWriteCompressed</a>;
<a name="l00964"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o22">00964</a>     <a class="code" href="../../d0/d5/io_8h.html#a316">PFAST_IO_MDL_READ_COMPLETE_COMPRESSED</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o22">MdlReadCompleteCompressed</a>;
<a name="l00965"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o23">00965</a>     <a class="code" href="../../d0/d5/io_8h.html#a317">PFAST_IO_MDL_WRITE_COMPLETE_COMPRESSED</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o23">MdlWriteCompleteCompressed</a>;
<a name="l00966"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o24">00966</a>     <a class="code" href="../../d0/d5/io_8h.html#a318">PFAST_IO_QUERY_OPEN</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o24">FastIoQueryOpen</a>;
<a name="l00967"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o25">00967</a>     <a class="code" href="../../d0/d5/io_8h.html#a311">PFAST_IO_RELEASE_FOR_MOD_WRITE</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o25">ReleaseForModWrite</a>;
<a name="l00968"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o26">00968</a>     <a class="code" href="../../d0/d5/io_8h.html#a312">PFAST_IO_ACQUIRE_FOR_CCFLUSH</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o26">AcquireForCcFlush</a>;
<a name="l00969"></a><a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o27">00969</a>     <a class="code" href="../../d0/d5/io_8h.html#a313">PFAST_IO_RELEASE_FOR_CCFLUSH</a> <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html#o27">ReleaseForCcFlush</a>;
00970 } <a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html">FAST_IO_DISPATCH</a>, *<a class="code" href="../../d5/d9/struct__FAST__IO__DISPATCH.html">PFAST_IO_DISPATCH</a>;
00971 
00972 <span class="comment">// end_ntddk end_wdm</span>
00973 
00974 <span class="comment">// begin_ntddk begin_wdm begin_nthal</span>
00975 <span class="comment">//</span>
00976 <span class="comment">// Define the actions that a driver execution routine may request of the</span>
00977 <span class="comment">// adapter/controller allocation routines upon return.</span>
00978 <span class="comment">//</span>
00979 
<a name="l00980"></a><a class="code" href="../../d0/d5/io_8h.html#a601">00980</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d0/d5/io_8h.html#a601">_IO_ALLOCATION_ACTION</a> {
00981     <a class="code" href="../../d0/d5/io_8h.html#a601a409">KeepObject</a> = 1,
00982     <a class="code" href="../../d0/d5/io_8h.html#a601a410">DeallocateObject</a>,
00983     <a class="code" href="../../d0/d5/io_8h.html#a601a411">DeallocateObjectKeepRegisters</a>
00984 } <a class="code" href="../../d0/d5/io_8h.html#a321">IO_ALLOCATION_ACTION</a>, *<a class="code" href="../../d0/d5/io_8h.html#a322">PIO_ALLOCATION_ACTION</a>;
00985 
00986 <span class="comment">//</span>
00987 <span class="comment">// Define device driver adapter/controller execution routine.</span>
00988 <span class="comment">//</span>
00989 
00990 <span class="keyword">typedef</span>
00991 <a class="code" href="../../d0/d5/io_8h.html#a321">IO_ALLOCATION_ACTION</a>
<a name="l00992"></a><a class="code" href="../../d0/d5/io_8h.html#a323">00992</a> (*PDRIVER_CONTROL) (
00993     IN <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject,
00994     IN <span class="keyword">struct </span><a class="code" href="../../d0/d2/struct__IRP.html">_IRP</a> *<a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>,
00995     IN PVOID MapRegisterBase,
00996     IN PVOID Context
00997     );
00998 
00999 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
01000 
01001 <span class="comment">//</span>
01002 <span class="comment">// Define the I/O system's structure for a connected interrupt.  This is</span>
01003 <span class="comment">// useful for connecting an ISR to several different processors.</span>
01004 <span class="comment">//</span>
01005 
<a name="l01006"></a><a class="code" href="../../d3/d4/struct__IO__INTERRUPT__STRUCTURE.html">01006</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d4/struct__IO__INTERRUPT__STRUCTURE.html">_IO_INTERRUPT_STRUCTURE</a> {
<a name="l01007"></a><a class="code" href="../../d3/d4/struct__IO__INTERRUPT__STRUCTURE.html#o0">01007</a>     <a class="code" href="../../d0/d7/struct__KINTERRUPT.html">KINTERRUPT</a> <a class="code" href="../../d3/d4/struct__IO__INTERRUPT__STRUCTURE.html#o0">InterruptObject</a>;
<a name="l01008"></a><a class="code" href="../../d3/d4/struct__IO__INTERRUPT__STRUCTURE.html#o1">01008</a>     <a class="code" href="../../d0/d7/struct__KINTERRUPT.html">PKINTERRUPT</a> <a class="code" href="../../d3/d4/struct__IO__INTERRUPT__STRUCTURE.html#o1">InterruptArray</a>[<a class="code" href="../../d9/d5/ndismain_8h.html#a183">MAXIMUM_PROCESSORS</a>];
<a name="l01009"></a><a class="code" href="../../d3/d4/struct__IO__INTERRUPT__STRUCTURE.html#o2">01009</a>     KSPIN_LOCK <a class="code" href="../../d3/d4/struct__IO__INTERRUPT__STRUCTURE.html#o2">SpinLock</a>;
01010 } <a class="code" href="../../d3/d4/struct__IO__INTERRUPT__STRUCTURE.html">IO_INTERRUPT_STRUCTURE</a>, *<a class="code" href="../../d3/d4/struct__IO__INTERRUPT__STRUCTURE.html">PIO_INTERRUPT_STRUCTURE</a>;
01011 
01012 <span class="comment">// begin_ntddk begin_wdm begin_ntifs</span>
01013 <span class="comment">//</span>
01014 <span class="comment">// Define the I/O system's security context type for use by file system's</span>
01015 <span class="comment">// when checking access to volumes, files, and directories.</span>
01016 <span class="comment">//</span>
01017 
<a name="l01018"></a><a class="code" href="../../d1/d5/struct__IO__SECURITY__CONTEXT.html">01018</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d1/d5/struct__IO__SECURITY__CONTEXT.html">_IO_SECURITY_CONTEXT</a> {
<a name="l01019"></a><a class="code" href="../../d1/d5/struct__IO__SECURITY__CONTEXT.html#o0">01019</a>     PSECURITY_QUALITY_OF_SERVICE <a class="code" href="../../d1/d5/struct__IO__SECURITY__CONTEXT.html#o0">SecurityQos</a>;
<a name="l01020"></a><a class="code" href="../../d1/d5/struct__IO__SECURITY__CONTEXT.html#o1">01020</a>     <a class="code" href="../../d2/d5/struct__ACCESS__STATE.html">PACCESS_STATE</a> <a class="code" href="../../d1/d5/struct__IO__SECURITY__CONTEXT.html#o1">AccessState</a>;
<a name="l01021"></a><a class="code" href="../../d1/d5/struct__IO__SECURITY__CONTEXT.html#o2">01021</a>     ACCESS_MASK <a class="code" href="../../d1/d5/struct__IO__SECURITY__CONTEXT.html#o2">DesiredAccess</a>;
<a name="l01022"></a><a class="code" href="../../d1/d5/struct__IO__SECURITY__CONTEXT.html#o3">01022</a>     ULONG <a class="code" href="../../d1/d5/struct__IO__SECURITY__CONTEXT.html#o3">FullCreateOptions</a>;
01023 } <a class="code" href="../../d1/d5/struct__IO__SECURITY__CONTEXT.html">IO_SECURITY_CONTEXT</a>, *<a class="code" href="../../d1/d5/struct__IO__SECURITY__CONTEXT.html">PIO_SECURITY_CONTEXT</a>;
01024 
01025 <span class="comment">// end_ntddk end_wdm end_ntifs</span>
01026 
01027 <span class="comment">//</span>
01028 <span class="comment">// Define the I/O system's version of a timer.</span>
01029 <span class="comment">//</span>
01030 
<a name="l01031"></a><a class="code" href="../../d4/d9/struct__IO__TIMER.html">01031</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d4/d9/struct__IO__TIMER.html">_IO_TIMER</a> {
<a name="l01032"></a><a class="code" href="../../d4/d9/struct__IO__TIMER.html#o0">01032</a>     CSHORT <a class="code" href="../../d4/d9/struct__IO__TIMER.html#o0">Type</a>;
<a name="l01033"></a><a class="code" href="../../d4/d9/struct__IO__TIMER.html#o1">01033</a>     CSHORT <a class="code" href="../../d4/d9/struct__IO__TIMER.html#o1">TimerFlag</a>;
<a name="l01034"></a><a class="code" href="../../d4/d9/struct__IO__TIMER.html#o2">01034</a>     LIST_ENTRY <a class="code" href="../../d4/d9/struct__IO__TIMER.html#o2">TimerList</a>;
<a name="l01035"></a><a class="code" href="../../d4/d9/struct__IO__TIMER.html#o3">01035</a>     <a class="code" href="../../d0/d5/io_8h.html#a283">PIO_TIMER_ROUTINE</a> <a class="code" href="../../d4/d9/struct__IO__TIMER.html#o3">TimerRoutine</a>;
<a name="l01036"></a><a class="code" href="../../d4/d9/struct__IO__TIMER.html#o4">01036</a>     PVOID Context;
<a name="l01037"></a><a class="code" href="../../d4/d9/struct__IO__TIMER.html#o5">01037</a>     <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject;
01038 } <a class="code" href="../../d4/d9/struct__IO__TIMER.html">IO_TIMER</a>, *<a class="code" href="../../d4/d9/struct__IO__TIMER.html">PIO_TIMER</a>;
01039 
01040 <span class="comment">//</span>
01041 <span class="comment">// Define the client driver object extension header.</span>
01042 <span class="comment">//</span>
01043 
<a name="l01044"></a><a class="code" href="../../d1/d4/struct__IO__CLIENT__EXTENSION.html">01044</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d1/d4/struct__IO__CLIENT__EXTENSION.html">_IO_CLIENT_EXTENSION</a> {
<a name="l01045"></a><a class="code" href="../../d1/d4/struct__IO__CLIENT__EXTENSION.html#o0">01045</a>     <span class="keyword">struct </span><a class="code" href="../../d1/d4/struct__IO__CLIENT__EXTENSION.html">_IO_CLIENT_EXTENSION</a> *<a class="code" href="../../d1/d4/struct__IO__CLIENT__EXTENSION.html#o0">NextExtension</a>;
<a name="l01046"></a><a class="code" href="../../d1/d4/struct__IO__CLIENT__EXTENSION.html#o1">01046</a>     PVOID <a class="code" href="../../d1/d4/struct__IO__CLIENT__EXTENSION.html#o1">ClientIdentificationAddress</a>;
01047 } <a class="code" href="../../d1/d4/struct__IO__CLIENT__EXTENSION.html">IO_CLIENT_EXTENSION</a>, *<a class="code" href="../../d1/d4/struct__IO__CLIENT__EXTENSION.html">PIO_CLIENT_EXTENSION</a>;
01048 
01049 <span class="comment">// begin_ntddk begin_nthal begin_ntifs</span>
01050 <span class="comment">//</span>
01051 <span class="comment">// Define Volume Parameter Block (VPB) flags.</span>
01052 <span class="comment">//</span>
01053 
<a name="l01054"></a><a class="code" href="../../d0/d5/io_8h.html#a116">01054</a> <span class="preprocessor">#define VPB_MOUNTED                     0x00000001</span>
<a name="l01055"></a><a class="code" href="../../d0/d5/io_8h.html#a117">01055</a> <span class="preprocessor"></span><span class="preprocessor">#define VPB_LOCKED                      0x00000002</span>
<a name="l01056"></a><a class="code" href="../../d0/d5/io_8h.html#a118">01056</a> <span class="preprocessor"></span><span class="preprocessor">#define VPB_PERSISTENT                  0x00000004</span>
<a name="l01057"></a><a class="code" href="../../d0/d5/io_8h.html#a119">01057</a> <span class="preprocessor"></span><span class="preprocessor">#define VPB_REMOVE_PENDING              0x00000008</span>
<a name="l01058"></a><a class="code" href="../../d0/d5/io_8h.html#a120">01058</a> <span class="preprocessor"></span><span class="preprocessor">#define VPB_RAW_MOUNT                   0x00000010  </span>
01059 <span class="preprocessor"></span>
01060 
01061 <span class="comment">//</span>
01062 <span class="comment">// Volume Parameter Block (VPB)</span>
01063 <span class="comment">//</span>
01064 
<a name="l01065"></a><a class="code" href="../../d0/d5/io_8h.html#a121">01065</a> <span class="preprocessor">#define MAXIMUM_VOLUME_LABEL_LENGTH  (32 * sizeof(WCHAR)) // 32 characters</span>
01066 <span class="preprocessor"></span>
<a name="l01067"></a><a class="code" href="../../d7/d7/struct__VPB.html">01067</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d7/d7/struct__VPB.html">_VPB</a> {
<a name="l01068"></a><a class="code" href="../../d7/d7/struct__VPB.html#o0">01068</a>     CSHORT <a class="code" href="../../d7/d7/struct__VPB.html#o0">Type</a>;
<a name="l01069"></a><a class="code" href="../../d7/d7/struct__VPB.html#o1">01069</a>     CSHORT <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l01070"></a><a class="code" href="../../d7/d7/struct__VPB.html#o2">01070</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d7/d7/struct__VPB.html#o2">Flags</a>;
<a name="l01071"></a><a class="code" href="../../d7/d7/struct__VPB.html#o3">01071</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d7/d7/struct__VPB.html#o3">VolumeLabelLength</a>; <span class="comment">// in bytes</span>
<a name="l01072"></a><a class="code" href="../../d7/d7/struct__VPB.html#o4">01072</a>     <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *DeviceObject;
<a name="l01073"></a><a class="code" href="../../d7/d7/struct__VPB.html#o5">01073</a>     <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *<a class="code" href="../../d7/d7/struct__VPB.html#o5">RealDevice</a>;
<a name="l01074"></a><a class="code" href="../../d7/d7/struct__VPB.html#o6">01074</a>     ULONG <a class="code" href="../../d7/d7/struct__VPB.html#o6">SerialNumber</a>;
<a name="l01075"></a><a class="code" href="../../d7/d7/struct__VPB.html#o7">01075</a>     ULONG <a class="code" href="../../d7/d7/struct__VPB.html#o7">ReferenceCount</a>;
<a name="l01076"></a><a class="code" href="../../d7/d7/struct__VPB.html#o8">01076</a>     WCHAR <a class="code" href="../../d7/d7/struct__VPB.html#o8">VolumeLabel</a>[<a class="code" href="../../d0/d5/io_8h.html#a121">MAXIMUM_VOLUME_LABEL_LENGTH</a> / <span class="keyword">sizeof</span>(WCHAR)];
01077 } <a class="code" href="../../d7/d7/struct__VPB.html">VPB</a>, *<a class="code" href="../../d7/d7/struct__VPB.html">PVPB</a>;
01078 
01079 
01080 <span class="preprocessor">#if defined(_AXP64_)</span>
01081 <span class="preprocessor"></span>
01082 <span class="comment">//</span>
01083 <span class="comment">// Use __inline DMA macros (hal.h)</span>
01084 <span class="comment">//</span>
01085 <span class="preprocessor">#ifndef USE_DMA_MACROS</span>
01086 <span class="preprocessor"></span><span class="preprocessor">#define USE_DMA_MACROS</span>
01087 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
01088 <span class="preprocessor"></span>
01089 <span class="comment">//</span>
01090 <span class="comment">// Only PnP drivers!</span>
01091 <span class="comment">//</span>
01092 <span class="preprocessor">#ifndef NO_LEGACY_DRIVERS</span>
01093 <span class="preprocessor"></span><span class="preprocessor">#define NO_LEGACY_DRIVERS</span>
01094 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
01095 <span class="preprocessor"></span>
01096 <span class="preprocessor">#endif // _AXP64_</span>
01097 <span class="preprocessor"></span>
01098 
01099 <span class="preprocessor">#if defined(USE_DMA_MACROS) &amp;&amp; (defined(_NTDDK_) || defined(_NTDRIVER_))</span>
01100 <span class="preprocessor"></span>
01101 <span class="comment">//  begin_wdm</span>
01102 <span class="comment">//</span>
01103 <span class="comment">// Define object type specific fields of various objects used by the I/O system</span>
01104 <span class="comment">//</span>
01105 
01106 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d7/d6/struct__DMA__ADAPTER.html">_DMA_ADAPTER</a> *<a class="code" href="../../d7/d5/struct__ADAPTER__OBJECT.html">PADAPTER_OBJECT</a>;
01107 
01108 <span class="comment">// end_wdm</span>
01109 <span class="preprocessor">#else</span>
01110 <span class="preprocessor"></span>
01111 <span class="comment">//</span>
01112 <span class="comment">// Define object type specific fields of various objects used by the I/O system</span>
01113 <span class="comment">//</span>
01114 
<a name="l01115"></a><a class="code" href="../../d0/d5/io_8h.html#a334">01115</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d7/d5/struct__ADAPTER__OBJECT.html">_ADAPTER_OBJECT</a> *<a class="code" href="../../d7/d5/struct__ADAPTER__OBJECT.html">PADAPTER_OBJECT</a>; <span class="comment">// ntndis</span>
01116 
01117 <span class="preprocessor">#endif // USE_DMA_MACROS &amp;&amp; (_NTDDK_ || _NTDRIVER_)</span>
01118 <span class="preprocessor"></span>
01119 <span class="comment">//  begin_wdm</span>
01120 <span class="comment">//</span>
01121 <span class="comment">// Define Wait Context Block (WCB)</span>
01122 <span class="comment">//</span>
01123 
<a name="l01124"></a><a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html">01124</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html">_WAIT_CONTEXT_BLOCK</a> {
<a name="l01125"></a><a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html#o0">01125</a>     <a class="code" href="../../d0/d6/struct__KDEVICE__QUEUE__ENTRY.html">KDEVICE_QUEUE_ENTRY</a> <a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html#o0">WaitQueueEntry</a>;
<a name="l01126"></a><a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html#o1">01126</a>     <a class="code" href="../../d0/d5/io_8h.html#a323">PDRIVER_CONTROL</a> <a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html#o1">DeviceRoutine</a>;
<a name="l01127"></a><a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html#o2">01127</a>     PVOID <a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html#o2">DeviceContext</a>;
<a name="l01128"></a><a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html#o3">01128</a>     ULONG <a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html#o3">NumberOfMapRegisters</a>;
<a name="l01129"></a><a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html#o4">01129</a>     PVOID DeviceObject;
<a name="l01130"></a><a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html#o5">01130</a>     PVOID <a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html#o5">CurrentIrp</a>;
<a name="l01131"></a><a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html#o6">01131</a>     <a class="code" href="../../d1/d6/struct__KDPC.html">PKDPC</a> <a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html#o6">BufferChainingDpc</a>;
01132 } <a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html">WAIT_CONTEXT_BLOCK</a>, *<a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html">PWAIT_CONTEXT_BLOCK</a>;
01133 
01134 <span class="comment">// end_wdm</span>
01135 
<a name="l01136"></a><a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html">01136</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html">_CONTROLLER_OBJECT</a> {
<a name="l01137"></a><a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html#o0">01137</a>     CSHORT <a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html#o0">Type</a>;
<a name="l01138"></a><a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html#o1">01138</a>     CSHORT <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l01139"></a><a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html#o2">01139</a>     PVOID <a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html#o2">ControllerExtension</a>;
<a name="l01140"></a><a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html#o3">01140</a>     <a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html">KDEVICE_QUEUE</a> <a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html#o3">DeviceWaitQueue</a>;
01141 
<a name="l01142"></a><a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html#o4">01142</a>     ULONG <a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html#o4">Spare1</a>;
<a name="l01143"></a><a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html#o5">01143</a>     LARGE_INTEGER <a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html#o5">Spare2</a>;
01144 
01145 } <a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html">CONTROLLER_OBJECT</a>, *<a class="code" href="../../d1/d8/struct__CONTROLLER__OBJECT.html">PCONTROLLER_OBJECT</a>;
01146 
01147 <span class="comment">// begin_wdm</span>
01148 <span class="comment">//</span>
01149 <span class="comment">// Define Device Object (DO) flags</span>
01150 <span class="comment">//</span>
01151 <span class="comment">// end_wdm end_ntddk end_nthal end_ntifs</span>
01152 
<a name="l01153"></a><a class="code" href="../../d0/d5/io_8h.html#a122">01153</a> <span class="preprocessor">#define DO_VERIFY_VOLUME                0x00000002      // ntddk nthal ntifs</span>
<a name="l01154"></a><a class="code" href="../../d0/d5/io_8h.html#a123">01154</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_BUFFERED_IO                  0x00000004      // ntddk nthal ntifs wdm</span>
<a name="l01155"></a><a class="code" href="../../d0/d5/io_8h.html#a124">01155</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_EXCLUSIVE                    0x00000008      // ntddk nthal ntifs wdm</span>
<a name="l01156"></a><a class="code" href="../../d0/d5/io_8h.html#a125">01156</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_DIRECT_IO                    0x00000010      // ntddk nthal ntifs wdm</span>
<a name="l01157"></a><a class="code" href="../../d0/d5/io_8h.html#a126">01157</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_MAP_IO_BUFFER                0x00000020      // ntddk nthal ntifs wdm</span>
<a name="l01158"></a><a class="code" href="../../d0/d5/io_8h.html#a127">01158</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_DEVICE_HAS_NAME              0x00000040      // ntddk nthal ntifs</span>
<a name="l01159"></a><a class="code" href="../../d0/d5/io_8h.html#a128">01159</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_DEVICE_INITIALIZING          0x00000080      // ntddk nthal ntifs wdm</span>
<a name="l01160"></a><a class="code" href="../../d0/d5/io_8h.html#a129">01160</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_SYSTEM_BOOT_PARTITION        0x00000100      // ntddk nthal ntifs</span>
<a name="l01161"></a><a class="code" href="../../d0/d5/io_8h.html#a130">01161</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_LONG_TERM_REQUESTS           0x00000200      // ntddk nthal ntifs</span>
<a name="l01162"></a><a class="code" href="../../d0/d5/io_8h.html#a131">01162</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_NEVER_LAST_DEVICE            0x00000400      // ntddk nthal ntifs</span>
<a name="l01163"></a><a class="code" href="../../d0/d5/io_8h.html#a132">01163</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_SHUTDOWN_REGISTERED          0x00000800      // ntddk nthal ntifs wdm</span>
<a name="l01164"></a><a class="code" href="../../d0/d5/io_8h.html#a133">01164</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_BUS_ENUMERATED_DEVICE        0x00001000      // ntddk nthal ntifs wdm</span>
<a name="l01165"></a><a class="code" href="../../d0/d5/io_8h.html#a134">01165</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_POWER_PAGABLE                0x00002000      // ntddk nthal ntifs wdm</span>
<a name="l01166"></a><a class="code" href="../../d0/d5/io_8h.html#a135">01166</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_POWER_INRUSH                 0x00004000      // ntddk nthal ntifs wdm</span>
<a name="l01167"></a><a class="code" href="../../d0/d5/io_8h.html#a136">01167</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_POWER_NOOP                   0x00008000</span>
<a name="l01168"></a><a class="code" href="../../d0/d5/io_8h.html#a137">01168</a> <span class="preprocessor"></span><span class="preprocessor">#define DO_LOW_PRIORITY_FILESYSTEM      0x00010000      // ntddk nthal ntifs</span>
01169 <span class="preprocessor"></span>
01170 <span class="comment">// begin_wdm begin_ntddk begin_nthal begin_ntifs</span>
01171 <span class="comment">//</span>
01172 <span class="comment">// Device Object structure definition</span>
01173 <span class="comment">//</span>
01174 
<a name="l01175"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">01175</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> {
<a name="l01176"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o0">01176</a>     CSHORT <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o0">Type</a>;
<a name="l01177"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o1">01177</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l01178"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o2">01178</a>     LONG <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o2">ReferenceCount</a>;
<a name="l01179"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o3">01179</a>     <span class="keyword">struct </span><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">_DRIVER_OBJECT</a> *DriverObject;
<a name="l01180"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o4">01180</a>     <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *<a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o4">NextDevice</a>;
<a name="l01181"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o5">01181</a>     <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *<a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o5">AttachedDevice</a>;
<a name="l01182"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o6">01182</a>     <span class="keyword">struct </span><a class="code" href="../../d0/d2/struct__IRP.html">_IRP</a> *<a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o6">CurrentIrp</a>;
<a name="l01183"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o7">01183</a>     <a class="code" href="../../d0/d5/io_8h.html#a329">PIO_TIMER</a> <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o7">Timer</a>;
<a name="l01184"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o8">01184</a>     ULONG <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o8">Flags</a>;                                <span class="comment">// See above:  DO_...</span>
<a name="l01185"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o9">01185</a>     ULONG <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o9">Characteristics</a>;                      <span class="comment">// See ntioapi:  FILE_...</span>
<a name="l01186"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o10">01186</a>     <a class="code" href="../../d0/d5/io_8h.html#a333">PVPB</a> <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o10">Vpb</a>;
<a name="l01187"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o11">01187</a>     PVOID <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o11">DeviceExtension</a>;
<a name="l01188"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o12">01188</a>     DEVICE_TYPE <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o12">DeviceType</a>;
<a name="l01189"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o13">01189</a>     CCHAR <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o13">StackSize</a>;
01190     <span class="keyword">union </span>{
<a name="l01191"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o14">01191</a>         LIST_ENTRY ListEntry;
<a name="l01192"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o15">01192</a>         <a class="code" href="../../d8/d7/struct__WAIT__CONTEXT__BLOCK.html">WAIT_CONTEXT_BLOCK</a> Wcb;
01193     } Queue;
<a name="l01194"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o17">01194</a>     ULONG <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o17">AlignmentRequirement</a>;
<a name="l01195"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o18">01195</a>     <a class="code" href="../../d9/d5/struct__KDEVICE__QUEUE.html">KDEVICE_QUEUE</a> <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o18">DeviceQueue</a>;
<a name="l01196"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o19">01196</a>     <a class="code" href="../../d1/d6/struct__KDPC.html">KDPC</a> Dpc;
01197 
01198     <span class="comment">//</span>
01199     <span class="comment">//  The following field is for exclusive use by the filesystem to keep</span>
01200     <span class="comment">//  track of the number of Fsp threads currently using the device</span>
01201     <span class="comment">//</span>
01202 
<a name="l01203"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o20">01203</a>     ULONG <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o20">ActiveThreadCount</a>;
<a name="l01204"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o21">01204</a>     PSECURITY_DESCRIPTOR <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o21">SecurityDescriptor</a>;
<a name="l01205"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o22">01205</a>     <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o22">DeviceLock</a>;
01206 
<a name="l01207"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o23">01207</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o23">SectorSize</a>;
<a name="l01208"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o24">01208</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o24">Spare1</a>;
01209 
<a name="l01210"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o25">01210</a>     <span class="keyword">struct </span><a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html">_DEVOBJ_EXTENSION</a>  *<a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o25">DeviceObjectExtension</a>;
<a name="l01211"></a><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o26">01211</a>     PVOID  <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o26">Reserved</a>;
01212 } <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">DEVICE_OBJECT</a>;
<a name="l01213"></a><a class="code" href="../../d0/d5/io_8h.html#a340">01213</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">_DEVICE_OBJECT</a> *<a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>; <span class="comment">// ntndis</span>
01214 
01215 <span class="comment">// end_ntddk end_nthal end_ntifs end_wdm</span>
01216 <span class="comment">//</span>
01217 <span class="comment">// Define the Device Object Extension Flags</span>
01218 <span class="comment">//</span>
01219 
<a name="l01220"></a><a class="code" href="../../d0/d5/io_8h.html#a138">01220</a> <span class="preprocessor">#define DOE_UNLOAD_PENDING              0x00000001</span>
<a name="l01221"></a><a class="code" href="../../d0/d5/io_8h.html#a139">01221</a> <span class="preprocessor"></span><span class="preprocessor">#define DOE_DELETE_PENDING              0x00000002</span>
<a name="l01222"></a><a class="code" href="../../d0/d5/io_8h.html#a140">01222</a> <span class="preprocessor"></span><span class="preprocessor">#define DOE_REMOVE_PENDING              0x00000004</span>
<a name="l01223"></a><a class="code" href="../../d0/d5/io_8h.html#a141">01223</a> <span class="preprocessor"></span><span class="preprocessor">#define DOE_REMOVE_PROCESSED            0x00000008</span>
<a name="l01224"></a><a class="code" href="../../d0/d5/io_8h.html#a142">01224</a> <span class="preprocessor"></span><span class="preprocessor">#define DOE_START_PENDING               0x00000010</span>
01225 <span class="preprocessor"></span>
01226 <span class="comment">// begin_ntddk begin_nthal begin_ntifs begin_wdm</span>
01227 
01228 <span class="keyword">struct  </span>_DEVICE_OBJECT_POWER_EXTENSION;
01229 
<a name="l01230"></a><a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html">01230</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html">_DEVOBJ_EXTENSION</a> {
01231 
<a name="l01232"></a><a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o0">01232</a>     CSHORT          <a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o0">Type</a>;
<a name="l01233"></a><a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o1">01233</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>          <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
01234 
01235     <span class="comment">//</span>
01236     <span class="comment">// Public part of the DeviceObjectExtension structure</span>
01237     <span class="comment">//</span>
01238 
<a name="l01239"></a><a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o2">01239</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>  DeviceObject;               <span class="comment">// owning device object</span>
01240 
01241 <span class="comment">// end_ntddk end_nthal end_ntifs end_wdm</span>
01242 
01243     <span class="comment">//</span>
01244     <span class="comment">// Universal Power Data - all device objects must have this</span>
01245     <span class="comment">//</span>
01246 
<a name="l01247"></a><a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o3">01247</a>     ULONG           <a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o3">PowerFlags</a>;             <span class="comment">// see ntos\po\pop.h</span>
01248                                             <span class="comment">// WARNING: Access via PO macros</span>
01249                                             <span class="comment">// and with PO locking rules ONLY.</span>
01250 
01251     <span class="comment">//</span>
01252     <span class="comment">// Pointer to the non-universal power data</span>
01253     <span class="comment">//  Power data that only some device objects need is stored in the</span>
01254     <span class="comment">//  device object power extension -&gt; DOPE</span>
01255     <span class="comment">//  see po.h</span>
01256     <span class="comment">//</span>
01257 
<a name="l01258"></a><a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o4">01258</a>     <span class="keyword">struct          </span>_DEVICE_OBJECT_POWER_EXTENSION  *<a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o4">Dope</a>;
01259 
01260     <span class="comment">//</span>
01261     <span class="comment">// power state information</span>
01262     <span class="comment">//</span>
01263 
01264     <span class="comment">//</span>
01265     <span class="comment">// Device object extension flags.  Protected by the IopDatabaseLock.</span>
01266     <span class="comment">//</span>
01267 
<a name="l01268"></a><a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o5">01268</a>     ULONG <a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o5">ExtensionFlags</a>;
01269 
01270     <span class="comment">//</span>
01271     <span class="comment">// PnP manager fields</span>
01272     <span class="comment">//</span>
01273 
<a name="l01274"></a><a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o6">01274</a>     PVOID           <a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o6">DeviceNode</a>;
01275 
01276     <span class="comment">//</span>
01277     <span class="comment">// AttachedTo is a pointer to the device object that this device</span>
01278     <span class="comment">// object is attached to.  The attachment chain is now doubly</span>
01279     <span class="comment">// linked: this pointer and DeviceObject-&gt;AttachedDevice provide the</span>
01280     <span class="comment">// linkage.</span>
01281     <span class="comment">//</span>
01282 
<a name="l01283"></a><a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o7">01283</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>  <a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o7">AttachedTo</a>;
01284 
01285     <span class="comment">//</span>
01286     <span class="comment">// Doubly-linked list of file objects</span>
01287     <span class="comment">//</span>
01288 
<a name="l01289"></a><a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o8">01289</a>     LIST_ENTRY      <a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o8">FileObjectList</a>;
01290 
01291 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
01292 
01293 } <a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html">DEVOBJ_EXTENSION</a>, *<a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html">PDEVOBJ_EXTENSION</a>;
01294 
01295 <span class="comment">//</span>
01296 <span class="comment">// Define Driver Object (DRVO) flags</span>
01297 <span class="comment">//</span>
01298 
<a name="l01299"></a><a class="code" href="../../d0/d5/io_8h.html#a143">01299</a> <span class="preprocessor">#define DRVO_UNLOAD_INVOKED             0x00000001</span>
<a name="l01300"></a><a class="code" href="../../d0/d5/io_8h.html#a144">01300</a> <span class="preprocessor"></span><span class="preprocessor">#define DRVO_LEGACY_DRIVER              0x00000002</span>
<a name="l01301"></a><a class="code" href="../../d0/d5/io_8h.html#a145">01301</a> <span class="preprocessor"></span><span class="preprocessor">#define DRVO_BUILTIN_DRIVER             0x00000004    // Driver objects for Hal, PnP Mgr</span>
01302 <span class="preprocessor"></span><span class="comment">// end_wdm</span>
<a name="l01303"></a><a class="code" href="../../d0/d5/io_8h.html#a146">01303</a> <span class="preprocessor">#define DRVO_REINIT_REGISTERED          0x00000008</span>
<a name="l01304"></a><a class="code" href="../../d0/d5/io_8h.html#a147">01304</a> <span class="preprocessor"></span><span class="preprocessor">#define DRVO_INITIALIZED                0x00000010</span>
<a name="l01305"></a><a class="code" href="../../d0/d5/io_8h.html#a148">01305</a> <span class="preprocessor"></span><span class="preprocessor">#define DRVO_BOOTREINIT_REGISTERED      0x00000020</span>
<a name="l01306"></a><a class="code" href="../../d0/d5/io_8h.html#a149">01306</a> <span class="preprocessor"></span><span class="preprocessor">#define DRVO_LEGACY_RESOURCES           0x00000040</span>
01307 <span class="preprocessor"></span><span class="comment">// begin_wdm</span>
01308 
<a name="l01309"></a><a class="code" href="../../d1/d9/struct__DRIVER__EXTENSION.html">01309</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d1/d9/struct__DRIVER__EXTENSION.html">_DRIVER_EXTENSION</a> {
01310 
01311     <span class="comment">//</span>
01312     <span class="comment">// Back pointer to Driver Object</span>
01313     <span class="comment">//</span>
01314 
<a name="l01315"></a><a class="code" href="../../d1/d9/struct__DRIVER__EXTENSION.html#o0">01315</a>     <span class="keyword">struct </span><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">_DRIVER_OBJECT</a> *DriverObject;
01316 
01317     <span class="comment">//</span>
01318     <span class="comment">// The AddDevice entry point is called by the Plug &amp; Play manager</span>
01319     <span class="comment">// to inform the driver when a new device instance arrives that this</span>
01320     <span class="comment">// driver must control.</span>
01321     <span class="comment">//</span>
01322 
<a name="l01323"></a><a class="code" href="../../d1/d9/struct__DRIVER__EXTENSION.html#o1">01323</a>     <a class="code" href="../../d0/d5/io_8h.html#a290">PDRIVER_ADD_DEVICE</a> <a class="code" href="../../d1/d9/struct__DRIVER__EXTENSION.html#o1">AddDevice</a>;
01324 
01325     <span class="comment">//</span>
01326     <span class="comment">// The count field is used to count the number of times the driver has</span>
01327     <span class="comment">// had its registered reinitialization routine invoked.</span>
01328     <span class="comment">//</span>
01329 
<a name="l01330"></a><a class="code" href="../../d1/d9/struct__DRIVER__EXTENSION.html#o2">01330</a>     ULONG <a class="code" href="../../d1/d9/struct__DRIVER__EXTENSION.html#o2">Count</a>;
01331 
01332     <span class="comment">//</span>
01333     <span class="comment">// The service name field is used by the pnp manager to determine</span>
01334     <span class="comment">// where the driver related info is stored in the registry.</span>
01335     <span class="comment">//</span>
01336 
<a name="l01337"></a><a class="code" href="../../d1/d9/struct__DRIVER__EXTENSION.html#o3">01337</a>     UNICODE_STRING <a class="code" href="../../d1/d9/struct__DRIVER__EXTENSION.html#o3">ServiceKeyName</a>;
01338 
01339     <span class="comment">//</span>
01340     <span class="comment">// Note: any new shared fields get added here.</span>
01341     <span class="comment">//</span>
01342 
01343 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
01344 
01345     <span class="comment">//</span>
01346     <span class="comment">// The client driver object extension field is used by class driver</span>
01347     <span class="comment">// to store per driver information.</span>
01348     <span class="comment">//</span>
01349 
<a name="l01350"></a><a class="code" href="../../d1/d9/struct__DRIVER__EXTENSION.html#o4">01350</a>     <a class="code" href="../../d0/d5/io_8h.html#a331">PIO_CLIENT_EXTENSION</a> <a class="code" href="../../d1/d9/struct__DRIVER__EXTENSION.html#o4">ClientDriverExtension</a>;
01351 
01352 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
01353 
01354 } <a class="code" href="../../d1/d9/struct__DRIVER__EXTENSION.html">DRIVER_EXTENSION</a>, *<a class="code" href="../../d1/d9/struct__DRIVER__EXTENSION.html">PDRIVER_EXTENSION</a>;
01355 
<a name="l01356"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">01356</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">_DRIVER_OBJECT</a> {
<a name="l01357"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o0">01357</a>     CSHORT <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o0">Type</a>;
<a name="l01358"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o1">01358</a>     CSHORT <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
01359 
01360     <span class="comment">//</span>
01361     <span class="comment">// The following links all of the devices created by a single driver</span>
01362     <span class="comment">// together on a list, and the Flags word provides an extensible flag</span>
01363     <span class="comment">// location for driver objects.</span>
01364     <span class="comment">//</span>
01365 
<a name="l01366"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o2">01366</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject;
<a name="l01367"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o3">01367</a>     ULONG <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o3">Flags</a>;
01368 
01369     <span class="comment">//</span>
01370     <span class="comment">// The following section describes where the driver is loaded.  The count</span>
01371     <span class="comment">// field is used to count the number of times the driver has had its</span>
01372     <span class="comment">// registered reinitialization routine invoked.</span>
01373     <span class="comment">//</span>
01374 
<a name="l01375"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o4">01375</a>     PVOID <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o4">DriverStart</a>;
<a name="l01376"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o5">01376</a>     ULONG <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o5">DriverSize</a>;
<a name="l01377"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o6">01377</a>     PVOID <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o6">DriverSection</a>;
<a name="l01378"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o7">01378</a>     <a class="code" href="../../d0/d5/io_8h.html#a344">PDRIVER_EXTENSION</a> <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o7">DriverExtension</a>;
01379 
01380     <span class="comment">//</span>
01381     <span class="comment">// The driver name field is used by the error log thread</span>
01382     <span class="comment">// determine the name of the driver that an I/O request is/was bound.</span>
01383     <span class="comment">//</span>
01384 
<a name="l01385"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o8">01385</a>     UNICODE_STRING <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o8">DriverName</a>;
01386 
01387     <span class="comment">//</span>
01388     <span class="comment">// The following section is for registry support.  Thise is a pointer</span>
01389     <span class="comment">// to the path to the hardware information in the registry</span>
01390     <span class="comment">//</span>
01391 
<a name="l01392"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o9">01392</a>     PUNICODE_STRING <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o9">HardwareDatabase</a>;
01393 
01394     <span class="comment">//</span>
01395     <span class="comment">// The following section contains the optional pointer to an array of</span>
01396     <span class="comment">// alternate entry points to a driver for "fast I/O" support.  Fast I/O</span>
01397     <span class="comment">// is performed by invoking the driver routine directly with separate</span>
01398     <span class="comment">// parameters, rather than using the standard IRP call mechanism.  Note</span>
01399     <span class="comment">// that these functions may only be used for synchronous I/O, and when</span>
01400     <span class="comment">// the file is cached.</span>
01401     <span class="comment">//</span>
01402 
<a name="l01403"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o10">01403</a>     <a class="code" href="../../d0/d5/io_8h.html#a320">PFAST_IO_DISPATCH</a> <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o10">FastIoDispatch</a>;
01404 
01405     <span class="comment">//</span>
01406     <span class="comment">// The following section describes the entry points to this particular</span>
01407     <span class="comment">// driver.  Note that the major function dispatch table must be the last</span>
01408     <span class="comment">// field in the object so that it remains extensible.</span>
01409     <span class="comment">//</span>
01410 
<a name="l01411"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o11">01411</a>     <a class="code" href="../../d0/d5/io_8h.html#a284">PDRIVER_INITIALIZE</a> <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o11">DriverInit</a>;
<a name="l01412"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o12">01412</a>     <a class="code" href="../../d0/d5/io_8h.html#a288">PDRIVER_STARTIO</a> <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o12">DriverStartIo</a>;
<a name="l01413"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o13">01413</a>     <a class="code" href="../../d0/d5/io_8h.html#a289">PDRIVER_UNLOAD</a> <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o13">DriverUnload</a>;
<a name="l01414"></a><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o14">01414</a>     <a class="code" href="../../d0/d5/io_8h.html#a287">PDRIVER_DISPATCH</a> <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o14">MajorFunction</a>[<a class="code" href="../../d0/d5/io_8h.html#a42">IRP_MJ_MAXIMUM_FUNCTION</a> + 1];
01415 
01416 } <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">DRIVER_OBJECT</a>;
<a name="l01417"></a><a class="code" href="../../d0/d5/io_8h.html#a346">01417</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">_DRIVER_OBJECT</a> *<a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a>; <span class="comment">// ntndis</span>
01418 
01419 
01420 <span class="comment">// end_ntddk end_wdm end_ntifs</span>
01421 
01422 <span class="comment">//</span>
01423 <span class="comment">// Device Handler Object.   There is one of these objects per PnP</span>
01424 <span class="comment">// device.  This object is given to the device driver as a PVOID</span>
01425 <span class="comment">// and is used by the driver to refer to a particular device.</span>
01426 <span class="comment">//</span>
01427 
<a name="l01428"></a><a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html">01428</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html">_DEVICE_HANDLER_OBJECT</a> {
<a name="l01429"></a><a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html#o0">01429</a>     CSHORT <a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html#o0">Type</a>;
<a name="l01430"></a><a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html#o1">01430</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
01431 
01432     <span class="comment">//</span>
01433     <span class="comment">// Indentifies which bus extender this device handler</span>
01434     <span class="comment">// object is associated with</span>
01435     <span class="comment">//</span>
01436 
<a name="l01437"></a><a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html#o2">01437</a>     <span class="keyword">struct </span><a class="code" href="../../d6/d5/struct__BUS__HANDLER.html">_BUS_HANDLER</a> *<a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html#o2">BusHandler</a>;
01438 
01439     <span class="comment">//</span>
01440     <span class="comment">// The associated SlotNumber for this device handler</span>
01441     <span class="comment">//</span>
01442 
<a name="l01443"></a><a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html#o3">01443</a>     ULONG <a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html#o3">SlotNumber</a>;
01444 
01445 <span class="comment">// end_nthal</span>
01446 
01447     <span class="comment">//</span>
01448     <span class="comment">// System internal fields</span>
01449     <span class="comment">//</span>
01450 
01451     <span class="comment">//</span>
01452     <span class="comment">// Pnp stuff</span>
01453     <span class="comment">//</span>
01454 
<a name="l01455"></a><a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html#o4">01455</a>     UNICODE_STRING <a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html#o4">ServiceKeyName</a>;
<a name="l01456"></a><a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html#o5">01456</a>     ULONG <a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html#o5">InstanceOrdinal</a>;
01457 
01458 <span class="comment">// begin_nthal</span>
01459 
01460 
01461 } <a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html">DEVICE_HANDLER_OBJECT</a>, *<a class="code" href="../../d9/d3/struct__DEVICE__HANDLER__OBJECT.html">PDEVICE_HANDLER_OBJECT</a>;
01462 
01463 <span class="comment">// begin_ntddk begin_wdm begin_ntifs</span>
01464 
01465 <span class="comment">//</span>
01466 <span class="comment">// The following structure is pointed to by the SectionObject pointer field</span>
01467 <span class="comment">// of a file object, and is allocated by the various NT file systems.</span>
01468 <span class="comment">//</span>
01469 
<a name="l01470"></a><a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html">01470</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html">_SECTION_OBJECT_POINTERS</a> {
<a name="l01471"></a><a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html#o0">01471</a>     PVOID <a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html#o0">DataSectionObject</a>;
<a name="l01472"></a><a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html#o1">01472</a>     PVOID <a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html#o1">SharedCacheMap</a>;
<a name="l01473"></a><a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html#o2">01473</a>     PVOID <a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html#o2">ImageSectionObject</a>;
01474 } <a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html">SECTION_OBJECT_POINTERS</a>;
<a name="l01475"></a><a class="code" href="../../d0/d5/io_8h.html#a350">01475</a> <span class="keyword">typedef</span> <a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html">SECTION_OBJECT_POINTERS</a> *<a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html">PSECTION_OBJECT_POINTERS</a>;
01476 
01477 <span class="comment">//</span>
01478 <span class="comment">// Define the format of a completion message.</span>
01479 <span class="comment">//</span>
01480 
<a name="l01481"></a><a class="code" href="../../d2/d4/struct__IO__COMPLETION__CONTEXT.html">01481</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d2/d4/struct__IO__COMPLETION__CONTEXT.html">_IO_COMPLETION_CONTEXT</a> {
<a name="l01482"></a><a class="code" href="../../d2/d4/struct__IO__COMPLETION__CONTEXT.html#o0">01482</a>     PVOID <a class="code" href="../../d2/d4/struct__IO__COMPLETION__CONTEXT.html#o0">Port</a>;
<a name="l01483"></a><a class="code" href="../../d2/d4/struct__IO__COMPLETION__CONTEXT.html#o1">01483</a>     PVOID <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a51">Key</a>;
01484 } <a class="code" href="../../d2/d4/struct__IO__COMPLETION__CONTEXT.html">IO_COMPLETION_CONTEXT</a>, *<a class="code" href="../../d2/d4/struct__IO__COMPLETION__CONTEXT.html">PIO_COMPLETION_CONTEXT</a>;
01485 
01486 <span class="comment">//</span>
01487 <span class="comment">// Define File Object (FO) flags</span>
01488 <span class="comment">//</span>
01489 
<a name="l01490"></a><a class="code" href="../../d0/d5/io_8h.html#a150">01490</a> <span class="preprocessor">#define FO_FILE_OPEN                    0x00000001</span>
<a name="l01491"></a><a class="code" href="../../d0/d5/io_8h.html#a151">01491</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_SYNCHRONOUS_IO               0x00000002</span>
<a name="l01492"></a><a class="code" href="../../d0/d5/io_8h.html#a152">01492</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_ALERTABLE_IO                 0x00000004</span>
<a name="l01493"></a><a class="code" href="../../d0/d5/io_8h.html#a153">01493</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_NO_INTERMEDIATE_BUFFERING    0x00000008</span>
<a name="l01494"></a><a class="code" href="../../d0/d5/io_8h.html#a154">01494</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_WRITE_THROUGH                0x00000010</span>
<a name="l01495"></a><a class="code" href="../../d0/d5/io_8h.html#a155">01495</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_SEQUENTIAL_ONLY              0x00000020</span>
<a name="l01496"></a><a class="code" href="../../d0/d5/io_8h.html#a156">01496</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_CACHE_SUPPORTED              0x00000040</span>
<a name="l01497"></a><a class="code" href="../../d0/d5/io_8h.html#a157">01497</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_NAMED_PIPE                   0x00000080</span>
<a name="l01498"></a><a class="code" href="../../d0/d5/io_8h.html#a158">01498</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_STREAM_FILE                  0x00000100</span>
<a name="l01499"></a><a class="code" href="../../d0/d5/io_8h.html#a159">01499</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_MAILSLOT                     0x00000200</span>
<a name="l01500"></a><a class="code" href="../../d0/d5/io_8h.html#a160">01500</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_GENERATE_AUDIT_ON_CLOSE      0x00000400</span>
<a name="l01501"></a><a class="code" href="../../d0/d5/io_8h.html#a161">01501</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_DIRECT_DEVICE_OPEN           0x00000800</span>
<a name="l01502"></a><a class="code" href="../../d0/d5/io_8h.html#a162">01502</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_FILE_MODIFIED                0x00001000</span>
<a name="l01503"></a><a class="code" href="../../d0/d5/io_8h.html#a163">01503</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_FILE_SIZE_CHANGED            0x00002000</span>
<a name="l01504"></a><a class="code" href="../../d0/d5/io_8h.html#a164">01504</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_CLEANUP_COMPLETE             0x00004000</span>
<a name="l01505"></a><a class="code" href="../../d0/d5/io_8h.html#a165">01505</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_TEMPORARY_FILE               0x00008000</span>
<a name="l01506"></a><a class="code" href="../../d0/d5/io_8h.html#a166">01506</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_DELETE_ON_CLOSE              0x00010000</span>
<a name="l01507"></a><a class="code" href="../../d0/d5/io_8h.html#a167">01507</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_OPENED_CASE_SENSITIVE        0x00020000</span>
<a name="l01508"></a><a class="code" href="../../d0/d5/io_8h.html#a168">01508</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_HANDLE_CREATED               0x00040000</span>
<a name="l01509"></a><a class="code" href="../../d0/d5/io_8h.html#a169">01509</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_FILE_FAST_IO_READ            0x00080000</span>
<a name="l01510"></a><a class="code" href="../../d0/d5/io_8h.html#a170">01510</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_RANDOM_ACCESS                0x00100000</span>
<a name="l01511"></a><a class="code" href="../../d0/d5/io_8h.html#a171">01511</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_FILE_OPEN_CANCELLED          0x00200000</span>
<a name="l01512"></a><a class="code" href="../../d0/d5/io_8h.html#a172">01512</a> <span class="preprocessor"></span><span class="preprocessor">#define FO_VOLUME_OPEN                  0x00400000</span>
01513 <span class="preprocessor"></span>
<a name="l01514"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">01514</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> {
<a name="l01515"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o0">01515</a>     CSHORT <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o0">Type</a>;
<a name="l01516"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o1">01516</a>     CSHORT <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l01517"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o2">01517</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject;
<a name="l01518"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o3">01518</a>     <a class="code" href="../../d0/d5/io_8h.html#a333">PVPB</a> <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o3">Vpb</a>;
<a name="l01519"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o4">01519</a>     PVOID <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o4">FsContext</a>;
<a name="l01520"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o5">01520</a>     PVOID <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o5">FsContext2</a>;
<a name="l01521"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o6">01521</a>     <a class="code" href="../../d0/d5/io_8h.html#a350">PSECTION_OBJECT_POINTERS</a> <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o6">SectionObjectPointer</a>;
<a name="l01522"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o7">01522</a>     PVOID <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o7">PrivateCacheMap</a>;
<a name="l01523"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o8">01523</a>     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o8">FinalStatus</a>;
<a name="l01524"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o9">01524</a>     <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *<a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o9">RelatedFileObject</a>;
<a name="l01525"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o10">01525</a>     BOOLEAN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o10">LockOperation</a>;
<a name="l01526"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o11">01526</a>     BOOLEAN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o11">DeletePending</a>;
<a name="l01527"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o12">01527</a>     BOOLEAN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o12">ReadAccess</a>;
<a name="l01528"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o13">01528</a>     BOOLEAN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o13">WriteAccess</a>;
<a name="l01529"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o14">01529</a>     BOOLEAN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o14">DeleteAccess</a>;
<a name="l01530"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o15">01530</a>     BOOLEAN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o15">SharedRead</a>;
<a name="l01531"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o16">01531</a>     BOOLEAN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o16">SharedWrite</a>;
<a name="l01532"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o17">01532</a>     BOOLEAN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o17">SharedDelete</a>;
<a name="l01533"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o18">01533</a>     ULONG <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o18">Flags</a>;
<a name="l01534"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o19">01534</a>     UNICODE_STRING <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o19">FileName</a>;
<a name="l01535"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o20">01535</a>     LARGE_INTEGER <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o20">CurrentByteOffset</a>;
<a name="l01536"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o21">01536</a>     ULONG <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o21">Waiters</a>;
<a name="l01537"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o22">01537</a>     ULONG <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o22">Busy</a>;
<a name="l01538"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o23">01538</a>     PVOID <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o23">LastLock</a>;
<a name="l01539"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o24">01539</a>     <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o24">Lock</a>;
<a name="l01540"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o25">01540</a>     <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o25">Event</a>;
<a name="l01541"></a><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o26">01541</a>     <a class="code" href="../../d0/d5/io_8h.html#a352">PIO_COMPLETION_CONTEXT</a> <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html#o26">CompletionContext</a>;
01542 } <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">FILE_OBJECT</a>;
<a name="l01543"></a><a class="code" href="../../d0/d5/io_8h.html#a354">01543</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">_FILE_OBJECT</a> *<a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a>; <span class="comment">// ntndis</span>
01544 
01545 <span class="comment">//</span>
01546 <span class="comment">// Define I/O Request Packet (IRP) flags</span>
01547 <span class="comment">//</span>
01548 
<a name="l01549"></a><a class="code" href="../../d0/d5/io_8h.html#a173">01549</a> <span class="preprocessor">#define IRP_NOCACHE                     0x00000001</span>
<a name="l01550"></a><a class="code" href="../../d0/d5/io_8h.html#a174">01550</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_PAGING_IO                   0x00000002</span>
<a name="l01551"></a><a class="code" href="../../d0/d5/io_8h.html#a175">01551</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_MOUNT_COMPLETION            0x00000002</span>
<a name="l01552"></a><a class="code" href="../../d0/d5/io_8h.html#a176">01552</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_SYNCHRONOUS_API             0x00000004</span>
<a name="l01553"></a><a class="code" href="../../d0/d5/io_8h.html#a177">01553</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_ASSOCIATED_IRP              0x00000008</span>
<a name="l01554"></a><a class="code" href="../../d0/d5/io_8h.html#a178">01554</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_BUFFERED_IO                 0x00000010</span>
<a name="l01555"></a><a class="code" href="../../d0/d5/io_8h.html#a179">01555</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_DEALLOCATE_BUFFER           0x00000020</span>
<a name="l01556"></a><a class="code" href="../../d0/d5/io_8h.html#a180">01556</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_INPUT_OPERATION             0x00000040</span>
<a name="l01557"></a><a class="code" href="../../d0/d5/io_8h.html#a181">01557</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_SYNCHRONOUS_PAGING_IO       0x00000040</span>
<a name="l01558"></a><a class="code" href="../../d0/d5/io_8h.html#a182">01558</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_CREATE_OPERATION            0x00000080</span>
<a name="l01559"></a><a class="code" href="../../d0/d5/io_8h.html#a183">01559</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_READ_OPERATION              0x00000100</span>
<a name="l01560"></a><a class="code" href="../../d0/d5/io_8h.html#a184">01560</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_WRITE_OPERATION             0x00000200</span>
<a name="l01561"></a><a class="code" href="../../d0/d5/io_8h.html#a185">01561</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_CLOSE_OPERATION             0x00000400</span>
01562 <span class="preprocessor"></span><span class="comment">// end_wdm</span>
01563 
<a name="l01564"></a><a class="code" href="../../d0/d5/io_8h.html#a186">01564</a> <span class="preprocessor">#define IRP_DEFER_IO_COMPLETION         0x00000800</span>
<a name="l01565"></a><a class="code" href="../../d0/d5/io_8h.html#a187">01565</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_OB_QUERY_NAME               0x00001000</span>
<a name="l01566"></a><a class="code" href="../../d0/d5/io_8h.html#a188">01566</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_HOLD_DEVICE_QUEUE           0x00002000</span>
<a name="l01567"></a><a class="code" href="../../d0/d5/io_8h.html#a189">01567</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_RETRY_IO_COMPLETION         0x00004000</span>
01568 <span class="preprocessor"></span>
01569 <span class="comment">// begin_wdm</span>
01570 <span class="comment">//</span>
01571 <span class="comment">// Define I/O request packet (IRP) alternate flags for allocation control.</span>
01572 <span class="comment">//</span>
01573 
<a name="l01574"></a><a class="code" href="../../d0/d5/io_8h.html#a190">01574</a> <span class="preprocessor">#define IRP_QUOTA_CHARGED               0x01</span>
<a name="l01575"></a><a class="code" href="../../d0/d5/io_8h.html#a191">01575</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_ALLOCATED_MUST_SUCCEED      0x02</span>
<a name="l01576"></a><a class="code" href="../../d0/d5/io_8h.html#a192">01576</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_ALLOCATED_FIXED_SIZE        0x04</span>
<a name="l01577"></a><a class="code" href="../../d0/d5/io_8h.html#a193">01577</a> <span class="preprocessor"></span><span class="preprocessor">#define IRP_LOOKASIDE_ALLOCATION        0x08</span>
01578 <span class="preprocessor"></span>
01579 <span class="comment">//</span>
01580 <span class="comment">// I/O Request Packet (IRP) definition</span>
01581 <span class="comment">//</span>
01582 
<a name="l01583"></a><a class="code" href="../../d0/d2/struct__IRP.html">01583</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d0/d2/struct__IRP.html">_IRP</a> {
<a name="l01584"></a><a class="code" href="../../d0/d2/struct__IRP.html#o0">01584</a>     CSHORT <a class="code" href="../../d0/d2/struct__IRP.html#o0">Type</a>;
<a name="l01585"></a><a class="code" href="../../d0/d2/struct__IRP.html#o1">01585</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
01586 
01587     <span class="comment">//</span>
01588     <span class="comment">// Define the common fields used to control the IRP.</span>
01589     <span class="comment">//</span>
01590 
01591     <span class="comment">//</span>
01592     <span class="comment">// Define a pointer to the Memory Descriptor List (MDL) for this I/O</span>
01593     <span class="comment">// request.  This field is only used if the I/O is "direct I/O".</span>
01594     <span class="comment">//</span>
01595 
<a name="l01596"></a><a class="code" href="../../d0/d2/struct__IRP.html#o2">01596</a>     <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> <a class="code" href="../../d0/d2/struct__IRP.html#o2">MdlAddress</a>;
01597 
01598     <span class="comment">//</span>
01599     <span class="comment">// Flags word - used to remember various flags.</span>
01600     <span class="comment">//</span>
01601 
<a name="l01602"></a><a class="code" href="../../d0/d2/struct__IRP.html#o3">01602</a>     ULONG <a class="code" href="../../d0/d2/struct__IRP.html#o3">Flags</a>;
01603 
01604     <span class="comment">//</span>
01605     <span class="comment">// The following union is used for one of three purposes:</span>
01606     <span class="comment">//</span>
01607     <span class="comment">//    1. This IRP is an associated IRP.  The field is a pointer to a master</span>
01608     <span class="comment">//       IRP.</span>
01609     <span class="comment">//</span>
01610     <span class="comment">//    2. This is the master IRP.  The field is the count of the number of</span>
01611     <span class="comment">//       IRPs which must complete (associated IRPs) before the master can</span>
01612     <span class="comment">//       complete.</span>
01613     <span class="comment">//</span>
01614     <span class="comment">//    3. This operation is being buffered and the field is the address of</span>
01615     <span class="comment">//       the system space buffer.</span>
01616     <span class="comment">//</span>
01617 
01618     <span class="keyword">union </span>{
<a name="l01619"></a><a class="code" href="../../d0/d2/struct__IRP.html#o4">01619</a>         <span class="keyword">struct </span><a class="code" href="../../d0/d2/struct__IRP.html">_IRP</a> *<a class="code" href="../../d0/d2/struct__IRP.html#o4">MasterIrp</a>;
<a name="l01620"></a><a class="code" href="../../d0/d2/struct__IRP.html#o5">01620</a>         LONG <a class="code" href="../../d0/d2/struct__IRP.html#o5">IrpCount</a>;
<a name="l01621"></a><a class="code" href="../../d0/d2/struct__IRP.html#o6">01621</a>         PVOID <a class="code" href="../../d0/d2/struct__IRP.html#o6">SystemBuffer</a>;
01622     } AssociatedIrp;
01623 
01624     <span class="comment">//</span>
01625     <span class="comment">// Thread list entry - allows queueing the IRP to the thread pending I/O</span>
01626     <span class="comment">// request packet list.</span>
01627     <span class="comment">//</span>
01628 
<a name="l01629"></a><a class="code" href="../../d0/d2/struct__IRP.html#o8">01629</a>     LIST_ENTRY <a class="code" href="../../d0/d2/struct__IRP.html#o8">ThreadListEntry</a>;
01630 
01631     <span class="comment">//</span>
01632     <span class="comment">// I/O status - final status of operation.</span>
01633     <span class="comment">//</span>
01634 
<a name="l01635"></a><a class="code" href="../../d0/d2/struct__IRP.html#o9">01635</a>     IO_STATUS_BLOCK IoStatus;
01636 
01637     <span class="comment">//</span>
01638     <span class="comment">// Requestor mode - mode of the original requestor of this operation.</span>
01639     <span class="comment">//</span>
01640 
<a name="l01641"></a><a class="code" href="../../d0/d2/struct__IRP.html#o10">01641</a>     <a class="code" href="../../d0/d9/ntosdef_8h.html#a39">KPROCESSOR_MODE</a> <a class="code" href="../../d0/d2/struct__IRP.html#o10">RequestorMode</a>;
01642 
01643     <span class="comment">//</span>
01644     <span class="comment">// Pending returned - TRUE if pending was initially returned as the</span>
01645     <span class="comment">// status for this packet.</span>
01646     <span class="comment">//</span>
01647 
<a name="l01648"></a><a class="code" href="../../d0/d2/struct__IRP.html#o11">01648</a>     BOOLEAN <a class="code" href="../../d0/d2/struct__IRP.html#o11">PendingReturned</a>;
01649 
01650     <span class="comment">//</span>
01651     <span class="comment">// Stack state information.</span>
01652     <span class="comment">//</span>
01653 
<a name="l01654"></a><a class="code" href="../../d0/d2/struct__IRP.html#o12">01654</a>     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> <a class="code" href="../../d0/d2/struct__IRP.html#o12">StackCount</a>;
<a name="l01655"></a><a class="code" href="../../d0/d2/struct__IRP.html#o13">01655</a>     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> <a class="code" href="../../d0/d2/struct__IRP.html#o13">CurrentLocation</a>;
01656 
01657     <span class="comment">//</span>
01658     <span class="comment">// Cancel - packet has been canceled.</span>
01659     <span class="comment">//</span>
01660 
<a name="l01661"></a><a class="code" href="../../d0/d2/struct__IRP.html#o14">01661</a>     BOOLEAN <a class="code" href="../../d0/d2/struct__IRP.html#o14">Cancel</a>;
01662 
01663     <span class="comment">//</span>
01664     <span class="comment">// Cancel Irql - Irql at which the cancel spinlock was acquired.</span>
01665     <span class="comment">//</span>
01666 
<a name="l01667"></a><a class="code" href="../../d0/d2/struct__IRP.html#o15">01667</a>     KIRQL <a class="code" href="../../d0/d2/struct__IRP.html#o15">CancelIrql</a>;
01668 
01669     <span class="comment">//</span>
01670     <span class="comment">// ApcEnvironment - Used to save the APC environment at the time that the</span>
01671     <span class="comment">// packet was initialized.</span>
01672     <span class="comment">//</span>
01673 
<a name="l01674"></a><a class="code" href="../../d0/d2/struct__IRP.html#o16">01674</a>     CCHAR <a class="code" href="../../d0/d2/struct__IRP.html#o16">ApcEnvironment</a>;
01675 
01676     <span class="comment">//</span>
01677     <span class="comment">// Allocation control flags.</span>
01678     <span class="comment">//</span>
01679 
<a name="l01680"></a><a class="code" href="../../d0/d2/struct__IRP.html#o17">01680</a>     UCHAR <a class="code" href="../../d0/d2/struct__IRP.html#o17">AllocationFlags</a>;
01681 
01682     <span class="comment">//</span>
01683     <span class="comment">// User parameters.</span>
01684     <span class="comment">//</span>
01685 
<a name="l01686"></a><a class="code" href="../../d0/d2/struct__IRP.html#o18">01686</a>     PIO_STATUS_BLOCK <a class="code" href="../../d0/d2/struct__IRP.html#o18">UserIosb</a>;
<a name="l01687"></a><a class="code" href="../../d0/d2/struct__IRP.html#o19">01687</a>     <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> <a class="code" href="../../d0/d2/struct__IRP.html#o19">UserEvent</a>;
01688     <span class="keyword">union </span>{
01689         <span class="keyword">struct </span>{
<a name="l01690"></a><a class="code" href="../../d0/d2/struct__IRP.html#o20">01690</a>             PIO_APC_ROUTINE UserApcRoutine;
<a name="l01691"></a><a class="code" href="../../d0/d2/struct__IRP.html#o21">01691</a>             PVOID UserApcContext;
01692         } AsynchronousParameters;
<a name="l01693"></a><a class="code" href="../../d0/d2/struct__IRP.html#o23">01693</a>         LARGE_INTEGER AllocationSize;
01694     } Overlay;
01695 
01696     <span class="comment">//</span>
01697     <span class="comment">// CancelRoutine - Used to contain the address of a cancel routine supplied</span>
01698     <span class="comment">// by a device driver when the IRP is in a cancelable state.</span>
01699     <span class="comment">//</span>
01700 
<a name="l01701"></a><a class="code" href="../../d0/d2/struct__IRP.html#o25">01701</a>     <a class="code" href="../../d0/d5/io_8h.html#a286">PDRIVER_CANCEL</a> <a class="code" href="../../d0/d2/struct__IRP.html#o25">CancelRoutine</a>;
01702 
01703     <span class="comment">//</span>
01704     <span class="comment">// Note that the UserBuffer parameter is outside of the stack so that I/O</span>
01705     <span class="comment">// completion can copy data back into the user's address space without</span>
01706     <span class="comment">// having to know exactly which service was being invoked.  The length</span>
01707     <span class="comment">// of the copy is stored in the second half of the I/O status block. If</span>
01708     <span class="comment">// the UserBuffer field is NULL, then no copy is performed.</span>
01709     <span class="comment">//</span>
01710 
<a name="l01711"></a><a class="code" href="../../d0/d2/struct__IRP.html#o26">01711</a>     PVOID <a class="code" href="../../d0/d2/struct__IRP.html#o26">UserBuffer</a>;
01712 
01713     <span class="comment">//</span>
01714     <span class="comment">// Kernel structures</span>
01715     <span class="comment">//</span>
01716     <span class="comment">// The following section contains kernel structures which the IRP needs</span>
01717     <span class="comment">// in order to place various work information in kernel controller system</span>
01718     <span class="comment">// queues.  Because the size and alignment cannot be controlled, they are</span>
01719     <span class="comment">// placed here at the end so they just hang off and do not affect the</span>
01720     <span class="comment">// alignment of other fields in the IRP.</span>
01721     <span class="comment">//</span>
01722 
01723     <span class="keyword">union </span>{
01724 
01725         <span class="keyword">struct </span>{
01726 
01727             <span class="keyword">union </span>{
01728 
01729                 <span class="comment">//</span>
01730                 <span class="comment">// DeviceQueueEntry - The device queue entry field is used to</span>
01731                 <span class="comment">// queue the IRP to the device driver device queue.</span>
01732                 <span class="comment">//</span>
01733 
<a name="l01734"></a><a class="code" href="../../d0/d2/struct__IRP.html#o27">01734</a>                 <a class="code" href="../../d0/d6/struct__KDEVICE__QUEUE__ENTRY.html">KDEVICE_QUEUE_ENTRY</a> <a class="code" href="../../d0/d2/struct__IRP.html#o27">DeviceQueueEntry</a>;
01735 
01736                 <span class="keyword">struct </span>{
01737 
01738                     <span class="comment">//</span>
01739                     <span class="comment">// The following are available to the driver to use in</span>
01740                     <span class="comment">// whatever manner is desired, while the driver owns the</span>
01741                     <span class="comment">// packet.</span>
01742                     <span class="comment">//</span>
01743 
<a name="l01744"></a><a class="code" href="../../d0/d2/struct__IRP.html#o28">01744</a>                     PVOID <a class="code" href="../../d0/d2/struct__IRP.html#o28">DriverContext</a>[4];
01745 
01746                 } ;
01747 
01748             } ;
01749 
01750             <span class="comment">//</span>
01751             <span class="comment">// Thread - pointer to caller's Thread Control Block.</span>
01752             <span class="comment">//</span>
01753 
<a name="l01754"></a><a class="code" href="../../d0/d2/struct__IRP.html#o29">01754</a>             <a class="code" href="../../d5/d6/struct__ETHREAD.html">PETHREAD</a> <a class="code" href="../../d0/d2/struct__IRP.html#o29">Thread</a>;
01755 
01756             <span class="comment">//</span>
01757             <span class="comment">// Auxiliary buffer - pointer to any auxiliary buffer that is</span>
01758             <span class="comment">// required to pass information to a driver that is not contained</span>
01759             <span class="comment">// in a normal buffer.</span>
01760             <span class="comment">//</span>
01761 
<a name="l01762"></a><a class="code" href="../../d0/d2/struct__IRP.html#o30">01762</a>             PCHAR <a class="code" href="../../d0/d2/struct__IRP.html#o30">AuxiliaryBuffer</a>;
01763 
01764             <span class="comment">//</span>
01765             <span class="comment">// The following unnamed structure must be exactly identical</span>
01766             <span class="comment">// to the unnamed structure used in the minipacket header used</span>
01767             <span class="comment">// for completion queue entries.</span>
01768             <span class="comment">//</span>
01769 
01770             <span class="keyword">struct </span>{
01771 
01772                 <span class="comment">//</span>
01773                 <span class="comment">// List entry - used to queue the packet to completion queue, among</span>
01774                 <span class="comment">// others.</span>
01775                 <span class="comment">//</span>
01776 
<a name="l01777"></a><a class="code" href="../../d0/d2/struct__IRP.html#o31">01777</a>                 LIST_ENTRY <a class="code" href="../../d0/d2/struct__IRP.html#o31">ListEntry</a>;
01778 
01779                 <span class="keyword">union </span>{
01780 
01781                     <span class="comment">//</span>
01782                     <span class="comment">// Current stack location - contains a pointer to the current</span>
01783                     <span class="comment">// IO_STACK_LOCATION structure in the IRP stack.  This field</span>
01784                     <span class="comment">// should never be directly accessed by drivers.  They should</span>
01785                     <span class="comment">// use the standard functions.</span>
01786                     <span class="comment">//</span>
01787 
<a name="l01788"></a><a class="code" href="../../d0/d2/struct__IRP.html#o32">01788</a>                     <span class="keyword">struct </span><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html">_IO_STACK_LOCATION</a> *<a class="code" href="../../d0/d2/struct__IRP.html#o32">CurrentStackLocation</a>;
01789 
01790                     <span class="comment">//</span>
01791                     <span class="comment">// Minipacket type.</span>
01792                     <span class="comment">//</span>
01793 
<a name="l01794"></a><a class="code" href="../../d0/d2/struct__IRP.html#o33">01794</a>                     ULONG <a class="code" href="../../d0/d2/struct__IRP.html#o33">PacketType</a>;
01795                 };
01796             };
01797 
01798             <span class="comment">//</span>
01799             <span class="comment">// Original file object - pointer to the original file object</span>
01800             <span class="comment">// that was used to open the file.  This field is owned by the</span>
01801             <span class="comment">// I/O system and should not be used by any other drivers.</span>
01802             <span class="comment">//</span>
01803 
<a name="l01804"></a><a class="code" href="../../d0/d2/struct__IRP.html#o34">01804</a>             <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> <a class="code" href="../../d0/d2/struct__IRP.html#o34">OriginalFileObject</a>;
01805 
01806         } Overlay;
01807 
01808         <span class="comment">//</span>
01809         <span class="comment">// APC - This APC control block is used for the special kernel APC as</span>
01810         <span class="comment">// well as for the caller's APC, if one was specified in the original</span>
01811         <span class="comment">// argument list.  If so, then the APC is reused for the normal APC for</span>
01812         <span class="comment">// whatever mode the caller was in and the "special" routine that is</span>
01813         <span class="comment">// invoked before the APC gets control simply deallocates the IRP.</span>
01814         <span class="comment">//</span>
01815 
<a name="l01816"></a><a class="code" href="../../d0/d2/struct__IRP.html#o36">01816</a>         <a class="code" href="../../d1/d5/struct__KAPC.html">KAPC</a> <a class="code" href="../../d0/d2/struct__IRP.html#o36">Apc</a>;
01817 
01818         <span class="comment">//</span>
01819         <span class="comment">// CompletionKey - This is the key that is used to distinguish</span>
01820         <span class="comment">// individual I/O operations initiated on a single file handle.</span>
01821         <span class="comment">//</span>
01822 
<a name="l01823"></a><a class="code" href="../../d0/d2/struct__IRP.html#o37">01823</a>         PVOID <a class="code" href="../../d0/d2/struct__IRP.html#o37">CompletionKey</a>;
01824 
01825     } Tail;
01826 
01827 } <a class="code" href="../../d0/d2/struct__IRP.html">IRP</a>, *<a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>;
01828 
01829 <span class="comment">//</span>
01830 <span class="comment">// Define completion routine types for use in stack locations in an IRP</span>
01831 <span class="comment">//</span>
01832 
01833 <span class="keyword">typedef</span>
01834 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
<a name="l01835"></a><a class="code" href="../../d0/d5/io_8h.html#a357">01835</a> (*PIO_COMPLETION_ROUTINE) (
01836     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
01837     IN <a class="code" href="../../d0/d5/io_8h.html#a356">PIRP</a> <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>,
01838     IN PVOID Context
01839     );
01840 
01841 <span class="comment">//</span>
01842 <span class="comment">// Define stack location control flags</span>
01843 <span class="comment">//</span>
01844 
<a name="l01845"></a><a class="code" href="../../d0/d5/io_8h.html#a194">01845</a> <span class="preprocessor">#define SL_PENDING_RETURNED             0x01</span>
<a name="l01846"></a><a class="code" href="../../d0/d5/io_8h.html#a195">01846</a> <span class="preprocessor"></span><span class="preprocessor">#define SL_INVOKE_ON_CANCEL             0x20</span>
<a name="l01847"></a><a class="code" href="../../d0/d5/io_8h.html#a196">01847</a> <span class="preprocessor"></span><span class="preprocessor">#define SL_INVOKE_ON_SUCCESS            0x40</span>
<a name="l01848"></a><a class="code" href="../../d0/d5/io_8h.html#a197">01848</a> <span class="preprocessor"></span><span class="preprocessor">#define SL_INVOKE_ON_ERROR              0x80</span>
01849 <span class="preprocessor"></span>
01850 <span class="comment">//</span>
01851 <span class="comment">// Define flags for various functions</span>
01852 <span class="comment">//</span>
01853 
01854 <span class="comment">//</span>
01855 <span class="comment">// Create / Create Named Pipe</span>
01856 <span class="comment">//</span>
01857 <span class="comment">// The following flags must exactly match those in the IoCreateFile call's</span>
01858 <span class="comment">// options.  The case sensitive flag is added in later, by the parse routine,</span>
01859 <span class="comment">// and is not an actual option to open.  Rather, it is part of the object</span>
01860 <span class="comment">// manager's attributes structure.</span>
01861 <span class="comment">//</span>
01862 
<a name="l01863"></a><a class="code" href="../../d0/d5/io_8h.html#a198">01863</a> <span class="preprocessor">#define SL_FORCE_ACCESS_CHECK           0x01</span>
<a name="l01864"></a><a class="code" href="../../d0/d5/io_8h.html#a199">01864</a> <span class="preprocessor"></span><span class="preprocessor">#define SL_OPEN_PAGING_FILE             0x02</span>
<a name="l01865"></a><a class="code" href="../../d0/d5/io_8h.html#a200">01865</a> <span class="preprocessor"></span><span class="preprocessor">#define SL_OPEN_TARGET_DIRECTORY        0x04</span>
01866 <span class="preprocessor"></span>
<a name="l01867"></a><a class="code" href="../../d0/d5/io_8h.html#a201">01867</a> <span class="preprocessor">#define SL_CASE_SENSITIVE               0x80</span>
01868 <span class="preprocessor"></span>
01869 <span class="comment">//</span>
01870 <span class="comment">// Read / Write</span>
01871 <span class="comment">//</span>
01872 
<a name="l01873"></a><a class="code" href="../../d0/d5/io_8h.html#a202">01873</a> <span class="preprocessor">#define SL_KEY_SPECIFIED                0x01</span>
<a name="l01874"></a><a class="code" href="../../d0/d5/io_8h.html#a203">01874</a> <span class="preprocessor"></span><span class="preprocessor">#define SL_OVERRIDE_VERIFY_VOLUME       0x02</span>
<a name="l01875"></a><a class="code" href="../../d0/d5/io_8h.html#a204">01875</a> <span class="preprocessor"></span><span class="preprocessor">#define SL_WRITE_THROUGH                0x04</span>
<a name="l01876"></a><a class="code" href="../../d0/d5/io_8h.html#a205">01876</a> <span class="preprocessor"></span><span class="preprocessor">#define SL_FT_SEQUENTIAL_WRITE          0x08</span>
01877 <span class="preprocessor"></span>
01878 <span class="comment">//</span>
01879 <span class="comment">// Device I/O Control</span>
01880 <span class="comment">//</span>
01881 <span class="comment">//</span>
01882 <span class="comment">// Same SL_OVERRIDE_VERIFY_VOLUME as for read/write above.</span>
01883 <span class="comment">//</span>
01884 
01885 <span class="comment">//</span>
01886 <span class="comment">// Lock</span>
01887 <span class="comment">//</span>
01888 
<a name="l01889"></a><a class="code" href="../../d0/d5/io_8h.html#a206">01889</a> <span class="preprocessor">#define SL_FAIL_IMMEDIATELY             0x01</span>
<a name="l01890"></a><a class="code" href="../../d0/d5/io_8h.html#a207">01890</a> <span class="preprocessor"></span><span class="preprocessor">#define SL_EXCLUSIVE_LOCK               0x02</span>
01891 <span class="preprocessor"></span>
01892 <span class="comment">//</span>
01893 <span class="comment">// QueryDirectory / QueryEa / QueryQuota</span>
01894 <span class="comment">//</span>
01895 
<a name="l01896"></a><a class="code" href="../../d0/d5/io_8h.html#a208">01896</a> <span class="preprocessor">#define SL_RESTART_SCAN                 0x01</span>
<a name="l01897"></a><a class="code" href="../../d0/d5/io_8h.html#a209">01897</a> <span class="preprocessor"></span><span class="preprocessor">#define SL_RETURN_SINGLE_ENTRY          0x02</span>
<a name="l01898"></a><a class="code" href="../../d0/d5/io_8h.html#a210">01898</a> <span class="preprocessor"></span><span class="preprocessor">#define SL_INDEX_SPECIFIED              0x04</span>
01899 <span class="preprocessor"></span>
01900 <span class="comment">//</span>
01901 <span class="comment">// NotifyDirectory</span>
01902 <span class="comment">//</span>
01903 
<a name="l01904"></a><a class="code" href="../../d0/d5/io_8h.html#a211">01904</a> <span class="preprocessor">#define SL_WATCH_TREE                   0x01</span>
01905 <span class="preprocessor"></span>
01906 <span class="comment">//</span>
01907 <span class="comment">// FileSystemControl</span>
01908 <span class="comment">//</span>
01909 <span class="comment">//    minor: mount/verify volume</span>
01910 <span class="comment">//</span>
01911 
<a name="l01912"></a><a class="code" href="../../d0/d5/io_8h.html#a212">01912</a> <span class="preprocessor">#define SL_ALLOW_RAW_MOUNT              0x01</span>
01913 <span class="preprocessor"></span>
01914 <span class="comment">//</span>
01915 <span class="comment">// Define PNP/POWER types required by IRP_MJ_PNP/IRP_MJ_POWER.</span>
01916 <span class="comment">//</span>
01917 
<a name="l01918"></a><a class="code" href="../../d0/d5/io_8h.html#a602">01918</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d0/d5/io_8h.html#a602">_DEVICE_RELATION_TYPE</a> {
01919     <a class="code" href="../../d0/d5/io_8h.html#a602a412">BusRelations</a>,
01920     <a class="code" href="../../d0/d5/io_8h.html#a602a413">EjectionRelations</a>,
01921     <a class="code" href="../../d0/d5/io_8h.html#a602a414">PowerRelations</a>,
01922     <a class="code" href="../../d0/d5/io_8h.html#a602a415">RemovalRelations</a>,
01923     <a class="code" href="../../d0/d5/io_8h.html#a602a416">TargetDeviceRelation</a>
01924 } <a class="code" href="../../d0/d5/io_8h.html#a358">DEVICE_RELATION_TYPE</a>, *<a class="code" href="../../d0/d5/io_8h.html#a359">PDEVICE_RELATION_TYPE</a>;
01925 
<a name="l01926"></a><a class="code" href="../../d0/d5/struct__DEVICE__RELATIONS.html">01926</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d0/d5/struct__DEVICE__RELATIONS.html">_DEVICE_RELATIONS</a> {
<a name="l01927"></a><a class="code" href="../../d0/d5/struct__DEVICE__RELATIONS.html#o0">01927</a>     ULONG <a class="code" href="../../d0/d5/struct__DEVICE__RELATIONS.html#o0">Count</a>;
<a name="l01928"></a><a class="code" href="../../d0/d5/struct__DEVICE__RELATIONS.html#o1">01928</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> <a class="code" href="../../d0/d5/struct__DEVICE__RELATIONS.html#o1">Objects</a>[1];  <span class="comment">// variable length</span>
01929 } <a class="code" href="../../d0/d5/struct__DEVICE__RELATIONS.html">DEVICE_RELATIONS</a>, *<a class="code" href="../../d0/d5/struct__DEVICE__RELATIONS.html">PDEVICE_RELATIONS</a>;
01930 
<a name="l01931"></a><a class="code" href="../../d0/d5/io_8h.html#a603">01931</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d0/d5/io_8h.html#a603">_DEVICE_USAGE_NOTIFICATION_TYPE</a> {
01932     <a class="code" href="../../d0/d5/io_8h.html#a603a417">DeviceUsageTypeUndefined</a>,
01933     <a class="code" href="../../d0/d5/io_8h.html#a603a418">DeviceUsageTypePaging</a>,
01934     <a class="code" href="../../d0/d5/io_8h.html#a603a419">DeviceUsageTypeHibernation</a>,
01935     <a class="code" href="../../d0/d5/io_8h.html#a603a420">DeviceUsageTypeDumpFile</a>
01936 } <a class="code" href="../../d0/d5/io_8h.html#a362">DEVICE_USAGE_NOTIFICATION_TYPE</a>;
01937 
01938 <span class="comment">// begin_ntminiport</span>
01939 
<a name="l01940"></a><a class="code" href="../../d8/d3/struct__INTERFACE.html">01940</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d3/struct__INTERFACE.html">_INTERFACE</a> {
<a name="l01941"></a><a class="code" href="../../d8/d3/struct__INTERFACE.html#o0">01941</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l01942"></a><a class="code" href="../../d8/d3/struct__INTERFACE.html#o1">01942</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d8/d3/struct__INTERFACE.html#o1">Version</a>;
<a name="l01943"></a><a class="code" href="../../d8/d3/struct__INTERFACE.html#o2">01943</a>     PVOID Context;
<a name="l01944"></a><a class="code" href="../../d8/d3/struct__INTERFACE.html#o3">01944</a>     PINTERFACE_REFERENCE <a class="code" href="../../d8/d3/struct__INTERFACE.html#o3">InterfaceReference</a>;
<a name="l01945"></a><a class="code" href="../../d8/d3/struct__INTERFACE.html#o4">01945</a>     PINTERFACE_DEREFERENCE <a class="code" href="../../d8/d3/struct__INTERFACE.html#o4">InterfaceDereference</a>;
01946     <span class="comment">// interface specific entries go here</span>
01947 } <a class="code" href="../../d8/d3/struct__INTERFACE.html">INTERFACE</a>, *<a class="code" href="../../d8/d3/struct__INTERFACE.html">PINTERFACE</a>;
01948 
01949 <span class="comment">// end_ntminiport</span>
01950 
<a name="l01951"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html">01951</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html">_DEVICE_CAPABILITIES</a> {
<a name="l01952"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o0">01952</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l01953"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o1">01953</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o1">Version</a>;  <span class="comment">// the version documented here is version 1</span>
<a name="l01954"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o2">01954</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o2">DeviceD1</a>:1;
<a name="l01955"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o3">01955</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o3">DeviceD2</a>:1;
<a name="l01956"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o4">01956</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o4">LockSupported</a>:1;
<a name="l01957"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o5">01957</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o5">EjectSupported</a>:1; <span class="comment">// Ejectable in S0</span>
<a name="l01958"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o6">01958</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o6">Removable</a>:1;
<a name="l01959"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o7">01959</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o7">DockDevice</a>:1;
<a name="l01960"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o8">01960</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o8">UniqueID</a>:1;
<a name="l01961"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o9">01961</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o9">SilentInstall</a>:1;
<a name="l01962"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o10">01962</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o10">RawDeviceOK</a>:1;
<a name="l01963"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o11">01963</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o11">SurpriseRemovalOK</a>:1;
<a name="l01964"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o12">01964</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o12">WakeFromD0</a>:1;
<a name="l01965"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o13">01965</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o13">WakeFromD1</a>:1;
<a name="l01966"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o14">01966</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o14">WakeFromD2</a>:1;
<a name="l01967"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o15">01967</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o15">WakeFromD3</a>:1;
<a name="l01968"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o16">01968</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o16">HardwareDisabled</a>:1;
<a name="l01969"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o17">01969</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o17">NonDynamic</a>:1;
<a name="l01970"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o18">01970</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o18">WarmEjectSupported</a>:1;
<a name="l01971"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o19">01971</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o19">NoDisplayInUI</a>:1;
<a name="l01972"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o20">01972</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o20">Reserved</a>:14;
01973 
<a name="l01974"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o21">01974</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o21">Address</a>;
<a name="l01975"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o22">01975</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o22">UINumber</a>;
01976 
<a name="l01977"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o23">01977</a>     DEVICE_POWER_STATE <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o23">DeviceState</a>[PowerSystemMaximum];
<a name="l01978"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o24">01978</a>     SYSTEM_POWER_STATE <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o24">SystemWake</a>;
<a name="l01979"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o25">01979</a>     DEVICE_POWER_STATE <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o25">DeviceWake</a>;
<a name="l01980"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o26">01980</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o26">D1Latency</a>;
<a name="l01981"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o27">01981</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o27">D2Latency</a>;
<a name="l01982"></a><a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o28">01982</a>     ULONG <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o28">D3Latency</a>;
01983 } <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html">DEVICE_CAPABILITIES</a>, *<a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html">PDEVICE_CAPABILITIES</a>;
01984 
<a name="l01985"></a><a class="code" href="../../d4/d9/struct__POWER__SEQUENCE.html">01985</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d4/d9/struct__POWER__SEQUENCE.html">_POWER_SEQUENCE</a> {
<a name="l01986"></a><a class="code" href="../../d4/d9/struct__POWER__SEQUENCE.html#o0">01986</a>     ULONG <a class="code" href="../../d4/d9/struct__POWER__SEQUENCE.html#o0">SequenceD1</a>;
<a name="l01987"></a><a class="code" href="../../d4/d9/struct__POWER__SEQUENCE.html#o1">01987</a>     ULONG <a class="code" href="../../d4/d9/struct__POWER__SEQUENCE.html#o1">SequenceD2</a>;
<a name="l01988"></a><a class="code" href="../../d4/d9/struct__POWER__SEQUENCE.html#o2">01988</a>     ULONG <a class="code" href="../../d4/d9/struct__POWER__SEQUENCE.html#o2">SequenceD3</a>;
01989 } <a class="code" href="../../d4/d9/struct__POWER__SEQUENCE.html">POWER_SEQUENCE</a>, *<a class="code" href="../../d4/d9/struct__POWER__SEQUENCE.html">PPOWER_SEQUENCE</a>;
01990 
<a name="l01991"></a><a class="code" href="../../d0/d5/io_8h.html#a604">01991</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
01992     <a class="code" href="../../d0/d5/io_8h.html#a604a421">BusQueryDeviceID</a> = 0,       <span class="comment">// &lt;Enumerator&gt;&lt;Enumerator-specific device id&gt;</span>
01993     <a class="code" href="../../d0/d5/io_8h.html#a604a422">BusQueryHardwareIDs</a> = 1,    <span class="comment">// Hardware ids</span>
01994     <a class="code" href="../../d0/d5/io_8h.html#a604a423">BusQueryCompatibleIDs</a> = 2,  <span class="comment">// compatible device ids</span>
01995     <a class="code" href="../../d0/d5/io_8h.html#a604a424">BusQueryInstanceID</a> = 3,     <span class="comment">// persistent id for this instance of the device</span>
01996     <a class="code" href="../../d0/d5/io_8h.html#a604a425">BusQueryDeviceSerialNumber</a> = 4    <span class="comment">// serial number for this device</span>
01997 } <a class="code" href="../../d0/d5/io_8h.html#a604">BUS_QUERY_ID_TYPE</a>, *<a class="code" href="../../d0/d5/io_8h.html#a369">PBUS_QUERY_ID_TYPE</a>;
01998 
<a name="l01999"></a><a class="code" href="../../d0/d5/io_8h.html#a371">01999</a> <span class="keyword">typedef</span> ULONG <a class="code" href="../../d0/d5/io_8h.html#a370">PNP_DEVICE_STATE</a>, *<a class="code" href="../../d0/d5/io_8h.html#a371">PPNP_DEVICE_STATE</a>;
02000 
<a name="l02001"></a><a class="code" href="../../d0/d5/io_8h.html#a213">02001</a> <span class="preprocessor">#define PNP_DEVICE_DISABLED                      0x00000001</span>
<a name="l02002"></a><a class="code" href="../../d0/d5/io_8h.html#a214">02002</a> <span class="preprocessor"></span><span class="preprocessor">#define PNP_DEVICE_DONT_DISPLAY_IN_UI            0x00000002</span>
<a name="l02003"></a><a class="code" href="../../d0/d5/io_8h.html#a215">02003</a> <span class="preprocessor"></span><span class="preprocessor">#define PNP_DEVICE_FAILED                        0x00000004</span>
<a name="l02004"></a><a class="code" href="../../d0/d5/io_8h.html#a216">02004</a> <span class="preprocessor"></span><span class="preprocessor">#define PNP_DEVICE_REMOVED                       0x00000008</span>
<a name="l02005"></a><a class="code" href="../../d0/d5/io_8h.html#a217">02005</a> <span class="preprocessor"></span><span class="preprocessor">#define PNP_DEVICE_RESOURCE_REQUIREMENTS_CHANGED 0x00000010</span>
<a name="l02006"></a><a class="code" href="../../d0/d5/io_8h.html#a218">02006</a> <span class="preprocessor"></span><span class="preprocessor">#define PNP_DEVICE_NOT_DISABLEABLE               0x00000020</span>
02007 <span class="preprocessor"></span>
<a name="l02008"></a><a class="code" href="../../d0/d5/io_8h.html#a605">02008</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
02009     <a class="code" href="../../d0/d5/io_8h.html#a605a426">DeviceTextDescription</a> = 0,            <span class="comment">// DeviceDesc property</span>
02010     <a class="code" href="../../d0/d5/io_8h.html#a605a427">DeviceTextLocationInformation</a> = 1     <span class="comment">// DeviceLocation property</span>
02011 } <a class="code" href="../../d0/d5/io_8h.html#a605">DEVICE_TEXT_TYPE</a>, *<a class="code" href="../../d0/d5/io_8h.html#a372">PDEVICE_TEXT_TYPE</a>;
02012 
02013 <span class="comment">//</span>
02014 <span class="comment">// Define I/O Request Packet (IRP) stack locations</span>
02015 <span class="comment">//</span>
02016 
02017 <span class="preprocessor">#if !defined(_ALPHA_) &amp;&amp; !defined(_IA64_)</span>
02018 <span class="preprocessor"></span><span class="preprocessor">#include "pshpack4.h"</span>
02019 <span class="preprocessor">#endif</span>
02020 <span class="preprocessor"></span>
02021 <span class="preprocessor">#if defined(_WIN64)</span>
02022 <span class="preprocessor"></span><span class="preprocessor">#define POINTER_ALIGNMENT DECLSPEC_ALIGN(8)</span>
02023 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l02024"></a><a class="code" href="../../d0/d5/io_8h.html#a219">02024</a> <span class="preprocessor"></span><span class="preprocessor">#define POINTER_ALIGNMENT</span>
02025 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
02026 <span class="preprocessor"></span>
<a name="l02027"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html">02027</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html">_IO_STACK_LOCATION</a> {
<a name="l02028"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o0">02028</a>     UCHAR <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o0">MajorFunction</a>;
<a name="l02029"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o1">02029</a>     UCHAR <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o1">MinorFunction</a>;
<a name="l02030"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o2">02030</a>     UCHAR <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o2">Flags</a>;
<a name="l02031"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o3">02031</a>     UCHAR <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o3">Control</a>;
02032 
02033     <span class="comment">//</span>
02034     <span class="comment">// The following user parameters are based on the service that is being</span>
02035     <span class="comment">// invoked.  Drivers and file systems can determine which set to use based</span>
02036     <span class="comment">// on the above major and minor function codes.</span>
02037     <span class="comment">//</span>
02038 
02039     <span class="keyword">union </span>{
02040 
02041         <span class="comment">//</span>
02042         <span class="comment">// System service parameters for:  NtCreateFile</span>
02043         <span class="comment">//</span>
02044 
02045         <span class="keyword">struct </span>{
02046             <a class="code" href="../../d0/d5/io_8h.html#a327">PIO_SECURITY_CONTEXT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o4">SecurityContext</a>;
02047             ULONG <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o5">Options</a>;
<a name="l02048"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o6">02048</a>             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o6">FileAttributes</a>;
02049             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o7">ShareAccess</a>;
<a name="l02050"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o8">02050</a>             ULONG <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o8">EaLength</a>;
02051         } Create;
02052 
02053 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
02054 
02055         <span class="comment">//</span>
02056         <span class="comment">// System service parameters for:  NtCreateNamedPipeFile</span>
02057         <span class="comment">//</span>
02058         <span class="comment">// Notice that the fields in the following parameter structure must</span>
02059         <span class="comment">// match those for the create structure other than the last longword.</span>
02060         <span class="comment">// This is so that no distinctions need be made by the I/O system's</span>
02061         <span class="comment">// parse routine other than for the last longword.</span>
02062         <span class="comment">//</span>
02063 
02064         <span class="keyword">struct </span>{
02065             <a class="code" href="../../d0/d5/io_8h.html#a327">PIO_SECURITY_CONTEXT</a> SecurityContext;
02066             ULONG Options;
02067             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> Reserved;
02068             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> ShareAccess;
<a name="l02069"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o11">02069</a>             <a class="code" href="../../d0/d5/io_8h.html#a277">PNAMED_PIPE_CREATE_PARAMETERS</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o11">Parameters</a>;
02070         } CreatePipe;
02071 
02072         <span class="comment">//</span>
02073         <span class="comment">// System service parameters for:  NtCreateMailslotFile</span>
02074         <span class="comment">//</span>
02075         <span class="comment">// Notice that the fields in the following parameter structure must</span>
02076         <span class="comment">// match those for the create structure other than the last longword.</span>
02077         <span class="comment">// This is so that no distinctions need be made by the I/O system's</span>
02078         <span class="comment">// parse routine other than for the last longword.</span>
02079         <span class="comment">//</span>
02080 
02081         <span class="keyword">struct </span>{
<a name="l02082"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o4">02082</a>             <a class="code" href="../../d0/d5/io_8h.html#a327">PIO_SECURITY_CONTEXT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o4">SecurityContext</a>;
<a name="l02083"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o5">02083</a>             ULONG <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o5">Options</a>;
<a name="l02084"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o10">02084</a>             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o10">Reserved</a>;
<a name="l02085"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o7">02085</a>             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o7">ShareAccess</a>;
<a name="l02086"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o13">02086</a>             <a class="code" href="../../d0/d5/io_8h.html#a279">PMAILSLOT_CREATE_PARAMETERS</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o11">Parameters</a>;
02087         } CreateMailslot;
02088 
02089 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
02090 
02091         <span class="comment">//</span>
02092         <span class="comment">// System service parameters for:  NtReadFile</span>
02093         <span class="comment">//</span>
02094 
02095         <span class="keyword">struct </span>{
02096             ULONG Length;
02097             ULONG <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a51">Key</a>;
02098             LARGE_INTEGER ByteOffset;
02099         } <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o18">Read</a>;
02100 
02101         <span class="comment">//</span>
02102         <span class="comment">// System service parameters for:  NtWriteFile</span>
02103         <span class="comment">//</span>
02104 
02105         <span class="keyword">struct </span>{
02106             ULONG Length;
02107             ULONG <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a51">Key</a>;
02108             LARGE_INTEGER <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o17">ByteOffset</a>;
02109         } <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o19">Write</a>;
02110 
02111 <span class="comment">// end_ntddk end_wdm end_nthal</span>
02112 
02113         <span class="comment">//</span>
02114         <span class="comment">// System service parameters for:  NtQueryDirectoryFile</span>
02115         <span class="comment">//</span>
02116 
02117         <span class="keyword">struct </span>{
02118             ULONG Length;
<a name="l02119"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o20">02119</a>             PSTRING <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o20">FileName</a>;
<a name="l02120"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o21">02120</a>             FILE_INFORMATION_CLASS <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o21">FileInformationClass</a>;
<a name="l02121"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o22">02121</a>             ULONG <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o22">FileIndex</a>;
02122         } QueryDirectory;
02123 
02124         <span class="comment">//</span>
02125         <span class="comment">// System service parameters for:  NtNotifyChangeDirectoryFile</span>
02126         <span class="comment">//</span>
02127 
02128         <span class="keyword">struct </span>{
02129             ULONG Length;
<a name="l02130"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o24">02130</a>             ULONG <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o24">CompletionFilter</a>;
02131         } NotifyDirectory;
02132 
02133 <span class="comment">// begin_ntddk begin_wdm begin_nthal</span>
02134 
02135         <span class="comment">//</span>
02136         <span class="comment">// System service parameters for:  NtQueryInformationFile</span>
02137         <span class="comment">//</span>
02138 
02139         <span class="keyword">struct </span>{
02140             ULONG Length;
02141             FILE_INFORMATION_CLASS <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> FileInformationClass;
02142         } <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o27">QueryFile</a>;
02143 
02144         <span class="comment">//</span>
02145         <span class="comment">// System service parameters for:  NtSetInformationFile</span>
02146         <span class="comment">//</span>
02147 
02148         <span class="keyword">struct </span>{
02149             ULONG Length;
<a name="l02150"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o26">02150</a>             FILE_INFORMATION_CLASS <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o21">FileInformationClass</a>;
02151             <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject;
02152             <span class="keyword">union </span>{
02153                 <span class="keyword">struct </span>{
<a name="l02154"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o29">02154</a>                     BOOLEAN <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o29">ReplaceIfExists</a>;
<a name="l02155"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o30">02155</a>                     BOOLEAN <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o30">AdvanceOnly</a>;
02156                 };
<a name="l02157"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o31">02157</a>                 ULONG <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o31">ClusterCount</a>;
<a name="l02158"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o32">02158</a>                 HANDLE <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o32">DeleteHandle</a>;
02159             };
02160         } <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o33">SetFile</a>;
02161 
02162 <span class="comment">// end_ntddk end_wdm end_nthal</span>
02163 
02164         <span class="comment">//</span>
02165         <span class="comment">// System service parameters for:  NtQueryEaFile</span>
02166         <span class="comment">//</span>
02167 
02168         <span class="keyword">struct </span>{
02169             ULONG Length;
<a name="l02170"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o34">02170</a>             PVOID <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o34">EaList</a>;
<a name="l02171"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o35">02171</a>             ULONG <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o35">EaListLength</a>;
<a name="l02172"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o36">02172</a>             ULONG <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o36">EaIndex</a>;
02173         } QueryEa;
02174 
02175         <span class="comment">//</span>
02176         <span class="comment">// System service parameters for:  NtSetEaFile</span>
02177         <span class="comment">//</span>
02178 
02179         <span class="keyword">struct </span>{
02180             ULONG Length;
02181         } <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o38">SetEa</a>;
02182 
02183 <span class="comment">// begin_ntddk begin_wdm begin_nthal</span>
02184 
02185         <span class="comment">//</span>
02186         <span class="comment">// System service parameters for:  NtQueryVolumeInformationFile</span>
02187         <span class="comment">//</span>
02188 
02189         <span class="keyword">struct </span>{
02190             ULONG Length;
02191             FS_INFORMATION_CLASS <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o39">FsInformationClass</a>;
02192         } <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o40">QueryVolume</a>;
02193 
02194 <span class="comment">// end_ntddk end_wdm end_nthal</span>
02195 
02196         <span class="comment">//</span>
02197         <span class="comment">// System service parameters for:  NtSetVolumeInformationFile</span>
02198         <span class="comment">//</span>
02199 
02200         <span class="keyword">struct </span>{
02201             ULONG Length;
<a name="l02202"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o39">02202</a>             FS_INFORMATION_CLASS <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o39">FsInformationClass</a>;
02203         } SetVolume;
02204 
02205         <span class="comment">//</span>
02206         <span class="comment">// System service parameters for:  NtFsControlFile</span>
02207         <span class="comment">//</span>
02208         <span class="comment">// Note that the user's output buffer is stored in the UserBuffer field</span>
02209         <span class="comment">// and the user's input buffer is stored in the SystemBuffer field.</span>
02210         <span class="comment">//</span>
02211 
02212         <span class="keyword">struct </span>{
02213             ULONG OutputBufferLength;
02214             ULONG <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> InputBufferLength;
<a name="l02215"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o44">02215</a>             ULONG <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o44">FsControlCode</a>;
02216             PVOID <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o45">Type3InputBuffer</a>;
02217         } FileSystemControl;
02218 
02219         <span class="comment">//</span>
02220         <span class="comment">// System service parameters for:  NtLockFile/NtUnlockFile</span>
02221         <span class="comment">//</span>
02222 
02223         <span class="keyword">struct </span>{
<a name="l02224"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o47">02224</a>             PLARGE_INTEGER Length;
<a name="l02225"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o16">02225</a>             ULONG <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a51">Key</a>;
<a name="l02226"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o17">02226</a>             LARGE_INTEGER <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o17">ByteOffset</a>;
02227         } LockControl;
02228 
02229 <span class="comment">// begin_ntddk begin_wdm begin_nthal</span>
02230 
02231         <span class="comment">//</span>
02232         <span class="comment">// System service parameters for:  NtFlushBuffersFile</span>
02233         <span class="comment">//</span>
02234         <span class="comment">// No extra user-supplied parameters.</span>
02235         <span class="comment">//</span>
02236 
02237 <span class="comment">// end_ntddk end_wdm end_nthal</span>
02238 
02239         <span class="comment">//</span>
02240         <span class="comment">// System service parameters for:  NtCancelIoFile</span>
02241         <span class="comment">//</span>
02242         <span class="comment">// No extra user-supplied parameters.</span>
02243         <span class="comment">//</span>
02244 
02245 <span class="comment">// begin_ntddk begin_wdm begin_nthal</span>
02246 
02247         <span class="comment">//</span>
02248         <span class="comment">// System service parameters for:  NtDeviceIoControlFile</span>
02249         <span class="comment">//</span>
02250         <span class="comment">// Note that the user's output buffer is stored in the UserBuffer field</span>
02251         <span class="comment">// and the user's input buffer is stored in the SystemBuffer field.</span>
02252         <span class="comment">//</span>
02253 
02254         <span class="keyword">struct </span>{
<a name="l02255"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o42">02255</a>             ULONG OutputBufferLength;
<a name="l02256"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o43">02256</a>             ULONG <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> InputBufferLength;
<a name="l02257"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o49">02257</a>             ULONG <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> IoControlCode;
<a name="l02258"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o45">02258</a>             PVOID <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o45">Type3InputBuffer</a>;
02259         } DeviceIoControl;
02260 
02261 <span class="comment">// end_wdm</span>
02262         <span class="comment">//</span>
02263         <span class="comment">// System service parameters for:  NtQuerySecurityObject</span>
02264         <span class="comment">//</span>
02265 
02266         <span class="keyword">struct </span>{
02267             SECURITY_INFORMATION SecurityInformation;
02268             ULONG <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> Length;
02269         } <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o53">QuerySecurity</a>;
02270 
02271         <span class="comment">//</span>
02272         <span class="comment">// System service parameters for:  NtSetSecurityObject</span>
02273         <span class="comment">//</span>
02274 
02275         <span class="keyword">struct </span>{
<a name="l02276"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o51">02276</a>             SECURITY_INFORMATION <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o51">SecurityInformation</a>;
<a name="l02277"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o54">02277</a>             PSECURITY_DESCRIPTOR <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o54">SecurityDescriptor</a>;
02278         } SetSecurity;
02279 
02280 <span class="comment">// begin_wdm</span>
02281         <span class="comment">//</span>
02282         <span class="comment">// Non-system service parameters.</span>
02283         <span class="comment">//</span>
02284         <span class="comment">// Parameters for MountVolume</span>
02285         <span class="comment">//</span>
02286 
02287         <span class="keyword">struct </span>{
02288             <a class="code" href="../../d0/d5/io_8h.html#a333">PVPB</a> Vpb;
02289             <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject;
02290         } <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o58">MountVolume</a>;
02291 
02292         <span class="comment">//</span>
02293         <span class="comment">// Parameters for VerifyVolume</span>
02294         <span class="comment">//</span>
02295 
02296         <span class="keyword">struct </span>{
<a name="l02297"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o56">02297</a>             <a class="code" href="../../d0/d5/io_8h.html#a333">PVPB</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o56">Vpb</a>;
02298             <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject;
02299         } VerifyVolume;
02300 
02301         <span class="comment">//</span>
02302         <span class="comment">// Parameters for Scsi with internal device contorl.</span>
02303         <span class="comment">//</span>
02304 
02305         <span class="keyword">struct </span>{
<a name="l02306"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o60">02306</a>             <span class="keyword">struct </span>_SCSI_REQUEST_BLOCK *<a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o60">Srb</a>;
02307         } Scsi;
02308 
02309 <span class="comment">// end_ntddk end_wdm end_nthal</span>
02310 
02311         <span class="comment">//</span>
02312         <span class="comment">// System service parameters for:  NtQueryQuotaInformationFile</span>
02313         <span class="comment">//</span>
02314 
02315         <span class="keyword">struct </span>{
02316             ULONG Length;
<a name="l02317"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o62">02317</a>             PSID StartSid;
<a name="l02318"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o63">02318</a>             PFILE_GET_QUOTA_INFORMATION SidList;
<a name="l02319"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o64">02319</a>             ULONG SidListLength;
02320         } QueryQuota;
02321 
02322         <span class="comment">//</span>
02323         <span class="comment">// System service parameters for:  NtSetQuotaInformationFile</span>
02324         <span class="comment">//</span>
02325 
02326         <span class="keyword">struct </span>{
<a name="l02327"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o15">02327</a>             ULONG Length;
02328         } SetQuota;
02329 
02330 <span class="comment">// begin_ntddk begin_wdm begin_nthal</span>
02331 
02332         <span class="comment">//</span>
02333         <span class="comment">// Parameters for IRP_MN_QUERY_DEVICE_RELATIONS</span>
02334         <span class="comment">//</span>
02335 
02336         <span class="keyword">struct </span>{
<a name="l02337"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o67">02337</a>             <a class="code" href="../../d0/d5/io_8h.html#a358">DEVICE_RELATION_TYPE</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o67">Type</a>;
02338         } QueryDeviceRelations;
02339 
02340         <span class="comment">//</span>
02341         <span class="comment">// Parameters for IRP_MN_QUERY_INTERFACE</span>
02342         <span class="comment">//</span>
02343 
02344         <span class="keyword">struct </span>{
<a name="l02345"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o69">02345</a>             CONST GUID *<a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o69">InterfaceType</a>;
<a name="l02346"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o70">02346</a>             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l02347"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o71">02347</a>             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o71">Version</a>;
<a name="l02348"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o72">02348</a>             <a class="code" href="../../d0/d5/io_8h.html#a364">PINTERFACE</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o72">Interface</a>;
<a name="l02349"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o73">02349</a>             PVOID <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o73">InterfaceSpecificData</a>;
02350         } QueryInterface;
02351 
02352 <span class="comment">// end_ntifs</span>
02353 
02354         <span class="comment">//</span>
02355         <span class="comment">// Parameters for IRP_MN_QUERY_CAPABILITIES</span>
02356         <span class="comment">//</span>
02357 
02358         <span class="keyword">struct </span>{
<a name="l02359"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o75">02359</a>             <a class="code" href="../../d0/d5/io_8h.html#a366">PDEVICE_CAPABILITIES</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o75">Capabilities</a>;
02360         } DeviceCapabilities;
02361 
02362         <span class="comment">//</span>
02363         <span class="comment">// Parameters for IRP_MN_FILTER_RESOURCE_REQUIREMENTS</span>
02364         <span class="comment">//</span>
02365 
02366         <span class="keyword">struct </span>{
<a name="l02367"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o77">02367</a>             PIO_RESOURCE_REQUIREMENTS_LIST <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o77">IoResourceRequirementList</a>;
02368         } FilterResourceRequirements;
02369 
02370         <span class="comment">//</span>
02371         <span class="comment">// Parameters for IRP_MN_READ_CONFIG and IRP_MN_WRITE_CONFIG</span>
02372         <span class="comment">//</span>
02373 
02374         <span class="keyword">struct </span>{
<a name="l02375"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o79">02375</a>             ULONG <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o79">WhichSpace</a>;
02376             PVOID <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>;
<a name="l02377"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o81">02377</a>             ULONG <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o81">Offset</a>;
<a name="l02378"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o52">02378</a>             ULONG <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> Length;
02379         } ReadWriteConfig;
02380 
02381         <span class="comment">//</span>
02382         <span class="comment">// Parameters for IRP_MN_SET_LOCK</span>
02383         <span class="comment">//</span>
02384 
02385         <span class="keyword">struct </span>{
<a name="l02386"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o83">02386</a>             BOOLEAN <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o83">Lock</a>;
02387         } SetLock;
02388 
02389         <span class="comment">//</span>
02390         <span class="comment">// Parameters for IRP_MN_QUERY_ID</span>
02391         <span class="comment">//</span>
02392 
02393         <span class="keyword">struct </span>{
<a name="l02394"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o85">02394</a>             <a class="code" href="../../d0/d5/io_8h.html#a604">BUS_QUERY_ID_TYPE</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o85">IdType</a>;
02395         } QueryId;
02396 
02397         <span class="comment">//</span>
02398         <span class="comment">// Parameters for IRP_MN_QUERY_DEVICE_TEXT</span>
02399         <span class="comment">//</span>
02400 
02401         <span class="keyword">struct </span>{
<a name="l02402"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o87">02402</a>             <a class="code" href="../../d0/d5/io_8h.html#a605">DEVICE_TEXT_TYPE</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o87">DeviceTextType</a>;
<a name="l02403"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o88">02403</a>             LCID <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o88">LocaleId</a>;
02404         } QueryDeviceText;
02405 
02406         <span class="comment">//</span>
02407         <span class="comment">// Parameters for IRP_MN_DEVICE_USAGE_NOTIFICATION</span>
02408         <span class="comment">//</span>
02409 
02410         <span class="keyword">struct </span>{
<a name="l02411"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o90">02411</a>             BOOLEAN <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o90">InPath</a>;
<a name="l02412"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o91">02412</a>             BOOLEAN <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o10">Reserved</a>[3];
<a name="l02413"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o92">02413</a>             <a class="code" href="../../d0/d5/io_8h.html#a362">DEVICE_USAGE_NOTIFICATION_TYPE</a> <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o67">Type</a>;
02414         } UsageNotification;
02415 
02416         <span class="comment">//</span>
02417         <span class="comment">// Parameters for IRP_MN_WAIT_WAKE</span>
02418         <span class="comment">//</span>
02419 
02420         <span class="keyword">struct </span>{
<a name="l02421"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o94">02421</a>             SYSTEM_POWER_STATE <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o94">PowerState</a>;
02422         } WaitWake;
02423 
02424         <span class="comment">//</span>
02425         <span class="comment">// Parameter for IRP_MN_POWER_SEQUENCE</span>
02426         <span class="comment">//</span>
02427 
02428         <span class="keyword">struct </span>{
<a name="l02429"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o96">02429</a>             <a class="code" href="../../d0/d5/io_8h.html#a368">PPOWER_SEQUENCE</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o96">PowerSequence</a>;
02430         } PowerSequence;
02431 
02432         <span class="comment">//</span>
02433         <span class="comment">// Parameters for IRP_MN_SET_POWER and IRP_MN_QUERY_POWER</span>
02434         <span class="comment">//</span>
02435 
02436         <span class="keyword">struct </span>{
<a name="l02437"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o98">02437</a>             ULONG <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o98">SystemContext</a>;
<a name="l02438"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o99">02438</a>             POWER_STATE_TYPE <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o67">Type</a>;
<a name="l02439"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o100">02439</a>             POWER_STATE <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o100">State</a>;
<a name="l02440"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o101">02440</a>             POWER_ACTION <a class="code" href="../../d0/d5/io_8h.html#a219">POINTER_ALIGNMENT</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o101">ShutdownType</a>;
02441         } Power;
02442 
02443         <span class="comment">//</span>
02444         <span class="comment">// Parameters for StartDevice</span>
02445         <span class="comment">//</span>
02446 
02447         <span class="keyword">struct </span>{
<a name="l02448"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o103">02448</a>             PCM_RESOURCE_LIST <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o103">AllocatedResources</a>;
<a name="l02449"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o104">02449</a>             PCM_RESOURCE_LIST <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o104">AllocatedResourcesTranslated</a>;
02450         } StartDevice;
02451 
02452 <span class="comment">// begin_ntifs</span>
02453         <span class="comment">//</span>
02454         <span class="comment">// Parameters for Cleanup</span>
02455         <span class="comment">//</span>
02456         <span class="comment">// No extra parameters supplied</span>
02457         <span class="comment">//</span>
02458 
02459         <span class="comment">//</span>
02460         <span class="comment">// WMI Irps</span>
02461         <span class="comment">//</span>
02462 
02463         <span class="keyword">struct </span>{
<a name="l02464"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o106">02464</a>             ULONG_PTR <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o106">ProviderId</a>;
<a name="l02465"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o107">02465</a>             PVOID <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o107">DataPath</a>;
<a name="l02466"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o108">02466</a>             ULONG <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o108">BufferSize</a>;
<a name="l02467"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o80">02467</a>             PVOID <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>;
02468         } WMI;
02469 
02470         <span class="comment">//</span>
02471         <span class="comment">// Others - driver-specific</span>
02472         <span class="comment">//</span>
02473 
02474         <span class="keyword">struct </span>{
<a name="l02475"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o110">02475</a>             PVOID <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o110">Argument1</a>;
<a name="l02476"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o111">02476</a>             PVOID <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o111">Argument2</a>;
<a name="l02477"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o112">02477</a>             PVOID <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o112">Argument3</a>;
<a name="l02478"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o113">02478</a>             PVOID <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o113">Argument4</a>;
02479         } Others;
02480 
02481     } <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o11">Parameters</a>;
02482 
02483     <span class="comment">//</span>
02484     <span class="comment">// Save a pointer to this device driver's device object for this request</span>
02485     <span class="comment">// so it can be passed to the completion routine if needed.</span>
02486     <span class="comment">//</span>
02487 
<a name="l02488"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o57">02488</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject;
02489 
02490     <span class="comment">//</span>
02491     <span class="comment">// The following location contains a pointer to the file object for this</span>
02492     <span class="comment">//</span>
02493 
<a name="l02494"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o28">02494</a>     <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject;
02495 
02496     <span class="comment">//</span>
02497     <span class="comment">// The following routine is invoked depending on the flags in the above</span>
02498     <span class="comment">// flags field.</span>
02499     <span class="comment">//</span>
02500 
<a name="l02501"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o116">02501</a>     <a class="code" href="../../d0/d5/io_8h.html#a357">PIO_COMPLETION_ROUTINE</a> <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o116">CompletionRoutine</a>;
02502 
02503     <span class="comment">//</span>
02504     <span class="comment">// The following is used to store the address of the context parameter</span>
02505     <span class="comment">// that should be passed to the CompletionRoutine.</span>
02506     <span class="comment">//</span>
02507 
<a name="l02508"></a><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html#o117">02508</a>     PVOID Context;
02509 
02510 } <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html">IO_STACK_LOCATION</a>, *<a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html">PIO_STACK_LOCATION</a>;
02511 <span class="preprocessor">#if !defined(_ALPHA_) &amp;&amp; !defined(_IA64_)</span>
02512 <span class="preprocessor"></span><span class="preprocessor">#include "poppack.h"</span>
02513 <span class="preprocessor">#endif</span>
02514 <span class="preprocessor"></span>
02515 <span class="comment">//</span>
02516 <span class="comment">// Define the share access structure used by file systems to determine</span>
02517 <span class="comment">// whether or not another accessor may open the file.</span>
02518 <span class="comment">//</span>
02519 
<a name="l02520"></a><a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html">02520</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html">_SHARE_ACCESS</a> {
<a name="l02521"></a><a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html#o0">02521</a>     ULONG <a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html#o0">OpenCount</a>;
<a name="l02522"></a><a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html#o1">02522</a>     ULONG <a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html#o1">Readers</a>;
<a name="l02523"></a><a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html#o2">02523</a>     ULONG <a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html#o2">Writers</a>;
<a name="l02524"></a><a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html#o3">02524</a>     ULONG <a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html#o3">Deleters</a>;
<a name="l02525"></a><a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html#o4">02525</a>     ULONG <a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html#o4">SharedRead</a>;
<a name="l02526"></a><a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html#o5">02526</a>     ULONG <a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html#o5">SharedWrite</a>;
<a name="l02527"></a><a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html#o6">02527</a>     ULONG <a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html#o6">SharedDelete</a>;
02528 } <a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html">SHARE_ACCESS</a>, *<a class="code" href="../../d9/d2/struct__SHARE__ACCESS.html">PSHARE_ACCESS</a>;
02529 
02530 <span class="comment">// end_wdm</span>
02531 
02532 <span class="comment">//</span>
02533 <span class="comment">// The following structure is used by drivers that are initializing to</span>
02534 <span class="comment">// determine the number of devices of a particular type that have already</span>
02535 <span class="comment">// been initialized.  It is also used to track whether or not the AtDisk</span>
02536 <span class="comment">// address range has already been claimed.  Finally, it is used by the</span>
02537 <span class="comment">// NtQuerySystemInformation system service to return device type counts.</span>
02538 <span class="comment">//</span>
02539 
<a name="l02540"></a><a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html">02540</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html">_CONFIGURATION_INFORMATION</a> {
02541 
02542     <span class="comment">//</span>
02543     <span class="comment">// This field indicates the total number of disks in the system.  This</span>
02544     <span class="comment">// number should be used by the driver to determine the name of new</span>
02545     <span class="comment">// disks.  This field should be updated by the driver as it finds new</span>
02546     <span class="comment">// disks.</span>
02547     <span class="comment">//</span>
02548 
<a name="l02549"></a><a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o0">02549</a>     ULONG <a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o0">DiskCount</a>;                <span class="comment">// Count of hard disks thus far</span>
<a name="l02550"></a><a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o1">02550</a>     ULONG <a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o1">FloppyCount</a>;              <span class="comment">// Count of floppy disks thus far</span>
<a name="l02551"></a><a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o2">02551</a>     ULONG <a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o2">CdRomCount</a>;               <span class="comment">// Count of CD-ROM drives thus far</span>
<a name="l02552"></a><a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o3">02552</a>     ULONG <a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o3">TapeCount</a>;                <span class="comment">// Count of tape drives thus far</span>
<a name="l02553"></a><a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o4">02553</a>     ULONG <a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o4">ScsiPortCount</a>;            <span class="comment">// Count of SCSI port adapters thus far</span>
<a name="l02554"></a><a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o5">02554</a>     ULONG <a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o5">SerialCount</a>;              <span class="comment">// Count of serial devices thus far</span>
<a name="l02555"></a><a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o6">02555</a>     ULONG <a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o6">ParallelCount</a>;            <span class="comment">// Count of parallel devices thus far</span>
02556 
02557     <span class="comment">//</span>
02558     <span class="comment">// These next two fields indicate ownership of one of the two IO address</span>
02559     <span class="comment">// spaces that are used by WD1003-compatable disk controllers.</span>
02560     <span class="comment">//</span>
02561 
<a name="l02562"></a><a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o7">02562</a>     BOOLEAN <a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o7">AtDiskPrimaryAddressClaimed</a>;    <span class="comment">// 0x1F0 - 0x1FF</span>
<a name="l02563"></a><a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o8">02563</a>     BOOLEAN <a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o8">AtDiskSecondaryAddressClaimed</a>;  <span class="comment">// 0x170 - 0x17F</span>
02564 
02565     <span class="comment">//</span>
02566     <span class="comment">// Indicates the structure version, as anything value belong this will have been added.</span>
02567     <span class="comment">// Use the structure size as the version.</span>
02568     <span class="comment">//</span>
02569 
<a name="l02570"></a><a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o9">02570</a>     ULONG <a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o9">Version</a>;
02571 
02572     <span class="comment">//</span>
02573     <span class="comment">// Indicates the total number of medium changer devices in the system.</span>
02574     <span class="comment">// This field will be updated by the drivers as it determines that</span>
02575     <span class="comment">// new devices have been found and will be supported.</span>
02576     <span class="comment">//</span>
02577 
<a name="l02578"></a><a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o10">02578</a>     ULONG <a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html#o10">MediumChangerCount</a>;
02579 
02580 } <a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html">CONFIGURATION_INFORMATION</a>, *<a class="code" href="../../d6/d8/struct__CONFIGURATION__INFORMATION.html">PCONFIGURATION_INFORMATION</a>;
02581 
02582 <span class="comment">// end_ntddk end_nthal</span>
02583 
02584 <span class="comment">//</span>
02585 <span class="comment">// The following are global counters used by the I/O system to indicate the</span>
02586 <span class="comment">// amount of I/O being performed in the system.  The first three counters</span>
02587 <span class="comment">// are just that, counts of operations that have been requested, while the</span>
02588 <span class="comment">// last three counters track the amount of data transferred for each type</span>
02589 <span class="comment">// of I/O request.</span>
02590 <span class="comment">//</span>
02591 
<a name="l02592"></a><a class="code" href="../../d0/d5/io_8h.html#a379">02592</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d0/d5/io_8h.html#a379">IoStatisticsLock</a>;
<a name="l02593"></a><a class="code" href="../../d0/d5/io_8h.html#a380">02593</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d0/d5/io_8h.html#a380">IoReadOperationCount</a>;
<a name="l02594"></a><a class="code" href="../../d0/d5/io_8h.html#a381">02594</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d0/d5/io_8h.html#a381">IoWriteOperationCount</a>;
<a name="l02595"></a><a class="code" href="../../d0/d5/io_8h.html#a382">02595</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d0/d5/io_8h.html#a382">IoOtherOperationCount</a>;
<a name="l02596"></a><a class="code" href="../../d0/d5/io_8h.html#a383">02596</a> <span class="keyword">extern</span> LARGE_INTEGER <a class="code" href="../../d0/d5/io_8h.html#a383">IoReadTransferCount</a>;
<a name="l02597"></a><a class="code" href="../../d0/d5/io_8h.html#a384">02597</a> <span class="keyword">extern</span> LARGE_INTEGER <a class="code" href="../../d0/d5/io_8h.html#a384">IoWriteTransferCount</a>;
<a name="l02598"></a><a class="code" href="../../d0/d5/io_8h.html#a385">02598</a> <span class="keyword">extern</span> LARGE_INTEGER <a class="code" href="../../d0/d5/io_8h.html#a385">IoOtherTransferCount</a>;
02599 
02600 <span class="comment">//</span>
02601 <span class="comment">// It is difficult for cached file systems to properly charge quota</span>
02602 <span class="comment">// for the storage that they allocate on behalf of user file handles,</span>
02603 <span class="comment">// so the following amount of additional quota is charged against each</span>
02604 <span class="comment">// handle as a "best guess" as to the amount of quota the file system</span>
02605 <span class="comment">// will allocate on behalf of this handle.</span>
02606 <span class="comment">//</span>
02607 
02608 <span class="comment">//</span>
02609 <span class="comment">// These numbers are totally arbitrary, and can be changed if it turns out</span>
02610 <span class="comment">// that the file systems actually allocate more (or less) on behalf of</span>
02611 <span class="comment">// their file objects.  The non-paged pool charge constant is added to the</span>
02612 <span class="comment">// size of a FILE_OBJECT to get the actual charge amount.</span>
02613 <span class="comment">//</span>
02614 
<a name="l02615"></a><a class="code" href="../../d0/d5/io_8h.html#a220">02615</a> <span class="preprocessor">#define IO_FILE_OBJECT_NON_PAGED_POOL_CHARGE    64</span>
<a name="l02616"></a><a class="code" href="../../d0/d5/io_8h.html#a221">02616</a> <span class="preprocessor"></span><span class="preprocessor">#define IO_FILE_OBJECT_PAGED_POOL_CHARGE        1024</span>
02617 <span class="preprocessor"></span>
02618 
02619 <span class="comment">// begin_ntddk begin_wdm begin_nthal</span>
02620 <span class="comment">//</span>
02621 <span class="comment">// Public I/O routine definitions</span>
02622 <span class="comment">//</span>
02623 
02624 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02625 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02626 <a class="code" href="../../d4/d6/iosubs_8c.html#a9">IoAcquireCancelSpinLock</a>(
02627     OUT PKIRQL Irql
02628     );
02629 
02630 <span class="comment">// end_ntddk end_wdm end_nthal</span>
02631 
02632 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02633 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02634 <a class="code" href="../../d4/d6/iosubs_8c.html#a10">IoAcquireVpbSpinLock</a>(
02635     OUT PKIRQL Irql
02636     );
02637 
02638 <span class="comment">// begin_ntddk  begin_nthal end_ntifs</span>
02639 
02640 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02641 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02642 <a class="code" href="../../d4/d6/iosubs_8c.html#a11">IoAllocateAdapterChannel</a>(
02643     IN <a class="code" href="../../d7/d5/struct__ADAPTER__OBJECT.html">PADAPTER_OBJECT</a> AdapterObject,
02644     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
02645     IN ULONG NumberOfMapRegisters,
02646     IN PDRIVER_CONTROL ExecutionRoutine,
02647     IN PVOID Context
02648     );
02649 
02650 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02651 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02652 <a class="code" href="../../d4/d6/iosubs_8c.html#a12">IoAllocateController</a>(
02653     IN PCONTROLLER_OBJECT ControllerObject,
02654     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
02655     IN PDRIVER_CONTROL ExecutionRoutine,
02656     IN PVOID Context
02657     );
02658 
02659 <span class="comment">//  begin_wdm</span>
02660 
02661 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02662 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02663 <a class="code" href="../../d4/d6/iosubs_8c.html#a13">IoAllocateDriverObjectExtension</a>(
02664     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject,
02665     IN PVOID ClientIdentificationAddress,
02666     IN ULONG DriverObjectExtensionSize,
02667     OUT PVOID *DriverObjectExtension
02668     );
02669 
02670 <span class="comment">// begin_ntifs</span>
02671 
02672 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02673 PVOID
02674 <a class="code" href="../../d4/d6/iosubs_8c.html#a14">IoAllocateErrorLogEntry</a>(
02675     IN PVOID IoObject,
02676     IN UCHAR EntrySize
02677     );
02678 
02679 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02680 <a class="code" href="../../d0/d5/io_8h.html#a356">PIRP</a>
02681 <a class="code" href="../../d4/d6/iosubs_8c.html#a17">IoAllocateIrp</a>(
02682     IN CCHAR StackSize,
02683     IN BOOLEAN ChargeQuota
02684     );
02685 
02686 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02687 <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a>
02688 <a class="code" href="../../d4/d6/iosubs_8c.html#a19">IoAllocateMdl</a>(
02689     IN PVOID VirtualAddress,
02690     IN ULONG Length,
02691     IN BOOLEAN SecondaryBuffer,
02692     IN BOOLEAN ChargeQuota,
02693     IN OUT PIRP Irp OPTIONAL
02694     );
02695 
02696 <span class="comment">// end_wdm end_ntifs</span>
02697 <span class="comment">//++</span>
02698 <span class="comment">//</span>
02699 <span class="comment">// VOID</span>
02700 <span class="comment">// IoAssignArcName(</span>
02701 <span class="comment">//     IN PUNICODE_STRING ArcName,</span>
02702 <span class="comment">//     IN PUNICODE_STRING DeviceName</span>
02703 <span class="comment">//     )</span>
02704 <span class="comment">//</span>
02705 <span class="comment">// Routine Description:</span>
02706 <span class="comment">//</span>
02707 <span class="comment">//     This routine is invoked by drivers of bootable media to create a symbolic</span>
02708 <span class="comment">//     link between the ARC name of their device and its NT name.  This allows</span>
02709 <span class="comment">//     the system to determine which device in the system was actually booted</span>
02710 <span class="comment">//     from since the ARC firmware only deals in ARC names, and NT only deals</span>
02711 <span class="comment">//     in NT names.</span>
02712 <span class="comment">//</span>
02713 <span class="comment">// Arguments:</span>
02714 <span class="comment">//</span>
02715 <span class="comment">//     ArcName - Supplies the Unicode string representing the ARC name.</span>
02716 <span class="comment">//</span>
02717 <span class="comment">//     DeviceName - Supplies the name to which the ARCname refers.</span>
02718 <span class="comment">//</span>
02719 <span class="comment">// Return Value:</span>
02720 <span class="comment">//</span>
02721 <span class="comment">//     None.</span>
02722 <span class="comment">//</span>
02723 <span class="comment">//--</span>
02724 
<a name="l02725"></a><a class="code" href="../../d0/d5/io_8h.html#a222">02725</a> <span class="preprocessor">#define IoAssignArcName( ArcName, DeviceName ) (  \</span>
02726 <span class="preprocessor">    IoCreateSymbolicLink( (ArcName), (DeviceName) ) )</span>
02727 <span class="preprocessor"></span>
02728 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02729 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02730 <a class="code" href="../../d7/d9/assign_8c.html#a60">IoAssignResources</a> (
02731     IN PUNICODE_STRING RegistryPath,
02732     IN PUNICODE_STRING DriverClassName OPTIONAL,
02733     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject,
02734     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject OPTIONAL,
02735     IN PIO_RESOURCE_REQUIREMENTS_LIST RequestedResources,
02736     IN OUT PCM_RESOURCE_LIST *AllocatedResources
02737     );
02738 
02739 <span class="comment">// end_ntddk end_nthal</span>
02740 
02741 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02742 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02743 <a class="code" href="../../d4/d6/iosubs_8c.html#a20">IoAsynchronousPageWrite</a>(
02744     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
02745     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MemoryDescriptorList,
02746     IN PLARGE_INTEGER StartingOffset,
02747     IN PIO_APC_ROUTINE ApcRoutine,
02748     IN PVOID ApcContext,
02749     OUT PIO_STATUS_BLOCK IoStatusBlock,
02750     OUT PIRP *Irp OPTIONAL
02751     );
02752 
02753 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
02754 
02755 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02756 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02757 <a class="code" href="../../d4/d6/iosubs_8c.html#a21">IoAttachDevice</a>(
02758     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> SourceDevice,
02759     IN PUNICODE_STRING TargetDevice,
02760     OUT <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> *AttachedDevice
02761     );
02762 
02763 <span class="comment">// end_wdm</span>
02764 
02765 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02766 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02767 <a class="code" href="../../d4/d6/iosubs_8c.html#a22">IoAttachDeviceByPointer</a>(
02768     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> SourceDevice,
02769     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> TargetDevice
02770     );
02771 
02772 <span class="comment">// begin_wdm</span>
02773 
02774 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02775 <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>
02776 <a class="code" href="../../d4/d6/iosubs_8c.html#a23">IoAttachDeviceToDeviceStack</a>(
02777     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> SourceDevice,
02778     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> TargetDevice
02779     );
02780 
02781 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02782 <a class="code" href="../../d0/d5/io_8h.html#a356">PIRP</a>
02783 <a class="code" href="../../d4/d6/iosubs_8c.html#a24">IoBuildAsynchronousFsdRequest</a>(
02784     IN ULONG MajorFunction,
02785     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
02786     IN OUT PVOID Buffer OPTIONAL,
02787     IN ULONG Length OPTIONAL,
02788     IN PLARGE_INTEGER StartingOffset OPTIONAL,
02789     IN PIO_STATUS_BLOCK IoStatusBlock OPTIONAL
02790     );
02791 
02792 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02793 <a class="code" href="../../d0/d5/io_8h.html#a356">PIRP</a>
02794 <a class="code" href="../../d4/d6/iosubs_8c.html#a25">IoBuildDeviceIoControlRequest</a>(
02795     IN ULONG IoControlCode,
02796     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
02797     IN PVOID InputBuffer OPTIONAL,
02798     IN ULONG InputBufferLength,
02799     OUT PVOID OutputBuffer OPTIONAL,
02800     IN ULONG OutputBufferLength,
02801     IN BOOLEAN InternalDeviceIoControl,
02802     IN <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> Event,
02803     OUT PIO_STATUS_BLOCK IoStatusBlock
02804     );
02805 
02806 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02807 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02808 <a class="code" href="../../d4/d6/iosubs_8c.html#a26">IoBuildPartialMdl</a>(
02809     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> SourceMdl,
02810     IN OUT <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> TargetMdl,
02811     IN PVOID VirtualAddress,
02812     IN ULONG Length
02813     );
02814 
<a name="l02815"></a><a class="code" href="../../d9/d4/struct__BOOTDISK__INFORMATION.html">02815</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d4/struct__BOOTDISK__INFORMATION.html">_BOOTDISK_INFORMATION</a> {
<a name="l02816"></a><a class="code" href="../../d9/d4/struct__BOOTDISK__INFORMATION.html#o0">02816</a>     LONGLONG <a class="code" href="../../d9/d4/struct__BOOTDISK__INFORMATION.html#o0">BootPartitionOffset</a>;
<a name="l02817"></a><a class="code" href="../../d9/d4/struct__BOOTDISK__INFORMATION.html#o1">02817</a>     LONGLONG <a class="code" href="../../d9/d4/struct__BOOTDISK__INFORMATION.html#o1">SystemPartitionOffset</a>;
<a name="l02818"></a><a class="code" href="../../d9/d4/struct__BOOTDISK__INFORMATION.html#o2">02818</a>     ULONG <a class="code" href="../../d9/d4/struct__BOOTDISK__INFORMATION.html#o2">BootDeviceSignature</a>;
<a name="l02819"></a><a class="code" href="../../d9/d4/struct__BOOTDISK__INFORMATION.html#o3">02819</a>     ULONG <a class="code" href="../../d9/d4/struct__BOOTDISK__INFORMATION.html#o3">SystemDeviceSignature</a>;
02820 } <a class="code" href="../../d9/d4/struct__BOOTDISK__INFORMATION.html">BOOTDISK_INFORMATION</a>, *<a class="code" href="../../d9/d4/struct__BOOTDISK__INFORMATION.html">PBOOTDISK_INFORMATION</a>;
02821 
02822 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02823 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02824 <a class="code" href="../../d4/d6/iosubs_8c.html#a124">IoGetBootDiskInformation</a>(
02825     IN OUT PBOOTDISK_INFORMATION BootDiskInformation,
02826     IN ULONG Size
02827     );
02828 
02829 <span class="comment">// end_ntddk end_nthal end_wdm end_ntifs</span>
02830 
02831 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02832 <a class="code" href="../../d4/d1/pnppower_8c.html#a2">IoBuildPoDeviceNotifyList</a> (
02833     IN OUT PVOID Order
02834     );
02835 
02836 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02837 <a class="code" href="../../d8/d0/pnpioapi_8c.html#a113">IoNotifyPowerOperationVetoed</a>(
02838     IN POWER_ACTION             VetoedPowerOperation,
02839     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>           TargetedDeviceObject    OPTIONAL,
02840     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>           VetoingDeviceObject
02841     );
02842 
02843 <span class="comment">// begin_ntddk begin_nthal begin_wdm begin_ntifs</span>
02844 
02845 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02846 <a class="code" href="../../d0/d5/io_8h.html#a356">PIRP</a>
02847 <a class="code" href="../../d4/d6/iosubs_8c.html#a27">IoBuildSynchronousFsdRequest</a>(
02848     IN ULONG MajorFunction,
02849     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
02850     IN OUT PVOID Buffer OPTIONAL,
02851     IN ULONG Length OPTIONAL,
02852     IN PLARGE_INTEGER StartingOffset OPTIONAL,
02853     IN <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> Event,
02854     OUT PIO_STATUS_BLOCK IoStatusBlock
02855     );
02856 
02857 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02858 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02859 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
02860 <a class="code" href="../../d4/d6/iosubs_8c.html#a29">IofCallDriver</a>(
02861     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
02862     IN OUT PIRP Irp
02863     );
02864 
<a name="l02865"></a><a class="code" href="../../d0/d5/io_8h.html#a223">02865</a> <span class="preprocessor">#define IoCallDriver(a,b)   \</span>
02866 <span class="preprocessor">        IofCallDriver(a,b)</span>
02867 <span class="preprocessor"></span>
02868 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02869 BOOLEAN
02870 <a class="code" href="../../d4/d6/iosubs_8c.html#a30">IoCancelIrp</a>(
02871     IN PIRP Irp
02872     );
02873 
02874 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
02875 
02876 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02877 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02878 <a class="code" href="../../d4/d6/iosubs_8c.html#a31">IoCancelThreadIo</a>(
02879     IN <a class="code" href="../../d5/d6/struct__ETHREAD.html">PETHREAD</a> Thread
02880     );
02881 
02882 <span class="comment">// begin_ntifs</span>
02883 
02884 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02885 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02886 <a class="code" href="../../d4/d6/iosubs_8c.html#a32">IoCheckDesiredAccess</a>(
02887     IN OUT PACCESS_MASK DesiredAccess,
02888     IN ACCESS_MASK GrantedAccess
02889     );
02890 
02891 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02892 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02893 <a class="code" href="../../d4/d6/iosubs_8c.html#a33">IoCheckEaBufferValidity</a>(
02894     IN PFILE_FULL_EA_INFORMATION EaBuffer,
02895     IN ULONG EaLength,
02896     OUT PULONG ErrorOffset
02897     );
02898 
02899 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02900 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02901 <a class="code" href="../../d4/d6/iosubs_8c.html#a34">IoCheckFunctionAccess</a>(
02902     IN ACCESS_MASK GrantedAccess,
02903     IN UCHAR MajorFunction,
02904     IN UCHAR MinorFunction,
02905     IN ULONG IoControlCode,
02906     IN PVOID Arg1 OPTIONAL,
02907     IN PVOID Arg2 OPTIONAL
02908     );
02909 
02910 <span class="comment">// end_ntifs</span>
02911 <span class="comment">// begin_ntsrv</span>
02912 
02913 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02914 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02915 <a class="code" href="../../d4/d6/iosubs_8c.html#a35">IoCheckQuerySetFileInformation</a>(
02916     IN FILE_INFORMATION_CLASS FileInformationClass,
02917     IN ULONG Length,
02918     IN BOOLEAN SetOperation
02919     );
02920 
02921 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02922 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02923 <a class="code" href="../../d4/d6/iosubs_8c.html#a36">IoCheckQuerySetVolumeInformation</a>(
02924     IN FS_INFORMATION_CLASS FsInformationClass,
02925     IN ULONG Length,
02926     IN BOOLEAN SetOperation
02927     );
02928 
02929 <span class="comment">// begin_ntifs</span>
02930 
02931 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02932 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02933 <a class="code" href="../../d4/d6/iosubs_8c.html#a37">IoCheckQuotaBufferValidity</a>(
02934     IN PFILE_QUOTA_INFORMATION QuotaBuffer,
02935     IN ULONG QuotaLength,
02936     OUT PULONG ErrorOffset
02937     );
02938 
02939 <span class="comment">// end_ntsrv</span>
02940 <span class="comment">// begin_ntddk begin_wdm begin_nthal</span>
02941 
02942 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02943 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02944 <a class="code" href="../../d4/d6/iosubs_8c.html#a38">IoCheckShareAccess</a>(
02945     IN ACCESS_MASK DesiredAccess,
02946     IN ULONG DesiredShareAccess,
02947     IN OUT <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
02948     IN OUT PSHARE_ACCESS ShareAccess,
02949     IN BOOLEAN Update
02950     );
02951 
02952 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02953 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02954 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
02955 <a class="code" href="../../d4/d6/iosubs_8c.html#a39">IofCompleteRequest</a>(
02956     IN PIRP Irp,
02957     IN CCHAR <a class="code" href="../../d0/d6/iop_8h.html#a36">PriorityBoost</a>
02958     );
02959 
<a name="l02960"></a><a class="code" href="../../d0/d5/io_8h.html#a224">02960</a> <span class="preprocessor">#define IoCompleteRequest(a,b)  \</span>
02961 <span class="preprocessor">        IofCompleteRequest(a,b)</span>
02962 <span class="preprocessor"></span>
02963 <span class="comment">// end_ntifs</span>
02964 
02965 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02966 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02967 <a class="code" href="../../d4/d6/iosubs_8c.html#a41">IoConnectInterrupt</a>(
02968     OUT <a class="code" href="../../d0/d7/struct__KINTERRUPT.html">PKINTERRUPT</a> *InterruptObject,
02969     IN PKSERVICE_ROUTINE ServiceRoutine,
02970     IN PVOID ServiceContext,
02971     IN PKSPIN_LOCK SpinLock OPTIONAL,
02972     IN ULONG Vector,
02973     IN KIRQL Irql,
02974     IN KIRQL SynchronizeIrql,
02975     IN KINTERRUPT_MODE InterruptMode,
02976     IN BOOLEAN ShareVector,
02977     IN KAFFINITY ProcessorEnableMask,
02978     IN BOOLEAN FloatingSave
02979     );
02980 
02981 <span class="comment">//  end_wdm</span>
02982 
02983 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02984 <a class="code" href="../../d0/d5/io_8h.html#a338">PCONTROLLER_OBJECT</a>
02985 <a class="code" href="../../d4/d6/iosubs_8c.html#a42">IoCreateController</a>(
02986     IN ULONG Size
02987     );
02988 
02989 <span class="comment">//  begin_wdm begin_ntifs</span>
02990 
02991 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02992 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02993 <a class="code" href="../../d4/d6/iosubs_8c.html#a45">IoCreateDevice</a>(
02994     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject,
02995     IN ULONG DeviceExtensionSize,
02996     IN PUNICODE_STRING DeviceName OPTIONAL,
02997     IN DEVICE_TYPE DeviceType,
02998     IN ULONG DeviceCharacteristics,
02999     IN BOOLEAN Exclusive,
03000     OUT <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> *DeviceObject
03001     );
03002 
<a name="l03003"></a><a class="code" href="../../d0/d5/io_8h.html#a225">03003</a> <span class="preprocessor">#define WDM_MAJORVERSION        0x01</span>
<a name="l03004"></a><a class="code" href="../../d0/d5/io_8h.html#a226">03004</a> <span class="preprocessor"></span><span class="preprocessor">#define WDM_MINORVERSION        0x10</span>
03005 <span class="preprocessor"></span>
03006 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03007 BOOLEAN
03008 <a class="code" href="../../d8/d0/pnpioapi_8c.html#a110">IoIsWdmVersionAvailable</a>(
03009     IN UCHAR MajorVersion,
03010     IN UCHAR MinorVersion
03011     );
03012 
03013 <span class="comment">// end_nthal</span>
03014 
03015 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03016 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03017 <a class="code" href="../../d4/d6/iosubs_8c.html#a46">IoCreateFile</a>(
03018     OUT PHANDLE FileHandle,
03019     IN ACCESS_MASK DesiredAccess,
03020     IN POBJECT_ATTRIBUTES ObjectAttributes,
03021     OUT PIO_STATUS_BLOCK IoStatusBlock,
03022     IN PLARGE_INTEGER AllocationSize OPTIONAL,
03023     IN ULONG FileAttributes,
03024     IN ULONG ShareAccess,
03025     IN ULONG Disposition,
03026     IN ULONG CreateOptions,
03027     IN PVOID EaBuffer OPTIONAL,
03028     IN ULONG EaLength,
03029     IN CREATE_FILE_TYPE CreateFileType,
03030     IN PVOID ExtraCreateParameters OPTIONAL,
03031     IN ULONG Options
03032     );
03033 
03034 <span class="comment">// end_ntddk end_wdm</span>
03035 
03036 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03037 <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a>
03038 <a class="code" href="../../d4/d6/iosubs_8c.html#a48">IoCreateStreamFileObject</a>(
03039     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject OPTIONAL,
03040     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject OPTIONAL
03041     );
03042 
03043 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03044 <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a>
03045 <a class="code" href="../../d4/d6/iosubs_8c.html#a49">IoCreateStreamFileObjectLite</a>(
03046     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject OPTIONAL,
03047     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject OPTIONAL
03048     );
03049 
03050 <span class="comment">// begin_nthal begin_ntddk begin_wdm</span>
03051 
03052 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03053 <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a>
03054 <a class="code" href="../../d4/d6/iosubs_8c.html#a47">IoCreateNotificationEvent</a>(
03055     IN PUNICODE_STRING EventName,
03056     OUT PHANDLE EventHandle
03057     );
03058 
03059 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03060 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03061 <a class="code" href="../../d4/d6/iosubs_8c.html#a50">IoCreateSymbolicLink</a>(
03062     IN PUNICODE_STRING SymbolicLinkName,
03063     IN PUNICODE_STRING DeviceName
03064     );
03065 
03066 <span class="comment">//  end_wdm</span>
03067 
03068 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03069 <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a>
03070 <a class="code" href="../../d4/d6/iosubs_8c.html#a51">IoCreateSynchronizationEvent</a>(
03071     IN PUNICODE_STRING EventName,
03072     OUT PHANDLE EventHandle
03073     );
03074 
03075 <span class="comment">//  begin_wdm</span>
03076 
03077 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03078 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03079 <a class="code" href="../../d4/d6/iosubs_8c.html#a52">IoCreateUnprotectedSymbolicLink</a>(
03080     IN PUNICODE_STRING SymbolicLinkName,
03081     IN PUNICODE_STRING DeviceName
03082     );
03083 
03084 <span class="comment">//  end_wdm</span>
03085 
03086 <span class="comment">//++</span>
03087 <span class="comment">//</span>
03088 <span class="comment">// VOID</span>
03089 <span class="comment">// IoDeassignArcName(</span>
03090 <span class="comment">//     IN PUNICODE_STRING ArcName</span>
03091 <span class="comment">//     )</span>
03092 <span class="comment">//</span>
03093 <span class="comment">// Routine Description:</span>
03094 <span class="comment">//</span>
03095 <span class="comment">//     This routine is invoked by drivers to deassign an ARC name that they</span>
03096 <span class="comment">//     created to a device.  This is generally only called if the driver is</span>
03097 <span class="comment">//     deleting the device object, which means that the driver is probably</span>
03098 <span class="comment">//     unloading.</span>
03099 <span class="comment">//</span>
03100 <span class="comment">// Arguments:</span>
03101 <span class="comment">//</span>
03102 <span class="comment">//     ArcName - Supplies the ARC name to be removed.</span>
03103 <span class="comment">//</span>
03104 <span class="comment">// Return Value:</span>
03105 <span class="comment">//</span>
03106 <span class="comment">//     None.</span>
03107 <span class="comment">//</span>
03108 <span class="comment">//--</span>
03109 
<a name="l03110"></a><a class="code" href="../../d0/d5/io_8h.html#a227">03110</a> <span class="preprocessor">#define IoDeassignArcName( ArcName ) (  \</span>
03111 <span class="preprocessor">    IoDeleteSymbolicLink( (ArcName) ) )</span>
03112 <span class="preprocessor"></span>
03113 <span class="comment">// end_ntifs</span>
03114 
03115 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03116 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03117 <a class="code" href="../../d4/d6/iosubs_8c.html#a53">IoDeleteController</a>(
03118     IN PCONTROLLER_OBJECT ControllerObject
03119     );
03120 
03121 <span class="comment">//  begin_wdm begin_ntifs</span>
03122 
03123 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03124 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03125 <a class="code" href="../../d4/d6/iosubs_8c.html#a55">IoDeleteDevice</a>(
03126     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
03127     );
03128 
03129 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03130 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03131 <a class="code" href="../../d4/d6/iosubs_8c.html#a57">IoDeleteSymbolicLink</a>(
03132     IN PUNICODE_STRING SymbolicLinkName
03133     );
03134 
03135 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03136 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03137 <a class="code" href="../../d4/d6/iosubs_8c.html#a58">IoDetachDevice</a>(
03138     IN OUT <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> TargetDevice
03139     );
03140 
03141 <span class="comment">// end_ntifs</span>
03142 
03143 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03144 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03145 <a class="code" href="../../d4/d6/iosubs_8c.html#a59">IoDisconnectInterrupt</a>(
03146     IN <a class="code" href="../../d0/d7/struct__KINTERRUPT.html">PKINTERRUPT</a> InterruptObject
03147     );
03148 
03149 <span class="comment">// end_ntddk end_wdm end_nthal</span>
03150 
03151 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03152 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03153 <a class="code" href="../../d4/d6/iosubs_8c.html#a60">IoEnqueueIrp</a>(
03154     IN PIRP Irp
03155     );
03156 
03157 
03158 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                             <span class="comment">// ntifs</span>
03159 BOOLEAN                                                 <span class="comment">// ntifs</span>
03160 <a class="code" href="../../d4/d6/iosubs_8c.html#a61">IoFastQueryNetworkAttributes</a>(                           <span class="comment">// ntifs</span>
03161     IN POBJECT_ATTRIBUTES ObjectAttributes,             <span class="comment">// ntifs</span>
03162     IN ACCESS_MASK DesiredAccess,                       <span class="comment">// ntifs</span>
03163     IN ULONG OpenOptions,                               <span class="comment">// ntifs</span>
03164     OUT PIO_STATUS_BLOCK IoStatus,                      <span class="comment">// ntifs</span>
03165     OUT PFILE_NETWORK_OPEN_INFORMATION Buffer           <span class="comment">// ntifs</span>
03166     );                                                  <span class="comment">// ntifs</span>
03167 
03168 <span class="comment">// begin_ntddk begin_nthal</span>
03169 
03170 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03171 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03172 <a class="code" href="../../d4/d6/iosubs_8c.html#a62">IoFreeController</a>(
03173     IN PCONTROLLER_OBJECT ControllerObject
03174     );
03175 
03176 <span class="comment">//  begin_wdm begin_ntifs</span>
03177 
03178 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03179 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03180 <a class="code" href="../../d4/d6/iosubs_8c.html#a63">IoFreeIrp</a>(
03181     IN PIRP Irp
03182     );
03183 
03184 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03185 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03186 <a class="code" href="../../d4/d6/iosubs_8c.html#a65">IoFreeMdl</a>(
03187     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> Mdl
03188     );
03189 
03190 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
03191 
03192 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03193 <a class="code" href="../../d4/d1/pnppower_8c.html#a3">IoFreePoDeviceNotifyList</a> (
03194     IN OUT PVOID Order
03195     );
03196 
03197 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03198 <a class="code" href="../../d8/d0/pnpioapi_8c.html#a120">IoGetLegacyVetoList</a>(
03199     OUT PWSTR *VetoList OPTIONAL,
03200     OUT PPNP_VETO_TYPE VetoType
03201     );
03202 
03203 <span class="comment">// begin_ntifs</span>
03204 
03205 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03206 <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>
03207 <a class="code" href="../../d4/d6/iosubs_8c.html#a66">IoGetAttachedDevice</a>(
03208     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
03209     );
03210 
03211 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                 <span class="comment">// ntddk wdm nthal</span>
03212 <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>                              <span class="comment">// ntddk wdm nthal</span>
03213 <a class="code" href="../../d4/d6/iosubs_8c.html#a67">IoGetAttachedDeviceReference</a>(               <span class="comment">// ntddk wdm nthal</span>
03214     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject          <span class="comment">// ntddk wdm nthal</span>
03215     );                                      <span class="comment">// ntddk wdm nthal</span>
03216                                             <span class="comment">// ntddk wdm nthal</span>
03217 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03218 <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>
03219 <a class="code" href="../../d4/d6/iosubs_8c.html#a68">IoGetBaseFileSystemDeviceObject</a>(
03220     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject
03221     );
03222 
03223 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                 <span class="comment">// ntddk nthal</span>
03224 <a class="code" href="../../d0/d5/io_8h.html#a378">PCONFIGURATION_INFORMATION</a>                  <span class="comment">// ntddk nthal</span>
03225 <a class="code" href="../../d4/d6/iosubs_8c.html#a69">IoGetConfigurationInformation</a>( VOID );      <span class="comment">// ntddk nthal</span>
03226 
03227 <span class="comment">// begin_ntddk begin_wdm begin_nthal</span>
03228 
03229 <span class="comment">//++</span>
03230 <span class="comment">//</span>
03231 <span class="comment">// PIO_STACK_LOCATION</span>
03232 <span class="comment">// IoGetCurrentIrpStackLocation(</span>
03233 <span class="comment">//     IN PIRP Irp</span>
03234 <span class="comment">//     )</span>
03235 <span class="comment">//</span>
03236 <span class="comment">// Routine Description:</span>
03237 <span class="comment">//</span>
03238 <span class="comment">//     This routine is invoked to return a pointer to the current stack location</span>
03239 <span class="comment">//     in an I/O Request Packet (IRP).</span>
03240 <span class="comment">//</span>
03241 <span class="comment">// Arguments:</span>
03242 <span class="comment">//</span>
03243 <span class="comment">//     Irp - Pointer to the I/O Request Packet.</span>
03244 <span class="comment">//</span>
03245 <span class="comment">// Return Value:</span>
03246 <span class="comment">//</span>
03247 <span class="comment">//     The function value is a pointer to the current stack location in the</span>
03248 <span class="comment">//     packet.</span>
03249 <span class="comment">//</span>
03250 <span class="comment">//--</span>
03251 
<a name="l03252"></a><a class="code" href="../../d0/d5/io_8h.html#a228">03252</a> <span class="preprocessor">#define IoGetCurrentIrpStackLocation( Irp ) ( (Irp)-&gt;Tail.Overlay.CurrentStackLocation )</span>
03253 <span class="preprocessor"></span>
03254 <span class="comment">// end_nthal end_wdm</span>
03255 
03256 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03257 <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>
03258 <a class="code" href="../../d4/d6/iosubs_8c.html#a72">IoGetDeviceToVerify</a>(
03259     IN <a class="code" href="../../d5/d6/struct__ETHREAD.html">PETHREAD</a> Thread
03260     );
03261 
03262 <span class="comment">//  begin_wdm</span>
03263 
03264 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03265 PVOID
03266 <a class="code" href="../../d4/d6/iosubs_8c.html#a73">IoGetDriverObjectExtension</a>(
03267     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject,
03268     IN PVOID ClientIdentificationAddress
03269     );
03270 
03271 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03272 <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a>
03273 <a class="code" href="../../d4/d6/iosubs_8c.html#a70">IoGetCurrentProcess</a>(
03274     VOID
03275     );
03276 
03277 <span class="comment">// begin_nthal</span>
03278 
03279 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03280 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03281 <a class="code" href="../../d4/d6/iosubs_8c.html#a71">IoGetDeviceObjectPointer</a>(
03282     IN PUNICODE_STRING ObjectName,
03283     IN ACCESS_MASK DesiredAccess,
03284     OUT <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> *FileObject,
03285     OUT <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> *DeviceObject
03286     );
03287 
03288 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03289 <span class="keyword">struct </span><a class="code" href="../../d7/d6/struct__DMA__ADAPTER.html">_DMA_ADAPTER</a> *
03290 <a class="code" href="../../d8/d0/pnpioapi_8c.html#a111">IoGetDmaAdapter</a>(
03291     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> PhysicalDeviceObject,           OPTIONAL <span class="comment">// required for PnP drivers</span>
03292     IN <span class="keyword">struct</span> <a class="code" href="../../d7/d3/struct__DEVICE__DESCRIPTION.html">_DEVICE_DESCRIPTION</a> *DeviceDescription,
03293     IN OUT PULONG NumberOfMapRegisters
03294     );
03295 
03296 <span class="comment">//  end_wdm</span>
03297 
03298 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03299 PGENERIC_MAPPING
03300 <a class="code" href="../../d4/d6/iosubs_8c.html#a74">IoGetFileObjectGenericMapping</a>(
03301     VOID
03302     );
03303 
03304 <span class="comment">// end_nthal</span>
03305 
03306 
03307 <span class="comment">// begin_wdm</span>
03308 
03309 <span class="comment">//++</span>
03310 <span class="comment">//</span>
03311 <span class="comment">// ULONG</span>
03312 <span class="comment">// IoGetFunctionCodeFromCtlCode(</span>
03313 <span class="comment">//     IN ULONG ControlCode</span>
03314 <span class="comment">//     )</span>
03315 <span class="comment">//</span>
03316 <span class="comment">// Routine Description:</span>
03317 <span class="comment">//</span>
03318 <span class="comment">//     This routine extracts the function code from IOCTL and FSCTL function</span>
03319 <span class="comment">//     control codes.</span>
03320 <span class="comment">//     This routine should only be used by kernel mode code.</span>
03321 <span class="comment">//</span>
03322 <span class="comment">// Arguments:</span>
03323 <span class="comment">//</span>
03324 <span class="comment">//     ControlCode - A function control code (IOCTL or FSCTL) from which the</span>
03325 <span class="comment">//         function code must be extracted.</span>
03326 <span class="comment">//</span>
03327 <span class="comment">// Return Value:</span>
03328 <span class="comment">//</span>
03329 <span class="comment">//     The extracted function code.</span>
03330 <span class="comment">//</span>
03331 <span class="comment">// Note:</span>
03332 <span class="comment">//</span>
03333 <span class="comment">//     The CTL_CODE macro, used to create IOCTL and FSCTL function control</span>
03334 <span class="comment">//     codes, is defined in ntioapi.h</span>
03335 <span class="comment">//</span>
03336 <span class="comment">//--</span>
03337 
<a name="l03338"></a><a class="code" href="../../d0/d5/io_8h.html#a229">03338</a> <span class="preprocessor">#define IoGetFunctionCodeFromCtlCode( ControlCode ) (\</span>
03339 <span class="preprocessor">    ( ControlCode &gt;&gt; 2) &amp; 0x00000FFF )</span>
03340 <span class="preprocessor"></span>
03341 <span class="comment">// begin_nthal end_wdm</span>
03342 
03343 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03344 PVOID
03345 <a class="code" href="../../d4/d6/iosubs_8c.html#a75">IoGetInitialStack</a>(
03346     VOID
03347     );
03348 
03349 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03350 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03351 <a class="code" href="../../d0/d5/io_8h.html#a508">IoGetStackLimits</a> (
03352     OUT PULONG_PTR LowLimit,
03353     OUT PULONG_PTR HighLimit
03354     );
03355 
03356 
03357 <span class="comment">//</span>
03358 <span class="comment">//  The following function is used to tell the caller how much stack is available</span>
03359 <span class="comment">//</span>
03360 
03361 __inline
03362 ULONG_PTR
<a name="l03363"></a><a class="code" href="../../d0/d5/io_8h.html#a509">03363</a> <a class="code" href="../../d0/d5/io_8h.html#a509">IoGetRemainingStackSize</a> (
03364     VOID
03365     )
03366 {
03367     ULONG_PTR Top;
03368     ULONG_PTR Bottom;
03369 
03370     <a class="code" href="../../d0/d5/io_8h.html#a508">IoGetStackLimits</a>( &amp;Bottom, &amp;Top );
03371     <span class="keywordflow">return</span>((ULONG_PTR)(&amp;Top) - Bottom );
03372 }
03373 
03374 <span class="comment">//  begin_wdm</span>
03375 
03376 <span class="comment">//++</span>
03377 <span class="comment">//</span>
03378 <span class="comment">// PIO_STACK_LOCATION</span>
03379 <span class="comment">// IoGetNextIrpStackLocation(</span>
03380 <span class="comment">//     IN PIRP Irp</span>
03381 <span class="comment">//     )</span>
03382 <span class="comment">//</span>
03383 <span class="comment">// Routine Description:</span>
03384 <span class="comment">//</span>
03385 <span class="comment">//     This routine is invoked to return a pointer to the next stack location</span>
03386 <span class="comment">//     in an I/O Request Packet (IRP).</span>
03387 <span class="comment">//</span>
03388 <span class="comment">// Arguments:</span>
03389 <span class="comment">//</span>
03390 <span class="comment">//     Irp - Pointer to the I/O Request Packet.</span>
03391 <span class="comment">//</span>
03392 <span class="comment">// Return Value:</span>
03393 <span class="comment">//</span>
03394 <span class="comment">//     The function value is a pointer to the next stack location in the packet.</span>
03395 <span class="comment">//</span>
03396 <span class="comment">//--</span>
03397 
<a name="l03398"></a><a class="code" href="../../d0/d5/io_8h.html#a230">03398</a> <span class="preprocessor">#define IoGetNextIrpStackLocation( Irp ) (\</span>
03399 <span class="preprocessor">    (Irp)-&gt;Tail.Overlay.CurrentStackLocation - 1 )</span>
03400 <span class="preprocessor"></span>
03401 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03402 <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>
03403 <a class="code" href="../../d4/d6/iosubs_8c.html#a76">IoGetRelatedDeviceObject</a>(
03404     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject
03405     );
03406 
03407 <span class="comment">// end_ntddk end_wdm end_nthal</span>
03408 
03409 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03410 ULONG
03411 <a class="code" href="../../d4/d6/iosubs_8c.html#a77">IoGetRequestorProcessId</a>(
03412     IN PIRP Irp
03413     );
03414 
03415 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03416 <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a>
03417 <a class="code" href="../../d4/d6/iosubs_8c.html#a78">IoGetRequestorProcess</a>(
03418     IN PIRP Irp
03419     );
03420 
03421 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03422 <a class="code" href="../../d0/d5/io_8h.html#a356">PIRP</a>
03423 <a class="code" href="../../d4/d6/iosubs_8c.html#a79">IoGetTopLevelIrp</a>(
03424     VOID
03425     );
03426 
03427 <span class="comment">// begin_ntddk begin_wdm begin_nthal</span>
03428 
03429 <span class="comment">//++</span>
03430 <span class="comment">//</span>
03431 <span class="comment">// VOID</span>
03432 <span class="comment">// IoInitializeDpcRequest(</span>
03433 <span class="comment">//     IN PDEVICE_OBJECT DeviceObject,</span>
03434 <span class="comment">//     IN PIO_DPC_ROUTINE DpcRoutine</span>
03435 <span class="comment">//     )</span>
03436 <span class="comment">//</span>
03437 <span class="comment">// Routine Description:</span>
03438 <span class="comment">//</span>
03439 <span class="comment">//     This routine is invoked to initialize the DPC in a device object for a</span>
03440 <span class="comment">//     device driver during its initialization routine.  The DPC is used later</span>
03441 <span class="comment">//     when the driver interrupt service routine requests that a DPC routine</span>
03442 <span class="comment">//     be queued for later execution.</span>
03443 <span class="comment">//</span>
03444 <span class="comment">// Arguments:</span>
03445 <span class="comment">//</span>
03446 <span class="comment">//     DeviceObject - Pointer to the device object that the request is for.</span>
03447 <span class="comment">//</span>
03448 <span class="comment">//     DpcRoutine - Address of the driver's DPC routine to be executed when</span>
03449 <span class="comment">//         the DPC is dequeued for processing.</span>
03450 <span class="comment">//</span>
03451 <span class="comment">// Return Value:</span>
03452 <span class="comment">//</span>
03453 <span class="comment">//     None.</span>
03454 <span class="comment">//</span>
03455 <span class="comment">//--</span>
03456 
<a name="l03457"></a><a class="code" href="../../d0/d5/io_8h.html#a231">03457</a> <span class="preprocessor">#define IoInitializeDpcRequest( DeviceObject, DpcRoutine ) (\</span>
03458 <span class="preprocessor">    KeInitializeDpc( &amp;(DeviceObject)-&gt;Dpc,                  \</span>
03459 <span class="preprocessor">                     (PKDEFERRED_ROUTINE) (DpcRoutine),     \</span>
03460 <span class="preprocessor">                     (DeviceObject) ) )</span>
03461 <span class="preprocessor"></span>
03462 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03463 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03464 <a class="code" href="../../d4/d6/iosubs_8c.html#a80">IoInitializeIrp</a>(
03465     IN OUT PIRP Irp,
03466     IN USHORT PacketSize,
03467     IN CCHAR StackSize
03468     );
03469 
03470 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03471 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03472 <a class="code" href="../../d4/d6/iosubs_8c.html#a82">IoInitializeTimer</a>(
03473     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
03474     IN PIO_TIMER_ROUTINE TimerRoutine,
03475     IN PVOID Context
03476     );
03477 
03478 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
03479 
03480 <span class="comment">// begin_ntddk begin_ntifs</span>
03481 
03482 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03483 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03484 <a class="code" href="../../d4/d6/iosubs_8c.html#a81">IoReuseIrp</a>(
03485     IN OUT PIRP Irp,
03486     IN NTSTATUS Iostatus
03487     );
03488 
03489 
03490 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03491 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03492 <a class="code" href="../../d4/d6/iosubs_8c.html#a135">IoCancelFileOpen</a>(
03493     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>  DeviceObject,
03494     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a>    FileObject
03495     );
03496 <span class="comment">// end_ntddk end_ntifs</span>
03497 
03498 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03499 BOOLEAN
03500 <a class="code" href="../../d9/d5/ioinit_8c.html#a36">IoInitSystem</a>(
03501     <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock
03502     );
03503 
03504 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
03505 
03506 <span class="comment">//++</span>
03507 <span class="comment">//</span>
03508 <span class="comment">// BOOLEAN</span>
03509 <span class="comment">// IoIsErrorUserInduced(</span>
03510 <span class="comment">//     IN NTSTATUS Status</span>
03511 <span class="comment">//     )</span>
03512 <span class="comment">//</span>
03513 <span class="comment">// Routine Description:</span>
03514 <span class="comment">//</span>
03515 <span class="comment">//     This routine is invoked to determine if an error was as a</span>
03516 <span class="comment">//     result of user actions.  Typically these error are related</span>
03517 <span class="comment">//     to removable media and will result in a pop-up.</span>
03518 <span class="comment">//</span>
03519 <span class="comment">// Arguments:</span>
03520 <span class="comment">//</span>
03521 <span class="comment">//     Status - The status value to check.</span>
03522 <span class="comment">//</span>
03523 <span class="comment">// Return Value:</span>
03524 <span class="comment">//     The function value is TRUE if the user induced the error,</span>
03525 <span class="comment">//     otherwise FALSE is returned.</span>
03526 <span class="comment">//</span>
03527 <span class="comment">//--</span>
<a name="l03528"></a><a class="code" href="../../d0/d5/io_8h.html#a232">03528</a> <span class="preprocessor">#define IoIsErrorUserInduced( Status ) ((BOOLEAN)  \</span>
03529 <span class="preprocessor">    (((Status) == STATUS_DEVICE_NOT_READY) ||      \</span>
03530 <span class="preprocessor">     ((Status) == STATUS_IO_TIMEOUT) ||            \</span>
03531 <span class="preprocessor">     ((Status) == STATUS_MEDIA_WRITE_PROTECTED) || \</span>
03532 <span class="preprocessor">     ((Status) == STATUS_NO_MEDIA_IN_DEVICE) ||    \</span>
03533 <span class="preprocessor">     ((Status) == STATUS_VERIFY_REQUIRED) ||       \</span>
03534 <span class="preprocessor">     ((Status) == STATUS_UNRECOGNIZED_MEDIA) ||    \</span>
03535 <span class="preprocessor">     ((Status) == STATUS_WRONG_VOLUME)))</span>
03536 <span class="preprocessor"></span>
03537 <span class="comment">// end_ntddk end_wdm end_nthal</span>
03538 
03539 <span class="comment">//++</span>
03540 <span class="comment">//</span>
03541 <span class="comment">// BOOLEAN</span>
03542 <span class="comment">// IoIsFileOpenedExclusively(</span>
03543 <span class="comment">//     IN PFILE_OBJECT FileObject</span>
03544 <span class="comment">//     )</span>
03545 <span class="comment">//</span>
03546 <span class="comment">// Routine Description:</span>
03547 <span class="comment">//</span>
03548 <span class="comment">//     This routine is invoked to determine whether the file open represented</span>
03549 <span class="comment">//     by the specified file object is opened exclusively.</span>
03550 <span class="comment">//</span>
03551 <span class="comment">// Arguments:</span>
03552 <span class="comment">//</span>
03553 <span class="comment">//     FileObject - Pointer to the file object that represents the open instance</span>
03554 <span class="comment">//         of the target file to be tested for exclusive access.</span>
03555 <span class="comment">//</span>
03556 <span class="comment">// Return Value:</span>
03557 <span class="comment">//</span>
03558 <span class="comment">//     The function value is TRUE if the open instance of the file is exclusive;</span>
03559 <span class="comment">//     otherwise FALSE is returned.</span>
03560 <span class="comment">//</span>
03561 <span class="comment">//--</span>
03562 
<a name="l03563"></a><a class="code" href="../../d0/d5/io_8h.html#a233">03563</a> <span class="preprocessor">#define IoIsFileOpenedExclusively( FileObject ) (\</span>
03564 <span class="preprocessor">    (BOOLEAN) !((FileObject)-&gt;SharedRead || (FileObject)-&gt;SharedWrite || (FileObject)-&gt;SharedDelete))</span>
03565 <span class="preprocessor"></span>
03566 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03567 BOOLEAN
03568 <a class="code" href="../../d4/d6/iosubs_8c.html#a83">IoIsOperationSynchronous</a>(
03569     IN PIRP Irp
03570     );
03571 
03572 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03573 BOOLEAN
03574 <a class="code" href="../../d4/d6/iosubs_8c.html#a84">IoIsSystemThread</a>(
03575     IN <a class="code" href="../../d5/d6/struct__ETHREAD.html">PETHREAD</a> Thread
03576     );
03577 
03578 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03579 BOOLEAN
03580 <a class="code" href="../../d4/d6/iosubs_8c.html#a85">IoIsValidNameGraftingBuffer</a>(
03581     IN PIRP Irp,
03582     IN PREPARSE_DATA_BUFFER ReparseBuffer
03583     );
03584 
03585 <span class="comment">// begin_ntddk begin_nthal</span>
03586 
03587 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03588 <a class="code" href="../../d0/d5/io_8h.html#a356">PIRP</a>
03589 <a class="code" href="../../d4/d6/iosubs_8c.html#a87">IoMakeAssociatedIrp</a>(
03590     IN PIRP Irp,
03591     IN CCHAR StackSize
03592     );
03593 
03594 <span class="comment">//  begin_wdm</span>
03595 
03596 <span class="comment">//++</span>
03597 <span class="comment">//</span>
03598 <span class="comment">// VOID</span>
03599 <span class="comment">// IoMarkIrpPending(</span>
03600 <span class="comment">//     IN OUT PIRP Irp</span>
03601 <span class="comment">//     )</span>
03602 <span class="comment">//</span>
03603 <span class="comment">// Routine Description:</span>
03604 <span class="comment">//</span>
03605 <span class="comment">//     This routine marks the specified I/O Request Packet (IRP) to indicate</span>
03606 <span class="comment">//     that an initial status of STATUS_PENDING was returned to the caller.</span>
03607 <span class="comment">//     This is used so that I/O completion can determine whether or not to</span>
03608 <span class="comment">//     fully complete the I/O operation requested by the packet.</span>
03609 <span class="comment">//</span>
03610 <span class="comment">// Arguments:</span>
03611 <span class="comment">//</span>
03612 <span class="comment">//     Irp - Pointer to the I/O Request Packet to be marked pending.</span>
03613 <span class="comment">//</span>
03614 <span class="comment">// Return Value:</span>
03615 <span class="comment">//</span>
03616 <span class="comment">//     None.</span>
03617 <span class="comment">//</span>
03618 <span class="comment">//--</span>
03619 
<a name="l03620"></a><a class="code" href="../../d0/d5/io_8h.html#a234">03620</a> <span class="preprocessor">#define IoMarkIrpPending( Irp ) ( \</span>
03621 <span class="preprocessor">    IoGetCurrentIrpStackLocation( (Irp) )-&gt;Control |= SL_PENDING_RETURNED )</span>
03622 <span class="preprocessor"></span>
03623 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
03624 
03625 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03626 BOOLEAN
03627 <a class="code" href="../../d4/d6/iosubs_8c.html#a88">IoPageFileCreated</a>(
03628     IN HANDLE FileHandle
03629     );
03630 
03631 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                             <span class="comment">// ntifs</span>
03632 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>                                                <span class="comment">// ntifs</span>
03633 <a class="code" href="../../d4/d6/iosubs_8c.html#a89">IoPageRead</a>(                                             <span class="comment">// ntifs</span>
03634     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,                         <span class="comment">// ntifs</span>
03635     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MemoryDescriptorList,                       <span class="comment">// ntifs</span>
03636     IN PLARGE_INTEGER StartingOffset,                   <span class="comment">// ntifs</span>
03637     IN <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> Event,                                   <span class="comment">// ntifs</span>
03638     OUT PIO_STATUS_BLOCK IoStatusBlock                  <span class="comment">// ntifs</span>
03639     );                                                  <span class="comment">// ntifs</span>
03640 
03641 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                             <span class="comment">// ntddk</span>
03642 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>                                                <span class="comment">// ntddk</span>
03643 <a class="code" href="../../d2/d3/io_2query_8c.html#a6">IoQueryDeviceDescription</a>(                               <span class="comment">// ntddk</span>
03644     IN PINTERFACE_TYPE BusType OPTIONAL,                <span class="comment">// ntddk</span>
03645     IN PULONG BusNumber OPTIONAL,                       <span class="comment">// ntddk</span>
03646     IN PCONFIGURATION_TYPE ControllerType OPTIONAL,     <span class="comment">// ntddk</span>
03647     IN PULONG ControllerNumber OPTIONAL,                <span class="comment">// ntddk</span>
03648     IN PCONFIGURATION_TYPE PeripheralType OPTIONAL,     <span class="comment">// ntddk</span>
03649     IN PULONG PeripheralNumber OPTIONAL,                <span class="comment">// ntddk</span>
03650     IN PIO_QUERY_DEVICE_ROUTINE CalloutRoutine,         <span class="comment">// ntddk</span>
03651     IN PVOID Context                                    <span class="comment">// ntddk</span>
03652     );                                                  <span class="comment">// ntddk</span>
03653 
03654 <span class="comment">// begin_ntifs</span>
03655 
03656 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03657 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03658 <a class="code" href="../../d4/d6/iosubs_8c.html#a90">IoQueryFileInformation</a>(
03659     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
03660     IN FILE_INFORMATION_CLASS FileInformationClass,
03661     IN ULONG Length,
03662     OUT PVOID FileInformation,
03663     OUT PULONG ReturnedLength
03664     );
03665 
03666 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03667 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03668 <a class="code" href="../../d4/d6/iosubs_8c.html#a91">IoQueryVolumeInformation</a>(
03669     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
03670     IN FS_INFORMATION_CLASS FsInformationClass,
03671     IN ULONG Length,
03672     OUT PVOID FsInformation,
03673     OUT PULONG ReturnedLength
03674     );
03675 
03676 <span class="comment">// end_ntifs</span>
03677 
03678 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                             <span class="comment">// ntsrv</span>
03679 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>                                                    <span class="comment">// ntsrv</span>
03680 <a class="code" href="../../d4/d6/iosubs_8c.html#a92">IoQueueThreadIrp</a>(                                       <span class="comment">// ntsrv</span>
03681     IN PIRP Irp                                         <span class="comment">// ntsrv</span>
03682     );                                                  <span class="comment">// ntsrv</span>
03683 
03684 <span class="comment">// begin_ntddk begin_nthal begin_ntifs</span>
03685 
03686 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03687 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03688 <a class="code" href="../../d4/d6/iosubs_8c.html#a93">IoRaiseHardError</a>(
03689     IN PIRP Irp,
03690     IN PVPB Vpb OPTIONAL,
03691     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> RealDeviceObject
03692     );
03693 
03694 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03695 BOOLEAN
03696 <a class="code" href="../../d4/d6/iosubs_8c.html#a94">IoRaiseInformationalHardError</a>(
03697     IN NTSTATUS ErrorStatus,
03698     IN PUNICODE_STRING String OPTIONAL,
03699     IN <a class="code" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a> Thread OPTIONAL
03700     );
03701 
03702 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03703 BOOLEAN
03704 <a class="code" href="../../d4/d6/iosubs_8c.html#a108">IoSetThreadHardErrorMode</a>(
03705     IN BOOLEAN EnableHardErrors
03706     );
03707 
03708 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03709 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03710 <a class="code" href="../../d4/d6/iosubs_8c.html#a95">IoRegisterBootDriverReinitialization</a>(
03711     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject,
03712     IN PDRIVER_REINITIALIZE DriverReinitializationRoutine,
03713     IN PVOID Context
03714     );
03715 
03716 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03717 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03718 <a class="code" href="../../d4/d6/iosubs_8c.html#a96">IoRegisterDriverReinitialization</a>(
03719     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject,
03720     IN PDRIVER_REINITIALIZE DriverReinitializationRoutine,
03721     IN PVOID Context
03722     );
03723 
03724 <span class="comment">// end_ntddk end_nthal</span>
03725 
03726 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03727 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03728 <a class="code" href="../../d4/d6/iosubs_8c.html#a97">IoRegisterFileSystem</a>(
03729     IN OUT <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
03730     );
03731 
03732 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03733 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03734 <a class="code" href="../../d4/d6/iosubs_8c.html#a98">IoRegisterFsRegistrationChange</a>(
03735     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject,
03736     IN <a class="code" href="../../d0/d5/io_8h.html#a291">PDRIVER_FS_NOTIFICATION</a> DriverNotificationRoutine
03737     );
03738 
03739 <span class="comment">// begin_ntddk begin_nthal</span>
03740 
03741 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03742 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03743 <a class="code" href="../../d4/d6/iosubs_8c.html#a100">IoRegisterShutdownNotification</a>(
03744     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
03745     );
03746 
03747 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03748 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03749 <a class="code" href="../../d4/d6/iosubs_8c.html#a99">IoRegisterLastChanceShutdownNotification</a>(
03750     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
03751     );
03752 
03753 <span class="comment">// begin_wdm</span>
03754 
03755 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03756 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03757 <a class="code" href="../../d4/d6/iosubs_8c.html#a101">IoReleaseCancelSpinLock</a>(
03758     IN KIRQL Irql
03759     );
03760 
03761 <span class="comment">// end_ntddk end_nthal end_wdm</span>
03762 
03763 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03764 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03765 <a class="code" href="../../d4/d6/iosubs_8c.html#a102">IoReleaseVpbSpinLock</a>(
03766     IN KIRQL Irql
03767     );
03768 
03769 <span class="comment">// begin_ntddk begin_nthal</span>
03770 
03771 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03772 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03773 <a class="code" href="../../d4/d6/iosubs_8c.html#a103">IoRemoveShareAccess</a>(
03774     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
03775     IN OUT PSHARE_ACCESS ShareAccess
03776     );
03777 
03778 <span class="comment">// end_ntddk end_ntifs</span>
03779 
03780 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03781 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03782 <a class="code" href="../../d1/d8/report_8c.html#a11">IoReportHalResourceUsage</a>(
03783     IN PUNICODE_STRING HalName,
03784     IN PCM_RESOURCE_LIST RawResourceList,
03785     IN PCM_RESOURCE_LIST TranslatedResourceList,
03786     IN ULONG ResourceListSize
03787     );
03788 
03789 <span class="comment">// begin_ntddk begin_ntifs</span>
03790 
03791 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03792 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03793 <a class="code" href="../../d1/d8/report_8c.html#a13">IoReportResourceUsage</a>(
03794     IN PUNICODE_STRING DriverClassName OPTIONAL,
03795     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject,
03796     IN PCM_RESOURCE_LIST DriverList OPTIONAL,
03797     IN ULONG DriverListSize OPTIONAL,
03798     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
03799     IN PCM_RESOURCE_LIST DeviceList OPTIONAL,
03800     IN ULONG DeviceListSize OPTIONAL,
03801     IN BOOLEAN OverrideConflict,
03802     OUT PBOOLEAN ConflictDetected
03803     );
03804 
03805 <span class="comment">//  begin_wdm</span>
03806 
03807 <span class="comment">//++</span>
03808 <span class="comment">//</span>
03809 <span class="comment">// VOID</span>
03810 <span class="comment">// IoRequestDpc(</span>
03811 <span class="comment">//     IN PDEVICE_OBJECT DeviceObject,</span>
03812 <span class="comment">//     IN PIRP Irp,</span>
03813 <span class="comment">//     IN PVOID Context</span>
03814 <span class="comment">//     )</span>
03815 <span class="comment">//</span>
03816 <span class="comment">// Routine Description:</span>
03817 <span class="comment">//</span>
03818 <span class="comment">//     This routine is invoked by the device driver's interrupt service routine</span>
03819 <span class="comment">//     to request that a DPC routine be queued for later execution at a lower</span>
03820 <span class="comment">//     IRQL.</span>
03821 <span class="comment">//</span>
03822 <span class="comment">// Arguments:</span>
03823 <span class="comment">//</span>
03824 <span class="comment">//     DeviceObject - Device object for which the request is being processed.</span>
03825 <span class="comment">//</span>
03826 <span class="comment">//     Irp - Pointer to the current I/O Request Packet (IRP) for the specified</span>
03827 <span class="comment">//         device.</span>
03828 <span class="comment">//</span>
03829 <span class="comment">//     Context - Provides a general context parameter to be passed to the</span>
03830 <span class="comment">//         DPC routine.</span>
03831 <span class="comment">//</span>
03832 <span class="comment">// Return Value:</span>
03833 <span class="comment">//</span>
03834 <span class="comment">//     None.</span>
03835 <span class="comment">//</span>
03836 <span class="comment">//--</span>
03837 
<a name="l03838"></a><a class="code" href="../../d0/d5/io_8h.html#a235">03838</a> <span class="preprocessor">#define IoRequestDpc( DeviceObject, Irp, Context ) ( \</span>
03839 <span class="preprocessor">    KeInsertQueueDpc( &amp;(DeviceObject)-&gt;Dpc, (Irp), (Context) ) )</span>
03840 <span class="preprocessor"></span>
03841 <span class="comment">//++</span>
03842 <span class="comment">//</span>
03843 <span class="comment">// PDRIVER_CANCEL</span>
03844 <span class="comment">// IoSetCancelRoutine(</span>
03845 <span class="comment">//     IN PIRP Irp,</span>
03846 <span class="comment">//     IN PDRIVER_CANCEL CancelRoutine</span>
03847 <span class="comment">//     )</span>
03848 <span class="comment">//</span>
03849 <span class="comment">// Routine Description:</span>
03850 <span class="comment">//</span>
03851 <span class="comment">//     This routine is invoked to set the address of a cancel routine which</span>
03852 <span class="comment">//     is to be invoked when an I/O packet has been canceled.</span>
03853 <span class="comment">//</span>
03854 <span class="comment">// Arguments:</span>
03855 <span class="comment">//</span>
03856 <span class="comment">//     Irp - Pointer to the I/O Request Packet itself.</span>
03857 <span class="comment">//</span>
03858 <span class="comment">//     CancelRoutine - Address of the cancel routine that is to be invoked</span>
03859 <span class="comment">//         if the IRP is cancelled.</span>
03860 <span class="comment">//</span>
03861 <span class="comment">// Return Value:</span>
03862 <span class="comment">//</span>
03863 <span class="comment">//     Previous value of CancelRoutine field in the IRP.</span>
03864 <span class="comment">//</span>
03865 <span class="comment">//--</span>
03866 
<a name="l03867"></a><a class="code" href="../../d0/d5/io_8h.html#a236">03867</a> <span class="preprocessor">#define IoSetCancelRoutine( Irp, NewCancelRoutine ) (  \</span>
03868 <span class="preprocessor">    (PDRIVER_CANCEL) InterlockedExchangePointer( (PVOID *) &amp;(Irp)-&gt;CancelRoutine, (PVOID) (NewCancelRoutine) ) )</span>
03869 <span class="preprocessor"></span>
03870 <span class="comment">//++</span>
03871 <span class="comment">//</span>
03872 <span class="comment">// VOID</span>
03873 <span class="comment">// IoSetCompletionRoutine(</span>
03874 <span class="comment">//     IN PIRP Irp,</span>
03875 <span class="comment">//     IN PIO_COMPLETION_ROUTINE CompletionRoutine,</span>
03876 <span class="comment">//     IN PVOID Context,</span>
03877 <span class="comment">//     IN BOOLEAN InvokeOnSuccess,</span>
03878 <span class="comment">//     IN BOOLEAN InvokeOnError,</span>
03879 <span class="comment">//     IN BOOLEAN InvokeOnCancel</span>
03880 <span class="comment">//     )</span>
03881 <span class="comment">//</span>
03882 <span class="comment">// Routine Description:</span>
03883 <span class="comment">//</span>
03884 <span class="comment">//     This routine is invoked to set the address of a completion routine which</span>
03885 <span class="comment">//     is to be invoked when an I/O packet has been completed by a lower-level</span>
03886 <span class="comment">//     driver.</span>
03887 <span class="comment">//</span>
03888 <span class="comment">// Arguments:</span>
03889 <span class="comment">//</span>
03890 <span class="comment">//     Irp - Pointer to the I/O Request Packet itself.</span>
03891 <span class="comment">//</span>
03892 <span class="comment">//     CompletionRoutine - Address of the completion routine that is to be</span>
03893 <span class="comment">//         invoked once the next level driver completes the packet.</span>
03894 <span class="comment">//</span>
03895 <span class="comment">//     Context - Specifies a context parameter to be passed to the completion</span>
03896 <span class="comment">//         routine.</span>
03897 <span class="comment">//</span>
03898 <span class="comment">//     InvokeOnSuccess - Specifies that the completion routine is invoked when the</span>
03899 <span class="comment">//         operation is successfully completed.</span>
03900 <span class="comment">//</span>
03901 <span class="comment">//     InvokeOnError - Specifies that the completion routine is invoked when the</span>
03902 <span class="comment">//         operation completes with an error status.</span>
03903 <span class="comment">//</span>
03904 <span class="comment">//     InvokeOnCancel - Specifies that the completion routine is invoked when the</span>
03905 <span class="comment">//         operation is being canceled.</span>
03906 <span class="comment">//</span>
03907 <span class="comment">// Return Value:</span>
03908 <span class="comment">//</span>
03909 <span class="comment">//     None.</span>
03910 <span class="comment">//</span>
03911 <span class="comment">//--</span>
03912 
<a name="l03913"></a><a class="code" href="../../d0/d5/io_8h.html#a237">03913</a> <span class="preprocessor">#define IoSetCompletionRoutine( Irp, Routine, CompletionContext, Success, Error, Cancel ) { \</span>
03914 <span class="preprocessor">    PIO_STACK_LOCATION irpSp;                                               \</span>
03915 <span class="preprocessor">    ASSERT( (Success) | (Error) | (Cancel) ? (Routine) != NULL : TRUE );    \</span>
03916 <span class="preprocessor">    irpSp = IoGetNextIrpStackLocation( (Irp) );                             \</span>
03917 <span class="preprocessor">    irpSp-&gt;CompletionRoutine = (Routine);                                   \</span>
03918 <span class="preprocessor">    irpSp-&gt;Context = (CompletionContext);                                   \</span>
03919 <span class="preprocessor">    irpSp-&gt;Control = 0;                                                     \</span>
03920 <span class="preprocessor">    if ((Success)) { irpSp-&gt;Control = SL_INVOKE_ON_SUCCESS; }               \</span>
03921 <span class="preprocessor">    if ((Error)) { irpSp-&gt;Control |= SL_INVOKE_ON_ERROR; }                  \</span>
03922 <span class="preprocessor">    if ((Cancel)) { irpSp-&gt;Control |= SL_INVOKE_ON_CANCEL; } }</span>
03923 <span class="preprocessor"></span>
03924 <span class="comment">// end_ntddk end_wdm end_nthal</span>
03925 
03926 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03927 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03928 <a class="code" href="../../d4/d6/iosubs_8c.html#a104">IoSetDeviceToVerify</a>(
03929     IN <a class="code" href="../../d5/d6/struct__ETHREAD.html">PETHREAD</a> Thread,
03930     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
03931     );
03932 
03933 <span class="comment">// begin_ntddk begin_nthal</span>
03934 
03935 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03936 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
03937 <a class="code" href="../../d4/d6/iosubs_8c.html#a105">IoSetHardErrorOrVerifyDevice</a>(
03938     IN PIRP Irp,
03939     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
03940     );
03941 
03942 <span class="comment">// end_ntddk end_nthal</span>
03943 
03944 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
03945 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
03946 <a class="code" href="../../d4/d6/iosubs_8c.html#a106">IoSetInformation</a>(
03947     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
03948     IN FILE_INFORMATION_CLASS FileInformationClass,
03949     IN ULONG Length,
03950     IN PVOID FileInformation
03951     );
03952 
03953 <span class="comment">// begin_ntddk begin_wdm begin_nthal</span>
03954 
03955 <span class="comment">//++</span>
03956 <span class="comment">//</span>
03957 <span class="comment">// VOID</span>
03958 <span class="comment">// IoSetNextIrpStackLocation (</span>
03959 <span class="comment">//     IN OUT PIRP Irp</span>
03960 <span class="comment">//     )</span>
03961 <span class="comment">//</span>
03962 <span class="comment">// Routine Description:</span>
03963 <span class="comment">//</span>
03964 <span class="comment">//     This routine is invoked to set the current IRP stack location to</span>
03965 <span class="comment">//     the next stack location, i.e. it "pushes" the stack.</span>
03966 <span class="comment">//</span>
03967 <span class="comment">// Arguments:</span>
03968 <span class="comment">//</span>
03969 <span class="comment">//     Irp - Pointer to the I/O Request Packet (IRP).</span>
03970 <span class="comment">//</span>
03971 <span class="comment">// Return Value:</span>
03972 <span class="comment">//</span>
03973 <span class="comment">//     None.</span>
03974 <span class="comment">//</span>
03975 <span class="comment">//--</span>
03976 
<a name="l03977"></a><a class="code" href="../../d0/d5/io_8h.html#a238">03977</a> <span class="preprocessor">#define IoSetNextIrpStackLocation( Irp ) {      \</span>
03978 <span class="preprocessor">    (Irp)-&gt;CurrentLocation--;                   \</span>
03979 <span class="preprocessor">    (Irp)-&gt;Tail.Overlay.CurrentStackLocation--; }</span>
03980 <span class="preprocessor"></span>
03981 <span class="comment">//++</span>
03982 <span class="comment">//</span>
03983 <span class="comment">// VOID</span>
03984 <span class="comment">// IoCopyCurrentIrpStackLocationToNext(</span>
03985 <span class="comment">//     IN PIRP Irp</span>
03986 <span class="comment">//     )</span>
03987 <span class="comment">//</span>
03988 <span class="comment">// Routine Description:</span>
03989 <span class="comment">//</span>
03990 <span class="comment">//     This routine is invoked to copy the IRP stack arguments and file</span>
03991 <span class="comment">//     pointer from the current IrpStackLocation to the next</span>
03992 <span class="comment">//     in an I/O Request Packet (IRP).</span>
03993 <span class="comment">//</span>
03994 <span class="comment">//     If the caller wants to call IoCallDriver with a completion routine</span>
03995 <span class="comment">//     but does not wish to change the arguments otherwise,</span>
03996 <span class="comment">//     the caller first calls IoCopyCurrentIrpStackLocationToNext,</span>
03997 <span class="comment">//     then IoSetCompletionRoutine, then IoCallDriver.</span>
03998 <span class="comment">//</span>
03999 <span class="comment">// Arguments:</span>
04000 <span class="comment">//</span>
04001 <span class="comment">//     Irp - Pointer to the I/O Request Packet.</span>
04002 <span class="comment">//</span>
04003 <span class="comment">// Return Value:</span>
04004 <span class="comment">//</span>
04005 <span class="comment">//     None.</span>
04006 <span class="comment">//</span>
04007 <span class="comment">//--</span>
04008 
<a name="l04009"></a><a class="code" href="../../d0/d5/io_8h.html#a239">04009</a> <span class="preprocessor">#define IoCopyCurrentIrpStackLocationToNext( Irp ) { \</span>
04010 <span class="preprocessor">    PIO_STACK_LOCATION irpSp; \</span>
04011 <span class="preprocessor">    PIO_STACK_LOCATION nextIrpSp; \</span>
04012 <span class="preprocessor">    irpSp = IoGetCurrentIrpStackLocation( (Irp) ); \</span>
04013 <span class="preprocessor">    nextIrpSp = IoGetNextIrpStackLocation( (Irp) ); \</span>
04014 <span class="preprocessor">    RtlCopyMemory( nextIrpSp, irpSp, FIELD_OFFSET(IO_STACK_LOCATION, CompletionRoutine)); \</span>
04015 <span class="preprocessor">    nextIrpSp-&gt;Control = 0; }</span>
04016 <span class="preprocessor"></span>
04017 <span class="comment">//++</span>
04018 <span class="comment">//</span>
04019 <span class="comment">// VOID</span>
04020 <span class="comment">// IoSkipCurrentIrpStackLocation (</span>
04021 <span class="comment">//     IN PIRP Irp</span>
04022 <span class="comment">//     )</span>
04023 <span class="comment">//</span>
04024 <span class="comment">// Routine Description:</span>
04025 <span class="comment">//</span>
04026 <span class="comment">//     This routine is invoked to increment the current stack location of</span>
04027 <span class="comment">//     a given IRP.</span>
04028 <span class="comment">//</span>
04029 <span class="comment">//     If the caller wishes to call the next driver in a stack, and does not</span>
04030 <span class="comment">//     wish to change the arguments, nor does he wish to set a completion</span>
04031 <span class="comment">//     routine, then the caller first calls IoSkipCurrentIrpStackLocation</span>
04032 <span class="comment">//     and the calls IoCallDriver.</span>
04033 <span class="comment">//</span>
04034 <span class="comment">// Arguments:</span>
04035 <span class="comment">//</span>
04036 <span class="comment">//     Irp - Pointer to the I/O Request Packet.</span>
04037 <span class="comment">//</span>
04038 <span class="comment">// Return Value:</span>
04039 <span class="comment">//</span>
04040 <span class="comment">//     None</span>
04041 <span class="comment">//</span>
04042 <span class="comment">//--</span>
04043 
<a name="l04044"></a><a class="code" href="../../d0/d5/io_8h.html#a240">04044</a> <span class="preprocessor">#define IoSkipCurrentIrpStackLocation( Irp ) \</span>
04045 <span class="preprocessor">    (Irp)-&gt;CurrentLocation++; \</span>
04046 <span class="preprocessor">    (Irp)-&gt;Tail.Overlay.CurrentStackLocation++;</span>
04047 <span class="preprocessor"></span>
04048 
04049 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04050 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04051 <a class="code" href="../../d4/d6/iosubs_8c.html#a107">IoSetShareAccess</a>(
04052     IN ACCESS_MASK DesiredAccess,
04053     IN ULONG DesiredShareAccess,
04054     IN OUT <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
04055     OUT PSHARE_ACCESS ShareAccess
04056     );
04057 
04058 <span class="comment">// end_ntddk end_wdm end_nthal</span>
04059 
04060 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04061 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04062 <a class="code" href="../../d4/d6/iosubs_8c.html#a109">IoSetTopLevelIrp</a>(
04063     IN PIRP Irp
04064     );
04065 
04066 <span class="comment">// end_ntifs</span>
04067 
04068 <span class="comment">// begin_ntddk begin_wdm</span>
04069 
04070 
<a name="l04071"></a><a class="code" href="../../d0/d5/io_8h.html#a388">04071</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d4/struct__IO__REMOVE__LOCK__TRACKING__BLOCK.html">_IO_REMOVE_LOCK_TRACKING_BLOCK</a> * <a class="code" href="../../d9/d4/struct__IO__REMOVE__LOCK__TRACKING__BLOCK.html">PIO_REMOVE_LOCK_TRACKING_BLOCK</a>;
04072 
<a name="l04073"></a><a class="code" href="../../d7/d4/struct__IO__REMOVE__LOCK__COMMON__BLOCK.html">04073</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d7/d4/struct__IO__REMOVE__LOCK__COMMON__BLOCK.html">_IO_REMOVE_LOCK_COMMON_BLOCK</a> {
<a name="l04074"></a><a class="code" href="../../d7/d4/struct__IO__REMOVE__LOCK__COMMON__BLOCK.html#o0">04074</a>     BOOLEAN     <a class="code" href="../../d7/d4/struct__IO__REMOVE__LOCK__COMMON__BLOCK.html#o0">Removed</a>;
<a name="l04075"></a><a class="code" href="../../d7/d4/struct__IO__REMOVE__LOCK__COMMON__BLOCK.html#o1">04075</a>     BOOLEAN     <a class="code" href="../../d7/d4/struct__IO__REMOVE__LOCK__COMMON__BLOCK.html#o1">Reserved</a> [3];
<a name="l04076"></a><a class="code" href="../../d7/d4/struct__IO__REMOVE__LOCK__COMMON__BLOCK.html#o2">04076</a>     LONG        <a class="code" href="../../d7/d4/struct__IO__REMOVE__LOCK__COMMON__BLOCK.html#o2">IoCount</a>;
<a name="l04077"></a><a class="code" href="../../d7/d4/struct__IO__REMOVE__LOCK__COMMON__BLOCK.html#o3">04077</a>     <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a>      <a class="code" href="../../d7/d4/struct__IO__REMOVE__LOCK__COMMON__BLOCK.html#o3">RemoveEvent</a>;
04078 
04079 } <a class="code" href="../../d7/d4/struct__IO__REMOVE__LOCK__COMMON__BLOCK.html">IO_REMOVE_LOCK_COMMON_BLOCK</a>;
04080 
<a name="l04081"></a><a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html">04081</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html">_IO_REMOVE_LOCK_DBG_BLOCK</a> {
<a name="l04082"></a><a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o0">04082</a>     LONG        <a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o0">Signature</a>;
<a name="l04083"></a><a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o1">04083</a>     LONG        <a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o1">HighWatermark</a>;
<a name="l04084"></a><a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o2">04084</a>     LONGLONG    <a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o2">MaxLockedTicks</a>;
<a name="l04085"></a><a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o3">04085</a>     LONG        <a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o3">AllocateTag</a>;
<a name="l04086"></a><a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o4">04086</a>     LIST_ENTRY  <a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o4">LockList</a>;
<a name="l04087"></a><a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o5">04087</a>     KSPIN_LOCK  <a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o5">Spin</a>;
<a name="l04088"></a><a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o6">04088</a>     LONG        <a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o6">LowMemoryCount</a>;
<a name="l04089"></a><a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o7">04089</a>     ULONG       <a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o7">Reserved1</a>[4];
<a name="l04090"></a><a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o8">04090</a>     PVOID       <a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o8">Reserved2</a>;
<a name="l04091"></a><a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o9">04091</a>     <a class="code" href="../../d9/d4/struct__IO__REMOVE__LOCK__TRACKING__BLOCK.html">PIO_REMOVE_LOCK_TRACKING_BLOCK</a> <a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html#o9">Blocks</a>;
04092 } <a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html">IO_REMOVE_LOCK_DBG_BLOCK</a>;
04093 
<a name="l04094"></a><a class="code" href="../../d6/d4/struct__IO__REMOVE__LOCK.html">04094</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4/struct__IO__REMOVE__LOCK.html">_IO_REMOVE_LOCK</a> {
<a name="l04095"></a><a class="code" href="../../d6/d4/struct__IO__REMOVE__LOCK.html#o0">04095</a>     <a class="code" href="../../d7/d4/struct__IO__REMOVE__LOCK__COMMON__BLOCK.html">IO_REMOVE_LOCK_COMMON_BLOCK</a> <a class="code" href="../../d6/d4/struct__IO__REMOVE__LOCK.html#o0">Common</a>;
04096 <span class="preprocessor">#if DBG</span>
04097 <span class="preprocessor"></span>    <a class="code" href="../../d8/d4/struct__IO__REMOVE__LOCK__DBG__BLOCK.html">IO_REMOVE_LOCK_DBG_BLOCK</a> <a class="code" href="../../d9/d5/cdfs__rec_8c.html#a0">Dbg</a>;
04098 <span class="preprocessor">#endif</span>
04099 <span class="preprocessor"></span>} <a class="code" href="../../d6/d4/struct__IO__REMOVE__LOCK.html">IO_REMOVE_LOCK</a>, *<a class="code" href="../../d6/d4/struct__IO__REMOVE__LOCK.html">PIO_REMOVE_LOCK</a>;
04100 
<a name="l04101"></a><a class="code" href="../../d0/d5/io_8h.html#a241">04101</a> <span class="preprocessor">#define IoInitializeRemoveLock(Lock, Tag, Maxmin, HighWater) \</span>
04102 <span class="preprocessor">        IoInitializeRemoveLockEx (Lock, Tag, Maxmin, HighWater, sizeof (IO_REMOVE_LOCK))</span>
04103 <span class="preprocessor"></span>
04104 NTSYSAPI
04105 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04106 NTAPI
04107 <a class="code" href="../../d7/d7/io_2remlock_8c.html#a5">IoInitializeRemoveLockEx</a>(
04108     IN  PIO_REMOVE_LOCK Lock,
04109     IN  ULONG   AllocateTag, <span class="comment">// Used only on checked kernels</span>
04110     IN  ULONG   MaxLockedMinutes, <span class="comment">// Used only on checked kernels</span>
04111     IN  ULONG   HighWatermark, <span class="comment">// Used only on checked kernels</span>
04112     IN  ULONG   RemlockSize <span class="comment">// are we checked or free</span>
04113     );
04114 <span class="comment">//</span>
04115 <span class="comment">//  Initialize a remove lock.</span>
04116 <span class="comment">//</span>
04117 <span class="comment">//  Note: Allocation for remove locks needs to be within the device extension,</span>
04118 <span class="comment">//  so that the memory for this structure stays allocated until such time as the</span>
04119 <span class="comment">//  device object itself is deallocated.</span>
04120 <span class="comment">//</span>
04121 
<a name="l04122"></a><a class="code" href="../../d0/d5/io_8h.html#a242">04122</a> <span class="preprocessor">#define IoAcquireRemoveLock(RemoveLock, Tag) \</span>
04123 <span class="preprocessor">        IoAcquireRemoveLockEx(RemoveLock, Tag, __FILE__, __LINE__, sizeof (IO_REMOVE_LOCK))</span>
04124 <span class="preprocessor"></span>
04125 NTSYSAPI
04126 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04127 NTAPI
04128 <a class="code" href="../../d7/d7/io_2remlock_8c.html#a6">IoAcquireRemoveLockEx</a> (
04129     IN PIO_REMOVE_LOCK RemoveLock,
04130     IN OPTIONAL PVOID   Tag, <span class="comment">// Optional</span>
04131     IN PCSTR            File,
04132     IN ULONG            Line,
04133     IN ULONG            RemlockSize <span class="comment">// are we checked or free</span>
04134     );
04135 
04136 <span class="comment">//</span>
04137 <span class="comment">// Routine Description:</span>
04138 <span class="comment">//</span>
04139 <span class="comment">//    This routine is called to acquire the remove lock for a device object.</span>
04140 <span class="comment">//    While the lock is held, the caller can assume that no pending pnp REMOVE</span>
04141 <span class="comment">//    requests will be completed.</span>
04142 <span class="comment">//</span>
04143 <span class="comment">//    The lock should be acquired immediately upon entering a dispatch routine.</span>
04144 <span class="comment">//    It should also be acquired before creating any new reference to the</span>
04145 <span class="comment">//    device object if there's a chance of releasing the reference before the</span>
04146 <span class="comment">//    new one is done, in addition to references to the driver code itself,</span>
04147 <span class="comment">//    which is removed from memory when the last device object goes.</span>
04148 <span class="comment">//</span>
04149 <span class="comment">//    Arguments:</span>
04150 <span class="comment">//</span>
04151 <span class="comment">//    RemoveLock - A pointer to an initialized REMOVE_LOCK structure.</span>
04152 <span class="comment">//</span>
04153 <span class="comment">//    Tag - Used for tracking lock allocation and release.  The same tag</span>
04154 <span class="comment">//          specified when acquiring the lock must be used to release the lock.</span>
04155 <span class="comment">//          Tags are only checked in checked versions of the driver.</span>
04156 <span class="comment">//</span>
04157 <span class="comment">//    File - set to __FILE__ as the location in the code where the lock was taken.</span>
04158 <span class="comment">//</span>
04159 <span class="comment">//    Line - set to __LINE__.</span>
04160 <span class="comment">//</span>
04161 <span class="comment">// Return Value:</span>
04162 <span class="comment">//</span>
04163 <span class="comment">//    Returns whether or not the remove lock was obtained.</span>
04164 <span class="comment">//    If successful the caller should continue with work calling</span>
04165 <span class="comment">//    IoReleaseRemoveLock when finished.</span>
04166 <span class="comment">//</span>
04167 <span class="comment">//    If not successful the lock was not obtained.  The caller should abort the</span>
04168 <span class="comment">//    work but not call IoReleaseRemoveLock.</span>
04169 <span class="comment">//</span>
04170 
<a name="l04171"></a><a class="code" href="../../d0/d5/io_8h.html#a243">04171</a> <span class="preprocessor">#define IoReleaseRemoveLock(RemoveLock, Tag) \</span>
04172 <span class="preprocessor">        IoReleaseRemoveLockEx(RemoveLock, Tag, sizeof (IO_REMOVE_LOCK))</span>
04173 <span class="preprocessor"></span>
04174 NTSYSAPI
04175 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04176 NTAPI
04177 <a class="code" href="../../d7/d7/io_2remlock_8c.html#a7">IoReleaseRemoveLockEx</a>(
04178     IN PIO_REMOVE_LOCK RemoveLock,
04179     IN PVOID            Tag, <span class="comment">// Optional</span>
04180     IN ULONG            RemlockSize <span class="comment">// are we checked or free</span>
04181     );
04182 <span class="comment">//</span>
04183 <span class="comment">//</span>
04184 <span class="comment">// Routine Description:</span>
04185 <span class="comment">//</span>
04186 <span class="comment">//    This routine is called to release the remove lock on the device object.  It</span>
04187 <span class="comment">//    must be called when finished using a previously locked reference to the</span>
04188 <span class="comment">//    device object.  If an Tag was specified when acquiring the lock then the</span>
04189 <span class="comment">//    same Tag must be specified when releasing the lock.</span>
04190 <span class="comment">//</span>
04191 <span class="comment">//    When the lock count reduces to zero, this routine will signal the waiting</span>
04192 <span class="comment">//    event to release the waiting thread deleting the device object protected</span>
04193 <span class="comment">//    by this lock.</span>
04194 <span class="comment">//</span>
04195 <span class="comment">// Arguments:</span>
04196 <span class="comment">//</span>
04197 <span class="comment">//    DeviceObject - the device object to lock</span>
04198 <span class="comment">//</span>
04199 <span class="comment">//    Tag - The TAG (if any) specified when acquiring the lock.  This is used</span>
04200 <span class="comment">//          for lock tracking purposes</span>
04201 <span class="comment">//</span>
04202 <span class="comment">// Return Value:</span>
04203 <span class="comment">//</span>
04204 <span class="comment">//    none</span>
04205 <span class="comment">//</span>
04206 
<a name="l04207"></a><a class="code" href="../../d0/d5/io_8h.html#a244">04207</a> <span class="preprocessor">#define IoReleaseRemoveLockAndWait(RemoveLock, Tag) \</span>
04208 <span class="preprocessor">        IoReleaseRemoveLockAndWaitEx(RemoveLock, Tag, sizeof (IO_REMOVE_LOCK))</span>
04209 <span class="preprocessor"></span>
04210 NTSYSAPI
04211 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04212 NTAPI
04213 <a class="code" href="../../d7/d7/io_2remlock_8c.html#a8">IoReleaseRemoveLockAndWaitEx</a>(
04214     IN PIO_REMOVE_LOCK RemoveLock,
04215     IN PVOID            Tag,
04216     IN ULONG            RemlockSize <span class="comment">// are we checked or free</span>
04217     );
04218 <span class="comment">//</span>
04219 <span class="comment">//</span>
04220 <span class="comment">// Routine Description:</span>
04221 <span class="comment">//</span>
04222 <span class="comment">//    This routine is called when the client would like to delete the</span>
04223 <span class="comment">//    remove-locked resource.  This routine will block until all the remove</span>
04224 <span class="comment">//    locks have released.</span>
04225 <span class="comment">//</span>
04226 <span class="comment">//    This routine MUST be called after acquiring the lock.</span>
04227 <span class="comment">//</span>
04228 <span class="comment">// Arguments:</span>
04229 <span class="comment">//</span>
04230 <span class="comment">//    RemoveLock</span>
04231 <span class="comment">//</span>
04232 <span class="comment">// Return Value:</span>
04233 <span class="comment">//</span>
04234 <span class="comment">//    none</span>
04235 <span class="comment">//</span>
04236 
04237 <span class="comment">// end_ntddk end_wdm</span>
04238 
04239 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04240 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04241 <a class="code" href="../../d4/d6/iosubs_8c.html#a110">IoShutdownSystem</a>(
04242     IN ULONG Phase
04243     );
04244 
04245 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
04246 
04247 <span class="comment">//++</span>
04248 <span class="comment">//</span>
04249 <span class="comment">// USHORT</span>
04250 <span class="comment">// IoSizeOfIrp(</span>
04251 <span class="comment">//     IN CCHAR StackSize</span>
04252 <span class="comment">//     )</span>
04253 <span class="comment">//</span>
04254 <span class="comment">// Routine Description:</span>
04255 <span class="comment">//</span>
04256 <span class="comment">//     Determines the size of an IRP given the number of stack locations</span>
04257 <span class="comment">//     the IRP will have.</span>
04258 <span class="comment">//</span>
04259 <span class="comment">// Arguments:</span>
04260 <span class="comment">//</span>
04261 <span class="comment">//     StackSize - Number of stack locations for the IRP.</span>
04262 <span class="comment">//</span>
04263 <span class="comment">// Return Value:</span>
04264 <span class="comment">//</span>
04265 <span class="comment">//     Size in bytes of the IRP.</span>
04266 <span class="comment">//</span>
04267 <span class="comment">//--</span>
04268 
<a name="l04269"></a><a class="code" href="../../d0/d5/io_8h.html#a245">04269</a> <span class="preprocessor">#define IoSizeOfIrp( StackSize ) \</span>
04270 <span class="preprocessor">    ((USHORT) (sizeof( IRP ) + ((StackSize) * (sizeof( IO_STACK_LOCATION )))))</span>
04271 <span class="preprocessor"></span>
04272 <span class="comment">// end_ntifs</span>
04273 
04274 
04275 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04276 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04277 <a class="code" href="../../d4/d6/iosubs_8c.html#a111">IoStartNextPacket</a>(
04278     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
04279     IN BOOLEAN Cancelable
04280     );
04281 
04282 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04283 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04284 <a class="code" href="../../d4/d6/iosubs_8c.html#a112">IoStartNextPacketByKey</a>(
04285     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
04286     IN BOOLEAN Cancelable,
04287     IN ULONG Key
04288     );
04289 
04290 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04291 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04292 <a class="code" href="../../d4/d6/iosubs_8c.html#a113">IoStartPacket</a>(
04293     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
04294     IN PIRP Irp,
04295     IN PULONG Key OPTIONAL,
04296     IN PDRIVER_CANCEL CancelFunction OPTIONAL
04297     );
04298 
04299 <span class="comment">// begin_ntifs</span>
04300 
04301 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04302 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04303 <a class="code" href="../../d4/d6/iosubs_8c.html#a114">IoStartTimer</a>(
04304     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
04305     );
04306 
04307 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04308 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04309 <a class="code" href="../../d4/d6/iosubs_8c.html#a115">IoStopTimer</a>(
04310     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
04311     );
04312 
04313 <span class="comment">// end_ntddk end_wdm end_nthal</span>
04314 
04315 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04316 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04317 <a class="code" href="../../d4/d6/iosubs_8c.html#a116">IoSynchronousPageWrite</a>(
04318     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
04319     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MemoryDescriptorList,
04320     IN PLARGE_INTEGER StartingOffset,
04321     IN <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> Event,
04322     OUT PIO_STATUS_BLOCK IoStatusBlock
04323     );
04324 
04325 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04326 <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a>
04327 <a class="code" href="../../d4/d6/iosubs_8c.html#a117">IoThreadToProcess</a>(
04328     IN <a class="code" href="../../d5/d6/struct__ETHREAD.html">PETHREAD</a> Thread
04329     );
04330 
04331 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04332 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04333 <a class="code" href="../../d4/d6/iosubs_8c.html#a118">IoUnregisterFileSystem</a>(
04334     IN OUT <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
04335     );
04336 
04337 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04338 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04339 <a class="code" href="../../d4/d6/iosubs_8c.html#a119">IoUnregisterFsRegistrationChange</a>(
04340     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject,
04341     IN PDRIVER_FS_NOTIFICATION DriverNotificationRoutine
04342     );
04343 
04344 <span class="comment">// begin_ntddk begin_wdm begin_nthal</span>
04345 
04346 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04347 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04348 <a class="code" href="../../d4/d6/iosubs_8c.html#a120">IoUnregisterShutdownNotification</a>(
04349     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
04350     );
04351 
04352 <span class="comment">//  end_wdm</span>
04353 
04354 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04355 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04356 <a class="code" href="../../d4/d6/iosubs_8c.html#a121">IoUpdateShareAccess</a>(
04357     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
04358     IN OUT PSHARE_ACCESS ShareAccess
04359     );
04360 
04361 <span class="comment">// end_ntddk end_nthal</span>
04362 
04363 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04364 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04365 <a class="code" href="../../d4/d6/iosubs_8c.html#a122">IoVerifyVolume</a>(
04366     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
04367     IN BOOLEAN AllowRawMount
04368     );
04369 
04370 
04371 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>                                     <span class="comment">// ntddk wdm nthal</span>
04372 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>                                            <span class="comment">// ntddk wdm nthal</span>
04373 <a class="code" href="../../d4/d6/iosubs_8c.html#a123">IoWriteErrorLogEntry</a>(                           <span class="comment">// ntddk wdm nthal</span>
04374     IN PVOID ElEntry                            <span class="comment">// ntddk wdm nthal</span>
04375     );                                          <span class="comment">// ntddk wdm nthal</span>
04376 
04377 <span class="comment">// end_ntifs</span>
04378 
04379 
<a name="l04380"></a><a class="code" href="../../d0/d5/io_8h.html#a393">04380</a> <span class="keyword">typedef</span> BOOLEAN (*<a class="code" href="../../d0/d5/io_8h.html#a393">PIO_TRAVERSE_WORKER</a>)(
04381     IN ULONG                Level,
04382     IN PVOID                DeviceNode,
04383     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>       DeviceObject,
04384     IN PVOID                Context
04385     );
04386 
<a name="l04387"></a><a class="code" href="../../d0/d5/io_8h.html#a394">04387</a> <span class="keyword">typedef</span> BOOLEAN (*<a class="code" href="../../d0/d5/io_8h.html#a394">PIO_LEVEL_END_WORKER</a>)(
04388     IN ULONG                Level,
04389     IN PVOID                Context
04390     );
04391 
04392 <span class="comment">//</span>
04393 <span class="comment">// Used by PO to traverse DevNode tree</span>
04394 <span class="comment">//</span>
04395 
04396 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04397 <a class="code" href="../../d0/d5/io_8h.html#a566">IoTraverseDeviceTree</a>(
04398     IN BOOLEAN                  Inverted,
04399     IN LONG                     CurrentLevel,
04400     IN PIO_TRAVERSE_WORKER      WorkerFunction,
04401     IN PIO_LEVEL_END_WORKER     LevelEndFunction,
04402     IN PVOID                    Context
04403     );
04404 
04405 <span class="comment">// begin_nthal</span>
04406 
04407 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04408 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04409 <a class="code" href="../../d8/d0/pnpioapi_8c.html#a76">IoCreateDriver</a> (
04410     IN PUNICODE_STRING DriverName,   OPTIONAL
04411     IN PDRIVER_INITIALIZE InitializationFunction
04412     );
04413 
04414 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04415 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04416 <a class="code" href="../../d8/d0/pnpioapi_8c.html#a77">IoDeleteDriver</a> (
04417     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject
04418     );
04419 
04420 <span class="comment">// end_nthal</span>
04421 
<a name="l04422"></a><a class="code" href="../../d0/d5/io_8h.html#a246">04422</a> <span class="preprocessor">#define _WMIKM_</span>
04423 <span class="preprocessor"></span>
04424 <span class="comment">//</span>
04425 <span class="comment">// This defines the codes used to define what a request must do</span>
04426 <span class="comment">//</span>
04427 
<a name="l04428"></a><a class="code" href="../../d0/d5/io_8h.html#a606">04428</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d0/d5/io_8h.html#a606">tagWMIACTIONCODE</a>
04429 {
04430     <a class="code" href="../../d0/d5/io_8h.html#a606a428">WmiGetAllData</a> = <a class="code" href="../../d0/d5/io_8h.html#a93">IRP_MN_QUERY_ALL_DATA</a>,
04431     <a class="code" href="../../d0/d5/io_8h.html#a606a429">WmiGetSingleInstance</a> = <a class="code" href="../../d0/d5/io_8h.html#a94">IRP_MN_QUERY_SINGLE_INSTANCE</a>,
04432     <a class="code" href="../../d0/d5/io_8h.html#a606a430">WmiChangeSingleInstance</a> = <a class="code" href="../../d0/d5/io_8h.html#a95">IRP_MN_CHANGE_SINGLE_INSTANCE</a>,
04433     <a class="code" href="../../d0/d5/io_8h.html#a606a431">WmiChangeSingleItem</a> = <a class="code" href="../../d0/d5/io_8h.html#a96">IRP_MN_CHANGE_SINGLE_ITEM</a>,
04434     <a class="code" href="../../d0/d5/io_8h.html#a606a432">WmiEnableEvents</a> = <a class="code" href="../../d0/d5/io_8h.html#a97">IRP_MN_ENABLE_EVENTS</a>,
04435     <a class="code" href="../../d0/d5/io_8h.html#a606a433">WmiDisableEvents</a>  = <a class="code" href="../../d0/d5/io_8h.html#a98">IRP_MN_DISABLE_EVENTS</a>,
04436     <a class="code" href="../../d0/d5/io_8h.html#a606a434">WmiEnableCollection</a> = <a class="code" href="../../d0/d5/io_8h.html#a99">IRP_MN_ENABLE_COLLECTION</a>,
04437     <a class="code" href="../../d0/d5/io_8h.html#a606a435">WmiDisableCollection</a> = <a class="code" href="../../d0/d5/io_8h.html#a100">IRP_MN_DISABLE_COLLECTION</a>,
04438     <a class="code" href="../../d0/d5/io_8h.html#a606a436">WmiRegisterInfo</a> = <a class="code" href="../../d0/d5/io_8h.html#a101">IRP_MN_REGINFO</a>,
04439     <a class="code" href="../../d0/d5/io_8h.html#a606a437">WmiExecuteMethodCall</a> = <a class="code" href="../../d0/d5/io_8h.html#a102">IRP_MN_EXECUTE_METHOD</a>
04440 } <a class="code" href="../../d0/d5/io_8h.html#a395">WMIACTIONCODE</a>;
04441 
04442 
04443 <span class="comment">//</span>
04444 <span class="comment">// This is the prototype for the callback WMI will make to a data provider</span>
04445 <span class="comment">//</span>
04446 
<a name="l04447"></a><a class="code" href="../../d0/d5/io_8h.html#a396">04447</a> <span class="keyword">typedef</span> <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> (*<a class="code" href="../../d0/d5/io_8h.html#a396">WMIENTRY</a>)(
04448     IN <a class="code" href="../../d0/d5/io_8h.html#a395">WMIACTIONCODE</a> ActionCode,
04449     IN PVOID DataPath,
04450     IN ULONG <a class="code" href="../../d6/d2/rtqkey_8c.html#a5">BufferSize</a>,
04451     IN OUT PVOID <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>
04452     );
04453 
<a name="l04454"></a><a class="code" href="../../d0/d5/io_8h.html#a247">04454</a> <span class="preprocessor">#define WMIREG_FLAG_CALLBACK        0x80000000</span>
04455 <span class="preprocessor"></span><span class="comment">// begin_wmikm</span>
04456 <span class="comment">//</span>
04457 <span class="comment">// The following is set for a KM provider who is considered private to</span>
04458 <span class="comment">// kernel tracing</span>
04459 <span class="comment">//</span>
<a name="l04460"></a><a class="code" href="../../d0/d5/io_8h.html#a248">04460</a> <span class="preprocessor">#define WMIREG_FLAG_TRACE_PROVIDER          0x00010000</span>
04461 <span class="preprocessor"></span>
04462 <span class="comment">//</span>
04463 <span class="comment">// The following mask is to extract the trace callout class</span>
04464 <span class="comment">//</span>
<a name="l04465"></a><a class="code" href="../../d0/d5/io_8h.html#a249">04465</a> <span class="preprocessor">#define WMIREG_FLAG_TRACE_NOTIFY_MASK       0x00F00000</span>
04466 <span class="preprocessor"></span>
04467 <span class="comment">//</span>
04468 <span class="comment">// We use 4 bits for the trace callout classes.</span>
04469 <span class="comment">//</span>
<a name="l04470"></a><a class="code" href="../../d0/d5/io_8h.html#a250">04470</a> <span class="preprocessor">#define WMIREG_NOTIFY_DISK_IO               1 &lt;&lt; 20</span>
<a name="l04471"></a><a class="code" href="../../d0/d5/io_8h.html#a251">04471</a> <span class="preprocessor"></span><span class="preprocessor">#define WMIREG_NOTIFY_TDI_IO                2 &lt;&lt; 20</span>
04472 <span class="preprocessor"></span>
04473 <span class="comment">// end_wmikm</span>
04474 
04475 <span class="comment">// begin_ntddk begin_wdm begin_ntsrv</span>
04476 
<a name="l04477"></a><a class="code" href="../../d0/d5/io_8h.html#a397">04477</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d5/d9/struct__IO__WORKITEM.html">_IO_WORKITEM</a> *<a class="code" href="../../d5/d9/struct__IO__WORKITEM.html">PIO_WORKITEM</a>;
04478 
04479 <span class="keyword">typedef</span>
04480 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l04481"></a><a class="code" href="../../d0/d5/io_8h.html#a398">04481</a> (*PIO_WORKITEM_ROUTINE) (
04482     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
04483     IN PVOID Context
04484     );
04485 
04486 <a class="code" href="../../d5/d9/struct__IO__WORKITEM.html">PIO_WORKITEM</a>
04487 <a class="code" href="../../d1/d0/io_2misc_8c.html#a6">IoAllocateWorkItem</a>(
04488     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
04489     );
04490 
04491 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04492 <a class="code" href="../../d1/d0/io_2misc_8c.html#a7">IoFreeWorkItem</a>(
04493     <a class="code" href="../../d5/d9/struct__IO__WORKITEM.html">PIO_WORKITEM</a> IoWorkItem
04494     );
04495 
04496 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04497 <a class="code" href="../../d1/d0/io_2misc_8c.html#a8">IoQueueWorkItem</a>(
04498     IN <a class="code" href="../../d5/d9/struct__IO__WORKITEM.html">PIO_WORKITEM</a> IoWorkItem,
04499     IN <a class="code" href="../../d0/d5/io_8h.html#a398">PIO_WORKITEM_ROUTINE</a> WorkerRoutine,
04500     IN WORK_QUEUE_TYPE QueueType,
04501     IN PVOID Context
04502     );
04503 
04504 <span class="comment">// end_ntsrv</span>
04505 
04506 <span class="comment">// begin_ntifs</span>
04507 
04508 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04509 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04510 <a class="code" href="../../d0/d5/io_8h.html#a572">IoWMIRegistrationControl</a>(
04511     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
04512     IN ULONG Action
04513 );
04514 
04515 <span class="comment">//</span>
04516 <span class="comment">// Action code for IoWMIRetgistrationControl api</span>
04517 <span class="comment">//</span>
04518 
<a name="l04519"></a><a class="code" href="../../d0/d5/io_8h.html#a252">04519</a> <span class="preprocessor">#define WMIREG_ACTION_REGISTER      1</span>
<a name="l04520"></a><a class="code" href="../../d0/d5/io_8h.html#a253">04520</a> <span class="preprocessor"></span><span class="preprocessor">#define WMIREG_ACTION_DEREGISTER    2</span>
<a name="l04521"></a><a class="code" href="../../d0/d5/io_8h.html#a254">04521</a> <span class="preprocessor"></span><span class="preprocessor">#define WMIREG_ACTION_REREGISTER    3</span>
<a name="l04522"></a><a class="code" href="../../d0/d5/io_8h.html#a255">04522</a> <span class="preprocessor"></span><span class="preprocessor">#define WMIREG_ACTION_UPDATE_GUIDS  4</span>
<a name="l04523"></a><a class="code" href="../../d0/d5/io_8h.html#a256">04523</a> <span class="preprocessor"></span><span class="preprocessor">#define WMIREG_ACTION_BLOCK_IRPS    5</span>
04524 <span class="preprocessor"></span>
04525 <span class="comment">//</span>
04526 <span class="comment">// Code passed in IRP_MN_REGINFO WMI irp</span>
04527 <span class="comment">//</span>
04528 
<a name="l04529"></a><a class="code" href="../../d0/d5/io_8h.html#a257">04529</a> <span class="preprocessor">#define WMIREGISTER                 0</span>
<a name="l04530"></a><a class="code" href="../../d0/d5/io_8h.html#a258">04530</a> <span class="preprocessor"></span><span class="preprocessor">#define WMIUPDATE                   1</span>
04531 <span class="preprocessor"></span>
04532 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04533 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04534 <a class="code" href="../../d0/d5/io_8h.html#a573">IoWMIAllocateInstanceIds</a>(
04535     IN GUID *Guid,
04536     IN ULONG InstanceCount,
04537     OUT ULONG *FirstInstanceId
04538     );
04539 
04540 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04541 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04542 <a class="code" href="../../d0/d5/io_8h.html#a574">IoWMISuggestInstanceName</a>(
04543     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> PhysicalDeviceObject OPTIONAL,
04544     IN PUNICODE_STRING SymbolicLinkName OPTIONAL,
04545     IN BOOLEAN CombineNames,
04546     OUT PUNICODE_STRING SuggestedInstanceName
04547     );
04548 
04549 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04550 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04551 <a class="code" href="../../d0/d5/io_8h.html#a575">IoWMIWriteEvent</a>(
04552     IN PVOID WnodeEventItem
04553     );
04554 
04555 <span class="preprocessor">#if defined(_WIN64)</span>
04556 <span class="preprocessor"></span>ULONG <a class="code" href="../../d0/d5/io_8h.html#a259">IoWMIDeviceObjectToProviderId</a>(
04557     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
04558     );
04559 <span class="preprocessor">#else</span>
<a name="l04560"></a><a class="code" href="../../d0/d5/io_8h.html#a259">04560</a> <span class="preprocessor"></span><span class="preprocessor">#define IoWMIDeviceObjectToProviderId(DeviceObject) ((ULONG)(DeviceObject))</span>
04561 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
04562 <span class="preprocessor"></span>
04563 <span class="comment">// end_ntddk end_wdm end_ntifs</span>
04564 
04565 
04566 
04567 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04568 BOOLEAN
04569 <a class="code" href="../../d0/d5/io_8h.html#a576">WMIInitialize</a>(
04570     );
04571 
04572 <span class="comment">//</span>
04573 <span class="comment">// IoRemoteBootClient indicates whether the system was booted as a remote</span>
04574 <span class="comment">// boot client.</span>
04575 <span class="comment">//</span>
04576 
<a name="l04577"></a><a class="code" href="../../d0/d5/io_8h.html#a399">04577</a> <span class="keyword">extern</span> BOOLEAN <a class="code" href="../../d0/d5/io_8h.html#a399">IoRemoteBootClient</a>;
04578 <span class="preprocessor">#if defined(REMOTE_BOOT)</span>
04579 <span class="preprocessor"></span><span class="keyword">extern</span> BOOLEAN IoCscInitializationFailed;
04580 <span class="preprocessor">#endif // defined(REMOTE_BOOT)</span>
04581 <span class="preprocessor"></span>
04582 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04583 <a class="code" href="../../d2/d3/dumpctl_8c.html#a25">IoSetCrashDumpState</a>(
04584     IN SYSTEM_CRASH_STATE_INFORMATION *dumpState
04585     );
04586 
04587 <span class="comment">// Used for obtaining fast dump information</span>
04588 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04589 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04590 <a class="code" href="../../d2/d3/dumpctl_8c.html#a46">IoGetCrashDumpInformation</a>(
04591     OUT PSYSTEM_CRASH_DUMP_INFORMATION pCrashDumpInfo
04592     );
04593 
04594 <span class="comment">// Used for obtaining fast dump state</span>
04595 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04596 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04597 <a class="code" href="../../d2/d3/dumpctl_8c.html#a47">IoGetCrashDumpStateInformation</a>(
04598     OUT PSYSTEM_CRASH_STATE_INFORMATION pCrashDumpState
04599     );
04600 
04601 <span class="comment">// Used to convert a handle to a device stack.</span>
04602 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04603 <a class="code" href="../../d8/d0/pnpioapi_8c.html#a108">IoGetRelatedTargetDevice</a>(
04604     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
04605     OUT <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> *DeviceObject
04606     );
04607 
04608 <span class="comment">// Used to include a range of memory in a summary dump</span>
04609 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04610 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04611 <a class="code" href="../../d2/d3/dumpctl_8c.html#a48">IoSetDumpRange</a>(
04612     IN PVOID    DumpContext,
04613     IN PVOID    StartVA,
04614     IN ULONG_PTR Pages,
04615     IN BOOLEAN  IsPhysicalAddress
04616     );
04617 
04618 <span class="comment">//Used to remove a range of memory from the summary dump</span>
04619 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04620 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04621 <a class="code" href="../../d2/d3/dumpctl_8c.html#a49">IoFreeDumpRange</a>(
04622     IN PVOID    DumpContext,
04623     IN PVOID    StartVA,
04624     IN ULONG_PTR Pages,
04625     IN BOOLEAN  IsPhysicalAddress
04626     );
04627 
04628 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04629 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04630 <a class="code" href="../../d5/d4/complete_8c.html#a6">IoSetIoCompletion</a> (
04631     IN PVOID IoCompletion,
04632     IN PVOID KeyContext,
04633     IN PVOID ApcContext,
04634     IN NTSTATUS IoStatus,
04635     IN ULONG_PTR IoStatusInformation,
04636     IN BOOLEAN Quota
04637     );
04638 
04639 <span class="comment">//</span>
04640 <span class="comment">// Safeboot definitions - placeholder until a home can be found.</span>
04641 <span class="comment">//</span>
04642 
<a name="l04643"></a><a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html">04643</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html">_BOOT_LOG_RECORD</a> {
<a name="l04644"></a><a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html#o0">04644</a>     UNICODE_STRING <a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html#o0">LoadedString</a>;
<a name="l04645"></a><a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html#o1">04645</a>     UNICODE_STRING <a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html#o1">NotLoadedString</a>;
<a name="l04646"></a><a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html#o2">04646</a>     UNICODE_STRING <a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html#o2">LogFileName</a>;
<a name="l04647"></a><a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html#o3">04647</a>     UNICODE_STRING <a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html#o3">HeaderString</a>;
<a name="l04648"></a><a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html#o4">04648</a>     <a class="code" href="../../d6/d4/struct__ERESOURCE.html">ERESOURCE</a> <a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html#o4">Resource</a>;
<a name="l04649"></a><a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html#o5">04649</a>     ULONG <a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html#o5">NextKey</a>;
<a name="l04650"></a><a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html#o6">04650</a>     BOOLEAN <a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html#o6">FileLogging</a>;
04651 } <a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html">BOOT_LOG_RECORD</a>, *<a class="code" href="../../d6/d4/struct__BOOT__LOG__RECORD.html">PBOOT_LOG_RECORD</a>;
04652 
04653 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04654 <a class="code" href="../../d2/d4/internal_8c.html#a18">IopCopyBootLogRegistryToFile</a>(
04655     VOID
04656     );
04657 
04658 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04659 <a class="code" href="../../d2/d4/internal_8c.html#a74">IopInitializeBootLogging</a>(
04660     <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock,
04661     PCHAR HeaderString
04662     );
04663 
04664 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04665 <a class="code" href="../../d2/d4/internal_8c.html#a75">IopBootLog</a>(
04666     PUNICODE_STRING LogEntry,
04667     BOOLEAN Loaded
04668     );
04669 
04670 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04671 <a class="code" href="../../d8/d0/pnpioapi_8c.html#a67">IopSetRegistryStringValue</a>(
04672     IN HANDLE KeyHandle,
04673     IN PUNICODE_STRING ValueName,
04674     IN PUNICODE_STRING ValueData
04675     );
04676 
04677 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04678 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04679 <a class="code" href="../../d4/d6/iosubs_8c.html#a128">IoGetRequestorSessionId</a>(
04680     IN PIRP Irp,
04681     OUT PULONG pSessionId
04682     );
04683 
04684 
04685 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04686 <a class="code" href="../../d6/d6/ioverifier_8c.html#a27">IovFreeIrp</a>(
04687     IN  PIRP    Irp
04688     );
04689 
04690 <a class="code" href="../../d0/d5/io_8h.html#a356">PIRP</a>
04691 <a class="code" href="../../d6/d6/ioverifier_8c.html#a30">IovAllocateIrp</a>(
04692     IN  CCHAR   StackSize,
04693     IN  BOOLEAN ChargeQuota
04694     );
04695 
<a name="l04696"></a><a class="code" href="../../d0/d5/io_8h.html#a260">04696</a> <span class="preprocessor">#define IOVERIFIERINIT_PHASE0                0x00000001</span>
<a name="l04697"></a><a class="code" href="../../d0/d5/io_8h.html#a261">04697</a> <span class="preprocessor"></span><span class="preprocessor">#define IOVERIFIERINIT_EVERYTHING_TRACKED    0x00000002</span>
<a name="l04698"></a><a class="code" href="../../d0/d5/io_8h.html#a262">04698</a> <span class="preprocessor"></span><span class="preprocessor">#define IOVERIFIERINIT_ASYNCHRONOUSINIT      0x00000004</span>
<a name="l04699"></a><a class="code" href="../../d0/d5/io_8h.html#a263">04699</a> <span class="preprocessor"></span><span class="preprocessor">#define IOVERIFIERINIT_NO_REINIT             0x00000008</span>
<a name="l04700"></a><a class="code" href="../../d0/d5/io_8h.html#a264">04700</a> <span class="preprocessor"></span><span class="preprocessor">#define IOVERIFIERINIT_VERIFIER_DRIVER_LIST  0x00000010</span>
<a name="l04701"></a><a class="code" href="../../d0/d5/io_8h.html#a265">04701</a> <span class="preprocessor"></span><span class="preprocessor">#define IOVERIFIERINIT_RANDOMLY_CANCEL_IRPS  0x00000020</span>
04702 <span class="preprocessor"></span>
04703 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04704 <a class="code" href="../../d6/d6/ioverifier_8c.html#a26">IoVerifierInit</a>(
04705     IN ULONG VerifierFlags,
04706     IN ULONG InitFlags
04707     );
04708 
04709 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04710 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
04711 <a class="code" href="../../d6/d6/ioverifier_8c.html#a28">IovCallDriver</a>(
04712     IN  <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>  DeviceObject,
04713     IN  OUT PIRP    Irp
04714     );
04715 
04716 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04717 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
04718 <a class="code" href="../../d6/d6/ioverifier_8c.html#a29">IovCompleteRequest</a>(
04719     IN PIRP Irp,
04720     IN CCHAR PriorityBoost
04721     );
04722 
04723 <a class="code" href="../../d0/d5/io_8h.html#a356">PIRP</a>
04724 <a class="code" href="../../d6/d6/ioverifier_8c.html#a31">IovBuildAsynchronousFsdRequest</a>(
04725     IN ULONG MajorFunction,
04726     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
04727     IN OUT PVOID Buffer OPTIONAL,
04728     IN ULONG Length OPTIONAL,
04729     IN PLARGE_INTEGER StartingOffset OPTIONAL,
04730     IN PIO_STATUS_BLOCK IoStatusBlock OPTIONAL
04731     );
04732 
04733 
04734 <a class="code" href="../../d0/d5/io_8h.html#a356">PIRP</a>
04735 <a class="code" href="../../d6/d6/ioverifier_8c.html#a32">IovBuildDeviceIoControlRequest</a>(
04736     IN ULONG IoControlCode,
04737     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
04738     IN PVOID InputBuffer OPTIONAL,
04739     IN ULONG InputBufferLength,
04740     OUT PVOID OutputBuffer OPTIONAL,
04741     IN ULONG OutputBufferLength,
04742     IN BOOLEAN InternalDeviceIoControl,
04743     IN <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> Event,
04744     OUT PIO_STATUS_BLOCK IoStatusBlock
04745     );
04746 
04747 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
04748 <a class="code" href="../../d6/d6/ioverifier_8c.html#a33">IovInitializeTimer</a>(
04749     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
04750     IN PIO_TIMER_ROUTINE TimerRoutine,
04751     IN PVOID Context
04752     );
04753 
04754 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
04755 PVOID
04756 <a class="code" href="../../d4/d6/iosubs_8c.html#a15">IoAllocateGenericErrorLogEntry</a>(
04757     IN UCHAR EntrySize
04758     );
04759 
04760 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
04761 <a class="code" href="../../d4/d6/iosubs_8c.html#a136">IoRetryIrpCompletions</a>(
04762     VOID
04763     );
04764 
04765 <span class="preprocessor">#endif // _IO_</span>
04766 <span class="preprocessor"></span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:28 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

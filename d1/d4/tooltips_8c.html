<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: tooltips.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>tooltips.c File Reference</h1><code>#include "<a class="el" href="../../d1/d3/w32_2ntuser_2kernel_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d2/d3/tooltips_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a0">TT_XOFFSET</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a1">TT_YOFFSET</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a2">TTT_SHOW</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a3">TTT_HIDE</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a4">TTT_ANIMATE</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a5">TT_ANIMATEDELAY</a>&nbsp;&nbsp;&nbsp;20</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a6">TTF_POSITIVE</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a7">bitsizeof</a>(x)&nbsp;&nbsp;&nbsp;(sizeof(x) * 8)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a8">MNItemHitTest</a> (<a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a>, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a>, POINT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a9">NtGdiGetDCObject</a> (HDC, int)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a10">GreGetBitmapBits</a> (HBITMAP, ULONG, <a class="el" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>, PLONG)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a11">CalcCaptionButton</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, int hit, LPWORD pcmd, LPRECT prcBtn, LPWORD pbm)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a12">HitTestScrollBar</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, int ht, POINT pt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a13">xxxHotTrackSB</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, int htEx, BOOL fDraw)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>__inline void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a14">ZeroTooltip</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HDC&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a15">GetTooltipDC</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a16">InitTooltipAnimation</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a17">DestroyTooltipBitmap</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a18">CreateTooltipBitmap</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd, UINT cx, UINT <a class="el" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a19">CleanupTooltipAnimation</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a20">TooltipAnimate</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a21">GetCursorHeight</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a22">TooltipGetPosition</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd, SIZE *psize, POINT *ppt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a23">TooltipGetSize</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd, SIZE *psize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a24">TooltipRender</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd, HDC hdc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a25">FindNCHitEx</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, int ht, POINT pt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a26">KillTooltipTimer</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a27">SetTooltipTimer</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd, UINT uTID, UINT uDelay)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a28">xxxResetTooltip</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a29">xxxShowTooltip</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a30">xxxTooltipHandleTimer</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd, UINT uTID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a31">xxxTooltipWndProc</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LPWSTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a32">IsTooltipHittest</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT ht)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a33">xxxHotTrackMenu</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT nItem, BOOL fDraw)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a34">xxxHotTrack</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, int htEx, BOOL fDraw)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a35">xxxCreateTooltip</a> (<a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd, LPWSTR pstr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a36">xxxTrackMouseMove</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, int htEx, UINT message)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d4/tooltips_8c.html#a37">xxxCancelMouseMoveTracking</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwDTFlags, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndTrack, int htEx, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwDTCancel)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a7" doxytag="tooltips.c::bitsizeof" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define bitsizeof          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(sizeof(x) * 8)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00024">24</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00202">GetCursorHeight()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="tooltips.c::TT_ANIMATEDELAY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TT_ANIMATEDELAY&nbsp;&nbsp;&nbsp;20          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00020">20</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00570">xxxTooltipWndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="tooltips.c::TT_XOFFSET" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TT_XOFFSET&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00015">15</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00318">TooltipGetSize()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00336">TooltipRender()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="tooltips.c::TT_YOFFSET" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TT_YOFFSET&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00016">16</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00318">TooltipGetSize()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00336">TooltipRender()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="tooltips.c::TTF_POSITIVE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TTF_POSITIVE&nbsp;&nbsp;&nbsp;0x00000001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00022">22</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00148">TooltipAnimate()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00285">TooltipGetPosition()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="tooltips.c::TTT_ANIMATE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TTT_ANIMATE&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00019">19</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00526">xxxTooltipHandleTimer()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00570">xxxTooltipWndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="tooltips.c::TTT_HIDE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TTT_HIDE&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00018">18</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00526">xxxTooltipHandleTimer()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00570">xxxTooltipWndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="tooltips.c::TTT_SHOW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TTT_SHOW&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00017">17</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00875">xxxCreateTooltip()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00526">xxxTooltipHandleTimer()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a11" doxytag="tooltips.c::CalcCaptionButton" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CalcCaptionButton           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>hit</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pcmd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>prcBtn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pbm</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="tooltips.c::CleanupTooltipAnimation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CleanupTooltipAnimation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pttwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00129">129</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00082">DestroyTooltipBitmap()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06691">tagTOOLTIPWND::hdcMem</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00570">xxxTooltipWndProc()</a>.
<p>
<pre class="fragment"><div>00130 {
00131     <a class="code" href="../../d1/d4/tooltips_8c.html#a17">DestroyTooltipBitmap</a>(pttwnd);
00132 
00133     <span class="keywordflow">if</span> (pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o3">hdcMem</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00134         GreSetDCOwner(pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o3">hdcMem</a>, OBJECT_OWNER_CURRENT);
00135         GreDeleteDC(pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o3">hdcMem</a>);
00136     }
00137 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="tooltips.c::CreateTooltipBitmap" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CreateTooltipBitmap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pttwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cy</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00097">97</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00183">_ReleaseDC()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00082">DestroyTooltipBitmap()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00045">GetTooltipDC()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06692">tagTOOLTIPWND::hbmMem</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06691">tagTOOLTIPWND::hdcMem</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00570">xxxTooltipWndProc()</a>.
<p>
<pre class="fragment"><div>00098 {
00099     HDC hdc;
00100 
00101     <span class="keywordflow">if</span> (pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o3">hdcMem</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00102         RIPMSG0(RIP_WARNING, <span class="stringliteral">"CreateTooltipBitmap: pttwnd-&gt;hdcMem is NULL"</span>);
00103         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00104     }
00105 
00106     <a class="code" href="../../d1/d4/tooltips_8c.html#a17">DestroyTooltipBitmap</a>(pttwnd);
00107 
00108     hdc = <a class="code" href="../../d1/d4/tooltips_8c.html#a15">GetTooltipDC</a>(pttwnd);
00109     pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o4">hbmMem</a> = GreCreateCompatibleBitmap(hdc, cx, cy);
00110     <a class="code" href="../../d4/d1/userk_8h.html#a1697">_ReleaseDC</a>(hdc);
00111 
00112     <span class="keywordflow">if</span> (pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o4">hbmMem</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00113         RIPMSG0(RIP_WARNING, <span class="stringliteral">"CreateTooltipBitmap: hbmMem is NULL"</span>);
00114         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00115     }
00116     GreSelectBitmap(pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o3">hdcMem</a>, pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o4">hbmMem</a>);
00117     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00118 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="tooltips.c::DestroyTooltipBitmap" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DestroyTooltipBitmap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pttwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00082">82</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l06692">tagTOOLTIPWND::hbmMem</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06691">tagTOOLTIPWND::hdcMem</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00129">CleanupTooltipAnimation()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00097">CreateTooltipBitmap()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00570">xxxTooltipWndProc()</a>.
<p>
<pre class="fragment"><div>00083 {
00084     <span class="keywordflow">if</span> (pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o4">hbmMem</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00085         <span class="keywordflow">return</span>;
00086 
00087     GreSelectBitmap(pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o3">hdcMem</a>, GreGetStockObject(PRIV_STOCK_BITMAP));
00088     GreDeleteObject(pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o4">hbmMem</a>);
00089     pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o4">hbmMem</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00090 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="tooltips.c::FindNCHitEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int FindNCHitEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>ht</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>POINT&nbsp;</td>
          <td class="mdname" nowrap> <em>pt</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00375">375</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02619">tagITEM::hbmp</a>, <a class="el" href="../../d1/d4/tooltips_8c.html#a12">HitTestScrollBar()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06708">HTMDICLOSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06706">HTMDIMAXBUTTON</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06707">HTMDIMINBUTTON</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06705">HTMDISYSMENU</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06709">HTMENUITEM</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l02983">MNItemHitTest()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02797">tagMENU::rgItems</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02261">WFHPRESENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02259">WFMPRESENT</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02260">WFVPRESENT</a>.
<p>
Referenced by <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l03305">xxxScanSysQueue()</a>.
<p>
<pre class="fragment"><div>00376 {
00377     <span class="comment">/*</span>
00378 <span class="comment">     * Bug 263057 joejo</span>
00379 <span class="comment">     * It seems that pwnd-&gt;spmenu can be released and set to null,</span>
00380 <span class="comment">     * without the WFMPRESENT flag being cleared. Make sure that</span>
00381 <span class="comment">     * we have a good pwnd-&gt;spmenu before continuing.</span>
00382 <span class="comment">     */</span>
00383     <span class="keywordflow">if</span> (ht == HTMENU &amp;&amp; pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a> &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMPRESENT)) {
00384         <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> spmenu = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>;
00385         <a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a> pitem;
00386         <span class="keywordtype">int</span> nItem;
00387 
00388         nItem = <a class="code" href="../../d1/d4/tooltips_8c.html#a8">MNItemHitTest</a>(spmenu, pwnd, pt);
00389         <span class="keywordflow">if</span> (nItem &gt;= 0) {
00390             pitem = (<a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a>)&amp;spmenu-&gt;<a class="code" href="../../d1/d1/structtagMENU.html#o9">rgItems</a>[nItem];
00391             <span class="keywordflow">switch</span> ((ULONG_PTR)pitem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o16">hbmp</a>) {
00392             <span class="keywordflow">case</span> (ULONG_PTR)HBMMENU_SYSTEM:
00393                 ht = <a class="code" href="../../d4/d1/userk_8h.html#a675">HTMDISYSMENU</a>;
00394                 <span class="keywordflow">break</span>;
00395             <span class="keywordflow">case</span> (ULONG_PTR)HBMMENU_MBAR_RESTORE:
00396                 ht = <a class="code" href="../../d4/d1/userk_8h.html#a676">HTMDIMAXBUTTON</a>;
00397                 <span class="keywordflow">break</span>;
00398             <span class="keywordflow">case</span> (ULONG_PTR)HBMMENU_MBAR_MINIMIZE:
00399             <span class="keywordflow">case</span> (ULONG_PTR)HBMMENU_MBAR_MINIMIZE_D:
00400                 ht = <a class="code" href="../../d4/d1/userk_8h.html#a677">HTMDIMINBUTTON</a>;
00401                 <span class="keywordflow">break</span>;
00402             <span class="keywordflow">case</span> (ULONG_PTR)HBMMENU_MBAR_CLOSE:
00403             <span class="keywordflow">case</span> (ULONG_PTR)HBMMENU_MBAR_CLOSE_D:
00404                 ht = <a class="code" href="../../d4/d1/userk_8h.html#a678">HTMDICLOSE</a>;
00405                 <span class="keywordflow">break</span>;
00406             <span class="keywordflow">case</span> (ULONG_PTR)HBMMENU_CALLBACK:
00407                 ht = HTERROR;
00408                 <span class="keywordflow">break</span>;
00409             <span class="keywordflow">default</span>:
00410                 ht = <a class="code" href="../../d4/d1/userk_8h.html#a679">HTMENUITEM</a>;
00411                 <span class="keywordflow">break</span>;
00412             }
00413         }
00414         <span class="keywordflow">return</span> MAKELONG(ht, nItem);
00415     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ht == HTVSCROLL &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVPRESENT)) {
00416         <span class="keywordflow">return</span> MAKELONG(<a class="code" href="../../d1/d4/tooltips_8c.html#a12">HitTestScrollBar</a>(pwnd, TRUE, pt), 1);
00417     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ht == HTHSCROLL &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFHPRESENT)) {
00418         <span class="keywordflow">return</span> MAKELONG(<a class="code" href="../../d1/d4/tooltips_8c.html#a12">HitTestScrollBar</a>(pwnd, FALSE, pt), 0);
00419     }
00420 
00421     <span class="keywordflow">return</span> ht;
00422 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="tooltips.c::GetCursorHeight" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int GetCursorHeight           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00202">202</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d8/d3/loadbits_8c-source.html#l00395">_InternalGetIconInfo()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00024">bitsizeof</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d4/tooltips_8c.html#a10">GreGetBitmapBits()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00285">TooltipGetPosition()</a>.
<p>
<pre class="fragment"><div>00203 {
00204     <span class="keywordtype">int</span> iAnd, iXor, dy = 16;
00205     WORD wMask[128];
00206     ICONINFO ii;
00207     BITMAP bm;
00208     <a class="code" href="../../d6/d1/structtagCURSOR.html">PCURSOR</a> pcur;
00209     <span class="keywordtype">long</span> lOffset = 0;
00210 
00211     <span class="keywordflow">if</span> ((pcur = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;pq-&gt;spcurCurrent) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00212         <span class="keywordflow">return</span> dy;
00213     }
00214 
00215     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a1112">_InternalGetIconInfo</a>(pcur, &amp;ii, NULL, NULL, NULL, FALSE)) {
00216         <span class="keywordflow">return</span> dy;
00217     }
00218 
00219     <span class="keywordflow">if</span> (!GreExtGetObjectW(ii.hbmMask, <span class="keyword">sizeof</span>(bm), (LPSTR)&amp;bm)) {
00220         <span class="keywordflow">goto</span> Bail;
00221     }
00222 
00223     <span class="comment">/*</span>
00224 <span class="comment">     * Use the AND mask to get the cursor height if the XOR mask is there.</span>
00225 <span class="comment">     */</span>
00226     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d4/tooltips_8c.html#a10">GreGetBitmapBits</a>(ii.hbmMask, <span class="keyword">sizeof</span>(wMask), (BYTE*)wMask, &amp;lOffset)) {
00227         <span class="keywordflow">goto</span> Bail;
00228     }
00229 
00230     iAnd = (<span class="keywordtype">int</span>)(bm.bmWidth * bm.bmHeight / <a class="code" href="../../d1/d4/tooltips_8c.html#a7">bitsizeof</a>(WORD));
00231 
00232     <span class="keywordflow">if</span> (ii.hbmColor == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00233         <span class="comment">/*</span>
00234 <span class="comment">         * if no color (XOR) bitmap, then the hbmMask is a double height bitmap</span>
00235 <span class="comment">         * with the cursor and the mask stacked.</span>
00236 <span class="comment">         */</span>
00237 
00238         iXor = iAnd - 1;
00239         iAnd /= 2;
00240     } <span class="keywordflow">else</span> {
00241         iXor = 0;
00242     }
00243 
00244     <span class="keywordflow">if</span> (iAnd &gt;= <span class="keyword">sizeof</span>(wMask)) {
00245         iAnd = <span class="keyword">sizeof</span>(wMask) - 1;
00246     }
00247 
00248     <span class="keywordflow">if</span> (iXor &gt;= <span class="keyword">sizeof</span>(wMask)) {
00249         iXor = 0;
00250     }
00251 
00252     <span class="keywordflow">for</span> (iAnd--; iAnd &gt;= 0; iAnd--) {
00253         <span class="keywordflow">if</span> ((iXor != 0 &amp;&amp; wMask[iXor--] != 0) || wMask[iAnd] != 0xFFFF) {
00254             <span class="keywordflow">break</span>;
00255         }
00256     }
00257 
00258     <span class="comment">/*</span>
00259 <span class="comment">     * Compute the distance between the pointer's lowest point and hotspot.</span>
00260 <span class="comment">     */</span>
00261     dy = (iAnd + 1) * <a class="code" href="../../d1/d4/tooltips_8c.html#a7">bitsizeof</a>(WORD) / (<span class="keywordtype">int</span>)bm.bmWidth - (<span class="keywordtype">int</span>)ii.yHotspot;
00262 
00263 Bail:
00264     <span class="keywordflow">if</span> (ii.hbmColor) {
00265         GreDeleteObject(ii.hbmColor);
00266     }
00267 
00268     <span class="keywordflow">if</span> (ii.hbmMask) {
00269         GreDeleteObject(ii.hbmMask);
00270     }
00271 
00272     <span class="keywordflow">return</span> dy;
00273 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="tooltips.c::GetTooltipDC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HDC GetTooltipDC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pttwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00045">45</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00608">_GetDCEx()</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00326">ghStatusFont</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00097">CreateTooltipBitmap()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00066">InitTooltipAnimation()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00148">TooltipAnimate()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00318">TooltipGetSize()</a>.
<p>
<pre class="fragment"><div>00046 {
00047     HDC hdc = <a class="code" href="../../d4/d1/userk_8h.html#a1695">_GetDCEx</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)pttwnd, NULL, DCX_WINDOW | DCX_CACHE |
00048             DCX_USESTYLE);
00049 
00050     <span class="keywordflow">if</span> (hdc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00051         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00052 
00053     GreSelectFont(hdc, ghStatusFont);
00054     <span class="keywordflow">return</span> hdc;
00055 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="tooltips.c::GreGetBitmapBits" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG GreGetBitmapBits           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HBITMAP&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PLONG&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00202">GetCursorHeight()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="tooltips.c::HitTestScrollBar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int HitTestScrollBar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>ht</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>POINT&nbsp;</td>
          <td class="mdname" nowrap> <em>pt</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00375">FindNCHitEx()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="tooltips.c::InitTooltipAnimation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void InitTooltipAnimation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pttwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00066">66</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00183">_ReleaseDC()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00045">GetTooltipDC()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06691">tagTOOLTIPWND::hdcMem</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00570">xxxTooltipWndProc()</a>.
<p>
<pre class="fragment"><div>00067 {
00068     HDC hdc = <a class="code" href="../../d1/d4/tooltips_8c.html#a15">GetTooltipDC</a>(pttwnd);
00069 
00070     <span class="keywordflow">if</span> ((pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o3">hdcMem</a> = GreCreateCompatibleDC(hdc)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00071         <span class="keywordflow">return</span>;
00072     }
00073     <a class="code" href="../../d4/d1/userk_8h.html#a1697">_ReleaseDC</a>(hdc);
00074     GreSetDCOwner(pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o3">hdcMem</a>, OBJECT_OWNER_PUBLIC);
00075 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="tooltips.c::IsTooltipHittest" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPWSTR IsTooltipHittest           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>ht</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00678">678</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01269">GETGPSIMBPSTR</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00912">gszCAPTIONTOOLTIP</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00905">gszMAX</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00904">gszMIN</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00907">gszRESDOWN</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00906">gszRESUP</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00911">gszSCLOSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06708">HTMDICLOSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06706">HTMDIMAXBUTTON</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06707">HTMDIMINBUTTON</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03130">SEB_HELP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02470">WEFTRUNCATEDCAPTION</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02400">WFMAXBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02415">WFMAXIMIZED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02402">WFMINBOX</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02420">WFMINIMIZED</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00904">xxxTrackMouseMove()</a>.
<p>
<pre class="fragment"><div>00679 {
00680     <span class="keywordflow">switch</span> (ht) {
00681     <span class="keywordflow">case</span> HTMINBUTTON:
00682         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMINBOX)) {
00683             <span class="keywordflow">return</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMINIMIZED)) ? <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a316">gszRESUP</a> : <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a314">gszMIN</a>;
00684         }
00685         <span class="keywordflow">break</span>;
00686 
00687     <span class="keywordflow">case</span> HTMAXBUTTON:
00688         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMAXBOX)) {
00689             <span class="keywordflow">return</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMAXIMIZED)) ? <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a317">gszRESDOWN</a> : <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a315">gszMAX</a>;
00690         }
00691         <span class="keywordflow">break</span>;
00692 
00693     <span class="keywordflow">case</span> HTCLOSE:
00694     <span class="keywordflow">case</span> <a class="code" href="../../d4/d1/userk_8h.html#a678">HTMDICLOSE</a>:
00695         <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a318">gszSCLOSE</a>;
00696 
00697 <span class="comment">/*  Commented out due to TandyT ...</span>
00698 <span class="comment">    case HTSYSMENU:</span>
00699 <span class="comment">    case HTMDISYSMENU:</span>
00700 <span class="comment">        return gszSMENU;</span>
00701 <span class="comment">*/</span>
00702     <span class="keywordflow">case</span> HTHELP:
00703         <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a406">GETGPSIMBPSTR</a>(SEB_HELP);
00704 
00705     <span class="keywordflow">case</span> <a class="code" href="../../d4/d1/userk_8h.html#a677">HTMDIMINBUTTON</a>:
00706         <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a314">gszMIN</a>;
00707 
00708     <span class="keywordflow">case</span> <a class="code" href="../../d4/d1/userk_8h.html#a676">HTMDIMAXBUTTON</a>:
00709         <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a317">gszRESDOWN</a>;
00710 
00711     <span class="keywordflow">case</span> HTCAPTION:
00712         <span class="comment">/*</span>
00713 <span class="comment">         * We only show the caption tooltip if the window text</span>
00714 <span class="comment">         * doesn't fit entirely on the caption.  We will fill</span>
00715 <span class="comment">         * gszCAPTIONTOOLTIP right before showing the text</span>
00716 <span class="comment">         */</span>
00717         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFTRUNCATEDCAPTION)) {
00718             <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a319">gszCAPTIONTOOLTIP</a>;
00719         }
00720         <span class="keywordflow">break</span>;
00721 
00722     <span class="keywordflow">default</span>:
00723         <span class="keywordflow">break</span>;
00724     }
00725     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00726 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="tooltips.c::KillTooltipTimer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void KillTooltipTimer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pttwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00429">429</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d5/d1/timers_8c-source.html#l00414">_KillTimer()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00441">SetTooltipTimer()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00453">xxxResetTooltip()</a>.
<p>
<pre class="fragment"><div>00430 {
00431     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uTID = pttwnd-&gt;uTID;
00432     <span class="keywordflow">if</span> (uTID != 0) {
00433         pttwnd-&gt;uTID = 0;
00434         <a class="code" href="../../d4/d1/userk_8h.html#a1720">_KillTimer</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)pttwnd, uTID);
00435     }
00436 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="tooltips.c::MNItemHitTest" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT MNItemHitTest           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>POINT&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l02983">2983</a> of file <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html">ntuser/kernel/menu.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02791">tagMENU::cItems</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03114">tagQ::codeCapture</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00052">CopyInflateRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02754">tagITEM::cxItem</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02755">tagITEM::cyItem</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02794">tagMENU::cyMenu</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02806">tagMENU::dwArrowsOn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02804">tagMENU::iTop</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00643">MFISPOPUP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02765">MFMWFP_DOWNARROW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02763">MFMWFP_NOITEM</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02764">MFMWFP_UPARROW</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l04743">MNGetToppItem()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02627">MSA_OFF</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03848">NO_CAP_SYS</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00118">PtInRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02797">tagMENU::rgItems</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03851">SCREEN_CAPTURE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02776">TestMF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00375">FindNCHitEx()</a>, <a class="el" href="../../d5/d1/mncomput_8c-source.html#l00972">xxxMenuItemFromPoint()</a>, and <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l03180">xxxMNFindWindowFromPoint()</a>.
<p>
<pre class="fragment"><div>02984 {
02985     <a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a>  pItem;
02986     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>    iItem;
02987     RECT    rect;
02988 
02989     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
02990 
02991     <span class="keywordflow">if</span> (pMenu-&gt;cItems == 0)
02992         <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a778">MFMWFP_NOITEM</a>;
02993 
02994 
02995     <span class="comment">/*</span>
02996 <span class="comment">     * This point is screen-relative.  Menu bar coordinates relative</span>
02997 <span class="comment">     * to the window.  But popup menu coordinates are relative to the client.</span>
02998 <span class="comment">     */</span>
02999     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a786">TestMF</a>(pMenu, MFISPOPUP)) {
03000 
03001         <span class="comment">/*</span>
03002 <span class="comment">         * Bail if it's outside rcWindow</span>
03003 <span class="comment">         */</span>
03004         <a class="code" href="../../d3/d6/rect_8c.html#a2">CopyInflateRect</a>(&amp;rect, &amp;(pwnd-&gt;rcWindow),
03005                 -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXFIXEDFRAME), -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYFIXEDFRAME));
03006 
03007         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;rect, pt)) {
03008             <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a778">MFMWFP_NOITEM</a>;
03009         }
03010 
03011         <span class="comment">/* ScreenToClient */</span>
03012 <span class="preprocessor">#ifdef USE_MIRRORING</span>
03013 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLAYOUTRTL)) {
03014             pt.x = pwnd-&gt;rcClient.right - pt.x;
03015         } <span class="keywordflow">else</span>
03016 <span class="preprocessor">#endif</span>
03017 <span class="preprocessor"></span>        {
03018             pt.x -= pwnd-&gt;rcClient.left;
03019         }
03020         pt.y -= pwnd-&gt;rcClient.top;
03021 
03022         <span class="comment">/*</span>
03023 <span class="comment">         * If on the non client area, then it's on the scroll arrows</span>
03024 <span class="comment">         */</span>
03025         <span class="keywordflow">if</span> (pt.y &lt; 0) {
03026             <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a779">MFMWFP_UPARROW</a>;
03027         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pt.y &gt; (<span class="keywordtype">int</span>)pMenu-&gt;cyMenu) {
03028             <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a780">MFMWFP_DOWNARROW</a>;
03029         }
03030 
03031     } <span class="keywordflow">else</span> {
03032         <span class="comment">/* ScreenToWindow */</span>
03033 <span class="preprocessor">#ifdef USE_MIRRORING</span>
03034 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLAYOUTRTL) &amp;&amp;
03035             (
03036              (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o10">codeCapture</a> == <a class="code" href="../../d4/d1/userk_8h.html#a466">SCREEN_CAPTURE</a>) || (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o10">codeCapture</a> == <a class="code" href="../../d4/d1/userk_8h.html#a463">NO_CAP_SYS</a>)
03037             )
03038            ) {
03039             pt.x = pwnd-&gt;rcWindow.right - pt.x;
03040         } <span class="keywordflow">else</span>
03041 <span class="preprocessor">#endif</span>
03042 <span class="preprocessor"></span>        {
03043             pt.x -= pwnd-&gt;rcWindow.left;
03044         }
03045         pt.y -= pwnd-&gt;rcWindow.top;
03046     }
03047 
03048     <span class="comment">/*</span>
03049 <span class="comment">     * Step through all the items in the menu.</span>
03050 <span class="comment">     * If scrollable menu</span>
03051 <span class="comment">     */</span>
03052     <span class="keywordflow">if</span> (pMenu-&gt;dwArrowsOn != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a759">MSA_OFF</a>) {
03053         UserAssert(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a786">TestMF</a>(pMenu, MFISPOPUP));
03054         pItem = <a class="code" href="../../d4/d1/userk_8h.html#a1324">MNGetToppItem</a>(pMenu);
03055         rect.left = rect.top = 0;
03056         rect.right = pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o11">cxItem</a>;
03057         rect.bottom = pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o12">cyItem</a>;
03058         <span class="keywordflow">for</span> (iItem = pMenu-&gt;iTop; (iItem &lt; (<span class="keywordtype">int</span>)pMenu-&gt;cItems) &amp;&amp; (rect.top &lt; (<span class="keywordtype">int</span>)pMenu-&gt;cyMenu); iItem++) {
03059 
03060             <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;rect, pt)) {
03061                 <span class="keywordflow">return</span> iItem;
03062             }
03063 
03064             pItem++;
03065             rect.top = rect.bottom;
03066             rect.bottom += pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o12">cyItem</a>;
03067         }
03068     } <span class="keywordflow">else</span> {
03069         <span class="comment">/*</span>
03070 <span class="comment">         * No scroll bars.</span>
03071 <span class="comment">         */</span>
03072         <span class="keywordflow">for</span> (iItem = 0, pItem = pMenu-&gt;rgItems; iItem &lt; pMenu-&gt;cItems; iItem++, pItem++) {
03073             <span class="comment">/* Is the mouse inside this item's rectangle? */</span>
03074             rect.left       = pItem-&gt;xItem;
03075             rect.top        = pItem-&gt;yItem;
03076             rect.right      = pItem-&gt;xItem + pItem-&gt;cxItem;
03077             rect.bottom     = pItem-&gt;yItem + pItem-&gt;cyItem;
03078 
03079             <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;rect, pt)) {
03080                 <span class="keywordflow">return</span>(iItem);
03081             }
03082         }
03083     }
03084 
03085 
03086     <span class="keywordflow">return</span>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a778">MFMWFP_NOITEM</a>);
03087 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="tooltips.c::NtGdiGetDCObject" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE NtGdiGetDCObject           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="tooltips.c::SetTooltipTimer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SetTooltipTimer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pttwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uTID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uDelay</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00441">441</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d5/d1/timers_8c-source.html#l00225">InternalSetTimer()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00429">KillTooltipTimer()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00875">xxxCreateTooltip()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00526">xxxTooltipHandleTimer()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00570">xxxTooltipWndProc()</a>.
<p>
<pre class="fragment"><div>00442 {
00443     <a class="code" href="../../d1/d4/tooltips_8c.html#a26">KillTooltipTimer</a>(pttwnd);
00444     pttwnd-&gt;uTID = uTID;
00445     <a class="code" href="../../d4/d1/userk_8h.html#a1044">InternalSetTimer</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)pttwnd, uTID, uDelay, NULL, 0);
00446 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="tooltips.c::TooltipAnimate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL TooltipAnimate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pttwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00148">148</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00183">_ReleaseDC()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03658">CMS_TOOLTIP</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00045">GetTooltipDC()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06691">tagTOOLTIPWND::hdcMem</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00624">MultDiv</a>, <a class="el" href="../../d0/d5/gettickc_8c-source.html#l00026">NtGetTickCount()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00022">TTF_POSITIVE</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00526">xxxTooltipHandleTimer()</a>.
<p>
<pre class="fragment"><div>00149 {
00150     <span class="keywordtype">int</span> y, yMem, yReal, ny, iy, cx, <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>;
00151     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwElapsed;
00152     HDC hdc;
00153     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00154 
00155     <span class="keywordflow">if</span> (pttwnd-&gt;pstr == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00156         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00157 
00158     hdc = <a class="code" href="../../d1/d4/tooltips_8c.html#a15">GetTooltipDC</a>(pttwnd);
00159     cx = pttwnd-&gt;rcWindow.right - pttwnd-&gt;rcWindow.left;
00160     <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = pttwnd-&gt;rcWindow.bottom - pttwnd-&gt;rcWindow.top;
00161     dwElapsed = <a class="code" href="../../d9/d5/gettickc_8c.html#a0">NtGetTickCount</a>() - pttwnd-&gt;dwAnimStart;
00162     iy = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a141">MultDiv</a>(cy, dwElapsed, CMS_TOOLTIP);
00163 
00164     <span class="keywordflow">if</span> (dwElapsed &gt; <a class="code" href="../../d1/d0/inc_2user_8h.html#a892">CMS_TOOLTIP</a> || iy == <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>) {
00165         GreBitBlt(hdc, 0, 0, cx, cy, pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o3">hdcMem</a>, 0, 0, SRCCOPY | NOMIRRORBITMAP, 0);
00166         fRet = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00167         <span class="keywordflow">goto</span> Cleanup;
00168     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pttwnd-&gt;iyAnim == iy) {
00169         <span class="keywordflow">goto</span> Cleanup;
00170     }
00171 
00172     <span class="keywordflow">if</span> (pttwnd-&gt;dwFlags &amp; <a class="code" href="../../d1/d4/tooltips_8c.html#a6">TTF_POSITIVE</a>) {
00173         y = 0;
00174         ny = 0;
00175     } <span class="keywordflow">else</span> {
00176         y = <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>;
00177         ny = -1;
00178     }
00179 
00180     yReal = y + ny * iy;
00181     yMem = (pttwnd-&gt;dwFlags &amp; <a class="code" href="../../d1/d4/tooltips_8c.html#a6">TTF_POSITIVE</a>) ? <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> - iy : 0;
00182     pttwnd-&gt;iyAnim = iy;
00183 
00184     GreBitBlt(hdc, 0, yReal, cx, iy, pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o3">hdcMem</a>, 0, yMem, SRCCOPY | NOMIRRORBITMAP, 0);
00185 
00186 Cleanup:
00187     <a class="code" href="../../d4/d1/userk_8h.html#a1697">_ReleaseDC</a>(hdc);
00188     <span class="keywordflow">return</span> fRet;
00189 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="tooltips.c::TooltipGetPosition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TooltipGetPosition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pttwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>SIZE *&nbsp;</td>
          <td class="mdname" nowrap> <em>psize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>POINT *&nbsp;</td>
          <td class="mdname" nowrap> <em>ppt</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00285">285</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d0/d1/mmrtl_8c-source.html#l00056">_MonitorFromPoint()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00202">GetCursorHeight()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02157">tagMONITOR::rcMonitor</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00022">TTF_POSITIVE</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00484">xxxShowTooltip()</a>.
<p>
<pre class="fragment"><div>00286 {
00287     <a class="code" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>    pMonitor;
00288 
00289     *ppt = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ptCursor;
00290     pMonitor = <a class="code" href="../../d9/d1/mmrtl_8c.html#a6">_MonitorFromPoint</a>(*ppt, MONITOR_DEFAULTTONULL);
00291     UserAssert(pMonitor);
00292 
00293     <span class="keywordflow">if</span> (ppt-&gt;y + psize-&gt;cy &gt;= pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a>.bottom) {
00294         ppt-&gt;y = ppt-&gt;y - psize-&gt;cy;
00295         pttwnd-&gt;dwFlags &amp;= ~<a class="code" href="../../d1/d4/tooltips_8c.html#a6">TTF_POSITIVE</a>;
00296     } <span class="keywordflow">else</span> {
00297         ppt-&gt;y += <a class="code" href="../../d1/d4/tooltips_8c.html#a21">GetCursorHeight</a>();
00298         pttwnd-&gt;dwFlags |= <a class="code" href="../../d1/d4/tooltips_8c.html#a6">TTF_POSITIVE</a>;
00299     }
00300 
00301     <span class="keywordflow">if</span> (ppt-&gt;x + psize-&gt;cx &gt;= pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a>.right) {
00302         ppt-&gt;x = pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a>.right - psize-&gt;cx;
00303     }
00304 
00305     <span class="keywordflow">if</span> (ppt-&gt;x &lt; pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a>.left) {
00306         ppt-&gt;x = pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a>.left;
00307     }
00308 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="tooltips.c::TooltipGetSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TooltipGetSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pttwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>SIZE *&nbsp;</td>
          <td class="mdname" nowrap> <em>psize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00318">318</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00183">_ReleaseDC()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00045">GetTooltipDC()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00015">TT_XOFFSET</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00016">TT_YOFFSET</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00484">xxxShowTooltip()</a>.
<p>
<pre class="fragment"><div>00319 {
00320     HDC hdc = <a class="code" href="../../d1/d4/tooltips_8c.html#a15">GetTooltipDC</a>(pttwnd);
00321     GreGetTextExtentW(hdc, pttwnd-&gt;pstr, wcslen(pttwnd-&gt;pstr),
00322             psize, GGTE_WIN3_EXTENT);
00323     <a class="code" href="../../d4/d1/userk_8h.html#a1697">_ReleaseDC</a>(hdc);
00324     psize-&gt;cx += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXEDGE) + 2 * <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER) * <a class="code" href="../../d1/d4/tooltips_8c.html#a0">TT_XOFFSET</a>;
00325     psize-&gt;cy += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYEDGE) + 2 * <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER) * <a class="code" href="../../d1/d4/tooltips_8c.html#a1">TT_YOFFSET</a>;
00326 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="tooltips.c::TooltipRender" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TooltipRender           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pttwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00336">336</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d4/d5/rect_8c-source.html#l00073">CopyOffsetRect()</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00061">FillRect()</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00326">ghStatusFont</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00212">SYSHBR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00015">TT_XOFFSET</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00016">TT_YOFFSET</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00570">xxxTooltipWndProc()</a>.
<p>
<pre class="fragment"><div>00337 {
00338     COLORREF crBk;
00339     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uFlags;
00340     RECT rc;
00341 
00342     <span class="keywordflow">if</span> (pttwnd-&gt;pstr == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00343         <span class="keywordflow">return</span>;
00344 
00345     GreSelectFont(hdc, ghStatusFont);
00346     GreSetTextColor(hdc, <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;argbSystem[COLOR_INFOTEXT]);
00347     crBk = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;argbSystem[COLOR_INFOBK];
00348 
00349     <a class="code" href="../../d3/d6/rect_8c.html#a3">CopyOffsetRect</a>(&amp;rc, &amp;pttwnd-&gt;rcClient, -pttwnd-&gt;rcClient.left,
00350            -pttwnd-&gt;rcClient.top);
00351 
00352     <span class="comment">/*</span>
00353 <span class="comment">     * We don't want dithered colors, so FillRect with the nearest color.</span>
00354 <span class="comment">     */</span>
00355     <span class="keywordflow">if</span> (crBk == GreGetNearestColor(hdc, crBk)) {
00356         GreSetBkColor(hdc, crBk);
00357         uFlags = ETO_OPAQUE;
00358     } <span class="keywordflow">else</span> {
00359         <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a3">FillRect</a>(hdc, &amp;rc, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a22">SYSHBR</a>(INFOBK));
00360         GreSetBkMode(hdc, TRANSPARENT);
00361         uFlags = ETO_CLIPPED;
00362     }
00363 
00364     GreExtTextOutW(hdc, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER) * TT_XOFFSET,
00365             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER) * TT_YOFFSET, uFlags, &amp;rc, pttwnd-&gt;pstr,
00366             wcslen(pttwnd-&gt;pstr), NULL);
00367 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="tooltips.c::xxxCancelMouseMoveTracking" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxCancelMouseMoveTracking           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwDTFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndTrack</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>htEx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwDTCancel</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l01125">1125</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d5/d1/timers_8c-source.html#l00431">_KillSystemTimer()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00981">_PostMessage()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02581">DF_HOTTRACKING</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02584">DF_TOOLTIP</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02582">DF_TOOLTIPSHOWING</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02586">DF_TRACKMOUSEHOVER</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02585">DF_TRACKMOUSELEAVE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00303">IDSYS_MOUSEHOVER</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02792">PWNDTOOLTIP</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00836">xxxHotTrack()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00453">xxxResetTooltip()</a>.
<p>
Referenced by <a class="el" href="../../d4/d4/w32_2ntuser_2kernel_2capture_8c-source.html#l00124">xxxCapture()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l03772">xxxProcessEventMessage()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00904">xxxTrackMouseMove()</a>.
<p>
<pre class="fragment"><div>01126 {
01127 
01128     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwndTrack);
01129     <span class="comment">/*</span>
01130 <span class="comment">     * Hottracking</span>
01131 <span class="comment">     */</span>
01132     <span class="keywordflow">if</span> ((dwDTFlags &amp; <a class="code" href="../../d4/d1/userk_8h.html#a288">DF_HOTTRACKING</a>) &amp;&amp; (dwDTCancel &amp; <a class="code" href="../../d4/d1/userk_8h.html#a288">DF_HOTTRACKING</a>)) {
01133         <span class="comment">/*</span>
01134 <span class="comment">         * The current state must be owned by the current queue.</span>
01135 <span class="comment">         * Otherwise, we're about to do an inter-queue cancelation.</span>
01136 <span class="comment">         */</span>
01137         UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;pq == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwndTrack)-&gt;pq);
01138 
01139         <a class="code" href="../../d4/d1/userk_8h.html#a1972">xxxHotTrack</a>(pwndTrack, htEx, FALSE);
01140     }
01141 
01142     <span class="comment">/*</span>
01143 <span class="comment">     * Tooltips</span>
01144 <span class="comment">     */</span>
01145     <span class="keywordflow">if</span> ((dwDTFlags &amp; <a class="code" href="../../d4/d1/userk_8h.html#a289">DF_TOOLTIPSHOWING</a>) &amp;&amp; (dwDTCancel &amp; <a class="code" href="../../d4/d1/userk_8h.html#a291">DF_TOOLTIP</a>)) {
01146         <a class="code" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd = (<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>)<a class="code" href="../../d4/d1/userk_8h.html#a324">PWNDTOOLTIP</a>(pwndTrack);
01147         <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
01148 
01149         <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pttwnd, &amp;tlpwnd);
01150         <a class="code" href="../../d4/d1/userk_8h.html#a1973">xxxResetTooltip</a>(pttwnd);
01151         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
01152     }
01153 
01154     <span class="comment">/*</span>
01155 <span class="comment">     * Mouse Leave</span>
01156 <span class="comment">     */</span>
01157     <span class="keywordflow">if</span> ((dwDTFlags &amp; <a class="code" href="../../d4/d1/userk_8h.html#a292">DF_TRACKMOUSELEAVE</a>) &amp;&amp; (dwDTCancel &amp; <a class="code" href="../../d4/d1/userk_8h.html#a292">DF_TRACKMOUSELEAVE</a>)) {
01158         <a class="code" href="../../d4/d1/userk_8h.html#a1642">_PostMessage</a>(pwndTrack,
01159                      ((htEx == HTCLIENT) ? WM_MOUSELEAVE : WM_NCMOUSELEAVE),
01160                      0, 0);
01161     }
01162 
01163     <span class="comment">/*</span>
01164 <span class="comment">     * Mouse Hover</span>
01165 <span class="comment">     */</span>
01166     <span class="keywordflow">if</span> ((dwDTFlags &amp; <a class="code" href="../../d4/d1/userk_8h.html#a293">DF_TRACKMOUSEHOVER</a>) &amp;&amp; (dwDTCancel &amp; <a class="code" href="../../d4/d1/userk_8h.html#a293">DF_TRACKMOUSEHOVER</a>)) {
01167         <a class="code" href="../../d4/d1/userk_8h.html#a1567">_KillSystemTimer</a>(pwndTrack, IDSYS_MOUSEHOVER);
01168     }
01169 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="tooltips.c::xxxCreateTooltip" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxCreateTooltip           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pttwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pstr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00875">875</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06689">tagTOOLTIPWND::dwShowDelay</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00441">SetTooltipTimer()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00017">TTT_SHOW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l01468">xxxSetWindowPos()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00484">xxxShowTooltip()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00904">xxxTrackMouseMove()</a>.
<p>
<pre class="fragment"><div>00876 {
00877     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pttwnd);
00878 
00879     <span class="comment">/*</span>
00880 <span class="comment">     * Store new text</span>
00881 <span class="comment">     */</span>
00882     pttwnd-&gt;pstr = pstr;
00883     <span class="comment">/*</span>
00884 <span class="comment">     * If already visible, hide it and show it in new place.</span>
00885 <span class="comment">     *  Otherwise, set timer to show.</span>
00886 <span class="comment">     */</span>
00887     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pttwnd, WFVISIBLE)) {
00888         <a class="code" href="../../d4/d1/userk_8h.html#a1615">xxxSetWindowPos</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)pttwnd, NULL, 0, 0, 0, 0, SWP_NOSIZE |
00889                 SWP_NOMOVE | SWP_HIDEWINDOW | SWP_NOACTIVATE | SWP_NOZORDER | SWP_NOSENDCHANGING);
00890         <a class="code" href="../../d1/d4/tooltips_8c.html#a29">xxxShowTooltip</a>(pttwnd);
00891     } <span class="keywordflow">else</span> {
00892         <a class="code" href="../../d1/d4/tooltips_8c.html#a27">SetTooltipTimer</a>(pttwnd, TTT_SHOW, pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o1">dwShowDelay</a>);
00893     }
00894 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="tooltips.c::xxxHotTrack" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxHotTrack           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>htEx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fDraw</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00836">836</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06708">HTMDICLOSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06706">HTMDIMAXBUTTON</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06707">HTMDIMINBUTTON</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06709">HTMENUITEM</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06699">HTSCROLLDOWN</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06701">HTSCROLLDOWNPAGE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06702">HTSCROLLTHUMB</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06698">HTSCROLLUP</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06700">HTSCROLLUPPAGE</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00733">xxxHotTrackMenu()</a>, and <a class="el" href="../../d1/d4/tooltips_8c.html#a13">xxxHotTrackSB()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l01125">xxxCancelMouseMoveTracking()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00904">xxxTrackMouseMove()</a>.
<p>
<pre class="fragment"><div>00837 {
00838     <span class="keywordtype">int</span> ht = LOWORD(htEx);
00839 
00840     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00841 
00842     <span class="keywordflow">switch</span>(ht) {
00843 <span class="preprocessor">#ifdef COLOR_HOTTRACKING</span>
00844 <span class="preprocessor"></span>    <span class="keywordflow">case</span> HTMINBUTTON:
00845     <span class="keywordflow">case</span> HTMAXBUTTON:
00846     <span class="keywordflow">case</span> HTHELP:
00847     <span class="keywordflow">case</span> HTCLOSE:
00848         <span class="keywordflow">return</span> xxxHotTrackCaption(pwnd, ht, fDraw);
00849 
00850     <span class="keywordflow">case</span> <a class="code" href="../../d4/d1/userk_8h.html#a668">HTSCROLLUP</a>:
00851     <span class="keywordflow">case</span> <a class="code" href="../../d4/d1/userk_8h.html#a669">HTSCROLLDOWN</a>:
00852     <span class="keywordflow">case</span> <a class="code" href="../../d4/d1/userk_8h.html#a670">HTSCROLLUPPAGE</a>:
00853     <span class="keywordflow">case</span> <a class="code" href="../../d4/d1/userk_8h.html#a671">HTSCROLLDOWNPAGE</a>:
00854     <span class="keywordflow">case</span> <a class="code" href="../../d4/d1/userk_8h.html#a672">HTSCROLLTHUMB</a>:
00855         <span class="keywordflow">return</span> <a class="code" href="../../d1/d4/tooltips_8c.html#a13">xxxHotTrackSB</a>(pwnd, htEx, fDraw);
00856 
00857     <span class="keywordflow">case</span> <a class="code" href="../../d4/d1/userk_8h.html#a677">HTMDIMINBUTTON</a>:
00858     <span class="keywordflow">case</span> <a class="code" href="../../d4/d1/userk_8h.html#a676">HTMDIMAXBUTTON</a>:
00859     <span class="keywordflow">case</span> <a class="code" href="../../d4/d1/userk_8h.html#a678">HTMDICLOSE</a>:
00860 <span class="preprocessor">#endif // COLOR_HOTTRACKING</span>
00861 <span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="../../d4/d1/userk_8h.html#a679">HTMENUITEM</a>:
00862         <span class="keywordflow">return</span> <a class="code" href="../../d1/d4/tooltips_8c.html#a33">xxxHotTrackMenu</a>(pwnd, HIWORD(htEx), fDraw);
00863 
00864     }
00865 
00866     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00867 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="tooltips.c::xxxHotTrackMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxHotTrackMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>nItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fDraw</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00733">733</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d9/d2/dc_8c-source.html#l00608">_GetDCEx()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00183">_ReleaseDC()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02791">tagMENU::cItems</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02780">ClearMFS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00307">ghMenuFont</a>, <a class="el" href="../../d4/d1/userk_8h.html#a1136">GreGetTextAlign()</a>, <a class="el" href="../../d4/d1/userk_8h.html#a1135">GreSetTextAlign()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02797">tagMENU::rgItems</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02778">SetMFS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01764">tagWND::spmenu</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00212">SYSHBR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02779">TestMFS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02783">TestMFT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00362">ThreadLock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02259">WFMPRESENT</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l00750">xxxDrawMenuItem()</a>, and <a class="el" href="../../d5/d1/mncomput_8c-source.html#l00758">xxxMNRecomputeBarIfNeeded()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00836">xxxHotTrack()</a>.
<p>
<pre class="fragment"><div>00734 {
00735     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pmenu = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>;
00736     <a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a> pItem;
00737     HDC   hdc;
00738     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>  oldAlign;
00739     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpmenu;
00740 
00741     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00742 
00743     <span class="comment">/*</span>
00744 <span class="comment">     * The window may have lied about the hit-test code on</span>
00745 <span class="comment">     * WM_NCHITTEST. Make sure it does indeed have a menu.</span>
00746 <span class="comment">     */</span>
00747     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMPRESENT) || pmenu == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00748         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00749 
00750     <span class="keywordflow">if</span> (nItem &gt;= pmenu-&gt;<a class="code" href="../../d1/d1/structtagMENU.html#o4">cItems</a>) {
00751         RIPMSG0(RIP_WARNING, <span class="stringliteral">"xxxHotTrackMenu: menu too large"</span>);
00752         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00753     }
00754 
00755     pItem = &amp;pmenu-&gt;<a class="code" href="../../d1/d1/structtagMENU.html#o9">rgItems</a>[nItem];
00756 
00757     <span class="comment">/*</span>
00758 <span class="comment">     * Make sure we draw on the right spot</span>
00759 <span class="comment">     */</span>
00760     <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pmenu, &amp;tlpmenu);
00761     <a class="code" href="../../d4/d1/userk_8h.html#a1382">xxxMNRecomputeBarIfNeeded</a>(pwnd, pmenu);
00762     ValidateThreadLocks(NULL, <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;ptl, (ULONG_PTR)&amp;tlpmenu, TRUE);
00763 
00764     <span class="keywordflow">if</span> (fDraw) {
00765         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a788">TestMFS</a>(pItem, MF_GRAYED)) {
00766             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpmenu);
00767             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00768         }
00769         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a787">SetMFS</a>(pItem, MFS_HOTTRACK);
00770     } <span class="keywordflow">else</span> {
00771         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a789">ClearMFS</a>(pItem, MFS_HOTTRACK);
00772     }
00773 
00774     hdc = <a class="code" href="../../d4/d1/userk_8h.html#a1695">_GetDCEx</a>(pwnd, NULL, DCX_WINDOW | DCX_USESTYLE | DCX_CACHE);
00775     GreSelectBrush(hdc, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a22">SYSHBR</a>(MENUTEXT));
00776     GreSelectFont(hdc, ghMenuFont);
00777 
00778     oldAlign = <a class="code" href="../../d4/d1/userk_8h.html#a1136">GreGetTextAlign</a>(hdc);
00779     <span class="keywordflow">if</span> (pmenu-&gt;<a class="code" href="../../d1/d1/structtagMENU.html#o9">rgItems</a> &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a791">TestMFT</a>(pmenu-&gt;<a class="code" href="../../d1/d1/structtagMENU.html#o9">rgItems</a>, MFT_RIGHTORDER))
00780         <a class="code" href="../../d4/d1/userk_8h.html#a1135">GreSetTextAlign</a>(hdc, oldAlign | TA_RTLREADING);
00781 
00782     <span class="comment">/*</span>
00783 <span class="comment">     * When the item is not owner draw, xxxDrawMenuItem does not</span>
00784 <span class="comment">     * call back and does not leave the critical section.</span>
00785 <span class="comment">     */</span>
00786     <a class="code" href="../../d4/d1/userk_8h.html#a1315">xxxDrawMenuItem</a>(hdc, pmenu, pItem, 0);
00787     <a class="code" href="../../d4/d1/userk_8h.html#a1135">GreSetTextAlign</a>(hdc, oldAlign);
00788     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpmenu);
00789 
00790     <a class="code" href="../../d4/d1/userk_8h.html#a1697">_ReleaseDC</a>(hdc);
00791     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00792 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="tooltips.c::xxxHotTrackSB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxHotTrackSB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>htEx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fDraw</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00836">xxxHotTrack()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="tooltips.c::xxxResetTooltip" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxResetTooltip           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pttwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00453">453</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02584">DF_TOOLTIP</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00429">KillTooltipTimer()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02791">PWNDMESSAGE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00311">xxxSetParent()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l01468">xxxSetWindowPos()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00033">ZeroTooltip()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l01125">xxxCancelMouseMoveTracking()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l02218">xxxFreeWindow()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l03772">xxxProcessEventMessage()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00526">xxxTooltipHandleTimer()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00904">xxxTrackMouseMove()</a>.
<p>
<pre class="fragment"><div>00454 {
00455     <a class="code" href="../../d1/d4/tooltips_8c.html#a26">KillTooltipTimer</a>(pttwnd);
00456 
00457     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pttwnd);
00458 
00459     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pttwnd, WFVISIBLE)) {
00460         <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> spwndMessage;
00461         <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
00462 
00463         <a class="code" href="../../d4/d1/userk_8h.html#a1615">xxxSetWindowPos</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)pttwnd, NULL, 0, 0, 0, 0, SWP_NOSIZE |
00464                 SWP_NOMOVE | SWP_HIDEWINDOW | SWP_NOACTIVATE | SWP_NOZORDER);
00465 
00466         spwndMessage = <a class="code" href="../../d4/d1/userk_8h.html#a323">PWNDMESSAGE</a>(pttwnd);
00467         <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(spwndMessage, &amp;tlpwnd);
00468         <a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a6">xxxSetParent</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)pttwnd, spwndMessage);
00469         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
00470     }
00471 
00472     <a class="code" href="../../d1/d4/tooltips_8c.html#a14">ZeroTooltip</a>(pttwnd);
00473     pttwnd-&gt;head.rpdesk-&gt;dwDTFlags &amp;= ~<a class="code" href="../../d4/d1/userk_8h.html#a291">DF_TOOLTIP</a>;
00474 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="tooltips.c::xxxShowTooltip" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxShowTooltip           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pttwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00484">484</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00435">_LARGE_UNICODE_STRING::Buffer</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02595">CAPTIONTOOLTIPLEN</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00912">gszCAPTIONTOOLTIP</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00463">_LARGE_UNICODE_STRING::Length</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03828">PWND_TOP</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01855">tagWND::strName</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05272">TestEffectUP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00285">TooltipGetPosition()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00318">TooltipGetSize()</a>, <a class="el" href="../../d2/d4/w32_2ntuser_2rtl_2random_8c-source.html#l00146">wcsncpycch()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02470">WEFTRUNCATEDCAPTION</a>, and <a class="el" href="../../d3/d7/swp_8c-source.html#l01468">xxxSetWindowPos()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00875">xxxCreateTooltip()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00526">xxxTooltipHandleTimer()</a>.
<p>
<pre class="fragment"><div>00485 {
00486     SIZE size;
00487     POINT pt;
00488     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>;
00489 
00490     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pttwnd);
00491 
00492     <span class="keywordflow">if</span> (pttwnd-&gt;pstr == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00493         <span class="keywordflow">return</span>;
00494 
00495     <span class="keywordflow">if</span> (pttwnd-&gt;pstr == <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a319">gszCAPTIONTOOLTIP</a>) {
00496 
00497         <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;rpdesk-&gt;spwndTrack;
00498         <span class="comment">/*</span>
00499 <span class="comment">         * The window text might have changed in callbacks, retrieve it now</span>
00500 <span class="comment">         */</span>
00501         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFTRUNCATEDCAPTION) &amp;&amp; pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o17">strName</a>.<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html#o0">Length</a>) {
00502             <a class="code" href="../../d1/d5/w32_2ntuser_2rtl_2random_8c.html#a3">wcsncpycch</a>(gszCAPTIONTOOLTIP, pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o17">strName</a>.<a class="code" href="../../d2/d9/struct__LARGE__UNICODE__STRING.html#o3">Buffer</a>, CAPTIONTOOLTIPLEN-1);
00503             <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a319">gszCAPTIONTOOLTIP</a>[<a class="code" href="../../d4/d1/userk_8h.html#a299">CAPTIONTOOLTIPLEN</a>-1] = 0;
00504         } <span class="keywordflow">else</span> {
00505             <span class="keywordflow">return</span>;
00506         }
00507     }
00508 
00509     <a class="code" href="../../d1/d4/tooltips_8c.html#a23">TooltipGetSize</a>(pttwnd, &amp;size);
00510     <a class="code" href="../../d1/d4/tooltips_8c.html#a22">TooltipGetPosition</a>(pttwnd, &amp;size, &amp;pt);
00511 
00512     <a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> = SWP_CREATESPB | SWP_SHOWWINDOW | SWP_NOACTIVATE;
00513     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a567">TestEffectUP</a>(TOOLTIPANIMATION)) {
00514         <a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> |= SWP_NOREDRAW;
00515     }
00516     <a class="code" href="../../d4/d1/userk_8h.html#a1615">xxxSetWindowPos</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)pttwnd, PWND_TOP, pt.x, pt.y, size.cx, size.cy,
00517             dwFlags);
00518 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="tooltips.c::xxxTooltipHandleTimer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxTooltipHandleTimer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pttwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uTID</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00526">526</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l06690">tagTOOLTIPWND::dwHideDelay</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02790">PWNDDESKTOP</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00441">SetTooltipTimer()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00148">TooltipAnimate()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00019">TTT_ANIMATE</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00018">TTT_HIDE</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00017">TTT_SHOW</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00453">xxxResetTooltip()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00311">xxxSetParent()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00484">xxxShowTooltip()</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00570">xxxTooltipWndProc()</a>.
<p>
<pre class="fragment"><div>00527 {
00528 
00529     <span class="keywordflow">switch</span>(uTID) {
00530         <span class="keywordflow">case</span> <a class="code" href="../../d1/d4/tooltips_8c.html#a2">TTT_SHOW</a>: {
00531             <span class="comment">/*</span>
00532 <span class="comment">             * Move the tooltip window to the desktop so it can</span>
00533 <span class="comment">             *  be shown. Then show it.</span>
00534 <span class="comment">             */</span>
00535             <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndDesktop = <a class="code" href="../../d4/d1/userk_8h.html#a322">PWNDDESKTOP</a>(pttwnd);
00536             <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
00537             <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pwndDesktop, &amp;tlpwnd);
00538             <a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a6">xxxSetParent</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)pttwnd, pwndDesktop);
00539             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
00540 
00541             <a class="code" href="../../d1/d4/tooltips_8c.html#a29">xxxShowTooltip</a>(pttwnd);
00542             <span class="keywordflow">break</span>;
00543         }
00544 
00545         <span class="keywordflow">case</span> <a class="code" href="../../d1/d4/tooltips_8c.html#a4">TTT_ANIMATE</a>:
00546            <span class="comment">/*</span>
00547 <span class="comment">            * If animation is completed, set timer to hide</span>
00548 <span class="comment">            */</span>
00549            <span class="keywordflow">if</span> (<a class="code" href="../../d1/d4/tooltips_8c.html#a20">TooltipAnimate</a>(pttwnd)) {
00550                <a class="code" href="../../d1/d4/tooltips_8c.html#a27">SetTooltipTimer</a>(pttwnd, TTT_HIDE, pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o2">dwHideDelay</a>);
00551            }
00552            <span class="keywordflow">break</span>;
00553 
00554         <span class="keywordflow">case</span> <a class="code" href="../../d1/d4/tooltips_8c.html#a3">TTT_HIDE</a>:
00555            <span class="comment">/*</span>
00556 <span class="comment">            * Hide it</span>
00557 <span class="comment">            */</span>
00558            <a class="code" href="../../d4/d1/userk_8h.html#a1973">xxxResetTooltip</a>(pttwnd);
00559            <span class="keywordflow">break</span>;
00560     }
00561 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="tooltips.c::xxxTooltipWndProc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT xxxTooltipWndProc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uMsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00570">570</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00129">CleanupTooltipAnimation()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03658">CMS_TOOLTIP</a>, <a class="el" href="../../d9/d3/sprite_8c-source.html#l00761">CreateFade()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00097">CreateTooltipBitmap()</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00082">DestroyTooltipBitmap()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02584">DF_TOOLTIP</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06690">tagTOOLTIPWND::dwHideDelay</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06742">FADE_SHOW</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06747">FADE_TOOLTIP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00818">FNID_TOOLTIP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01548">GETPDESK</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06691">tagTOOLTIPWND::hdcMem</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00066">InitTooltipAnimation()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06932">InitTooltipDelay()</a>, <a class="el" href="../../d0/d5/gettickc_8c-source.html#l00026">NtGetTickCount()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00441">SetTooltipTimer()</a>, <a class="el" href="../../d9/d3/sprite_8c-source.html#l00879">StartFade()</a>, <a class="el" href="../../d9/d3/sprite_8c-source.html#l00918">StopFade()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06672">TestALPHA</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05272">TestEffectUP</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06754">TestFadeFlags()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00336">TooltipRender()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00020">TT_ANIMATEDELAY</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00019">TTT_ANIMATE</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00018">TTT_HIDE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00227">VALIDATECLASSANDSIZE</a>, <a class="el" href="../../d4/d1/userk_8h.html#a1710">xxxBeginPaint()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, <a class="el" href="../../d4/d1/userk_8h.html#a1711">xxxEndPaint()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00688">xxxSendMessage()</a>, and <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00526">xxxTooltipHandleTimer()</a>.
<p>
Referenced by <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l02313">InitializeClientPfnArrays()</a>, and <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l01863">LW_RegisterWindows()</a>.
<p>
<pre class="fragment"><div>00571 {
00572     PAINTSTRUCT ps;
00573     <a class="code" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd;
00574 
00575     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00576     <a class="code" href="../../d6/d0/usercli_8h.html#a28">VALIDATECLASSANDSIZE</a>(pwnd, uMsg, wParam, lParam, FNID_TOOLTIP, WM_NCCREATE);
00577     pttwnd = (<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>)pwnd;
00578 
00579     <span class="keywordflow">switch</span>(uMsg) {
00580     <span class="keywordflow">case</span> WM_TIMER:
00581         <a class="code" href="../../d1/d4/tooltips_8c.html#a30">xxxTooltipHandleTimer</a>(pttwnd, (UINT)wParam);
00582         <span class="keywordflow">break</span>;
00583 
00584     <span class="keywordflow">case</span> WM_PAINT:
00585         <a class="code" href="../../d4/d1/userk_8h.html#a1710">xxxBeginPaint</a>(pwnd, &amp;ps);
00586         <a class="code" href="../../d1/d4/tooltips_8c.html#a24">TooltipRender</a>(pttwnd, ps.hdc);
00587         <a class="code" href="../../d4/d1/userk_8h.html#a1711">xxxEndPaint</a>(pwnd, &amp;ps);
00588         <span class="keywordflow">break</span>;
00589 
00590     <span class="keywordflow">case</span> WM_PRINTCLIENT:
00591         <a class="code" href="../../d1/d4/tooltips_8c.html#a24">TooltipRender</a>(pttwnd, (HDC)wParam);
00592         <span class="keywordflow">break</span>;
00593 
00594     <span class="keywordflow">case</span> WM_ERASEBKGND:
00595         <span class="keywordflow">break</span>;
00596 
00597     <span class="keywordflow">case</span> WM_NCCREATE:
00598         <a class="code" href="../../d4/d1/userk_8h.html#a2018">InitTooltipDelay</a>(pttwnd);
00599         <a class="code" href="../../d1/d4/tooltips_8c.html#a16">InitTooltipAnimation</a>(pttwnd);
00600         <span class="keywordflow">goto</span> CallDWP;
00601 
00602     <span class="keywordflow">case</span> WM_NCDESTROY:
00603         <a class="code" href="../../d1/d4/tooltips_8c.html#a19">CleanupTooltipAnimation</a>(pttwnd);
00604         <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a456">GETPDESK</a>(pttwnd)-&gt;dwDTFlags &amp;= ~<a class="code" href="../../d4/d1/userk_8h.html#a291">DF_TOOLTIP</a>;
00605         <span class="keywordflow">goto</span> CallDWP;
00606 
00607     <span class="keywordflow">case</span> WM_WINDOWPOSCHANGED:
00608         <span class="keywordflow">if</span> (((LPWINDOWPOS)lParam)-&gt;flags &amp; SWP_SHOWWINDOW) {
00609             HDC hdc;
00610             <span class="keywordtype">int</span> cx;
00611             <span class="keywordtype">int</span> <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>;
00612 
00613             <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a567">TestEffectUP</a>(TOOLTIPANIMATION)) {
00614                 <a class="code" href="../../d1/d4/tooltips_8c.html#a27">SetTooltipTimer</a>(pttwnd, TTT_HIDE, pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o2">dwHideDelay</a>);
00615                 <span class="keywordflow">goto</span> CallDWP;
00616             }
00617 
00618             hdc = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00619             cx = pttwnd-&gt;rcWindow.right - pttwnd-&gt;rcWindow.left;
00620             <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = pttwnd-&gt;rcWindow.bottom - pttwnd-&gt;rcWindow.top;
00621 
00622             <span class="comment">/*</span>
00623 <span class="comment">             * At this point we're sure that the window is showing and the size</span>
00624 <span class="comment">             * has been changed and we're in the context of the desktop thread.</span>
00625 <span class="comment">             */</span>
00626             <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a666">TestALPHA</a>(TOOLTIPFADE)) {
00627                 hdc = <a class="code" href="../../d4/d1/userk_8h.html#a1977">CreateFade</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)pttwnd, NULL, CMS_TOOLTIP,
00628                         FADE_SHOW | FADE_TOOLTIP);
00629             } <span class="keywordflow">else</span> {
00630                 <span class="keywordflow">if</span> (<a class="code" href="../../d1/d4/tooltips_8c.html#a18">CreateTooltipBitmap</a>(pttwnd, cx, cy)) {
00631                     hdc = pttwnd-&gt;<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html#o3">hdcMem</a>;
00632                 }
00633             }
00634 
00635             <span class="keywordflow">if</span> (hdc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00636                 <a class="code" href="../../d1/d4/tooltips_8c.html#a27">SetTooltipTimer</a>(pttwnd, TTT_HIDE, 0);
00637                 <span class="keywordflow">goto</span> CallDWP;
00638             }
00639 
00640             <a class="code" href="../../d4/d1/userk_8h.html#a1579">xxxSendMessage</a>((<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)pttwnd, WM_PRINT, (WPARAM)hdc,
00641                     PRF_CLIENT | PRF_NONCLIENT | PRF_CHILDREN | PRF_ERASEBKGND);
00642 
00643             <span class="comment">/*</span>
00644 <span class="comment">             * Start animation timer</span>
00645 <span class="comment">             */</span>
00646 
00647             <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a1982">TestFadeFlags</a>(FADE_TOOLTIP)) {
00648                 <a class="code" href="../../d8/d4/sprite_8c.html#a21">StartFade</a>();
00649                 <a class="code" href="../../d1/d4/tooltips_8c.html#a27">SetTooltipTimer</a>(pttwnd, TTT_HIDE, pttwnd-&gt;dwHideDelay);
00650             } <span class="keywordflow">else</span> {
00651                 pttwnd-&gt;dwAnimStart = <a class="code" href="../../d9/d5/gettickc_8c.html#a0">NtGetTickCount</a>();
00652                 <a class="code" href="../../d1/d4/tooltips_8c.html#a27">SetTooltipTimer</a>(pttwnd, TTT_ANIMATE, TT_ANIMATEDELAY);
00653             }
00654         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((LPWINDOWPOS)lParam)-&gt;flags &amp; SWP_HIDEWINDOW) {
00655             <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a1982">TestFadeFlags</a>(FADE_TOOLTIP)) {
00656                 <a class="code" href="../../d8/d4/sprite_8c.html#a22">StopFade</a>();
00657             } <span class="keywordflow">else</span> {
00658                 <a class="code" href="../../d1/d4/tooltips_8c.html#a17">DestroyTooltipBitmap</a>(pttwnd);
00659             }
00660         }
00661         <span class="keywordflow">goto</span> CallDWP;
00662 
00663     <span class="keywordflow">default</span>:
00664 CallDWP:
00665         <span class="keywordflow">return</span> <a class="code" href="../../d4/d1/userk_8h.html#a1632">xxxDefWindowProc</a>(pwnd, uMsg, wParam, lParam);
00666     }
00667 
00668     <span class="keywordflow">return</span> 0;
00669 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="tooltips.c::xxxTrackMouseMove" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void xxxTrackMouseMove           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>htEx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00904">904</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02581">DF_HOTTRACKING</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02588">DF_MOUSEMOVETRK</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02584">DF_TOOLTIP</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02583">DF_TOOLTIPACTIVE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02587">DF_TRACKMOUSEEVENT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02650">tagDESKTOP::dwDTFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02718">tagWINDOWSTATION::dwWSF_Flags</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l02251">GetActiveTrackPwnd()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02671">tagDESKTOP::htEx</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00300">IDSYS_WNDTRACKING</a>, <a class="el" href="../../d5/d1/timers_8c-source.html#l00225">InternalSetTimer()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00678">IsTooltipHittest()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00367">Lock</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l02068">PostEventMessage()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03000">QEVENT_CANCELMOUSEMOVETRK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03032">QF_ACTIVEWNDTRACKING</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02648">tagDESKTOP::rpwinstaParent</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02661">tagDESKTOP::spwndTooltip</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02670">tagDESKTOP::spwndTrack</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05272">TestEffectUP</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l05262">TestUP</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00363">ThreadLockAlways</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07066">UP</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l02704">WSF_NOIO</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l01125">xxxCancelMouseMoveTracking()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00875">xxxCreateTooltip()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00836">xxxHotTrack()</a>, <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00453">xxxResetTooltip()</a>, and <a class="el" href="../../d5/d1/timers_8c-source.html#l00882">xxxSystemTimerProc()</a>.
<p>
Referenced by <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l03305">xxxScanSysQueue()</a>.
<p>
<pre class="fragment"><div>00905 {
00906     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fNewpwndTrack;
00907     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwDTCancel = 0;
00908     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwnd;
00909     LPWSTR pstr;
00910     <a class="code" href="../../d0/d3/structtagDESKTOP.html">PDESKTOP</a> pdesk = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;rpdesk;
00911     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiTrack;
00912 
00913 
00914 <span class="preprocessor">#if DBG</span>
00915 <span class="preprocessor"></span>    <span class="comment">/*</span>
00916 <span class="comment">     * Let's warn if this function gets reenterd so we can make sure</span>
00917 <span class="comment">     * nothing bad will follow. This should be a rare situation.</span>
00918 <span class="comment">     * Look in gptiReEntered to find out who is already here.</span>
00919 <span class="comment">     */</span>
00920     <span class="keyword">static</span> <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> gcReEntered = 0;
00921     <span class="keyword">static</span> <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> gptiReEntered;
00922     <span class="keywordflow">if</span>(gcReEntered++ != 0){
00923       RIPMSG2(RIP_WARNING, <span class="stringliteral">"Reentered xxxTrackMouseMove; previous thread was %#p, current thread is %#p"</span>, gptiReEntered, <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>());
00924     }
00925     gptiReEntered = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
00926 
00927     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00928 
00929     <span class="comment">/*</span>
00930 <span class="comment">     * We must be on an interactive window station.</span>
00931 <span class="comment">     */</span>
00932     <span class="keywordflow">if</span> (pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o3">rpwinstaParent</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
00933             pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o3">rpwinstaParent</a>-&gt;<a class="code" href="../../d4/d9/structtagWINDOWSTATION.html#o3">dwWSF_Flags</a> &amp; <a class="code" href="../../d4/d1/userk_8h.html#a316">WSF_NOIO</a>) {
00934         RIPMSG0(RIP_ERROR, <span class="stringliteral">"Can't use tooltips on non-interactive winsta"</span>);
00935     }
00936 
00937      {
00938         <span class="keyword">static</span> POINT pt = {0, 0};
00939 
00940 <span class="preprocessor">#ifdef UNDONE</span>
00941 <span class="preprocessor"></span>        <span class="comment">/*</span>
00942 <span class="comment">         * We might have taken a guess on the hit test (see FindNCHitEx)</span>
00943 <span class="comment">         *  so if we're at the same point and same window, something</span>
00944 <span class="comment">         *  might be fishy</span>
00945 <span class="comment">         */</span>
00946         <span class="keywordflow">if</span> ((pt.x == <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ptCursor.x)
00947                     &amp;&amp; (pt.y == <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ptCursor.y)
00948                     &amp;&amp; (pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o21">spwndTrack</a> == pwnd)) {
00949             RIPMSG1(RIP_WARNING, <span class="stringliteral">"xxxTrackMouseMove: Same point &amp; window. %#p"</span>, pwnd);
00950         }
00951 <span class="preprocessor">#endif</span>
00952 <span class="preprocessor"></span>
00953         <span class="comment">/*</span>
00954 <span class="comment">         * Something is supposed to have changed or we're wasting time</span>
00955 <span class="comment">         */</span>
00956         UserAssert((pt.x != <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ptCursor.x)
00957                     || (pt.y != <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ptCursor.y)
00958                     || (pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o21">spwndTrack</a> != pwnd)
00959                     || (pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o22">htEx</a> != htEx)
00960                     || (message != WM_MOUSEMOVE));
00961         <span class="comment">/*</span>
00962 <span class="comment">         * Remember last tracked point</span>
00963 <span class="comment">         */</span>
00964         pt = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;ptCursor;
00965      }
00966     <span class="comment">/*</span>
00967 <span class="comment">     * pwnd is supposed to be on the current thread and queue</span>
00968 <span class="comment">     */</span>
00969     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>() == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwnd));
00970     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;pq == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwnd)-&gt;pq);
00971 <span class="preprocessor">#endif</span>
00972 <span class="preprocessor"></span>
00973     <span class="comment">/*</span>
00974 <span class="comment">     * Have we switched windows?</span>
00975 <span class="comment">     */</span>
00976     fNewpwndTrack = (pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o21">spwndTrack</a> != pwnd);
00977     <span class="comment">/*</span>
00978 <span class="comment">     * If no tracking is taking place, just go set the new</span>
00979 <span class="comment">     *  tracking state</span>
00980 <span class="comment">     */</span>
00981     <span class="keywordflow">if</span> (!(pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o4">dwDTFlags</a> &amp; <a class="code" href="../../d4/d1/userk_8h.html#a295">DF_MOUSEMOVETRK</a>)) {
00982         <span class="keywordflow">goto</span> SetNewState;
00983     }
00984     <span class="comment">/*</span>
00985 <span class="comment">     * Potentially while we leave the critical section below in</span>
00986 <span class="comment">     * xxxCancelMouseMoveTracking, spwndTrack could be destroyed and unlocked</span>
00987 <span class="comment">     * and then we go and create the tooltip. This would mean that</span>
00988 <span class="comment">     * DF_TOOLTIPACTIVE (part of DF_MOUSEMOVETRK test above) would be set,</span>
00989 <span class="comment">     * but pdesk-&gt;spwndTrack would be NULL and we can AV dereferencing</span>
00990 <span class="comment">     * pdesk-&gt;spwndTrack below. Prevent this by making the check here.</span>
00991 <span class="comment">     */</span>
00992     <span class="keywordflow">if</span> (pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o21">spwndTrack</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00993         <span class="keywordflow">goto</span> SetNewState;
00994     }
00995 
00996     <span class="comment">/*</span>
00997 <span class="comment">     * Nuke hottracking and deactivate tooltip state, if any.</span>
00998 <span class="comment">     * Do it sychronously if we're tracking on the current queue;</span>
00999 <span class="comment">     *  Otherwise, post an event and let it happen later.</span>
01000 <span class="comment">     */</span>
01001     ptiTrack = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o21">spwndTrack</a>);
01002     <span class="keywordflow">if</span>  (<a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;pq == ptiTrack-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>) {
01003         dwDTCancel |= <a class="code" href="../../d4/d1/userk_8h.html#a288">DF_HOTTRACKING</a>;
01004     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o4">dwDTFlags</a> &amp; (<a class="code" href="../../d4/d1/userk_8h.html#a288">DF_HOTTRACKING</a> | <a class="code" href="../../d4/d1/userk_8h.html#a290">DF_TOOLTIPACTIVE</a>)) {
01005         <a class="code" href="../../d4/d1/userk_8h.html#a1217">PostEventMessage</a>(ptiTrack, ptiTrack-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>,
01006                         QEVENT_CANCELMOUSEMOVETRK,
01007                         pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o21">spwndTrack</a>,
01008                         pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o4">dwDTFlags</a>,
01009                         pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o22">htEx</a>, DF_HOTTRACKING);
01010        <span class="comment">/*</span>
01011 <span class="comment">        * Paranoid assertion. If we're switching queues, we must</span>
01012 <span class="comment">        *  be switching windows. Did we just go through</span>
01013 <span class="comment">        *  ReattachThreads?</span>
01014 <span class="comment">        */</span>
01015         UserAssert(pwnd != pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o21">spwndTrack</a>);
01016         pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o4">dwDTFlags</a> &amp;= ~(<a class="code" href="../../d4/d1/userk_8h.html#a288">DF_HOTTRACKING</a> | <a class="code" href="../../d4/d1/userk_8h.html#a290">DF_TOOLTIPACTIVE</a>);
01017     }
01018     <span class="comment">/*</span>
01019 <span class="comment">     * If we're on the client area or the user clicked,</span>
01020 <span class="comment">     *  nuke the tooltip (if any).</span>
01021 <span class="comment">     * Since we might want to re-show the tooltip, we don't nuke it</span>
01022 <span class="comment">     *  now if we swichted windows (we'll nuke it later if needed)</span>
01023 <span class="comment">     */</span>
01024     <span class="keywordflow">if</span> ((htEx == HTCLIENT) || (message != WM_MOUSEMOVE)) {
01025         dwDTCancel |= <a class="code" href="../../d4/d1/userk_8h.html#a290">DF_TOOLTIPACTIVE</a>;
01026     }
01027     <span class="comment">/*</span>
01028 <span class="comment">     * If we switched windows or crossed client/nonclinet boundaries,</span>
01029 <span class="comment">     *  end track mouse leave/hover.</span>
01030 <span class="comment">     */</span>
01031     <span class="keywordflow">if</span> (fNewpwndTrack || ((pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o22">htEx</a> == HTCLIENT) ^ (htEx == HTCLIENT))) {
01032         dwDTCancel |= <a class="code" href="../../d4/d1/userk_8h.html#a294">DF_TRACKMOUSEEVENT</a>;
01033     }
01034     <span class="comment">/*</span>
01035 <span class="comment">     * Cancel whatever is active and needs to go away</span>
01036 <span class="comment">     */</span>
01037     <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o21">spwndTrack</a>, &amp;tlpwnd);
01038     <a class="code" href="../../d4/d1/userk_8h.html#a1974">xxxCancelMouseMoveTracking</a>(pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o4">dwDTFlags</a>,
01039                            pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o21">spwndTrack</a>,
01040                            pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o22">htEx</a>,
01041                            dwDTCancel);
01042     <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
01043     pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o4">dwDTFlags</a> &amp;= ~dwDTCancel;
01044 
01045 
01046 
01047 SetNewState:
01048     <span class="comment">/*</span>
01049 <span class="comment">     * Hottracking/tooltip on mouse move if on NC hitest and enabled</span>
01050 <span class="comment">     */</span>
01051     <span class="keywordflow">if</span> ((htEx != HTCLIENT) &amp;&amp; (message == WM_MOUSEMOVE) &amp;&amp; <a class="code" href="../../d4/d1/userk_8h.html#a567">TestEffectUP</a>(HOTTRACKING)) {
01052         <span class="comment">/*</span>
01053 <span class="comment">         * Hottrack the new hit test area</span>
01054 <span class="comment">         */</span>
01055         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a1972">xxxHotTrack</a>(pwnd, htEx, TRUE)) {
01056             pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o4">dwDTFlags</a> |= <a class="code" href="../../d4/d1/userk_8h.html#a288">DF_HOTTRACKING</a>;
01057         }
01058 
01059         <span class="comment">/*</span>
01060 <span class="comment">         * Remove/set the tool tip.</span>
01061 <span class="comment">         * We always do this synchronously because it doesn't mess</span>
01062 <span class="comment">         *  with pwnd's or spwnTrack's queue</span>
01063 <span class="comment">         */</span>
01064         <span class="keywordflow">if</span> ((pstr = <a class="code" href="../../d1/d4/tooltips_8c.html#a32">IsTooltipHittest</a>(pwnd, LOWORD(htEx))) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01065             <a class="code" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd = (<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>)pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o14">spwndTooltip</a>;
01066             <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pttwnd, &amp;tlpwnd);
01067             <a class="code" href="../../d1/d4/tooltips_8c.html#a35">xxxCreateTooltip</a>(pttwnd, pstr);
01068             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
01069             pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o4">dwDTFlags</a> |= <a class="code" href="../../d4/d1/userk_8h.html#a291">DF_TOOLTIP</a>;
01070         } <span class="keywordflow">else</span>  {
01071             <a class="code" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a> pttwnd = (<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>)pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o14">spwndTooltip</a>;
01072             <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pttwnd, &amp;tlpwnd);
01073             <a class="code" href="../../d4/d1/userk_8h.html#a1973">xxxResetTooltip</a>(pttwnd);
01074             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwnd);
01075         }
01076     } <span class="comment">/* if (htEx != HTCLIENT) */</span>
01077 
01078 
01079     ValidateThreadLocks(NULL, <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;ptl, (ULONG_PTR)&amp;pwnd, TRUE);
01080 
01081     <span class="comment">/*</span>
01082 <span class="comment">     * Update new track window if needed.</span>
01083 <span class="comment">     */</span>
01084     <span class="keywordflow">if</span> (fNewpwndTrack) {
01085         <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndActivate;
01086 
01087          <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o21">spwndTrack</a>, pwnd);
01088         <span class="comment">/*</span>
01089 <span class="comment">         * Active window tracking.</span>
01090 <span class="comment">         * If there is non-zero timeout, get the window we're supposed to activate</span>
01091 <span class="comment">         *  and set the timer. Otherwise, set the queue flag so</span>
01092 <span class="comment">         *  xxxActiveWindowTracking can do its thing.</span>
01093 <span class="comment">         */</span>
01094          <span class="keywordflow">if</span> ((message == WM_MOUSEMOVE) &amp;&amp; <a class="code" href="../../d4/d1/userk_8h.html#a563">TestUP</a>(ACTIVEWINDOWTRACKING)) {
01095              <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a743">UP</a>(ACTIVEWNDTRKTIMEOUT) != 0) {
01096                  pwndActivate = <a class="code" href="../../d4/d1/userk_8h.html#a1654">GetActiveTrackPwnd</a>(pwnd, NULL);
01097                  <span class="keywordflow">if</span> (pwndActivate != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01098                      <a class="code" href="../../d4/d1/userk_8h.html#a1044">InternalSetTimer</a>(pwndActivate, IDSYS_WNDTRACKING,
01099                                      <a class="code" href="../../d4/d1/userk_8h.html#a743">UP</a>(ACTIVEWNDTRKTIMEOUT),
01100                                      xxxSystemTimerProc, TMRF_SYSTEM);
01101                  }
01102              } <span class="keywordflow">else</span> {
01103                  <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;pq-&gt;QF_flags |= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a870">QF_ACTIVEWNDTRACKING</a>;
01104              } <span class="comment">/* if (TestUP(ACTIVEWNDTRKZORDER)) */</span>
01105          } <span class="comment">/* if (TestUP(ACTIVEWINDOWTRACKING)) */</span>
01106 
01107     }
01108 
01109     <span class="comment">/*</span>
01110 <span class="comment">     * Save new hit test code</span>
01111 <span class="comment">     */</span>
01112     pdesk-&gt;<a class="code" href="../../d0/d3/structtagDESKTOP.html#o22">htEx</a> = htEx;
01113 
01114 <span class="preprocessor">#if DBG</span>
01115 <span class="preprocessor"></span>    --gcReEntered;
01116 <span class="preprocessor">#endif</span>
01117 <span class="preprocessor"></span>}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="tooltips.c::ZeroTooltip" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> __inline void ZeroTooltip           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d8/structtagTOOLTIPWND.html">PTOOLTIPWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pttwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00033">33</a> of file <a class="el" href="../../d2/d3/tooltips_8c-source.html">tooltips.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, <a class="el" href="../../d4/d1/userk_8h.html#a955">TOOLTIP</a>, and <a class="el" href="../../d4/d1/userk_8h.html#a956">TOOLTIPWND</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/tooltips_8c-source.html#l00453">xxxResetTooltip()</a>.
<p>
<pre class="fragment"><div>00034 {
00035     RtlZeroMemory((PBYTE)pttwnd + (<span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8/structtagTOOLTIPWND.html">TOOLTIPWND</a>) - <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d8/structtagTOOLTIP.html">TOOLTIP</a>)),
00036             <span class="keyword">sizeof</span>(TOOLTIP));
00037 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:48 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

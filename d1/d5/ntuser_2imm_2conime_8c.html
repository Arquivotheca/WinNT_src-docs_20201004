<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: ntuser/imm/conime.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>conime.c File Reference</h1><code>#include "<a class="el" href="../../d9/d2/w32_2ntuser_2imm_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d2/d4/ntuser_2imm_2conime_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d5/ntuser_2imm_2conime_8c.html#a0">GUI_VKEY_MASK</a>&nbsp;&nbsp;&nbsp;(0x00ff)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d5/ntuser_2imm_2conime_8c.html#a1">ImmProcessKey</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HKL hkl, UINT uVKey, LPARAM lParam, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwHotKeyID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d5/ntuser_2imm_2conime_8c.html#a2">ImmSetActiveContext</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HIMC hIMC, BOOL fFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d5/ntuser_2imm_2conime_8c.html#a3">ImmCallImeConsoleIME</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, UINT Message, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> puVKey)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d5/ntuser_2imm_2conime_8c.html#a4">ImmSetActiveContextConsoleIME</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, BOOL fFlag)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="ntuser/imm/conime.c::GUI_VKEY_MASK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GUI_VKEY_MASK&nbsp;&nbsp;&nbsp;(0x00ff)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00015">15</a> of file <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html">ntuser/imm/conime.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00034">ImmCallImeConsoleIME()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a3" doxytag="ntuser/imm/conime.c::ImmCallImeConsoleIME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ImmCallImeConsoleIME           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>Message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>puVKey</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00034">34</a> of file <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html">ntuser/imm/conime.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04502">GetKeyboardLayout()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00251">GetWindowThreadProcessId()</a>, <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00015">GUI_VKEY_MASK</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00150">HMValidateHandle()</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00793">ImmLockImeDpi()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>, <a class="el" href="../../d9/d0/immuser_8h.html#a31">PIMEDPI</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00922">TYPE_INPUTCONTEXT</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d1/d9/imefull_8c-source.html#l00208">CharHandlerFromConsole()</a>.
<p>
<pre class="fragment"><div>00043                    :
00044 
00045         Called by Console IME to convert Character
00046         This routine copy from user\kernel\ntimm.c :: xxxImmProcessKey
00047         <span class="keywordflow">for</span> Console IME could not calls kernel function.
00048 
00049 Arguments:
00050 
00051 Return Value:
00052 --*/
00053 {
00054     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>          dwReturn ;
00055     <a class="code" href="../../d1/d7/structtagIMC.html">PIMC</a>           pImc ;
00056     HIMC           hImc ;
00057     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>           fDBERoman ;
00058     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>           pwnd ;
00059     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>        pImeDpi;
00060     HKL            hkl ;
00061 
00062     dwReturn = 0;
00063     pImc = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00064     fDBERoman = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00065 
00066     <span class="comment">//</span>
00067     <span class="comment">// we're interested in only keyboard messages.</span>
00068     <span class="comment">//</span>
00069     <span class="keywordflow">if</span> ( Message != WM_KEYDOWN    &amp;&amp;
00070          Message != WM_SYSKEYDOWN &amp;&amp;
00071          Message != WM_KEYUP      &amp;&amp;
00072          Message != WM_SYSKEYUP ) {
00073 
00074         <span class="keywordflow">return</span> dwReturn;
00075     }
00076 
00077     hkl = <a class="code" href="../../d3/d8/client_8c.html#a154">GetKeyboardLayout</a>( <a class="code" href="../../d3/d8/winmgrc_8c.html#a18">GetWindowThreadProcessId</a>(hWnd, NULL) );
00078     pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hWnd);
00079     <span class="keywordflow">if</span> ( pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00080         <span class="keywordflow">return</span> dwReturn;
00081     }
00082     hImc = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>(hWnd);
00083     <span class="keywordflow">if</span> ( hImc == <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a> ){
00084         <span class="keywordflow">return</span> dwReturn;
00085     }
00086 
00087     *puVKey = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wParam &amp; <a class="code" href="../../d1/d5/ntuser_2imm_2conime_8c.html#a0">GUI_VKEY_MASK</a>;
00088 
00089     <span class="comment">//</span>
00090     <span class="comment">// Check input context</span>
00091     <span class="comment">//</span>
00092     pImc = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a6">HMValidateHandle</a>((HANDLE)hImc, TYPE_INPUTCONTEXT);
00093     <span class="keywordflow">if</span> ( pImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00094         <span class="keywordflow">return</span> dwReturn;
00095     }
00096 
00097 <span class="preprocessor">#ifdef LATER</span>
00098 <span class="preprocessor"></span>    <span class="comment">//</span>
00099     <span class="comment">// If there is an easy way to check the input context open/close status</span>
00100     <span class="comment">// from the kernel side, IME_PROP_NO_KEYS_ON_CLOSE checking should be</span>
00101     <span class="comment">// done here in kernel side.  [ 3/10/96 takaok]</span>
00102     <span class="comment">//</span>
00103 
00104     <span class="comment">//</span>
00105     <span class="comment">// Check IME_PROP_NO_KEYS_ON_CLOSE bit</span>
00106     <span class="comment">//</span>
00107     <span class="comment">// if the current imc is not open and IME doesn't need</span>
00108     <span class="comment">// keys when being closed, we don't pass any keyboard</span>
00109     <span class="comment">// input to ime except hotkey and keys that change</span>
00110     <span class="comment">// the keyboard status.</span>
00111     <span class="comment">//</span>
00112     <span class="keywordflow">if</span> ( (piix-&gt;ImeInfo.fdwProperty &amp; IME_PROP_NO_KEYS_ON_CLOSE) &amp;&amp;
00113          (!pimc-&gt;fdwState &amp; IMC_OPEN)                            &amp;&amp;
00114          uVKey != VK_SHIFT                                       &amp;&amp;  <span class="comment">// 0x10</span>
00115          uVKey != VK_CONTROL                                     &amp;&amp;  <span class="comment">// 0x11</span>
00116          uVKey != VK_CAPITAL                                     &amp;&amp;  <span class="comment">// 0x14</span>
00117          uVKey != VK_KANA                                        &amp;&amp;  <span class="comment">// 0x15</span>
00118          uVKey != VK_NUMLOCK                                     &amp;&amp;  <span class="comment">// 0x90</span>
00119          uVKey != VK_SCROLL )                                        <span class="comment">// 0x91</span>
00120     {
00121       <span class="comment">// Check if Korea Hanja conversion mode</span>
00122       <span class="keywordflow">if</span>( !(pimc-&gt;fdwConvMode &amp; IME_CMODE_HANJACONVERT) ) {
00123           <span class="keywordflow">return</span> dwReturn;
00124       }
00125     }
00126 <span class="preprocessor">#endif</span>
00127 <span class="preprocessor"></span>
00128     <span class="comment">//</span>
00129     <span class="comment">// if the IME doesn't need key up messages, we don't call ime.</span>
00130     <span class="comment">//</span>
00131     pImeDpi = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>(hkl);
00132     <span class="keywordflow">if</span> ( pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00133         <span class="keywordflow">return</span> dwReturn;
00134     }
00135 
00136     <span class="keywordflow">if</span> ( lParam &amp; 0x80000000 &amp;&amp;          <span class="comment">// set if key up, clear if key down</span>
00137          pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_IGNORE_UPKEYS )
00138     {
00139         <span class="keywordflow">return</span> dwReturn;
00140     }
00141 
00142     <span class="comment">//</span>
00143     <span class="comment">// we don't want to handle sys keys since many functions for</span>
00144     <span class="comment">// acceelerators won't work without this</span>
00145     <span class="comment">//</span>
00146     fDBERoman = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)( (*puVKey == VK_DBE_ROMAN)            ||
00147                         (*puVKey == VK_DBE_NOROMAN)          ||
00148                         (*puVKey == VK_DBE_HIRAGANA)         ||
00149                         (*puVKey == VK_DBE_KATAKANA)         ||
00150                         (*puVKey == VK_DBE_CODEINPUT)        ||
00151                         (*puVKey == VK_DBE_NOCODEINPUT)      ||
00152                         (*puVKey == VK_DBE_IME_WORDREGISTER) ||
00153                         (*puVKey == VK_DBE_IME_DIALOG) );
00154 
00155     <span class="keywordflow">if</span> (Message == WM_SYSKEYDOWN || Message == WM_SYSKEYUP ) {
00156         <span class="comment">//</span>
00157         <span class="comment">// IME may be waiting for VK_MENU, VK_F10 or VK_DBE_xxx</span>
00158         <span class="comment">//</span>
00159         <span class="keywordflow">if</span> ( *puVKey != VK_MENU &amp;&amp; *puVKey != VK_F10 &amp;&amp; !fDBERoman ) {
00160             <span class="keywordflow">return</span> dwReturn;
00161         }
00162     }
00163 
00164     <span class="comment">//</span>
00165     <span class="comment">// check if the IME doesn't need ALT key</span>
00166     <span class="comment">//</span>
00167 
00168     <span class="keywordflow">if</span> ( !(pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_NEED_ALTKEY) ) {
00169         <span class="comment">//</span>
00170         <span class="comment">// IME doesn't need ALT key</span>
00171         <span class="comment">//</span>
00172         <span class="comment">// we don't pass the ALT and ALT+xxx except VK_DBE_xxx keys.</span>
00173         <span class="comment">//</span>
00174         <span class="keywordflow">if</span> ( ! fDBERoman &amp;&amp;
00175              (*puVKey == VK_MENU || (lParam &amp; 0x20000000))  <span class="comment">// KF_ALTDOWN</span>
00176            )
00177         {
00178             <span class="keywordflow">return</span> dwReturn;
00179         }
00180     }
00181 
00182 
00183     dwReturn = <a class="code" href="../../d9/d0/immuser_8h.html#a48">ImmProcessKey</a>(hWnd, hkl, *puVKey, lParam, IME_INVALID_HOTKEY ) ;
00184     <span class="keywordflow">return</span> dwReturn;
00185 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="ntuser/imm/conime.c::ImmProcessKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ImmProcessKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uVKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwHotKeyID</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">30</a> of file <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html">ntuser/imm/input.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/fareast_8c-source.html#l00238">_InitializeImmEntryTable()</a>.
<p>
<pre class="fragment"><div>00036 {
00037     HIMC hIMC = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>(hWnd);
00038     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>(hkl);
00039     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwReturn = 0;
00040 <span class="preprocessor">#if DBG</span>
00041 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (dwHotKeyID &gt;= IME_KHOTKEY_FIRST &amp;&amp; dwHotKeyID &lt;= IME_KHOTKEY_LAST) {
00042         TAGMSG2(DBGTAG_IMM, <span class="stringliteral">"ImmProcessKey: Kor IME Hotkeys should not come here: dwHotKeyID=%x, uVKey=%x"</span>, dwHotKeyID, uVKey);
00043     }
00044 <span class="preprocessor">#endif</span>
00045 <span class="preprocessor"></span>
00046     <a class="code" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>(dwHotKeyID != IME_KHOTKEY_ENGLISH &amp;&amp;
00047               dwHotKeyID != IME_KHOTKEY_SHAPE_TOGGLE &amp;&amp;
00048               dwHotKeyID != IME_KHOTKEY_HANJACONVERT);
00049 
00050     <span class="comment">//</span>
00051     <span class="comment">// call ImeProcessKey</span>
00052     <span class="comment">//</span>
00053     <span class="keywordflow">if</span> (pImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00054         PINPUTCONTEXT pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>(hIMC);
00055 
00056         <span class="keywordflow">if</span> (pInputContext != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00057             BOOLEAN fTruncateWideVK = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00058             BOOLEAN fCallIme = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00059             BOOLEAN fSkipThisKey = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00060 
00061 <span class="preprocessor">#ifdef LATER</span>
00062 <span class="preprocessor"></span>
00063             <span class="comment">//</span>
00064             <span class="comment">// if the current imc is not open and IME doesn't need</span>
00065             <span class="comment">// keys when being closed, we don't pass any keyboard</span>
00066             <span class="comment">// input to ime except hotkey and keys that change</span>
00067             <span class="comment">// the keyboard status.</span>
00068             <span class="comment">//</span>
00069             <span class="keywordflow">if</span> ((pImeDpi-&gt;fdwProperty &amp; IME_PROP_NO_KEYS_ON_CLOSE) &amp;&amp;
00070                     !pInputContext-&gt;fOpen &amp;&amp;
00071                     uVKey != VK_SHIFT &amp;&amp;
00072                     uVKey != VK_CONTROL &amp;&amp;
00073                     uVKey != VK_CAPITAL &amp;&amp;
00074                     uVKey != VK_KANA &amp;&amp;
00075                     uVKey != VK_NUMLOCK &amp;&amp;
00076                     uVKey != VK_SCROLL) {
00077                 <span class="comment">// Check if Korea Hanja conversion mode</span>
00078                 <span class="keywordflow">if</span>(!(pimc-&gt;fdwConvMode &amp; IME_CMODE_HANJACONVERT)) {
00079                     fCallIme = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00080                 }
00081             }
00082             <span class="keywordflow">else</span>
00083 <span class="preprocessor">#endif</span>
00084 <span class="preprocessor"></span>            <span class="comment">//</span>
00085             <span class="comment">// Protect IMEs which are unaware of wide virtual keys.</span>
00086             <span class="comment">//</span>
00087             <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)uVKey == VK_PACKET &amp;&amp;
00088                     (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_ACCEPT_WIDE_VKEY) == 0) {
00089 
00090                 <span class="keywordflow">if</span> (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE) {
00091                     <span class="comment">//</span>
00092                     <span class="comment">// Since this IME is not ready to accept wide VKey, we should</span>
00093                     <span class="comment">// truncate it.</span>
00094                     <span class="comment">//</span>
00095                     fTruncateWideVK = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00096                 }
00097                 <span class="keywordflow">else</span> {
00098                     <span class="comment">//</span>
00099                     <span class="comment">// Hmm, this guy is ANSI IME, and does not declare Wide Vkey awareness.</span>
00100                     <span class="comment">// Let's guess this one is not ready to accept Wide Vkey, so let's not</span>
00101                     <span class="comment">// pass it to this guy.</span>
00102                     <span class="comment">// And if it is opened, we'd better skip this key for safety.</span>
00103                     <span class="comment">//</span>
00104                     fCallIme = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00105                     <span class="keywordflow">if</span> (pInputContext-&gt;fOpen) {
00106                         fSkipThisKey = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00107                     }
00108                 }
00109             }
00110 
00111             <span class="keywordflow">if</span> (fCallIme) {
00112                 <a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a> pbKeyState = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, 256);
00113 
00114                 <a class="code" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>(fSkipThisKey == FALSE);
00115 
00116                 <span class="keywordflow">if</span> (pbKeyState != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00117                     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d0/user32_8def.html#a46">GetKeyboardState</a>(pbKeyState)) {
00118                         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uVKeyIme = uVKey;
00119                         <span class="keywordflow">if</span> (fTruncateWideVK) {
00120                             uVKeyIme &amp;= 0xffff;
00121                         }
00122                         <span class="keywordflow">if</span> ( (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o22">ImeProcessKey</a>)(hIMC, uVKeyIme, lParam, pbKeyState) ) {
00123                             <span class="comment">//</span>
00124                             <span class="comment">// if the return value of ImeProcessKey is TRUE,</span>
00125                             <span class="comment">// it means the key is the one that the ime is</span>
00126                             <span class="comment">// waiting for.</span>
00127                             <span class="comment">//</span>
00128                             pInputContext-&gt;fChgMsg = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00129                             pInputContext-&gt;uSavedVKey = uVKey;
00130                             dwReturn |= <a class="code" href="../../d4/d5/conimep_8h.html#a47">IPHK_PROCESSBYIME</a>;
00131                         }
00132                     }
00133                     <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(pbKeyState);
00134                 }
00135             }
00136             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fSkipThisKey) {
00137                 dwReturn |= IPHK_SKIPTHISKEY;
00138                 <a class="code" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>((dwReturn &amp; (IPHK_PROCESSBYIME | IPHK_HOTKEY)) == 0);
00139             }
00140             <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hIMC);
00141         }
00142         <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00143     }
00144 
00145     <span class="comment">//</span>
00146     <span class="comment">// call hotkey handler</span>
00147     <span class="comment">//</span>
00148     <span class="keywordflow">if</span> (dwHotKeyID != IME_INVALID_HOTKEY &amp;&amp; <a class="code" href="../../d4/d0/immcli_8h.html#a105">HotKeyIDDispatcher</a>(hWnd, hIMC, hkl, dwHotKeyID)) {
00149         <span class="comment">// Backward compat:</span>
00150         <span class="comment">// On Japanese system, some applications may want VK_KANJI.</span>
00151         <span class="keywordflow">if</span> ((uVKey != VK_KANJI) ||
00152                 (dwHotKeyID != IME_JHOTKEY_CLOSE_OPEN)) {
00153             dwReturn |= <a class="code" href="../../d4/d5/conimep_8h.html#a46">IPHK_HOTKEY</a>;
00154         }
00155     }
00156 
00157     <span class="comment">//</span>
00158     <span class="comment">// some 3.x application doesn't like to see</span>
00159     <span class="comment">// VK_PROCESSKEY.</span>
00160     <span class="comment">//</span>
00161     <span class="keywordflow">if</span> (dwReturn &amp; <a class="code" href="../../d4/d5/conimep_8h.html#a47">IPHK_PROCESSBYIME</a>) {
00162 
00163         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwImeCompat = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a34">ImmGetAppCompatFlags</a>(hIMC);
00164 
00165         <span class="keywordflow">if</span> (dwImeCompat &amp; IMECOMPAT_NOVKPROCESSKEY) {
00166 
00167             <span class="comment">// Korea 3.x application doesn't like to see dummy finalize VK_PROCESSKEY</span>
00168             <span class="comment">// and IME hot key.</span>
00169 
00170             <span class="keywordflow">if</span> ( PRIMARYLANGID(LANGIDFROMLCID(GetSystemDefaultLCID())) == LANG_KOREAN &amp;&amp;
00171                  ( (uVKey == VK_PROCESSKEY) || (dwReturn &amp; <a class="code" href="../../d4/d5/conimep_8h.html#a46">IPHK_HOTKEY</a>) ) ) {
00172                 <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>(hWnd, hIMC);
00173                 <span class="keywordflow">return</span> dwReturn;
00174             }
00175 
00176             <a class="code" href="../../d9/d0/immuser_8h.html#a49">ImmTranslateMessage</a>(hWnd, WM_KEYDOWN, VK_PROCESSKEY, lParam);
00177             dwReturn &amp;= ~<a class="code" href="../../d4/d5/conimep_8h.html#a47">IPHK_PROCESSBYIME</a>;
00178             dwReturn |= IPHK_SKIPTHISKEY;
00179         }
00180     }
00181     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>(hWnd, hIMC);
00182 
00183     <span class="keywordflow">return</span> dwReturn;
00184 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="ntuser/imm/conime.c::ImmSetActiveContext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImmSetActiveContext           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">309</a> of file <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html">w32/ntuser/imm/context.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/fareast_8c-source.html#l00238">_InitializeImmEntryTable()</a>.
<p>
<pre class="fragment"><div>00313 {
00314     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>    pClientImc;
00315     PINPUTCONTEXT pInputContext;
00316     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>       pImeDpi;
00317     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>         dwISC;
00318     HIMC          hSaveImc;
00319     HWND          hDefImeWnd;
00320     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>         dwOpenStatus = 0;
00321     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>         dwConversion = 0;
00322 <span class="preprocessor">#ifdef DEBUG</span>
00323 <span class="preprocessor"></span>    <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>          pWnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hWnd);
00324 
00325     <span class="keywordflow">if</span> (pWnd != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pWnd) != <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()) {
00326         RIPMSG1(RIP_WARNING, <span class="stringliteral">"hWnd (=%lx) is not of current thread."</span>, hWnd);
00327     }
00328 <span class="preprocessor">#endif</span>
00329 <span class="preprocessor"></span>
00330     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a126">IS_IME_ENABLED</a>()) {
00331         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00332     }
00333 
00334     dwISC = ISC_SHOWUIALL;
00335 
00336     pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hImc);
00337 
00338     <span class="keywordflow">if</span> (!fActivate) {
00339         <span class="keywordflow">if</span> (pClientImc != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00340             <a class="code" href="../../d4/d0/immcli_8h.html#a20">ClrICF</a>(pClientImc, IMCF_ACTIVE);
00341         <span class="keywordflow">goto</span> NotifySetActive;
00342     }
00343 
00344     <span class="keywordflow">if</span> (hImc == <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a>) {
00345         hSaveImc = <a class="code" href="../../d4/d0/immcli_8h.html#a72">ImmGetSaveContext</a>(hWnd, IGSC_DEFIMCFALLBACK);
00346         pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>(hSaveImc);
00347         <span class="keywordflow">if</span> (pInputContext != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00348             pInputContext-&gt;hWnd = <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a>;
00349             <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hSaveImc);
00350         }
00351         <span class="keywordflow">goto</span> NotifySetActive;
00352     }
00353 
00354     <span class="comment">/*</span>
00355 <span class="comment">     * Non-NULL input context, window handle have to be updated.</span>
00356 <span class="comment">     */</span>
00357     <span class="keywordflow">if</span> (pClientImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00358         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00359 
00360     pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>(hImc);
00361     <span class="keywordflow">if</span> (pInputContext == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00362         <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00363         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00364     }
00365 
00366     pInputContext-&gt;hWnd = <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a>;
00367     <a class="code" href="../../d4/d0/immcli_8h.html#a19">SetICF</a>(pClientImc, IMCF_ACTIVE);
00368 
00369 <span class="preprocessor">#ifdef LATER</span>
00370 <span class="preprocessor"></span>    <span class="comment">// Do uNumLangVKey checking later</span>
00371 <span class="preprocessor">#endif</span>
00372 <span class="preprocessor"></span>
00373     <span class="keywordflow">if</span> (pInputContext-&gt;fdw31Compat &amp; F31COMPAT_MCWHIDDEN)
00374         dwISC = ISC_SHOWUIALL - ISC_SHOWUICOMPOSITIONWINDOW;
00375 
00376     dwOpenStatus = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)pInputContext-&gt;fOpen;
00377     dwConversion = pInputContext-&gt;fdwConversion;
00378     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
00379 
00380 NotifySetActive:
00381 
00382     pImeDpi = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>(<a class="code" href="../../d3/d8/client_8c.html#a154">GetKeyboardLayout</a>(0));
00383     <span class="keywordflow">if</span> (pImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00384         (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o24">ImeSetActiveContext</a>)(hImc, fActivate);
00385         <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00386     }
00387 
00388     <span class="comment">/*</span>
00389 <span class="comment">     * Notify UI</span>
00390 <span class="comment">     */</span>
00391     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hWnd)) {
00392         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hWnd, WM_IME_SETCONTEXT, fActivate, dwISC);
00393 
00394         <span class="comment">/*</span>
00395 <span class="comment">         * send notify to shell / keyboard driver</span>
00396 <span class="comment">         */</span>
00397         <span class="keywordflow">if</span> ( fActivate )
00398             <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a400">NtUserNotifyIMEStatus</a>( hWnd, dwOpenStatus, dwConversion );
00399     }
00400     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!fActivate) {
00401         <span class="comment">/*</span>
00402 <span class="comment">         * Because hWnd is not there (maybe destroyed), we send</span>
00403 <span class="comment">         * WM_IME_SETCONTEXT to the default IME window.</span>
00404 <span class="comment">         */</span>
00405         <span class="keywordflow">if</span> ((hDefImeWnd = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a4">ImmGetDefaultIMEWnd</a>(NULL)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00406             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hDefImeWnd, WM_IME_SETCONTEXT, fActivate, dwISC);
00407         }
00408         <span class="keywordflow">else</span> {
00409             RIPMSG0(RIP_WARNING,
00410                   <span class="stringliteral">"ImmSetActiveContext: can't send WM_IME_SETCONTEXT(FALSE)."</span>);
00411         }
00412     }
00413 <span class="preprocessor">#ifdef DEBUG</span>
00414 <span class="preprocessor"></span>    <span class="keywordflow">else</span> {
00415         RIPMSG0(RIP_WARNING,
00416               <span class="stringliteral">"ImmSetActiveContext: can't send WM_IME_SETCONTEXT(TRUE)."</span>);
00417     }
00418 <span class="preprocessor">#endif</span>
00419 <span class="preprocessor"></span>
00420 <span class="preprocessor">#ifdef LATER</span>
00421 <span class="preprocessor"></span>    <span class="comment">// Implements ProcessIMCEvent() later.</span>
00422 <span class="preprocessor">#endif</span>
00423 <span class="preprocessor"></span>
00424     <span class="keywordflow">if</span> (pClientImc != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00425         <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00426 
00427     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00428 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="ntuser/imm/conime.c::ImmSetActiveContextConsoleIME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImmSetActiveContextConsoleIME           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00188">188</a> of file <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html">ntuser/imm/conime.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, and <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00950">ConsoleKillFocus()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00903">ConsoleSetFocus()</a>, and <a class="el" href="../../d1/d5/consubs_8c-source.html#l00670">SetNLSMode()</a>.
<p>
<pre class="fragment"><div>00195                    :
00196 
00197     Set <span class="keyword">this</span> context as active one.
00198 
00199 Arguments:
00200 
00201     <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a>         - <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> get focus window
00202     fFlag        - get focus or kill focus
00203 
00204 Return Value:
00205 
00206 --*/
00207 
00208 {
00209     HIMC hImc;
00210 
00211     hImc = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>(hWnd) ;
00212     <span class="keywordflow">if</span> (hImc == <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a>) {
00213         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00214     }
00215     <span class="keywordflow">return</span>(<a class="code" href="../../d9/d0/immuser_8h.html#a36">ImmSetActiveContext</a>(hWnd, hImc, fFlag)) ;
00216 
00217 }

</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:13 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: iop.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>iop.h</h1><a href="../../d0/d6/iop_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*++ BUILD Version: 0002</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1989  Microsoft Corporation</span>
00004 <span class="comment"></span>
00005 <span class="comment">Module Name:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    iop.h</span>
00008 <span class="comment"></span>
00009 <span class="comment">Abstract:</span>
00010 <span class="comment"></span>
00011 <span class="comment">    This module contains the private structure definitions and APIs used by</span>
00012 <span class="comment">    the NT I/O system.</span>
00013 <span class="comment"></span>
00014 <span class="comment">Author:</span>
00015 <span class="comment"></span>
00016 <span class="comment">    Darryl E. Havens (darrylh) 17-Apr-1989</span>
00017 <span class="comment"></span>
00018 <span class="comment"></span>
00019 <span class="comment">Revision History:</span>
00020 <span class="comment"></span>
00021 <span class="comment"></span>
00022 <span class="comment">--*/</span>
00023 
00024 <span class="preprocessor">#ifndef _IOP_</span>
00025 <span class="preprocessor"></span><span class="preprocessor">#define _IOP_</span>
00026 <span class="preprocessor"></span>
00027 <span class="preprocessor">#ifndef FAR</span>
00028 <span class="preprocessor"></span><span class="preprocessor">#define FAR</span>
00029 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00030 <span class="preprocessor"></span>
00031 <span class="preprocessor">#include "<a class="code" href="../../d9/d8/ntos_8h.html">ntos.h</a>"</span>
00032 <span class="preprocessor">#include "ntdddisk.h"</span>
00033 <span class="preprocessor">#include "ntddscsi.h"</span>
00034 <span class="preprocessor">#include "mountmgr.h"</span>
00035 <span class="preprocessor">#include "ntiodump.h"</span>
00036 <span class="preprocessor">#include "ntiolog.h"</span>
00037 <span class="preprocessor">#include "ntiologc.h"</span>
00038 <span class="preprocessor">#include "ntseapi.h"</span>
00039 <span class="preprocessor">#include "zwapi.h"</span>
00040 <span class="preprocessor">#include "stdio.h"</span>
00041 <span class="preprocessor">#include "stdlib.h"</span>
00042 <span class="preprocessor">#include "string.h"</span>
00043 <span class="preprocessor">#include "<a class="code" href="../../d1/d8/fsrtl_8h.html">fsrtl.h</a>"</span>
00044 <span class="preprocessor">#include "<a class="code" href="../../d9/d0/pnpiop_8h.html">pnpiop.h</a>"</span>
00045 <span class="preprocessor">#include "<a class="code" href="../../d7/d6/ioverifier_8h.html">ioverifier.h</a>"</span>
00046 
00047 <span class="preprocessor">#ifdef POOL_TAGGING</span>
00048 <span class="preprocessor"></span><span class="preprocessor">#undef ExAllocatePool</span>
00049 <span class="preprocessor"></span><span class="preprocessor">#define ExAllocatePool(a,b) ExAllocatePoolWithTag(a,b,'  oI')</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#undef ExAllocatePoolWithQuota</span>
00051 <span class="preprocessor"></span><span class="preprocessor">#define ExAllocatePoolWithQuota(a,b) ExAllocatePoolWithQuotaTag(a,b,'  oI')</span>
00052 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00053 <span class="preprocessor"></span>
00054 
00055 <span class="preprocessor">#include "safeboot.h"</span>
00056 
<a name="l00057"></a><a class="code" href="../../d0/d6/iop_8h.html#a23">00057</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d0/d6/iop_8h.html#a23">BreakDiskByteOffset</a>;
<a name="l00058"></a><a class="code" href="../../d0/d6/iop_8h.html#a24">00058</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d0/d6/iop_8h.html#a24">BreakPfn</a>;
00059 
00060 <span class="comment">//</span>
00061 <span class="comment">// Define Information fields values for the return value from popups when a</span>
00062 <span class="comment">// volume mount is in progress but failed.</span>
00063 <span class="comment">//</span>
00064 
<a name="l00065"></a><a class="code" href="../../d0/d6/iop_8h.html#a0">00065</a> <span class="preprocessor">#define IOP_ABORT                       1</span>
00066 <span class="preprocessor"></span>
00067 <span class="comment">//</span>
00068 <span class="comment">// Define transfer types for process counters.</span>
00069 <span class="comment">//</span>
00070 
<a name="l00071"></a><a class="code" href="../../d0/d6/iop_8h.html#a240">00071</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d0/d6/iop_8h.html#a240">_TRANSFER_TYPE</a> {
00072     <a class="code" href="../../d0/d6/iop_8h.html#a240a138">ReadTransfer</a>,
00073     <a class="code" href="../../d0/d6/iop_8h.html#a240a139">WriteTransfer</a>,
00074     <a class="code" href="../../d0/d6/iop_8h.html#a240a140">OtherTransfer</a>
00075 } <a class="code" href="../../d0/d6/iop_8h.html#a25">TRANSFER_TYPE</a>, *<a class="code" href="../../d0/d6/iop_8h.html#a26">PTRANSFER_TYPE</a>;
00076 
00077 <span class="comment">//</span>
00078 <span class="comment">// Define the maximum amount of memory that can be allocated for all</span>
00079 <span class="comment">// outstanding error log packets.</span>
00080 <span class="comment">//</span>
00081 
<a name="l00082"></a><a class="code" href="../../d0/d6/iop_8h.html#a1">00082</a> <span class="preprocessor">#define IOP_MAXIMUM_LOG_ALLOCATION PAGE_SIZE</span>
00083 <span class="preprocessor"></span>
00084 <span class="comment">//</span>
00085 <span class="comment">// Define an error log entry.</span>
00086 <span class="comment">//</span>
00087 
<a name="l00088"></a><a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html">00088</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html">_ERROR_LOG_ENTRY</a> {
<a name="l00089"></a><a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html#o0">00089</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html#o0">Type</a>;
<a name="l00090"></a><a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html#o1">00090</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l00091"></a><a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html#o2">00091</a>     LIST_ENTRY <a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html#o2">ListEntry</a>;
<a name="l00092"></a><a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html#o3">00092</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> <a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html#o3">DeviceObject</a>;
<a name="l00093"></a><a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html#o4">00093</a>     <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> <a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html#o4">DriverObject</a>;
<a name="l00094"></a><a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html#o5">00094</a>     LARGE_INTEGER <a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html#o5">TimeStamp</a>;
00095 } <a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html">ERROR_LOG_ENTRY</a>, *<a class="code" href="../../d8/d5/struct__ERROR__LOG__ENTRY.html">PERROR_LOG_ENTRY</a>;
00096 
00097 <span class="comment">//</span>
00098 <span class="comment">//  Define both the global IOP_HARD_ERROR_QUEUE and IOP_HARD_ERROR_PACKET</span>
00099 <span class="comment">//  structures.   Also set the maximum number of outstanding hard error</span>
00100 <span class="comment">//  packets allowed.</span>
00101 <span class="comment">//</span>
00102 
<a name="l00103"></a><a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html">00103</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html">_IOP_HARD_ERROR_QUEUE</a> {
<a name="l00104"></a><a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html#o0">00104</a>     <a class="code" href="../../d7/d9/struct__WORK__QUEUE__ITEM.html">WORK_QUEUE_ITEM</a> <a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html#o0">ExWorkItem</a>;
<a name="l00105"></a><a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html#o1">00105</a>     LIST_ENTRY <a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html#o1">WorkQueue</a>;
<a name="l00106"></a><a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html#o2">00106</a>     KSPIN_LOCK <a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html#o2">WorkQueueSpinLock</a>;
<a name="l00107"></a><a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html#o3">00107</a>     <a class="code" href="../../d8/d7/struct__KSEMAPHORE.html">KSEMAPHORE</a> <a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html#o3">WorkQueueSemaphore</a>;
<a name="l00108"></a><a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html#o4">00108</a>     BOOLEAN <a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html#o4">ThreadStarted</a>;
<a name="l00109"></a><a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html#o5">00109</a>     ULONG   <a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html#o5">NumPendingApcPopups</a>;
00110 } <a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html">IOP_HARD_ERROR_QUEUE</a>, *<a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html">PIOP_HARD_ERROR_QUEUE</a>;
00111 
<a name="l00112"></a><a class="code" href="../../d7/d0/struct__IOP__HARD__ERROR__PACKET.html">00112</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d7/d0/struct__IOP__HARD__ERROR__PACKET.html">_IOP_HARD_ERROR_PACKET</a> {
<a name="l00113"></a><a class="code" href="../../d7/d0/struct__IOP__HARD__ERROR__PACKET.html#o0">00113</a>     LIST_ENTRY <a class="code" href="../../d7/d0/struct__IOP__HARD__ERROR__PACKET.html#o0">WorkQueueLinks</a>;
<a name="l00114"></a><a class="code" href="../../d7/d0/struct__IOP__HARD__ERROR__PACKET.html#o1">00114</a>     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d7/d0/struct__IOP__HARD__ERROR__PACKET.html#o1">ErrorStatus</a>;
<a name="l00115"></a><a class="code" href="../../d7/d0/struct__IOP__HARD__ERROR__PACKET.html#o2">00115</a>     UNICODE_STRING <a class="code" href="../../d7/d0/struct__IOP__HARD__ERROR__PACKET.html#o2">String</a>;
00116 } <a class="code" href="../../d7/d0/struct__IOP__HARD__ERROR__PACKET.html">IOP_HARD_ERROR_PACKET</a>, *<a class="code" href="../../d7/d0/struct__IOP__HARD__ERROR__PACKET.html">PIOP_HARD_ERROR_PACKET</a>;
00117 
<a name="l00118"></a><a class="code" href="../../d5/d0/struct__IOP__APC__HARD__ERROR__PACKET.html">00118</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d5/d0/struct__IOP__APC__HARD__ERROR__PACKET.html">_IOP_APC_HARD_ERROR_PACKET</a> {
<a name="l00119"></a><a class="code" href="../../d5/d0/struct__IOP__APC__HARD__ERROR__PACKET.html#o0">00119</a>     <a class="code" href="../../d7/d9/struct__WORK__QUEUE__ITEM.html">WORK_QUEUE_ITEM</a> <a class="code" href="../../d5/d0/struct__IOP__APC__HARD__ERROR__PACKET.html#o0">Item</a>;
<a name="l00120"></a><a class="code" href="../../d5/d0/struct__IOP__APC__HARD__ERROR__PACKET.html#o1">00120</a>     <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>;
<a name="l00121"></a><a class="code" href="../../d5/d0/struct__IOP__APC__HARD__ERROR__PACKET.html#o2">00121</a>     <a class="code" href="../../d7/d7/struct__VPB.html">PVPB</a> <a class="code" href="../../d5/d0/struct__IOP__APC__HARD__ERROR__PACKET.html#o2">Vpb</a>;
<a name="l00122"></a><a class="code" href="../../d5/d0/struct__IOP__APC__HARD__ERROR__PACKET.html#o3">00122</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> <a class="code" href="../../d5/d0/struct__IOP__APC__HARD__ERROR__PACKET.html#o3">RealDeviceObject</a>;
00123 } <a class="code" href="../../d5/d0/struct__IOP__APC__HARD__ERROR__PACKET.html">IOP_APC_HARD_ERROR_PACKET</a>, *<a class="code" href="../../d5/d0/struct__IOP__APC__HARD__ERROR__PACKET.html">PIOP_APC_HARD_ERROR_PACKET</a>;
00124 
00125 <span class="keyword">typedef</span>
00126 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00127 (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a> *PIO_CALL_DRIVER) (
00128     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
00129     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>
<a name="l00130"></a><a class="code" href="../../d0/d6/iop_8h.html#a35">00130</a>     );
00131 
00132 <span class="keyword">typedef</span>
00133 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00134 (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a> *PIO_COMPLETE_REQUEST) (
00135     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> <a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>,
00136     IN CCHAR <a class="code" href="../../d0/d6/iop_8h.html#a36">PriorityBoost</a>
<a name="l00137"></a><a class="code" href="../../d0/d6/iop_8h.html#a36">00137</a>     );
00138 
00139 <span class="keyword">typedef</span>
00140 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00141"></a><a class="code" href="../../d0/d6/iop_8h.html#a37">00141</a> (*PIO_FREE_IRP) (
00142     IN <span class="keyword">struct </span><a class="code" href="../../d0/d2/struct__IRP.html">_IRP</a> *<a class="code" href="../../d0/d6/iop_8h.html#a35">Irp</a>
00143     );
00144 
00145 <span class="keyword">typedef</span>
00146 <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>
<a name="l00147"></a><a class="code" href="../../d0/d6/iop_8h.html#a38">00147</a> (*PIO_ALLOCATE_IRP) (
00148     IN CCHAR   StackSize,
00149     IN BOOLEAN ChargeQuota
00150     );
00151 
<a name="l00152"></a><a class="code" href="../../d0/d6/iop_8h.html#a39">00152</a> <span class="keyword">extern</span> <a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html">IOP_HARD_ERROR_QUEUE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a25">IopHardError</a>;
<a name="l00153"></a><a class="code" href="../../d0/d6/iop_8h.html#a40">00153</a> <span class="keyword">extern</span> <a class="code" href="../../d0/d6/iop_8h.html#a32">PIOP_HARD_ERROR_PACKET</a> <a class="code" href="../../d3/d5/iodata_8c.html#a26">IopCurrentHardError</a>;
00154 
<a name="l00155"></a><a class="code" href="../../d0/d6/iop_8h.html#a2">00155</a> <span class="preprocessor">#define IOP_MAXIMUM_OUTSTANDING_HARD_ERRORS 25</span>
00156 <span class="preprocessor"></span>
<a name="l00157"></a><a class="code" href="../../d5/d9/struct__IO__WORKITEM.html">00157</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d5/d9/struct__IO__WORKITEM.html">_IO_WORKITEM</a> {
<a name="l00158"></a><a class="code" href="../../d5/d9/struct__IO__WORKITEM.html#o0">00158</a>     <a class="code" href="../../d7/d9/struct__WORK__QUEUE__ITEM.html">WORK_QUEUE_ITEM</a> <a class="code" href="../../d5/d9/struct__IO__WORKITEM.html#o0">WorkItem</a>;
<a name="l00159"></a><a class="code" href="../../d5/d9/struct__IO__WORKITEM.html#o1">00159</a>     <a class="code" href="../../d0/d5/io_8h.html#a398">PIO_WORKITEM_ROUTINE</a> <a class="code" href="../../d5/d9/struct__IO__WORKITEM.html#o1">Routine</a>;
<a name="l00160"></a><a class="code" href="../../d5/d9/struct__IO__WORKITEM.html#o2">00160</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject;
<a name="l00161"></a><a class="code" href="../../d5/d9/struct__IO__WORKITEM.html#o3">00161</a>     PVOID <a class="code" href="../../d5/d9/struct__IO__WORKITEM.html#o3">Context</a>;
00162 <span class="preprocessor">#if DBG</span>
00163 <span class="preprocessor"></span>    ULONG <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
00164 <span class="preprocessor">#endif</span>
00165 <span class="preprocessor"></span>} <a class="code" href="../../d5/d9/struct__IO__WORKITEM.html">IO_WORKITEM</a>;
00166 
00167 <span class="comment">//</span>
00168 <span class="comment">// Define the global data for the error logger and I/O system.</span>
00169 <span class="comment">//</span>
00170 
<a name="l00171"></a><a class="code" href="../../d0/d6/iop_8h.html#a42">00171</a> <span class="keyword">extern</span> <a class="code" href="../../d7/d9/struct__WORK__QUEUE__ITEM.html">WORK_QUEUE_ITEM</a> <a class="code" href="../../d7/d7/errorlog_8c.html#a3">IopErrorLogWorkItem</a>;
<a name="l00172"></a><a class="code" href="../../d0/d6/iop_8h.html#a43">00172</a> <span class="keyword">extern</span> BOOLEAN <a class="code" href="../../d7/d7/errorlog_8c.html#a6">IopErrorLogPortPending</a>;
<a name="l00173"></a><a class="code" href="../../d0/d6/iop_8h.html#a44">00173</a> <span class="keyword">extern</span> BOOLEAN <a class="code" href="../../d7/d7/errorlog_8c.html#a7">IopErrorLogDisabledThisBoot</a>;
<a name="l00174"></a><a class="code" href="../../d0/d6/iop_8h.html#a45">00174</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d4/d4/alpha_2splocks_8c.html#a6">IopErrorLogLock</a>;
<a name="l00175"></a><a class="code" href="../../d0/d6/iop_8h.html#a46">00175</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a21">IopErrorLogListHead</a>;
<a name="l00176"></a><a class="code" href="../../d0/d6/iop_8h.html#a47">00176</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d3/d5/iodata_8c.html#a22">IopErrorLogAllocation</a>;
<a name="l00177"></a><a class="code" href="../../d0/d6/iop_8h.html#a48">00177</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d4/d4/alpha_2splocks_8c.html#a7">IopErrorLogAllocationLock</a>;
<a name="l00178"></a><a class="code" href="../../d0/d6/iop_8h.html#a49">00178</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d3/d5/iodata_8c.html#a1">IopCancelSpinLock</a>;
<a name="l00179"></a><a class="code" href="../../d0/d6/iop_8h.html#a50">00179</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d3/d5/iodata_8c.html#a2">IopVpbSpinLock</a>;
<a name="l00180"></a><a class="code" href="../../d0/d6/iop_8h.html#a51">00180</a> <span class="keyword">extern</span> GENERIC_MAPPING <a class="code" href="../../d9/d5/ioinit_8c.html#a11">IopFileMapping</a>;
<a name="l00181"></a><a class="code" href="../../d0/d6/iop_8h.html#a52">00181</a> <span class="keyword">extern</span> GENERIC_MAPPING <a class="code" href="../../d9/d5/ioinit_8c.html#a12">IopCompletionMapping</a>;
00182 
00183 <span class="comment">//</span>
00184 <span class="comment">// Define a dummy file object for use on stack for fast open operations.</span>
00185 <span class="comment">//</span>
00186 
<a name="l00187"></a><a class="code" href="../../d0/d1/struct__DUMMY__FILE__OBJECT.html">00187</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d0/d1/struct__DUMMY__FILE__OBJECT.html">_DUMMY_FILE_OBJECT</a> {
<a name="l00188"></a><a class="code" href="../../d0/d1/struct__DUMMY__FILE__OBJECT.html#o0">00188</a>     <a class="code" href="../../d4/d5/struct__OBJECT__HEADER.html">OBJECT_HEADER</a> <a class="code" href="../../d0/d1/struct__DUMMY__FILE__OBJECT.html#o0">ObjectHeader</a>;
<a name="l00189"></a><a class="code" href="../../d0/d1/struct__DUMMY__FILE__OBJECT.html#o1">00189</a>     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> <a class="code" href="../../d0/d1/struct__DUMMY__FILE__OBJECT.html#o1">FileObjectBody</a>[ <span class="keyword">sizeof</span>( <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">FILE_OBJECT</a> ) ];
00190 } <a class="code" href="../../d0/d1/struct__DUMMY__FILE__OBJECT.html">DUMMY_FILE_OBJECT</a>, *<a class="code" href="../../d0/d1/struct__DUMMY__FILE__OBJECT.html">PDUMMY_FILE_OBJECT</a>;
00191 
00192 <span class="comment">//</span>
00193 <span class="comment">// Define the structures private to the I/O system.</span>
00194 <span class="comment">//</span>
00195 
<a name="l00196"></a><a class="code" href="../../d0/d6/iop_8h.html#a3">00196</a> <span class="preprocessor">#define OPEN_PACKET_PATTERN  0xbeaa0251</span>
00197 <span class="preprocessor"></span>
00198 <span class="comment">//</span>
00199 <span class="comment">// Define an Open Packet (OP).  An OP is used to communicate information</span>
00200 <span class="comment">// between the NtCreateFile service executing in the context of the caller</span>
00201 <span class="comment">// and the device object parse routine.  It is the parse routine who actually</span>
00202 <span class="comment">// creates the file object for the file.</span>
00203 <span class="comment">//</span>
00204 
<a name="l00205"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html">00205</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html">_OPEN_PACKET</a> {
<a name="l00206"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o0">00206</a>     CSHORT <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o0">Type</a>;
<a name="l00207"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o1">00207</a>     CSHORT <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l00208"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o2">00208</a>     <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o2">FileObject</a>;
<a name="l00209"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o3">00209</a>     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o3">FinalStatus</a>;
<a name="l00210"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o4">00210</a>     ULONG_PTR <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o4">Information</a>;
<a name="l00211"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o5">00211</a>     ULONG <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o5">ParseCheck</a>;
<a name="l00212"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o6">00212</a>     <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o6">RelatedFileObject</a>;
00213 
00214     <span class="comment">//</span>
00215     <span class="comment">// The following are the open-specific parameters.  Notice that the desired</span>
00216     <span class="comment">// access field is passed through to the parse routine via the object</span>
00217     <span class="comment">// management architecture, so it does not need to be repeated here.  Also</span>
00218     <span class="comment">// note that the same is true for the file name.</span>
00219     <span class="comment">//</span>
00220 
<a name="l00221"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o7">00221</a>     LARGE_INTEGER <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o7">AllocationSize</a>;
<a name="l00222"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o8">00222</a>     ULONG <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o8">CreateOptions</a>;
<a name="l00223"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o9">00223</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o9">FileAttributes</a>;
<a name="l00224"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o10">00224</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o10">ShareAccess</a>;
<a name="l00225"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o11">00225</a>     PVOID <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o11">EaBuffer</a>;
<a name="l00226"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o12">00226</a>     ULONG <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o12">EaLength</a>;
<a name="l00227"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o13">00227</a>     ULONG <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o13">Options</a>;
<a name="l00228"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o14">00228</a>     ULONG <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o14">Disposition</a>;
00229 
00230     <span class="comment">//</span>
00231     <span class="comment">// The following is used when performing a fast query during open to get</span>
00232     <span class="comment">// back the file attributes for a file.</span>
00233     <span class="comment">//</span>
00234 
<a name="l00235"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o15">00235</a>     PFILE_BASIC_INFORMATION <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o15">BasicInformation</a>;
00236 
00237     <span class="comment">//</span>
00238     <span class="comment">// The following is used when performing a fast network query during open</span>
00239     <span class="comment">// to get back the network file attributes for a file.</span>
00240     <span class="comment">//</span>
00241 
<a name="l00242"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o16">00242</a>     PFILE_NETWORK_OPEN_INFORMATION <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o16">NetworkInformation</a>;
00243 
00244     <span class="comment">//</span>
00245     <span class="comment">// The type of file to create.</span>
00246     <span class="comment">//</span>
00247 
<a name="l00248"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o17">00248</a>     <a class="code" href="../../d0/d5/io_8h.html#a275">CREATE_FILE_TYPE</a> <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o17">CreateFileType</a>;
00249 
00250     <span class="comment">//</span>
00251     <span class="comment">// The following pointer provides a way of passing the parameters</span>
00252     <span class="comment">// specific to the file type of the file being created to the parse</span>
00253     <span class="comment">// routine.</span>
00254     <span class="comment">//</span>
00255 
<a name="l00256"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o18">00256</a>     PVOID <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o18">ExtraCreateParameters</a>;
00257 
00258     <span class="comment">//</span>
00259     <span class="comment">// The following is used to indicate that an open of a device has been</span>
00260     <span class="comment">// performed and the access check for the device has already been done,</span>
00261     <span class="comment">// but because of a reparse, the I/O system has been called again for</span>
00262     <span class="comment">// the same device.  Since the access check has already been made, the</span>
00263     <span class="comment">// state cannot handle being called again (access was already granted)</span>
00264     <span class="comment">// and it need not anyway since the check has already been made.</span>
00265     <span class="comment">//</span>
00266 
<a name="l00267"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o19">00267</a>     BOOLEAN <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o19">Override</a>;
00268 
00269     <span class="comment">//</span>
00270     <span class="comment">// The following is used to indicate that a file is being opened for the</span>
00271     <span class="comment">// sole purpose of querying its attributes.  This causes a considerable</span>
00272     <span class="comment">// number of shortcuts to be taken in the parse, query, and close paths.</span>
00273     <span class="comment">//</span>
00274 
<a name="l00275"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o20">00275</a>     BOOLEAN <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o20">QueryOnly</a>;
00276 
00277     <span class="comment">//</span>
00278     <span class="comment">// The following is used to indicate that a file is being opened for the</span>
00279     <span class="comment">// sole purpose of deleting it.  This causes a considerable number of</span>
00280     <span class="comment">// shortcurs to be taken in the parse and close paths.</span>
00281     <span class="comment">//</span>
00282 
<a name="l00283"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o21">00283</a>     BOOLEAN <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o21">DeleteOnly</a>;
00284 
00285     <span class="comment">//</span>
00286     <span class="comment">// The following is used to indicate that a file being opened for a query</span>
00287     <span class="comment">// only is being opened to query its network attributes rather than just</span>
00288     <span class="comment">// its FAT file attributes.</span>
00289     <span class="comment">//</span>
00290 
<a name="l00291"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o22">00291</a>     BOOLEAN <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o22">FullAttributes</a>;
00292 
00293     <span class="comment">//</span>
00294     <span class="comment">// The following pointer is used when a fast open operation for a fast</span>
00295     <span class="comment">// delete or fast query attributes call is being made rather than a</span>
00296     <span class="comment">// general file open.  The dummy file object is actually stored on the</span>
00297     <span class="comment">// the caller's stack rather than allocated pool to speed things up.</span>
00298     <span class="comment">//</span>
00299 
<a name="l00300"></a><a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o23">00300</a>     <a class="code" href="../../d0/d6/iop_8h.html#a54">PDUMMY_FILE_OBJECT</a> <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html#o23">LocalFileObject</a>;
00301 
00302 } <a class="code" href="../../d3/d7/struct__OPEN__PACKET.html">OPEN_PACKET</a>, *<a class="code" href="../../d3/d7/struct__OPEN__PACKET.html">POPEN_PACKET</a>;
00303 
00304 <span class="comment">//</span>
00305 <span class="comment">// Define a Load Packet (LDP).  An LDP is used to communicate load and unload</span>
00306 <span class="comment">// driver information between the appropriate system services and the routine</span>
00307 <span class="comment">// that actually performs the work.  This is implemented using a packet</span>
00308 <span class="comment">// because various drivers need to be initialized in the context of THE</span>
00309 <span class="comment">// system process because they create threads within its context which open</span>
00310 <span class="comment">// handles to objects that henceforth are only valid in the context of that</span>
00311 <span class="comment">// process.</span>
00312 <span class="comment">//</span>
00313 
<a name="l00314"></a><a class="code" href="../../d0/d2/struct__LOAD__PACKET.html">00314</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d0/d2/struct__LOAD__PACKET.html">_LOAD_PACKET</a> {
<a name="l00315"></a><a class="code" href="../../d0/d2/struct__LOAD__PACKET.html#o0">00315</a>     <a class="code" href="../../d7/d9/struct__WORK__QUEUE__ITEM.html">WORK_QUEUE_ITEM</a> <a class="code" href="../../d0/d2/struct__LOAD__PACKET.html#o0">WorkQueueItem</a>;
<a name="l00316"></a><a class="code" href="../../d0/d2/struct__LOAD__PACKET.html#o1">00316</a>     <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d0/d2/struct__LOAD__PACKET.html#o1">Event</a>;
<a name="l00317"></a><a class="code" href="../../d0/d2/struct__LOAD__PACKET.html#o2">00317</a>     <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> <a class="code" href="../../d0/d2/struct__LOAD__PACKET.html#o2">DriverObject</a>;
<a name="l00318"></a><a class="code" href="../../d0/d2/struct__LOAD__PACKET.html#o3">00318</a>     PUNICODE_STRING <a class="code" href="../../d0/d2/struct__LOAD__PACKET.html#o3">DriverServiceName</a>;
<a name="l00319"></a><a class="code" href="../../d0/d2/struct__LOAD__PACKET.html#o4">00319</a>     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d0/d2/struct__LOAD__PACKET.html#o4">FinalStatus</a>;
00320 } <a class="code" href="../../d0/d2/struct__LOAD__PACKET.html">LOAD_PACKET</a>, *<a class="code" href="../../d0/d2/struct__LOAD__PACKET.html">PLOAD_PACKET</a>;
00321 
00322 <span class="comment">//</span>
00323 <span class="comment">// Define a Link Tracking Packet.  A link tracking packet is used to open the</span>
00324 <span class="comment">// user-mode link tracking service's LPC port so that information about objects</span>
00325 <span class="comment">// which have been moved can be tracked.</span>
00326 <span class="comment">//</span>
00327 
<a name="l00328"></a><a class="code" href="../../d8/d1/struct__LINK__TRACKING__PACKET.html">00328</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d1/struct__LINK__TRACKING__PACKET.html">_LINK_TRACKING_PACKET</a> {
<a name="l00329"></a><a class="code" href="../../d8/d1/struct__LINK__TRACKING__PACKET.html#o0">00329</a>     <a class="code" href="../../d7/d9/struct__WORK__QUEUE__ITEM.html">WORK_QUEUE_ITEM</a> <a class="code" href="../../d8/d1/struct__LINK__TRACKING__PACKET.html#o0">WorkQueueItem</a>;
<a name="l00330"></a><a class="code" href="../../d8/d1/struct__LINK__TRACKING__PACKET.html#o1">00330</a>     <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d8/d1/struct__LINK__TRACKING__PACKET.html#o1">Event</a>;
<a name="l00331"></a><a class="code" href="../../d8/d1/struct__LINK__TRACKING__PACKET.html#o2">00331</a>     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d8/d1/struct__LINK__TRACKING__PACKET.html#o2">FinalStatus</a>;
00332 } <a class="code" href="../../d8/d1/struct__LINK__TRACKING__PACKET.html">LINK_TRACKING_PACKET</a>, *<a class="code" href="../../d8/d1/struct__LINK__TRACKING__PACKET.html">PLINK_TRACKING_PACKET</a>;
00333 
00334 <span class="comment">//</span>
00335 <span class="comment">// Define the type for entries placed on the driver reinitialization queue.</span>
00336 <span class="comment">// These entries are entered onto the tail when the driver requests that</span>
00337 <span class="comment">// it be reinitialized, and removed from the head by the code that actually</span>
00338 <span class="comment">// performs the reinitialization.</span>
00339 <span class="comment">//</span>
00340 
<a name="l00341"></a><a class="code" href="../../d5/d3/struct__REINIT__PACKET.html">00341</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d5/d3/struct__REINIT__PACKET.html">_REINIT_PACKET</a> {
<a name="l00342"></a><a class="code" href="../../d5/d3/struct__REINIT__PACKET.html#o0">00342</a>     LIST_ENTRY <a class="code" href="../../d5/d3/struct__REINIT__PACKET.html#o0">ListEntry</a>;
<a name="l00343"></a><a class="code" href="../../d5/d3/struct__REINIT__PACKET.html#o1">00343</a>     <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> <a class="code" href="../../d5/d3/struct__REINIT__PACKET.html#o1">DriverObject</a>;
<a name="l00344"></a><a class="code" href="../../d5/d3/struct__REINIT__PACKET.html#o2">00344</a>     <a class="code" href="../../d0/d5/io_8h.html#a285">PDRIVER_REINITIALIZE</a> <a class="code" href="../../d5/d3/struct__REINIT__PACKET.html#o2">DriverReinitializationRoutine</a>;
<a name="l00345"></a><a class="code" href="../../d5/d3/struct__REINIT__PACKET.html#o3">00345</a>     PVOID <a class="code" href="../../d5/d3/struct__REINIT__PACKET.html#o3">Context</a>;
00346 } <a class="code" href="../../d5/d3/struct__REINIT__PACKET.html">REINIT_PACKET</a>, *<a class="code" href="../../d5/d3/struct__REINIT__PACKET.html">PREINIT_PACKET</a>;
00347 
00348 <span class="comment">//</span>
00349 <span class="comment">// Define the type for entries placed on the driver shutdown notification queue.</span>
00350 <span class="comment">// These entries represent those drivers that would like to be notified that the</span>
00351 <span class="comment">// system is begin shutdown before it actually goes down.</span>
00352 <span class="comment">//</span>
00353 
<a name="l00354"></a><a class="code" href="../../d2/d3/struct__SHUTDOWN__PACKET.html">00354</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d2/d3/struct__SHUTDOWN__PACKET.html">_SHUTDOWN_PACKET</a> {
<a name="l00355"></a><a class="code" href="../../d2/d3/struct__SHUTDOWN__PACKET.html#o0">00355</a>     LIST_ENTRY <a class="code" href="../../d2/d3/struct__SHUTDOWN__PACKET.html#o0">ListEntry</a>;
<a name="l00356"></a><a class="code" href="../../d2/d3/struct__SHUTDOWN__PACKET.html#o1">00356</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject;
00357 } <a class="code" href="../../d2/d3/struct__SHUTDOWN__PACKET.html">SHUTDOWN_PACKET</a>, *<a class="code" href="../../d2/d3/struct__SHUTDOWN__PACKET.html">PSHUTDOWN_PACKET</a>;
00358 
00359 <span class="comment">//</span>
00360 <span class="comment">// Define the type for entries placed on the file system registration change</span>
00361 <span class="comment">// notification queue.</span>
00362 <span class="comment">//</span>
00363 
<a name="l00364"></a><a class="code" href="../../d8/d3/struct__NOTIFICATION__PACKET.html">00364</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d3/struct__NOTIFICATION__PACKET.html">_NOTIFICATION_PACKET</a> {
<a name="l00365"></a><a class="code" href="../../d8/d3/struct__NOTIFICATION__PACKET.html#o0">00365</a>     LIST_ENTRY <a class="code" href="../../d8/d3/struct__NOTIFICATION__PACKET.html#o0">ListEntry</a>;
<a name="l00366"></a><a class="code" href="../../d8/d3/struct__NOTIFICATION__PACKET.html#o1">00366</a>     <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> <a class="code" href="../../d8/d3/struct__NOTIFICATION__PACKET.html#o1">DriverObject</a>;
<a name="l00367"></a><a class="code" href="../../d8/d3/struct__NOTIFICATION__PACKET.html#o2">00367</a>     <a class="code" href="../../d0/d5/io_8h.html#a291">PDRIVER_FS_NOTIFICATION</a> <a class="code" href="../../d8/d3/struct__NOTIFICATION__PACKET.html#o2">NotificationRoutine</a>;
00368 } <a class="code" href="../../d8/d3/struct__NOTIFICATION__PACKET.html">NOTIFICATION_PACKET</a>, *<a class="code" href="../../d8/d3/struct__NOTIFICATION__PACKET.html">PNOTIFICATION_PACKET</a>;
00369 
00370 <span class="comment">//</span>
00371 <span class="comment">// Define I/O completion packet types.</span>
00372 <span class="comment">//</span>
00373 
<a name="l00374"></a><a class="code" href="../../d0/d6/iop_8h.html#a241">00374</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d0/d6/iop_8h.html#a241">_COMPLETION_PACKET_TYPE</a> {
00375     <a class="code" href="../../d0/d6/iop_8h.html#a241a141">IopCompletionPacketIrp</a>,
00376     <a class="code" href="../../d0/d6/iop_8h.html#a241a142">IopCompletionPacketMini</a>,
00377     <a class="code" href="../../d0/d6/iop_8h.html#a241a143">IopCompletionPacketQuota</a>
00378 } <a class="code" href="../../d0/d6/iop_8h.html#a67">COMPLETION_PACKET_TYPE</a>, *<a class="code" href="../../d0/d6/iop_8h.html#a68">PCOMPLETION_PACKET_TYPE</a>;
00379 
00380 <span class="comment">//</span>
00381 <span class="comment">// Define the type for completion packets inserted onto completion ports when</span>
00382 <span class="comment">// there is no full I/O request packet that was used to perform the I/O</span>
00383 <span class="comment">// operation.  This occurs when the fast I/O path is used, and when the user</span>
00384 <span class="comment">// directly inserts a completion message.</span>
00385 <span class="comment">//</span>
<a name="l00386"></a><a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html">00386</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html">_IOP_MINI_COMPLETION_PACKET</a> {
00387 
00388     <span class="comment">//</span>
00389     <span class="comment">// The following unnamed structure must be exactly identical</span>
00390     <span class="comment">// to the unnamed structure used in the IRP overlay section used</span>
00391     <span class="comment">// for completion queue entries.</span>
00392     <span class="comment">//</span>
00393 
00394     <span class="keyword">struct </span>{
00395 
00396         <span class="comment">//</span>
00397         <span class="comment">// List entry - used to queue the packet to completion queue, among</span>
00398         <span class="comment">// others.</span>
00399         <span class="comment">//</span>
00400 
<a name="l00401"></a><a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html#o0">00401</a>         LIST_ENTRY <a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html#o0">ListEntry</a>;
00402 
00403         <span class="keyword">union </span>{
00404 
00405             <span class="comment">//</span>
00406             <span class="comment">// Current stack location - contains a pointer to the current</span>
00407             <span class="comment">// IO_STACK_LOCATION structure in the IRP stack.  This field</span>
00408             <span class="comment">// should never be directly accessed by drivers.  They should</span>
00409             <span class="comment">// use the standard functions.</span>
00410             <span class="comment">//</span>
00411 
<a name="l00412"></a><a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html#o1">00412</a>             <span class="keyword">struct </span><a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html">_IO_STACK_LOCATION</a> *<a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html#o1">CurrentStackLocation</a>;
00413 
00414             <span class="comment">//</span>
00415             <span class="comment">// Minipacket type.</span>
00416             <span class="comment">//</span>
00417 
<a name="l00418"></a><a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html#o2">00418</a>             ULONG <a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html#o2">PacketType</a>;
00419         };
00420     };
00421 
<a name="l00422"></a><a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html#o3">00422</a>     PVOID <a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html#o3">KeyContext</a>;
<a name="l00423"></a><a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html#o4">00423</a>     PVOID <a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html#o4">ApcContext</a>;
<a name="l00424"></a><a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html#o5">00424</a>     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html#o5">IoStatus</a>;
<a name="l00425"></a><a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html#o6">00425</a>     ULONG_PTR <a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html#o6">IoStatusInformation</a>;
00426 } <a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html">IOP_MINI_COMPLETION_PACKET</a>, *<a class="code" href="../../d9/d0/struct__IOP__MINI__COMPLETION__PACKET.html">PIOP_MINI_COMPLETION_PACKET</a>;
00427 
00428 <span class="comment">//</span>
00429 <span class="comment">// Define the type for a dump control block.  This structure is used to describe</span>
00430 <span class="comment">// all of the data, drivers, and memory necessary to dump all of physical memory</span>
00431 <span class="comment">// to the disk after a bugcheck.</span>
00432 <span class="comment">//</span>
00433 
<a name="l00434"></a><a class="code" href="../../d7/d9/struct__MINIPORT__NODE.html">00434</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d7/d9/struct__MINIPORT__NODE.html">_MINIPORT_NODE</a> {
<a name="l00435"></a><a class="code" href="../../d7/d9/struct__MINIPORT__NODE.html#o0">00435</a>     LIST_ENTRY <a class="code" href="../../d7/d9/struct__MINIPORT__NODE.html#o0">ListEntry</a>;
<a name="l00436"></a><a class="code" href="../../d7/d9/struct__MINIPORT__NODE.html#o1">00436</a>     PLDR_DATA_TABLE_ENTRY <a class="code" href="../../d7/d9/struct__MINIPORT__NODE.html#o1">DriverEntry</a>;
<a name="l00437"></a><a class="code" href="../../d7/d9/struct__MINIPORT__NODE.html#o2">00437</a>     ULONG <a class="code" href="../../d7/d9/struct__MINIPORT__NODE.html#o2">DriverChecksum</a>;
00438 } <a class="code" href="../../d7/d9/struct__MINIPORT__NODE.html">MINIPORT_NODE</a>, *<a class="code" href="../../d7/d9/struct__MINIPORT__NODE.html">PMINIPORT_NODE</a>;
00439 
<a name="l00440"></a><a class="code" href="../../d0/d6/iop_8h.html#a4">00440</a> <span class="preprocessor">#define IO_TYPE_DCB                     0xff</span>
00441 <span class="preprocessor"></span>
<a name="l00442"></a><a class="code" href="../../d0/d6/iop_8h.html#a5">00442</a> <span class="preprocessor">#define DCB_DUMP_ENABLED                 0x01</span>
<a name="l00443"></a><a class="code" href="../../d0/d6/iop_8h.html#a6">00443</a> <span class="preprocessor"></span><span class="preprocessor">#define DCB_SUMMARY_ENABLED              0x02</span>
<a name="l00444"></a><a class="code" href="../../d0/d6/iop_8h.html#a7">00444</a> <span class="preprocessor"></span><span class="preprocessor">#define DCB_AUTO_REBOOT                  0x04</span>
<a name="l00445"></a><a class="code" href="../../d0/d6/iop_8h.html#a8">00445</a> <span class="preprocessor"></span><span class="preprocessor">#define DCB_DUMP_HEADER_ENABLED          0x10</span>
<a name="l00446"></a><a class="code" href="../../d0/d6/iop_8h.html#a9">00446</a> <span class="preprocessor"></span><span class="preprocessor">#define DCB_SUMMARY_DUMP_ENABLED         0x20</span>
<a name="l00447"></a><a class="code" href="../../d0/d6/iop_8h.html#a10">00447</a> <span class="preprocessor"></span><span class="preprocessor">#define DCB_TRIAGE_DUMP_ENABLED          0x40</span>
<a name="l00448"></a><a class="code" href="../../d0/d6/iop_8h.html#a11">00448</a> <span class="preprocessor"></span><span class="preprocessor">#define DCB_TRIAGE_DUMP_ACT_UPON_ENABLED 0x80</span>
00449 <span class="preprocessor"></span>
<a name="l00450"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html">00450</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html">_DUMP_CONTROL_BLOCK</a> {
<a name="l00451"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o0">00451</a>     UCHAR <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o0">Type</a>;
<a name="l00452"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o1">00452</a>     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o1">Flags</a>;
<a name="l00453"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o2">00453</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
<a name="l00454"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o3">00454</a>     CCHAR <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o3">NumberProcessors</a>;
<a name="l00455"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o4">00455</a>     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o4">Reserved</a>;
<a name="l00456"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o5">00456</a>     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o5">ProcessorArchitecture</a>;
<a name="l00457"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o6">00457</a>     <a class="code" href="../../d0/d5/io_8h.html#a281">PDUMP_STACK_CONTEXT</a> <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o6">DumpStack</a>;
<a name="l00458"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o7">00458</a>     <a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html">PPHYSICAL_MEMORY_DESCRIPTOR</a> <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o7">MemoryDescriptor</a>;
<a name="l00459"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o8">00459</a>     ULONG <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o8">MemoryDescriptorLength</a>;
<a name="l00460"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o9">00460</a>     PLARGE_INTEGER <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o9">FileDescriptorArray</a>;
<a name="l00461"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o10">00461</a>     ULONG <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o10">FileDescriptorSize</a>;
<a name="l00462"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o11">00462</a>     PULONG <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o11">HeaderPage</a>;
<a name="l00463"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o12">00463</a>     PFN_NUMBER <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o12">HeaderPfn</a>;
<a name="l00464"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o13">00464</a>     ULONG <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o13">MajorVersion</a>;
<a name="l00465"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o14">00465</a>     ULONG <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o14">MinorVersion</a>;
<a name="l00466"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o15">00466</a>     ULONG <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o15">BuildNumber</a>;
<a name="l00467"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o16">00467</a>     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o16">VersionUser</a>[32];
<a name="l00468"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o17">00468</a>     ULONG <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o17">HeaderSize</a>;               <span class="comment">// Size of dump header includes summary dump.</span>
<a name="l00469"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o18">00469</a>     LARGE_INTEGER <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o18">DumpFileSize</a>;     <span class="comment">// Size of dump file.</span>
<a name="l00470"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o19">00470</a>     ULONG <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o19">TriageDumpFlags</a>;          <span class="comment">// Flags for triage dump.</span>
<a name="l00471"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o20">00471</a>     PUCHAR <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o20">TriageDumpBuffer</a>;        <span class="comment">// Buffer for triage dump.</span>
<a name="l00472"></a><a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o21">00472</a>     ULONG <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html#o21">TriageDumpBufferSize</a>;     <span class="comment">// Size of triage dump buffer.</span>
00473 } <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html">DUMP_CONTROL_BLOCK</a>, *<a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html">PDUMP_CONTROL_BLOCK</a>;
00474 
00475 
00476 <span class="comment">//</span>
00477 <span class="comment">// Define the global data for the I/O system.</span>
00478 <span class="comment">//</span>
00479 
<a name="l00480"></a><a class="code" href="../../d0/d6/iop_8h.html#a12">00480</a> <span class="preprocessor">#define IOP_FIXED_SIZE_MDL_PFNS        0x17</span>
00481 <span class="preprocessor"></span>
<a name="l00482"></a><a class="code" href="../../d0/d6/iop_8h.html#a75">00482</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d3/d5/iodata_8c.html#a3">IopDatabaseLock</a>;
<a name="l00483"></a><a class="code" href="../../d0/d6/iop_8h.html#a76">00483</a> <span class="keyword">extern</span> <a class="code" href="../../d6/d4/struct__ERESOURCE.html">ERESOURCE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a4">IopDatabaseResource</a>;
<a name="l00484"></a><a class="code" href="../../d0/d6/iop_8h.html#a77">00484</a> <span class="keyword">extern</span> <a class="code" href="../../d6/d4/struct__ERESOURCE.html">ERESOURCE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a5">IopSecurityResource</a>;
<a name="l00485"></a><a class="code" href="../../d0/d6/iop_8h.html#a78">00485</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a6">IopDiskFileSystemQueueHead</a>;
<a name="l00486"></a><a class="code" href="../../d0/d6/iop_8h.html#a79">00486</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a7">IopCdRomFileSystemQueueHead</a>;
<a name="l00487"></a><a class="code" href="../../d0/d6/iop_8h.html#a80">00487</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a8">IopNetworkFileSystemQueueHead</a>;
<a name="l00488"></a><a class="code" href="../../d0/d6/iop_8h.html#a81">00488</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a9">IopTapeFileSystemQueueHead</a>;
<a name="l00489"></a><a class="code" href="../../d0/d6/iop_8h.html#a82">00489</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a10">IopBootDriverReinitializeQueueHead</a>;
<a name="l00490"></a><a class="code" href="../../d0/d6/iop_8h.html#a83">00490</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a11">IopDriverReinitializeQueueHead</a>;
<a name="l00491"></a><a class="code" href="../../d0/d6/iop_8h.html#a84">00491</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a12">IopNotifyShutdownQueueHead</a>;
<a name="l00492"></a><a class="code" href="../../d0/d6/iop_8h.html#a85">00492</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a13">IopNotifyLastChanceShutdownQueueHead</a>;
<a name="l00493"></a><a class="code" href="../../d0/d6/iop_8h.html#a86">00493</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a14">IopFsNotifyChangeQueueHead</a>;
<a name="l00494"></a><a class="code" href="../../d0/d6/iop_8h.html#a87">00494</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d0/d5/io_8h.html#a379">IoStatisticsLock</a>;
<a name="l00495"></a><a class="code" href="../../d0/d6/iop_8h.html#a88">00495</a> <span class="keyword">extern</span> <a class="code" href="../../d8/d7/struct__KSEMAPHORE.html">KSEMAPHORE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a60">IopRegistrySemaphore</a>;
<a name="l00496"></a><a class="code" href="../../d0/d6/iop_8h.html#a89">00496</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d4/d4/alpha_2splocks_8c.html#a8">IopTimerLock</a>;
<a name="l00497"></a><a class="code" href="../../d0/d6/iop_8h.html#a90">00497</a> <span class="keyword">extern</span> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a28">IopTimerQueueHead</a>;
<a name="l00498"></a><a class="code" href="../../d0/d6/iop_8h.html#a91">00498</a> <span class="keyword">extern</span> <a class="code" href="../../d1/d6/struct__KDPC.html">KDPC</a> <a class="code" href="../../d3/d5/iodata_8c.html#a29">IopTimerDpc</a>;
<a name="l00499"></a><a class="code" href="../../d0/d6/iop_8h.html#a92">00499</a> <span class="keyword">extern</span> <a class="code" href="../../d3/d8/struct__KTIMER.html">KTIMER</a> <a class="code" href="../../d3/d5/iodata_8c.html#a30">IopTimer</a>;
<a name="l00500"></a><a class="code" href="../../d0/d6/iop_8h.html#a93">00500</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d3/d5/iodata_8c.html#a31">IopTimerCount</a>;
<a name="l00501"></a><a class="code" href="../../d0/d6/iop_8h.html#a94">00501</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d8/d0/cmdat3_8c.html#a56">IopLargeIrpStackLocations</a>;
<a name="l00502"></a><a class="code" href="../../d0/d6/iop_8h.html#a95">00502</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d3/d5/iodata_8c.html#a24">IopCompletionLock</a>;
00503 
<a name="l00504"></a><a class="code" href="../../d0/d6/iop_8h.html#a96">00504</a> <span class="keyword">extern</span> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a32">IoAdapterObjectType</a>;
<a name="l00505"></a><a class="code" href="../../d0/d6/iop_8h.html#a97">00505</a> <span class="keyword">extern</span> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a34">IoCompletionObjectType</a>;
<a name="l00506"></a><a class="code" href="../../d0/d6/iop_8h.html#a98">00506</a> <span class="keyword">extern</span> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a33">IoControllerObjectType</a>;
<a name="l00507"></a><a class="code" href="../../d0/d6/iop_8h.html#a99">00507</a> <span class="keyword">extern</span> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a35">IoDeviceObjectType</a>;
<a name="l00508"></a><a class="code" href="../../d0/d6/iop_8h.html#a100">00508</a> <span class="keyword">extern</span> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a36">IoDriverObjectType</a>;
<a name="l00509"></a><a class="code" href="../../d0/d6/iop_8h.html#a101">00509</a> <span class="keyword">extern</span> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a37">IoDeviceHandlerObjectType</a>;
<a name="l00510"></a><a class="code" href="../../d0/d6/iop_8h.html#a102">00510</a> <span class="keyword">extern</span> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d5/d8/fssup_8c.html#a3">IoFileObjectType</a>;
<a name="l00511"></a><a class="code" href="../../d0/d6/iop_8h.html#a103">00511</a> <span class="keyword">extern</span> ULONG        <a class="code" href="../../d3/d5/iodata_8c.html#a39">IoDeviceHandlerObjectSize</a>;
00512 
<a name="l00513"></a><a class="code" href="../../d0/d6/iop_8h.html#a104">00513</a> <span class="keyword">extern</span> <a class="code" href="../../d1/d4/struct__NPAGED__LOOKASIDE__LIST.html">NPAGED_LOOKASIDE_LIST</a> <a class="code" href="../../d3/d5/iodata_8c.html#a16">IopLargeIrpLookasideList</a>;
<a name="l00514"></a><a class="code" href="../../d0/d6/iop_8h.html#a105">00514</a> <span class="keyword">extern</span> <a class="code" href="../../d1/d4/struct__NPAGED__LOOKASIDE__LIST.html">NPAGED_LOOKASIDE_LIST</a> <a class="code" href="../../d3/d5/iodata_8c.html#a17">IopSmallIrpLookasideList</a>;
<a name="l00515"></a><a class="code" href="../../d0/d6/iop_8h.html#a106">00515</a> <span class="keyword">extern</span> <a class="code" href="../../d1/d4/struct__NPAGED__LOOKASIDE__LIST.html">NPAGED_LOOKASIDE_LIST</a> <a class="code" href="../../d3/d5/iodata_8c.html#a18">IopMdlLookasideList</a>;
<a name="l00516"></a><a class="code" href="../../d0/d6/iop_8h.html#a107">00516</a> <span class="keyword">extern</span> <a class="code" href="../../d1/d4/struct__NPAGED__LOOKASIDE__LIST.html">NPAGED_LOOKASIDE_LIST</a> <a class="code" href="../../d3/d5/iodata_8c.html#a15">IopCompletionLookasideList</a>;
00517 
<a name="l00518"></a><a class="code" href="../../d0/d6/iop_8h.html#a108">00518</a> <span class="keyword">extern</span> UCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a63">IopQueryOperationLength</a>[];
<a name="l00519"></a><a class="code" href="../../d0/d6/iop_8h.html#a109">00519</a> <span class="keyword">extern</span> UCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a64">IopSetOperationLength</a>[];
<a name="l00520"></a><a class="code" href="../../d0/d6/iop_8h.html#a110">00520</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d3/d5/iodata_8c.html#a66">IopQueryOperationAccess</a>[];
<a name="l00521"></a><a class="code" href="../../d0/d6/iop_8h.html#a111">00521</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d3/d5/iodata_8c.html#a67">IopSetOperationAccess</a>[];
<a name="l00522"></a><a class="code" href="../../d0/d6/iop_8h.html#a112">00522</a> <span class="keyword">extern</span> UCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a65">IopQuerySetAlignmentRequirement</a>[];
<a name="l00523"></a><a class="code" href="../../d0/d6/iop_8h.html#a113">00523</a> <span class="keyword">extern</span> UCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a68">IopQueryFsOperationLength</a>[];
<a name="l00524"></a><a class="code" href="../../d0/d6/iop_8h.html#a114">00524</a> <span class="keyword">extern</span> UCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a69">IopSetFsOperationLength</a>[];
<a name="l00525"></a><a class="code" href="../../d0/d6/iop_8h.html#a115">00525</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d3/d5/iodata_8c.html#a70">IopQueryFsOperationAccess</a>[];
<a name="l00526"></a><a class="code" href="../../d0/d6/iop_8h.html#a116">00526</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d3/d5/iodata_8c.html#a71">IopSetFsOperationAccess</a>[];
<a name="l00527"></a><a class="code" href="../../d0/d6/iop_8h.html#a117">00527</a> <span class="keyword">extern</span> UCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a72">IopQuerySetFsAlignmentRequirement</a>[];
00528 
<a name="l00529"></a><a class="code" href="../../d0/d6/iop_8h.html#a118">00529</a> <span class="keyword">extern</span> UNICODE_STRING <a class="code" href="../../d3/d5/iodata_8c.html#a86">IoArcBootDeviceName</a>;
<a name="l00530"></a><a class="code" href="../../d0/d6/iop_8h.html#a119">00530</a> <span class="keyword">extern</span> UNICODE_STRING <a class="code" href="../../d3/d5/iodata_8c.html#a87">IoArcHalDeviceName</a>;
<a name="l00531"></a><a class="code" href="../../d0/d6/iop_8h.html#a120">00531</a> <span class="keyword">extern</span> PUCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a88">IoLoaderArcBootDeviceName</a>;
<a name="l00532"></a><a class="code" href="../../d0/d6/iop_8h.html#a121">00532</a> <span class="keyword">extern</span> <a class="code" href="../../d0/d6/iop_8h.html#a74">PDUMP_CONTROL_BLOCK</a> <a class="code" href="../../d3/d5/iodata_8c.html#a47">IopDumpControlBlock</a>;
<a name="l00533"></a><a class="code" href="../../d0/d6/iop_8h.html#a122">00533</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d3/d5/iodata_8c.html#a48">IopDumpControlBlockChecksum</a>;
00534 
<a name="l00535"></a><a class="code" href="../../d0/d6/iop_8h.html#a123">00535</a> <span class="keyword">extern</span> LONG <a class="code" href="../../d3/d5/iodata_8c.html#a50">IopUniqueDeviceObjectNumber</a>;
00536 
<a name="l00537"></a><a class="code" href="../../d0/d6/iop_8h.html#a124">00537</a> <span class="keyword">extern</span> PVOID <a class="code" href="../../d3/d5/iodata_8c.html#a61">IopLinkTrackingServiceObject</a>;
<a name="l00538"></a><a class="code" href="../../d0/d6/iop_8h.html#a125">00538</a> <span class="keyword">extern</span> <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> <a class="code" href="../../d3/d5/iodata_8c.html#a62">IopLinkTrackingServiceEvent</a>;
<a name="l00539"></a><a class="code" href="../../d0/d6/iop_8h.html#a126">00539</a> <span class="keyword">extern</span> <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d3/d5/iodata_8c.html#a52">IopLinkTrackingPortObject</a>;
<a name="l00540"></a><a class="code" href="../../d0/d6/iop_8h.html#a127">00540</a> <span class="keyword">extern</span> <a class="code" href="../../d8/d1/struct__LINK__TRACKING__PACKET.html">LINK_TRACKING_PACKET</a> <a class="code" href="../../d3/d5/iodata_8c.html#a53">IopLinkTrackingPacket</a>;
00541 
<a name="l00542"></a><a class="code" href="../../d0/d6/iop_8h.html#a128">00542</a> <span class="keyword">extern</span> PVOID <a class="code" href="../../d3/d5/iodata_8c.html#a73">IopLoaderBlock</a>;
00543 
<a name="l00544"></a><a class="code" href="../../d0/d6/iop_8h.html#a129">00544</a> <span class="keyword">extern</span> BOOLEAN <a class="code" href="../../d3/d5/iodata_8c.html#a74">IopRemoteBootCardInitialized</a>;
00545 
<a name="l00546"></a><a class="code" href="../../d0/d6/iop_8h.html#a130">00546</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d0/d6/iop_8h.html#a130">IopLookasideIrpFloat</a>;
<a name="l00547"></a><a class="code" href="../../d0/d6/iop_8h.html#a131">00547</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d0/d6/iop_8h.html#a131">IopLookasideIrpLimit</a>;
<a name="l00548"></a><a class="code" href="../../d0/d6/iop_8h.html#a132">00548</a> <span class="keyword">extern</span> BOOLEAN  <a class="code" href="../../d0/d6/iop_8h.html#a132">IopVerifierOn</a>;
00549 
<a name="l00550"></a><a class="code" href="../../d0/d6/iop_8h.html#a133">00550</a> <span class="keyword">extern</span> PIO_CALL_DRIVER        <a class="code" href="../../d3/d5/iodata_8c.html#a55">pIofCallDriver</a>;
<a name="l00551"></a><a class="code" href="../../d0/d6/iop_8h.html#a134">00551</a> <span class="keyword">extern</span> PIO_COMPLETE_REQUEST   <a class="code" href="../../d3/d5/iodata_8c.html#a56">pIofCompleteRequest</a>;
<a name="l00552"></a><a class="code" href="../../d0/d6/iop_8h.html#a135">00552</a> <span class="keyword">extern</span> <a class="code" href="../../d0/d6/iop_8h.html#a37">PIO_FREE_IRP</a>           <a class="code" href="../../d3/d5/iodata_8c.html#a58">pIoFreeIrp</a>;
<a name="l00553"></a><a class="code" href="../../d0/d6/iop_8h.html#a136">00553</a> <span class="keyword">extern</span> <a class="code" href="../../d0/d6/iop_8h.html#a38">PIO_ALLOCATE_IRP</a>       <a class="code" href="../../d3/d5/iodata_8c.html#a57">pIoAllocateIrp</a>;
00554 
00555 <span class="comment">//</span>
00556 <span class="comment">// The following declaration cannot go in EX.H since POBJECT_TYPE is not defined</span>
00557 <span class="comment">// until OB.H, which depends on EX.H.  Hence, it is not exported by the EX</span>
00558 <span class="comment">// component at all.</span>
00559 <span class="comment">//</span>
00560 
<a name="l00561"></a><a class="code" href="../../d0/d6/iop_8h.html#a137">00561</a> <span class="keyword">extern</span> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d7/d7/ntapi_8c.html#a3">ExEventObjectType</a>;
00562 
00563 <span class="comment">//</span>
00564 <span class="comment">// Define routines private to the I/O system.</span>
00565 <span class="comment">//</span>
00566 
00567 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00568 <a class="code" href="../../d0/d6/iop_8h.html#a146">IopAbortRequest</a>(
00569     IN <a class="code" href="../../d1/d5/struct__KAPC.html">PKAPC</a> Apc
00570     );
00571 
00572 <span class="comment">//+</span>
00573 <span class="comment">//</span>
00574 <span class="comment">// BOOLEAN</span>
00575 <span class="comment">// IopAcquireFastLock(</span>
00576 <span class="comment">//     IN PFILE_OBJECT FileObject</span>
00577 <span class="comment">// )</span>
00578 <span class="comment">//</span>
00579 <span class="comment">// Routine Description:</span>
00580 <span class="comment">//</span>
00581 <span class="comment">//     This routine is invoked to acquire the fast lock for a file object.</span>
00582 <span class="comment">//     This lock protects the busy indicator in the file object resource.</span>
00583 <span class="comment">//</span>
00584 <span class="comment">// Arguments:</span>
00585 <span class="comment">//</span>
00586 <span class="comment">//     FileObject - Pointer to the file object to be locked.</span>
00587 <span class="comment">//</span>
00588 <span class="comment">// Return Values:</span>
00589 <span class="comment">//</span>
00590 <span class="comment">//      FALSE - the fileobject was not locked (it was busy)</span>
00591 <span class="comment">//      TRUE  - the fileobject was locked &amp; the busy flag has been set to TRUE</span>
00592 <span class="comment">//</span>
00593 <span class="comment">//-</span>
00594 
<a name="l00595"></a><a class="code" href="../../d0/d6/iop_8h.html#a13">00595</a> <span class="preprocessor">#define IopAcquireFastLock( FileObject )    \</span>
00596 <span class="preprocessor">    ( InterlockedExchange( &amp;FileObject-&gt;Busy, (ULONG) TRUE ) == FALSE )</span>
00597 <span class="preprocessor"></span>
<a name="l00598"></a><a class="code" href="../../d0/d6/iop_8h.html#a14">00598</a> <span class="preprocessor">#define IopAcquireCancelSpinLockAtDpcLevel()    \</span>
00599 <span class="preprocessor">    ExAcquireSpinLockAtDpcLevel (&amp;IopCancelSpinLock)</span>
00600 <span class="preprocessor"></span>
<a name="l00601"></a><a class="code" href="../../d0/d6/iop_8h.html#a15">00601</a> <span class="preprocessor">#define IopReleaseCancelSpinLockFromDpcLevel()  \</span>
00602 <span class="preprocessor">    ExReleaseSpinLockFromDpcLevel (&amp;IopCancelSpinLock)</span>
00603 <span class="preprocessor"></span>
<a name="l00604"></a><a class="code" href="../../d0/d6/iop_8h.html#a16">00604</a> <span class="preprocessor">#define IopAllocateIrp(StackSize, ChargeQuota) \</span>
00605 <span class="preprocessor">        IoAllocateIrp((StackSize), (ChargeQuota))</span>
00606 <span class="preprocessor"></span>
<a name="l00607"></a><a class="code" href="../../d0/d6/iop_8h.html#a17">00607</a> <span class="preprocessor">#define IsIoVerifierOn()    IopVerifierOn</span>
00608 <span class="preprocessor"></span>
00609 
00610 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00611 <a class="code" href="../../d0/d6/iop_8h.html#a147">IopAcquireFileObjectLock</a>(
00612     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
00613     IN KPROCESSOR_MODE RequestorMode,
00614     IN BOOLEAN Alertable,
00615     OUT PBOOLEAN Interrupted
00616     );
00617 
00618 
00619 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00620 <a class="code" href="../../d0/d6/iop_8h.html#a148">IopAllocateIrpCleanup</a>(
00621     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
00622     IN <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> EventObject OPTIONAL
00623     );
00624 
00625 <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>
00626 <a class="code" href="../../d0/d6/iop_8h.html#a149">IopAllocateIrpMustSucceed</a>(
00627     IN CCHAR StackSize
00628     );
00629 
00630 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00631 <a class="code" href="../../d0/d6/iop_8h.html#a150">IopApcHardError</a>(
00632     IN PVOID StartContext
00633     );
00634 
00635 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00636 <a class="code" href="../../d0/d6/iop_8h.html#a151">IopCancelAlertedRequest</a>(
00637     IN <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> Event,
00638     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> Irp
00639     );
00640 
00641 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00642 <a class="code" href="../../d4/d3/parse_8c.html#a9">IopCheckBackupRestorePrivilege</a>(
00643     IN <a class="code" href="../../d2/d5/struct__ACCESS__STATE.html">PACCESS_STATE</a> AccessState,
00644     IN OUT PULONG CreateOptions,
00645     IN KPROCESSOR_MODE PreviousMode,
00646     IN ULONG Disposition
00647     );
00648 
00649 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00650 <a class="code" href="../../d0/d6/iop_8h.html#a153">IopCheckGetQuotaBufferValidity</a>(
00651     IN PFILE_GET_QUOTA_INFORMATION QuotaBuffer,
00652     IN ULONG QuotaLength,
00653     OUT PULONG_PTR ErrorOffset
00654     );
00655 
00656 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00657 <a class="code" href="../../d3/d1/objsup_8c.html#a0">IopCloseFile</a>(
00658     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> Process OPTIONAL,
00659     IN PVOID Object,
00660     IN ULONG GrantedAccess,
00661     IN ULONG ProcessHandleCount,
00662     IN ULONG SystemHandleCount
00663     );
00664 
00665 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00666 <a class="code" href="../../d0/d6/iop_8h.html#a155">IopCompleteUnloadOrDelete</a>(
00667     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
00668     IN KIRQL Irql
00669     );
00670 
00671 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00672 <a class="code" href="../../d0/d6/iop_8h.html#a156">IopCompletePageWrite</a>(
00673     IN <a class="code" href="../../d1/d5/struct__KAPC.html">PKAPC</a> Apc,
00674     IN PKNORMAL_ROUTINE *NormalRoutine,
00675     IN PVOID *NormalContext,
00676     IN PVOID *SystemArgument1,
00677     IN PVOID *SystemArgument2
00678     );
00679 
00680 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00681 <a class="code" href="../../d0/d6/iop_8h.html#a157">IopCompleteRequest</a>(
00682     IN <a class="code" href="../../d1/d5/struct__KAPC.html">PKAPC</a> Apc,
00683     IN PKNORMAL_ROUTINE *NormalRoutine,
00684     IN PVOID *NormalContext,
00685     IN PVOID *SystemArgument1,
00686     IN PVOID *SystemArgument2
00687     );
00688 
00689 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00690 <a class="code" href="../../d0/d6/iop_8h.html#a158">IopConnectLinkTrackingPort</a>(
00691     IN PVOID Parameter
00692     );
00693 
00694 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00695 <a class="code" href="../../d4/d6/iosubs_8c.html#a44">IopCreateVpb</a> (
00696     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
00697     );
00698 
00699 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00700 <a class="code" href="../../d0/d6/iop_8h.html#a160">IopDeallocateApc</a>(
00701     IN <a class="code" href="../../d1/d5/struct__KAPC.html">PKAPC</a> Apc,
00702     IN PKNORMAL_ROUTINE *NormalRoutine,
00703     IN PVOID *NormalContext,
00704     IN PVOID *SystemArgument1,
00705     IN PVOID *SystemArgument2
00706     );
00707 
00708 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00709 <a class="code" href="../../d0/d6/iop_8h.html#a161">IopDecrementDeviceObjectRef</a>(
00710     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
00711     IN BOOLEAN AlwaysUnload
00712     );
00713 
00714 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00715 <a class="code" href="../../d3/d1/objsup_8c.html#a2">IopDeleteDriver</a>(
00716     IN PVOID Object
00717     );
00718 
00719 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00720 <a class="code" href="../../d3/d1/objsup_8c.html#a3">IopDeleteDevice</a>(
00721     IN PVOID Object
00722     );
00723 
00724 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00725 <a class="code" href="../../d3/d1/objsup_8c.html#a1">IopDeleteFile</a>(
00726     IN PVOID Object
00727     );
00728 
00729 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00730 <a class="code" href="../../d0/d6/iop_8h.html#a165">IopDeleteIoCompletion</a>(
00731     IN PVOID Object
00732     );
00733 
00734 <span class="comment">//+</span>
00735 <span class="comment">//</span>
00736 <span class="comment">// VOID</span>
00737 <span class="comment">// IopDequeueThreadIrp(</span>
00738 <span class="comment">//     IN PIRP Irp</span>
00739 <span class="comment">//     )</span>
00740 <span class="comment">//</span>
00741 <span class="comment">// Routine Description:</span>
00742 <span class="comment">//</span>
00743 <span class="comment">//     This routine dequeues the specified I/O Request Packet (IRP) from the</span>
00744 <span class="comment">//     thread IRP queue which it is currently queued.</span>
00745 <span class="comment">//</span>
00746 <span class="comment">//     In checked we set Flink == Blink so we can assert free's of queue'd IRPs</span>
00747 <span class="comment">//</span>
00748 <span class="comment">// Arguments:</span>
00749 <span class="comment">//</span>
00750 <span class="comment">//     Irp - Specifies the IRP that is dequeued.</span>
00751 <span class="comment">//</span>
00752 <span class="comment">// Return Value:</span>
00753 <span class="comment">//</span>
00754 <span class="comment">//     None.</span>
00755 <span class="comment">//</span>
00756 <span class="comment">//-</span>
00757 
<a name="l00758"></a><a class="code" href="../../d0/d6/iop_8h.html#a18">00758</a> <span class="preprocessor">#define IopDequeueThreadIrp( Irp ) \</span>
00759 <span class="preprocessor">   { \</span>
00760 <span class="preprocessor">   RemoveEntryList( &amp;Irp-&gt;ThreadListEntry ); \</span>
00761 <span class="preprocessor">   InitializeListHead( &amp;Irp-&gt;ThreadListEntry ) ; \</span>
00762 <span class="preprocessor">   }</span>
00763 <span class="preprocessor"></span>
00764 
00765 <span class="preprocessor">#ifdef  _WIN64</span>
00766 <span class="preprocessor"></span><span class="preprocessor">#define IopApcRoutinePresent(ApcRoutine)    ARGUMENT_PRESENT((ULONG_PTR)(ApcRoutine) &amp; ~1)</span>
00767 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00768"></a><a class="code" href="../../d0/d6/iop_8h.html#a19">00768</a> <span class="preprocessor"></span><span class="preprocessor">#define IopApcRoutinePresent(ApcRoutine)    ARGUMENT_PRESENT(ApcRoutine)</span>
00769 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00770 <span class="preprocessor"></span>
00771 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00772 <a class="code" href="../../d0/d6/iop_8h.html#a166">IopDisassociateThreadIrp</a>(
00773     VOID
00774     );
00775 
00776 BOOLEAN
00777 <a class="code" href="../../d0/d6/iop_8h.html#a167">IopDmaDispatch</a>(
00778     IN <a class="code" href="../../d0/d7/struct__KINTERRUPT.html">PKINTERRUPT</a> Interrupt,
00779     IN PVOID ServiceContext
00780     );
00781 
00782 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00783 <a class="code" href="../../d0/d6/iop_8h.html#a168">IopDropIrp</a>(
00784     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> Irp,
00785     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject
00786     );
00787 
00788 LONG
00789 <a class="code" href="../../d0/d6/iop_8h.html#a169">IopExceptionFilter</a>(
00790     IN PEXCEPTION_POINTERS ExceptionPointers,
00791     OUT PNTSTATUS ExceptionCode
00792     );
00793 
00794 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00795 <a class="code" href="../../d0/d6/iop_8h.html#a170">IopExceptionCleanup</a>(
00796     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
00797     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> Irp,
00798     IN <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> EventObject OPTIONAL,
00799     IN <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> KernelEvent OPTIONAL
00800     );
00801 
00802 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00803 <a class="code" href="../../d0/d6/iop_8h.html#a171">IopErrorLogThread</a>(
00804     IN PVOID StartContext
00805     );
00806 
00807 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00808 <a class="code" href="../../d0/d6/iop_8h.html#a172">IopFreeIrpAndMdls</a>(
00809     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> Irp
00810     );
00811 
00812 <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>
00813 <a class="code" href="../../d0/d6/iop_8h.html#a173">IopGetDeviceAttachmentBase</a>(
00814     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
00815     );
00816 
00817 <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>
00818 <a class="code" href="../../d0/d6/iop_8h.html#a174">IopGetDeviceAttachmentBaseRef</a>(
00819     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
00820     );
00821 
00822 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00823 <a class="code" href="../../d0/d6/iop_8h.html#a175">IopGetDriverNameFromKeyNode</a>(
00824     IN HANDLE KeyHandle,
00825     OUT PUNICODE_STRING DriverName
00826     );
00827 
00828 ULONG
00829 <a class="code" href="../../d0/d6/iop_8h.html#a176">IopGetDumpControlBlockCheck</a> (
00830     IN PDUMP_CONTROL_BLOCK  Dcb
00831     );
00832 
00833 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00834 <a class="code" href="../../d0/d6/iop_8h.html#a177">IopGetFileName</a>(
00835     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
00836     IN ULONG Length,
00837     OUT PVOID FileInformation,
00838     OUT PULONG ReturnedLength
00839     );
00840 
00841 BOOLEAN
00842 <a class="code" href="../../d0/d6/iop_8h.html#a178">IopGetMountFlag</a>(
00843     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
00844     );
00845 
00846 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00847 <a class="code" href="../../d0/d6/iop_8h.html#a179">IopGetRegistryKeyInformation</a>(
00848     IN HANDLE KeyHandle,
00849     OUT PKEY_FULL_INFORMATION *Information
00850     );
00851 
00852 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00853 <a class="code" href="../../d6/d5/ioep_8h.html#a52">IopGetRegistryValue</a>(
00854     IN HANDLE KeyHandle,
00855     IN PWSTR  ValueName,
00856     OUT PKEY_VALUE_FULL_INFORMATION *Information
00857     );
00858 
00859 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00860 <a class="code" href="../../d0/d6/iop_8h.html#a181">IopGetRegistryValues</a>(
00861     IN HANDLE KeyHandle,
00862     IN PKEY_VALUE_FULL_INFORMATION *ValueList
00863     );
00864 
00865 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00866 <a class="code" href="../../d0/d6/iop_8h.html#a181">IopGetRegistryValues</a>(
00867     IN HANDLE KeyHandle,
00868     IN PKEY_VALUE_FULL_INFORMATION *ValueList
00869     );
00870 
00871 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00872 <a class="code" href="../../d0/d6/iop_8h.html#a182">IopGetSetObjectId</a>(
00873     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
00874     IN OUT PVOID Buffer,
00875     IN ULONG Length,
00876     IN ULONG OperationFlags
00877     );
00878 
00879 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00880 <a class="code" href="../../d3/d1/objsup_8c.html#a6">IopGetSetSecurityObject</a>(
00881     IN PVOID Object,
00882     IN SECURITY_OPERATION_CODE OperationCode,
00883     IN PSECURITY_INFORMATION SecurityInformation,
00884     IN OUT PSECURITY_DESCRIPTOR SecurityDescriptor,
00885     IN OUT PULONG CapturedLength,
00886     IN OUT PSECURITY_DESCRIPTOR *ObjectsSecurityDescriptor,
00887     IN POOL_TYPE PoolType,
00888     IN PGENERIC_MAPPING GenericMapping
00889     );
00890 
00891 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00892 <a class="code" href="../../d0/d6/iop_8h.html#a184">IopGetVolumeId</a>(
00893     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
00894     IN OUT PLINK_TRACKING_INFORMATION ObjectId,
00895     IN ULONG Length
00896     );
00897 
00898 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00899 <a class="code" href="../../d0/d6/iop_8h.html#a185">IopHardErrorThread</a>(
00900     PVOID StartContext
00901     );
00902 
00903 <span class="comment">//++</span>
00904 <span class="comment">//</span>
00905 <span class="comment">// VOID</span>
00906 <span class="comment">// IopInitializeIrp(</span>
00907 <span class="comment">//     IN OUT PIRP Irp,</span>
00908 <span class="comment">//     IN USHORT PacketSize,</span>
00909 <span class="comment">//     IN CCHAR StackSize</span>
00910 <span class="comment">//     )</span>
00911 <span class="comment">//</span>
00912 <span class="comment">// Routine Description:</span>
00913 <span class="comment">//</span>
00914 <span class="comment">//     Initializes an IRP.</span>
00915 <span class="comment">//</span>
00916 <span class="comment">// Arguments:</span>
00917 <span class="comment">//</span>
00918 <span class="comment">//     Irp - a pointer to the IRP to initialize.</span>
00919 <span class="comment">//</span>
00920 <span class="comment">//     PacketSize - length, in bytes, of the IRP.</span>
00921 <span class="comment">//</span>
00922 <span class="comment">//     StackSize - Number of stack locations in the IRP.</span>
00923 <span class="comment">//</span>
00924 <span class="comment">// Return Value:</span>
00925 <span class="comment">//</span>
00926 <span class="comment">//     None.</span>
00927 <span class="comment">//</span>
00928 <span class="comment">//--</span>
00929 
<a name="l00930"></a><a class="code" href="../../d0/d6/iop_8h.html#a20">00930</a> <span class="preprocessor">#define IopInitializeIrp( Irp, PacketSize, StackSize ) {          \</span>
00931 <span class="preprocessor">    RtlZeroMemory( (Irp), (PacketSize) );                         \</span>
00932 <span class="preprocessor">    (Irp)-&gt;Type = (CSHORT) IO_TYPE_IRP;                           \</span>
00933 <span class="preprocessor">    (Irp)-&gt;Size = (USHORT) ((PacketSize));                        \</span>
00934 <span class="preprocessor">    (Irp)-&gt;StackCount = (CCHAR) ((StackSize));                    \</span>
00935 <span class="preprocessor">    (Irp)-&gt;CurrentLocation = (CCHAR) ((StackSize) + 1);           \</span>
00936 <span class="preprocessor">    (Irp)-&gt;ApcEnvironment = KeGetCurrentApcEnvironment();         \</span>
00937 <span class="preprocessor">    InitializeListHead (&amp;(Irp)-&gt;ThreadListEntry);                 \</span>
00938 <span class="preprocessor">    (Irp)-&gt;Tail.Overlay.CurrentStackLocation =                    \</span>
00939 <span class="preprocessor">        ((PIO_STACK_LOCATION) ((UCHAR *) (Irp) +                  \</span>
00940 <span class="preprocessor">            sizeof( IRP ) +                                       \</span>
00941 <span class="preprocessor">            ( (StackSize) * sizeof( IO_STACK_LOCATION )))); }</span>
00942 <span class="preprocessor"></span>
00943 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00944 <a class="code" href="../../d1/d8/report_8c.html#a10">IopInitializeResourceMap</a> (
00945     <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock
00946     );
00947 
00948 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00949 <a class="code" href="../../d4/d6/iosubs_8c.html#a43">IopInsertRemoveDevice</a>(
00950     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject,
00951     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
00952     IN BOOLEAN Insert
00953     );
00954 
00955 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00956 <a class="code" href="../../d0/d6/iop_8h.html#a188">IopInvalidDeviceRequest</a>(
00957     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
00958     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> Irp
00959     );
00960 
00961 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00962 <a class="code" href="../../d0/d6/iop_8h.html#a189">IopInvalidateVolumesForDevice</a>(
00963     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
00964     );
00965 
00966 BOOLEAN
00967 <a class="code" href="../../d0/d6/iop_8h.html#a190">IopIsSameMachine</a>(
00968     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> SourceFile,
00969     IN HANDLE TargetFile
00970     );
00971 
00972 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00973 <a class="code" href="../../d0/d6/iop_8h.html#a191">IopLoadDriver</a>(
00974     IN HANDLE KeyHandle,
00975     IN BOOLEAN CheckForSafeBoot
00976     );
00977 
00978 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00979 <a class="code" href="../../d0/d6/iop_8h.html#a192">IopLoadFileSystemDriver</a>(
00980     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
00981     );
00982 
00983 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00984 <a class="code" href="../../d0/d6/iop_8h.html#a193">IopLoadUnloadDriver</a>(
00985     IN PVOID Parameter
00986     );
00987 
00988 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00989 <a class="code" href="../../d0/d6/iop_8h.html#a194">IopLookupBusStringFromID</a> (
00990     IN  HANDLE KeyHandle,
00991     IN  INTERFACE_TYPE InterfaceType,
00992     OUT PWCHAR Buffer,
00993     IN  ULONG Length,
00994     OUT PULONG BusFlags OPTIONAL
00995     );
00996 
00997 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00998 <a class="code" href="../../d0/d6/iop_8h.html#a195">IopMountVolume</a>(
00999     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
01000     IN BOOLEAN AllowRawMount,
01001     IN BOOLEAN DeviceLockAlreadyHeld,
01002     IN BOOLEAN Alertable
01003     );
01004 
01005 BOOLEAN
01006 <a class="code" href="../../d0/d6/iop_8h.html#a196">IopNotifyPnpWhenChainDereferenced</a>(
01007     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> *PhysicalDeviceObjects,
01008     IN ULONG DeviceObjectCount,
01009     IN BOOLEAN Query,
01010     OUT <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> *VetoingDevice
01011     );
01012 
01013 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01014 <a class="code" href="../../d0/d6/iop_8h.html#a197">IopOpenLinkOrRenameTarget</a>(
01015     OUT PHANDLE TargetHandle,
01016     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> Irp,
01017     IN PVOID RenameBuffer,
01018     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject
01019     );
01020 
01021 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01022 <a class="code" href="../../d0/d6/iop_8h.html#a198">IopOpenRegistryKey</a>(
01023     OUT PHANDLE Handle,
01024     IN HANDLE BaseHandle OPTIONAL,
01025     IN PUNICODE_STRING KeyName,
01026     IN ACCESS_MASK DesiredAccess,
01027     IN BOOLEAN Create
01028     );
01029 
01030 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01031 <a class="code" href="../../d4/d3/parse_8c.html#a6">IopParseDevice</a>(
01032     IN PVOID ParseObject,
01033     IN PVOID ObjectType,
01034     IN <a class="code" href="../../d2/d5/struct__ACCESS__STATE.html">PACCESS_STATE</a> AccessState,
01035     IN KPROCESSOR_MODE AccessMode,
01036     IN ULONG Attributes,
01037     IN OUT PUNICODE_STRING CompleteName,
01038     IN OUT PUNICODE_STRING RemainingName,
01039     IN OUT PVOID Context OPTIONAL,
01040     IN PSECURITY_QUALITY_OF_SERVICE SecurityQos OPTIONAL,
01041     OUT PVOID *Object
01042     );
01043 
01044 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01045 <a class="code" href="../../d4/d3/parse_8c.html#a7">IopParseFile</a>(
01046     IN PVOID ParseObject,
01047     IN PVOID ObjectType,
01048     IN <a class="code" href="../../d2/d5/struct__ACCESS__STATE.html">PACCESS_STATE</a> AccessState,
01049     IN KPROCESSOR_MODE AccessMode,
01050     IN ULONG Attributes,
01051     IN OUT PUNICODE_STRING CompleteName,
01052     IN OUT PUNICODE_STRING RemainingName,
01053     IN OUT PVOID Context OPTIONAL,
01054     IN PSECURITY_QUALITY_OF_SERVICE SecurityQos OPTIONAL,
01055     OUT PVOID *Object
01056     );
01057 
01058 BOOLEAN
01059 <a class="code" href="../../d0/d6/iop_8h.html#a201">IopProtectSystemPartition</a>(
01060     IN <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock
01061     );
01062 
01063 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01064 <a class="code" href="../../d4/d3/parse_8c.html#a8">IopQueryName</a>(
01065     IN PVOID Object,
01066     IN BOOLEAN HasObjectName,
01067     OUT POBJECT_NAME_INFORMATION ObjectNameInfo,
01068     IN ULONG Length,
01069     OUT PULONG ReturnLength
01070     );
01071 
01072 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01073 <a class="code" href="../../d0/d6/iop_8h.html#a203">IopQueryXxxInformation</a>(
01074     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
01075     IN ULONG InformationClass,
01076     IN ULONG Length,
01077     OUT PVOID Information,
01078     OUT PULONG ReturnedLength,
01079     IN BOOLEAN FileInformation
01080     );
01081 
01082 <span class="comment">//+</span>
01083 <span class="comment">// VOID</span>
01084 <span class="comment">// IopQueueThreadIrp(</span>
01085 <span class="comment">//     IN PIRP Irp</span>
01086 <span class="comment">//     )</span>
01087 <span class="comment">//</span>
01088 <span class="comment">// Routine Description:</span>
01089 <span class="comment">//</span>
01090 <span class="comment">//     This routine queues the specified I/O Request Packet (IRP) to the thread</span>
01091 <span class="comment">//     whose TCB address is stored in the packet.</span>
01092 <span class="comment">//</span>
01093 <span class="comment">// Arguments:</span>
01094 <span class="comment">//</span>
01095 <span class="comment">//     Irp - Supplies the IRP to be queued for the specified thread.</span>
01096 <span class="comment">//</span>
01097 <span class="comment">// Return Value:</span>
01098 <span class="comment">//</span>
01099 <span class="comment">//     None.</span>
01100 <span class="comment">//</span>
01101 <span class="comment">//-</span>
01102 
<a name="l01103"></a><a class="code" href="../../d0/d6/iop_8h.html#a21">01103</a> <span class="preprocessor">#define IopQueueThreadIrp( Irp ) {                      \</span>
01104 <span class="preprocessor">    KIRQL irql;                                         \</span>
01105 <span class="preprocessor">    KeRaiseIrql( APC_LEVEL, &amp;irql );                    \</span>
01106 <span class="preprocessor">    InsertHeadList( &amp;Irp-&gt;Tail.Overlay.Thread-&gt;IrpList, \</span>
01107 <span class="preprocessor">                    &amp;Irp-&gt;ThreadListEntry );            \</span>
01108 <span class="preprocessor">    KeLowerIrql( irql );                                \</span>
01109 <span class="preprocessor">    }</span>
01110 <span class="preprocessor"></span>
01111 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01112 <a class="code" href="../../d0/d6/iop_8h.html#a204">IopQueueWorkRequest</a>(
01113     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> Irp
01114     );
01115 
01116 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01117 <a class="code" href="../../d0/d6/iop_8h.html#a205">IopRaiseHardError</a>(
01118     IN PVOID NormalContext,
01119     IN PVOID SystemArgument1,
01120     IN PVOID SystemArgument2
01121     );
01122 
01123 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01124 <a class="code" href="../../d0/d6/iop_8h.html#a206">IopRaiseInformationalHardError</a>(
01125     IN PVOID NormalContext,
01126     IN PVOID SystemArgument1,
01127     IN PVOID SystemArgument2
01128     );
01129 
01130 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01131 <a class="code" href="../../d0/d6/iop_8h.html#a207">IopReadyDeviceObjects</a>(
01132     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject
01133     );
01134 
01135 <span class="comment">//+</span>
01136 <span class="comment">//</span>
01137 <span class="comment">// VOID</span>
01138 <span class="comment">// IopReleaseFileObjectLock(</span>
01139 <span class="comment">//     IN PFILE_OBJECT FileObject</span>
01140 <span class="comment">// )</span>
01141 <span class="comment">//</span>
01142 <span class="comment">// Routine Description:</span>
01143 <span class="comment">//</span>
01144 <span class="comment">//     This routine is invoked to release ownership of the file object lock.</span>
01145 <span class="comment">//</span>
01146 <span class="comment">// Arguments:</span>
01147 <span class="comment">//</span>
01148 <span class="comment">//     FileObject - Pointer to the file object whose ownership is to be</span>
01149 <span class="comment">//         released.</span>
01150 <span class="comment">//</span>
01151 <span class="comment">// Return Value:</span>
01152 <span class="comment">//</span>
01153 <span class="comment">//     None.</span>
01154 <span class="comment">//</span>
01155 <span class="comment">//-</span>
01156 
<a name="l01157"></a><a class="code" href="../../d0/d6/iop_8h.html#a22">01157</a> <span class="preprocessor">#define IopReleaseFileObjectLock( FileObject ) {    \</span>
01158 <span class="preprocessor">    ULONG Result;                                   \</span>
01159 <span class="preprocessor">    Result = InterlockedExchange( &amp;FileObject-&gt;Busy, FALSE ); \</span>
01160 <span class="preprocessor">    ASSERT(Result != FALSE);                        \</span>
01161 <span class="preprocessor">    if (FileObject-&gt;Waiters != 0) {                 \</span>
01162 <span class="preprocessor">        KeSetEvent( &amp;FileObject-&gt;Lock, 0, FALSE );  \</span>
01163 <span class="preprocessor">    }                                               \</span>
01164 <span class="preprocessor">}</span>
01165 <span class="preprocessor"></span>
01166 <span class="preprocessor">#if _WIN32_WINNT &gt;= 0x0500</span>
01167 <span class="preprocessor"></span><a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01168 <a class="code" href="../../d2/d4/internal_8c.html#a62">IopSendMessageToTrackService</a>(
01169     IN PLINK_TRACKING_INFORMATION SourceVolumeId,
01170     IN PFILE_OBJECTID_BUFFER SourceObjectId,
01171     IN PFILE_TRACKING_INFORMATION TargetObjectInformation
01172     );
01173 <span class="preprocessor">#endif</span>
01174 <span class="preprocessor"></span>
01175 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01176 <a class="code" href="../../d0/d6/iop_8h.html#a208">IopSetEaOrQuotaInformationFile</a>(
01177     IN HANDLE FileHandle,
01178     OUT PIO_STATUS_BLOCK IoStatusBlock,
01179     IN PVOID Buffer,
01180     IN ULONG Length,
01181     IN BOOLEAN SetEa
01182     );
01183 
01184 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01185 <a class="code" href="../../d0/d6/iop_8h.html#a209">IopSetRemoteLink</a>(
01186     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
01187     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> DestinationFileObject OPTIONAL,
01188     IN PFILE_TRACKING_INFORMATION FileInformation OPTIONAL
01189     );
01190 
01191 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01192 <a class="code" href="../../d0/d6/iop_8h.html#a210">IopStartApcHardError</a>(
01193     IN PVOID StartContext
01194     );
01195 
01196 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01197 <a class="code" href="../../d0/d6/iop_8h.html#a211">IopSynchronousApiServiceTail</a>(
01198     IN NTSTATUS ReturnedStatus,
01199     IN <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> Event,
01200     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> Irp,
01201     IN KPROCESSOR_MODE RequestorMode,
01202     IN PIO_STATUS_BLOCK LocalIoStatus,
01203     OUT PIO_STATUS_BLOCK IoStatusBlock
01204     );
01205 
01206 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01207 <a class="code" href="../../d0/d6/iop_8h.html#a212">IopSynchronousServiceTail</a>(
01208     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
01209     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> Irp,
01210     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
01211     IN BOOLEAN DeferredIoCompletion,
01212     IN KPROCESSOR_MODE RequestorMode,
01213     IN BOOLEAN SynchronousIo,
01214     IN TRANSFER_TYPE TransferType
01215     );
01216 
01217 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01218 <a class="code" href="../../d0/d6/iop_8h.html#a213">IopTimerDispatch</a>(
01219     IN <a class="code" href="../../d1/d6/struct__KDPC.html">PKDPC</a> Dpc,
01220     IN PVOID DeferredContext,
01221     IN PVOID SystemArgument1,
01222     IN PVOID SystemArgument2
01223     );
01224 
01225 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01226 <a class="code" href="../../d0/d6/iop_8h.html#a214">IopTrackLink</a>(
01227     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
01228     IN OUT PIO_STATUS_BLOCK IoStatusBlock,
01229     IN PFILE_TRACKING_INFORMATION FileInformation,
01230     IN ULONG Length,
01231     IN <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> Event,
01232     IN KPROCESSOR_MODE RequestorMode
01233     );
01234 
01235 
01236 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01237 <a class="code" href="../../d0/d6/iop_8h.html#a215">IopUserCompletion</a>(
01238     IN <a class="code" href="../../d1/d5/struct__KAPC.html">PKAPC</a> Apc,
01239     IN PKNORMAL_ROUTINE *NormalRoutine,
01240     IN PVOID *NormalContext,
01241     IN PVOID *SystemArgument1,
01242     IN PVOID *SystemArgument2
01243     );
01244 
01245 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01246 <a class="code" href="../../d0/d6/iop_8h.html#a216">IopXxxControlFile</a>(
01247     IN HANDLE FileHandle,
01248     IN HANDLE Event OPTIONAL,
01249     IN PIO_APC_ROUTINE ApcRoutine OPTIONAL,
01250     IN PVOID ApcContext OPTIONAL,
01251     OUT PIO_STATUS_BLOCK IoStatusBlock,
01252     IN ULONG IoControlCode,
01253     IN PVOID InputBuffer OPTIONAL,
01254     IN ULONG InputBufferLength,
01255     OUT PVOID OutputBuffer OPTIONAL,
01256     IN ULONG OutputBufferLength,
01257     IN BOOLEAN DeviceIoControl
01258     );
01259 
01260 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01261 <a class="code" href="../../d0/d6/iop_8h.html#a217">IopReportResourceUsage</a>(
01262     IN PUNICODE_STRING DriverClassName OPTIONAL,
01263     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject,
01264     IN PCM_RESOURCE_LIST DriverList OPTIONAL,
01265     IN ULONG DriverListSize OPTIONAL,
01266     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject OPTIONAL,
01267     IN PCM_RESOURCE_LIST DeviceList OPTIONAL,
01268     IN ULONG DeviceListSize OPTIONAL,
01269     IN BOOLEAN OverrideConflict,
01270     OUT PBOOLEAN ConflictDetected
01271     );
01272 
01273 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01274 <a class="code" href="../../d4/d6/netboot_8c.html#a10">IopAddRemoteBootValuesToRegistry</a> (
01275     <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock
01276     );
01277 
01278 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01279 <a class="code" href="../../d4/d6/netboot_8c.html#a11">IopStartNetworkForRemoteBoot</a> (
01280     <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock
01281     );
01282 
01283 <span class="preprocessor">#if defined(REMOTE_BOOT)</span>
01284 <span class="preprocessor"></span><a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01285 IopShutdownCsc (
01286     VOID
01287     );
01288 <span class="preprocessor">#endif</span>
01289 <span class="preprocessor"></span>
01290 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01291 <a class="code" href="../../d4/d6/netboot_8c.html#a13">IopStartTcpIpForRemoteBoot</a> (
01292     <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock
01293     );
01294 
01295 BOOLEAN
01296 <a class="code" href="../../d4/d6/netboot_8c.html#a14">IopIsRemoteBootCard</a>(
01297     IN <a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a> DeviceNode,
01298     IN <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock,
01299     IN PWCHAR HwIds
01300     );
01301 
01302 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01303 <a class="code" href="../../d4/d6/netboot_8c.html#a15">IopSetupRemoteBootCard</a>(
01304     IN <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock,
01305     IN HANDLE UniqueIdHandle,
01306     IN PUNICODE_STRING UnicodeDeviceInstance
01307     );
01308 
01309 BOOLEAN
01310 <a class="code" href="../../d0/d6/iop_8h.html#a223">IopSafebootDriverLoad</a>(
01311     PUNICODE_STRING DriverId
01312     );
01313 
01314 PSECURITY_DESCRIPTOR
01315 <a class="code" href="../../d4/d6/iosubs_8c.html#a127">IopCreateDefaultDeviceSecurityDescriptor</a>(
01316     IN DEVICE_TYPE DeviceType,
01317     IN ULONG DeviceCharacteristics,
01318     IN BOOLEAN DeviceHasName,
01319     IN PUCHAR Buffer,
01320     OUT PACL *AllocatedAcl,
01321     OUT PSECURITY_INFORMATION SecurityInformation OPTIONAL
01322     );
01323 
01324 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01325 <a class="code" href="../../d4/d6/iosubs_8c.html#a86">IopDoNameTransmogrify</a>(
01326     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> Irp,
01327     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> FileObject,
01328     IN PREPARSE_DATA_BUFFER ReparseBuffer
01329     );
01330 
01331 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01332 <a class="code" href="../../d9/d0/pnpiop_8h.html#a330">IopQueryDeviceCapabilities</a>(
01333     IN <a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a> DeviceNode,
01334     OUT <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html">PDEVICE_CAPABILITIES</a> Capabilities
01335     );
01336 
01337 <span class="comment">//</span>
01338 <span class="comment">// dump support routines</span>
01339 <span class="comment">//</span>
01340 <span class="comment">//Used for error logging</span>
01341 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01342 <a class="code" href="../../d0/d6/iop_8h.html#a227">IopLogErrorEvent</a>(
01343     IN ULONG            SequenceNumber,
01344     IN ULONG            UniqueErrorValue,
01345     IN NTSTATUS         FinalStatus,
01346     IN NTSTATUS         SpecificIOStatus,
01347     IN ULONG            LengthOfInsert1,
01348     IN PWCHAR           Insert1,
01349     IN ULONG            LengthOfInsert2,
01350     IN PWCHAR           Insert2
01351     );
01352 
01353 BOOLEAN
01354 <a class="code" href="../../d0/d6/iop_8h.html#a228">IopConfigureCrashDump</a>(
01355     IN HANDLE HandlePagingFile
01356     );
01357 
01358 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01359 <a class="code" href="../../d4/d6/iosubs_8c.html#a129">IopUpdateOtherOperationCount</a>(
01360     VOID
01361     );
01362 
01363 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01364 <a class="code" href="../../d4/d6/iosubs_8c.html#a130">IopUpdateReadOperationCount</a>(
01365     VOID
01366     );
01367 
01368 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01369 <a class="code" href="../../d4/d6/iosubs_8c.html#a131">IopUpdateWriteOperationCount</a>(
01370     VOID
01371     );
01372 
01373 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01374 <a class="code" href="../../d4/d6/iosubs_8c.html#a132">IopUpdateOtherTransferCount</a>(
01375     IN ULONG TransferCount
01376     );
01377 
01378 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01379 <a class="code" href="../../d4/d6/iosubs_8c.html#a133">IopUpdateReadTransferCount</a>(
01380     IN ULONG TransferCount
01381     );
01382 
01383 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01384 <a class="code" href="../../d4/d6/iosubs_8c.html#a134">IopUpdateWriteTransferCount</a>(
01385     IN ULONG TransferCount
01386     );
01387 
01388 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01389 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01390 <a class="code" href="../../d4/d6/iosubs_8c.html#a28">IopfCallDriver</a>(
01391     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>  DeviceObject,
01392     <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>            Irp
01393     );
01394 
01395 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01396 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
01397 <a class="code" href="../../d4/d6/iosubs_8c.html#a40">IopfCompleteRequest</a>(
01398     IN  <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>    Irp,
01399     IN  CCHAR   PriorityBost
01400     );
01401 
01402 
01403 <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>
01404 <a class="code" href="../../d4/d6/iosubs_8c.html#a18">IopAllocateIrpPrivate</a>(
01405     IN  CCHAR   StackSize,
01406     IN  BOOLEAN ChargeQuota
01407     );
01408 
01409 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01410 <a class="code" href="../../d4/d6/iosubs_8c.html#a64">IopFreeIrp</a>(
01411     IN  <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>    Irp
01412     );
01413 
01414 PVOID
01415 <a class="code" href="../../d4/d6/iosubs_8c.html#a16">IopAllocateErrorLogEntry</a>(
01416     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> deviceObject,
01417     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> driverObject,
01418     IN UCHAR EntrySize
01419     );
01420 <span class="preprocessor">#endif // _IOP_</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:29 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

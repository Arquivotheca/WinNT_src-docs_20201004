<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: jul98/dll32/profcrd.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>profcrd.c File Reference</h1><code>#include "<a class="el" href="../../d4/d9/jul98_2dll32_2generic_8h-source.html">generic.h</a>"</code><br>
<code>#include "<a class="el" href="../../d0/d8/jul98_2dll32_2icmstr_8h-source.html">icmstr.h</a>"</code><br>

<p>
<a href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a0">ICMSEG</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a1">MAXCOLOR8</a>&nbsp;&nbsp;&nbsp;255</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a2">CreateHostInputOutputArray</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a20">PMEMPTR</a> ppArray, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> numChan, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> tableSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> <a class="el" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> Tag, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> Buff)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a3">CheckInputOutputTable</a> (<a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut, float far *fTemp, BOOL, BOOL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a4">GetHostCSA_Intent</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBuffer, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, int Type)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a5">CheckColorLookupTable</a> (<a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut, float far *fTemp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a6">DoHostConversionCRD</a> (<a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostCRD, <a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostCSA, float far *Input, float far *Output, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> ColorSpace, BOOL bCheckOutputTable)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a7">DoHostConversionCSA</a> (<a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut, float far *Input, float far *Output)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a8">GetCRDInputOutputArraySize</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> lpInTbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> lpOutTbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a27">LPCSIG</a> lpIntentTag, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> lpGrids)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a9">LabToXYZ</a> (float far *Input, float far *Output, float far *whitePoint)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a10">GetCLUTinfo</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> LutTag, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpLut, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> nInputCh, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> nOutputCh, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> nGrids, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> nInputTable, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> nOutputTable, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> size)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a11">GetHostCSA</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> <a class="el" href="../../d7/d0/cmdat2_8c.html#a27">Index</a>, int Type)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HGLOBAL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a12">GetTRCData</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a29">LPMEMPTR</a> lpRed, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a29">LPMEMPTR</a> lpGreen, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a29">LPMEMPTR</a> lpBlue, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> lpnRed, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> lpnGreen, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a> lpnBlue)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a13">CreateHostTRCInputTable</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpRed, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpGreen, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBlue)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a14">CreateHostRevTRCInputTable</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpRed, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpGreen, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBlue)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a15">GetHostMatrixCSAorCRD</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, BOOL bCSA)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a16">GetHostColorSpaceArray</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InputIntent, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBuffer, LPDWORD lpcbSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a17">CreateHostLutCRD</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> <a class="el" href="../../d7/d0/cmdat2_8c.html#a27">Index</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InputIntent)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a18">GetHostColorRenderingDictionary</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>float&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a19">g</a> (float f)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>float&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a20">inverse_g</a> (float f)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a21">TableInterp3</a> (<a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut, float far *fTemp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a22">TableInterp4</a> (<a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut, float far *fTemp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a23">XYZToLab</a> (float far *Input, float far *Output, float far *whitePoint)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a24">ApplyMatrix</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a23">PFLOAT</a> e, float far *Input, float far *Output)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a25">CreateOutputArray</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nOutputCh, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nOutputTable, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> <a class="el" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> Tag, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> Buff, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpHostClut)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a26">CreateInputArray</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nInputCh, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nInputTable, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> Tag, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> Buff, BOOL bAllowBinary, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpHostClut)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a27">SendCRDLMN</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> whitePoint, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> mediaWP, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> pcs)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a28">SendCRDPQR</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> whitePoint)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a29">SendCRDABC</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> PublicArrayName, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> pcs, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nInputCh, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> Buff, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> e, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> LutTag, BOOL bAllowBinary)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a30">SendCRDBWPoint</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a> whitePoint)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a31">SendCRDOutputTable</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> PublicArrayName, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nOutputCh, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> LutTag, BOOL bHost, BOOL bAllowBinary)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL EXTERN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a32">GetPS2PreviewColorRenderingDictionary</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cpDev, <a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cpTarget, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, BOOL bAllowBinary)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="jul98/dll32/profcrd.c::ICMSEG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ICMSEG          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="jul98/dll32/profcrd.c::MAXCOLOR8" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAXCOLOR8&nbsp;&nbsp;&nbsp;255          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00006">6</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a24" doxytag="jul98/dll32/profcrd.c::ApplyMatrix" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ApplyMatrix           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a23">PFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>e</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Input</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Output</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01143">1143</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>.
<p>
<pre class="fragment"><div>01144 {
01145     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>  i, j;
01146 
01147     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01148     {
01149         j = i*3;
01150         Output[i] = e[j ]    * Input[0] +
01151                     e[j + 1] * Input[1] +
01152                     e[j + 2] * Input[2];
01153     }
01154 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="jul98/dll32/profcrd.c::CheckColorLookupTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CheckColorLookupTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>fTemp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01032">1032</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l06470">TableInterp3()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06557">TableInterp4()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>01033 {
01034     <span class="keywordflow">if</span> (lpHostClut-&gt;inputChan == 3)
01035     {
01036         <a class="code" href="../../d2/d9/ps2_8c.html#a246">TableInterp3</a>(lpHostClut, fTemp);
01037     }
01038     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(lpHostClut-&gt;inputChan == 4)
01039     {
01040         <a class="code" href="../../d2/d9/ps2_8c.html#a247">TableInterp4</a>(lpHostClut, fTemp);
01041     }
01042     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01043 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="jul98/dll32/profcrd.c::CheckInputOutputTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CheckInputOutputTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>fTemp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01056">1056</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00004">MAXCHANNELS</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00082">PMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>01058 {
01059     <span class="keywordtype">int</span>     i;
01060     <span class="keywordtype">short</span>   Grids;
01061     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>  floor1, ceiling1;
01062     <span class="keywordtype">float</span>   fIndex;
01063     <span class="keywordtype">int</span>     numChan;
01064     <span class="keywordtype">int</span>     numEnt;
01065     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a20">PMEMPTR</a> ppArray;
01066 
01067     <span class="keywordflow">if</span> (bInputTable)
01068     {
01069         numChan = lpHostClut-&gt;inputChan;
01070         numEnt = lpHostClut-&gt;inputEnt - 1;
01071         ppArray = lpHostClut-&gt;inputArray;
01072     }
01073     <span class="keywordflow">else</span>
01074     {
01075         numChan = lpHostClut-&gt;outputChan;
01076         numEnt = lpHostClut-&gt;outputEnt - 1;
01077         ppArray = lpHostClut-&gt;outputArray;
01078     }
01079 
01080     Grids = lpHostClut-&gt;clutPoints;
01081     <span class="keywordflow">for</span> (i = 0; (i &lt;= <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>) &amp;&amp; (i &lt; numChan); i++)
01082     {
01083         fTemp[i] = (fTemp[i] &lt; 0)? 0: ((fTemp[i] &gt; 1)? 1: fTemp[i]);
01084         fIndex = fTemp[i] * numEnt;
01085         <span class="keywordflow">if</span> (lpHostClut-&gt;lutBits == 8)
01086         {
01087             floor1 = ppArray[i][(<span class="keywordtype">int</span>)fIndex];
01088             ceiling1 = ppArray[i][((<span class="keywordtype">int</span>)fIndex) + 1];
01089             fTemp[i] = (<span class="keywordtype">float</span>)(floor1 + (ceiling1 - floor1) * (fIndex - floor(fIndex)));
01090             <span class="keywordflow">if</span> (bCSA &amp;&amp; !bInputTable)
01091                 fTemp[i] = (<span class="keywordtype">float</span>)(fTemp[i] / 127.0);
01092             <span class="keywordflow">else</span>
01093                 fTemp[i] = (<span class="keywordtype">float</span>)(fTemp[i] / 255.0);
01094         }
01095         <span class="keywordflow">else</span>
01096         {
01097             floor1 = ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)(ppArray[i]))[(<span class="keywordtype">int</span>)fIndex];
01098             ceiling1 = ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)(ppArray[i]))[((<span class="keywordtype">int</span>)fIndex) + 1];
01099             fTemp[i] = (<span class="keywordtype">float</span>)(floor1 + (ceiling1 - floor1) * (fIndex - floor(fIndex)));
01100             <span class="keywordflow">if</span> (bCSA &amp;&amp; !bInputTable)
01101                 fTemp[i] = (<span class="keywordtype">float</span>)(fTemp[i] / 32767.0);
01102             <span class="keywordflow">else</span>
01103                 fTemp[i] = (<span class="keywordtype">float</span>)(fTemp[i] / 65535.0);
01104 
01105         }
01106         <span class="keywordflow">if</span> (bInputTable)
01107         {
01108             fTemp[i] *= (Grids - 1);
01109             <span class="keywordflow">if</span> (fTemp[i] &gt; (Grids - 1))
01110                 fTemp[i] = (<span class="keywordtype">float</span>)(Grids - 1);
01111         }
01112     }
01113     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01114 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="jul98/dll32/profcrd.c::CreateHostInputOutputArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateHostInputOutputArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a20">PMEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ppArray</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>numChan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>tableSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Tag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Buff</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00053">53</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d8/heapdbg_8c-source.html#l00033">Offset</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00056 {
00057     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i, j;
00058     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> lpMemPtr16;
00059     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpMemPtr8;
00060     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpTable;
00061 
00062     <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00063         lpMemPtr8 = lpMem;
00064     <span class="keywordflow">else</span>
00065         lpMemPtr16 = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)lpMem;
00066 
00067     <span class="keywordflow">for</span> (i = 0; i &lt; numChan; i++)
00068     {
00069         <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00070         {
00071             ppArray[i] = lpMemPtr8;
00072             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) Buff)-&gt;lut.data) +
00073                 <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a> +
00074                 tableSize * i;
00075             MemCopy(lpMemPtr8, lpTable, tableSize);
00076                 lpMemPtr8 += tableSize;
00077         }
00078         <span class="keywordflow">else</span>
00079         {
00080             ppArray[i] = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>)lpMemPtr16;
00081             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) Buff)-&gt;lut.data) +
00082                 2 * <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a> +
00083                 2 * tableSize * i;
00084             <span class="keywordflow">for</span> (j = 0; j &lt; tableSize; j++)
00085             {
00086                 *lpMemPtr16++ = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>) <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a2">ui16toSINT</a> (lpTable);
00087                 lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
00088             }
00089         }
00090     }
00091     <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00092         <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>)lpMemPtr8 - lpMem));
00093     <span class="keywordflow">else</span>
00094         <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>)lpMemPtr16 - lpMem));
00095 
00096 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="jul98/dll32/profcrd.c::CreateHostLutCRD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateHostLutCRD           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Index</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00587">587</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00015">CIEXYZRange</a>, <a class="el" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a48a47">CP_POSTSCRIPT_ERR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05728">CreateHostInputOutputArray()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00099">GetCLUTinfo()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04087">GetCPMediaWhitePoint()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00461">GetCPTagSig()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00358">icS15Fixed16Number</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00220">icSigLut16Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00247">icSigXYZData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00028">LPHOSTCLUT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00021">SetCPLastError()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00157">si16f16toSFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00588 {
00589     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     nInputCh, nOutputCh, nGrids;
00590     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     nInputTable, nOutputTable, nNumbers;
00591     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>     Tag, PCS;
00592     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>     IntentSig;
00593 
00594     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     Ret;
00595     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     i, j;
00596     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>   lpTable;
00597 
00598     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>   Buff = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00599     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     MemSize = 0;
00600     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>   lpOldMem = lpMem;
00601     HGLOBAL  hMem;
00602     <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>  lpHostClut;
00603 
00604     <span class="comment">// Check if we can generate the CRD</span>
00605     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a15">GetCPTagSig</a> (cp, Index, (LPCSIG) &amp; IntentSig) ||
00606         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; Tag) ||
00607         ((Tag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>) &amp;&amp; (Tag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a90">icSigLut16Type</a>)) ||
00608         !<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00609         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; MemSize) ||
00610         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (MemSize, (HGLOBAL FAR *)&amp;hMem, (LPMEMPTR) &amp; Buff) ||
00611         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, Buff, MemSize))
00612     {
00613         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> != Buff)
00614         {
00615             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
00616         }
00617         <span class="keywordflow">return</span> (0);
00618     }
00619 
00620     <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a7">GetCLUTinfo</a>(Tag, Buff, &amp;nInputCh, &amp;nOutputCh, 
00621                 &amp;nGrids, &amp;nInputTable, &amp;nOutputTable, &amp;i);
00622 
00623     <span class="keywordflow">if</span> (((nOutputCh != 3) &amp;&amp; (nOutputCh != 4)) ||
00624         (nInputCh != 3))
00625     {
00626         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a39">SetCPLastError</a> (CP_POSTSCRIPT_ERR);
00627         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
00628         <span class="keywordflow">return</span> (0);
00629     }
00630 
00631     <span class="comment">// First Pass. This is a size request</span>
00632     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)       
00633     {
00634         Ret = nInputCh * nInputTable * i         +  <span class="comment">// Input table 8/16-bits</span>
00635             nOutputCh * nOutputTable * i         +  <span class="comment">// Output table 8/16-bits</span>
00636             nOutputCh * nGrids * nGrids * nGrids +  <span class="comment">// CLUT 8-bits only</span>
00637             <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>)                     +  <span class="comment">// Data structure </span>
00638             1024;                                   <span class="comment">// safe</span>
00639 
00640         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
00641         <span class="keywordflow">return</span> (Ret);
00642     }
00643          
00644     <span class="comment">// Second Pass. Get a HostCRD</span>
00645     lpHostClut = (<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpMem;
00646     lpMem += <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>);
00647     lpHostClut-&gt;size = <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>);
00648     lpHostClut-&gt;pcs = PCS;
00649     lpHostClut-&gt;intent = InputIntent;
00650     lpHostClut-&gt;lutBits = (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)? 8:16;
00651 
00652     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT)lpHostClut-&gt;whitePoint);          <span class="comment">// .. Illuminant</span>
00653 
00654     <span class="comment">// Support absolute whitePoint</span>
00655     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a192">GetCPMediaWhitePoint</a> (cp, (LPSFLOAT)lpHostClut-&gt;mediaWP)) <span class="comment">// .. Media WhitePoint</span>
00656     {
00657         lpHostClut-&gt;mediaWP[0] = lpHostClut-&gt;whitePoint[0];
00658         lpHostClut-&gt;mediaWP[1] = lpHostClut-&gt;whitePoint[1];
00659         lpHostClut-&gt;mediaWP[2] = lpHostClut-&gt;whitePoint[2];
00660     }
00661     lpHostClut-&gt;inputChan = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)nInputCh;
00662     lpHostClut-&gt;outputChan = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)nOutputCh;
00663     lpHostClut-&gt;clutPoints = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)nGrids;
00664     lpHostClut-&gt;inputEnt = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)nInputTable;
00665     lpHostClut-&gt;outputEnt = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)nOutputTable;
00666 
00667 <span class="comment">//******** Input array</span>
00668     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a237">CreateHostInputOutputArray</a> (lpMem, lpHostClut-&gt;inputArray, 
00669              nInputCh, nInputTable, 0, Tag, Buff);
00670 <span class="comment">//******** the offset to the position of output array.</span>
00671     i = nInputTable * nInputCh +
00672         nGrids * nGrids * nGrids * nOutputCh;
00673 <span class="comment">//******** Output array</span>
00674     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a237">CreateHostInputOutputArray</a> (lpMem, lpHostClut-&gt;outputArray, 
00675              nOutputCh, nOutputTable, i, Tag, Buff);
00676 <span class="comment">//******** Matrix.</span>
00677     <span class="keywordflow">if</span> (PCS == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>)
00678     {
00679         <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00680         {
00681             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) &amp; ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) Buff)-&gt;lut.e00;
00682         } <span class="keywordflow">else</span>
00683         {
00684             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) &amp; ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) Buff)-&gt;lut.e00;
00685         }
00686         <span class="keywordflow">for</span> (i = 0; i &lt; 9; i++)
00687         {
00688             lpHostClut-&gt;e[i] = (<span class="keywordtype">float</span>)((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a9">si16f16toSFLOAT</a> (lpTable)) / <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a3">CIEXYZRange</a>);
00689             lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a192">icS15Fixed16Number</a>);
00690         }
00691     }
00692 <span class="comment">//********** RenderTable</span>
00693     nNumbers = nGrids * nGrids * nOutputCh;
00694     lpHostClut-&gt;clut = lpMem;
00695     <span class="keywordflow">for</span> (i = 0; i &lt; nGrids; i++)        <span class="comment">// Na strings should be sent</span>
00696     {
00697         <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00698         {
00699             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) Buff)-&gt;lut.data) +
00700                 nInputTable * nInputCh +
00701                 nNumbers * i;
00702         } <span class="keywordflow">else</span>
00703         {
00704             lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) Buff)-&gt;lut.data) +
00705                 2 * nInputTable * nInputCh +
00706                 2 * nNumbers * i;
00707         }
00708         <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00709         {
00710             MemCopy(lpMem, lpTable, nNumbers);
00711             lpMem += nNumbers;
00712         }
00713         <span class="keywordflow">else</span>
00714         {
00715             <span class="keywordflow">for</span> (j = 0; j &lt; nNumbers; j++)
00716             {
00717                 *lpMem++ = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)(<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a2">ui16toSINT</a> (lpTable) / 256);
00718                 lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
00719             }
00720         }
00721     }
00722 
00723     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
00724     <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) ((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) (lpMem - lpOldMem)));
00725 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="jul98/dll32/profcrd.c::CreateHostRevTRCInputTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateHostRevTRCInputTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpRed</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpGreen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBlue</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00358">358</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l03944">GetRevCurve()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, and <a class="el" href="../../d2/d5/aug98_2dll32_2icm_8h-source.html#l00060">REVCURVE_RATIO</a>.
<p>
<pre class="fragment"><div>00360 {
00361     HGLOBAL   hTemp;
00362     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>    lpTemp;
00363 
00364     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (lpHostClut-&gt;outputEnt * (REVCURVE_RATIO + 1) * 2 ,
00365                   (HGLOBAL FAR *) &amp;hTemp, (LPMEMPTR) &amp;lpTemp))
00366     {
00367         <span class="keywordflow">return</span> (0);
00368     }
00369 
00370     lpHostClut-&gt;outputArray[0] = lpMem;
00371     <a class="code" href="../../d2/d9/ps2_8c.html#a218">GetRevCurve</a> (lpRed, lpTemp, lpHostClut-&gt;outputArray[0]);
00372     lpHostClut-&gt;outputArray[1] = lpHostClut-&gt;outputArray[0] +
00373                                 2 * <a class="code" href="../../d1/d6/aug98_2dll32_2icm_8h.html#a32">REVCURVE_RATIO</a> * lpHostClut-&gt;outputEnt;
00374     <a class="code" href="../../d2/d9/ps2_8c.html#a218">GetRevCurve</a> (lpGreen, lpTemp, lpHostClut-&gt;outputArray[1]);
00375     lpHostClut-&gt;outputArray[2] = lpHostClut-&gt;outputArray[1] +
00376                                 2 * <a class="code" href="../../d1/d6/aug98_2dll32_2icm_8h.html#a32">REVCURVE_RATIO</a> * lpHostClut-&gt;outputEnt;
00377     <a class="code" href="../../d2/d9/ps2_8c.html#a218">GetRevCurve</a> (lpBlue, lpTemp, lpHostClut-&gt;outputArray[2]);
00378 
00379     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hTemp);
00380     <span class="keywordflow">return</span> ( 2 * <a class="code" href="../../d1/d6/aug98_2dll32_2icm_8h.html#a32">REVCURVE_RATIO</a> * lpHostClut-&gt;outputEnt * 3);
00381 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="jul98/dll32/profcrd.c::CreateHostTRCInputTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateHostTRCInputTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpRed</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpGreen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBlue</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00322">322</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00117">lpcpCurveType</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00324 {
00325     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i;
00326     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> lpPtr16;
00327     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpTable;
00328 
00329     lpPtr16 = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)lpMem;
00330    
00331     lpHostClut-&gt;inputArray[0] = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>)lpPtr16;
00332     lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>)(((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpRed)-&gt;curve.data);
00333     <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpHostClut-&gt;inputEnt); i++)
00334     {
00335         *lpPtr16++ = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>) <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a2">ui16toSINT</a>(lpTable);
00336         lpTable += <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
00337     }
00338 
00339     lpHostClut-&gt;inputArray[1] = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>)lpPtr16;
00340     lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>)(((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpGreen)-&gt;curve.data);
00341     <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpHostClut-&gt;inputEnt); i++)
00342     {
00343         *lpPtr16++ = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>) <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a2">ui16toSINT</a>(lpTable);
00344         lpTable += <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
00345     }
00346 
00347     lpHostClut-&gt;inputArray[2] = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>)lpPtr16;
00348     lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>)(((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a35">lpcpCurveType</a>) lpBlue)-&gt;curve.data);
00349     <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpHostClut-&gt;inputEnt); i++)
00350     {
00351         *lpPtr16++ = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>) <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a2">ui16toSINT</a>(lpTable);
00352         lpTable += <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
00353     }
00354     <span class="keywordflow">return</span> ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>)lpPtr16 - lpMem);
00355 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="jul98/dll32/profcrd.c::CreateInputArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateInputArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nInputCh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nInputTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Tag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Buff</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAllowBinary</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01563">1563</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00005">BeginString</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00055">DefOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00006">EndString</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00220">icSigLut16Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00087">InputArray</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00028">LPHOSTCLUT</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00089">PreViewInArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00064">Slash</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04401">WriteByteString()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04351">WriteHexBuffer()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04274">WriteHNAToken()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04296">WriteIntStringU2S()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04324">WriteIntStringU2S_L()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01152">WriteObjectN()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04381">WriteStringToken()</a>.
<p>
<pre class="fragment"><div>01566 {
01567     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i, j;
01568     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem;
01569     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
01570     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
01571     lpOldMem = lpMem;
01572 
01573     <span class="keywordflow">if</span> (lpHostClut)
01574     {
01575         nInputCh = (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;inputChan);
01576         nInputTable = (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;inputEnt);
01577         Tag = (((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;lutBits == 8)? 
01578                <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a> : <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a90">icSigLut16Type</a>;
01579     }
01580 
01581     <span class="keywordflow">for</span> (i = 0; i &lt; nInputCh; i++)
01582     {
01583         lpLineStart = lpMem;
01584         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, Slash);
01585         <span class="keywordflow">if</span> (lpHostClut)
01586             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, PreViewInArray);
01587         <span class="keywordflow">else</span>
01588             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, InputArray);
01589         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a44">WriteObjectN</a> (lpMem, Intent, lstrlen (Intent));
01590         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, i);
01591 
01592         <span class="keywordflow">if</span> (lpHostClut)
01593         {
01594             lpTable = ((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;inputArray[i];
01595         }
01596         <span class="keywordflow">else</span>
01597         {
01598             <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01599                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) Buff)-&gt;lut.data) + nInputTable * i;
01600             <span class="keywordflow">else</span>
01601                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) Buff)-&gt;lut.data) + 2 * nInputTable * i;
01602         }
01603         <span class="keywordflow">if</span> (!bAllowBinary)               <span class="comment">// Output ASCII CRD</span>
01604         {
01605             <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01606             {
01607                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginString);
01608                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a227">WriteHexBuffer</a> (lpMem, lpTable,lpLineStart, nInputTable);
01609                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndString);
01610             } <span class="keywordflow">else</span>
01611             {
01612                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01613                 <span class="keywordflow">for</span> (j = 0; j &lt; nInputTable; j++)
01614                 {
01615                     <span class="keywordflow">if</span>(lpHostClut)
01616                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, *((PUSHORT)lpTable));
01617                     <span class="keywordflow">else</span>
01618                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
01619                     lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
01620                     <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
01621                     {
01622                         lpLineStart = lpMem;
01623                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01624                     }
01625                 }
01626                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01627             }
01628         } <span class="keywordflow">else</span>
01629         {                               <span class="comment">// Output BINARY CRD</span>
01630             <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01631             {
01632                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a228">WriteStringToken</a> (lpMem, 143, 256);
01633                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a229">WriteByteString</a> (lpMem, lpTable, 256L);
01634             } <span class="keywordflow">else</span>
01635             {
01636                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a224">WriteHNAToken</a> (lpMem, 149, nInputTable);
01637                 <span class="keywordflow">if</span> (lpHostClut)
01638                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a226">WriteIntStringU2S_L</a> (lpMem, lpTable, nInputTable);
01639                 <span class="keywordflow">else</span>
01640                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a225">WriteIntStringU2S</a> (lpMem, lpTable, nInputTable);
01641             }
01642         }
01643         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DefOp);
01644     }
01645 
01646     <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpOldMem));
01647 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="jul98/dll32/profcrd.c::CreateOutputArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateOutputArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nOutputCh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nOutputTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Tag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Buff</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01452">1452</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00108">AllowBinary</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00005">BeginString</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00055">DefOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00006">EndString</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00220">icSigLut16Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00028">LPHOSTCLUT</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d8/heapdbg_8c-source.html#l00033">Offset</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00088">OutputArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00090">PreViewOutArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00064">Slash</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04401">WriteByteString()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04351">WriteHexBuffer()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04274">WriteHNAToken()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04296">WriteIntStringU2S()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04324">WriteIntStringU2S_L()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01152">WriteObjectN()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04381">WriteStringToken()</a>.
<p>
<pre class="fragment"><div>01455 {
01456     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i, j;
01457     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem;
01458     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
01459     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
01460     lpOldMem = lpMem;
01461 
01462     <span class="keywordflow">if</span> (lpHostClut)
01463     {
01464         nOutputCh = (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;outputChan);
01465         nOutputTable = (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;outputEnt);
01466         Tag = (((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;lutBits == 8)? 
01467               <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a> : <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a90">icSigLut16Type</a>;
01468     }
01469 
01470     <span class="keywordflow">for</span> (i = 0; i &lt; nOutputCh; i++)
01471     {
01472         lpLineStart = lpMem;
01473         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, Slash);
01474         <span class="keywordflow">if</span> (lpHostClut)
01475             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, PreViewOutArray);
01476         <span class="keywordflow">else</span>
01477             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, OutputArray);
01478         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a44">WriteObjectN</a> (lpMem, Intent, lstrlen (Intent));
01479         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, i);
01480         
01481         <span class="keywordflow">if</span> (lpHostClut)
01482             lpTable = ((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpHostClut)-&gt;outputArray[i];
01483         <span class="keywordflow">else</span>
01484         {
01485             <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01486                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) Buff)-&gt;lut.data) +
01487                     <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a> +
01488                     nOutputTable * i;
01489             <span class="keywordflow">else</span>
01490                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) Buff)-&gt;lut.data) +
01491                     2 * <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a> +
01492                     2 * nOutputTable * i;
01493         }
01494 
01495         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a27">AllowBinary</a>)               <span class="comment">// Output ASCII CRD</span>
01496         {
01497             <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01498             {
01499                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginString);
01500                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a227">WriteHexBuffer</a> (lpMem, lpTable, lpLineStart, nOutputTable);
01501                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndString);
01502             } <span class="keywordflow">else</span>
01503             {
01504                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01505                 <span class="keywordflow">for</span> (j = 0; j &lt; nOutputTable; j++)
01506                 {
01507                     <span class="keywordflow">if</span> (lpHostClut)
01508                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, *((PUSHORT)lpTable));
01509                     <span class="keywordflow">else</span>
01510                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ui16toSINT (lpTable));
01511                     lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
01512                     <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
01513                     {
01514                         lpLineStart = lpMem;
01515                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01516                     }
01517                 }
01518                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01519             }
01520         } <span class="keywordflow">else</span>
01521         {                               <span class="comment">// Output BINARY CRD</span>
01522             <span class="keywordflow">if</span> (Tag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01523             {
01524                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a228">WriteStringToken</a> (lpMem, 143, 256);
01525                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a229">WriteByteString</a> (lpMem, lpTable, 256L);
01526             } <span class="keywordflow">else</span>
01527             {
01528                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a224">WriteHNAToken</a> (lpMem, 149, nOutputTable);
01529                 <span class="keywordflow">if</span> (lpHostClut)
01530                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a226">WriteIntStringU2S_L</a> (lpMem, lpTable, nOutputTable);
01531                 <span class="keywordflow">else</span>
01532                     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a225">WriteIntStringU2S</a> (lpMem, lpTable, nOutputTable);
01533             }
01534         }
01535         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DefOp);
01536     }
01537 
01538     <span class="keywordflow">return</span> ((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpOldMem));
01539 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="jul98/dll32/profcrd.c::DoHostConversionCRD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL DoHostConversionCRD           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostCRD</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostCSA</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Input</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Output</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ColorSpace</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bCheckOutputTable</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01169">1169</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l06726">ApplyMatrix()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06757">CheckColorLookupTable()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06295">CheckInputOutputTable()</a>, <a class="el" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a7a5">DATA_matrix</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00247">icSigXYZData</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06428">LabToXYZ()</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00004">MAXCHANNELS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l06449">XYZToLab()</a>.
<p>
<pre class="fragment"><div>01172 {
01173     <span class="keywordtype">float</span>   fTemp[<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>];
01174     <span class="keywordtype">float</span>   fTemp1[<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>];
01175     <span class="keywordtype">int</span>     i;
01176 
01180     <span class="comment">// When sampling the deviceCRD, skip the input table.</span>
01181     <span class="comment">// If lpHostCSA is not NULL, the current CRD is targetCRD, we</span>
01182     <span class="comment">// need to do input table conversion</span>
01183     <span class="keywordflow">if</span> (lpHostCSA)
01184     {
01185         <span class="comment">// Convert Lab to XYZ  in range [ 0 whitePoint ]</span>
01186         <span class="keywordflow">if</span> ((lpHostCRD-&gt;pcs == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>) &amp;&amp; 
01187             (lpHostCSA-&gt;pcs == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>))
01188         {
01189             <a class="code" href="../../d2/d9/ps2_8c.html#a248">LabToXYZ</a>(Input, fTemp1, lpHostCRD-&gt;whitePoint);
01190         }
01191         <span class="comment">// Convert XYZ to Lab in range [ 0 1]</span>
01192         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((lpHostCRD-&gt;pcs == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>) &amp;&amp; 
01193                  (lpHostCSA-&gt;pcs == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>))
01194         {
01195             <a class="code" href="../../d2/d9/ps2_8c.html#a249">XYZToLab</a>(Input, fTemp, lpHostCSA-&gt;whitePoint);
01196         }
01197         <span class="comment">// Convert Lab to range [ 0 1]</span>
01198         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((lpHostCRD-&gt;pcs == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>) &amp;&amp; 
01199                  (lpHostCSA-&gt;pcs == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>))
01200         {
01201             <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01202                 fTemp[i] = Input[i] / 2;
01203         }
01204         <span class="comment">// Convert XYZ to XYZ (based on white point) to range [0 1]</span>
01205         <span class="keywordflow">else</span>
01206         {   <span class="comment">// TODO: different intents using different conversion.</span>
01207             <span class="comment">// icRelativeColorimetric: using Bradford transform.</span>
01208             <span class="comment">// icAbsoluteColorimetric: using scaling.</span>
01209             <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01210                 fTemp1[i] = Input[i] * lpHostCRD-&gt;whitePoint[i] / lpHostCSA-&gt;whitePoint[i];
01211         }
01212  
01213         <span class="comment">// Matrix, used for XYZ data only or Matrix icc profile only</span>
01214         <span class="keywordflow">if</span> (lpHostCRD-&gt;pcs == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>)
01215         {
01216             <a class="code" href="../../d2/d9/ps2_8c.html#a250">ApplyMatrix</a>(lpHostCRD-&gt;e, fTemp1, fTemp);
01217         }
01218      
01219         <span class="keywordflow">if</span> (lpHostCRD-&gt;dataType != <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a7a5">DATA_matrix</a>)
01220         {
01221             <span class="comment">//Search input Table</span>
01222             <a class="code" href="../../d2/d9/ps2_8c.html#a240">CheckInputOutputTable</a>(lpHostCRD, fTemp, 0, 1);
01223         }
01224     }
01225     <span class="comment">// If the current CRD is device CRD, we do not need to do input</span>
01226     <span class="comment">// table conversion.</span>
01227     <span class="keywordflow">else</span>
01228     {
01229         <span class="keywordtype">short</span>   Grids;
01230         Grids = lpHostCRD-&gt;clutPoints;
01231         <span class="comment">// Sample data may be XYZ or Lab. It depends on Target icc profile.</span>
01232         <span class="comment">// If the PCS of the target icc profile is XYZ, input data will be XYZ.</span>
01233         <span class="comment">// If the PCS of the target icc profile is Lab, input data will be Lab.</span>
01234 
01235         <span class="keywordflow">if</span> (lpHostCRD-&gt;dataType == <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a7a5">DATA_matrix</a>)
01236         {
01237             <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01238             {
01239                 fTemp[i] = Input[i];
01240             }
01241         }
01242         <span class="keywordflow">else</span>
01243         {
01244             <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01245             {
01246                 fTemp[i] = Input[i]* (Grids - 1);
01247                 <span class="keywordflow">if</span> (fTemp[i] &gt; (Grids - 1))
01248                     fTemp[i] = (<span class="keywordtype">float</span>)(Grids - 1);
01249             }
01250         }
01251     }   <span class="comment">// bCheckInputTable</span>
01252 
01253     <span class="keywordflow">if</span> (lpHostCRD-&gt;dataType != <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a7a5">DATA_matrix</a>)
01254     {
01255         <span class="comment">// Rendering table</span>
01256         <a class="code" href="../../d2/d9/ps2_8c.html#a241">CheckColorLookupTable</a>(lpHostCRD, fTemp);
01257 
01261     }
01262     <span class="keywordflow">if</span> (bCheckOutputTable)
01263     {
01264         <span class="comment">//Output Table</span>
01265         <a class="code" href="../../d2/d9/ps2_8c.html#a240">CheckInputOutputTable</a>(lpHostCRD, fTemp, 0, 0);
01266     }
01267     <span class="keywordflow">for</span> (i = 0; (i &lt;= <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>) &amp;&amp; (i &lt; lpHostCRD-&gt;outputChan); i++)
01268     {
01269         Output[i] = fTemp[i];
01270     }
01271 
01272    <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01273 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="jul98/dll32/profcrd.c::DoHostConversionCSA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL DoHostConversionCSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Input</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Output</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01288">1288</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l06726">ApplyMatrix()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06757">CheckColorLookupTable()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06295">CheckInputOutputTable()</a>, <a class="el" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a7a5">DATA_matrix</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00004">MAXCHANNELS</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>01289 {
01290     <span class="keywordtype">float</span>   fTemp[<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>];
01291     <span class="keywordtype">int</span>     i;
01292 
01296     <span class="keywordflow">for</span> (i = 0; (i &lt;= <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>) &amp;&amp; (i &lt; lpHostClut-&gt;inputChan); i++)
01297     {
01298         fTemp[i] = Input[i];
01299     }
01300 
01301     <span class="keywordflow">if</span> (lpHostClut-&gt;dataType == <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a7a5">DATA_matrix</a>)
01302     {
01303         <span class="comment">//Search input Table</span>
01304         <a class="code" href="../../d2/d9/ps2_8c.html#a240">CheckInputOutputTable</a>(lpHostClut, fTemp, 1, 1);
01305         <a class="code" href="../../d2/d9/ps2_8c.html#a250">ApplyMatrix</a>(lpHostClut-&gt;e, fTemp, Output);
01306     }
01307     <span class="keywordflow">else</span>
01308     {
01309         <span class="comment">//Search input Table</span>
01310         <a class="code" href="../../d2/d9/ps2_8c.html#a240">CheckInputOutputTable</a>(lpHostClut, fTemp, 1, 1);
01311 
01312         <span class="comment">// Rendering table</span>
01313         <a class="code" href="../../d2/d9/ps2_8c.html#a241">CheckColorLookupTable</a>(lpHostClut, fTemp);
01314 
01315         <span class="comment">//Output Table</span>
01316         <a class="code" href="../../d2/d9/ps2_8c.html#a240">CheckInputOutputTable</a>(lpHostClut, fTemp, 1, 0 );
01317 
01321         <span class="keywordflow">for</span> (i = 0; (i &lt;= <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>) &amp;&amp; (i &lt; lpHostClut-&gt;outputChan); i++)
01322         {
01323             Output[i] = fTemp[i];
01324         }
01325     }
01326 
01327     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01328 }                               
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="jul98/dll32/profcrd.c::g" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float g           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">float&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>f</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00806">806</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
<pre class="fragment"><div>00807 {
00808     <span class="keywordtype">float</span> frc;
00809     <span class="keywordflow">if</span> (f &gt;= (6/29))
00810     {
00811         frc = f * f * f;
00812     }
00813     <span class="keywordflow">else</span>
00814     {
00815         frc = f - (4.0f / 29.0f) * (108.0f / 841.0f);
00816     }
00817     <span class="keywordflow">return</span> frc;
00818 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="jul98/dll32/profcrd.c::GetCLUTinfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID GetCLUTinfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>LutTag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpLut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nInputCh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nOutputCh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nGrids</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nInputTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nOutputTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>size</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00099">99</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00134">ui8toSINT</a>.
<p>
Referenced by <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00587">CreateHostLutCRD()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00186">CreateLutCRD()</a>, <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l01331">GetCRDInputOutputArraySize()</a>, <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00138">GetHostCSA()</a>, and <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l00261">GetPS2CSA_DEFG()</a>.
<p>
<pre class="fragment"><div>00101 {
00102     <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00103     {
00104         *nInputCh = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a1">ui8toSINT</a> (((lpcpLut8Type) lpLut)-&gt;lut.inputChan);
00105         *nOutputCh = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a1">ui8toSINT</a> (((lpcpLut8Type) lpLut)-&gt;lut.outputChan);
00106         *nGrids = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a1">ui8toSINT</a> (((lpcpLut8Type) lpLut)-&gt;lut.clutPoints);
00107         *nInputTable = 256<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00108         *nOutputTable = 256<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00109         *size = 1;  <span class="comment">// one byte for each input\output table entry</span>
00110     } <span class="keywordflow">else</span>
00111     {
00112         *nInputCh = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a1">ui8toSINT</a> (((lpcpLut16Type) lpLut)-&gt;lut.inputChan);
00113         *nOutputCh = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a1">ui8toSINT</a> (((lpcpLut16Type) lpLut)-&gt;lut.outputChan);
00114         *nGrids = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a1">ui8toSINT</a> (((lpcpLut16Type) lpLut)-&gt;lut.clutPoints);
00115         *nInputTable = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a2">ui16toSINT</a> (((lpcpLut16Type) lpLut)-&gt;lut.inputEnt);
00116         *nOutputTable = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a2">ui16toSINT</a> (((lpcpLut16Type) lpLut)-&gt;lut.outputEnt);
00117         *size = 2;  <span class="comment">// two bytes for each input\output table entry</span>
00118     }
00119 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="jul98/dll32/profcrd.c::GetCRDInputOutputArraySize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetCRDInputOutputArraySize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpInTbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpOutTbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a27">LPCSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpIntentTag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpGrids</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01331">1331</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00099">GetCLUTinfo()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00299">GetHostCSA_Intent()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00303">icPerceptual</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00304">icRelativeColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00305">icSaturation</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00145">icSigBToA0Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00146">icSigBToA1Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00147">icSigBToA2Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00220">icSigLut16Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>.
<p>
<pre class="fragment"><div>01334 {
01335     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>    Tag;
01336     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01337     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    Ret = 0;
01338     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  Buff = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01339     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    MemSize = 0;
01340     HGLOBAL hMem;
01341     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    outputChan, outputEnt;
01342     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    inputChan, inputEnt;
01343     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    Grids;
01344     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i;
01345 
01346     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01347     {
01348         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>:
01349             *lpIntentTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a23">icSigBToA0Tag</a>;
01350             <span class="keywordflow">break</span>;
01351 
01352         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>:
01353         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>:
01354             *lpIntentTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a24">icSigBToA1Tag</a>;
01355             <span class="keywordflow">break</span>;
01356 
01357         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>:
01358             *lpIntentTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a25">icSigBToA2Tag</a>;
01359             <span class="keywordflow">break</span>;
01360 
01361         <span class="keywordflow">default</span>:
01362             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01363     }
01364     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, *lpIntentTag) ||
01365         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, *lpIntentTag, (LPSINT) &amp; Index) ||
01366         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; Tag) ||
01367         ((Tag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>) &amp;&amp; (Tag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a90">icSigLut16Type</a>)) ||
01368         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; MemSize) ||
01369         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (MemSize, (HGLOBAL FAR *)&amp;hMem, (LPMEMPTR) &amp; Buff) ||
01370         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, Buff, MemSize))
01371     {
01372         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> retVal = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01373 
01374         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> != Buff)
01375         {
01376             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
01377         }
01378 
01379         <span class="comment">// Matrix icc profile.</span>
01380 
01381         *lpGrids = 2;
01382         <span class="keywordflow">if</span> (lpInTbSize)
01383         {
01384             retVal = <a class="code" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a4">GetHostCSA_Intent</a> (cp, NULL, lpInTbSize,
01385                           (CSIG) Intent, TYPE_CIEBASEDDEF);
01386             *lpInTbSize = *lpInTbSize * 3;
01387         }
01388         <span class="keywordflow">if</span> (lpOutTbSize)
01389         {
01390             retVal = <a class="code" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a4">GetHostCSA_Intent</a> (cp, NULL, lpOutTbSize,
01391                           (CSIG) Intent, TYPE_CIEBASEDDEF);
01392             *lpOutTbSize = *lpOutTbSize * 3;
01393         }
01394         <span class="keywordflow">return</span> retVal;
01395     }
01396 
01397     <span class="keywordflow">if</span> (lpInTbSize)
01398     {
01399         <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a7">GetCLUTinfo</a>(Tag, Buff, &amp;inputChan, &amp;outputChan, 
01400                 &amp;Grids, &amp;inputEnt, &amp;outputEnt, &amp;i);
01401 
01402         <span class="keywordflow">if</span> (inputChan != 3)
01403         {
01404             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
01405             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01406         }
01407 
01408         *lpInTbSize = inputChan * inputEnt * 6;  <span class="comment">// Number of INT bytes</span>
01409         *lpGrids = Grids;
01410     }
01411 
01412     <span class="keywordflow">if</span> (lpOutTbSize)
01413     {
01414         <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a7">GetCLUTinfo</a>(Tag, Buff, &amp;inputChan, &amp;outputChan, 
01415                 &amp;Grids, &amp;inputEnt, &amp;outputEnt, &amp;i);
01416 
01417         <span class="keywordflow">if</span> ((outputChan != 3) &amp;&amp; (outputChan != 4))
01418         {
01419             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
01420             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01421         }
01422         *lpOutTbSize = outputChan * outputEnt * 6; <span class="comment">// Number of INT bytes</span>
01423         *lpGrids = Grids;
01424     }
01425 
01426     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
01427     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01428 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="jul98/dll32/profcrd.c::GetHostColorRenderingDictionary" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetHostColorRenderingDictionary           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00745">745</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l05203">CreateHostLutCRD()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04055">DoesTRCAndColorantTagExist()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00384">GetHostMatrixCSAorCRD()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00303">icPerceptual</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00304">icRelativeColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00305">icSaturation</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00145">icSigBToA0Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00146">icSigBToA1Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00147">icSigBToA2Tag</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>.
<p>
<pre class="fragment"><div>00747 {
00748     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00749     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> BToAxTag;
00750 
00751     <span class="keywordflow">if</span> (!cp)
00752         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00753 
00754     <span class="keywordflow">if</span> ((lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*lpcbSize == 0))
00755     {
00756         lpMem = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00757         *lpcbSize = 0;
00758     }
00759 
00760     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
00761     {
00762         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>:
00763             BToAxTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a23">icSigBToA0Tag</a>;
00764             <span class="keywordflow">break</span>;
00765 
00766         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>:
00767         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>:
00768             <span class="comment">// Use RelativeColorimetric to calculate this CRD.</span>
00769             BToAxTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a24">icSigBToA1Tag</a>;
00770             <span class="keywordflow">break</span>;
00771 
00772         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>:
00773             BToAxTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a25">icSigBToA2Tag</a>;
00774             <span class="keywordflow">break</span>;
00775 
00776         <span class="keywordflow">default</span>:
00777            *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) 0;
00778             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00779     }
00780 
00781     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, BToAxTag) &amp;&amp;
00782         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, BToAxTag, (LPSINT) &amp; Index))
00783     {
00784         *lpcbSize = <a class="code" href="../../d2/d9/ps2_8c.html#a235">CreateHostLutCRD</a> (cp, Index, lpMem, Intent);
00785     }
00786     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="../../d2/d9/ps2_8c.html#a190">DoesTRCAndColorantTagExist</a>(cp))
00787     {
00788         <a class="code" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a15">GetHostMatrixCSAorCRD</a>(cp, lpMem, lpcbSize, FALSE);
00789     }
00790     <span class="keywordflow">return</span> (*lpcbSize &gt; 0);
00791 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="jul98/dll32/profcrd.c::GetHostColorSpaceArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetHostColorSpaceArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00532">532</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00070">GetCPDevSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00071">GetCPRenderIntent</a>, <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00299">GetHostCSA_Intent()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00256">icSigCmykData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00252">icSigRgbData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00307">icUseRenderingIntent</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>, and <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00013">TYPE_CIEBASEDDEFG</a>.
<p>
<pre class="fragment"><div>00534 {
00535     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> ColorSpace, <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
00536     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00537 
00538     <span class="keywordflow">if</span> (!cp)
00539         <span class="keywordflow">return</span> Success;
00540 
00541     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; ColorSpace) ||
00542         !<a class="code" href="../../d2/d9/ps2_8c.html#a42">GetCPRenderIntent</a> (cp, (LPCSIG) &amp; Intent))
00543     {
00544         <span class="keywordflow">return</span> Success;
00545     }
00546     <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a146">icUseRenderingIntent</a>)
00547         InputIntent = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
00548 
00549     <span class="keywordflow">if</span> (!Success)
00550     {
00551         <span class="keywordflow">switch</span> (ColorSpace)
00552         {
00553             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>:
00554                 Success = <a class="code" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a4">GetHostCSA_Intent</a> (cp, lpBuffer, lpcbSize,
00555                           (CSIG) InputIntent, TYPE_CIEBASEDDEF);
00556                 <span class="keywordflow">break</span>;
00557             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>:
00558                 Success = <a class="code" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a4">GetHostCSA_Intent</a> (cp, lpBuffer, lpcbSize,
00559                           (CSIG) InputIntent, TYPE_CIEBASEDDEFG);
00560                 <span class="keywordflow">break</span>;
00561             <span class="keywordflow">default</span>:
00562                 <span class="keywordflow">break</span>;
00563         }
00564     }
00565     <span class="keywordflow">return</span> Success;
00566 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="jul98/dll32/profcrd.c::GetHostCSA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetHostCSA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Index</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00138">138</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a48a47">CP_POSTSCRIPT_ERR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05728">CreateHostInputOutputArray()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00099">GetCLUTinfo()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00069">GetCPConnSpace</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04143">GetCPElementSize()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00485">GetCPElementType()</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00461">GetCPTagSig()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00220">icSigLut16Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00247">icSigXYZData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00028">LPHOSTCLUT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00021">SetCPLastError()</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00012">TYPE_CIEBASEDDEF</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00013">TYPE_CIEBASEDDEFG</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00135">ui16toSINT</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00140 {
00141     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>    PCS, LutTag;
00142     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>    IntentSig;
00143     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    nInputCh, nOutputCh, nGrids, SecondGrids;
00144     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    nInputTable, nOutputTable, nNumbers;
00145     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i, j, k;
00146     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpTable;
00147     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpOldMem = lpMem;
00148     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpLut = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00149     HGLOBAL hLut = 0;
00150     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    LutSize;
00151     <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut;
00152 
00153     <span class="comment">// Check if we can generate the CS.</span>
00154     <span class="comment">// If we cannot find the required tag - we will return false</span>
00155     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00156         (PCS != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>) &amp;&amp; (PCS != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>) ||
00157         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a15">GetCPTagSig</a> (cp, Index, (LPCSIG) &amp; IntentSig))
00158     {
00159         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00160     }
00161     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a16">GetCPElementType</a> (cp, Index, (LPCSIG) &amp; LutTag) ||
00162         ((LutTag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>) &amp;&amp; (LutTag != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a90">icSigLut16Type</a>)) ||
00163         !<a class="code" href="../../d2/d9/ps2_8c.html#a194">GetCPElementSize</a> (cp, Index, (LPSINT) &amp; LutSize) ||
00164         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (LutSize, (HGLOBAL FAR *) &amp;hLut, (LPMEMPTR) &amp; lpLut) ||
00165         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, Index, lpLut, LutSize))
00166     {
00167         <span class="keywordflow">if</span> (0 != hLut)
00168         {
00169             <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00170         }
00171         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00172     }
00173 
00174     <span class="comment">// Estimate the memory size required to hold CS</span>
00175     <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a7">GetCLUTinfo</a>(LutTag, lpLut, &amp;nInputCh, &amp;nOutputCh, 
00176                 &amp;nGrids, &amp;nInputTable, &amp;nOutputTable, &amp;i);
00177 
00178     <span class="keywordflow">if</span> (!(nOutputCh == 3) ||
00179         !((nInputCh == 3) &amp;&amp; (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a0">TYPE_CIEBASEDDEF</a>)) &amp;&amp;
00180         !((nInputCh == 4) &amp;&amp; (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)))
00181     {
00182         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a39">SetCPLastError</a> (CP_POSTSCRIPT_ERR);
00183         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00184         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00185     }
00186         
00187     <span class="comment">// First Pass. This is a size request</span>
00188     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  
00189     {
00190         <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00191             *lpcbSize = nOutputCh * nGrids * nGrids * nGrids * nGrids;
00192         <span class="keywordflow">else</span>
00193             *lpcbSize = nOutputCh * nGrids * nGrids * nGrids;
00194         *lpcbSize = *lpcbSize             +   <span class="comment">// size of RenderTable 8-bits only</span>
00195             nInputCh * nInputTable * i    +   <span class="comment">// size of input table 8/16-bits</span>
00196             nOutputCh * nOutputTable * i  +   <span class="comment">// size of output table 8/16-bits</span>
00197             <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>) + 1024;          <span class="comment">// data structure + extra safe space</span>
00198         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00199         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00200     }
00201 
00202     <span class="comment">// Second pass. constructure real HostCSA</span>
00203     lpHostClut = (<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpMem;
00204     lpMem += <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>);
00205     lpHostClut-&gt;size = <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>);
00206     lpHostClut-&gt;pcs = PCS;
00207     lpHostClut-&gt;intent = InputIntent;
00208     lpHostClut-&gt;lutBits = (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)? 8:16;
00209 
00210     <span class="comment">// Get info about Illuminant White Point from the header</span>
00211     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT)lpHostClut-&gt;whitePoint);          <span class="comment">// .. Illuminant</span>
00212 
00213     lpHostClut-&gt;inputChan = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)nInputCh;
00214     lpHostClut-&gt;outputChan = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)nOutputCh;
00215     lpHostClut-&gt;clutPoints = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)nGrids;
00216     lpHostClut-&gt;inputEnt = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)nInputTable;
00217     lpHostClut-&gt;outputEnt = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)nOutputTable;
00218     <span class="comment">// Input Array</span>
00219     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a237">CreateHostInputOutputArray</a> (lpMem, lpHostClut-&gt;inputArray, 
00220              nInputCh, nInputTable, 0, LutTag, lpLut);
00221 
00222     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00223     {
00224         i = nInputTable * nInputCh +
00225             nGrids * nGrids * nGrids * nGrids * nOutputCh;
00226     } <span class="keywordflow">else</span>
00227     {
00228         i = nInputTable * nInputCh +
00229             nGrids * nGrids * nGrids * nOutputCh;
00230     }
00231     <span class="comment">// ourput array</span>
00232     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a237">CreateHostInputOutputArray</a> (lpMem, lpHostClut-&gt;outputArray, 
00233              nOutputCh, nOutputTable, i, LutTag, lpLut);
00234  <span class="comment">//********** /Table</span>
00235 
00236     lpHostClut-&gt;clut = lpMem;
00237     nNumbers = nGrids * nGrids * nOutputCh;
00238     SecondGrids = 1;
00239     <span class="keywordflow">if</span> (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>)
00240     {
00241         SecondGrids = nGrids;
00242     }
00243     <span class="keywordflow">for</span> (i = 0; i &lt; nGrids; i++)        <span class="comment">// Nh strings should be sent</span>
00244     {
00245         <span class="keywordflow">for</span> (k = 0; k &lt; SecondGrids; k++)
00246         {
00247             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00248             {
00249                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) lpLut)-&gt;lut.data) +
00250                     nInputTable * nInputCh +
00251                     nNumbers * (i * SecondGrids + k);
00252             } <span class="keywordflow">else</span>
00253             {
00254                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) (((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) lpLut)-&gt;lut.data) +
00255                     2 * nInputTable * nInputCh +
00256                     2 * nNumbers * (i * SecondGrids + k);
00257             }
00258 
00259             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
00260             {
00261                 <span class="comment">// Copy 8-bit data.</span>
00262                 MemCopy(lpMem, lpTable, nNumbers);
00263                 lpMem += nNumbers;
00264             }
00265             <span class="keywordflow">else</span>
00266             {
00267                 <span class="comment">// convert 16 bit integer to right format. then copy only 8 bits.</span>
00268                 <span class="keywordflow">for</span> (j = 0; j &lt; nNumbers; j++)
00269                 {
00270                     *lpMem++ = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)(<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a2">ui16toSINT</a> (lpTable) / 256);
00271                     lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>);
00272                 }
00273             }
00274         }
00275     }
00276 
00277     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00278 
00279     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hLut);
00280     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00281 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="jul98/dll32/profcrd.c::GetHostCSA_Intent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetHostCSA_Intent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html#l00299">299</a> of file <a class="el" href="../../d0/d5/dec97_2dll32_2profcrd_8c-source.html">dec97/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04007">DoesCPTagExist()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00426">GetCPTagIndex()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05792">GetHostCSA()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00303">icPerceptual</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00304">icRelativeColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00305">icSaturation</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00139">icSigAToB0Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00140">icSigAToB1Tag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00141">icSigAToB2Tag</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, and <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>.
<p>
Referenced by <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l01331">GetCRDInputOutputArraySize()</a>, and <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00532">GetHostColorSpaceArray()</a>.
<p>
<pre class="fragment"><div>00301 {
00302     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00303     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00304     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> AToBxTag;
00305 
00306     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
00307     {
00308         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>:
00309             AToBxTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a17">icSigAToB0Tag</a>;
00310             <span class="keywordflow">break</span>;
00311         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>:
00312         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>:
00313             <span class="comment">// use RelativeColorimetric data to build it.</span>
00314             AToBxTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a18">icSigAToB1Tag</a>;
00315             <span class="keywordflow">break</span>;
00316         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>:
00317             AToBxTag = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a19">icSigAToB2Tag</a>;
00318             <span class="keywordflow">break</span>;
00319         <span class="keywordflow">default</span>:
00320             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00321             <span class="keywordflow">break</span>;
00322     }
00323     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, AToBxTag) &amp;&amp;
00324         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, AToBxTag, (LPSINT) &amp; Index))
00325     {
00326         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a200">GetHostCSA</a>(cp, lpBuffer, lpcbSize, Intent, Index, Type);
00327     }
00328 
00329     <span class="keywordflow">return</span> Success;
00330 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="jul98/dll32/profcrd.c::GetHostMatrixCSAorCRD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetHostMatrixCSAorCRD           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bCSA</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00384">384</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l03893">CreateColorantArray()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05601">CreateHostRevTRCInputTable()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05549">CreateHostTRCInputTable()</a>, <a class="el" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a7a5">DATA_matrix</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04074">GetCPWhitePoint()</a>, <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00284">GetTRCData()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00143">icSigBlueColorantTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00156">icSigGreenColorantTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00177">icSigRedColorantTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00247">icSigXYZData</a>, <a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a56">InvertMatrix()</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00028">LPHOSTCLUT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00106">LPSFLOAT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00105">LPSINT</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00745">GetHostColorRenderingDictionary()</a>, and <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00479">GetHostCSA_Intent()</a>.
<p>
<pre class="fragment"><div>00385 {
00386     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     nRedCount, nGreenCount, nBlueCount;
00387     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>   lpRed = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>,lpGreen, lpBlue;
00388     HGLOBAL  hMem;
00389     <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a> lpHostClut;
00390     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>   lpOldMem = lpMem;
00391     <span class="keywordtype">double</span>   pArray[9], pRevArray[9], pTemp[9];
00392     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     i;
00393 
00394     hMem = <a class="code" href="../../d1/d6/jul98_2dll32_2profcrd_8c.html#a12">GetTRCData</a>(cp,
00395         (LPMEMPTR)&amp;lpRed, (LPMEMPTR)&amp;lpGreen, (LPMEMPTR)&amp;lpBlue,
00396         (LPSINT)&amp;nRedCount,(LPSINT)&amp;nGreenCount, (LPSINT)&amp;nBlueCount);
00397 
00398     <span class="comment">// Estimate the memory size required to hold CRD</span>
00399     *lpcbSize = (nRedCount + nGreenCount + nBlueCount) * 2 +
00400            <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>) + 1024;      <span class="comment">// data structure + extra safe space</span>
00401 
00402     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                   <span class="comment">// This is a size request</span>
00403     {
00404         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
00405         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00406     }
00407 
00408     lpHostClut = (<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpMem;
00409     lpMem += <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>);
00410     lpHostClut-&gt;size = <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d6/structtagHOSTCLUT.html">HOSTCLUT</a>);
00411     lpHostClut-&gt;dataType = <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a7a5">DATA_matrix</a>;
00412     lpHostClut-&gt;clutPoints = 2;
00413     lpHostClut-&gt;pcs = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>;
00414     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a>(cp, (LPSFLOAT)lpHostClut-&gt;whitePoint);
00415 
00416     <span class="keywordflow">if</span> (bCSA)
00417     {
00418         lpHostClut-&gt;inputEnt = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)nRedCount;
00419         lpHostClut-&gt;inputChan = 3;
00420         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a238">CreateHostTRCInputTable</a>(lpMem, lpHostClut,
00421                                          lpRed, lpGreen, lpBlue);
00422     }
00423     <span class="keywordflow">else</span>
00424     {
00425         lpHostClut-&gt;outputEnt = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)nRedCount;
00426         lpHostClut-&gt;outputChan = 3;
00427         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a239">CreateHostRevTRCInputTable</a>(lpMem, lpHostClut,
00428                                             lpRed, lpGreen, lpBlue);
00429     }
00430 
00431     <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
00432     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpMem - lpOldMem);
00433 
00434     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a251">CreateColorantArray</a>(cp, &amp;pTemp[0], icSigRedColorantTag) ||
00435         !<a class="code" href="../../d2/d9/ps2_8c.html#a251">CreateColorantArray</a>(cp, &amp;pTemp[3], icSigGreenColorantTag) ||
00436         !<a class="code" href="../../d2/d9/ps2_8c.html#a251">CreateColorantArray</a>(cp, &amp;pTemp[6], icSigBlueColorantTag))
00437     {
00438        <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00439     }
00440 
00441     <span class="keywordflow">for</span> (i = 0; i &lt; 9; i++)
00442     {
00443         pArray[i] = pTemp[i/8*8 + i*3%8];
00444     }
00445 
00446     <span class="keywordflow">if</span> (bCSA)
00447     {
00448         <span class="keywordflow">for</span> (i = 0; i &lt; 9; i++)
00449             lpHostClut-&gt;e[i] = (<span class="keywordtype">float</span>)pArray[i];
00450     }
00451     <span class="keywordflow">else</span>
00452     {
00453         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a56">InvertMatrix</a>(pArray, pRevArray);
00454         <span class="keywordflow">for</span> (i = 0; i &lt; 9; i++)
00455             lpHostClut-&gt;e[i] = (<span class="keywordtype">float</span>)pRevArray[i];
00456     }
00457 
00458     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00459 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="jul98/dll32/profcrd.c::GetPS2PreviewColorRenderingDictionary" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL EXTERN GetPS2PreviewColorRenderingDictionary           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cpDev</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cpTarget</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01954">1954</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00011">BeginDict</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05001">BeginGlobalDict()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00005">BeginString</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00060">BYTES</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00066">CRDBegin</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00067">CRDEnd</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02709">CreateInputArray()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02834">CreateOutputArray()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00074">CSIG</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00014">DictType</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06068">DoHostConversionCRD()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06226">DoHostConversionCSA()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04987">EnableGlobalDict()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00012">EndDict</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05014">EndGlobalDict()</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00006">EndString</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00070">GetCPDevSpace</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05090">GetCRDInputOutputArraySize()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l05662">GetHostColorRenderingDictionary()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06024">GetHostColorSpaceArray()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l02953">GetPublicArrayName()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00303">icPerceptual</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00304">icRelativeColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00305">icSaturation</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00256">icSigCmykData</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00018">IntentACol</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00016">IntentPer</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00019">IntentRCol</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00017">IntentSat</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00015">IntentType</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00107">LPCSIG</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00028">LPHOSTCLUT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00016">MAX_LINELENG</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00004">MAXCHANNELS</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d3/monitor_8c.html#a2">pcs</a>, <a class="el" href="../../d3/d5/aug98_2dll32_2profcrd_8h-source.html#l00005">PREVIEWCRDGRID</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00034">RenderTableTag</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04762">SendCRDABC()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04587">SendCRDBWPoint()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04689">SendCRDLMN()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04893">SendCRDOutputTable()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04621">SendCRDPQR()</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00006">TempBfSize</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00081">WriteHex</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l04381">WriteStringToken()</a>.
<p>
Referenced by <a class="el" href="../../d9/d5/aug98_2test_2control_8c-source.html#l00158">CreateProfCRDControl()</a>.
<p>
<pre class="fragment"><div>01960 {
01961     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>    lpTargetCRD, lpTargetCSA, lpDevCRD;
01962     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>     cbTargetCRD, cbTargetCSA, cbDevCRD;
01963     HGLOBAL   hTargetCRD, hTargetCSA, hDevCRD;
01964     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>      Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01965     <span class="keywordtype">float</span>     Input[<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>];
01966     <span class="keywordtype">float</span>     Output[<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>];
01967     <span class="keywordtype">float</span>     Temp[<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a0">MAXCHANNELS</a>];
01968     <span class="keywordtype">int</span>       i, j, k, l;
01969     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>    lpLineStart;
01970     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>    lpOldMem;
01971     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>      ColorSpace;
01972     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>      DevColorSpace;
01973     <span class="keyword">static</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>      IntentTag;
01974     <span class="keyword">static</span> <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>      PreviewCRDGrid;
01975     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>      OutArraySize, InArraySize;
01976     <span class="keywordtype">char</span>      PublicArrayName[<a class="code" href="../../d8/d8/aug98_2dll32_2csprof_8c.html#a1">TempBfSize</a>];
01977     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>      TargetGrids, DevGrids;
01978 
01979     <span class="comment">// First pass, return the size of Previewind CRD.</span>
01980     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01981     {
01982         <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>   dwOutArraySizr = 0;
01983 
01984         i = 3;      <span class="comment">// Default output channal;</span>
01985         <span class="keywordflow">if</span> ((<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cpDev, (LPCSIG) &amp; DevColorSpace)) &amp;&amp;
01986                           (DevColorSpace == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>))
01987         {
01988             i = 4;
01989         }
01990 
01991         <span class="comment">// Get the input array size IntentTag and Grid of the Target icc profile.</span>
01992         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a199">GetCRDInputOutputArraySize</a>(cpTarget, Intent,
01993             &amp;InArraySize, NULL, &amp;IntentTag, &amp;TargetGrids ))
01994             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01995 
01996         <span class="comment">// Get the output array size IntentTag and Grid of the Dev icc profile.</span>
01997         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a199">GetCRDInputOutputArraySize</a>(cpDev, Intent,
01998             NULL, &amp;OutArraySize, &amp;IntentTag, &amp;DevGrids ))
01999             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02000 
02001         PreviewCRDGrid = (TargetGrids &gt; DevGrids)? TargetGrids: DevGrids;
02002 
02003         <span class="comment">// Min proofing CRD grid will be PREVIEWCRDGRID</span>
02004         <span class="keywordflow">if</span> (PreviewCRDGrid &lt; <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a1">PREVIEWCRDGRID</a>)
02005             PreviewCRDGrid = <a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a1">PREVIEWCRDGRID</a>;
02006         *lpcbSize = PreviewCRDGrid * PreviewCRDGrid * PreviewCRDGrid * 
02007                     i * 2 +           <span class="comment">// CLUT size (Hex output)</span>
02008                     OutArraySize +    <span class="comment">// Output Array size</span>
02009                     InArraySize  +    <span class="comment">// Input Array size</span>
02010                     4096;             <span class="comment">// Extra PostScript staff.</span>
02011          <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
02012     }
02013 
02014     <span class="comment">// Second pass, return the Previewind CRD.</span>
02015     lpOldMem = lpMem;
02016 
02017     <span class="comment">//Query the sizes of Host TargetCRD, TargetCSA and DevCRD.</span>
02018     <span class="keywordflow">if</span> (!(<a class="code" href="../../d2/d9/ps2_8c.html#a201">GetHostColorRenderingDictionary</a> (cpTarget, Intent, NULL, &amp;cbTargetCRD)) ||
02019         !(<a class="code" href="../../d2/d9/ps2_8c.html#a202">GetHostColorSpaceArray</a> (cpTarget, Intent, NULL, &amp;cbTargetCSA)) ||
02020         !(<a class="code" href="../../d2/d9/ps2_8c.html#a201">GetHostColorRenderingDictionary</a> (cpDev, Intent, NULL, &amp;cbDevCRD)))
02021     {
02022         <span class="keywordflow">return</span> (Success);
02023     }
02024 
02025     <span class="comment">//Alloc the buffers for Host TargetCRD, TargetCSA and DevCRD.</span>
02026     hTargetCRD = hTargetCSA = hDevCRD = 0;
02027     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (cbTargetCRD, (HGLOBAL FAR *)&amp;hTargetCRD, (LPMEMPTR)&amp;lpTargetCRD) ||
02028         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (cbTargetCSA, (HGLOBAL FAR *)&amp;hTargetCSA, (LPMEMPTR)&amp;lpTargetCSA) ||
02029         !<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (cbDevCRD, (HGLOBAL FAR *)&amp;hDevCRD, (LPMEMPTR)&amp;lpDevCRD))
02030     {
02031         <span class="keywordflow">goto</span> Done;
02032     }
02033 
02034     <span class="comment">//Build Host TargetCRD, TargetCSA and DevCRD.</span>
02035     <span class="keywordflow">if</span> (!(<a class="code" href="../../d2/d9/ps2_8c.html#a201">GetHostColorRenderingDictionary</a> (cpTarget, Intent, lpTargetCRD, &amp;cbTargetCRD)) ||
02036         !(<a class="code" href="../../d2/d9/ps2_8c.html#a202">GetHostColorSpaceArray</a> (cpTarget, Intent, lpTargetCSA, &amp;cbTargetCSA)) ||
02037         !(<a class="code" href="../../d2/d9/ps2_8c.html#a201">GetHostColorRenderingDictionary</a> (cpDev, Intent, lpDevCRD, &amp;cbDevCRD)))
02038     {
02039         <span class="keywordflow">goto</span> Done;
02040     }
02041 
02042 <span class="comment">//  Build Proofing CRD based on Host TargetCRD TargetCSA and DevCRD.</span>
02043 <span class="comment">//  We use TargetCRD input tables and matrix as the</span>
02044 <span class="comment">//  input tables and matrix of the ProofCRD.</span>
02045 <span class="comment">//  We use DevCRD output tables as the output tables of the ProofCRD.</span>
02046 
02047 <span class="comment">//******** Define golbal array used in EncodeABC and RenderTaber</span>
02048     <a class="code" href="../../d2/d9/ps2_8c.html#a217">GetPublicArrayName</a> (cpDev, IntentTag, PublicArrayName);
02049     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CRDBegin);
02050 
02051     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a220">EnableGlobalDict</a>(lpMem);
02052     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a221">BeginGlobalDict</a>(lpMem);
02053 
02054     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a215">CreateInputArray</a> (lpMem, (SINT)0, (SINT)0, (MEMPTR)PublicArrayName, 
02055              (CSIG)0, NULL, bAllowBinary, lpTargetCRD);
02056 
02057     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a216">CreateOutputArray</a> (lpMem, (SINT)0, (SINT)0, (SINT)0, 
02058              (MEMPTR)PublicArrayName, (CSIG)0, NULL, bAllowBinary, lpDevCRD);
02059 
02060     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a222">EndGlobalDict</a>(lpMem);
02061 
02062 <span class="comment">//************* Start writing  CRD  ****************************</span>
02063     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
02064     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DictType); <span class="comment">// Dictionary type</span>
02065 
02066 <span class="comment">//********** Send Black/White Point.</span>
02067     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a203">SendCRDBWPoint</a>(lpMem, 
02068         ((LPHOSTCLUT)lpTargetCRD)-&gt;whitePoint);
02069 
02070 <span class="comment">//********** Send PQR - For White Point correction</span>
02071     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a204">SendCRDPQR</a>(lpMem, Intent, 
02072         ((LPHOSTCLUT)lpTargetCRD)-&gt;whitePoint);
02073 
02074 <span class="comment">//********** Send LMN - For Absolute Colorimetric use WhitePoint's XYZs</span>
02075     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a205">SendCRDLMN</a>(lpMem, Intent, 
02076         ((LPHOSTCLUT)lpTargetCRD)-&gt;whitePoint,
02077         ((LPHOSTCLUT)lpTargetCRD)-&gt;mediaWP,
02078         ((LPHOSTCLUT)lpTargetCRD)-&gt;pcs);
02079 
02080 <span class="comment">//********** Create MatrixABC and  EncodeABC  stuff</span>
02081     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a206">SendCRDABC</a>(lpMem, PublicArrayName, 
02082         ((LPHOSTCLUT)lpTargetCRD)-&gt;pcs,
02083         ((LPHOSTCLUT)lpTargetCRD)-&gt;inputChan,
02084         NULL,
02085         ((LPHOSTCLUT)lpTargetCRD)-&gt;e,
02086         (((LPHOSTCLUT)lpTargetCRD)-&gt;lutBits == 8)? icSigLut8Type:icSigLut16Type,
02087         bAllowBinary);
02088 
02089 <span class="comment">//********** /RenderTable</span>
02090     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RenderTableTag);
02091     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
02092 
02093     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, PreviewCRDGrid);  <span class="comment">// Send down Na</span>
02094     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, PreviewCRDGrid);  <span class="comment">// Send down Nb</span>
02095     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, PreviewCRDGrid);  <span class="comment">// Send down Nc</span>
02096 
02097     lpLineStart = lpMem;
02098     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);
02099     ColorSpace = ((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpDevCRD)-&gt;pcs;
02100     <span class="keywordflow">for</span> (i = 0; i &lt; PreviewCRDGrid; i++)        <span class="comment">// Na strings should be sent</span>
02101     {
02102         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
02103         lpLineStart = lpMem;
02104         <span class="keywordflow">if</span> (bAllowBinary)
02105         {
02106             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a228">WriteStringToken</a> (lpMem, 143, 
02107                 PreviewCRDGrid * PreviewCRDGrid * ((LPHOSTCLUT)lpDevCRD)-&gt;outputChan);
02108         }
02109         <span class="keywordflow">else</span>
02110         {
02111             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginString);
02112         }
02113         Input[0] = ((<span class="keywordtype">float</span>)i) / (PreviewCRDGrid - 1);
02114         <span class="keywordflow">for</span> (j = 0; j &lt; PreviewCRDGrid; j++)
02115         {
02116             Input[1] = ((<span class="keywordtype">float</span>)j) / (PreviewCRDGrid - 1);
02117             <span class="keywordflow">for</span> (k = 0; k &lt; PreviewCRDGrid; k++)
02118             {
02119                 Input[2] = ((<span class="keywordtype">float</span>)k) / (PreviewCRDGrid - 1);
02120 
02121                 <a class="code" href="../../d2/d9/ps2_8c.html#a243">DoHostConversionCRD</a> ((LPHOSTCLUT)lpTargetCRD, NULL, Input, Output, ColorSpace, 1);
02122                 <a class="code" href="../../d2/d9/ps2_8c.html#a242">DoHostConversionCSA</a> ((LPHOSTCLUT)lpTargetCSA, Output, Temp);
02123                 <a class="code" href="../../d2/d9/ps2_8c.html#a243">DoHostConversionCRD</a> ((LPHOSTCLUT)lpDevCRD, (LPHOSTCLUT)lpTargetCSA, 
02124                                      Temp, Output, 0, 0);
02125                 <span class="keywordflow">for</span> (l = 0; l &lt; ((<a class="code" href="../../d2/d6/aug98_2dll32_2profcrd_8h.html#a3">LPHOSTCLUT</a>)lpDevCRD)-&gt;outputChan; l++)
02126                 {
02127                     <span class="keywordflow">if</span> (bAllowBinary)
02128                     {
02129                         *lpMem++ = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a12">BYTES</a>)(Output[l]*255);
02130                     }
02131                     <span class="keywordflow">else</span>
02132                     {
02133                         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a45">WriteHex</a> (lpMem, (USHORT)(Output[l]*255));
02134                         <span class="keywordflow">if</span> (((<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) (lpMem - lpLineStart)) &gt; <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a4">MAX_LINELENG</a>)
02135                         {
02136                             lpLineStart = lpMem;
02137                             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
02138                         }
02139                     }
02140                 }
02141             }
02142         }
02143         <span class="keywordflow">if</span> (!bAllowBinary)
02144             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndString);
02145     }
02146     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndArray);
02147     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, ((LPHOSTCLUT)lpDevCRD)-&gt;outputChan);
02148 
02149 <span class="comment">//********** Send Output Table.</span>
02150     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a207">SendCRDOutputTable</a>(lpMem, PublicArrayName, 
02151         ((LPHOSTCLUT)lpDevCRD)-&gt;outputChan,
02152         (((LPHOSTCLUT)lpDevCRD)-&gt;lutBits == 8)? icSigLut8Type:icSigLut16Type,
02153         TRUE,
02154         bAllowBinary);
02155 
02156 
02157     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndArray);
02158     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndDict); <span class="comment">// End dictionary definition</span>
02159     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CRDEnd);
02160     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02161 
02162 Done:
02163     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(lpMem - lpOldMem);
02164 
02165     <span class="keywordflow">if</span> (hTargetCRD)
02166          <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a>(hTargetCRD);
02167     <span class="keywordflow">if</span> (hTargetCSA)
02168          <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a>(hTargetCSA);
02169     <span class="keywordflow">if</span> (hDevCRD)
02170          <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a>(hDevCRD);
02171     <span class="keywordflow">return</span> (Success);
02172 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="jul98/dll32/profcrd.c::GetTRCData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HGLOBAL GetTRCData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a29">LPMEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpRed</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a29">LPMEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpGreen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a29">LPMEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBlue</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpnRed</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpnGreen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a25">LPSINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpnBlue</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00284">284</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00557">GetCPElement()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04212">GetTRCElementSize()</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00144">icSigBlueTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00157">icSigGreenTRCTag</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00178">icSigRedTRCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00117">lpcpCurveType</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00109">LPMEMPTR</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00205">MemAlloc()</a>, <a class="el" href="../../d3/d0/object_8c-source.html#l00260">MemFree()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00137">ui32toSINT</a>.
<p>
Referenced by <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00384">GetHostMatrixCSAorCRD()</a>.
<p>
<pre class="fragment"><div>00287 {
00288     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     RedTRCIndex, GreenTRCIndex, BlueTRCIndex;
00289     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     RedTRCSize = 0, GreenTRCSize = 0, BlueTRCSize = 0;
00290     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>     MemSize;
00291     HGLOBAL  hMem;
00292 
00293  <span class="comment">// Check if we can generate the CRD</span>
00294     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a197">GetTRCElementSize</a>(cp, icSigRedTRCTag, &amp;RedTRCIndex, &amp;RedTRCSize) ||
00295         !<a class="code" href="../../d2/d9/ps2_8c.html#a197">GetTRCElementSize</a>(cp, icSigGreenTRCTag, &amp;GreenTRCIndex, &amp;GreenTRCSize) ||
00296         !<a class="code" href="../../d2/d9/ps2_8c.html#a197">GetTRCElementSize</a>(cp, icSigBlueTRCTag, &amp;BlueTRCIndex, &amp;BlueTRCSize))
00297     {
00298          <span class="keywordflow">return</span> 0;
00299     }
00300     MemSize = RedTRCSize + GreenTRCSize + BlueTRCSize;
00301     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d1/object_8c.html#a7">MemAlloc</a> (MemSize, (HGLOBAL FAR *)&amp;hMem, (LPMEMPTR) lpRed))
00302         <span class="keywordflow">return</span> 0;
00303 
00304     *lpGreen = *lpRed + RedTRCSize;
00305     *lpBlue = *lpGreen + GreenTRCSize;
00306     <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, RedTRCIndex, *lpRed, RedTRCSize) ||
00307         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, GreenTRCIndex, *lpGreen, GreenTRCSize ) ||
00308         !<a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a19">GetCPElement</a> (cp, BlueTRCIndex, *lpBlue, BlueTRCSize ))
00309     {
00310         <a class="code" href="../../d2/d1/object_8c.html#a9">MemFree</a> (hMem);
00311         <span class="keywordflow">return</span> (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00312     }
00313     *lpnRed = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a3">ui32toSINT</a> (((lpcpCurveType) *lpRed)-&gt;curve.count);
00314     *lpnGreen = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a3">ui32toSINT</a> (((lpcpCurveType) *lpGreen)-&gt;curve.count);
00315     *lpnBlue = <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a3">ui32toSINT</a> (((lpcpCurveType) *lpBlue)-&gt;curve.count);
00316 
00317     <span class="keywordflow">return</span> (hMem);
00318 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="jul98/dll32/profcrd.c::inverse_g" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float inverse_g           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">float&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>f</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00829">829</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
<pre class="fragment"><div>00830 {
00831     <span class="keywordtype">double</span> frc;
00832     <span class="keywordflow">if</span> (f &gt;= (6.0*6.0*6.0)/(29.0*29.0*29.0))
00833     {
00834         frc = pow(f, 1.0 / 3.0);
00835     }
00836     <span class="keywordflow">else</span>
00837     {
00838         frc = f * (841.0 / 108.0) + (4.0 / 29.0);
00839     }
00840     <span class="keywordflow">return</span> (<span class="keywordtype">float</span>)frc;
00841 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="jul98/dll32/profcrd.c::LabToXYZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void LabToXYZ           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Input</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Output</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>whitePoint</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01117">1117</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l06379">g()</a>.
<p>
<pre class="fragment"><div>01118 {
01119     <span class="keywordtype">float</span>   fL, fa, fb;
01120 
01121     fL = (Input[0] * 50 + 16) / 116;
01122     fa = (Input[1] * 128 - 128) / 500;
01123     fb = (Input[2] * 128 - 128) / 200;
01124     Output[0] = whitePoint[0] * <a class="code" href="../../d2/d9/ps2_8c.html#a244">g</a>(fL + fa);
01125     Output[1] = whitePoint[1] * <a class="code" href="../../d2/d9/ps2_8c.html#a244">g</a>(fL);
01126     Output[2] = whitePoint[2] * <a class="code" href="../../d2/d9/ps2_8c.html#a244">g</a>(fL - fb);
01127 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="jul98/dll32/profcrd.c::SendCRDABC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> SendCRDABC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PublicArrayName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nInputCh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Buff</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>e</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>LutTag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01756">1756</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d3/d8/aug98_2dll32_2csprof_8h-source.html#l00015">CIEXYZRange</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00147">EncodeABCLab1</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00148">EncodeABCLab2</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00030">EncodeABCTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00128">EndClip</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00358">icS15Fixed16Number</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00248">icSigLabData</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00247">icSigXYZData</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00115">IndexArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00110">IndexArray16b</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00087">InputArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00118">lpcpLut16Type</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00119">lpcpLut8Type</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00145">MatrixABCLabCRD</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00029">MatrixABCTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d3/monitor_8c.html#a2">pcs</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00089">PreViewInArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00076">RangeABC</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00027">RangeABCTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00131">Scale16</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00130">Scale8</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00157">si16f16toSFLOAT</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00127">StartClip</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>, and <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01152">WriteObjectN()</a>.
<p>
<pre class="fragment"><div>01758 {
01759     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpOldMem;
01760     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i, j;
01761     <span class="keywordtype">double</span> TempMatrixABC[9];
01762     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpTable;
01763     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpLineStart;
01764     lpOldMem = lpMem;
01765 
01766  <span class="comment">//********** /RangeABC</span>
01767     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangeABCTag);
01768     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeABC);
01769  <span class="comment">//********** /MatrixABC</span>
01770     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixABCTag);
01771     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/monitor_8c.html#a2">pcs</a> == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>)
01772     {
01773         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01774         <span class="keywordflow">if</span> (e)
01775         {
01776             <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01777             {
01778                 <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++)
01779                 {
01780                     lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, e[i + j * 3]);
01781                 }
01782             }
01783         }
01784         <span class="keywordflow">else</span>
01785         {
01786             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01787             {
01788                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) &amp; ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a37">lpcpLut8Type</a>) Buff)-&gt;lut.e00;
01789             } <span class="keywordflow">else</span>
01790             {
01791                 lpTable = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>) &amp; ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a36">lpcpLut16Type</a>) Buff)-&gt;lut.e00;
01792             }
01793             <span class="keywordflow">for</span> (i = 0; i &lt; 9; i++)
01794             {
01795                 TempMatrixABC[i] = ((<span class="keywordtype">double</span>) <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a9">si16f16toSFLOAT</a> (lpTable)) / <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a3">CIEXYZRange</a>;
01796                 lpTable += <span class="keyword">sizeof</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a192">icS15Fixed16Number</a>);
01797             }
01798             <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01799             {
01800                 <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++)
01801                 {
01802                     lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, TempMatrixABC[i + j * 3]);
01803                 }
01804             }
01805         }
01806         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01807     } <span class="keywordflow">else</span>
01808     {
01809         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCLabCRD);
01810     }
01811  <span class="comment">//********** /EncodeABC</span>
01812     <span class="keywordflow">if</span> (nInputCh == 0)
01813         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpMem - lpOldMem);
01814 
01815     lpLineStart = lpMem;
01816     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EncodeABCTag);
01817     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01818     <span class="keywordflow">for</span> (i = 0; i &lt; nInputCh; i++)
01819     {
01820         lpLineStart = lpMem;
01821         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginFunction);
01822         <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/monitor_8c.html#a2">pcs</a> == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>)
01823         {
01824             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem,
01825                                   (0 == i) ? EncodeABCLab1 : EncodeABCLab2);
01826         }
01827         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, StartClip);
01828         <span class="keywordflow">if</span> (e)
01829             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, PreViewInArray);
01830         <span class="keywordflow">else</span>
01831             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, InputArray);
01832         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a44">WriteObjectN</a> (lpMem, (MEMPTR) PublicArrayName, lstrlen (PublicArrayName));
01833         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, i);
01834 
01835         <span class="keywordflow">if</span> (!bAllowBinary)              <span class="comment">// Output ASCII CRD</span>
01836         {
01837             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, IndexArray);
01838         } <span class="keywordflow">else</span>
01839         {                               <span class="comment">// Output BINARY CRD</span>
01840             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01841             {
01842                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
01843             } <span class="keywordflow">else</span>
01844             {
01845                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray16b);
01846             }
01847         }
01848         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, (LutTag == icSigLut8Type) ? 
01849                               Scale8 : Scale16);
01850         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndClip);
01851         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
01852     }
01853     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01854     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpMem - lpOldMem);
01855 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="jul98/dll32/profcrd.c::SendCRDBWPoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> SendCRDBWPoint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>whitePoint</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01858">1858</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00013">BlackPoint</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00022">BlackPointTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00021">WhitePointTag</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>01859 {
01860     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpOldMem;
01861     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i;
01862 
01863     lpOldMem = lpMem;
01864 
01865 <span class="comment">//********** /BlackPoint</span>
01866     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BlackPointTag);
01867     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BlackPoint);
01868 
01869 <span class="comment">//********** /WhitePoint</span>
01870     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, WhitePointTag);
01871     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01872     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01873     {
01874         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)(whitePoint[i]));
01875     }
01876     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01877     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpMem - lpOldMem);
01878 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="jul98/dll32/profcrd.c::SendCRDLMN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> SendCRDLMN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>whitePoint</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>mediaWP</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pcs</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01650">1650</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00061">DivOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00142">EncodeLMNLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00033">EncodeLMNTag</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00247">icSigXYZData</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00032">MatrixLMNTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d3/monitor_8c.html#a2">pcs</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00141">RangeLMNLab</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00031">RangeLMNTag</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>01651 {
01652     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpOldMem;
01653     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i, j;
01654 
01655     lpOldMem = lpMem;
01656 
01657 <span class="comment">//********** /MatrixLMN</span>
01658     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a> == <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01659     {
01660         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixLMNTag);
01661 
01662         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01663         <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01664         {
01665             <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++)
01666                 lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem,
01667                     (<span class="keywordtype">double</span>) (i == j) ? whitePoint[i] / mediaWP[i] : 0.0);
01668         }
01669         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01670     }
01671  <span class="comment">//********** /RangeLMN</span>
01672     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangeLMNTag);
01673     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/monitor_8c.html#a2">pcs</a> == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>)
01674     {
01675         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01676         <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01677         {
01678             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) 0);
01679             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) whitePoint[i]);
01680         }
01681         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01682     } <span class="keywordflow">else</span>
01683     {
01684         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMNLab);
01685     }
01686 
01687  <span class="comment">//********** /EncodeLMN</span>
01688     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EncodeLMNTag);
01689     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01690     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01691     {
01692         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
01693         <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/monitor_8c.html#a2">pcs</a> != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a109">icSigXYZData</a>)
01694         {
01695             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)whitePoint[i]);
01696             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DivOp);
01697             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EncodeLMNLab);
01698         }
01699         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
01700     }
01701     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01702 
01703     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpMem - lpOldMem);
01704 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="jul98/dll32/profcrd.c::SendCRDOutputTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> SendCRDOutputTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PublicArrayName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nOutputCh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>LutTag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bHost</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01880">1880</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00083">Clip01</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00221">icSigLut8Type</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00115">IndexArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00110">IndexArray16b</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00063">NewLine</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00088">OutputArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00090">PreViewOutArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00131">Scale16</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00133">TFunction8</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00080">WriteInt</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>, and <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01152">WriteObjectN()</a>.
<p>
<pre class="fragment"><div>01882 {
01883     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpOldMem;
01884     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i;
01885 
01886     lpOldMem = lpMem;
01887 
01888     <span class="keywordflow">for</span> (i = 0; i &lt; nOutputCh; i++)
01889     {
01890         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginFunction);
01891         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Clip01);
01892         <span class="keywordflow">if</span> (bHost)
01893             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, PreViewOutArray);
01894         <span class="keywordflow">else</span>
01895             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, OutputArray);
01896         lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a44">WriteObjectN</a> (lpMem, (MEMPTR) PublicArrayName, lstrlen (PublicArrayName));
01897         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a44">WriteInt</a> (lpMem, i);
01898 
01899         <span class="keywordflow">if</span> (!bAllowBinary)               <span class="comment">// Output ASCII CRD</span>
01900         {
01901             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
01902             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01903             {
01904                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TFunction8);
01905             } <span class="keywordflow">else</span>
01906             {
01907                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray);
01908                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16);
01909             }
01910         } <span class="keywordflow">else</span>
01911         {                               <span class="comment">// Output BINARY CRD</span>
01912             <span class="keywordflow">if</span> (LutTag == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a91">icSigLut8Type</a>)
01913             {
01914                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, TFunction8);
01915             } <span class="keywordflow">else</span>
01916             {
01917                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, IndexArray16b);
01918                 lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Scale16);
01919             }
01920         }
01921 
01922         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
01923     }
01924     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpMem - lpOldMem);
01925 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="jul98/dll32/profcrd.c::SendCRDPQR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> SendCRDPQR           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a26">LPSFLOAT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>whitePoint</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01708">1708</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00007">BeginArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00009">BeginFunction</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00008">EndArray</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00010">EndFunction</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00306">icAbsoluteColorimetric</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00078">Identity</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00109">Intent</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00151">MatrixPQR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00025">MatrixPQRTag</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00049">NullOp</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00150">RangePQR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00023">RangePQRTag</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00011">SINT</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00153">TransformPQR</a>, <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l00024">TransformPQRTag</a>, <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l01193">WriteFloat()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l04573">WriteNewLineObject()</a>, and <a class="el" href="../../d3/d8/ps2_8c-source.html#l00072">WriteObject</a>.
<p>
<pre class="fragment"><div>01709 {
01710     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a>  lpOldMem;
01711     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>    i;
01712 
01713     lpOldMem = lpMem;
01714 
01715     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a> != <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01716     {
01717      <span class="comment">//********** /RangePQR</span>
01718         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangePQRTag);
01719         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangePQR);
01720 
01721      <span class="comment">//********** /MatrixPQR</span>
01722         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixPQRTag);
01723         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixPQR);
01724     }
01725     <span class="keywordflow">else</span>
01726     {
01727     <span class="comment">//********** /RangePQR</span>
01728         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangePQRTag);
01729         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01730         <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01731         {
01732             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) 0);
01733             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)(whitePoint[i]));
01734         }
01735         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01736     <span class="comment">//********** /MatrixPQR</span>
01737         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixPQRTag);
01738         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, Identity);
01739     }
01740 <span class="comment">//********** /TransformPQR</span>
01741     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, TransformPQRTag);
01742     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
01743     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)
01744     {
01745         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
01746         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem,
01747             (icAbsoluteColorimetric != Intent) ? TransformPQR[i] : NullOp);
01748         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
01749     }
01750     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
01751    
01752     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>)(lpMem - lpOldMem);
01753 } 
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="jul98/dll32/profcrd.c::TableInterp3" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL TableInterp3           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>fTemp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00846">846</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d4/d9/user32_8def-source.html#l00799">c</a>, <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00006">MAXCOLOR8</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00847 {
00848     <span class="keywordtype">int</span>    tmpA, tmpBC;
00849     <span class="keywordtype">int</span>    cellA, cellB, cellC;
00850     <span class="keywordtype">float</span>  a, b, <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>;
00851     <span class="keywordtype">short</span>  Grids;
00852     <span class="keywordtype">short</span>  outputChan;
00853     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> v000, v001, v010, v011;
00854     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> v100, v101, v110, v111;
00855     <span class="keywordtype">float</span>  vx0x, vx1x;
00856     <span class="keywordtype">float</span>  v0xx, v1xx;
00857     <span class="keywordtype">int</span>    idx;
00858 
00859     cellA = (<span class="keywordtype">int</span>)(fTemp[0]);
00860     a = fTemp[0] - cellA;
00861 
00862     cellB = (<span class="keywordtype">int</span>)(fTemp[1]);
00863     b = fTemp[1] - cellB;
00864 
00865     cellC = (<span class="keywordtype">int</span>)(fTemp[2]);
00866     <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> = fTemp[2] - cellC;
00867 
00868     Grids = lpHostClut-&gt;clutPoints;
00869     outputChan = lpHostClut-&gt;outputChan;
00870     tmpA  = outputChan * Grids * Grids; 
00871     tmpBC = outputChan * (Grids * cellB + cellC);
00872 
00873     <span class="comment">// Calculate 8 surrounding cells.</span>
00874     v000 = lpHostClut-&gt;clut + tmpA * cellA + tmpBC;
00875     v001 = (cellC &lt; (Grids - 1))? v000 + outputChan : v000;
00876     v010 = (cellB &lt; (Grids - 1))? v000 + outputChan * Grids : v000;
00877     v011 = (cellC &lt; (Grids - 1))? v010 + outputChan : v010 ;
00878 
00879     v100 = (cellA &lt; (Grids - 1))? v000 + tmpA : v000;
00880     v101 = (cellC &lt; (Grids - 1))? v100 + outputChan : v100;
00881     v110 = (cellB &lt; (Grids - 1))? v100 + outputChan * Grids : v100;
00882     v111 = (cellC &lt; (Grids - 1))? v110 + outputChan : v110;
00883 
00884     <span class="keywordflow">for</span> (idx = 0; idx &lt; outputChan; idx++)
00885     {
00886         <span class="comment">// Calculate the average of 4 bottom cells.</span>
00887         vx0x = *v000 + <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v001 - (<span class="keywordtype">int</span>)*v000);
00888         vx1x = *v010 + <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v011 - (<span class="keywordtype">int</span>)*v010);
00889         v0xx = vx0x + b * (vx1x - vx0x);
00890 
00891         <span class="comment">// Calculate the average of 4 upper cells.</span>
00892         vx0x = *v100 + <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v101 - (<span class="keywordtype">int</span>)*v100);
00893         vx1x = *v110 + <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v111 - (<span class="keywordtype">int</span>)*v110);
00894         v1xx = vx0x + b * (vx1x - vx0x);
00895 
00896         <span class="comment">// Calculate the bottom and upper average.</span>
00897         fTemp[idx] = (v0xx + a * (v1xx - v0xx)) / <a class="code" href="../../d8/d5/aug98_2dll32_2profcrd_8c.html#a1">MAXCOLOR8</a>;
00898 
00899         <span class="keywordflow">if</span> ( idx &lt; (outputChan - 1))
00900         {
00901             v000++;
00902             v001++;
00903             v010++;
00904             v011++;
00905             v100++;
00906             v101++;
00907             v110++;
00908             v111++;
00909         }
00910     }
00911 
00912     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00913 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="jul98/dll32/profcrd.c::TableInterp4" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL TableInterp4           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/jul98_2test_2profcrd_8h.html#a3">LPHOSTCLUT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpHostClut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>fTemp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l00916">916</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d9/d4/aug98_2dll32_2profcrd_8c-source.html#l00006">MAXCOLOR8</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00080">MEMPTR</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00917 {
00918     <span class="keywordtype">int</span>    tmpH, tmpI, tmpJK;
00919     <span class="keywordtype">int</span>    cellH, cellI, cellJ, cellK;
00920     <span class="keywordtype">float</span>  h, i, j, k;
00921     <span class="keywordtype">short</span>  Grids;
00922     <span class="keywordtype">short</span>  outputChan;
00923     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> v0000, v0001, v0010, v0011;
00924     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> v0100, v0101, v0110, v0111;
00925     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> v1000, v1001, v1010, v1011;
00926     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> v1100, v1101, v1110, v1111;
00927     <span class="keywordtype">float</span>  vxx0x, vxx1x;
00928     <span class="keywordtype">float</span>  vx0xx, vx1xx;
00929     <span class="keywordtype">float</span>  v0xxx, v1xxx;
00930     <span class="keywordtype">int</span>    idx;
00931 
00932     cellH = (<span class="keywordtype">int</span>)(fTemp[0]);
00933     h = fTemp[0] - cellH;
00934 
00935     cellI = (<span class="keywordtype">int</span>)(fTemp[1]);
00936     i = fTemp[1] - cellI;
00937 
00938     cellJ = (<span class="keywordtype">int</span>)(fTemp[2]);
00939     j = fTemp[2] - cellJ;
00940 
00941     cellK = (<span class="keywordtype">int</span>)(fTemp[3]);
00942     k = fTemp[3] - cellK;
00943 
00944     Grids = lpHostClut-&gt;clutPoints;
00945     outputChan = lpHostClut-&gt;outputChan;
00946     tmpI  = outputChan * Grids * Grids;
00947     tmpH  = tmpI * Grids; 
00948     tmpJK = outputChan * (Grids * cellJ + cellK);
00949 
00950     <span class="comment">// Calculate 16 surrounding cells.</span>
00951     v0000 = lpHostClut-&gt;clut + tmpH * cellH + tmpI * cellI + tmpJK;
00952     v0001 = (cellK &lt; (Grids - 1))? v0000 + outputChan : v0000;
00953     v0010 = (cellJ &lt; (Grids - 1))? v0000 + outputChan * Grids : v0000;
00954     v0011 = (cellK &lt; (Grids - 1))? v0010 + outputChan : v0010;
00955 
00956     v0100 = (cellI &lt; (Grids - 1))? v0000 + tmpI : v0000;
00957     v0101 = (cellK &lt; (Grids - 1))? v0100 + outputChan : v0100;
00958     v0110 = (cellJ &lt; (Grids - 1))? v0100 + outputChan * Grids : v0100;
00959     v0111 = (cellK &lt; (Grids - 1))? v0110 + outputChan : v0110;
00960 
00961     v1000 = (cellH &lt; (Grids - 1))? v0000 + tmpH : v0000;
00962     v1001 = (cellK &lt; (Grids - 1))? v1000 + outputChan : v1000;
00963     v1010 = (cellJ &lt; (Grids - 1))? v1000 + outputChan * Grids : v1000;
00964     v1011 = (cellK &lt; (Grids - 1))? v1010 + outputChan : v1010;
00965 
00966     v1100 = (cellI &lt; (Grids - 1))? v1000 + tmpI : v1000;
00967     v1101 = (cellK &lt; (Grids - 1))? v1100 + outputChan : v1100;
00968     v1110 = (cellJ &lt; (Grids - 1))? v1100 + outputChan * Grids : v1100;
00969     v1111 = (cellK &lt; (Grids - 1))? v1110 + outputChan : v1110;
00970 
00971     <span class="keywordflow">for</span> (idx = 0; idx &lt; outputChan; idx++)
00972     {
00973         <span class="comment">// Calculate the average of 8 bottom cells.</span>
00974         vxx0x = *v0000 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v0001 - (<span class="keywordtype">int</span>)*v0000);
00975         vxx1x = *v0010 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v0011 - (<span class="keywordtype">int</span>)*v0010);
00976         vx0xx = vxx0x + j * (vxx1x - vxx0x);
00977         vxx0x = *v0100 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v0101 - (<span class="keywordtype">int</span>)*v0100);
00978         vxx1x = *v0110 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v0111 - (<span class="keywordtype">int</span>)*v0110);
00979         vx1xx = vxx0x + j * (vxx1x - vxx0x);
00980         v0xxx = vx0xx + i * (vx1xx - vx0xx);
00981 
00982         <span class="comment">// Calculate the average of 8 upper cells.</span>
00983         vxx0x = *v1000 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v1001 - (<span class="keywordtype">int</span>)*v1000);
00984         vxx1x = *v1010 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v1011 - (<span class="keywordtype">int</span>)*v1010);
00985         vx0xx = vxx0x + j * (vxx1x - vxx0x);
00986         vxx0x = *v1100 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v1101 - (<span class="keywordtype">int</span>)*v1100);
00987         vxx1x = *v1110 + k * (<span class="keywordtype">int</span>)((<span class="keywordtype">int</span>)*v1111 - (<span class="keywordtype">int</span>)*v1110);
00988         vx1xx = vxx0x + j * (vxx1x - vxx0x);
00989         v1xxx = vx0xx + i * (vx1xx - vx0xx);
00990 
00991         <span class="comment">// Calculate the bottom and upper average.</span>
00992         fTemp[idx] = (v0xxx + h * (v1xxx - v0xxx)) / <a class="code" href="../../d8/d5/aug98_2dll32_2profcrd_8c.html#a1">MAXCOLOR8</a>;
00993 
00994         <span class="keywordflow">if</span> ( idx &lt; (outputChan - 1))
00995         {
00996             v0000++;
00997             v0001++;
00998             v0010++;
00999             v0011++;
01000             v0100++;
01001             v0101++;
01002             v0110++;
01003             v0111++;
01004             v1000++;
01005             v1001++;
01006             v1010++;
01007             v1011++;
01008             v1100++;
01009             v1101++;
01010             v1110++;
01011             v1111++;
01012         }
01013     }
01014 
01015     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01016 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="jul98/dll32/profcrd.c::XYZToLab" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void XYZToLab           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Input</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>Output</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>float far *&nbsp;</td>
          <td class="mdname" nowrap> <em>whitePoint</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html#l01130">1130</a> of file <a class="el" href="../../d2/d5/jul98_2dll32_2profcrd_8c-source.html">jul98/dll32/profcrd.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l06408">inverse_g()</a>.
<p>
<pre class="fragment"><div>01131 {
01132     <span class="keywordtype">float</span>   fL, fa, fb;
01133 
01134     fL = <a class="code" href="../../d2/d9/ps2_8c.html#a245">inverse_g</a>(Input[0] / whitePoint[0]);
01135     fa = <a class="code" href="../../d2/d9/ps2_8c.html#a245">inverse_g</a>(Input[1] / whitePoint[1]);
01136     fb = <a class="code" href="../../d2/d9/ps2_8c.html#a245">inverse_g</a>(Input[2] / whitePoint[2]);
01137     Output[0] = (fa * 116 - 16) / 100;
01138     Output[1] = (fL * 500 - fa * 500 + 128) / 255;
01139     Output[2] = (fa * 200 - fb * 200 + 128) / 255;
01140 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:19 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: 4/kdp.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>kdp.h File Reference</h1><code>#include "<a class="el" href="../../d0/d8/ntos_8h-source.html">ntos.h</a>"</code><br>
<code>#include "<a class="el" href="../../d1/d9/ki_8h-source.html">ki.h</a>"</code><br>
<code>#include "wdbgexts.h"</code><br>
<code>#include "ntdbg.h"</code><br>
<code>#include "string.h"</code><br>
<code>#include "stdlib.h"</code><br>

<p>
<a href="../../d2/d6/4_2kdp_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html">_BREAKPOINT_ENTRY</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d1/struct__TRACE__DATA__SYM.html">_TRACE_DATA_SYM</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d7/structDBGKD__INTERNAL__BREAKPOINT.html">DBGKD_INTERNAL_BREAKPOINT</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a0">NOEXTAPI</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a1">GLOBAL_BREAKPOINT_LIMIT</a>&nbsp;&nbsp;&nbsp;1610612736L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a2">KD_BREAKPOINT_IN_USE</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a3">KD_BREAKPOINT_NEEDS_WRITE</a>&nbsp;&nbsp;&nbsp;0x00000002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a4">KD_BREAKPOINT_SUSPENDED</a>&nbsp;&nbsp;&nbsp;0x00000004</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a5">KD_BREAKPOINT_NEEDS_REPLACE</a>&nbsp;&nbsp;&nbsp;0x00000008</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a6">KD_BREAKPOINT_STATE_MASK</a>&nbsp;&nbsp;&nbsp;0x0000000f</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a7">KD_BREAKPOINT_IA64_MASK</a>&nbsp;&nbsp;&nbsp;0x000f0000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a8">KD_BREAKPOINT_IA64_MODE</a>&nbsp;&nbsp;&nbsp;0x00010000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a9">KD_BREAKPOINT_IA64_MOVL</a>&nbsp;&nbsp;&nbsp;0x00020000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a10">KDP_PACKET_RECEIVED</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a11">KDP_PACKET_TIMEOUT</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a12">KDP_PACKET_RESEND</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a13">MAXIMUM_RETRIES</a>&nbsp;&nbsp;&nbsp;20</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a14">DBGKD_MAX_SPECIAL_CALLS</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a15">KDP_MESSAGE_BUFFER_SIZE</a>&nbsp;&nbsp;&nbsp;4096</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a16">DBGKD_MAX_INTERNAL_BREAKPOINTS</a>&nbsp;&nbsp;&nbsp;20</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a17">SEARCH_PAGE_HIT_DATABASE_SIZE</a>&nbsp;&nbsp;&nbsp;PAGE_SIZE</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a18">KDP_SEARCH_SYMBOL_CHECK</a>&nbsp;&nbsp;&nbsp;0xABCDDCBA</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a19">KDP_SEARCH_ALL_OFFSETS_IN_PAGE</a>&nbsp;&nbsp;&nbsp;0x0001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a20">DPRINT</a>(s)</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html">_BREAKPOINT_ENTRY</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a21">BREAKPOINT_ENTRY</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html">_BREAKPOINT_ENTRY</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a22">PBREAKPOINT_ENTRY</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d1/struct__TRACE__DATA__SYM.html">_TRACE_DATA_SYM</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a23">TRACE_DATA_SYM</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d1/struct__TRACE__DATA__SYM.html">_TRACE_DATA_SYM</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a24">PTRACE_DATA_SYM</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a43">PDBGKD_INTERNAL_BREAKPOINT</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a101">KdpReboot</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a102">KdpPrintString</a> (IN PSTRING Output)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a103">KdpPromptString</a> (IN PSTRING Output, IN OUT PSTRING Input)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a104">KdpAddBreakpoint</a> (IN PVOID Address)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a105">KdpDeleteBreakpoint</a> (IN ULONG <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a29">Handle</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a106">KdpDeleteBreakpointRange</a> (IN PVOID Lower, IN PVOID Upper)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a107">KdQuerySpecialCalls</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN ULONG Length, OUT PULONG RequiredLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a108">KdSetSpecialCall</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PCONTEXT ContextRecord)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a109">KdClearSpecialCalls</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a> (IN PCHAR Destination, IN PCHAR Source, IN ULONG Length)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a111">KdpQuickMoveMemory</a> (IN PCHAR Destination, IN PCHAR Source, IN ULONG Length)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a112">KdpReceivePacket</a> (IN ULONG ExpectedPacketType, OUT PSTRING MessageHeader, OUT PSTRING MessageData, OUT PULONG DataLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a113">KdpSetLoadState</a> (IN PDBGKD_WAIT_STATE_CHANGE64 WaitStateChange, IN PCONTEXT ContextRecord)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a114">KdpSetStateChange</a> (IN PDBGKD_WAIT_STATE_CHANGE64 WaitStateChange, IN PEXCEPTION_RECORD ExceptionRecord, IN PCONTEXT ContextRecord, IN BOOLEAN SecondChance)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a115">KdpGetStateChange</a> (IN PDBGKD_MANIPULATE_STATE64 ManipulateState, IN PCONTEXT ContextRecord)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a> (IN ULONG PacketType, IN PSTRING MessageHeader, IN PSTRING MessageData OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a117">KdpStub</a> (IN PKTRAP_FRAME TrapFrame, IN PKEXCEPTION_FRAME ExceptionFrame, IN PEXCEPTION_RECORD ExceptionRecord, IN PCONTEXT ContextRecord, IN <a class="el" href="../../d0/d9/ntosdef_8h.html#a39">KPROCESSOR_MODE</a> PreviousMode, IN BOOLEAN SecondChance)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a118">KdpTrap</a> (IN PKTRAP_FRAME TrapFrame, IN PKEXCEPTION_FRAME ExceptionFrame, IN PEXCEPTION_RECORD ExceptionRecord64, IN PCONTEXT ContextRecord, IN <a class="el" href="../../d0/d9/ntosdef_8h.html#a39">KPROCESSOR_MODE</a> PreviousMode, IN BOOLEAN SecondChance)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a119">KdpSwitchProcessor</a> (IN PEXCEPTION_RECORD ExceptionRecord, IN OUT PCONTEXT ContextRecord, IN BOOLEAN SecondChance)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a120">KdpReportExceptionStateChange</a> (IN PEXCEPTION_RECORD ExceptionRecord, IN OUT PCONTEXT ContextRecord, IN BOOLEAN SecondChance)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a121">KdpReportLoadSymbolsStateChange</a> (IN PSTRING PathName, IN <a class="el" href="../../d6/d5/struct__KD__SYMBOLS__INFO.html">PKD_SYMBOLS_INFO</a> SymbolInfo, IN BOOLEAN UnloadSymbols, IN OUT PCONTEXT ContextRecord)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d9/ke_8h.html#a408">KCONTINUE_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a122">KdpSendWaitContinue</a> (IN ULONG PacketType, IN PSTRING MessageHeader, IN PSTRING MessageData OPTIONAL, IN OUT PCONTEXT ContextRecord)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a123">KdpReadVirtualMemory</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a124">KdpWriteVirtualMemory</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a125">KdpReadPhysicalMemory</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a126">KdpWritePhysicalMemory</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a127">KdpCheckLowMemory</a> (IN PDBGKD_MANIPULATE_STATE64 m)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a128">KdpGetContext</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a129">KdpSetContext</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a130">KdpWriteBreakpoint</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a131">KdpRestoreBreakpoint</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a132">KdpReadControlSpace</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a133">KdpWriteControlSpace</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a134">KdpReadIoSpace</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a135">KdpReadMachineSpecificRegister</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a136">KdpWriteIoSpace</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a137">KdpWriteMachineSpecificRegister</a> (IN PDBGKD_MANIPULATE_STATE64 m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a138">KdpSuspendBreakpoint</a> (ULONG <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a29">Handle</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a139">KdpSuspendAllBreakpoints</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a140">KdpRestoreAllBreakpoints</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a141">KdpTimeSlipDpcRoutine</a> (<a class="el" href="../../d1/d6/struct__KDPC.html">PKDPC</a> Dpc, PVOID DeferredContext, PVOID SystemArgument1, PVOID SystemArgument2)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a142">KdpTimeSlipWork</a> (IN PVOID Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a143">RtlpBreakWithStatusInstruction</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a144">KdpInitCom</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a145">KdpPortLock</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a146">KdpPortUnlock</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a147">KdpPollBreakInWithPortLock</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a148">KdpReceivePacketLeader</a> (IN ULONG PacketType, OUT PULONG PacketLeader)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html">BREAKPOINT_ENTRY</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a25">KdpBreakpointTable</a> [BREAKPOINT_TABLE_SIZE]</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a26">KdpControlCPending</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>KSPIN_LOCK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a27">KdpDebuggerLock</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d9/ke_8h.html#a64">PKDEBUG_ROUTINE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a28">KiDebugRoutine</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d9/ke_8h.html#a65">PKDEBUG_SWITCH_ROUTINE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a29">KiDebugSwitchRoutine</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>KDP_BREAKPOINT_TYPE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a30">KdpBreakpointInstruction</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a31">KdpMessageBuffer</a> [KDP_MESSAGE_BUFFER_SIZE]</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a32">KdpPathBuffer</a> [KDP_MESSAGE_BUFFER_SIZE]</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a33">KdpOweBreakpoint</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a34">KdpNextPacketIdToSend</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a35">KdpPacketIdExpected</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LARGE_INTEGER&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a36">KdPerformanceCounterRate</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LARGE_INTEGER&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a37">KdTimerStart</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LARGE_INTEGER&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a38">KdTimerStop</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LARGE_INTEGER&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a39">KdTimerDifference</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a40">BreakpointsSuspended</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PVOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a41">KdpNtosImageBase</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LIST_ENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a42">KdpDebuggerDataListHead</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d7/structDBGKD__INTERNAL__BREAKPOINT.html">DBGKD_INTERNAL_BREAKPOINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a44">KdpInternalBPs</a> [DBGKD_MAX_INTERNAL_BREAKPOINTS]</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a45">KdpCurrentSymbolStart</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a46">KdpCurrentSymbolEnd</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a47">KdpNextCallLevelChange</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a48">KdSpecialCalls</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a49">KdNumberOfSpecialCalls</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a50">InitialSP</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a51">KdpNumInternalBreakpoints</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d8/struct__KTIMER.html">KTIMER</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a52">InternalBreakpointTimer</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d6/struct__KDPC.html">KDPC</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a53">InternalBreakpointCheckDpc</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a54">KdpPortLocked</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LARGE_INTEGER&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a55">KdpTimeEntered</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>DBGKD_TRACE_DATA&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a56">TraceDataBuffer</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a57">TraceDataBufferPosition</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d9/d1/struct__TRACE__DATA__SYM.html">TRACE_DATA_SYM</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a58">TraceDataSyms</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a59">NextTraceDataSym</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a60">NumTraceDataSyms</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a61">IntBPsSkipping</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a62">WatchStepOver</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PVOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a63">WSOThread</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a64">WSOEsp</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a65">WatchStepOverHandle</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a66">WatchStepOverBreakAddr</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a67">WatchStepOverSuspended</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a68">InstructionsTraced</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a69">SymbolRecorded</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a70">CallLevelChange</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a71">oldpc</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a72">InstrCountInternal</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a73">KdpControlCPressed</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a74">KdpRetryCount</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a75">KdpNumberRetries</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a76">KdpDefaultRetries</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a77">KdPrintCircularBuffer</a> [KDPRINTBUFFERSIZE]</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PUCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a78">KdPrintWritePointer</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a79">KdPrintRolloverCount</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>KSPIN_LOCK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a80">KdpPrintSpinLock</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d2/struct__DEBUG__PARAMETERS.html">DEBUG_PARAMETERS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a81">KdDebugParameters</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>KSPIN_LOCK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a82">KdpDataSpinLock</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>KDDEBUGGER_DATA64&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a83">KdDebuggerDataBlock</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d6/struct__KDPC.html">KDPC</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a84">KdpTimeSlipDpc</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d7/d9/struct__WORK__QUEUE__ITEM.html">WORK_QUEUE_ITEM</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a85">KdpTimeSlipWorkItem</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d8/struct__KTIMER.html">KTIMER</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a86">KdpTimeSlipTimer</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a87">KdpTimeSlipPending</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>KSPIN_LOCK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a88">KdpTimeSlipEventLock</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PVOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a89">KdpTimeSlipEvent</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a90">KdpDebuggerStructuresInitialized</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a91">KdEnteredDebugger</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PFN_NUMBER&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a92">KdpSearchPageHits</a> [SEARCH_PAGE_HIT_DATABASE_SIZE]</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a93">KdpSearchPageHitOffsets</a> [SEARCH_PAGE_HIT_DATABASE_SIZE]</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a94">KdpSearchPageHitIndex</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LOGICAL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a95">KdpSearchInProgress</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PFN_NUMBER&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a96">KdpSearchStartPageFrame</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PFN_NUMBER&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a97">KdpSearchEndPageFrame</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a98">KdpSearchAddressRangeStart</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a99">KdpSearchAddressRangeEnd</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d7/4_2kdp_8h.html#a100">KdpSearchCheckPoint</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a16" doxytag="4/kdp.h::DBGKD_MAX_INTERNAL_BREAKPOINTS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DBGKD_MAX_INTERNAL_BREAKPOINTS&nbsp;&nbsp;&nbsp;20          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00611">611</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="4/kdp.h::DBGKD_MAX_SPECIAL_CALLS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DBGKD_MAX_SPECIAL_CALLS&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00184">184</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="4/kdp.h::DPRINT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DPRINT          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">s&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00774">774</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="4/kdp.h::GLOBAL_BREAKPOINT_LIMIT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GLOBAL_BREAKPOINT_LIMIT&nbsp;&nbsp;&nbsp;1610612736L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00145">145</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="4/kdp.h::KD_BREAKPOINT_IA64_MASK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KD_BREAKPOINT_IA64_MASK&nbsp;&nbsp;&nbsp;0x000f0000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00157">157</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="4/kdp.h::KD_BREAKPOINT_IA64_MODE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KD_BREAKPOINT_IA64_MODE&nbsp;&nbsp;&nbsp;0x00010000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00158">158</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="4/kdp.h::KD_BREAKPOINT_IA64_MOVL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KD_BREAKPOINT_IA64_MOVL&nbsp;&nbsp;&nbsp;0x00020000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00159">159</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="4/kdp.h::KD_BREAKPOINT_IN_USE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KD_BREAKPOINT_IN_USE&nbsp;&nbsp;&nbsp;0x00000001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00151">151</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="4/kdp.h::KD_BREAKPOINT_NEEDS_REPLACE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KD_BREAKPOINT_NEEDS_REPLACE&nbsp;&nbsp;&nbsp;0x00000008          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00154">154</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="4/kdp.h::KD_BREAKPOINT_NEEDS_WRITE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KD_BREAKPOINT_NEEDS_WRITE&nbsp;&nbsp;&nbsp;0x00000002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00152">152</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="4/kdp.h::KD_BREAKPOINT_STATE_MASK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KD_BREAKPOINT_STATE_MASK&nbsp;&nbsp;&nbsp;0x0000000f          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00156">156</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="4/kdp.h::KD_BREAKPOINT_SUSPENDED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KD_BREAKPOINT_SUSPENDED&nbsp;&nbsp;&nbsp;0x00000004          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00153">153</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="4/kdp.h::KDP_MESSAGE_BUFFER_SIZE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KDP_MESSAGE_BUFFER_SIZE&nbsp;&nbsp;&nbsp;4096          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00573">573</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="4/kdp.h::KDP_PACKET_RECEIVED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KDP_PACKET_RECEIVED&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00165">165</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="4/kdp.h::KDP_PACKET_RESEND" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KDP_PACKET_RESEND&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00167">167</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="4/kdp.h::KDP_PACKET_TIMEOUT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KDP_PACKET_TIMEOUT&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00166">166</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="4/kdp.h::KDP_SEARCH_ALL_OFFSETS_IN_PAGE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KDP_SEARCH_ALL_OFFSETS_IN_PAGE&nbsp;&nbsp;&nbsp;0x0001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00727">727</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03787">KdpSearchPhysicalPage()</a>, and <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03909">KdpSearchPhysicalPageRange()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="4/kdp.h::KDP_SEARCH_SYMBOL_CHECK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KDP_SEARCH_SYMBOL_CHECK&nbsp;&nbsp;&nbsp;0xABCDDCBA          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00719">719</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="4/kdp.h::MAXIMUM_RETRIES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAXIMUM_RETRIES&nbsp;&nbsp;&nbsp;20          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00182">182</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="4/kdp.h::NOEXTAPI" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NOEXTAPI          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00024">24</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="4/kdp.h::SEARCH_PAGE_HIT_DATABASE_SIZE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SEARCH_PAGE_HIT_DATABASE_SIZE&nbsp;&nbsp;&nbsp;PAGE_SIZE          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00687">687</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03787">KdpSearchPhysicalPage()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a21" doxytag="4/kdp.h::BREAKPOINT_ENTRY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html">_BREAKPOINT_ENTRY</a>  <a class="el" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html">BREAKPOINT_ENTRY</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="4/kdp.h::PBREAKPOINT_ENTRY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html">_BREAKPOINT_ENTRY</a> * <a class="el" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html">PBREAKPOINT_ENTRY</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="4/kdp.h::PDBGKD_INTERNAL_BREAKPOINT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef   * <a class="el" href="../../d1/d7/4_2kdp_8h.html#a43">PDBGKD_INTERNAL_BREAKPOINT</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="4/kdp.h::PTRACE_DATA_SYM" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d1/struct__TRACE__DATA__SYM.html">_TRACE_DATA_SYM</a> * <a class="el" href="../../d9/d1/struct__TRACE__DATA__SYM.html">PTRACE_DATA_SYM</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="4/kdp.h::TRACE_DATA_SYM" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d1/struct__TRACE__DATA__SYM.html">_TRACE_DATA_SYM</a>  <a class="el" href="../../d9/d1/struct__TRACE__DATA__SYM.html">TRACE_DATA_SYM</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a109" doxytag="4/kdp.h::KdClearSpecialCalls" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdClearSpecialCalls           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>, and <a class="el" href="../../d3/d2/dbgctrl_8c-source.html#l00036">NtSystemDebugControl()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a104" doxytag="4/kdp.h::KdpAddBreakpoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG KdpAddBreakpoint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PVOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Address</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00060">60</a> of file <a class="el" href="../../d1/d3/kdbreak_8c-source.html">kdbreak.c</a>.
<p>
References <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00173">_BREAKPOINT_ENTRY::Address</a>, <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00174">_BREAKPOINT_ENTRY::Content</a>, <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00172">_BREAKPOINT_ENTRY::DirectoryTableBase</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00573">DPRINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00171">_BREAKPOINT_ENTRY::Flags</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00042">GLOBAL_BREAKPOINT_LIMIT</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00056">KD_BREAKPOINT_IA64_MOVL</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00048">KD_BREAKPOINT_IN_USE</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00051">KD_BREAKPOINT_NEEDS_REPLACE</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00049">KD_BREAKPOINT_NEEDS_WRITE</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00053">KD_BREAKPOINT_STATE_MASK</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00079">KDP_BREAKPOINT_ALIGN</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00076">KDP_BREAKPOINT_TYPE</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00263">KdpBreakpointInstruction</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00201">KdpBreakpointTable</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00300">KdpOweBreakpoint</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00070">KeGetCurrentThread</a>, <a class="el" href="../../d3/d5/ia64_2debugsup_8c-source.html#l00174">MmDbgReleaseAddress()</a>, <a class="el" href="../../d5/d5/ppc_2debugsup_8c-source.html#l00078">MmDbgWriteCheck()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l01580">KdpWriteBreakpoint()</a>, and <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03035">KdpWriteBreakPointEx()</a>.
<p>
<pre class="fragment"><div>00066                    :
00067 
00068     This routine adds an entry to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> breakpoint table and returns a handle
00069     to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> breakpoint table entry.
00070 
00071 Arguments:
00072 
00073     Address - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address where to set <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> breakpoint.
00074 
00075 Return Value:
00076 
00077     <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> value of zero <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified address <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> already in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00078     breakpoint table, there are no free entries in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> breakpoint table, <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00079     specified address <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not correctly aligned, or <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified address <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
00080     not valid. Otherwise, <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> index of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> assigned breakpoint table entry
00081     plus one <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned as <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> function value.
00082 
00083 --*/
00084 
00085 {
00086 
00087     <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a4">KDP_BREAKPOINT_TYPE</a> Content;
00088     ULONG <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00089     BOOLEAN Accessible;
00090     ULONG_PTR Opaque;
00091 
00092     <span class="comment">//DPRINT(("KD: Setting breakpoint at 0x%08x\n", Address));</span>
00093 
00094     <span class="comment">//</span>
00095     <span class="comment">// If the specified address is not properly aligned, then return zero.</span>
00096     <span class="comment">//</span>
00097 
00098     <span class="keywordflow">if</span> (((ULONG_PTR)Address &amp; <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a5">KDP_BREAKPOINT_ALIGN</a>) != 0) {
00099         <span class="keywordflow">return</span> 0;
00100     }
00101 
00102 
00103     <span class="comment">//</span>
00104     <span class="comment">// Don't allow setting the same breakpoint twice.</span>
00105     <span class="comment">//</span>
00106 
00107     <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; BREAKPOINT_TABLE_SIZE; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> += 1) {
00108         <span class="keywordflow">if</span> ((<a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> &amp; <a class="code" href="../../d0/d7/kdp_8h.html#a1">KD_BREAKPOINT_IN_USE</a>) != 0 &amp;&amp;
00109             <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o2">Address</a> == Address) {
00110 
00111             <span class="keywordflow">if</span> ((<a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> &amp; <a class="code" href="../../d0/d7/kdp_8h.html#a4">KD_BREAKPOINT_NEEDS_REPLACE</a>) != 0) {
00112 
00113                 <span class="comment">//</span>
00114                 <span class="comment">// Breakpoint was set, the page was written out and was not</span>
00115                 <span class="comment">// accessible when the breakpoint was cleared.  Now the breakpoint</span>
00116                 <span class="comment">// is being set again.  Just clear the defer flag:</span>
00117                 <span class="comment">//</span>
00118                 <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> &amp;= ~<a class="code" href="../../d0/d7/kdp_8h.html#a4">KD_BREAKPOINT_NEEDS_REPLACE</a>;
00119                 <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> + 1;
00120 
00121             } <span class="keywordflow">else</span> {
00122 
00123                 <a class="code" href="../../d0/d7/kdp_8h.html#a16">DPRINT</a>((<span class="stringliteral">"KD: Attempt to set breakpoint %08x twice!\n"</span>, Address));
00124                 <span class="keywordflow">return</span> 0;
00125 
00126             }
00127         }
00128     }
00129 
00130     <span class="comment">//</span>
00131     <span class="comment">// Search the breakpoint table for a free entry.</span>
00132     <span class="comment">//</span>
00133 
00134     <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; BREAKPOINT_TABLE_SIZE; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> += 1) {
00135         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> == 0) {
00136             <span class="keywordflow">break</span>;
00137         }
00138     }
00139 
00140     <span class="comment">//</span>
00141     <span class="comment">// If a free entry was found, then write breakpoint and return the handle</span>
00142     <span class="comment">// value plus one. Otherwise, return zero.</span>
00143     <span class="comment">//</span>
00144 
00145     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> == BREAKPOINT_TABLE_SIZE) {
00146         <a class="code" href="../../d0/d7/kdp_8h.html#a16">DPRINT</a>((<span class="stringliteral">"KD: ran out of breakpoints!\n"</span>));
00147         <span class="keywordflow">return</span> 0;
00148     }
00149 
00150 
00151     <span class="comment">//DPRINT(("KD: using Index %d\n", Index));</span>
00152 
00153     <span class="comment">//</span>
00154     <span class="comment">// Get the instruction to be replaced. If the instruction cannot be read,</span>
00155     <span class="comment">// then mark breakpoint as not accessible.</span>
00156     <span class="comment">//</span>
00157 
00158     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(
00159             (PCHAR)&amp;Content,
00160             (PCHAR)Address,
00161             <span class="keyword">sizeof</span>(KDP_BREAKPOINT_TYPE) ) != <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a4">KDP_BREAKPOINT_TYPE</a>)) {
00162         Accessible = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00163         <span class="comment">//DPRINT(("KD: memory inaccessible\n"));</span>
00164     } <span class="keywordflow">else</span> {
00165         <span class="comment">//DPRINT(("KD: memory readable...\n"));</span>
00166         Accessible = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00167     }
00168 
00169     <span class="comment">//</span>
00170     <span class="comment">// If the specified address is not write accessible, then return zero.</span>
00171     <span class="comment">//</span>
00172 
00173     <span class="keywordflow">if</span> (Accessible) {
00174         <span class="keywordflow">if</span>  (<a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a1">MmDbgWriteCheck</a>((PVOID)Address, &amp;Opaque) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00175             <a class="code" href="../../d2/d6/ia64_2debugsup_8c.html#a2">MmDbgReleaseAddress</a>((PVOID)Address, Opaque);
00176         } <span class="keywordflow">else</span> {
00177             <a class="code" href="../../d0/d7/kdp_8h.html#a16">DPRINT</a>((<span class="stringliteral">"KD: memory not writable!\n"</span>));
00178             <span class="keywordflow">return</span> 0;
00179         }
00180     }
00181 
00182 <span class="preprocessor">#if defined(_IA64_)</span>
00183 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ( Accessible ) {
00184         <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a4">KDP_BREAKPOINT_TYPE</a> mBuf;
00185         PVOID BundleAddress;
00186 
00187         <span class="comment">// change template to type 0 if current instruction is MLI</span>
00188 
00189         <span class="comment">// read in intruction template if current instruction is NOT slot 0.</span>
00190         <span class="comment">// check for two-slot MOVL instruction. Reject request if attempt to</span>
00191         <span class="comment">// set break in slot 2 of MLI template.</span>
00192 
00193         <span class="keywordflow">if</span> (((ULONG_PTR)Address &amp; 0xf) != 0) {
00194             (ULONG_PTR)BundleAddress = (ULONG_PTR)Address &amp; ~(0xf);
00195             <span class="keywordflow">if</span> (<a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(
00196                     (PCHAR)&amp;mBuf,
00197                     (PCHAR)BundleAddress,
00198                     <span class="keyword">sizeof</span>(KDP_BREAKPOINT_TYPE)
00199                     ) != <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a4">KDP_BREAKPOINT_TYPE</a>)) {
00200                 <a class="code" href="../../d0/d7/kdp_8h.html#a16">DPRINT</a>((<span class="stringliteral">"KD: read 0x%08x template failed\n"</span>, BundleAddress));
00201                 <span class="keywordflow">return</span> 0;
00202             } <span class="keywordflow">else</span> {
00203                 <span class="keywordflow">if</span> (((mBuf &amp; INST_TEMPL_MASK) &gt;&gt; 1) == 0x2) {
00204                     <span class="keywordflow">if</span> (((ULONG_PTR)Address &amp; 0xf) == 4) {
00205                         <span class="comment">// if template= type 2 MLI, change to type 0</span>
00206                         mBuf &amp;= ~((INST_TEMPL_MASK &gt;&gt; 1) &lt;&lt; 1);
00207                         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> |= <a class="code" href="../../d0/d7/kdp_8h.html#a8">KD_BREAKPOINT_IA64_MOVL</a>;
00208                         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(
00209                                 (PCHAR)BundleAddress,
00210                                 (PCHAR)&amp;mBuf,
00211                                 <span class="keyword">sizeof</span>(KDP_BREAKPOINT_TYPE)
00212                                 ) != <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a4">KDP_BREAKPOINT_TYPE</a>)) {
00213                             <a class="code" href="../../d0/d7/kdp_8h.html#a16">DPRINT</a>((<span class="stringliteral">"KD: write to 0x%08x template failed\n"</span>, BundleAddress));
00214                             <span class="keywordflow">return</span> 0;
00215                          }
00216                          <span class="keywordflow">else</span> {
00217                              <span class="comment">//DPRINT(("KD: change MLI template to type 0 at 0x%08x set\n", Address));</span>
00218                          }
00219                     } <span class="keywordflow">else</span> {
00220                          <span class="comment">// set breakpoint at slot 2 of MOVL is illegal</span>
00221                          <a class="code" href="../../d0/d7/kdp_8h.html#a16">DPRINT</a>((<span class="stringliteral">"KD: illegal to set BP at slot 2 of MOVL at 0x%08x\n"</span>, BundleAddress));
00222                          <span class="keywordflow">return</span> 0;
00223                     }
00224                 }
00225             }
00226         }
00227 
00228         <span class="comment">// insert break instruction</span>
00229 
00230         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o2">Address</a> = Address;
00231         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o3">Content</a> = Content;
00232         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> &amp;= ~(<a class="code" href="../../d0/d7/kdp_8h.html#a5">KD_BREAKPOINT_STATE_MASK</a>);
00233         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> |= <a class="code" href="../../d0/d7/kdp_8h.html#a1">KD_BREAKPOINT_IN_USE</a>;
00234         <span class="keywordflow">if</span> (Address &lt; (PVOID)<a class="code" href="../../d0/d7/kdp_8h.html#a0">GLOBAL_BREAKPOINT_LIMIT</a>) {
00235             <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o1">DirectoryTableBase</a> =
00236                 <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a3">KeGetCurrentThread</a>()-&gt;ApcState.Process-&gt;DirectoryTableBase[0];
00237             }
00238             <span class="keywordflow">switch</span> ((ULONG_PTR)Address &amp; 0xf) {
00239             <span class="keywordflow">case</span> 0:
00240                 Content = (Content &amp; ~(INST_SLOT0_MASK)) | (<a class="code" href="../../d8/d5/kddata_8c.html#a91">KdpBreakpointInstruction</a> &lt;&lt; 5);
00241                 <span class="keywordflow">break</span>;
00242 
00243             <span class="keywordflow">case</span> 4:
00244                 Content = (Content &amp; ~(INST_SLOT1_MASK)) | (<a class="code" href="../../d8/d5/kddata_8c.html#a91">KdpBreakpointInstruction</a> &lt;&lt; 14);
00245                 <span class="keywordflow">break</span>;
00246 
00247             <span class="keywordflow">case</span> 8:
00248                 Content = (Content &amp; ~(INST_SLOT2_MASK)) | (<a class="code" href="../../d8/d5/kddata_8c.html#a91">KdpBreakpointInstruction</a> &lt;&lt; 23);
00249                 <span class="keywordflow">break</span>;
00250 
00251             <span class="keywordflow">default</span>:
00252                 <a class="code" href="../../d0/d7/kdp_8h.html#a16">DPRINT</a>((<span class="stringliteral">"KD: KdpAddBreakpoint bad instruction slot#\n"</span>));
00253                 <span class="keywordflow">return</span> 0;
00254             }
00255             <span class="keywordflow">if</span> (<a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(
00256                     (PCHAR)Address,
00257                     (PCHAR)&amp;Content,
00258                     <span class="keyword">sizeof</span>(KDP_BREAKPOINT_TYPE)
00259                     ) != <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a4">KDP_BREAKPOINT_TYPE</a>)) {
00260 
00261                 <a class="code" href="../../d0/d7/kdp_8h.html#a16">DPRINT</a>((<span class="stringliteral">"KD: KdpMoveMemory failed writing BP!\n"</span>));
00262                 <span class="keywordflow">return</span> 0;
00263             }
00264             <span class="keywordflow">else</span> {
00265                 <span class="comment">//DPRINT(("KD: breakpoint at 0x%08x set\n", Address));</span>
00266             }
00267 
00268     } <span class="keywordflow">else</span> {  <span class="comment">// memory not accessible</span>
00269         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o2">Address</a> = Address;
00270         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> &amp;= ~(<a class="code" href="../../d0/d7/kdp_8h.html#a5">KD_BREAKPOINT_STATE_MASK</a>);
00271         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> |= <a class="code" href="../../d0/d7/kdp_8h.html#a1">KD_BREAKPOINT_IN_USE</a>;
00272         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> |= <a class="code" href="../../d0/d7/kdp_8h.html#a2">KD_BREAKPOINT_NEEDS_WRITE</a>;
00273         <a class="code" href="../../d8/d5/kddata_8c.html#a108">KdpOweBreakpoint</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00274         <span class="comment">//DPRINT(("KD: breakpoint write deferred\n"));</span>
00275         <span class="keywordflow">if</span> (Address &lt; (PVOID)<a class="code" href="../../d0/d7/kdp_8h.html#a0">GLOBAL_BREAKPOINT_LIMIT</a>) {
00276             <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o1">DirectoryTableBase</a> =
00277                 <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a3">KeGetCurrentThread</a>()-&gt;ApcState.Process-&gt;DirectoryTableBase[0];
00278         }
00279     }
00280 <span class="preprocessor">#else</span>
00281 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ( Accessible ) {
00282         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o2">Address</a> = Address;
00283         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o3">Content</a> = Content;
00284         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> = <a class="code" href="../../d0/d7/kdp_8h.html#a1">KD_BREAKPOINT_IN_USE</a>;
00285         <span class="keywordflow">if</span> (Address &lt; (PVOID)<a class="code" href="../../d0/d7/kdp_8h.html#a0">GLOBAL_BREAKPOINT_LIMIT</a>) {
00286             <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o1">DirectoryTableBase</a> =
00287                 <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a3">KeGetCurrentThread</a>()-&gt;ApcState.Process-&gt;DirectoryTableBase[0];
00288         }
00289         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(
00290                 (PCHAR)Address,
00291                 (PCHAR)&amp;KdpBreakpointInstruction,
00292                 <span class="keyword">sizeof</span>(KDP_BREAKPOINT_TYPE)
00293                 ) != <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a4">KDP_BREAKPOINT_TYPE</a>)) {
00294 
00295             <a class="code" href="../../d0/d7/kdp_8h.html#a16">DPRINT</a>((<span class="stringliteral">"KD: KdpMoveMemory failed writing BP!\n"</span>));
00296         }
00297     } <span class="keywordflow">else</span> {
00298         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o2">Address</a> = Address;
00299         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> = <a class="code" href="../../d0/d7/kdp_8h.html#a1">KD_BREAKPOINT_IN_USE</a> | <a class="code" href="../../d0/d7/kdp_8h.html#a2">KD_BREAKPOINT_NEEDS_WRITE</a>;
00300         <a class="code" href="../../d8/d5/kddata_8c.html#a108">KdpOweBreakpoint</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00301         <span class="comment">//DPRINT(("KD: breakpoint write deferred\n"));</span>
00302         <span class="keywordflow">if</span> (Address &lt; (PVOID)<a class="code" href="../../d0/d7/kdp_8h.html#a0">GLOBAL_BREAKPOINT_LIMIT</a>) {
00303             <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o1">DirectoryTableBase</a> =
00304                 <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a3">KeGetCurrentThread</a>()-&gt;ApcState.Process-&gt;DirectoryTableBase[0];
00305         }
00306     }
00307 <span class="preprocessor">#endif  // IA64</span>
00308 <span class="preprocessor"></span>
00309     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> + 1;
00310 
00311 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a127" doxytag="4/kdp.h::KdpCheckLowMemory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpCheckLowMemory           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>m</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03633">3633</a> of file <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html">4/kdapi.c</a>.
<p>
References <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03869">KdpSearchPhysicalMemoryRequested()</a>, <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03909">KdpSearchPhysicalPageRange()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d6/d5/iosup_8c-source.html#l00141">MiNoLowMemory</a>, <a class="el" href="../../d7/d7/sysinfo_8c-source.html#l00044">MmHighestPhysicalPage</a>, <a class="el" href="../../d7/d7/sysinfo_8c-source.html#l00043">MmLowestPhysicalPage</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l00821">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>03639                    :
03640 
03641 
03642 Arguments:
03643 
03644     Message - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
03645 
03646 Return Value:
03647 
03648     None.
03649     
03650 <a class="code" href="../../d4/d9/heapdbg_8c.html#a4">Description</a>:
03651 
03652     This function gets called when <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> !chklowmem
03653     debugger <a class="code" href="../../d7/d1/genuedef_8c.html#a6">extension</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> used.    
03654 
03655 --*/
03656 
03657 {
03658 <span class="comment">//+silviuc: move to a header</span>
03659 <span class="preprocessor">#if defined (_X86PAE_)</span>
03660 <span class="preprocessor"></span>    LOGICAL
03661         MiCheckPhysicalPagePattern (
03662         PFN_NUMBER Page,
03663         PULONG CorruptionOffset
03664         );
03665 
03666     <span class="keyword">extern</span> PFN_NUMBER <a class="code" href="../../d6/d8/sysinfo_8c.html#a6">MmLowestPhysicalPage</a>;
03667     <span class="keyword">extern</span> PFN_NUMBER <a class="code" href="../../d6/d8/sysinfo_8c.html#a7">MmHighestPhysicalPage</a>;
03668     <span class="keyword">extern</span> LOGICAL <a class="code" href="../../d5/d6/iosup_8c.html#a15">MiNoLowMemory</a>;
03669 <span class="preprocessor">#endif // #if defined (_X86PAE_)</span>
03670 <span class="preprocessor"></span><span class="comment">//-silviuc</span>
03671 
03672     STRING MessageHeader;
03673     PFN_NUMBER Page;
03674     PHYSICAL_ADDRESS P;
03675     PVOID64 VirtualAddress;
03676     ULONG CorruptionOffset;
03677 
03678     Message-&gt;ReturnStatus = STATUS_SUCCESS;
03679     MessageHeader.Length = <span class="keyword">sizeof</span>(*Message);
03680     MessageHeader.Buffer = (PCHAR)Message;
03681     
03682     <span class="keywordflow">if</span> (<a class="code" href="../../d9/d3/4_2kdapi_8c.html#a15">KdpSearchPhysicalMemoryRequested</a>()) {
03683       
03684         <span class="comment">//</span>
03685         <span class="comment">// This is a !search kd extension call.</span>
03686         <span class="comment">//</span>
03687 
03688         <a class="code" href="../../d9/d3/4_2kdapi_8c.html#a16">KdpSearchPhysicalPageRange</a>();
03689     }
03690     <span class="keywordflow">else</span> {
03691 
03692         <span class="comment">//</span>
03693         <span class="comment">// Check PAE low physical memory</span>
03694         <span class="comment">//</span>
03695 
03696 <span class="preprocessor">#if defined (_X86PAE_)</span>
03697 <span class="preprocessor"></span>
03698         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/iosup_8c.html#a15">MiNoLowMemory</a>) {
03699 
03700             <span class="keywordflow">for</span> (Page = <a class="code" href="../../d6/d8/sysinfo_8c.html#a6">MmLowestPhysicalPage</a>;
03701                 Page &lt; <a class="code" href="../../d6/d8/sysinfo_8c.html#a7">MmHighestPhysicalPage</a> &amp;&amp; Page &lt; 1024 * 1024;
03702                 Page += 1) {
03703 
03704 
03705                 <span class="keywordflow">if</span> (! MiCheckPhysicalPagePattern (Page, &amp;CorruptionOffset)) {
03706                     Message-&gt;ReturnStatus = Page;
03707                     <span class="keywordflow">break</span>;
03708                 }
03709             }
03710         }
03711 
03712 <span class="preprocessor">#endif // #if defined (_X86PAE_)</span>
03713 <span class="preprocessor"></span>    }
03714 
03715     <span class="comment">//</span>
03716     <span class="comment">// Acknowledge the packet received.</span>
03717     <span class="comment">//</span>
03718 
03719     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a> (
03720         PACKET_TYPE_KD_STATE_MANIPULATE,
03721         &amp;MessageHeader,
03722         NULL
03723         );
03724 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a105" doxytag="4/kdp.h::KdpDeleteBreakpoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN KdpDeleteBreakpoint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Handle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00826">826</a> of file <a class="el" href="../../d1/d3/kdbreak_8c-source.html">kdbreak.c</a>.
<p>
References <a class="el" href="../../d1/d6/kdp_8h-source.html#l00573">DPRINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00171">_BREAKPOINT_ENTRY::Flags</a>, <a class="el" href="../../d8/d9/cmdat2_8c-source.html#l00091">Handle</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00051">KD_BREAKPOINT_NEEDS_REPLACE</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00050">KD_BREAKPOINT_SUSPENDED</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00201">KdpBreakpointTable</a>, <a class="el" href="../../d2/d3/4_2kdbreak_8c-source.html#l00654">KdpLowWriteContent()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l01332">KdDeleteAllBreakpoints()</a>, <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00902">KdpDeleteBreakpointRange()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l01632">KdpRestoreBreakpoint()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03157">KdpRestoreBreakPointEx()</a>, and <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03035">KdpWriteBreakPointEx()</a>.
<p>
<pre class="fragment"><div>00832                    :
00833 
00834     This routine deletes an entry from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> breakpoint table.
00835 
00836 Arguments:
00837 
00838     <a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a> - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> index plus one of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> breakpoint table entry
00839         which <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be deleted.
00840 
00841 Return Value:
00842 
00843     <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> value of <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified handle <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not a valid
00844     value or <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> breakpoint cannot be deleted because <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> old instruction
00845     cannot be replaced. Otherwise, a value of <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
00846 
00847 --*/
00848 
00849 {
00850     ULONG <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = <a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a> - 1;
00851 
00852     <span class="comment">//</span>
00853     <span class="comment">// If the specified handle is not valid, then return FALSE.</span>
00854     <span class="comment">//</span>
00855 
00856     <span class="keywordflow">if</span> ((<a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a> == 0) || (<a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a> &gt; BREAKPOINT_TABLE_SIZE)) {
00857         <a class="code" href="../../d0/d7/kdp_8h.html#a16">DPRINT</a>((<span class="stringliteral">"KD: Breakpoint %d invalid.\n"</span>, Index));
00858         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00859     }
00860 
00861     <span class="comment">//</span>
00862     <span class="comment">// If the specified breakpoint table entry is not valid, then return FALSE.</span>
00863     <span class="comment">//</span>
00864 
00865     <span class="keywordflow">if</span> (<a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> == 0) {
00866         <span class="comment">//DPRINT(("KD: Breakpoint %d already clear.\n", Index));</span>
00867         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00868     }
00869 
00870     <span class="comment">//</span>
00871     <span class="comment">// If the breakpoint is already suspended, just delete it from the table.</span>
00872     <span class="comment">//</span>
00873 
00874     <span class="keywordflow">if</span> (<a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> &amp; <a class="code" href="../../d0/d7/kdp_8h.html#a3">KD_BREAKPOINT_SUSPENDED</a>) {
00875         <span class="comment">//DPRINT(("KD: Deleting suspended breakpoint %d \n", Index));</span>
00876         <span class="keywordflow">if</span> ( !(<a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> &amp; <a class="code" href="../../d0/d7/kdp_8h.html#a4">KD_BREAKPOINT_NEEDS_REPLACE</a>) ) {
00877             <span class="comment">//DPRINT(("KD: already clear.\n"));</span>
00878             <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> = 0;
00879             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00880         }
00881     }
00882 
00883     <span class="comment">//</span>
00884     <span class="comment">// Replace the instruction contents.</span>
00885     <span class="comment">//</span>
00886 
00887     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d4/4_2kdbreak_8c.html#a4">KdpLowWriteContent</a>(Index)) {
00888 
00889         <span class="comment">//</span>
00890         <span class="comment">// Delete breakpoint table entry</span>
00891         <span class="comment">//</span>
00892 
00893         <span class="comment">//DPRINT(("KD: Breakpoint %d deleted successfully.\n", Index));</span>
00894         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> = 0;
00895     }
00896 
00897     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00898 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a106" doxytag="4/kdp.h::KdpDeleteBreakpointRange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN KdpDeleteBreakpointRange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>Lower</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>Upper</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00902">902</a> of file <a class="el" href="../../d1/d3/kdbreak_8c-source.html">kdbreak.c</a>.
<p>
References <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00173">_BREAKPOINT_ENTRY::Address</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00171">_BREAKPOINT_ENTRY::Flags</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00048">KD_BREAKPOINT_IN_USE</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00201">KdpBreakpointTable</a>, and <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00826">KdpDeleteBreakpoint()</a>.
<p>
Referenced by <a class="el" href="../../d2/d4/alpha_2kdcpuapi_8c-source.html#l00036">KdpSetLoadState()</a>, and <a class="el" href="../../d2/d4/alpha_2kdcpuapi_8c-source.html#l00098">KdpSetStateChange()</a>.
<p>
<pre class="fragment"><div>00909                    :
00910 
00911     This routine deletes all breakpoints falling in a given range
00912     from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> breakpoint table.
00913 
00914 Arguments:
00915 
00916     Lower - inclusive lower address of range from which to remove BPs.
00917 
00918     Upper - include upper address of range from which to remove BPs.
00919 
00920 Return Value:
00921 
00922     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> any breakpoints removed, <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> otherwise.
00923 
00924 --*/
00925 
00926 {
00927     ULONG   <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00928     BOOLEAN ReturnStatus = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00929 
00930     <span class="comment">//</span>
00931     <span class="comment">// Examine each entry in the table in turn</span>
00932     <span class="comment">//</span>
00933 
00934     <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; BREAKPOINT_TABLE_SIZE; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++) {
00935 
00936         <span class="keywordflow">if</span> ( (<a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> &amp; <a class="code" href="../../d0/d7/kdp_8h.html#a1">KD_BREAKPOINT_IN_USE</a>) &amp;&amp;
00937              ((<a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o2">Address</a> &gt;= Lower) &amp;&amp;
00938               (<a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o2">Address</a> &lt;= Upper))
00939            ) {
00940 
00941             <span class="comment">//</span>
00942             <span class="comment">// Breakpoint is in use and falls in range, clear it.</span>
00943             <span class="comment">//</span>
00944 
00945             ReturnStatus = ReturnStatus || <a class="code" href="../../d1/d7/4_2kdp_8h.html#a105">KdpDeleteBreakpoint</a>(Index+1);
00946         }
00947     }
00948 
00949     <span class="keywordflow">return</span> ReturnStatus;
00950 
00951 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a128" doxytag="4/kdp.h::KdpGetContext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpGetContext           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l01569">1569</a> of file <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html">4/kdapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00150">KdpQuickMoveMemory()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00069">KeGetCurrentPrcb</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02776">KeNumberProcessors</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02782">KiProcessorBlock</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>01577                    :
01578 
01579     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a get context state
01580     manipulation message.  Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to <span class="keywordflow">return</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current
01581     context.
01582 
01583 Arguments:
01584 
01585     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
01586 
01587     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
01588 
01589     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
01590 
01591 Return Value:
01592 
01593     None.
01594 
01595 --*/
01596 
01597 {
01598     PDBGKD_GET_CONTEXT a = &amp;m-&gt;u.GetContext;
01599     STRING MessageHeader;
01600 
01601     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
01602     MessageHeader.Buffer = (PCHAR)m;
01603 
01604     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(AdditionalData-&gt;Length == 0);
01605 
01606     <span class="keywordflow">if</span> (m-&gt;Processor &gt;= (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d4/d9/ke_8h.html#a133">KeNumberProcessors</a>) {
01607         m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
01608     } <span class="keywordflow">else</span> {
01609         m-&gt;ReturnStatus = STATUS_SUCCESS;
01610         AdditionalData-&gt;Length = <span class="keyword">sizeof</span>(CONTEXT);
01611         <span class="keywordflow">if</span> (m-&gt;Processor == (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a2">KeGetCurrentPrcb</a>()-&gt;Number) {
01612             <a class="code" href="../../d1/d7/4_2kdp_8h.html#a111">KdpQuickMoveMemory</a>(AdditionalData-&gt;Buffer, (PCHAR)Context, <span class="keyword">sizeof</span>(CONTEXT));
01613         } <span class="keywordflow">else</span> {
01614             <a class="code" href="../../d1/d7/4_2kdp_8h.html#a111">KdpQuickMoveMemory</a>(AdditionalData-&gt;Buffer,
01615                           (PCHAR)&amp;KiProcessorBlock[m-&gt;Processor]-&gt;ProcessorState.ContextFrame,
01616                           <span class="keyword">sizeof</span>(CONTEXT)
01617                          );
01618         }
01619     }
01620 
01621     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
01622                   PACKET_TYPE_KD_STATE_MANIPULATE,
01623                   &amp;MessageHeader,
01624                   AdditionalData
01625                   );
01626 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a115" doxytag="4/kdp.h::KdpGetStateChange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpGetStateChange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>ManipulateState</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>ContextRecord</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html#l00189">189</a> of file <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html">4/alpha/kdcpuapi.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>00196                    :
00197 
00198     Extract continuation <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a58">control</a> data from Manipulate_State message
00199 
00200     N.B. This <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a noop <span class="keywordflow">for</span> MIPS.
00201 
00202 Arguments:
00203 
00204     ManipulateState - supplies pointer to Manipulate_State packet
00205 
00206     ContextRecord - Supplies a pointer to a context record.
00207 
00208 Return Value:
00209 
00210     None.
00211 
00212 --*/
00213 
00214 {
00215 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a144" doxytag="4/kdp.h::KdpInitCom" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpInitCom           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a110" doxytag="4/kdp.h::KdpMoveMemory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG KdpMoveMemory           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Source</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">31</a> of file <a class="el" href="../../d9/d5/kdmove_8c-source.html">kdmove.c</a>.
<p>
References <a class="el" href="../../d1/d6/kdp_8h-source.html#l00432">KDP_MESSAGE_BUFFER_SIZE</a>, <a class="el" href="../../d5/d5/ppc_2debugsup_8c-source.html#l00028">MmDbgReadCheck()</a>, <a class="el" href="../../d3/d5/ia64_2debugsup_8c-source.html#l00174">MmDbgReleaseAddress()</a>, <a class="el" href="../../d5/d5/ppc_2debugsup_8c-source.html#l00078">MmDbgWriteCheck()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d5/d5/kdinit_8c-source.html#l00379">KdLogDbgPrint()</a>, <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00060">KdpAddBreakpoint()</a>, <a class="el" href="../../d3/d4/i386_2kdcpuapi_8c-source.html#l01222">KdpGetCallNextOffset()</a>, <a class="el" href="../../d3/d4/i386_2kdcpuapi_8c-source.html#l00512">KdpGetReturnAddress()</a>, <a class="el" href="../../d3/d4/i386_2kdcpuapi_8c-source.html#l00332">KdpIsSpecialCall()</a>, <a class="el" href="../../d3/d4/i386_2kdcpuapi_8c-source.html#l00096">KdpIsTryFinallyReturn()</a>, <a class="el" href="../../d3/d4/i386_2kdcpuapi_8c-source.html#l00183">KdpLevelChange()</a>, <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l01121">KdpLowRestoreBreakpoint()</a>, <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00635">KdpLowWriteContent()</a>, <a class="el" href="../../d1/d5/kddbgio_8c-source.html#l00030">KdpPrintString()</a>, <a class="el" href="../../d1/d5/kddbgio_8c-source.html#l00110">KdpPromptString()</a>, <a class="el" href="../../d3/d4/i386_2kdcpuapi_8c-source.html#l00786">KdpReadControlSpace()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02534">KdpReadPhysicalMemory()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l01139">KdpReadVirtualMemory()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02434">KdpReportLoadSymbolsStateChange()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03157">KdpRestoreBreakPointEx()</a>, <a class="el" href="../../d2/d4/alpha_2kdcpuapi_8c-source.html#l00036">KdpSetLoadState()</a>, <a class="el" href="../../d2/d4/alpha_2kdcpuapi_8c-source.html#l00098">KdpSetStateChange()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03035">KdpWriteBreakPointEx()</a>, <a class="el" href="../../d3/d4/i386_2kdcpuapi_8c-source.html#l00874">KdpWriteControlSpace()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02680">KdpWritePhysicalMemory()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l01308">KdpWriteVirtualMemory()</a>, and <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00316">KdSetOwedBreakpoints()</a>.
<p>
<pre class="fragment"><div>00039                    :
00040 
00041     This routine moves data to or from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message buffer and returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00042     actual length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> information that was <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a100">moved</a>. As data <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a100">moved</a>, checks
00043     are <a class="code" href="../../d3/d0/user32_8def.html#a107">made</a> to ensure that <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> resident in memory and a page fault
00044     will not occur. If a page fault would occur, then <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d7/d4/conexts_8c.html#a1">move</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> truncated.
00045 
00046 Arguments:
00047 
00048     Destination  - Supplies a pointer to destination of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d7/d4/conexts_8c.html#a1">move</a> operation.
00049 
00050     Source - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> source of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d7/d4/conexts_8c.html#a1">move</a> operation.
00051 
00052     Length - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d7/d4/conexts_8c.html#a1">move</a> operation.
00053 
00054 Return Value:
00055 
00056     The actual length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d7/d4/conexts_8c.html#a1">move</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned as <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> fucntion value.
00057 
00058 --*/
00059 
00060 {
00061 
00062     PVOID Address1;
00063     PVOID Address2;
00064     ULONG ActualLength;
00065     ULONG_PTR Opaque;
00066 
00067     <span class="comment">//</span>
00068     <span class="comment">// If the length is greater than the size of the message buffer, then</span>
00069     <span class="comment">// reduce the length to the size of the message buffer.</span>
00070     <span class="comment">//</span>
00071 
00072     <span class="keywordflow">if</span> (Length &gt; <a class="code" href="../../d0/d7/kdp_8h.html#a14">KDP_MESSAGE_BUFFER_SIZE</a>) {
00073         Length = <a class="code" href="../../d0/d7/kdp_8h.html#a14">KDP_MESSAGE_BUFFER_SIZE</a>;
00074     }
00075 
00076     <span class="comment">//</span>
00077     <span class="comment">// Move the source information to the destination address.</span>
00078     <span class="comment">//</span>
00079 
00080     ActualLength = Length;
00081 
00082     <span class="keywordflow">while</span> (((ULONG_PTR)Source &amp; 3) &amp;&amp; (Length &gt; 0)) {
00083 
00084     <span class="comment">//</span>
00085     <span class="comment">// Check to determine if the move will succeed before actually performing</span>
00086     <span class="comment">// the operation.</span>
00087     <span class="comment">//</span>
00088 
00089         Address1 = <a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a1">MmDbgWriteCheck</a>((PVOID)Destination, &amp;Opaque);
00090         Address2 = <a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a0">MmDbgReadCheck</a>((PVOID)Source);
00091         <span class="keywordflow">if</span> ((Address1 == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (Address2 == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
00092             <span class="keywordflow">break</span>;
00093         }
00094         *(PCHAR)Address1 = *(PCHAR)Address2;
00095         <a class="code" href="../../d2/d6/ia64_2debugsup_8c.html#a2">MmDbgReleaseAddress</a>((PVOID)Destination, Opaque);
00096         Destination += 1;
00097         Source += 1;
00098         Length -= 1;
00099     }
00100 
00101     <span class="keywordflow">while</span> (Length &gt; 3) {
00102 
00103     <span class="comment">//</span>
00104     <span class="comment">// Check to determine if the move will succeed before actually performing</span>
00105     <span class="comment">// the operation.</span>
00106     <span class="comment">//</span>
00107 
00108         Address1 = <a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a1">MmDbgWriteCheck</a>((PVOID)Destination, &amp;Opaque);
00109         Address2 = <a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a0">MmDbgReadCheck</a>((PVOID)Source);
00110         <span class="keywordflow">if</span> ((Address1 == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (Address2 == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
00111             <span class="keywordflow">break</span>;
00112         }
00113         *(ULONG UNALIGNED *)Address1 = *(PULONG)Address2;
00114         <a class="code" href="../../d2/d6/ia64_2debugsup_8c.html#a2">MmDbgReleaseAddress</a>((PVOID)Destination, Opaque);
00115         Destination += 4;
00116         Source += 4;
00117         Length -= 4;
00118 
00119     }
00120 
00121     <span class="keywordflow">while</span> (Length &gt; 0) {
00122 
00123     <span class="comment">//</span>
00124     <span class="comment">// Check to determine if the move will succeed before actually performing</span>
00125     <span class="comment">// the operation.</span>
00126     <span class="comment">//</span>
00127 
00128         Address1 = <a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a1">MmDbgWriteCheck</a>((PVOID)Destination, &amp;Opaque);
00129         Address2 = <a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a0">MmDbgReadCheck</a>((PVOID)Source);
00130         <span class="keywordflow">if</span> ((Address1 == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (Address2 == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
00131             <span class="keywordflow">break</span>;
00132         }
00133         *(PCHAR)Address1 = *(PCHAR)Address2;
00134         <a class="code" href="../../d2/d6/ia64_2debugsup_8c.html#a2">MmDbgReleaseAddress</a>((PVOID)Destination, Opaque);
00135         Destination += 1;
00136         Source += 1;
00137         Length -= 1;
00138     }
00139 
00140     <span class="comment">//</span>
00141     <span class="comment">// Flush the instruction cache in case the write was into the instruction</span>
00142     <span class="comment">// stream.</span>
00143     <span class="comment">//</span>
00144 
00145     KeSweepCurrentIcache();
00146     <span class="keywordflow">return</span> ActualLength - Length;
00147 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a147" doxytag="4/kdp.h::KdpPollBreakInWithPortLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN KdpPollBreakInWithPortLock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d5/kdlock_8c-source.html#l00165">165</a> of file <a class="el" href="../../d7/d5/kdlock_8c-source.html">kdlock.c</a>.
<p>
References <a class="el" href="../../d8/d2/kd_8h-source.html#l00030">CP_GET_SUCCESS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d2/kd_8h-source.html#l00134">KdDebuggerEnabled</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00260">KdpControlCPending</a>, <a class="el" href="../../d2/d7/hal_8h.html#a201">KdPortPollByte()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/kddbgio_8c-source.html#l00030">KdpPrintString()</a>.
<p>
<pre class="fragment"><div>00171                    :
00172 
00173     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a69">procedure</a> same as <a class="code" href="../../d7/d3/kd_8h.html#a19">KdPollBreakIn</a>, but assumes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> caller
00174     already holds <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> port lock.  Returns <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> a breakin packet
00175     <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> pending.
00176 
00177     <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> packet <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> present <span class="keywordflow">if</span>:
00178 
00179     There <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a valid character which matches BREAK_CHAR.
00180 
00181     N.B.    Interrupts must be OFF around <span class="keyword">this</span> call
00182 
00183 Return Value:
00184 
00185     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> breakin sequence present, caller should execute <span class="keywordtype">int</span>-3.
00186     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> <span class="keywordflow">if</span> no breakin seen.
00187 
00188 --*/
00189 
00190 {
00191 
00192     BOOLEAN BreakIn;
00193     BOOLEAN Enable;
00194     UCHAR Input;
00195     ULONG <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00196 
00197     <span class="comment">//</span>
00198     <span class="comment">// If the debugger is enabled, see if a breakin by the kernel</span>
00199     <span class="comment">// debugger is pending.</span>
00200     <span class="comment">//</span>
00201 
00202     BreakIn = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00203     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/kd_8h.html#a13">KdDebuggerEnabled</a> != <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) {
00204         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d5/kddata_8c.html#a89">KdpControlCPending</a> != <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) {
00205             BreakIn = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00206             <a class="code" href="../../d8/d5/kddata_8c.html#a89">KdpControlCPending</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00207 
00208         } <span class="keywordflow">else</span> {
00209             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d2/d7/hal_8h.html#a201">KdPortPollByte</a>(&amp;Input);
00210             <span class="keywordflow">if</span> ((<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> == <a class="code" href="../../d7/d3/kd_8h.html#a0">CP_GET_SUCCESS</a>) &amp;&amp;
00211                 (Input == BREAKIN_PACKET_BYTE)) {
00212                 BreakIn = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00213             }
00214         }
00215     }
00216 
00217     <span class="keywordflow">return</span> BreakIn;
00218 }
}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a145" doxytag="4/kdp.h::KdpPortLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpPortLock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d5/kdlock_8c-source.html#l00026">26</a> of file <a class="el" href="../../d7/d5/kdlock_8c-source.html">kdlock.c</a>.
<p>
References <a class="el" href="../../d5/d3/alpha_2splocks_8c-source.html#l00056">KdpDebuggerLock</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03240">KdDisableDebugger()</a>, and <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03282">KdEnableDebugger()</a>.
<p>
<pre class="fragment"><div>00032                    :
00033 
00034     Acquire <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> spinlock <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> debug port.
00035 
00036     Note that user must call <span class="keyword">this</span> explicitly, <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> get/put <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a24">routines</a>
00037     <span class="keywordflow">do</span> NOT make any use of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> lock.
00038 
00039     CALLER MUST HAVE <a class="code" href="../../d9/d7/profman_8c.html#a17">SET</a> PROPER IRQL BEFORE CALLING US.
00040 
00041     We use KiAcquireSpinLock and NOT Ke... because our IRQL may
00042     be above <a class="code" href="../../d6/d7/halmips_8h.html#a53">DISPATCH_LEVEL</a>.
00043 
00044 Arguments:
00045 
00046     None.
00047 
00048 Return value:
00049 
00050     None.
00051 
00052 --*/
00053 
00054 {
00055     KiAcquireSpinLock(&amp;KdpDebuggerLock);
00056 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a146" doxytag="4/kdp.h::KdpPortUnlock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpPortUnlock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d5/kdlock_8c-source.html#l00060">60</a> of file <a class="el" href="../../d7/d5/kdlock_8c-source.html">kdlock.c</a>.
<p>
References <a class="el" href="../../d5/d3/alpha_2splocks_8c-source.html#l00056">KdpDebuggerLock</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03240">KdDisableDebugger()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03282">KdEnableDebugger()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00381">KdExitDebugger()</a>, and <a class="el" href="../../d7/d5/kdlock_8c-source.html#l00093">KdPollBreakIn()</a>.
<p>
<pre class="fragment"><div>00066                    :
00067 
00068     Release <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> spinlock <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> debug port.
00069 
00070     Note that user must call <span class="keyword">this</span> explicitly, <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> get/put <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a24">routines</a>
00071     <span class="keywordflow">do</span> NOT make any use of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> lock.
00072 
00073     CALLER MUST HAVE <a class="code" href="../../d9/d7/profman_8c.html#a17">SET</a> PROPER IRQL BEFORE CALLING US.
00074 
00075     We use KiReleaseSpinLock and NOT Ke... because our IRQL may
00076     be above <a class="code" href="../../d6/d7/halmips_8h.html#a53">DISPATCH_LEVEL</a>.
00077 
00078 Arguments:
00079 
00080     None.
00081 
00082 Return value:
00083 
00084     None.
00085 
00086 --*/
00087 
00088 {
00089     KiReleaseSpinLock(&amp;KdpDebuggerLock);
00090 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a102" doxytag="4/kdp.h::KdpPrintString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN KdpPrintString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PSTRING&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Output</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/kddbgio_8c-source.html#l00030">30</a> of file <a class="el" href="../../d1/d5/kddbgio_8c-source.html">kddbgio.c</a>.
<p>
References <a class="el" href="../../d9/d4/kddata_8c-source.html#l00202">KdpMessageBuffer</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, <a class="el" href="../../d7/d5/kdlock_8c-source.html#l00165">KdpPollBreakInWithPortLock()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00069">KeGetCurrentPrcb</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02778">KeProcessorLevel</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/alpha_2kdtrap_8c-source.html#l00028">KdpTrap()</a>.
<p>
<pre class="fragment"><div>00036                    :
00037 
00038     This routine prints a string.
00039 
00040 Arguments:
00041 
00042     Output - Supplies a pointer to a string descriptor <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> output string.
00043 
00044 Return Value:
00045 
00046     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> Control-C present in input buffer after <a class="code" href="../../d0/d1/rtdeltre_8c.html#a5">print</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done.
00047     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> otherwise.
00048 
00049 --*/
00050 
00051 {
00052 
00053     ULONG Length;
00054     STRING MessageData;
00055     STRING MessageHeader;
00056     DBGKD_DEBUG_IO DebugIo;
00057 
00058     <span class="comment">//</span>
00059     <span class="comment">// Move the output string to the message buffer.</span>
00060     <span class="comment">//</span>
00061 
00062     Length = <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(
00063                 (PCHAR)KdpMessageBuffer,
00064                 (PCHAR)Output-&gt;Buffer,
00065                 Output-&gt;Length
00066                 );
00067 
00068     <span class="comment">//</span>
00069     <span class="comment">// If the total message length is greater than the maximum packet size,</span>
00070     <span class="comment">// then truncate the output string.</span>
00071     <span class="comment">//</span>
00072 
00073     <span class="keywordflow">if</span> ((<span class="keyword">sizeof</span>(DBGKD_DEBUG_IO) + Length) &gt; PACKET_MAX_SIZE) {
00074         Length = PACKET_MAX_SIZE - <span class="keyword">sizeof</span>(DBGKD_DEBUG_IO);
00075     }
00076 
00077     <span class="comment">//</span>
00078     <span class="comment">// Construct the print string message and message descriptor.</span>
00079     <span class="comment">//</span>
00080 
00081     DebugIo.ApiNumber = DbgKdPrintStringApi;
00082     DebugIo.ProcessorLevel = <a class="code" href="../../d4/d9/ke_8h.html#a135">KeProcessorLevel</a>;
00083     DebugIo.Processor = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a2">KeGetCurrentPrcb</a>()-&gt;Number;
00084     DebugIo.u.PrintString.LengthOfString = Length;
00085     MessageHeader.Length = <span class="keyword">sizeof</span>(DBGKD_DEBUG_IO);
00086     MessageHeader.Buffer = (PCHAR)&amp;DebugIo;
00087 
00088     <span class="comment">//</span>
00089     <span class="comment">// Construct the print string data and data descriptor.</span>
00090     <span class="comment">//</span>
00091 
00092     MessageData.Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)Length;
00093     MessageData.Buffer = <a class="code" href="../../d8/d5/kddata_8c.html#a52">KdpMessageBuffer</a>;
00094 
00095     <span class="comment">//</span>
00096     <span class="comment">// Send packet to the kernel debugger on the host machine.</span>
00097     <span class="comment">//</span>
00098 
00099     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
00100                   PACKET_TYPE_KD_DEBUG_IO,
00101                   &amp;MessageHeader,
00102                   &amp;MessageData
00103                   );
00104 
00105     <span class="keywordflow">return</span> <a class="code" href="../../d1/d7/4_2kdp_8h.html#a147">KdpPollBreakInWithPortLock</a>();
00106 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a103" doxytag="4/kdp.h::KdpPromptString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN KdpPromptString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>Output</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>Input</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/kddbgio_8c-source.html#l00110">110</a> of file <a class="el" href="../../d1/d5/kddbgio_8c-source.html">kddbgio.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00432">KDP_MESSAGE_BUFFER_SIZE</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00062">KDP_PACKET_RECEIVED</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00064">KDP_PACKET_RESEND</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00202">KdpMessageBuffer</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00342">KdpReceivePacket()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00069">KeGetCurrentPrcb</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02778">KeProcessorLevel</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/alpha_2kdtrap_8c-source.html#l00028">KdpTrap()</a>.
<p>
<pre class="fragment"><div>00117                    :
00118 
00119     This routine prints a string, then reads a reply string.
00120 
00121 Arguments:
00122 
00123     Output - Supplies a pointer to a string descriptor <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> output string.
00124 
00125     Input - Supplies a pointer to a string descriptor <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input string.
00126             (Length stored/returned in Input-&gt;Length)
00127 
00128 Return Value:
00129 
00130     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> Breakin sequence was seen, caller should breakpoint and retry
00131     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> - No Breakin seen.
00132 
00133 --*/
00134 
00135 {
00136 
00137     ULONG Length;
00138     STRING MessageData;
00139     STRING MessageHeader;
00140     DBGKD_DEBUG_IO DebugIo;
00141     ULONG ReturnCode;
00142 
00143     <span class="comment">//</span>
00144     <span class="comment">// Move the output string to the message buffer.</span>
00145     <span class="comment">//</span>
00146 
00147     Length = <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(
00148                 (PCHAR)KdpMessageBuffer,
00149                 (PCHAR)Output-&gt;Buffer,
00150                 Output-&gt;Length
00151                 );
00152 
00153     <span class="comment">//</span>
00154     <span class="comment">// If the total message length is greater than the maximum packet size,</span>
00155     <span class="comment">// then truncate the output string.</span>
00156     <span class="comment">//</span>
00157 
00158     <span class="keywordflow">if</span> ((<span class="keyword">sizeof</span>(DBGKD_DEBUG_IO) + Length) &gt; PACKET_MAX_SIZE) {
00159         Length = PACKET_MAX_SIZE - <span class="keyword">sizeof</span>(DBGKD_DEBUG_IO);
00160     }
00161 
00162     <span class="comment">//</span>
00163     <span class="comment">// Construct the prompt string message and message descriptor.</span>
00164     <span class="comment">//</span>
00165 
00166     DebugIo.ApiNumber = DbgKdGetStringApi;
00167     DebugIo.ProcessorLevel = <a class="code" href="../../d4/d9/ke_8h.html#a135">KeProcessorLevel</a>;
00168     DebugIo.Processor = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a2">KeGetCurrentPrcb</a>()-&gt;Number;
00169     DebugIo.u.GetString.LengthOfPromptString = Length;
00170     DebugIo.u.GetString.LengthOfStringRead = Input-&gt;MaximumLength;
00171     MessageHeader.Length = <span class="keyword">sizeof</span>(DBGKD_DEBUG_IO);
00172     MessageHeader.Buffer = (PCHAR)&amp;DebugIo;
00173 
00174     <span class="comment">//</span>
00175     <span class="comment">// Construct the prompt string data and data descriptor.</span>
00176     <span class="comment">//</span>
00177 
00178     MessageData.Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)Length;
00179     MessageData.Buffer = <a class="code" href="../../d8/d5/kddata_8c.html#a52">KdpMessageBuffer</a>;
00180 
00181     <span class="comment">//</span>
00182     <span class="comment">// Send packet to the kernel debugger on the host machine.</span>
00183     <span class="comment">//</span>
00184 
00185     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
00186                   PACKET_TYPE_KD_DEBUG_IO,
00187                   &amp;MessageHeader,
00188                   &amp;MessageData
00189                   );
00190 
00191 
00192     <span class="comment">//</span>
00193     <span class="comment">// Receive packet from the kernel debugger on the host machine.</span>
00194     <span class="comment">//</span>
00195 
00196     MessageHeader.MaximumLength = <span class="keyword">sizeof</span>(DBGKD_DEBUG_IO);
00197     MessageData.MaximumLength = <a class="code" href="../../d0/d7/kdp_8h.html#a14">KDP_MESSAGE_BUFFER_SIZE</a>;
00198 
00199     <span class="keywordflow">do</span> {
00200         ReturnCode = <a class="code" href="../../d1/d7/4_2kdp_8h.html#a112">KdpReceivePacket</a>(
00201                                       PACKET_TYPE_KD_DEBUG_IO,
00202                                       &amp;MessageHeader,
00203                                       &amp;MessageData,
00204                                       &amp;Length
00205                                       );
00206         <span class="keywordflow">if</span> (ReturnCode == <a class="code" href="../../d0/d7/kdp_8h.html#a11">KDP_PACKET_RESEND</a>) {
00207             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00208         }
00209     } <span class="keywordflow">while</span> (ReturnCode != <a class="code" href="../../d0/d7/kdp_8h.html#a9">KDP_PACKET_RECEIVED</a>);
00210 
00211 
00212     <span class="keywordflow">if</span> (Length &gt; Input-&gt;MaximumLength) {
00213         Length = Input-&gt;MaximumLength;
00214     }
00215 
00216     Input-&gt;Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(
00217                                 (PCHAR)Input-&gt;Buffer,
00218                                 (PCHAR)KdpMessageBuffer,
00219                                 Length
00220                                 );
00221 
00222     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00223 }
}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a111" doxytag="4/kdp.h::KdpQuickMoveMemory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpQuickMoveMemory           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Source</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00150">150</a> of file <a class="el" href="../../d9/d5/kdmove_8c-source.html">kdmove.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l01461">KdpGetContext()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03328">KdpSearchMemory()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l01521">KdpSetContext()</a>, <a class="el" href="../../d2/d4/alpha_2kdcpuapi_8c-source.html#l00098">KdpSetStateChange()</a>, and <a class="el" href="../../d9/d7/i386_2kdtrap_8c-source.html#l00038">KdpTrap()</a>.
<p>
<pre class="fragment"><div>00158                    :
00159 
00160     This routine does <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exact same thing as RtlMoveMemory, BUT <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
00161     <span class="keyword">private</span> to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> debugger.  This allows folks to set breakpoints and
00162     watch points in RtlMoveMemory without risk of recursive debugger
00163     entry and <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> accompanying hang.
00164 
00165     N.B.  UNLIKE <a class="code" href="../../d8/d6/kdmove_8c.html#a0">KdpMoveMemory</a>, <span class="keyword">this</span> routine does NOT check <span class="keywordflow">for</span> accessability
00166       and may fault!  Use <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> ONLY in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> debugger and ONLY where you
00167       could use RtlMoveMemory.
00168 
00169 Arguments:
00170 
00171     Destination  - Supplies a pointer to destination of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d7/d4/conexts_8c.html#a1">move</a> operation.
00172 
00173     Source - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> source of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d7/d4/conexts_8c.html#a1">move</a> operation.
00174 
00175     Length - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d7/d4/conexts_8c.html#a1">move</a> operation.
00176 
00177 Return Value:
00178 
00179     None.
00180 
00181 --*/
00182 {
00183     <span class="keywordflow">while</span> (Length &gt; 0) {
00184         *Destination = *Source;
00185         Destination++;
00186         Source++;
00187         Length--;
00188     }
00189 }
}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a132" doxytag="4/kdp.h::KdpReadControlSpace" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpReadControlSpace           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html#l00218">218</a> of file <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html">4/alpha/kdcpuapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00432">KDP_MESSAGE_BUFFER_SIZE</a>, <a class="el" href="../../d2/d7/alpha_2kdpcpu_8h.html#a12">KdpGetCurrentPrcb()</a>, <a class="el" href="../../d2/d7/alpha_2kdpcpu_8h.html#a13">KdpGetCurrentThread()</a>, <a class="el" href="../../d2/d7/alpha_2kdpcpu_8h.html#a7">KdpGetPcr()</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, <a class="el" href="../../d7/d7/4_2axp64_2kdpcpu_8h.html#a9">KdpReadInternalProcessorCounters()</a>, <a class="el" href="../../d7/d7/4_2axp64_2kdpcpu_8h.html#a8">KdpReadInternalProcessorState()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02782">KiProcessorBlock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00600">PAGE_SHIFT</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>00226                    :
00227 
00228     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a read <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a58">control</a> space state
00229     manipulation message.  Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to read implementation
00230     specific system data.
00231 
00232 Arguments:
00233 
00234     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
00235 
00236     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
00237 
00238     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
00239 
00240 Return Value:
00241 
00242     None.
00243 
00244 --*/
00245 
00246 {
00247 
00248     PDBGKD_READ_MEMORY64 a = &amp;m-&gt;u.ReadMemory;
00249     ULONG Length;
00250     STRING MessageHeader;
00251     PVOID <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> = AdditionalData-&gt;Buffer;
00252 
00253     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
00254     MessageHeader.Buffer = (PCHAR)m;
00255 
00256     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(AdditionalData-&gt;Length == 0);
00257 
00258     <span class="keywordflow">if</span> (a-&gt;TransferCount &gt; (PACKET_MAX_SIZE - <span class="keyword">sizeof</span>(DBGKD_MANIPULATE_STATE64))) {
00259         Length = PACKET_MAX_SIZE - <span class="keyword">sizeof</span>(DBGKD_MANIPULATE_STATE64);
00260     } <span class="keywordflow">else</span> {
00261         Length = a-&gt;TransferCount;
00262     }
00263 
00264     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(<span class="keyword">sizeof</span>(PVOID) == <span class="keyword">sizeof</span>(ULONG_PTR));
00265 
00266 <span class="comment">//NOTENOTE</span>
00267 <span class="comment">//  This code will in fact only work on a uni-processor as the</span>
00268 <span class="comment">//  m-&gt;Processor field is ignored for now</span>
00269 
00270     <span class="comment">//</span>
00271     <span class="comment">// Case on address to determine what part of Control</span>
00272     <span class="comment">// space is being read</span>
00273     <span class="comment">//</span>
00274 
00275     <span class="keywordflow">switch</span>( (ULONG_PTR)a-&gt;TargetBaseAddress ){
00276 
00277         <span class="comment">//</span>
00278         <span class="comment">// Return the pcr address for the current processor.</span>
00279         <span class="comment">//</span>
00280 
00281     <span class="keywordflow">case</span> DEBUG_CONTROL_SPACE_PCR:
00282 
00283         *(PKPCR *)<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> = <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a7">KdpGetPcr</a>();
00284         AdditionalData-&gt;Length = <span class="keyword">sizeof</span>( PKPCR );
00285         a-&gt;ActualBytesRead = AdditionalData-&gt;Length;
00286         m-&gt;ReturnStatus = STATUS_SUCCESS;
00287         <span class="keywordflow">break</span>;
00288 
00289         <span class="comment">//</span>
00290         <span class="comment">// Return the prcb address for the current processor.</span>
00291         <span class="comment">//</span>
00292 
00293     <span class="keywordflow">case</span> DEBUG_CONTROL_SPACE_PRCB:
00294 
00295         *(PKPRCB *)<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> = <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a12">KdpGetCurrentPrcb</a>();
00296         AdditionalData-&gt;Length = <span class="keyword">sizeof</span>( PKPRCB );
00297         a-&gt;ActualBytesRead = AdditionalData-&gt;Length;
00298         m-&gt;ReturnStatus = STATUS_SUCCESS;
00299         <span class="keywordflow">break</span>;
00300 
00301         <span class="comment">//</span>
00302         <span class="comment">// Return the pointer to the current thread address for the</span>
00303         <span class="comment">// current processor.</span>
00304         <span class="comment">//</span>
00305 
00306     <span class="keywordflow">case</span> DEBUG_CONTROL_SPACE_THREAD:
00307 
00308         *(<a class="code" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a> *)<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> = <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a13">KdpGetCurrentThread</a>();
00309         AdditionalData-&gt;Length = <span class="keyword">sizeof</span>( <a class="code" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a> );
00310         a-&gt;ActualBytesRead = AdditionalData-&gt;Length;
00311         m-&gt;ReturnStatus = STATUS_SUCCESS;
00312         <span class="keywordflow">break</span>;
00313 
00314         <span class="comment">//</span>
00315         <span class="comment">// Return the current Thread Environment Block pointer for the</span>
00316         <span class="comment">// current thread on the current processor.</span>
00317         <span class="comment">//</span>
00318 
00319     <span class="keywordflow">case</span> DEBUG_CONTROL_SPACE_TEB:
00320 
00321         *(PVOID *)<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> = (PVOID)NtCurrentTeb();
00322         AdditionalData-&gt;Length = <span class="keyword">sizeof</span>( <span class="keyword">struct </span>_TEB * );
00323         a-&gt;ActualBytesRead = AdditionalData-&gt;Length;
00324         m-&gt;ReturnStatus = STATUS_SUCCESS;
00325         <span class="keywordflow">break</span>;
00326 
00327         <span class="comment">//</span>
00328         <span class="comment">// Return the dpc active flag for the current processor.</span>
00329         <span class="comment">//</span>
00330 
00331     <span class="keywordflow">case</span> DEBUG_CONTROL_SPACE_DPCACTIVE:
00332 
00333         *(BOOLEAN *)<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> = KeIsExecutingDpc();
00334         AdditionalData-&gt;Length = <span class="keyword">sizeof</span>( ULONG );
00335         a-&gt;ActualBytesRead = AdditionalData-&gt;Length;
00336         m-&gt;ReturnStatus = STATUS_SUCCESS;
00337         <span class="keywordflow">break</span>;
00338 
00339         <span class="comment">//</span>
00340         <span class="comment">// Return the internal processor register state.</span>
00341         <span class="comment">//</span>
00342         <span class="comment">// N.B. - the kernel debugger buffer is expected to be allocated</span>
00343         <span class="comment">//        in the 32-bit superpage</span>
00344         <span class="comment">//</span>
00345         <span class="comment">// N.B. - the size of the internal state cannot exceed the size of</span>
00346         <span class="comment">//        the buffer allocated to the kernel debugger via</span>
00347         <span class="comment">//        KDP_MESSAGE_BUFFER_SIZE</span>
00348         <span class="comment">//</span>
00349 
00350     <span class="keywordflow">case</span> DEBUG_CONTROL_SPACE_IPRSTATE:
00351 
00352         <span class="comment">//</span>
00353         <span class="comment">// Guarantee that Buffer is quadword-aligned, and adjust the</span>
00354         <span class="comment">// size of the available buffer accordingly.</span>
00355         <span class="comment">//</span>
00356 
00357         <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> = (PVOID)( ((ULONG_PTR)<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> + 7) &amp; ~7);
00358 
00359         Length = (ULONG)((ULONG_PTR)&amp;AdditionalData-&gt;Buffer[<a class="code" href="../../d0/d7/kdp_8h.html#a14">KDP_MESSAGE_BUFFER_SIZE</a>] -
00360                  (ULONG_PTR)<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>);
00361 
00362         AdditionalData-&gt;Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d7/d7/4_2axp64_2kdpcpu_8h.html#a8">KdpReadInternalProcessorState</a>(
00363                                              Buffer,
00364                                              Length );
00365 
00366         <span class="comment">//</span>
00367         <span class="comment">// Check the returned size, if greater than the buffer size than</span>
00368         <span class="comment">// we didn't have a sufficient buffer.  If zero then the call</span>
00369         <span class="comment">// failed otherwise.</span>
00370         <span class="comment">//</span>
00371 
00372         <span class="keywordflow">if</span>( (AdditionalData-&gt;Length &gt; <a class="code" href="../../d0/d7/kdp_8h.html#a14">KDP_MESSAGE_BUFFER_SIZE</a>) ||
00373             (AdditionalData-&gt;Length == 0) ){
00374 
00375             AdditionalData-&gt;Length = 0;
00376             m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
00377             a-&gt;ActualBytesRead = 0;
00378 
00379         } <span class="keywordflow">else</span> {
00380 
00381             m-&gt;ReturnStatus = STATUS_SUCCESS;
00382             a-&gt;ActualBytesRead = AdditionalData-&gt;Length;
00383 
00384         }
00385 
00386         <span class="keywordflow">break</span>;
00387 
00388         <span class="comment">//</span>
00389         <span class="comment">// Return the internal processor counter values.</span>
00390         <span class="comment">//</span>
00391         <span class="comment">// N.B. - the kernel debugger buffer is expected to be allocated</span>
00392         <span class="comment">//        in the 32-bit superpage</span>
00393         <span class="comment">//</span>
00394         <span class="comment">// N.B. - the size of the counters structure cannot exceed the size of</span>
00395         <span class="comment">//        the buffer allocated to the kernel debugger via</span>
00396         <span class="comment">//        KDP_MESSAGE_BUFFER_SIZE</span>
00397         <span class="comment">//</span>
00398 
00399     <span class="keywordflow">case</span> DEBUG_CONTROL_SPACE_COUNTERS:
00400 
00401         <span class="comment">//</span>
00402         <span class="comment">// Guarantee that Buffer is quadword-aligned, and adjust the</span>
00403         <span class="comment">// size of the available buffer accordingly.</span>
00404         <span class="comment">//</span>
00405 
00406         <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> = (PVOID)( ((ULONG_PTR)<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> + 7) &amp; ~7);
00407 
00408         Length = (ULONG)((ULONG_PTR)&amp;AdditionalData-&gt;Buffer[<a class="code" href="../../d0/d7/kdp_8h.html#a14">KDP_MESSAGE_BUFFER_SIZE</a>] -
00409                  (ULONG_PTR)<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>);
00410 
00411         AdditionalData-&gt;Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d7/d7/4_2axp64_2kdpcpu_8h.html#a9">KdpReadInternalProcessorCounters</a>(
00412                                              Buffer,
00413                                              Length );
00414 
00415         <span class="comment">//</span>
00416         <span class="comment">// Check the returned size, if greater than the buffer size than</span>
00417         <span class="comment">// we didn't have a sufficient buffer.  If zero then the call</span>
00418         <span class="comment">// failed otherwise.</span>
00419         <span class="comment">//</span>
00420 
00421         <span class="keywordflow">if</span>( (AdditionalData-&gt;Length &gt; <a class="code" href="../../d0/d7/kdp_8h.html#a14">KDP_MESSAGE_BUFFER_SIZE</a>) ||
00422             (AdditionalData-&gt;Length == 0) ){
00423 
00424             AdditionalData-&gt;Length = 0;
00425             m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
00426             a-&gt;ActualBytesRead = 0;
00427 
00428         } <span class="keywordflow">else</span> {
00429 
00430             m-&gt;ReturnStatus = STATUS_SUCCESS;
00431             a-&gt;ActualBytesRead = AdditionalData-&gt;Length;
00432 
00433         }
00434 
00435         <span class="keywordflow">break</span>;
00436 
00437         <span class="comment">//</span>
00438         <span class="comment">// Uninterpreted Special Space</span>
00439         <span class="comment">//</span>
00440 
00441     <span class="keywordflow">default</span>:
00442 
00443         AdditionalData-&gt;Length = 0;
00444         m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
00445         a-&gt;ActualBytesRead = 0;
00446 
00447     }
00448 
00449     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
00450         PACKET_TYPE_KD_STATE_MANIPULATE,
00451         &amp;MessageHeader,
00452         AdditionalData
00453         );
00454 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a134" doxytag="4/kdp.h::KdpReadIoSpace" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpReadIoSpace           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html#l00505">505</a> of file <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html">4/alpha/kdcpuapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d3/d6/hal_8h-source.html#l01170">BusNumber</a>, <a class="el" href="../../d2/d7/hal_8h.html#a184">HalTranslateBusAddress()</a>, <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00050">InterfaceType</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d5/d5/ppc_2debugsup_8c-source.html#l00028">MmDbgReadCheck()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>00513                    :
00514 
00515     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a read io space state
00516     manipulation message.  Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to read system io
00517     locations.
00518 
00519 Arguments:
00520 
00521     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
00522 
00523     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
00524 
00525     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
00526 
00527 Return Value:
00528 
00529     None.
00530 
00531 --*/
00532 
00533 {
00534     PDBGKD_READ_WRITE_IO64 a = &amp;m-&gt;u.ReadWriteIo;
00535     STRING MessageHeader;
00536     INTERFACE_TYPE <a class="code" href="../../d4/d0/cmconfig_8c.html#a5">InterfaceType</a>;
00537     ULONG <a class="code" href="../../d2/d7/hal_8h.html#a75">BusNumber</a>;
00538     PHYSICAL_ADDRESS IoAddress;
00539     PHYSICAL_ADDRESS TranslatedAddress;
00540     ULONG AddressSpace;
00541     ULONG DataSize;
00542 
00543     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
00544     MessageHeader.Buffer = (PCHAR)m;
00545 
00546     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(AdditionalData-&gt;Length == 0);
00547 
00548     m-&gt;ReturnStatus = STATUS_SUCCESS;
00549 
00550     <span class="comment">//</span>
00551     <span class="comment">// Capture the input parameters and use the default values for those</span>
00552     <span class="comment">// parameters not specified in the Api.</span>
00553     <span class="comment">//</span>
00554 
00555     <a class="code" href="../../d4/d0/cmconfig_8c.html#a5">InterfaceType</a> = Isa;
00556     <a class="code" href="../../d2/d7/hal_8h.html#a75">BusNumber</a> = 0;
00557     AddressSpace = 1;
00558     IoAddress.QuadPart = (ULONG_PTR)a-&gt;IoAddress;
00559     DataSize = a-&gt;DataSize;
00560 
00561     <span class="comment">//</span>
00562     <span class="comment">// Zero the return data value.</span>
00563     <span class="comment">//</span>
00564 
00565     a-&gt;DataValue = 0;
00566 
00567     <span class="comment">//</span>
00568     <span class="comment">// Translate the bus address to the physical system address</span>
00569     <span class="comment">// or QVA.</span>
00570     <span class="comment">//</span>
00571 
00572     <span class="keywordflow">if</span>( !<a class="code" href="../../d2/d7/hal_8h.html#a184">HalTranslateBusAddress</a>( InterfaceType,
00573                                  BusNumber,
00574                                  IoAddress,
00575                                  &amp;AddressSpace,
00576                                  &amp;TranslatedAddress ) ){
00577         m-&gt;ReturnStatus = STATUS_INVALID_PARAMETER;
00578         <span class="keywordflow">goto</span> SendReadIoSpaceResponse;
00579     }
00580 
00581     <span class="comment">//</span>
00582     <span class="comment">// N.B. - for the moment we will only support QVAs ie. when AddressSpace</span>
00583     <span class="comment">//        is one.  It may be in later systems that we will have to</span>
00584     <span class="comment">//        check the address space, map it, perform the virtual read</span>
00585     <span class="comment">//        unmap, and then return the data - only we will have to be</span>
00586     <span class="comment">//        careful about what Irql we are to make sure the memory mgmt</span>
00587     <span class="comment">//        stuff will all work</span>
00588     <span class="comment">//</span>
00589 
00590     <span class="keywordflow">if</span>( !AddressSpace ){
00591         m-&gt;ReturnStatus = STATUS_INVALID_PARAMETER;
00592         <span class="keywordflow">goto</span> SendReadIoSpaceResponse;
00593     }
00594 
00595     <span class="comment">//</span>
00596     <span class="comment">// Do the IO space read using the appropriate HAL routines based upon</span>
00597     <span class="comment">// the default address space (io) and the data size requested.</span>
00598     <span class="comment">//</span>
00599 
00600     <span class="keywordflow">switch</span>( DataSize ){
00601 
00602     <span class="keywordflow">case</span> 1:
00603         a-&gt;DataValue = READ_PORT_UCHAR( (PUCHAR)(ULONG_PTR) TranslatedAddress.QuadPart );
00604         <span class="keywordflow">break</span>;
00605 
00606     <span class="keywordflow">case</span> 2:
00607         a-&gt;DataValue = READ_PORT_USHORT( (PUSHORT)(ULONG_PTR) TranslatedAddress.QuadPart );
00608         <span class="keywordflow">break</span>;
00609 
00610     <span class="keywordflow">case</span> 4:
00611         a-&gt;DataValue = READ_PORT_ULONG((PULONG)(ULONG_PTR) TranslatedAddress.QuadPart );
00612         <span class="keywordflow">break</span>;
00613 
00614     <span class="keywordflow">default</span>:
00615         m-&gt;ReturnStatus = STATUS_INVALID_PARAMETER;
00616     }
00617 
00618 
00619 SendReadIoSpaceResponse:
00620 
00621     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
00622         PACKET_TYPE_KD_STATE_MANIPULATE,
00623         &amp;MessageHeader,
00624         NULL
00625         );
00626 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a135" doxytag="4/kdp.h::KdpReadMachineSpecificRegister" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpReadMachineSpecificRegister           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/4_2i386_2kdcpuapi_8c-source.html#l01098">1098</a> of file <a class="el" href="../../d7/d4/4_2i386_2kdcpuapi_8c-source.html">4/i386/kdcpuapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d3/i386_8h.html#a52">RDMSR()</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>01106                    :
01107 
01108     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a read MSR
01109     manipulation message.  Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to read <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> MSR.
01110 
01111 Arguments:
01112 
01113     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
01114 
01115     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
01116 
01117     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
01118 
01119 Return Value:
01120 
01121     None.
01122 
01123 --*/
01124 
01125 {
01126     PDBGKD_READ_WRITE_MSR a = &amp;m-&gt;u.ReadWriteMsr;
01127     STRING MessageHeader;
01128     LARGE_INTEGER l;
01129 
01130     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
01131     MessageHeader.Buffer = (PCHAR)m;
01132 
01133     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(AdditionalData-&gt;Length == 0);
01134 
01135     m-&gt;ReturnStatus = STATUS_SUCCESS;
01136 
01137     <span class="keywordflow">try</span> {
01138         l.QuadPart = <a class="code" href="../../d5/d3/i386_8h.html#a52">RDMSR</a>(a-&gt;Msr);
01139     } except (EXCEPTION_EXECUTE_HANDLER) {
01140         l.QuadPart = 0;
01141         m-&gt;ReturnStatus = STATUS_NO_SUCH_DEVICE;
01142     }
01143 
01144     a-&gt;DataValueLow  = l.LowPart;
01145     a-&gt;DataValueHigh = l.HighPart;
01146 
01147     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
01148         PACKET_TYPE_KD_STATE_MANIPULATE,
01149         &amp;MessageHeader,
01150         NULL
01151         );
01152     UNREFERENCED_PARAMETER(Context);
01153 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a125" doxytag="4/kdp.h::KdpReadPhysicalMemory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpReadPhysicalMemory           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l02643">2643</a> of file <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html">4/kdapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d3/d0/mm_8h-source.html#l00166">BYTE_OFFSET</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d3/d5/ia64_2debugsup_8c-source.html#l00236">MmDbgTranslatePhysicalAddress64()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00599">PAGE_SIZE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>02651                    :
02652 
02653     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response to a read physical memory
02654     state manipulation message. Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to read physical memory
02655     and <span class="keywordflow">return</span>.
02656 
02657 Arguments:
02658 
02659     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
02660 
02661     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
02662 
02663     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
02664 
02665 Return Value:
02666 
02667     None.
02668 
02669 --*/
02670 
02671 {
02672     PDBGKD_READ_MEMORY64 a = &amp;m-&gt;u.ReadMemory;
02673     ULONG Length;
02674     STRING MessageHeader;
02675     PVOID64 VirtualAddress;
02676     PHYSICAL_ADDRESS Source;
02677     UCHAR UNALIGNED *Destination;
02678     ULONG NumberBytes;
02679     ULONG BytesLeft;
02680 
02681     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
02682     MessageHeader.Buffer = (PCHAR)m;
02683 
02684     <span class="comment">//</span>
02685     <span class="comment">// make sure that nothing but a read memory message was transmitted</span>
02686     <span class="comment">//</span>
02687 
02688     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(AdditionalData-&gt;Length == 0);
02689 
02690     <span class="comment">//</span>
02691     <span class="comment">// Trim transfer count to fit in a single message</span>
02692     <span class="comment">//</span>
02693 
02694     <span class="keywordflow">if</span> (a-&gt;TransferCount &gt; (PACKET_MAX_SIZE - <span class="keyword">sizeof</span>(DBGKD_MANIPULATE_STATE64))) {
02695         Length = PACKET_MAX_SIZE - <span class="keyword">sizeof</span>(DBGKD_MANIPULATE_STATE64);
02696     } <span class="keywordflow">else</span> {
02697         Length = a-&gt;TransferCount;
02698     }
02699 
02700     <span class="comment">//</span>
02701     <span class="comment">// Since the MmDbgTranslatePhysicalAddress64 only maps in one physical</span>
02702     <span class="comment">// page at a time (on non-alpha systems),</span>
02703     <span class="comment">// we need to break the memory move up into smaller</span>
02704     <span class="comment">// moves which don't cross page boundaries.  It is important that we</span>
02705     <span class="comment">// access physical memory on naturally-aligned boundaries and with the</span>
02706     <span class="comment">// largest size possible.  (We could be accessing memory-mapped I/O</span>
02707     <span class="comment">// space).  These rules allow kdexts to read physical memory reliably.</span>
02708     <span class="comment">//</span>
02709 
02710     Source.QuadPart = a-&gt;TargetBaseAddress;
02711     Destination = AdditionalData-&gt;Buffer;
02712     <span class="keywordflow">while</span> (Length &gt; 0) {
02713         VirtualAddress = <a class="code" href="../../d2/d6/ia64_2debugsup_8c.html#a3">MmDbgTranslatePhysicalAddress64</a>(Source);
02714         <span class="keywordflow">if</span> (VirtualAddress == NULL64) {
02715             <span class="keywordflow">break</span>;
02716         }
02717         NumberBytes = <a class="code" href="../../d6/d7/halmips_8h.html#a446">PAGE_SIZE</a> - <a class="code" href="../../d2/d1/mm_8h.html#a6">BYTE_OFFSET</a>(Source.LowPart);
02718         <span class="keywordflow">if</span> (NumberBytes &gt; Length) {
02719             NumberBytes = Length;
02720         }
02721 
02722 <span class="preprocessor">#ifdef _ALPHA_</span>
02723 <span class="preprocessor"></span>        BytesLeft = NumberBytes;
02724         <span class="keywordflow">while</span> (BytesLeft &gt; 0) {
02725             __MB();
02726 
02727             <span class="keywordflow">if</span> (((ULONG64)VirtualAddress &amp; 7) == 0 &amp;&amp; BytesLeft &gt; 7) {
02728                 *((ULONGLONG UNALIGNED *)Destination)++ =
02729                     *((ULONGLONG * POINTER_64)VirtualAddress)++;
02730                 BytesLeft -= 8;
02731             } <span class="keywordflow">else</span> {
02732                 <span class="keywordflow">if</span> (((ULONG64)VirtualAddress &amp; 3) == 0 &amp;&amp; BytesLeft &gt; 3) {
02733                     *((ULONG UNALIGNED *)Destination)++ =
02734                         *((ULONG * POINTER_64)VirtualAddress)++;
02735                     BytesLeft -= 4;
02736                 } <span class="keywordflow">else</span> {
02737                     <span class="keywordflow">if</span> (((ULONG64)VirtualAddress &amp; 1) == 0 &amp;&amp; BytesLeft &gt; 1) {
02738                         *((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> UNALIGNED *)Destination)++ =
02739                             *((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> * POINTER_64)VirtualAddress)++;
02740                         BytesLeft -= 2;
02741                     } <span class="keywordflow">else</span> {
02742                         *Destination++ =
02743                             *((UCHAR * POINTER_64)VirtualAddress)++;
02744                         BytesLeft -= 1;
02745                     }
02746                 }
02747             }
02748         }
02749 <span class="preprocessor">#else</span>
02750 <span class="preprocessor"></span>        <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(Destination, VirtualAddress, NumberBytes);
02751         Destination += NumberBytes;
02752 
02753 <span class="preprocessor">#endif</span>
02754 <span class="preprocessor"></span>        Source.QuadPart += NumberBytes;
02755         Length -= NumberBytes;
02756         AdditionalData-&gt;Length += (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)NumberBytes;
02757     }
02758 
02759     <span class="keywordflow">if</span> (Length == 0) {
02760         m-&gt;ReturnStatus = STATUS_SUCCESS;
02761     } <span class="keywordflow">else</span> {
02762         m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
02763     }
02764 
02765     a-&gt;ActualBytesRead = AdditionalData-&gt;Length;
02766 
02767     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
02768                   PACKET_TYPE_KD_STATE_MANIPULATE,
02769                   &amp;MessageHeader,
02770                   AdditionalData
02771                   );
02772     UNREFERENCED_PARAMETER(Context);
02773 
02774 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a123" doxytag="4/kdp.h::KdpReadVirtualMemory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpReadVirtualMemory           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l01126">1126</a> of file <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html">4/kdapi.c</a>.
<p>
References <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d5/d5/ppc_2debugsup_8c-source.html#l00028">MmDbgReadCheck()</a>, <a class="el" href="../../d5/d5/ppc_2debugsup_8c-source.html#l00156">MmDbgReadCheck64()</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>01134                    :
01135 
01136     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response to a read <span class="keyword">virtual</span> memory 32-bit
01137     state manipulation message. Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to read <span class="keyword">virtual</span> memory
01138     and <span class="keywordflow">return</span>.
01139 
01140 Arguments:
01141 
01142     m - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
01143 
01144     AdditionalData - Supplies a pointer to a descriptor <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data to read.
01145 
01146     Context - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
01147 
01148 Return Value:
01149 
01150     None.
01151 
01152 --*/
01153 
01154 {
01155     ULONG Length;
01156     STRING MessageHeader;
01157 <span class="preprocessor">#if defined(_ALPHA_) &amp;&amp; !defined(_AXP64_)</span>
01158 <span class="preprocessor"></span>    UCHAR * POINTER_64 Address;
01159     PUCHAR Destination;
01160     UCHAR * POINTER_64 Source;
01161     PUCHAR Source32;
01162 <span class="preprocessor">#endif</span>
01163 <span class="preprocessor"></span>
01164     <span class="comment">//</span>
01165     <span class="comment">// Trim the transfer count to fit in a single message.</span>
01166     <span class="comment">//</span>
01167 
01168     Length = m-&gt;u.ReadMemory.TransferCount;
01169     <span class="keywordflow">if</span> (Length &gt; (PACKET_MAX_SIZE - <span class="keyword">sizeof</span>(DBGKD_MANIPULATE_STATE64))) {
01170         Length = PACKET_MAX_SIZE - <span class="keyword">sizeof</span>(DBGKD_MANIPULATE_STATE64);
01171     }
01172 
01173     <span class="comment">//</span>
01174     <span class="comment">// Move the data to the destination buffer.</span>
01175     <span class="comment">//</span>
01176 
01177 <span class="preprocessor">#if defined(_ALPHA_) &amp;&amp; !defined(_AXP64_)</span>
01178 <span class="preprocessor"></span>
01179     AdditionalData-&gt;Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)Length;
01180 
01181     Destination = AdditionalData-&gt;Buffer;
01182     Source = (UCHAR * POINTER_64)m-&gt;u.ReadMemory.TargetBaseAddress;
01183     Source32 = (PUCHAR)m-&gt;u.ReadMemory.TargetBaseAddress;
01184     <span class="keywordflow">while</span> (Length &gt; 0) {
01185         <span class="keywordflow">if</span> ((LONGLONG)Source != (LONGLONG)((LONG)Source)) {
01186             <span class="keywordflow">if</span> ((Address = <a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a2">MmDbgReadCheck64</a>(Source)) == NULL64) {
01187                 <span class="keywordflow">break</span>;
01188             }
01189         } <span class="keywordflow">else</span> {
01190             <span class="keywordflow">if</span> ((Address = <a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a0">MmDbgReadCheck</a>(Source32)) == NULL64) {
01191                 <span class="keywordflow">break</span>;
01192             }
01193         }
01194 
01195         *Destination++ = *Address;
01196         Source   += 1;
01197         Source32 += 1;
01198         Length -= 1;
01199     }
01200 
01201     <span class="comment">//</span>
01202     <span class="comment">// If all the data is read, then return a success status. Otherwise,</span>
01203     <span class="comment">// return an unsuccessful status.</span>
01204     <span class="comment">//</span>
01205 
01206     m-&gt;ReturnStatus = STATUS_SUCCESS;
01207     <span class="keywordflow">if</span> (Length != 0) {
01208         m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
01209     }
01210 
01211     <span class="comment">//</span>
01212     <span class="comment">// Set the actual number of bytes read, initialize the message header,</span>
01213     <span class="comment">// and send the reply packet to the host debugger.</span>
01214     <span class="comment">//</span>
01215 
01216     m-&gt;u.ReadMemory.ActualBytesRead = AdditionalData-&gt;Length - Length;
01217 <span class="preprocessor">#else</span>
01218 <span class="preprocessor"></span>    AdditionalData-&gt;Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(AdditionalData-&gt;Buffer,
01219                                                    (PVOID)m-&gt;u.ReadMemory.TargetBaseAddress,
01220                                                    Length);
01221 
01222     <span class="comment">//</span>
01223     <span class="comment">// If all the data is read, then return a success status. Otherwise,</span>
01224     <span class="comment">// return an unsuccessful status.</span>
01225     <span class="comment">//</span>
01226 
01227     m-&gt;ReturnStatus = STATUS_SUCCESS;
01228     <span class="keywordflow">if</span> (Length != AdditionalData-&gt;Length) {
01229         m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
01230     }
01231 
01232     <span class="comment">//</span>
01233     <span class="comment">// Set the actual number of bytes read, initialize the message header,</span>
01234     <span class="comment">// and send the reply packet to the host debugger.</span>
01235     <span class="comment">//</span>
01236 
01237     m-&gt;u.ReadMemory.ActualBytesRead = AdditionalData-&gt;Length;
01238 <span class="preprocessor">#endif</span>
01239 <span class="preprocessor"></span>
01240     MessageHeader.Length = <span class="keyword">sizeof</span>(DBGKD_MANIPULATE_STATE64);
01241     MessageHeader.Buffer = (PCHAR)m;
01242     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(PACKET_TYPE_KD_STATE_MANIPULATE,
01243                   &amp;MessageHeader,
01244                   AdditionalData);
01245 
01246     <span class="keywordflow">return</span>;
01247 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a101" doxytag="4/kdp.h::KdpReboot" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpReboot           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d7/alpha_2kdreboot_8c-source.html#l00025">25</a> of file <a class="el" href="../../d1/d7/alpha_2kdreboot_8c-source.html">alpha/kdreboot.c</a>.
<p>
References <a class="el" href="../../d4/d9/ke_8h.html#a411a244">HalRebootRoutine</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a177">HalReturnToFirmware()</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>00031                    :
00032 
00033     Reboot <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> system via <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Hal.
00034 
00035 --*/
00036 
00037 {
00038 
00039     <a class="code" href="../../d2/d7/hal_8h.html#a177">HalReturnToFirmware</a>(HalRebootRoutine);
00040 }
}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a112" doxytag="4/kdp.h::KdpReceivePacket" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG KdpReceivePacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ExpectedPacketType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>MessageHeader</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>MessageData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>DataLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00342">342</a> of file <a class="el" href="../../d0/d4/kdcomio_8c-source.html">kdcomio.c</a>.
<p>
References <a class="el" href="../../d8/d2/kd_8h-source.html#l00032">CP_GET_ERROR</a>, <a class="el" href="../../d8/d2/kd_8h-source.html#l00031">CP_GET_NODATA</a>, <a class="el" href="../../d8/d2/kd_8h-source.html#l00030">CP_GET_SUCCESS</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00062">KDP_PACKET_RECEIVED</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00064">KDP_PACKET_RESEND</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00063">KDP_PACKET_TIMEOUT</a>, <a class="el" href="../../d0/d5/4_2kdcomio_8c.html#a0">KdpComputeChecksum()</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00264">KdpNextPacketIdToSend</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00258">KdpNumberRetries</a>, <a class="el" href="../../d2/d7/hal_8h.html#a200">KdPortGetByte()</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00265">KdpPacketIdExpected</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00095">KdpReceivePacketLeader()</a>, <a class="el" href="../../d0/d5/4_2kdcomio_8c.html#a1">KdpReceiveString()</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00257">KdpRetryCount</a>, <a class="el" href="../../d0/d5/4_2kdcomio_8c.html#a3">KdpSendControlPacket()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/kddbgio_8c-source.html#l00110">KdpPromptString()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, and <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>00351                    :
00352 
00353     This routine receives a packet from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> host machine that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> running
00354     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> kernel debugger <a class="code" href="../../d1/d9/icmui_8def.html#a6">UI</a>.  This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> ALWAYS called after packet being
00355     sent by caller.  It first waits <span class="keywordflow">for</span> ACK packet <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> packet sent and
00356     then waits <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> packet desired.
00357 
00358     N.B. If caller <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> KdPrintString, <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> parameter PacketType <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
00359        PACKET_TYPE_KD_ACKNOWLEDGE.  In <span class="keyword">this</span> <span class="keywordflow">case</span>, <span class="keyword">this</span> routine will <span class="keywordflow">return</span>
00360        right after <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ack packet <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> received.
00361 
00362 Arguments:
00363 
00364     PacketType - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> of packet that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> excepted.
00365 
00366     MessageHeader - Supplies a pointer to a string descriptor <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input
00367         message.
00368 
00369     MessageData - Supplies a pointer to a string descriptor <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input data.
00370 
00371     DataLength - Supplies pointer to ULONG to receive length of recv. data.
00372 
00373 Return Value:
00374 
00375     <a class="code" href="../../d0/d7/kdp_8h.html#a11">KDP_PACKET_RESEND</a> - <span class="keywordflow">if</span> resend <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> required.
00376     KDP_PAKCET_TIMEOUT - <span class="keywordflow">if</span> timeout.
00377     <a class="code" href="../../d0/d7/kdp_8h.html#a9">KDP_PACKET_RECEIVED</a> - <span class="keywordflow">if</span> packet received.
00378 
00379 --*/
00380 
00381 {
00382 
00383     UCHAR Input;
00384     ULONG MessageLength;
00385     KD_PACKET PacketHeader;
00386     ULONG ReturnCode;
00387     ULONG Checksum;
00388 
00389 WaitForPacketLeader:
00390 
00391     <span class="comment">//</span>
00392     <span class="comment">// Read Packet Leader</span>
00393     <span class="comment">//</span>
00394 
00395     ReturnCode = <a class="code" href="../../d1/d7/4_2kdp_8h.html#a148">KdpReceivePacketLeader</a>(PacketType, &amp;PacketHeader.PacketLeader);
00396 
00397     <span class="comment">//</span>
00398     <span class="comment">// If we can successfully read packet leader, it has high possibility that</span>
00399     <span class="comment">// kernel debugger is alive.  So reset count.</span>
00400     <span class="comment">//</span>
00401 
00402     <span class="keywordflow">if</span> (ReturnCode != <a class="code" href="../../d0/d7/kdp_8h.html#a10">KDP_PACKET_TIMEOUT</a>) {
00403         <a class="code" href="../../d8/d5/kddata_8c.html#a88">KdpNumberRetries</a> = <a class="code" href="../../d8/d5/kddata_8c.html#a87">KdpRetryCount</a>;
00404     }
00405     <span class="keywordflow">if</span> (ReturnCode != <a class="code" href="../../d0/d7/kdp_8h.html#a9">KDP_PACKET_RECEIVED</a>) {
00406         <span class="keywordflow">return</span> ReturnCode;
00407     }
00408 
00409     <span class="comment">//</span>
00410     <span class="comment">// Read packet type.</span>
00411     <span class="comment">//</span>
00412 
00413     ReturnCode = <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a1">KdpReceiveString</a>((PCHAR)&amp;PacketHeader.PacketType,
00414                                   <span class="keyword">sizeof</span>(PacketHeader.PacketType));
00415     <span class="keywordflow">if</span> (ReturnCode == <a class="code" href="../../d7/d3/kd_8h.html#a1">CP_GET_NODATA</a>) {
00416         <span class="keywordflow">return</span> <a class="code" href="../../d0/d7/kdp_8h.html#a10">KDP_PACKET_TIMEOUT</a>;
00417     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ReturnCode == <a class="code" href="../../d7/d3/kd_8h.html#a2">CP_GET_ERROR</a>) {
00418         <span class="keywordflow">if</span> (PacketHeader.PacketLeader == CONTROL_PACKET_LEADER) {
00419 
00420             <span class="comment">//</span>
00421             <span class="comment">// If read error and it is for a control packet, simply</span>
00422             <span class="comment">// preptend that we have not seen this packet.  Hopefully</span>
00423             <span class="comment">// we will receive the packet we desire which automatically acks</span>
00424             <span class="comment">// the packet we just sent.</span>
00425             <span class="comment">//</span>
00426 
00427             <span class="keywordflow">goto</span> WaitForPacketLeader;
00428         } <span class="keywordflow">else</span> {
00429 
00430             <span class="comment">//</span>
00431             <span class="comment">// if read error while reading data packet, we have to ask</span>
00432             <span class="comment">// kernel debugger to resend us the packet.</span>
00433             <span class="comment">//</span>
00434 
00435             <span class="keywordflow">goto</span> SendResendPacket;
00436         }
00437     }
00438 
00439     <span class="comment">//</span>
00440     <span class="comment">// if the packet we received is a resend request, we return true and</span>
00441     <span class="comment">// let caller resend the packet.</span>
00442     <span class="comment">//</span>
00443 
00444     <span class="keywordflow">if</span> ( PacketHeader.PacketLeader == CONTROL_PACKET_LEADER &amp;&amp;
00445          PacketHeader.PacketType == PACKET_TYPE_KD_RESEND ) {
00446         <span class="keywordflow">return</span> <a class="code" href="../../d0/d7/kdp_8h.html#a11">KDP_PACKET_RESEND</a>;
00447     }
00448 
00449     <span class="comment">//</span>
00450     <span class="comment">// Read data length.</span>
00451     <span class="comment">//</span>
00452 
00453     ReturnCode = <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a1">KdpReceiveString</a>((PCHAR)&amp;PacketHeader.ByteCount,
00454                                   <span class="keyword">sizeof</span>(PacketHeader.ByteCount));
00455     <span class="keywordflow">if</span> (ReturnCode == <a class="code" href="../../d7/d3/kd_8h.html#a1">CP_GET_NODATA</a>) {
00456         <span class="keywordflow">return</span> <a class="code" href="../../d0/d7/kdp_8h.html#a10">KDP_PACKET_TIMEOUT</a>;
00457     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ReturnCode == <a class="code" href="../../d7/d3/kd_8h.html#a2">CP_GET_ERROR</a>) {
00458         <span class="keywordflow">if</span> (PacketHeader.PacketLeader == CONTROL_PACKET_LEADER) {
00459             <span class="keywordflow">goto</span> WaitForPacketLeader;
00460         } <span class="keywordflow">else</span> {
00461             <span class="keywordflow">goto</span> SendResendPacket;
00462         }
00463     }
00464 
00465     <span class="comment">//</span>
00466     <span class="comment">// Read Packet Id.</span>
00467     <span class="comment">//</span>
00468 
00469     ReturnCode = <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a1">KdpReceiveString</a>((PCHAR)&amp;PacketHeader.PacketId,
00470                                   <span class="keyword">sizeof</span>(PacketHeader.PacketId));
00471 
00472     <span class="keywordflow">if</span> (ReturnCode == <a class="code" href="../../d7/d3/kd_8h.html#a1">CP_GET_NODATA</a>) {
00473         <span class="keywordflow">return</span> <a class="code" href="../../d0/d7/kdp_8h.html#a10">KDP_PACKET_TIMEOUT</a>;
00474     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ReturnCode == <a class="code" href="../../d7/d3/kd_8h.html#a2">CP_GET_ERROR</a>) {
00475         <span class="keywordflow">if</span> (PacketHeader.PacketLeader == CONTROL_PACKET_LEADER) {
00476             <span class="keywordflow">goto</span> WaitForPacketLeader;
00477         } <span class="keywordflow">else</span> {
00478             <span class="keywordflow">goto</span> SendResendPacket;
00479         }
00480     }
00481 
00482     <span class="comment">//</span>
00483     <span class="comment">// Read packet checksum.</span>
00484     <span class="comment">//</span>
00485 
00486     ReturnCode = <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a1">KdpReceiveString</a>((PCHAR)&amp;PacketHeader.Checksum,
00487                                   <span class="keyword">sizeof</span>(PacketHeader.Checksum));
00488     <span class="keywordflow">if</span> (ReturnCode == <a class="code" href="../../d7/d3/kd_8h.html#a1">CP_GET_NODATA</a>) {
00489         <span class="keywordflow">return</span> <a class="code" href="../../d0/d7/kdp_8h.html#a10">KDP_PACKET_TIMEOUT</a>;
00490     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ReturnCode == <a class="code" href="../../d7/d3/kd_8h.html#a2">CP_GET_ERROR</a>) {
00491         <span class="keywordflow">if</span> (PacketHeader.PacketLeader == CONTROL_PACKET_LEADER) {
00492             <span class="keywordflow">goto</span> WaitForPacketLeader;
00493         } <span class="keywordflow">else</span> {
00494             <span class="keywordflow">goto</span> SendResendPacket;
00495         }
00496     }
00497 
00498     <span class="comment">//</span>
00499     <span class="comment">// A complete packet header is received.  Check its validity and</span>
00500     <span class="comment">// perform appropriate action depending on packet type.</span>
00501     <span class="comment">//</span>
00502 
00503     <span class="keywordflow">if</span> (PacketHeader.PacketLeader == CONTROL_PACKET_LEADER ) {
00504         <span class="keywordflow">if</span> (PacketHeader.PacketType == PACKET_TYPE_KD_ACKNOWLEDGE ) {
00505 
00506             <span class="comment">//</span>
00507             <span class="comment">// If we received an expected ACK packet and we are not</span>
00508             <span class="comment">// waiting for any new packet, update outgoing packet id</span>
00509             <span class="comment">// and return.  If we are NOT waiting for ACK packet</span>
00510             <span class="comment">// we will keep on waiting.  If the ACK packet</span>
00511             <span class="comment">// is not for the packet we send, ignore it and keep on waiting.</span>
00512             <span class="comment">//</span>
00513 
00514             <span class="keywordflow">if</span> (PacketHeader.PacketId !=
00515                 (<a class="code" href="../../d8/d5/kddata_8c.html#a92">KdpNextPacketIdToSend</a> &amp; ~SYNC_PACKET_ID))  {
00516                 <span class="keywordflow">goto</span> WaitForPacketLeader;
00517             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PacketType == PACKET_TYPE_KD_ACKNOWLEDGE) {
00518                 <a class="code" href="../../d8/d5/kddata_8c.html#a92">KdpNextPacketIdToSend</a> ^= 1;
00519                 <span class="keywordflow">return</span> <a class="code" href="../../d0/d7/kdp_8h.html#a9">KDP_PACKET_RECEIVED</a>;
00520             } <span class="keywordflow">else</span> {
00521                 <span class="keywordflow">goto</span> WaitForPacketLeader;
00522             }
00523         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PacketHeader.PacketType == PACKET_TYPE_KD_RESET) {
00524 
00525             <span class="comment">//</span>
00526             <span class="comment">// if we received Reset packet, reset the packet control variables</span>
00527             <span class="comment">// and resend earlier packet.</span>
00528             <span class="comment">//</span>
00529 
00530             <a class="code" href="../../d8/d5/kddata_8c.html#a92">KdpNextPacketIdToSend</a> = INITIAL_PACKET_ID;
00531             <a class="code" href="../../d8/d5/kddata_8c.html#a93">KdpPacketIdExpected</a> = INITIAL_PACKET_ID;
00532             <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a3">KdpSendControlPacket</a>(PACKET_TYPE_KD_RESET, 0L);
00533             <span class="keywordflow">return</span> <a class="code" href="../../d0/d7/kdp_8h.html#a11">KDP_PACKET_RESEND</a>;
00534         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PacketHeader.PacketType == PACKET_TYPE_KD_RESEND) {
00535             <span class="keywordflow">return</span> <a class="code" href="../../d0/d7/kdp_8h.html#a11">KDP_PACKET_RESEND</a>;
00536         } <span class="keywordflow">else</span> {
00537 
00538             <span class="comment">//</span>
00539             <span class="comment">// Invalid packet header, ignore it.</span>
00540             <span class="comment">//</span>
00541 
00542             <span class="keywordflow">goto</span> WaitForPacketLeader;
00543         }
00544 
00545     <span class="comment">//</span>
00546     <span class="comment">// The packet header is for data packet (not control packet).</span>
00547     <span class="comment">//</span>
00548 
00549     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PacketType == PACKET_TYPE_KD_ACKNOWLEDGE) {
00550 
00551         <span class="comment">//</span>
00552         <span class="comment">// if we are waiting for ACK packet ONLY</span>
00553         <span class="comment">// and we receive a data packet header, check if the packet id</span>
00554         <span class="comment">// is what we expected.  If yes, assume the acknowledge is lost (but</span>
00555         <span class="comment">// sent), ask sender to resend and return with PACKET_RECEIVED.</span>
00556         <span class="comment">//</span>
00557 
00558         <span class="keywordflow">if</span> (PacketHeader.PacketId == <a class="code" href="../../d8/d5/kddata_8c.html#a93">KdpPacketIdExpected</a>) {
00559             <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a3">KdpSendControlPacket</a>(PACKET_TYPE_KD_RESEND, 0L);
00560             <a class="code" href="../../d8/d5/kddata_8c.html#a92">KdpNextPacketIdToSend</a> ^= 1;
00561             <span class="keywordflow">return</span> <a class="code" href="../../d0/d7/kdp_8h.html#a9">KDP_PACKET_RECEIVED</a>;
00562         } <span class="keywordflow">else</span> {
00563             <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a3">KdpSendControlPacket</a>(PACKET_TYPE_KD_ACKNOWLEDGE,
00564                                  PacketHeader.PacketId
00565                                  );
00566             <span class="keywordflow">goto</span> WaitForPacketLeader;
00567         }
00568     }
00569 
00570     <span class="comment">//</span>
00571     <span class="comment">// we are waiting for data packet and we received the packet header</span>
00572     <span class="comment">// for data packet. Perform the following checkings to make sure</span>
00573     <span class="comment">// it is the packet we are waiting for.</span>
00574     <span class="comment">//</span>
00575 
00576     <span class="comment">//</span>
00577     <span class="comment">// Check ByteCount received is valid</span>
00578     <span class="comment">//</span>
00579 
00580     MessageLength = MessageHeader-&gt;MaximumLength;
00581     <span class="keywordflow">if</span> ((PacketHeader.ByteCount &gt; (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)PACKET_MAX_SIZE) ||
00582         (PacketHeader.ByteCount &lt; (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)MessageLength)) {
00583         <span class="keywordflow">goto</span> SendResendPacket;
00584     }
00585     *DataLength = PacketHeader.ByteCount - MessageLength;
00586 
00587     <span class="comment">//</span>
00588     <span class="comment">// Read the message header.</span>
00589     <span class="comment">//</span>
00590 
00591     ReturnCode = <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a1">KdpReceiveString</a>(MessageHeader-&gt;Buffer, MessageLength);
00592     <span class="keywordflow">if</span> (ReturnCode != <a class="code" href="../../d7/d3/kd_8h.html#a0">CP_GET_SUCCESS</a>) {
00593         <span class="keywordflow">goto</span> SendResendPacket;
00594     }
00595     MessageHeader-&gt;Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)MessageLength;
00596 
00597     <span class="comment">//</span>
00598     <span class="comment">// Read the message data.</span>
00599     <span class="comment">//</span>
00600 
00601     ReturnCode = <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a1">KdpReceiveString</a>(MessageData-&gt;Buffer, *DataLength);
00602     <span class="keywordflow">if</span> (ReturnCode != <a class="code" href="../../d7/d3/kd_8h.html#a0">CP_GET_SUCCESS</a>) {
00603         <span class="keywordflow">goto</span> SendResendPacket;
00604     }
00605     MessageData-&gt;Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)*DataLength;
00606 
00607     <span class="comment">//</span>
00608     <span class="comment">// Read packet trailing byte</span>
00609     <span class="comment">//</span>
00610 
00611     ReturnCode = <a class="code" href="../../d2/d7/hal_8h.html#a200">KdPortGetByte</a>(&amp;Input);
00612     <span class="keywordflow">if</span> (ReturnCode != <a class="code" href="../../d7/d3/kd_8h.html#a0">CP_GET_SUCCESS</a> || Input != PACKET_TRAILING_BYTE) {
00613         <span class="keywordflow">goto</span> SendResendPacket;
00614     }
00615 
00616     <span class="comment">//</span>
00617     <span class="comment">// Check PacketType is what we are waiting for.</span>
00618     <span class="comment">//</span>
00619 
00620     <span class="keywordflow">if</span> (PacketType != PacketHeader.PacketType) {
00621         <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a3">KdpSendControlPacket</a>(PACKET_TYPE_KD_ACKNOWLEDGE,
00622                              PacketHeader.PacketId
00623                              );
00624         <span class="keywordflow">goto</span> WaitForPacketLeader;
00625     }
00626 
00627     <span class="comment">//</span>
00628     <span class="comment">// Check PacketId is valid.</span>
00629     <span class="comment">//</span>
00630 
00631     <span class="keywordflow">if</span> (PacketHeader.PacketId == INITIAL_PACKET_ID ||
00632         PacketHeader.PacketId == (INITIAL_PACKET_ID ^ 1)) {
00633         <span class="keywordflow">if</span> (PacketHeader.PacketId != <a class="code" href="../../d8/d5/kddata_8c.html#a93">KdpPacketIdExpected</a>) {
00634             <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a3">KdpSendControlPacket</a>(PACKET_TYPE_KD_ACKNOWLEDGE,
00635                                  PacketHeader.PacketId
00636                                  );
00637             <span class="keywordflow">goto</span> WaitForPacketLeader;
00638         }
00639     } <span class="keywordflow">else</span> {
00640         <span class="keywordflow">goto</span> SendResendPacket;
00641     }
00642 
00643     <span class="comment">//</span>
00644     <span class="comment">// Check checksum is valid.</span>
00645     <span class="comment">//</span>
00646 
00647     Checksum = <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a0">KdpComputeChecksum</a>(
00648                             MessageHeader-&gt;Buffer,
00649                             MessageHeader-&gt;Length
00650                             );
00651 
00652     Checksum += <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a0">KdpComputeChecksum</a>(
00653                             MessageData-&gt;Buffer,
00654                             MessageData-&gt;Length
00655                             );
00656     <span class="keywordflow">if</span> (Checksum != PacketHeader.Checksum) {
00657         <span class="keywordflow">goto</span> SendResendPacket;
00658     }
00659 
00660     <span class="comment">//</span>
00661     <span class="comment">// Send Acknowledge byte and the Id of the packet received.</span>
00662     <span class="comment">// Then, update the ExpectId for next incoming packet.</span>
00663     <span class="comment">//</span>
00664 
00665     <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a3">KdpSendControlPacket</a>(PACKET_TYPE_KD_ACKNOWLEDGE,
00666                          PacketHeader.PacketId
00667                          );
00668 
00669     <span class="comment">//</span>
00670     <span class="comment">// We have successfully received the packet so update the</span>
00671     <span class="comment">// packet control variables and return sucess.</span>
00672     <span class="comment">//</span>
00673 
00674     <a class="code" href="../../d8/d5/kddata_8c.html#a93">KdpPacketIdExpected</a> ^= 1;
00675     <span class="keywordflow">return</span> <a class="code" href="../../d0/d7/kdp_8h.html#a9">KDP_PACKET_RECEIVED</a>;
00676 
00677 SendResendPacket:
00678     <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a3">KdpSendControlPacket</a>(PACKET_TYPE_KD_RESEND, 0L);
00679     <span class="keywordflow">goto</span> WaitForPacketLeader;
00680 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a148" doxytag="4/kdp.h::KdpReceivePacketLeader" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> KdpReceivePacketLeader           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>PacketType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>PacketLeader</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00095">95</a> of file <a class="el" href="../../d0/d4/kdcomio_8c-source.html">kdcomio.c</a>.
<p>
References <a class="el" href="../../d8/d2/kd_8h-source.html#l00032">CP_GET_ERROR</a>, <a class="el" href="../../d8/d2/kd_8h-source.html#l00031">CP_GET_NODATA</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d8/d2/kd_8h-source.html#l00133">KdDebuggerNotPresent</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00062">KDP_PACKET_RECEIVED</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00064">KDP_PACKET_RESEND</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00063">KDP_PACKET_TIMEOUT</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00260">KdpControlCPending</a>, <a class="el" href="../../d2/d7/hal_8h.html#a200">KdPortGetByte()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00342">KdpReceivePacket()</a>.
<p>
<pre class="fragment"><div>00102                    :
00103 
00104     This routine waits <span class="keywordflow">for</span> a packet header leader.
00105 
00106 Arguments:
00107 
00108     PacketType - supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> of packet we are expecting.
00109 
00110     PacketLeader - supplies a pointer to a ulong variable to receive
00111                    packet leader bytes.
00112 
00113 Return Value:
00114 
00115     <a class="code" href="../../d0/d7/kdp_8h.html#a11">KDP_PACKET_RESEND</a> - <span class="keywordflow">if</span> resend <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> required.
00116     KDP_PAKCET_TIMEOUT - <span class="keywordflow">if</span> timeout.
00117     <a class="code" href="../../d0/d7/kdp_8h.html#a9">KDP_PACKET_RECEIVED</a> - <span class="keywordflow">if</span> packet received.
00118 
00119 --*/
00120 
00121 {
00122 
00123     UCHAR Input, PreviousByte = 0;
00124     ULONG PacketId = 0;
00125     ULONG <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00126     ULONG ReturnCode;
00127     BOOLEAN BreakinDetected = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00128 
00129     <span class="comment">//</span>
00130     <span class="comment">// NOTE - With all the interrupts being off, it is very hard</span>
00131     <span class="comment">// to implement the actual timeout code. (Maybe, by reading the CMOS.)</span>
00132     <span class="comment">// Here we use a loop count to wait about 3 seconds.  The CpGetByte</span>
00133     <span class="comment">// will return with error code = CP_GET_NODATA if it cannot find data</span>
00134     <span class="comment">// byte within 1 second. Kernel debugger's timeout period is 5 seconds.</span>
00135     <span class="comment">//</span>
00136 
00137     <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0;
00138     <span class="keywordflow">do</span> {
00139         ReturnCode = <a class="code" href="../../d2/d7/hal_8h.html#a200">KdPortGetByte</a>(&amp;Input);
00140         <span class="keywordflow">if</span> (ReturnCode == <a class="code" href="../../d7/d3/kd_8h.html#a1">CP_GET_NODATA</a>) {
00141             <span class="keywordflow">if</span> (BreakinDetected) {
00142                 <a class="code" href="../../d8/d5/kddata_8c.html#a89">KdpControlCPending</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00143                 <span class="keywordflow">return</span> <a class="code" href="../../d0/d7/kdp_8h.html#a11">KDP_PACKET_RESEND</a>;
00144             } <span class="keywordflow">else</span> {
00145                 <span class="keywordflow">return</span> <a class="code" href="../../d0/d7/kdp_8h.html#a10">KDP_PACKET_TIMEOUT</a>;
00146             }
00147         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ReturnCode == <a class="code" href="../../d7/d3/kd_8h.html#a2">CP_GET_ERROR</a>) {
00148             <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0;
00149             <span class="keywordflow">continue</span>;
00150         } <span class="keywordflow">else</span> {                    <span class="comment">// if (ReturnCode == CP_GET_SUCCESS)</span>
00151             <span class="keywordflow">if</span> ( Input == PACKET_LEADER_BYTE ||
00152                  Input == CONTROL_PACKET_LEADER_BYTE ) {
00153                 <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> == 0 ) {
00154                     PreviousByte = Input;
00155                     <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++;
00156                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Input == PreviousByte ) {
00157                     <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++;
00158                 } <span class="keywordflow">else</span> {
00159                     PreviousByte = Input;
00160                     <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 1;
00161                 }
00162             } <span class="keywordflow">else</span> {
00163 
00164                 <span class="comment">//</span>
00165                 <span class="comment">// If we detect breakin character, we need to verify it</span>
00166                 <span class="comment">// validity.  (It is possible that we missed a packet leader</span>
00167                 <span class="comment">// and the breakin character is simply a data byte in the</span>
00168                 <span class="comment">// packet.)</span>
00169                 <span class="comment">// Since kernel debugger send out breakin character ONLY</span>
00170                 <span class="comment">// when it is waiting for State Change packet.  The breakin</span>
00171                 <span class="comment">// character should not be followed by any other character</span>
00172                 <span class="comment">// except packet leader byte.</span>
00173                 <span class="comment">//</span>
00174 
00175                 <span class="keywordflow">if</span> ( Input == BREAKIN_PACKET_BYTE ) {
00176                     BreakinDetected = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00177                 } <span class="keywordflow">else</span> {
00178 
00179                     <span class="comment">//</span>
00180                     <span class="comment">// The following statement is ABSOLUTELY necessary.</span>
00181                     <span class="comment">//</span>
00182 
00183                     BreakinDetected = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00184                 }
00185                 <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0;
00186             }
00187         }
00188     } <span class="keywordflow">while</span> ( <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; 4 );
00189 
00190     <span class="keywordflow">if</span> (BreakinDetected) {
00191         <a class="code" href="../../d8/d5/kddata_8c.html#a89">KdpControlCPending</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00192     }
00193 
00194     <span class="comment">//</span>
00195     <span class="comment">// return the packet leader and FALSE to indicate no resend is needed.</span>
00196     <span class="comment">//</span>
00197 
00198     <span class="keywordflow">if</span> ( Input == PACKET_LEADER_BYTE ) {
00199         *PacketLeader = PACKET_LEADER;
00200     } <span class="keywordflow">else</span> {
00201         *PacketLeader = CONTROL_PACKET_LEADER;
00202     }
00203 
00204     <a class="code" href="../../d7/d3/kd_8h.html#a12">KdDebuggerNotPresent</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00205     <span class="keywordflow">return</span> <a class="code" href="../../d0/d7/kdp_8h.html#a9">KDP_PACKET_RECEIVED</a>;
00206 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a120" doxytag="4/kdp.h::KdpReportExceptionStateChange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN KdpReportExceptionStateChange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PEXCEPTION_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionRecord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>ContextRecord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>SecondChance</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02351">2351</a> of file <a class="el" href="../../d9/d2/kdapi_8c-source.html">kdapi.c</a>.
<p>
References <a class="el" href="../../d4/d9/ke_8h.html#a408a228">ContinueProcessorReselected</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l00353">KCONTINUE_STATUS</a>, <a class="el" href="../../d2/d9/4_2i386_2kdtrap_8c.html#a3">KdpCheckTracePoint()</a>, <a class="el" href="../../d1/d7/4_2kdp_8h.html#a122">KdpSendWaitContinue()</a>, <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html#l00098">KdpSetStateChange()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02318">KdpSwitchProcessor()</a>, and <a class="el" href="../../d8/d7/alpha_2kdtrap_8c-source.html#l00028">KdpTrap()</a>.
<p>
<pre class="fragment"><div>02359                    :
02360 
02361     This routine sends an exception state change packet to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> kernel
02362     debugger and waits <span class="keywordflow">for</span> a manipulate state message.
02363 
02364 Arguments:
02365 
02366     ExceptionRecord - Supplies a pointer to an exception record.
02367 
02368     ContextRecord - Supplies a pointer to a context record.
02369 
02370     SecondChance - Supplies a <span class="keywordtype">boolean</span> value that determines whether <span class="keyword">this</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
02371         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> first or second chance <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exception.
02372 
02373 Return Value:
02374 
02375     <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> value of <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exception <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> handled. Otherwise, a
02376     value of <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
02377 
02378 --*/
02379 
02380 {
02381     STRING MessageData;
02382     STRING MessageHeader;
02383     DBGKD_WAIT_STATE_CHANGE WaitStateChange;
02384     <a class="code" href="../../d4/d9/ke_8h.html#a408">KCONTINUE_STATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02385 
02386 <span class="preprocessor">#if i386</span>
02387 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9/4_2i386_2kdtrap_8c.html#a3">KdpCheckTracePoint</a>(ExceptionRecord,ContextRecord)) <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02388 <span class="preprocessor">#endif</span>
02389 <span class="preprocessor"></span>
02390     <span class="keywordflow">do</span> {
02391 
02392         <span class="comment">//</span>
02393         <span class="comment">// Construct the wait state change message and message descriptor.</span>
02394         <span class="comment">//</span>
02395 
02396         <a class="code" href="../../d1/d7/4_2kdp_8h.html#a114">KdpSetStateChange</a>(&amp;WaitStateChange,
02397                             ExceptionRecord,
02398                             ContextRecord,
02399                             SecondChance
02400                             );
02401 
02402         MessageHeader.Length = <span class="keyword">sizeof</span>(DBGKD_WAIT_STATE_CHANGE);
02403         MessageHeader.Buffer = (PCHAR)&amp;WaitStateChange;
02404 
02405 <span class="preprocessor">#if i386</span>
02406 <span class="preprocessor"></span>        <span class="comment">//</span>
02407         <span class="comment">// Construct the wait state change data and data descriptor.</span>
02408         <span class="comment">//</span>
02409 
02410         DumpTraceData(&amp;MessageData);
02411 <span class="preprocessor">#else</span>
02412 <span class="preprocessor"></span>        MessageData.Length = 0;
02413 <span class="preprocessor">#endif</span>
02414 <span class="preprocessor"></span>
02415         <span class="comment">//</span>
02416         <span class="comment">// Send packet to the kernel debugger on the host machine,</span>
02417         <span class="comment">// wait for answer.</span>
02418         <span class="comment">//</span>
02419 
02420         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d7/4_2kdp_8h.html#a122">KdpSendWaitContinue</a>(
02421                     PACKET_TYPE_KD_STATE_CHANGE,
02422                     &amp;MessageHeader,
02423                     &amp;MessageData,
02424                     ContextRecord
02425                     );
02426 
02427     } <span class="keywordflow">while</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> == <a class="code" href="../../d4/d9/ke_8h.html#a408a228">ContinueProcessorReselected</a>) ;
02428 
02429     <span class="keywordflow">return</span> (BOOLEAN) <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02430 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a121" doxytag="4/kdp.h::KdpReportLoadSymbolsStateChange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN KdpReportLoadSymbolsStateChange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>PathName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d6/d5/struct__KD__SYMBOLS__INFO.html">PKD_SYMBOLS_INFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SymbolInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>UnloadSymbols</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>ContextRecord</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02434">2434</a> of file <a class="el" href="../../d9/d2/kdapi_8c-source.html">kdapi.c</a>.
<p>
References <a class="el" href="../../d4/d9/ke_8h.html#a408a228">ContinueProcessorReselected</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l00353">KCONTINUE_STATUS</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00203">KdpPathBuffer</a>, <a class="el" href="../../d1/d7/4_2kdp_8h.html#a122">KdpSendWaitContinue()</a>, <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html#l00036">KdpSetLoadState()</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00069">KeGetCurrentPrcb</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00070">KeGetCurrentThread</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02776">KeNumberProcessors</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02778">KeProcessorLevel</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/alpha_2kdtrap_8c-source.html#l00028">KdpTrap()</a>.
<p>
<pre class="fragment"><div>02443                    :
02444 
02445     This routine sends a load symbols state change packet to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> kernel
02446     debugger and waits <span class="keywordflow">for</span> a manipulate state message.
02447 
02448 Arguments:
02449 
02450     PathName - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> pathname of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> image whose
02451         symbols are to be loaded.
02452 
02453     BaseOfDll - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> base address where <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> image was loaded.
02454 
02455     ProcessId - Unique 32-bit identifier <span class="keywordflow">for</span> process that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <span class="keyword">using</span>
02456         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> symbols.  -1 <span class="keywordflow">for</span> system process.
02457 
02458     CheckSum - Unique 32-bit identifier from image header.
02459 
02460     UnloadSymbol - <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> symbols that were previously loaded <span class="keywordflow">for</span>
02461         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> named image are to be unloaded from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> debugger.
02462 
02463 Return Value:
02464 
02465     <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> value of <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exception <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> handled. Otherwise, a
02466     value of <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
02467 
02468 --*/
02469 
02470 {
02471 
02472     PSTRING AdditionalData;
02473     STRING MessageData;
02474     STRING MessageHeader;
02475     DBGKD_WAIT_STATE_CHANGE WaitStateChange;
02476     <a class="code" href="../../d4/d9/ke_8h.html#a408">KCONTINUE_STATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02477 
02478     <span class="keywordflow">do</span> {
02479         <span class="comment">//</span>
02480         <span class="comment">// Construct the wait state change message and message descriptor.</span>
02481         <span class="comment">//</span>
02482 
02483         WaitStateChange.NewState = DbgKdLoadSymbolsStateChange;
02484         WaitStateChange.ProcessorLevel = <a class="code" href="../../d4/d9/ke_8h.html#a135">KeProcessorLevel</a>;
02485         WaitStateChange.Processor = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a2">KeGetCurrentPrcb</a>()-&gt;Number;
02486         WaitStateChange.NumberProcessors = (ULONG)<a class="code" href="../../d4/d9/ke_8h.html#a133">KeNumberProcessors</a>;
02487         WaitStateChange.Thread = (PVOID)<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a3">KeGetCurrentThread</a>();
02488         WaitStateChange.ProgramCounter = (PVOID)CONTEXT_TO_PROGRAM_COUNTER(ContextRecord);
02489         <a class="code" href="../../d1/d7/4_2kdp_8h.html#a113">KdpSetLoadState</a>(&amp;WaitStateChange, ContextRecord);
02490         WaitStateChange.u.LoadSymbols.UnloadSymbols = UnloadSymbols;
02491         WaitStateChange.u.LoadSymbols.BaseOfDll = SymbolInfo-&gt;BaseOfDll;
02492         WaitStateChange.u.LoadSymbols.ProcessId = (ULONG)SymbolInfo-&gt;ProcessId;
02493         WaitStateChange.u.LoadSymbols.CheckSum = SymbolInfo-&gt;CheckSum;
02494         WaitStateChange.u.LoadSymbols.SizeOfImage = SymbolInfo-&gt;SizeOfImage;
02495         <span class="keywordflow">if</span> (ARGUMENT_PRESENT( PathName )) {
02496             WaitStateChange.u.LoadSymbols.PathNameLength =
02497                 <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(
02498                     (PCHAR)KdpPathBuffer,
02499                     (PCHAR)PathName-&gt;Buffer,
02500                     PathName-&gt;Length
02501                     ) + 1;
02502 
02503             MessageData.Buffer = <a class="code" href="../../d8/d5/kddata_8c.html#a53">KdpPathBuffer</a>;
02504             MessageData.Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)WaitStateChange.u.LoadSymbols.PathNameLength;
02505             MessageData.Buffer[MessageData.Length-1] = <span class="charliteral">'\0'</span>;
02506             AdditionalData = &amp;MessageData;
02507         } <span class="keywordflow">else</span> {
02508             WaitStateChange.u.LoadSymbols.PathNameLength = 0;
02509             AdditionalData = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02510         }
02511 
02512         MessageHeader.Length = <span class="keyword">sizeof</span>(DBGKD_WAIT_STATE_CHANGE);
02513         MessageHeader.Buffer = (PCHAR)&amp;WaitStateChange;
02514 
02515         <span class="comment">//</span>
02516         <span class="comment">// Send packet to the kernel debugger on the host machine, wait</span>
02517         <span class="comment">// for the reply.</span>
02518         <span class="comment">//</span>
02519 
02520         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d7/4_2kdp_8h.html#a122">KdpSendWaitContinue</a>(
02521                     PACKET_TYPE_KD_STATE_CHANGE,
02522                     &amp;MessageHeader,
02523                     AdditionalData,
02524                     ContextRecord
02525                     );
02526 
02527     } <span class="keywordflow">while</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> == <a class="code" href="../../d4/d9/ke_8h.html#a408a228">ContinueProcessorReselected</a>);
02528 
02529     <span class="keywordflow">return</span> (BOOLEAN) <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02530 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a140" doxytag="4/kdp.h::KdpRestoreAllBreakpoints" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpRestoreAllBreakpoints           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l01309">1309</a> of file <a class="el" href="../../d1/d3/kdbreak_8c-source.html">kdbreak.c</a>.
<p>
References <a class="el" href="../../d9/d4/kddata_8c-source.html#l00248">BreakpointsSuspended</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00171">_BREAKPOINT_ENTRY::Flags</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00048">KD_BREAKPOINT_IN_USE</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00050">KD_BREAKPOINT_SUSPENDED</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00201">KdpBreakpointTable</a>, and <a class="el" href="../../d2/d3/4_2kdbreak_8c-source.html#l01138">KdpLowRestoreBreakpoint()</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03282">KdEnableDebugger()</a>.
<p>
<pre class="fragment"><div>01312 {
01313     ULONG <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01314 
01315     <a class="code" href="../../d8/d5/kddata_8c.html#a86">BreakpointsSuspended</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01316 
01317     <span class="keywordflow">for</span> ( <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; BREAKPOINT_TABLE_SIZE; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++ ) {
01318 
01319         <span class="keywordflow">if</span> ((<a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> &amp; <a class="code" href="../../d0/d7/kdp_8h.html#a1">KD_BREAKPOINT_IN_USE</a>) &amp;&amp;
01320             (<a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> &amp; <a class="code" href="../../d0/d7/kdp_8h.html#a3">KD_BREAKPOINT_SUSPENDED</a>) ) {
01321 
01322             <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> &amp;= ~<a class="code" href="../../d0/d7/kdp_8h.html#a3">KD_BREAKPOINT_SUSPENDED</a>;
01323             <a class="code" href="../../d1/d4/4_2kdbreak_8c.html#a9">KdpLowRestoreBreakpoint</a>(Index);
01324         }
01325     }
01326 
01327     <span class="keywordflow">return</span>;
01328 
01329 } <span class="comment">// KdpRestoreAllBreakpoints</span>
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a131" doxytag="4/kdp.h::KdpRestoreBreakpoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpRestoreBreakpoint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l01740">1740</a> of file <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html">4/kdapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00826">KdpDeleteBreakpoint()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>01748                    :
01749 
01750     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a restore breakpoint state
01751     manipulation message.  Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to restore a breakpoint
01752     <span class="keyword">using</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified handle.
01753 
01754 Arguments:
01755 
01756     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
01757 
01758     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
01759 
01760     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
01761 
01762 Return Value:
01763 
01764     None.
01765 
01766 --*/
01767 
01768 {
01769     PDBGKD_RESTORE_BREAKPOINT a = &amp;m-&gt;u.RestoreBreakPoint;
01770     STRING MessageHeader;
01771 
01772     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
01773     MessageHeader.Buffer = (PCHAR)m;
01774 
01775     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(AdditionalData-&gt;Length == 0);
01776     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d7/4_2kdp_8h.html#a105">KdpDeleteBreakpoint</a>(a-&gt;BreakPointHandle)) {
01777         m-&gt;ReturnStatus = STATUS_SUCCESS;
01778     } <span class="keywordflow">else</span> {
01779         m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
01780     }
01781     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
01782                   PACKET_TYPE_KD_STATE_MANIPULATE,
01783                   &amp;MessageHeader,
01784                   NULL
01785                   );
01786     UNREFERENCED_PARAMETER(Context);
01787 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a116" doxytag="4/kdp.h::KdpSendPacket" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpSendPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>PacketType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>MessageHeader</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING MessageData&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">683</a> of file <a class="el" href="../../d0/d4/kdcomio_8c-source.html">kdcomio.c</a>.
<p>
References <a class="el" href="../../d8/d2/kd_8h-source.html#l00133">KdDebuggerNotPresent</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00062">KDP_PACKET_RECEIVED</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00063">KDP_PACKET_TIMEOUT</a>, <a class="el" href="../../d0/d5/4_2kdcomio_8c.html#a0">KdpComputeChecksum()</a>, <a class="el" href="../../d9/d9/cmdat3_8c-source.html#l00137">KdpDefaultRetries</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00264">KdpNextPacketIdToSend</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00258">KdpNumberRetries</a>, <a class="el" href="../../d2/d7/hal_8h.html#a202">KdPortPutByte()</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00265">KdpPacketIdExpected</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00342">KdpReceivePacket()</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00257">KdpRetryCount</a>, <a class="el" href="../../d0/d5/4_2kdcomio_8c.html#a2">KdpSendString()</a>, <a class="el" href="../../d4/d6/class_8h-source.html#l00054">MAXIMUM_RETRIES</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03633">KdpCheckLowMemory()</a>, <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html#l01057">KdpGetBusData()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l01461">KdpGetContext()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02838">KdpGetVersion()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02959">KdpNotSupported()</a>, <a class="el" href="../../d1/d5/kddbgio_8c-source.html#l00030">KdpPrintString()</a>, <a class="el" href="../../d1/d5/kddbgio_8c-source.html#l00110">KdpPromptString()</a>, <a class="el" href="../../d2/d4/alpha_2kdcpuapi_8c-source.html#l00212">KdpReadControlSpace()</a>, <a class="el" href="../../d2/d4/alpha_2kdcpuapi_8c-source.html#l00499">KdpReadIoSpace()</a>, <a class="el" href="../../d2/d4/alpha_2kdcpuapi_8c-source.html#l00623">KdpReadIoSpaceExtended()</a>, <a class="el" href="../../d3/d4/i386_2kdcpuapi_8c-source.html#l01095">KdpReadMachineSpecificRegister()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02534">KdpReadPhysicalMemory()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l01139">KdpReadVirtualMemory()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l01215">KdpReadVirtualMemory64()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l01632">KdpRestoreBreakpoint()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03157">KdpRestoreBreakPointEx()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03328">KdpSearchMemory()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>, <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html#l01136">KdpSetBusData()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l01521">KdpSetContext()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l01580">KdpWriteBreakpoint()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03035">KdpWriteBreakPointEx()</a>, <a class="el" href="../../d2/d4/alpha_2kdcpuapi_8c-source.html#l00451">KdpWriteControlSpace()</a>, <a class="el" href="../../d2/d4/alpha_2kdcpuapi_8c-source.html#l00779">KdpWriteIoSpace()</a>, <a class="el" href="../../d2/d4/alpha_2kdcpuapi_8c-source.html#l00899">KdpWriteIoSpaceExtended()</a>, <a class="el" href="../../d3/d4/i386_2kdcpuapi_8c-source.html#l01153">KdpWriteMachineSpecificRegister()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02680">KdpWritePhysicalMemory()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l01308">KdpWriteVirtualMemory()</a>, and <a class="el" href="../../d9/d2/kdapi_8c-source.html#l01375">KdpWriteVirtualMemory64()</a>.
<p>
<pre class="fragment"><div>00691                    :
00692 
00693     This routine sends a packet to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> host machine that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> running <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00694     kernel debugger and waits <span class="keywordflow">for</span> an ACK.
00695 
00696 Arguments:
00697 
00698     PacketType - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> of packet to send.
00699 
00700     MessageHeader - Supplies a pointer to a string descriptor that describes
00701         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message information.
00702 
00703     MessageData - Supplies a pointer to a string descriptor that describes
00704         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> optional message data.
00705 
00706 Return Value:
00707 
00708     None.
00709 
00710 --*/
00711 
00712 {
00713 
00714     KD_PACKET PacketHeader;
00715     ULONG MessageDataLength;
00716     ULONG ReturnCode;
00717     PDBGKD_DEBUG_IO DebugIo;
00718     PDBGKD_WAIT_STATE_CHANGE StateChange;
00719 
00720     <span class="keywordflow">if</span> ( ARGUMENT_PRESENT(MessageData) ) {
00721         MessageDataLength = MessageData-&gt;Length;
00722         PacketHeader.Checksum = <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a0">KdpComputeChecksum</a>(
00723                                         MessageData-&gt;Buffer,
00724                                         MessageData-&gt;Length
00725                                         );
00726     } <span class="keywordflow">else</span> {
00727         MessageDataLength = 0;
00728         PacketHeader.Checksum = 0;
00729     }
00730 
00731     PacketHeader.Checksum += <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a0">KdpComputeChecksum</a> (
00732                                     MessageHeader-&gt;Buffer,
00733                                     MessageHeader-&gt;Length
00734                                     );
00735 
00736     <span class="comment">//</span>
00737     <span class="comment">// Initialize and send the packet header.</span>
00738     <span class="comment">//</span>
00739 
00740     PacketHeader.PacketLeader = PACKET_LEADER;
00741     PacketHeader.ByteCount = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(MessageHeader-&gt;Length + MessageDataLength);
00742     PacketHeader.PacketType = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)PacketType;
00743     <a class="code" href="../../d8/d5/kddata_8c.html#a88">KdpNumberRetries</a> = <a class="code" href="../../d8/d5/kddata_8c.html#a87">KdpRetryCount</a>;
00744     <span class="keywordflow">do</span> {
00745         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d5/kddata_8c.html#a88">KdpNumberRetries</a> == 0) {
00746 
00747             <span class="comment">//</span>
00748             <span class="comment">// If the packet is not for reporting exception, we give up</span>
00749             <span class="comment">// and declare debugger not present.</span>
00750             <span class="comment">//</span>
00751 
00752             <span class="keywordflow">if</span> (PacketType == PACKET_TYPE_KD_DEBUG_IO) {
00753                 DebugIo = (PDBGKD_DEBUG_IO)MessageHeader-&gt;Buffer;
00754                 <span class="keywordflow">if</span> (DebugIo-&gt;ApiNumber == DbgKdPrintStringApi) {
00755                     <a class="code" href="../../d7/d3/kd_8h.html#a12">KdDebuggerNotPresent</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00756                     <a class="code" href="../../d8/d5/kddata_8c.html#a92">KdpNextPacketIdToSend</a> = INITIAL_PACKET_ID | SYNC_PACKET_ID;
00757                     <a class="code" href="../../d8/d5/kddata_8c.html#a93">KdpPacketIdExpected</a> = INITIAL_PACKET_ID;
00758                     <span class="keywordflow">return</span>;
00759                 }
00760             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PacketType == PACKET_TYPE_KD_STATE_CHANGE) {
00761                 StateChange = (PDBGKD_WAIT_STATE_CHANGE)MessageHeader-&gt;Buffer;
00762                 <span class="keywordflow">if</span> (StateChange-&gt;NewState == DbgKdLoadSymbolsStateChange) {
00763                     <a class="code" href="../../d7/d3/kd_8h.html#a12">KdDebuggerNotPresent</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00764                     <a class="code" href="../../d8/d5/kddata_8c.html#a92">KdpNextPacketIdToSend</a> = INITIAL_PACKET_ID | SYNC_PACKET_ID;
00765                     <a class="code" href="../../d8/d5/kddata_8c.html#a93">KdpPacketIdExpected</a> = INITIAL_PACKET_ID;
00766                     <span class="keywordflow">return</span>;
00767                 }
00768             }
00769         }
00770 
00771         <span class="comment">//</span>
00772         <span class="comment">// Setting PacketId has to be in the do loop in case Packet Id was</span>
00773         <span class="comment">// reset.</span>
00774         <span class="comment">//</span>
00775 
00776         PacketHeader.PacketId = <a class="code" href="../../d8/d5/kddata_8c.html#a92">KdpNextPacketIdToSend</a>;
00777         <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a2">KdpSendString</a>((PCHAR)&amp;PacketHeader, <span class="keyword">sizeof</span>(KD_PACKET));
00778 
00779         <span class="comment">//</span>
00780         <span class="comment">// Output message header.</span>
00781         <span class="comment">//</span>
00782 
00783         <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a2">KdpSendString</a>(MessageHeader-&gt;Buffer, MessageHeader-&gt;Length);
00784 
00785         <span class="comment">//</span>
00786         <span class="comment">// Output message data.</span>
00787         <span class="comment">//</span>
00788 
00789         <span class="keywordflow">if</span> ( MessageDataLength ) {
00790             <a class="code" href="../../d0/d5/4_2kdcomio_8c.html#a2">KdpSendString</a>(MessageData-&gt;Buffer, MessageData-&gt;Length);
00791         }
00792 
00793         <span class="comment">//</span>
00794         <span class="comment">// Output a packet trailing byte</span>
00795         <span class="comment">//</span>
00796 
00797         <a class="code" href="../../d2/d7/hal_8h.html#a202">KdPortPutByte</a>(PACKET_TRAILING_BYTE);
00798 
00799         <span class="comment">//</span>
00800         <span class="comment">// Wait for the Ack Packet</span>
00801         <span class="comment">//</span>
00802 
00803         ReturnCode = <a class="code" href="../../d1/d7/4_2kdp_8h.html#a112">KdpReceivePacket</a>(
00804                          PACKET_TYPE_KD_ACKNOWLEDGE,
00805                          NULL,
00806                          NULL,
00807                          NULL
00808                          );
00809         <span class="keywordflow">if</span> (ReturnCode == <a class="code" href="../../d0/d7/kdp_8h.html#a10">KDP_PACKET_TIMEOUT</a>) {
00810             <a class="code" href="../../d8/d5/kddata_8c.html#a88">KdpNumberRetries</a>--;
00811         }
00812     } <span class="keywordflow">while</span> (ReturnCode != <a class="code" href="../../d0/d7/kdp_8h.html#a9">KDP_PACKET_RECEIVED</a>);
00813 
00814     <span class="comment">//</span>
00815     <span class="comment">// Reset Sync bit in packet id.  The packet we sent may have Sync bit set</span>
00816     <span class="comment">//</span>
00817 
00818     <a class="code" href="../../d8/d5/kddata_8c.html#a92">KdpNextPacketIdToSend</a> &amp;= ~SYNC_PACKET_ID;
00819 
00820     <span class="comment">//</span>
00821     <span class="comment">// Since we are able to talk to debugger, the retrycount is set to</span>
00822     <span class="comment">// maximum value.</span>
00823     <span class="comment">//</span>
00824 
00825     <a class="code" href="../../d8/d5/kddata_8c.html#a87">KdpRetryCount</a> = <a class="code" href="../../d3/d7/class_8h.html#a1">MAXIMUM_RETRIES</a>;
00826 }
}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a122" doxytag="4/kdp.h::KdpSendWaitContinue" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d9/ke_8h.html#a408">KCONTINUE_STATUS</a> KdpSendWaitContinue           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>PacketType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>MessageHeader</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING MessageData&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>ContextRecord</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02351">KdpReportExceptionStateChange()</a>, and <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02434">KdpReportLoadSymbolsStateChange()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a129" doxytag="4/kdp.h::KdpSetContext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpSetContext           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l01629">1629</a> of file <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html">4/kdapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00150">KdpQuickMoveMemory()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00069">KeGetCurrentPrcb</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02776">KeNumberProcessors</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02782">KiProcessorBlock</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>01637                    :
01638 
01639     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a set context state
01640     manipulation message.  Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> set <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current
01641     context.
01642 
01643 Arguments:
01644 
01645     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
01646 
01647     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
01648 
01649     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
01650 
01651 Return Value:
01652 
01653     None.
01654 
01655 --*/
01656 
01657 {
01658     PDBGKD_SET_CONTEXT a = &amp;m-&gt;u.SetContext;
01659     STRING MessageHeader;
01660 
01661     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
01662     MessageHeader.Buffer = (PCHAR)m;
01663 
01664     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(AdditionalData-&gt;Length == <span class="keyword">sizeof</span>(CONTEXT));
01665 
01666     <span class="keywordflow">if</span> (m-&gt;Processor &gt;= (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d4/d9/ke_8h.html#a133">KeNumberProcessors</a>) {
01667         m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
01668     } <span class="keywordflow">else</span> {
01669         m-&gt;ReturnStatus = STATUS_SUCCESS;
01670         <span class="keywordflow">if</span> (m-&gt;Processor == (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a2">KeGetCurrentPrcb</a>()-&gt;Number) {
01671             <a class="code" href="../../d1/d7/4_2kdp_8h.html#a111">KdpQuickMoveMemory</a>((PCHAR)Context, AdditionalData-&gt;Buffer, <span class="keyword">sizeof</span>(CONTEXT));
01672         } <span class="keywordflow">else</span> {
01673             <a class="code" href="../../d1/d7/4_2kdp_8h.html#a111">KdpQuickMoveMemory</a>((PCHAR)&amp;KiProcessorBlock[m-&gt;Processor]-&gt;ProcessorState.ContextFrame,
01674                           AdditionalData-&gt;Buffer,
01675                           <span class="keyword">sizeof</span>(CONTEXT)
01676                          );
01677         }
01678     }
01679 
01680     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
01681                   PACKET_TYPE_KD_STATE_MANIPULATE,
01682                   &amp;MessageHeader,
01683                   NULL
01684                   );
01685 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a113" doxytag="4/kdp.h::KdpSetLoadState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpSetLoadState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_WAIT_STATE_CHANGE64&nbsp;</td>
          <td class="mdname" nowrap> <em>WaitStateChange</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>ContextRecord</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html#l00036">36</a> of file <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html">4/alpha/kdcpuapi.c</a>.
<p>
References <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00051">Count</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00050">End</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00902">KdpDeleteBreakpointRange()</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02434">KdpReportLoadSymbolsStateChange()</a>.
<p>
<pre class="fragment"><div>00043                    :
00044 
00045     Fill in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Wait_State_Change message record <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> load symbol <span class="keywordflow">case</span>.
00046 
00047 Arguments:
00048 
00049     WaitStateChange - Supplies pointer to record to fill in
00050 
00051     ContextRecord - Supplies a pointer to a context record.
00052 
00053 Return Value:
00054 
00055     None.
00056 
00057 --*/
00058 
00059 {
00060 
00061     ULONG <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
00062     PVOID <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a>;
00063 
00064     <span class="comment">//</span>
00065     <span class="comment">// Copy the immediate instruction stream into the control report structure.</span>
00066     <span class="comment">//</span>
00067 
00068     <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a> =  <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(&amp;WaitStateChange-&gt;ControlReport.InstructionStream[0],
00069                            (PCHAR)WaitStateChange-&gt;ProgramCounter,
00070                            DBGKD_MAXSTREAM);
00071 
00072     WaitStateChange-&gt;ControlReport.InstructionCount = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
00073 
00074     <span class="comment">//</span>
00075     <span class="comment">// Clear breakpoints in the copied instruction stream. If any breakpoints</span>
00076     <span class="comment">// are clear, then recopy the instruction strasm.</span>
00077     <span class="comment">//</span>
00078 
00079     <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a> = (PVOID)((PUCHAR)(WaitStateChange-&gt;ProgramCounter) + <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a> - 1);
00080     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d7/4_2kdp_8h.html#a106">KdpDeleteBreakpointRange</a>((PVOID)WaitStateChange-&gt;ProgramCounter, End) != <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) {
00081         <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(&amp;WaitStateChange-&gt;ControlReport.InstructionStream[0],
00082                       (PVOID)WaitStateChange-&gt;ProgramCounter,
00083                       Count);
00084     }
00085 
00086     <span class="comment">//</span>
00087     <span class="comment">// Copy the context record into the wait state structure.</span>
00088     <span class="comment">//</span>
00089 
00090     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>((PCHAR)&amp;WaitStateChange-&gt;Context,
00091                   (PCHAR)ContextRecord,
00092                   <span class="keyword">sizeof</span>(*ContextRecord));
00093 
00094     <span class="keywordflow">return</span>;
00095 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a114" doxytag="4/kdp.h::KdpSetStateChange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpSetStateChange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_WAIT_STATE_CHANGE64&nbsp;</td>
          <td class="mdname" nowrap> <em>WaitStateChange</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PEXCEPTION_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionRecord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>ContextRecord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>SecondChance</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html#l00098">98</a> of file <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html">4/alpha/kdcpuapi.c</a>.
<p>
References <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00051">Count</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00050">End</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00902">KdpDeleteBreakpointRange()</a>, <a class="el" href="../../d2/d7/alpha_2kdpcpu_8h.html#a12">KdpGetCurrentPrcb()</a>, <a class="el" href="../../d2/d7/alpha_2kdpcpu_8h.html#a13">KdpGetCurrentThread()</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00150">KdpQuickMoveMemory()</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00069">KeGetCurrentPrcb</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00070">KeGetCurrentThread</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02776">KeNumberProcessors</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02778">KeProcessorLevel</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02351">KdpReportExceptionStateChange()</a>.
<p>
<pre class="fragment"><div>00107                    :
00108 
00109     Fill in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Wait_State_Change message record.
00110 
00111 Arguments:
00112 
00113     WaitStateChange - Supplies pointer to record to fill in
00114 
00115     ExceptionRecord - Supplies a pointer to an exception record.
00116 
00117     ContextRecord - Supplies a pointer to a context record.
00118 
00119     SecondChance - Supplies a <span class="keywordtype">boolean</span> value that determines whether <span class="keyword">this</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
00120         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> first or second chance <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exception.
00121 
00122 Return Value:
00123 
00124     None.
00125 
00126 --*/
00127 
00128 {
00129 
00130     ULONG <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
00131     PVOID <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a>;
00132 
00133     <span class="comment">//</span>
00134     <span class="comment">// Set up description of event, including exception record</span>
00135     <span class="comment">//</span>
00136 
00137     WaitStateChange-&gt;NewState = DbgKdExceptionStateChange;
00138     WaitStateChange-&gt;ProcessorLevel = <a class="code" href="../../d4/d9/ke_8h.html#a135">KeProcessorLevel</a>;
00139     WaitStateChange-&gt;Processor = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a12">KdpGetCurrentPrcb</a>()-&gt;Number;
00140     WaitStateChange-&gt;NumberProcessors = (ULONG)<a class="code" href="../../d4/d9/ke_8h.html#a133">KeNumberProcessors</a>;
00141     WaitStateChange-&gt;Thread = (ULONG_PTR)<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a13">KdpGetCurrentThread</a>();
00142     WaitStateChange-&gt;ProgramCounter = (ULONG_PTR)CONTEXT_TO_PROGRAM_COUNTER(ContextRecord);
00143     <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(EXCEPTION_RECORD) == <span class="keyword">sizeof</span>(WaitStateChange-&gt;u.Exception.ExceptionRecord)) {
00144         <a class="code" href="../../d1/d7/4_2kdp_8h.html#a111">KdpQuickMoveMemory</a>((PCHAR)&amp;WaitStateChange-&gt;u.Exception.ExceptionRecord,
00145                            (PCHAR)ExceptionRecord,
00146                            <span class="keyword">sizeof</span>(EXCEPTION_RECORD));
00147     } <span class="keywordflow">else</span> {
00148         ExceptionRecord32To64((PEXCEPTION_RECORD32)ExceptionRecord,
00149                               &amp;WaitStateChange-&gt;u.Exception.ExceptionRecord
00150                               );
00151     }
00152 
00153     WaitStateChange-&gt;u.Exception.FirstChance = !SecondChance;
00154 
00155     <span class="comment">//</span>
00156     <span class="comment">// Copy the immediate instruction stream into the control report structure.</span>
00157     <span class="comment">//</span>
00158 
00159     <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a> =  <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(&amp;WaitStateChange-&gt;ControlReport.InstructionStream[0],
00160                            (PVOID)WaitStateChange-&gt;ProgramCounter,
00161                            DBGKD_MAXSTREAM);
00162 
00163     WaitStateChange-&gt;ControlReport.InstructionCount = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
00164 
00165     <span class="comment">//</span>
00166     <span class="comment">// Clear breakpoints in the copied instruction stream. If any breakpoints</span>
00167     <span class="comment">// are clear, then recopy the instruction strasm.</span>
00168     <span class="comment">//</span>
00169 
00170     <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a> = (PVOID)((PUCHAR)(WaitStateChange-&gt;ProgramCounter) + <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a> - 1);
00171     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d7/4_2kdp_8h.html#a106">KdpDeleteBreakpointRange</a>((PVOID)WaitStateChange-&gt;ProgramCounter, End) != <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) {
00172         <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(&amp;WaitStateChange-&gt;ControlReport.InstructionStream[0],
00173                       (PVOID)WaitStateChange-&gt;ProgramCounter,
00174                       Count);
00175     }
00176 
00177     <span class="comment">//</span>
00178     <span class="comment">// Copy the context record into the wait state structure.</span>
00179     <span class="comment">//</span>
00180 
00181     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>((PCHAR)&amp;WaitStateChange-&gt;Context,
00182                   (PCHAR)ContextRecord,
00183                   <span class="keyword">sizeof</span>(*ContextRecord));
00184 
00185     <span class="keywordflow">return</span>;
00186 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a117" doxytag="4/kdp.h::KdpStub" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN KdpStub           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PKTRAP_FRAME&nbsp;</td>
          <td class="mdname" nowrap> <em>TrapFrame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PKEXCEPTION_FRAME&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionFrame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PEXCEPTION_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionRecord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>ContextRecord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d9/ntosdef_8h.html#a39">KPROCESSOR_MODE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PreviousMode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>SecondChance</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d7/alpha_2kdtrap_8c-source.html#l00386">386</a> of file <a class="el" href="../../d8/d7/alpha_2kdtrap_8c-source.html">alpha/kdtrap.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00616">KERNEL_BREAKPOINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00624">KernelMode</a>, <a class="el" href="../../d6/d5/iosup_8c-source.html#l05490">MmGetPhysicalAddress()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00397                    :
00398 
00399     This routine provides a kernel debugger stub routine that catchs debug
00400     prints in checked systems when <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> kernel debugger <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not active.
00401 
00402 Arguments:
00403 
00404     TrapFrame - Supplies a pointer to a trap frame that describes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00405         trap.
00406 
00407     ExceptionFrame - Supplies a pointer to a exception frame that describes
00408         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> trap.
00409 
00410     ExceptionRecord - Supplies a pointer to an exception record that
00411         describes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exception.
00412 
00413     ContextRecord - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> context at <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> time of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exception.
00414 
00415     PreviousMode - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> previous processor mode.
00416 
00417     SecondChance - Supplies a <span class="keywordtype">boolean</span> value that determines whether <span class="keyword">this</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
00418         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> second chance (TRUE) that the exception has been raised.
00419 
00420 Return Value:
00421 
00422     A value of TRUE is returned if the exception is handled. Otherwise a
00423     value of FALSE is returned.
00424 
00425 --*/
00426 
00427 {
00428 
00429     ULONG_PTR BreakpointCode;
00430 
00431     <span class="comment">//</span>
00432     <span class="comment">// Isolate the breakpoint code from the breakpoint instruction which</span>
00433     <span class="comment">// is stored by the exception dispatch code in the information field</span>
00434     <span class="comment">// of the exception record.</span>
00435     <span class="comment">//</span>
00436 
00437     BreakpointCode = ExceptionRecord-&gt;ExceptionInformation[0];
00438 
00439     <span class="comment">//</span>
00440     <span class="comment">// If the breakpoint is a debug print, debug load symbols, or debug</span>
00441     <span class="comment">// unload symbols, then return TRUE. Otherwise, return FALSE;</span>
00442     <span class="comment">//</span>
00443 
00444     <span class="keywordflow">if</span> ((BreakpointCode == DEBUG_PRINT_BREAKPOINT) ||
00445         (BreakpointCode == DEBUG_LOAD_SYMBOLS_BREAKPOINT) ||
00446         (BreakpointCode == DEBUG_UNLOAD_SYMBOLS_BREAKPOINT) ||
00447         (BreakpointCode == <a class="code" href="../../d6/d7/halmips_8h.html#a453">KERNEL_BREAKPOINT</a>)) {
00448         ContextRecord-&gt;Fir += 4;
00449         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00450     } <span class="keywordflow">else</span> {
00451         <span class="keywordflow">if</span> ( (BreakpointCode == DEBUG_STOP_BREAKPOINT) &amp;&amp;
00452              (PreviousMode == <a class="code" href="../../d6/d7/halmips_8h.html#a456">KernelMode</a>) ){
00453              ContextRecord-&gt;Fir += 4;
00454              <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00455         } <span class="keywordflow">else</span> {
00456             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00457         }
00458     }
00459 }
}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a139" doxytag="4/kdp.h::KdpSuspendAllBreakpoints" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpSuspendAllBreakpoints           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00972">972</a> of file <a class="el" href="../../d1/d3/kdbreak_8c-source.html">kdbreak.c</a>.
<p>
References <a class="el" href="../../d9/d4/kddata_8c-source.html#l00248">BreakpointsSuspended</a>, <a class="el" href="../../d8/d9/cmdat2_8c-source.html#l00091">Handle</a>, <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00954">KdpSuspendBreakpoint()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l03240">KdDisableDebugger()</a>.
<p>
<pre class="fragment"><div>00975 {
00976     ULONG <a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a>;
00977 
00978     <a class="code" href="../../d8/d5/kddata_8c.html#a86">BreakpointsSuspended</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00979 
00980     <span class="keywordflow">for</span> ( <a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a> = 1; <a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a> &lt;= BREAKPOINT_TABLE_SIZE; <a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a>++ ) {
00981         <a class="code" href="../../d1/d7/4_2kdp_8h.html#a138">KdpSuspendBreakpoint</a>(Handle);
00982     }
00983 
00984     <span class="keywordflow">return</span>;
00985 
00986 } <span class="comment">// KdpSuspendAllBreakpoints</span>
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a138" doxytag="4/kdp.h::KdpSuspendBreakpoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpSuspendBreakpoint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ULONG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Handle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00954">954</a> of file <a class="el" href="../../d1/d3/kdbreak_8c-source.html">kdbreak.c</a>.
<p>
References <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00171">_BREAKPOINT_ENTRY::Flags</a>, <a class="el" href="../../d8/d9/cmdat2_8c-source.html#l00091">Handle</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00048">KD_BREAKPOINT_IN_USE</a>, <a class="el" href="../../d1/d6/kdp_8h-source.html#l00050">KD_BREAKPOINT_SUSPENDED</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00201">KdpBreakpointTable</a>, and <a class="el" href="../../d2/d3/4_2kdbreak_8c-source.html#l00654">KdpLowWriteContent()</a>.
<p>
Referenced by <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00972">KdpSuspendAllBreakpoints()</a>.
<p>
<pre class="fragment"><div>00957 {
00958     ULONG <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = <a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a> - 1;
00959 
00960     <span class="keywordflow">if</span> ( (<a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> &amp; <a class="code" href="../../d0/d7/kdp_8h.html#a1">KD_BREAKPOINT_IN_USE</a>) &amp;&amp;
00961         !(<a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> &amp; <a class="code" href="../../d0/d7/kdp_8h.html#a3">KD_BREAKPOINT_SUSPENDED</a>) ) {
00962 
00963         <a class="code" href="../../d8/d5/kddata_8c.html#a51">KdpBreakpointTable</a>[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>].<a class="code" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html#o0">Flags</a> |= <a class="code" href="../../d0/d7/kdp_8h.html#a3">KD_BREAKPOINT_SUSPENDED</a>;
00964         <a class="code" href="../../d1/d4/4_2kdbreak_8c.html#a4">KdpLowWriteContent</a>(Index);
00965     }
00966 
00967     <span class="keywordflow">return</span>;
00968 
00969 } <span class="comment">// KdpSuspendBreakpoint</span>
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a119" doxytag="4/kdp.h::KdpSwitchProcessor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN KdpSwitchProcessor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PEXCEPTION_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionRecord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>ContextRecord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>SecondChance</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02318">2318</a> of file <a class="el" href="../../d9/d2/kdapi_8c-source.html">kdapi.c</a>.
<p>
References <a class="el" href="../../d2/d7/hal_8h.html#a203">KdPortRestore()</a>, <a class="el" href="../../d2/d7/hal_8h.html#a204">KdPortSave()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02351">KdpReportExceptionStateChange()</a>, and <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>.
<p>
<pre class="fragment"><div>02323 {
02324     BOOLEAN <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02325 
02326     <span class="comment">//</span>
02327     <span class="comment">// Save port state</span>
02328     <span class="comment">//</span>
02329 
02330     <a class="code" href="../../d2/d7/hal_8h.html#a204">KdPortSave</a> ();
02331 
02332     <span class="comment">//</span>
02333     <span class="comment">// Process state change for this processor</span>
02334     <span class="comment">//</span>
02335 
02336     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d7/4_2kdp_8h.html#a120">KdpReportExceptionStateChange</a> (
02337                 ExceptionRecord,
02338                 ContextRecord,
02339                 SecondChance
02340                 );
02341 
02342     <span class="comment">//</span>
02343     <span class="comment">// Restore port state and return status</span>
02344     <span class="comment">//</span>
02345 
02346     <a class="code" href="../../d2/d7/hal_8h.html#a203">KdPortRestore</a> ();
02347     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02348 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a141" doxytag="4/kdp.h::KdpTimeSlipDpcRoutine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpTimeSlipDpcRoutine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d6/struct__KDPC.html">PKDPC</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Dpc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>DeferredContext</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>SystemArgument1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>SystemArgument2</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00494">494</a> of file <a class="el" href="../../d9/d2/kdapi_8c-source.html">kdapi.c</a>.
<p>
References <a class="el" href="../../d5/d8/ex_8h.html#a332a206">DelayedWorkQueue</a>, <a class="el" href="../../d2/d8/worker_8c-source.html#l00375">ExQueueWorkItem()</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00293">KdpTimeSlipPending</a>, and <a class="el" href="../../d9/d4/kddata_8c-source.html#l00291">KdpTimeSlipWorkItem</a>.
<p>
<pre class="fragment"><div>00500 {
00501     LONG OldCount, NewCount, j;
00502 
00503     <span class="comment">//</span>
00504     <span class="comment">// Reset pending count.  If the current count is 1, then clear</span>
00505     <span class="comment">// the pending count.  if the current count is greater then 1,</span>
00506     <span class="comment">// then set to one and update the time now.</span>
00507     <span class="comment">//</span>
00508 
00509     j = <a class="code" href="../../d8/d5/kddata_8c.html#a103">KdpTimeSlipPending</a>;
00510     <span class="keywordflow">do</span> {
00511         OldCount = j;
00512         NewCount = OldCount &gt; 1 ? 1 : 0;
00513 
00514         j = InterlockedCompareExchange(&amp;KdpTimeSlipPending, NewCount, OldCount);
00515 
00516     } <span class="keywordflow">while</span> (j != OldCount);
00517 
00518     <span class="comment">//</span>
00519     <span class="comment">// If new count is non-zero, then process a time slip now</span>
00520     <span class="comment">//</span>
00521 
00522     <span class="keywordflow">if</span> (NewCount) {
00523         <a class="code" href="../../d5/d8/ex_8h.html#a261">ExQueueWorkItem</a>(&amp;KdpTimeSlipWorkItem, DelayedWorkQueue);
00524     }
00525 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a142" doxytag="4/kdp.h::KdpTimeSlipWork" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpTimeSlipWork           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PVOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Context</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00528">528</a> of file <a class="el" href="../../d9/d2/kdapi_8c-source.html">kdapi.c</a>.
<p>
References <a class="el" href="../../d5/d8/ex_8h.html#a312">ExAcquireTimeRefreshLock()</a>, <a class="el" href="../../d5/d8/ex_8h.html#a313">ExReleaseTimeRefreshLock()</a>, <a class="el" href="../../d5/d8/ex_8h.html#a314">ExUpdateSystemTimeFromCmos()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00290">KdpTimeSlipDpc</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00289">KdpTimeSlipEvent</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00288">KdpTimeSlipEventLock</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00292">KdpTimeSlipTimer</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02007">KeAcquireSpinLock</a>, <a class="el" href="../../d9/d5/verifier_8c.html#a119">KeReleaseSpinLock()</a>, <a class="el" href="../../d3/d7/eventobj_8c-source.html#l00343">KeSetEvent()</a>, and <a class="el" href="../../d4/d1/timerobj_8c-source.html#l00243">KeSetTimer()</a>.
<p>
<pre class="fragment"><div>00531 {
00532     KIRQL               OldIrql;
00533     LARGE_INTEGER       DueTime;
00534 
00535     <span class="comment">//</span>
00536     <span class="comment">// Update time from the real time clock</span>
00537     <span class="comment">//</span>
00538 
00539     <a class="code" href="../../d5/d8/ex_8h.html#a312">ExAcquireTimeRefreshLock</a>();
00540     <a class="code" href="../../d5/d8/ex_8h.html#a314">ExUpdateSystemTimeFromCmos</a> (FALSE, 0);
00541     <a class="code" href="../../d5/d8/ex_8h.html#a313">ExReleaseTimeRefreshLock</a>();
00542 
00543     <span class="comment">//</span>
00544     <span class="comment">// If there's a time service installed, signal it's time slip event</span>
00545     <span class="comment">//</span>
00546 
00547     <a class="code" href="../../d4/d9/ke_8h.html#a37">KeAcquireSpinLock</a>(&amp;KdpTimeSlipEventLock, &amp;OldIrql);
00548     <span class="keywordflow">if</span> (<a class="code" href="../../d8/d5/kddata_8c.html#a99">KdpTimeSlipEvent</a>) {
00549         <a class="code" href="../../d2/d8/eventobj_8c.html#a8">KeSetEvent</a> (KdpTimeSlipEvent, 0, FALSE);
00550     }
00551     <a class="code" href="../../d9/d5/verifier_8c.html#a119">KeReleaseSpinLock</a>(&amp;KdpTimeSlipEventLock, OldIrql);
00552 
00553     <span class="comment">//</span>
00554     <span class="comment">// Insert a forced delay between time slip operations</span>
00555     <span class="comment">//</span>
00556 
00557     DueTime.QuadPart = -1800000000;
00558     <a class="code" href="../../d3/d2/timerobj_8c.html#a6">KeSetTimer</a> (&amp;KdpTimeSlipTimer, DueTime, &amp;KdpTimeSlipDpc);
00559 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a118" doxytag="4/kdp.h::KdpTrap" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN KdpTrap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PKTRAP_FRAME&nbsp;</td>
          <td class="mdname" nowrap> <em>TrapFrame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PKEXCEPTION_FRAME&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionFrame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PEXCEPTION_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionRecord64</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>ContextRecord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d9/ntosdef_8h.html#a39">KPROCESSOR_MODE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PreviousMode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>SecondChance</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d7/alpha_2kdtrap_8c-source.html#l00028">28</a> of file <a class="el" href="../../d8/d7/alpha_2kdtrap_8c-source.html">alpha/kdtrap.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00617">BREAKIN_BREAKPOINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d2/kd_8h-source.html#l00133">KdDebuggerNotPresent</a>, <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l00277">KdEnterDebugger()</a>, <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l00355">KdExitDebugger()</a>, <a class="el" href="../../d6/d5/4_2kdinit_8c-source.html#l00414">KdLogDbgPrint()</a>, <a class="el" href="../../d9/d4/kddata_8c-source.html#l00261">KdpControlCPressed</a>, <a class="el" href="../../d1/d5/kddbgio_8c-source.html#l00030">KdpPrintString()</a>, <a class="el" href="../../d1/d5/kddbgio_8c-source.html#l00110">KdpPromptString()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02351">KdpReportExceptionStateChange()</a>, <a class="el" href="../../d9/d2/kdapi_8c-source.html#l02434">KdpReportLoadSymbolsStateChange()</a>, <a class="el" href="../../d4/d9/ke_8h.html#a374">KeFlushCurrentTb()</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00069">KeGetCurrentPrcb</a>, <a class="el" href="../../d9/d6/ppc_2ipi_8c.html#a0">KiRestoreProcessorControlState()</a>, <a class="el" href="../../d6/d0/xxmpipi_8c-source.html#l00124">KiSaveProcessorControlState()</a>, <a class="el" href="../../d0/d2/ldrp_8h-source.html#l00370">NtGlobalFlag</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00039                    :
00040 
00041     This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called whenever a exception <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> dispatched and <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> kernel
00042     debugger <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> active.
00043 
00044 Arguments:
00045 
00046     TrapFrame - Supplies a pointer to a trap frame that describes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00047         trap.
00048 
00049     ExceptionFrame - Supplies a pointer to a exception frame that describes
00050         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> trap.
00051 
00052     ExceptionRecord - Supplies a pointer to an exception record that
00053         describes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exception.
00054 
00055     ContextRecord - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> context at <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> time of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exception.
00056 
00057     PreviousMode - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> previous processor mode.
00058 
00059     SecondChance - Supplies a <span class="keywordtype">boolean</span> value that determines whether <span class="keyword">this</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
00060         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> second chance (TRUE) that the exception has been raised.
00061 
00062 Return Value:
00063 
00064     A value of TRUE is returned if the exception is handled. Otherwise a
00065     value of FALSE is returned.
00066 
00067 --*/
00068 
00069 {
00070 
00071     BOOLEAN Completion;
00072     BOOLEAN Enable;
00073     BOOLEAN UnloadSymbols = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00074     STRING Input;
00075     ULONGLONG OldFir;
00076     STRING Output;
00077     PKPRCB Prcb;
00078 
00079     <span class="comment">//</span>
00080     <span class="comment">// Enter debugger and synchronize processor execution.</span>
00081     <span class="comment">//</span>
00082 
00083     <span class="comment">//</span>
00084     <span class="comment">// If this is a breakpoint instruction, then check to determine if is</span>
00085     <span class="comment">// an internal command.</span>
00086     <span class="comment">//</span>
00087 
00088     <span class="keywordflow">if</span> ((ExceptionRecord-&gt;ExceptionCode == STATUS_BREAKPOINT) &amp;&amp;
00089         (ExceptionRecord-&gt;ExceptionInformation[0] &gt;= DEBUG_PRINT_BREAKPOINT)){
00090 
00091         <span class="comment">//</span>
00092         <span class="comment">// Switch on the breakpoint code.</span>
00093         <span class="comment">//</span>
00094 
00095         <span class="keywordflow">switch</span> (ExceptionRecord-&gt;ExceptionInformation[0]) {
00096 
00097             <span class="comment">//</span>
00098             <span class="comment">// Print a debug string.</span>
00099             <span class="comment">//</span>
00100             <span class="comment">// Arguments:</span>
00101             <span class="comment">//</span>
00102             <span class="comment">//   a0 - Supplies a pointer to an output string buffer.</span>
00103             <span class="comment">//   a1 - Supplies the length of the output string buffer.</span>
00104             <span class="comment">//</span>
00105 
00106         <span class="keywordflow">case</span> DEBUG_PRINT_BREAKPOINT:
00107             ContextRecord-&gt;Fir += 4;
00108             Output.Buffer = (PCHAR)ContextRecord-&gt;IntA0;
00109             Output.Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)ContextRecord-&gt;IntA1;
00110 
00111             <a class="code" href="../../d5/d6/4_2kdinit_8c.html#a7">KdLogDbgPrint</a>(&amp;Output);
00112 
00113             <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/kd_8h.html#a12">KdDebuggerNotPresent</a> == <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) {
00114 
00115                 Enable = <a class="code" href="../../d9/d3/4_2kdapi_8c.html#a17">KdEnterDebugger</a>(TrapFrame, ExceptionFrame);
00116                 <span class="keywordflow">if</span> (<a class="code" href="../../d1/d7/4_2kdp_8h.html#a102">KdpPrintString</a>(&amp;Output)) {
00117                     ContextRecord-&gt;IntV0 = (ULONG)STATUS_BREAKPOINT;
00118                 } <span class="keywordflow">else</span> {
00119                     ContextRecord-&gt;IntV0 = (ULONG)STATUS_SUCCESS;
00120                 }
00121                 <a class="code" href="../../d9/d3/4_2kdapi_8c.html#a18">KdExitDebugger</a>(Enable);
00122 
00123             } <span class="keywordflow">else</span> {
00124                 ContextRecord-&gt;IntV0 = (ULONG)STATUS_DEVICE_NOT_CONNECTED;
00125             }
00126 
00127             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00128 
00129 
00130             <span class="comment">//</span>
00131             <span class="comment">// Stop in the debugger</span>
00132             <span class="comment">//</span>
00133             <span class="comment">// As this is not a normal breakpoint we must increment the</span>
00134             <span class="comment">// context past the breakpoint instruction</span>
00135             <span class="comment">//</span>
00136 
00137         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7/halmips_8h.html#a454">BREAKIN_BREAKPOINT</a>:
00138             ContextRecord-&gt;Fir += 4;
00139             <span class="keywordflow">break</span>;
00140 
00141             <span class="comment">//</span>
00142             <span class="comment">// Print a debug prompt string, then input a string.</span>
00143             <span class="comment">//</span>
00144             <span class="comment">//   a0 - Supplies a pointer to an output string buffer.</span>
00145             <span class="comment">//   a1 - Supplies the length of the output string buffer..</span>
00146             <span class="comment">//   a2 - supplies a pointer to an input string buffer.</span>
00147             <span class="comment">//   a3 - Supplies the length of the input string bufffer.</span>
00148             <span class="comment">//</span>
00149 
00150         <span class="keywordflow">case</span> DEBUG_PROMPT_BREAKPOINT:
00151             ContextRecord-&gt;Fir += 4;
00152             Output.Buffer = (PCHAR)ContextRecord-&gt;IntA0;
00153             Output.Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)ContextRecord-&gt;IntA1;
00154             Input.Buffer = (PCHAR)ContextRecord-&gt;IntA2;
00155             Input.MaximumLength = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)ContextRecord-&gt;IntA3;
00156 
00157             <a class="code" href="../../d5/d6/4_2kdinit_8c.html#a7">KdLogDbgPrint</a>(&amp;Output);
00158 
00159             Enable = <a class="code" href="../../d9/d3/4_2kdapi_8c.html#a17">KdEnterDebugger</a>(TrapFrame, ExceptionFrame);
00160 
00161             <a class="code" href="../../d1/d7/4_2kdp_8h.html#a103">KdpPromptString</a>(&amp;Output, &amp;Input);
00162 
00163             ContextRecord-&gt;IntV0 = Input.Length;
00164 
00165             <a class="code" href="../../d9/d3/4_2kdapi_8c.html#a18">KdExitDebugger</a>(Enable);
00166             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00167 
00168             <span class="comment">//</span>
00169             <span class="comment">// Load the symbolic information for an image.</span>
00170             <span class="comment">//</span>
00171             <span class="comment">// Arguments:</span>
00172             <span class="comment">//</span>
00173             <span class="comment">//    a0 - Supplies a pointer to an output string descriptor.</span>
00174             <span class="comment">//    a1 - Supplies a the base address of the image.</span>
00175             <span class="comment">//    a2 - Supplies the current process id.</span>
00176             <span class="comment">//</span>
00177 
00178         <span class="keywordflow">case</span> DEBUG_UNLOAD_SYMBOLS_BREAKPOINT:
00179             UnloadSymbols = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00180 
00181             <span class="comment">//</span>
00182             <span class="comment">// Fall through</span>
00183             <span class="comment">//</span>
00184 
00185         <span class="keywordflow">case</span> DEBUG_LOAD_SYMBOLS_BREAKPOINT:
00186             Enable = <a class="code" href="../../d9/d3/4_2kdapi_8c.html#a17">KdEnterDebugger</a>(TrapFrame, ExceptionFrame);
00187             Prcb = <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a2">KeGetCurrentPrcb</a>();
00188             OldFir = ContextRecord-&gt;Fir;
00189             RtlCopyMemory(&amp;Prcb-&gt;ProcessorState.ContextFrame,
00190                           ContextRecord,
00191                           <span class="keyword">sizeof</span>(CONTEXT));
00192 
00193             <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/kd_8h.html#a12">KdDebuggerNotPresent</a> == <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) {
00194                 <a class="code" href="../../d1/d7/4_2kdp_8h.html#a121">KdpReportLoadSymbolsStateChange</a>((PSTRING)ContextRecord-&gt;IntA0,
00195                                                 (<a class="code" href="../../d6/d5/struct__KD__SYMBOLS__INFO.html">PKD_SYMBOLS_INFO</a>) ContextRecord-&gt;IntA1,
00196                                                 UnloadSymbols,
00197                                                 &amp;Prcb-&gt;ProcessorState.ContextFrame);
00198 
00199             }
00200 
00201             RtlCopyMemory(ContextRecord,
00202                           &amp;Prcb-&gt;ProcessorState.ContextFrame,
00203                           <span class="keyword">sizeof</span>(CONTEXT));
00204 
00205             <a class="code" href="../../d9/d3/4_2kdapi_8c.html#a18">KdExitDebugger</a>(Enable);
00206 
00207             <span class="comment">//</span>
00208             <span class="comment">// If the kernel debugger did not update the FIR, then increment</span>
00209             <span class="comment">// past the breakpoint instruction.</span>
00210             <span class="comment">//</span>
00211 
00212             <span class="keywordflow">if</span> (ContextRecord-&gt;Fir == OldFir) {
00213                 ContextRecord-&gt;Fir += 4;
00214             }
00215 
00216             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00217 
00218             <span class="comment">//</span>
00219             <span class="comment">// Unknown internal command.</span>
00220             <span class="comment">//</span>
00221 
00222         <span class="keywordflow">default</span>:
00223             <span class="keywordflow">break</span>;
00224         }
00225     }
00226 
00227     <span class="comment">//</span>
00228     <span class="comment">// Report state change to kernel debugger on host machine.</span>
00229     <span class="comment">//</span>
00230 
00231     Enable = <a class="code" href="../../d9/d3/4_2kdapi_8c.html#a17">KdEnterDebugger</a>(TrapFrame, ExceptionFrame);
00232     Prcb = <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a2">KeGetCurrentPrcb</a>();
00233 
00234     RtlCopyMemory(&amp;Prcb-&gt;ProcessorState.ContextFrame,
00235                     ContextRecord,
00236                     sizeof (CONTEXT));
00237 
00238     Completion = <a class="code" href="../../d1/d7/4_2kdp_8h.html#a120">KdpReportExceptionStateChange</a>(ExceptionRecord,
00239                                                &amp;Prcb-&gt;ProcessorState.ContextFrame,
00240                                                SecondChance);
00241 
00242     RtlCopyMemory(ContextRecord,
00243                   &amp;Prcb-&gt;ProcessorState.ContextFrame,
00244                   <span class="keyword">sizeof</span>(CONTEXT));
00245 
00246     <a class="code" href="../../d9/d3/4_2kdapi_8c.html#a18">KdExitDebugger</a>(Enable);
00247 
00248     <a class="code" href="../../d8/d5/kddata_8c.html#a90">KdpControlCPressed</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00249 
00250     <span class="comment">//</span>
00251     <span class="comment">// Always return TRUE if this is the first chance to handle the</span>
00252     <span class="comment">// exception.  Otherwise, return the completion status of the</span>
00253     <span class="comment">// state change reporting.</span>
00254     <span class="comment">//</span>
00255 
00256     <span class="keywordflow">if</span>( SecondChance ){
00257         <span class="keywordflow">return</span> Completion;
00258     } <span class="keywordflow">else</span> {
00259         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00260     }
00261 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a130" doxytag="4/kdp.h::KdpWriteBreakpoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpWriteBreakpoint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l01688">1688</a> of file <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html">4/kdapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00060">KdpAddBreakpoint()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>01696                    :
01697 
01698     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a write breakpoint state
01699     manipulation message.  Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to write a breakpoint
01700     and <span class="keywordflow">return</span> a handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> breakpoint.
01701 
01702 Arguments:
01703 
01704     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
01705 
01706     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
01707 
01708     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
01709 
01710 Return Value:
01711 
01712     None.
01713 
01714 --*/
01715 
01716 {
01717     PDBGKD_WRITE_BREAKPOINT64 a = &amp;m-&gt;u.WriteBreakPoint;
01718     STRING MessageHeader;
01719 
01720     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
01721     MessageHeader.Buffer = (PCHAR)m;
01722 
01723     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(AdditionalData-&gt;Length == 0);
01724 
01725     a-&gt;BreakPointHandle = <a class="code" href="../../d1/d7/4_2kdp_8h.html#a104">KdpAddBreakpoint</a>((PVOID)a-&gt;BreakPointAddress);
01726     <span class="keywordflow">if</span> (a-&gt;BreakPointHandle != 0) {
01727         m-&gt;ReturnStatus = STATUS_SUCCESS;
01728     } <span class="keywordflow">else</span> {
01729         m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
01730     }
01731     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
01732                   PACKET_TYPE_KD_STATE_MANIPULATE,
01733                   &amp;MessageHeader,
01734                   NULL
01735                   );
01736     UNREFERENCED_PARAMETER(Context);
01737 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a133" doxytag="4/kdp.h::KdpWriteControlSpace" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpWriteControlSpace           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html#l00457">457</a> of file <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html">4/alpha/kdcpuapi.c</a>.
<p>
References <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, and <a class="el" href="../../d5/d8/ke_8h-source.html#l02782">KiProcessorBlock</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>00465                    :
00466 
00467     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a write <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a58">control</a> space state
00468     manipulation message.  Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to write implementation
00469     specific system data.
00470 
00471 Arguments:
00472 
00473     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
00474 
00475     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
00476 
00477     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
00478 
00479 Return Value:
00480 
00481     None.
00482 
00483 --*/
00484 
00485 {
00486     PDBGKD_WRITE_MEMORY64 a = &amp;m-&gt;u.WriteMemory;
00487     ULONG Length;
00488     STRING MessageHeader;
00489 
00490     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
00491     MessageHeader.Buffer = (PCHAR)m;
00492 
00493     AdditionalData-&gt;Length = 0;
00494     m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
00495     a-&gt;ActualBytesWritten = 0;
00496 
00497     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
00498         PACKET_TYPE_KD_STATE_MANIPULATE,
00499         &amp;MessageHeader,
00500         AdditionalData
00501         );
00502 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a136" doxytag="4/kdp.h::KdpWriteIoSpace" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpWriteIoSpace           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html#l00785">785</a> of file <a class="el" href="../../d6/d4/4_2alpha_2kdcpuapi_8c-source.html">4/alpha/kdcpuapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d3/d6/hal_8h-source.html#l01170">BusNumber</a>, <a class="el" href="../../d2/d7/hal_8h.html#a184">HalTranslateBusAddress()</a>, <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00050">InterfaceType</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d3/d5/ia64_2debugsup_8c-source.html#l00174">MmDbgReleaseAddress()</a>, <a class="el" href="../../d5/d5/ppc_2debugsup_8c-source.html#l00078">MmDbgWriteCheck()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>00793                    :
00794 
00795     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a read io space state
00796     manipulation message.  Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to read system io
00797     locations.
00798 
00799 Arguments:
00800 
00801     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
00802 
00803     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
00804 
00805     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
00806 
00807 Return Value:
00808 
00809     None.
00810 
00811 --*/
00812 
00813 {
00814     PDBGKD_READ_WRITE_IO64 a = &amp;m-&gt;u.ReadWriteIo;
00815     STRING MessageHeader;
00816     INTERFACE_TYPE <a class="code" href="../../d4/d0/cmconfig_8c.html#a5">InterfaceType</a>;
00817     ULONG <a class="code" href="../../d2/d7/hal_8h.html#a75">BusNumber</a>;
00818     PHYSICAL_ADDRESS IoAddress;
00819     PHYSICAL_ADDRESS TranslatedAddress;
00820     ULONG AddressSpace;
00821     ULONG DataSize;
00822     ULONG Value;
00823 
00824     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
00825     MessageHeader.Buffer = (PCHAR)m;
00826 
00827     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(AdditionalData-&gt;Length == 0);
00828 
00829     m-&gt;ReturnStatus = STATUS_SUCCESS;
00830 
00831     <span class="comment">//</span>
00832     <span class="comment">// Capture the input parameters and use the default values for those</span>
00833     <span class="comment">// parameters not specified in the Api.</span>
00834     <span class="comment">//</span>
00835 
00836     <a class="code" href="../../d4/d0/cmconfig_8c.html#a5">InterfaceType</a> = Isa;
00837     <a class="code" href="../../d2/d7/hal_8h.html#a75">BusNumber</a> = 0;
00838     AddressSpace = 1;
00839     IoAddress.QuadPart = (ULONG_PTR)a-&gt;IoAddress;
00840     DataSize = a-&gt;DataSize;
00841     Value = a-&gt;DataValue;
00842 
00843     <span class="comment">//</span>
00844     <span class="comment">// Translate the bus address to the physical system address</span>
00845     <span class="comment">// or QVA.</span>
00846     <span class="comment">//</span>
00847 
00848     <span class="keywordflow">if</span>( !<a class="code" href="../../d2/d7/hal_8h.html#a184">HalTranslateBusAddress</a>( InterfaceType,
00849                                  BusNumber,
00850                                  IoAddress,
00851                                  &amp;AddressSpace,
00852                                  &amp;TranslatedAddress ) ){
00853         m-&gt;ReturnStatus = STATUS_INVALID_PARAMETER;
00854         <span class="keywordflow">goto</span> SendWriteIoSpaceResponse;
00855     }
00856 
00857     <span class="comment">//</span>
00858     <span class="comment">// N.B. - for the moment we will only support QVAs ie. when AddressSpace</span>
00859     <span class="comment">//        is one.  It may be in later systems that we will have to</span>
00860     <span class="comment">//        check the address space, map it, perform the virtual read</span>
00861     <span class="comment">//        unmap, and then return the data - only we will have to be</span>
00862     <span class="comment">//        careful about what Irql we are to make sure the memory mgmt</span>
00863     <span class="comment">//        stuff will all work</span>
00864     <span class="comment">//</span>
00865 
00866     <span class="keywordflow">if</span>( !AddressSpace ){
00867         m-&gt;ReturnStatus = STATUS_INVALID_PARAMETER;
00868         <span class="keywordflow">goto</span> SendWriteIoSpaceResponse;
00869     }
00870 
00871     <span class="comment">//</span>
00872     <span class="comment">// Do the IO space read using the appropriate HAL routines based upon</span>
00873     <span class="comment">// the default address space (io) and the data size requested.</span>
00874     <span class="comment">//</span>
00875 
00876     <span class="keywordflow">switch</span>( DataSize ){
00877 
00878     <span class="keywordflow">case</span> 1:
00879         WRITE_PORT_UCHAR( (PUCHAR)TranslatedAddress.QuadPart, (UCHAR)Value );
00880         <span class="keywordflow">break</span>;
00881 
00882     <span class="keywordflow">case</span> 2:
00883         WRITE_PORT_USHORT( (PUSHORT)TranslatedAddress.QuadPart, (USHORT)Value );
00884         <span class="keywordflow">break</span>;
00885 
00886     <span class="keywordflow">case</span> 4:
00887         WRITE_PORT_ULONG( (PULONG)TranslatedAddress.QuadPart, Value );
00888         <span class="keywordflow">break</span>;
00889 
00890     <span class="keywordflow">default</span>:
00891         m-&gt;ReturnStatus = STATUS_INVALID_PARAMETER;
00892     }
00893 
00894 
00895 SendWriteIoSpaceResponse:
00896 
00897     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
00898         PACKET_TYPE_KD_STATE_MANIPULATE,
00899         &amp;MessageHeader,
00900         NULL
00901         );
00902 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a137" doxytag="4/kdp.h::KdpWriteMachineSpecificRegister" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpWriteMachineSpecificRegister           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d4/4_2i386_2kdcpuapi_8c-source.html#l01156">1156</a> of file <a class="el" href="../../d7/d4/4_2i386_2kdcpuapi_8c-source.html">4/i386/kdcpuapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d3/i386_8h.html#a53">WRMSR()</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>01164                    :
01165 
01166     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a write of a MSR
01167     manipulation message.  Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to write to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> MSR
01168 
01169 Arguments:
01170 
01171     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
01172 
01173     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
01174 
01175     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
01176 
01177 Return Value:
01178 
01179     None.
01180 
01181 --*/
01182 
01183 {
01184     PDBGKD_READ_WRITE_MSR a = &amp;m-&gt;u.ReadWriteMsr;
01185     STRING MessageHeader;
01186     LARGE_INTEGER l;
01187 
01188     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
01189     MessageHeader.Buffer = (PCHAR)m;
01190 
01191     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(AdditionalData-&gt;Length == 0);
01192 
01193     m-&gt;ReturnStatus = STATUS_SUCCESS;
01194 
01195     l.HighPart = a-&gt;DataValueHigh;
01196     l.LowPart = a-&gt;DataValueLow;
01197 
01198     <span class="keywordflow">try</span> {
01199         <a class="code" href="../../d5/d3/i386_8h.html#a53">WRMSR</a> (a-&gt;Msr, l.QuadPart);
01200     } except (EXCEPTION_EXECUTE_HANDLER) {
01201         m-&gt;ReturnStatus = STATUS_NO_SUCH_DEVICE;
01202     }
01203 
01204     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
01205         PACKET_TYPE_KD_STATE_MANIPULATE,
01206         &amp;MessageHeader,
01207         NULL
01208         );
01209     UNREFERENCED_PARAMETER(Context);
01210 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a126" doxytag="4/kdp.h::KdpWritePhysicalMemory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpWritePhysicalMemory           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l02779">2779</a> of file <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html">4/kdapi.c</a>.
<p>
References <a class="el" href="../../d3/d0/mm_8h-source.html#l00166">BYTE_OFFSET</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d3/d5/ia64_2debugsup_8c-source.html#l00236">MmDbgTranslatePhysicalAddress64()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00599">PAGE_SIZE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>02787                    :
02788 
02789     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response to a write physical memory
02790     state manipulation message. Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to write physical memory
02791     and <span class="keywordflow">return</span>.
02792 
02793 Arguments:
02794 
02795     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
02796 
02797     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
02798 
02799     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
02800 
02801 Return Value:
02802 
02803     None.
02804 
02805 --*/
02806 
02807 {
02808     PDBGKD_WRITE_MEMORY64 a = &amp;m-&gt;u.WriteMemory;
02809     STRING MessageHeader;
02810     ULONG Length;
02811     PVOID64 VirtualAddress;
02812     PHYSICAL_ADDRESS Destination;
02813     UCHAR UNALIGNED *Source;
02814     ULONG NumberBytes;
02815     ULONG BytesLeft;
02816 
02817     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
02818     MessageHeader.Buffer = (PCHAR)m;
02819 
02820 
02821     Length = a-&gt;TransferCount;
02822 
02823     <span class="comment">//</span>
02824     <span class="comment">// The following code depends on the existence of the</span>
02825     <span class="comment">// MmDbgTranslatePhysicalAddress64() routine.  This has only been</span>
02826     <span class="comment">// implemented for Alpha.</span>
02827     <span class="comment">//</span>
02828 
02829     <span class="comment">//</span>
02830     <span class="comment">// Since the MmDbgTranslatePhysicalAddress64 only maps in one physical</span>
02831     <span class="comment">// page at a time, we need to break the memory move up into smaller</span>
02832     <span class="comment">// moves which don't cross page boundaries.  It is important that we</span>
02833     <span class="comment">// access physical memory on naturally-aligned boundaries and with the</span>
02834     <span class="comment">// largest size possible.  (We could be accessing memory-mapped I/O</span>
02835     <span class="comment">// space).  These rules allow kdexts to write physical memory reliably.</span>
02836     <span class="comment">//</span>
02837 
02838     Source = AdditionalData-&gt;Buffer;
02839     Destination.QuadPart = a-&gt;TargetBaseAddress;
02840     <span class="keywordflow">while</span> (Length &gt; 0) {
02841         VirtualAddress = <a class="code" href="../../d2/d6/ia64_2debugsup_8c.html#a3">MmDbgTranslatePhysicalAddress64</a>(Destination);
02842         <span class="keywordflow">if</span> (VirtualAddress == NULL64) {
02843             <span class="keywordflow">break</span>;
02844         }
02845         NumberBytes = <a class="code" href="../../d6/d7/halmips_8h.html#a446">PAGE_SIZE</a> - <a class="code" href="../../d2/d1/mm_8h.html#a6">BYTE_OFFSET</a>(Destination.LowPart);
02846         <span class="keywordflow">if</span> (NumberBytes &gt; Length) {
02847             NumberBytes = Length;
02848         }
02849 <span class="preprocessor">#ifdef _ALPHA_</span>
02850 <span class="preprocessor"></span>        BytesLeft = NumberBytes;
02851         <span class="keywordflow">while</span> (BytesLeft &gt; 0) {
02852             <span class="keywordflow">if</span> (((ULONG64)VirtualAddress &amp; 7) == 0 &amp;&amp; BytesLeft &gt; 7) {
02853                 *((ULONGLONG * POINTER_64)VirtualAddress)++ =
02854                     *((ULONGLONG UNALIGNED *)Source)++;
02855                 BytesLeft -= 8;
02856             } <span class="keywordflow">else</span> {
02857                 <span class="keywordflow">if</span> (((ULONG64)VirtualAddress &amp; 3) == 0 &amp;&amp; BytesLeft &gt; 3) {
02858                     *((ULONG * POINTER_64)VirtualAddress)++ =
02859                         *((ULONG UNALIGNED *)Source)++;
02860                     BytesLeft -= 4;
02861                 } <span class="keywordflow">else</span> {
02862                     <span class="keywordflow">if</span> (((ULONG64)VirtualAddress &amp; 1) == 0 &amp;&amp; BytesLeft &gt; 1) {
02863                         *((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> * POINTER_64)VirtualAddress)++ =
02864                             *((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> UNALIGNED *)Source)++;
02865                         BytesLeft -= 2;
02866                     } <span class="keywordflow">else</span> {
02867                         *((UCHAR * POINTER_64)VirtualAddress)++ =
02868                             *(UCHAR UNALIGNED *)Source++;
02869                         BytesLeft -= 1;
02870                     }
02871                 }
02872             }
02873 
02874             __MB();
02875         }
02876 <span class="preprocessor">#else</span>
02877 <span class="preprocessor"></span>        <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(VirtualAddress, Source, NumberBytes);
02878         Source += NumberBytes;
02879 
02880 <span class="preprocessor">#endif</span>
02881 <span class="preprocessor"></span>        Destination.QuadPart += NumberBytes;
02882         Length -= NumberBytes;
02883         a-&gt;ActualBytesWritten += NumberBytes;
02884     }
02885 
02886     <span class="keywordflow">if</span> (Length == 0) {
02887         m-&gt;ReturnStatus = STATUS_SUCCESS;
02888     } <span class="keywordflow">else</span> {
02889         m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
02890     }
02891 
02892     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
02893                   PACKET_TYPE_KD_STATE_MANIPULATE,
02894                   &amp;MessageHeader,
02895                   NULL
02896                   );
02897     UNREFERENCED_PARAMETER(Context);
02898 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a124" doxytag="4/kdp.h::KdpWriteVirtualMemory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpWriteVirtualMemory           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l01345">1345</a> of file <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html">4/kdapi.c</a>.
<p>
References <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d3/d5/ia64_2debugsup_8c-source.html#l00174">MmDbgReleaseAddress()</a>, <a class="el" href="../../d5/d5/ppc_2debugsup_8c-source.html#l00078">MmDbgWriteCheck()</a>, <a class="el" href="../../d5/d5/ppc_2debugsup_8c-source.html#l00194">MmDbgWriteCheck64()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>.
<p>
<pre class="fragment"><div>01353                    :
01354 
01355     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a write <span class="keyword">virtual</span> memory 32-bit
01356     state manipulation message. Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to write <span class="keyword">virtual</span> memory
01357     and <span class="keywordflow">return</span>.
01358 
01359 Arguments:
01360 
01361     m - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
01362 
01363     AdditionalData - Supplies a pointer to a descriptor <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data to write.
01364 
01365     Context - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
01366 
01367 Return Value:
01368 
01369     None.
01370 
01371 --*/
01372 
01373 {
01374 
01375     ULONG Length;
01376     STRING MessageHeader;
01377     HARDWARE_PTE Opaque;
01378 
01379 <span class="preprocessor">#if defined(_ALPHA_) &amp;&amp; !defined(_AXP64_)</span>
01380 <span class="preprocessor"></span>    UCHAR * POINTER_64 Address;
01381     UCHAR * POINTER_64 Destination;
01382     PUCHAR Address32;
01383     PUCHAR Source;
01384     PUCHAR Destination32;
01385 
01386 
01387     <span class="comment">//</span>
01388     <span class="comment">// Move the data to the destination buffer.</span>
01389     <span class="comment">//</span>
01390 
01391     Length = AdditionalData-&gt;Length;
01392 
01393     Destination = (UCHAR * POINTER_64)m-&gt;u.WriteMemory.TargetBaseAddress;
01394     Destination32 = (PUCHAR)m-&gt;u.WriteMemory.TargetBaseAddress;
01395     Source = AdditionalData-&gt;Buffer;
01396     <span class="keywordflow">while</span> (Length &gt; 0) {
01397         Address=Destination;
01398         Address32 = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01399         <span class="keywordflow">if</span> ((LONGLONG)Destination != (LONGLONG)((LONG)Destination)) {
01400             <span class="keywordflow">if</span> ((Address = <a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a3">MmDbgWriteCheck64</a>(Destination)) == NULL64) {
01401                 <span class="keywordflow">break</span>;
01402             }
01403         } <span class="keywordflow">else</span> {
01404             <span class="keywordflow">if</span> ((Address32 = <a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a1">MmDbgWriteCheck</a>(Destination32, &amp;Opaque)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01405                 <span class="keywordflow">break</span>;
01406             }
01407         }
01408 
01409         <span class="keywordflow">if</span> (Address32 != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01410             *Address32 = *Source++;
01411             <a class="code" href="../../d2/d6/ia64_2debugsup_8c.html#a2">MmDbgReleaseAddress</a>(Address32, &amp;Opaque);
01412         }
01413         <span class="keywordflow">else</span> {
01414             *Address = *Source++;
01415         }
01416         Destination   += 1;
01417         Destination32 += 1;
01418         Length -= 1;
01419     }
01420 
01421     <span class="comment">//</span>
01422     <span class="comment">// If all the data is written, then return a success status. Otherwise,</span>
01423     <span class="comment">// return an unsuccessful status.</span>
01424     <span class="comment">//</span>
01425 
01426     m-&gt;ReturnStatus = STATUS_SUCCESS;
01427     <span class="keywordflow">if</span> (Length != 0) {
01428         m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
01429     }
01430 
01431     <span class="comment">//</span>
01432     <span class="comment">// Set the actual number of bytes written, initialize the message header,</span>
01433     <span class="comment">// and send the reply packet to the host debugger.</span>
01434     <span class="comment">//</span>
01435 
01436     m-&gt;u.WriteMemory.ActualBytesWritten = AdditionalData-&gt;Length - Length;
01437     MessageHeader.Length = <span class="keyword">sizeof</span>(DBGKD_MANIPULATE_STATE64);
01438     MessageHeader.Buffer = (PCHAR)m;
01439     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(PACKET_TYPE_KD_STATE_MANIPULATE,
01440                   &amp;MessageHeader,
01441                   NULL);
01442 
01443     <span class="keywordflow">return</span>;
01444 <span class="preprocessor">#else</span>
01445 <span class="preprocessor"></span>
01446     <span class="comment">//</span>
01447     <span class="comment">// Move the data to the destination buffer.</span>
01448     <span class="comment">//</span>
01449 
01450     Length = <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>((PVOID)m-&gt;u.WriteMemory.TargetBaseAddress,
01451                            AdditionalData-&gt;Buffer,
01452                            AdditionalData-&gt;Length);
01453 
01454     <span class="comment">//</span>
01455     <span class="comment">// If all the data is written, then return a success status. Otherwise,</span>
01456     <span class="comment">// return an unsuccessful status.</span>
01457     <span class="comment">//</span>
01458 
01459     m-&gt;ReturnStatus = STATUS_SUCCESS;
01460     <span class="keywordflow">if</span> (Length != AdditionalData-&gt;Length) {
01461         m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
01462     }
01463 
01464     <span class="comment">//</span>
01465     <span class="comment">// Set the actual number of bytes written, initialize the message header,</span>
01466     <span class="comment">// and send the reply packet to the host debugger.</span>
01467     <span class="comment">//</span>
01468 
01469     m-&gt;u.WriteMemory.ActualBytesWritten = Length;
01470     MessageHeader.Length = <span class="keyword">sizeof</span>(DBGKD_MANIPULATE_STATE64);
01471     MessageHeader.Buffer = (PCHAR)m;
01472     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(PACKET_TYPE_KD_STATE_MANIPULATE,
01473                   &amp;MessageHeader,
01474                   NULL);
01475 
01476     <span class="keywordflow">return</span>;
01477 <span class="preprocessor">#endif</span>
01478 <span class="preprocessor"></span>}

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a107" doxytag="4/kdp.h::KdQuerySpecialCalls" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS KdQuerySpecialCalls           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>RequiredLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d3/d2/dbgctrl_8c-source.html#l00036">NtSystemDebugControl()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a108" doxytag="4/kdp.h::KdSetSpecialCall" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdSetSpecialCall           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE64&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>ContextRecord</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d2/kdapi_8c-source.html#l00847">KdpSendWaitContinue()</a>, and <a class="el" href="../../d3/d2/dbgctrl_8c-source.html#l00036">NtSystemDebugControl()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a143" doxytag="4/kdp.h::RtlpBreakWithStatusInstruction" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID RtlpBreakWithStatusInstruction           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a40" doxytag="4/kdp.h::BreakpointsSuspended" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN <a class="el" href="../../d1/d7/4_2kdp_8h.html#a40">BreakpointsSuspended</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00592">592</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a70" doxytag="4/kdp.h::CallLevelChange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a70">CallLevelChange</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00640">640</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a50" doxytag="4/kdp.h::InitialSP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a50">InitialSP</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00619">619</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a72" doxytag="4/kdp.h::InstrCountInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN <a class="el" href="../../d1/d7/4_2kdp_8h.html#a72">InstrCountInternal</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00642">642</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a68" doxytag="4/kdp.h::InstructionsTraced" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a68">InstructionsTraced</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00638">638</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a61" doxytag="4/kdp.h::IntBPsSkipping" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a61">IntBPsSkipping</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00631">631</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a53" doxytag="4/kdp.h::InternalBreakpointCheckDpc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d6/struct__KDPC.html">KDPC</a> <a class="el" href="../../d1/d7/4_2kdp_8h.html#a53">InternalBreakpointCheckDpc</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00622">622</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a52" doxytag="4/kdp.h::InternalBreakpointTimer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d8/struct__KTIMER.html">KTIMER</a> <a class="el" href="../../d1/d7/4_2kdp_8h.html#a52">InternalBreakpointTimer</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00621">621</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a83" doxytag="4/kdp.h::KdDebuggerDataBlock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> KDDEBUGGER_DATA64 <a class="el" href="../../d9/d1/bugcheck_8c.html#a2">KdDebuggerDataBlock</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00662">662</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a81" doxytag="4/kdp.h::KdDebugParameters" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d2/struct__DEBUG__PARAMETERS.html">DEBUG_PARAMETERS</a> <a class="el" href="../../d1/d7/4_2kdp_8h.html#a81">KdDebugParameters</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00659">659</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a91" doxytag="4/kdp.h::KdEnteredDebugger" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a91">KdEnteredDebugger</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00670">670</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="4/kdp.h::KdNumberOfSpecialCalls" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a49">KdNumberOfSpecialCalls</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00618">618</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="4/kdp.h::KdpBreakpointInstruction" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> KDP_BREAKPOINT_TYPE <a class="el" href="../../d1/d7/4_2kdp_8h.html#a30">KdpBreakpointInstruction</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00580">580</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="4/kdp.h::KdpBreakpointTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d5/struct__BREAKPOINT__ENTRY.html">BREAKPOINT_ENTRY</a> <a class="el" href="../../d1/d7/4_2kdp_8h.html#a25">KdpBreakpointTable</a>[BREAKPOINT_TABLE_SIZE]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00575">575</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="4/kdp.h::KdpControlCPending" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN <a class="el" href="../../d1/d7/4_2kdp_8h.html#a26">KdpControlCPending</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00576">576</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a73" doxytag="4/kdp.h::KdpControlCPressed" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN <a class="el" href="../../d1/d7/4_2kdp_8h.html#a73">KdpControlCPressed</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00645">645</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="4/kdp.h::KdpCurrentSymbolEnd" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a46">KdpCurrentSymbolEnd</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00615">615</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="4/kdp.h::KdpCurrentSymbolStart" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a45">KdpCurrentSymbolStart</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00614">614</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a82" doxytag="4/kdp.h::KdpDataSpinLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> KSPIN_LOCK <a class="el" href="../../d1/d7/4_2kdp_8h.html#a82">KdpDataSpinLock</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00660">660</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="4/kdp.h::KdpDebuggerDataListHead" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LIST_ENTRY <a class="el" href="../../d1/d7/4_2kdp_8h.html#a42">KdpDebuggerDataListHead</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00594">594</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="4/kdp.h::KdpDebuggerLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> KSPIN_LOCK <a class="el" href="../../d1/d7/4_2kdp_8h.html#a27">KdpDebuggerLock</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00577">577</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a90" doxytag="4/kdp.h::KdpDebuggerStructuresInitialized" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN <a class="el" href="../../d1/d7/4_2kdp_8h.html#a90">KdpDebuggerStructuresInitialized</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00669">669</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a76" doxytag="4/kdp.h::KdpDefaultRetries" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a76">KdpDefaultRetries</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00648">648</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="4/kdp.h::KdPerformanceCounterRate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LARGE_INTEGER <a class="el" href="../../d1/d7/4_2kdp_8h.html#a36">KdPerformanceCounterRate</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00587">587</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="4/kdp.h::KdpInternalBPs" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d7/structDBGKD__INTERNAL__BREAKPOINT.html">DBGKD_INTERNAL_BREAKPOINT</a> <a class="el" href="../../d1/d7/4_2kdp_8h.html#a44">KdpInternalBPs</a>[DBGKD_MAX_INTERNAL_BREAKPOINTS]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00612">612</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="4/kdp.h::KdpMessageBuffer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UCHAR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a31">KdpMessageBuffer</a>[KDP_MESSAGE_BUFFER_SIZE]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00581">581</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="4/kdp.h::KdpNextCallLevelChange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a47">KdpNextCallLevelChange</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00616">616</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="4/kdp.h::KdpNextPacketIdToSend" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a34">KdpNextPacketIdToSend</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00584">584</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="4/kdp.h::KdpNtosImageBase" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PVOID <a class="el" href="../../d1/d7/4_2kdp_8h.html#a41">KdpNtosImageBase</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00593">593</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a75" doxytag="4/kdp.h::KdpNumberRetries" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a75">KdpNumberRetries</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00647">647</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a51" doxytag="4/kdp.h::KdpNumInternalBreakpoints" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a51">KdpNumInternalBreakpoints</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00620">620</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="4/kdp.h::KdpOweBreakpoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a33">KdpOweBreakpoint</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00583">583</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="4/kdp.h::KdpPacketIdExpected" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a35">KdpPacketIdExpected</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00585">585</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="4/kdp.h::KdpPathBuffer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UCHAR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a32">KdpPathBuffer</a>[KDP_MESSAGE_BUFFER_SIZE]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00582">582</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a54" doxytag="4/kdp.h::KdpPortLocked" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN <a class="el" href="../../d1/d7/4_2kdp_8h.html#a54">KdpPortLocked</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00623">623</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a80" doxytag="4/kdp.h::KdpPrintSpinLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> KSPIN_LOCK <a class="el" href="../../d1/d7/4_2kdp_8h.html#a80">KdpPrintSpinLock</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00658">658</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a74" doxytag="4/kdp.h::KdpRetryCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a74">KdpRetryCount</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00646">646</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a77" doxytag="4/kdp.h::KdPrintCircularBuffer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UCHAR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a77">KdPrintCircularBuffer</a>[KDPRINTBUFFERSIZE]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00655">655</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a79" doxytag="4/kdp.h::KdPrintRolloverCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a79">KdPrintRolloverCount</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00657">657</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a78" doxytag="4/kdp.h::KdPrintWritePointer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PUCHAR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a78">KdPrintWritePointer</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00656">656</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a99" doxytag="4/kdp.h::KdpSearchAddressRangeEnd" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a99">KdpSearchAddressRangeEnd</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00712">712</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03909">KdpSearchPhysicalPageRange()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a98" doxytag="4/kdp.h::KdpSearchAddressRangeStart" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a98">KdpSearchAddressRangeStart</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00711">711</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03909">KdpSearchPhysicalPageRange()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a100" doxytag="4/kdp.h::KdpSearchCheckPoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a100">KdpSearchCheckPoint</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00721">721</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a97" doxytag="4/kdp.h::KdpSearchEndPageFrame" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PFN_NUMBER <a class="el" href="../../d1/d7/4_2kdp_8h.html#a97">KdpSearchEndPageFrame</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00709">709</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03909">KdpSearchPhysicalPageRange()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a95" doxytag="4/kdp.h::KdpSearchInProgress" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LOGICAL <a class="el" href="../../d1/d7/4_2kdp_8h.html#a95">KdpSearchInProgress</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00701">701</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03869">KdpSearchPhysicalMemoryRequested()</a>, and <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03909">KdpSearchPhysicalPageRange()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a94" doxytag="4/kdp.h::KdpSearchPageHitIndex" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a94">KdpSearchPageHitIndex</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00692">692</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03787">KdpSearchPhysicalPage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a93" doxytag="4/kdp.h::KdpSearchPageHitOffsets" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a93">KdpSearchPageHitOffsets</a>[SEARCH_PAGE_HIT_DATABASE_SIZE]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00690">690</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03787">KdpSearchPhysicalPage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a92" doxytag="4/kdp.h::KdpSearchPageHits" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PFN_NUMBER <a class="el" href="../../d1/d7/4_2kdp_8h.html#a92">KdpSearchPageHits</a>[SEARCH_PAGE_HIT_DATABASE_SIZE]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00689">689</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03787">KdpSearchPhysicalPage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a96" doxytag="4/kdp.h::KdpSearchStartPageFrame" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PFN_NUMBER <a class="el" href="../../d1/d7/4_2kdp_8h.html#a96">KdpSearchStartPageFrame</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00708">708</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d3/4_2kdapi_8c-source.html#l03909">KdpSearchPhysicalPageRange()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a55" doxytag="4/kdp.h::KdpTimeEntered" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LARGE_INTEGER <a class="el" href="../../d1/d7/4_2kdp_8h.html#a55">KdpTimeEntered</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00624">624</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a84" doxytag="4/kdp.h::KdpTimeSlipDpc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d6/struct__KDPC.html">KDPC</a> <a class="el" href="../../d1/d7/4_2kdp_8h.html#a84">KdpTimeSlipDpc</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00663">663</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a89" doxytag="4/kdp.h::KdpTimeSlipEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PVOID <a class="el" href="../../d1/d7/4_2kdp_8h.html#a89">KdpTimeSlipEvent</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00668">668</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a88" doxytag="4/kdp.h::KdpTimeSlipEventLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> KSPIN_LOCK <a class="el" href="../../d1/d7/4_2kdp_8h.html#a88">KdpTimeSlipEventLock</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00667">667</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a87" doxytag="4/kdp.h::KdpTimeSlipPending" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a87">KdpTimeSlipPending</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00666">666</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a86" doxytag="4/kdp.h::KdpTimeSlipTimer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d8/struct__KTIMER.html">KTIMER</a> <a class="el" href="../../d1/d7/4_2kdp_8h.html#a86">KdpTimeSlipTimer</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00665">665</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a85" doxytag="4/kdp.h::KdpTimeSlipWorkItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d7/d9/struct__WORK__QUEUE__ITEM.html">WORK_QUEUE_ITEM</a> <a class="el" href="../../d1/d7/4_2kdp_8h.html#a85">KdpTimeSlipWorkItem</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00664">664</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="4/kdp.h::KdSpecialCalls" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a48">KdSpecialCalls</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00617">617</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="4/kdp.h::KdTimerDifference" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LARGE_INTEGER <a class="el" href="../../d1/d7/4_2kdp_8h.html#a39">KdTimerDifference</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00590">590</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="4/kdp.h::KdTimerStart" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LARGE_INTEGER <a class="el" href="../../d1/d7/4_2kdp_8h.html#a37">KdTimerStart</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00588">588</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="4/kdp.h::KdTimerStop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LARGE_INTEGER <a class="el" href="../../d1/d7/4_2kdp_8h.html#a38">KdTimerStop</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00589">589</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="4/kdp.h::KiDebugRoutine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d9/ke_8h.html#a64">PKDEBUG_ROUTINE</a> <a class="el" href="../../d0/d0/ki_8h.html#a41">KiDebugRoutine</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00578">578</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="4/kdp.h::KiDebugSwitchRoutine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d9/ke_8h.html#a65">PKDEBUG_SWITCH_ROUTINE</a> <a class="el" href="../../d0/d0/ki_8h.html#a42">KiDebugSwitchRoutine</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00579">579</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a59" doxytag="4/kdp.h::NextTraceDataSym" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UCHAR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a59">NextTraceDataSym</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00629">629</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a60" doxytag="4/kdp.h::NumTraceDataSyms" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UCHAR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a60">NumTraceDataSyms</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00630">630</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a71" doxytag="4/kdp.h::oldpc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG_PTR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a71">oldpc</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00641">641</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a69" doxytag="4/kdp.h::SymbolRecorded" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN <a class="el" href="../../d1/d7/4_2kdp_8h.html#a69">SymbolRecorded</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00639">639</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a56" doxytag="4/kdp.h::TraceDataBuffer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DBGKD_TRACE_DATA <a class="el" href="../../d1/d7/4_2kdp_8h.html#a56">TraceDataBuffer</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00626">626</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a57" doxytag="4/kdp.h::TraceDataBufferPosition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a57">TraceDataBufferPosition</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00627">627</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a58" doxytag="4/kdp.h::TraceDataSyms" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d9/d1/struct__TRACE__DATA__SYM.html">TRACE_DATA_SYM</a> <a class="el" href="../../d1/d7/4_2kdp_8h.html#a58">TraceDataSyms</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00628">628</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a62" doxytag="4/kdp.h::WatchStepOver" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN <a class="el" href="../../d1/d7/4_2kdp_8h.html#a62">WatchStepOver</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00632">632</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a66" doxytag="4/kdp.h::WatchStepOverBreakAddr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a66">WatchStepOverBreakAddr</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00636">636</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a65" doxytag="4/kdp.h::WatchStepOverHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d1/d7/4_2kdp_8h.html#a65">WatchStepOverHandle</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00635">635</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a67" doxytag="4/kdp.h::WatchStepOverSuspended" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN <a class="el" href="../../d1/d7/4_2kdp_8h.html#a67">WatchStepOverSuspended</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00637">637</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a64" doxytag="4/kdp.h::WSOEsp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR <a class="el" href="../../d1/d7/4_2kdp_8h.html#a64">WSOEsp</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00634">634</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a63" doxytag="4/kdp.h::WSOThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PVOID <a class="el" href="../../d1/d7/4_2kdp_8h.html#a63">WSOThread</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d6/4_2kdp_8h-source.html#l00633">633</a> of file <a class="el" href="../../d2/d6/4_2kdp_8h-source.html">4/kdp.h</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:26 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: fesupprt.c Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>fesupprt.c</h1><a href="../../d0/d3/fesupprt_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">// ******************************</span>
00002 <span class="comment">// Intel Confidential</span>
00003 <span class="comment">// ******************************</span>
00004 
00005 
00006 <span class="preprocessor">#include &lt;stdarg.h&gt;</span>
00007 <span class="preprocessor">#include "<a class="code" href="../../d0/d0/ki_8h.html">ki.h</a>"</span>
00008 <span class="preprocessor">#include "<a class="code" href="../../d9/d1/fedefs_8h.html">fedefs.h</a>"</span>
00009 
00010 <span class="comment">// MACH</span>
00011 <span class="preprocessor">#ifndef IN_KERNEL</span>
00012 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keywordtype">void</span> RaiseException ();
00013 <span class="preprocessor">#endif</span>
00014 <span class="preprocessor"></span>
00015 <span class="preprocessor">#include &lt;assert.h&gt;</span>
00016 <span class="preprocessor">#include &lt;stdarg.h&gt;</span>
00017 <span class="preprocessor">#include &lt;stddef.h&gt;</span>
00018 <span class="preprocessor">#ifndef unix</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#include &lt;string.h&gt;</span>
00020 <span class="preprocessor">#endif</span>
00021 <span class="preprocessor"></span>
00022 <span class="comment">// MACH #ifdef WIN32_OR_WIN64</span>
00023 <span class="comment">// MACH #include &lt;process.h&gt;</span>
00024 <span class="comment">// MACH #endif</span>
00025 
00026 <span class="preprocessor">#include "<a class="code" href="../../d7/d2/fepublic_8h.html">fepublic.h</a>"</span>
00027 <span class="preprocessor">#include "<a class="code" href="../../d1/d2/fehelper_8h.html">fehelper.h</a>"</span>
00028 <span class="preprocessor">#include "<a class="code" href="../../d1/d3/fesupprt_8h.html">fesupprt.h</a>"</span>
00029 
00030 <span class="keywordtype">void</span> <a class="code" href="../../d0/d3/fesupprt_8c.html#a1">fp82_default_fp_exception_fault</a>(<span class="keywordtype">void</span> *ps, EM_uint_t isrcode);
00031 <span class="keywordtype">void</span> <a class="code" href="../../d0/d3/fesupprt_8c.html#a2">fp82_default_fp_exception_trap</a>(<span class="keywordtype">void</span> *ps, EM_uint_t isr_code);
00032 
<a name="l00033"></a><a class="code" href="../../d0/d3/fesupprt_8c.html#a0">00033</a> <span class="preprocessor">#define RESTORE_CONSTANTS {                   \</span>
00034 <span class="preprocessor">   FR[0]       = FP_ZERO;                     \</span>
00035 <span class="preprocessor">   FR[1]       = FP_ONE;                      \</span>
00036 <span class="preprocessor">   PR[0]       = 1;                           \</span>
00037 <span class="preprocessor">   GR[0].value = 0;                           \</span>
00038 <span class="preprocessor">   GR[0].nat   = 0;                           \</span>
00039 <span class="preprocessor">}</span>
00040 <span class="preprocessor"></span>
00041 
00042 <span class="comment">// ***************************************************************</span>
00043 <span class="comment">// GET/PUT F1</span>
00044 <span class="comment">// ***************************************************************</span>
00045 <span class="keywordtype">void</span>
<a name="l00046"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a29">00046</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a0">GETSTATE_F1</a>(
00047    EM_pred_reg_specifier Pr0,
00048    EM_fp_reg_specifier   Fr1, 
00049    EM_fp_reg_specifier   Fr3, 
00050    EM_fp_reg_specifier   Fr4, 
00051    EM_fp_reg_specifier   Fr2)  {
00052 
00053 }
00054 
00055 <span class="keywordtype">void</span>
<a name="l00056"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a30">00056</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a1">PUTSTATE_F1</a>(
00057    EM_fp_reg_specifier Fr1) {
00058 
00059    <a class="code" href="../../d0/d3/fesupprt_8c.html#a0">RESTORE_CONSTANTS</a>;                   
00060 }
00061 
00062 <span class="comment">// ***************************************************************</span>
00063 <span class="comment">// GET/PUT F4</span>
00064 <span class="comment">// ***************************************************************</span>
00065 <span class="keywordtype">void</span>
<a name="l00066"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a31">00066</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a2">GETSTATE_F4</a>(
00067    EM_pred_reg_specifier Pr0,
00068    EM_pred_reg_specifier Pr1,
00069    EM_pred_reg_specifier Pr2,
00070    EM_fp_reg_specifier   Fr2,
00071    EM_fp_reg_specifier   Fr3)  {
00072 }
00073 
00074 <span class="keywordtype">void</span>
<a name="l00075"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a32">00075</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a3">PUTSTATE_F4</a>(
00076    EM_pred_reg_specifier Pr1,
00077    EM_pred_reg_specifier Pr2) {
00078 
00079     <a class="code" href="../../d0/d3/fesupprt_8c.html#a0">RESTORE_CONSTANTS</a>;                   
00080 }
00081 
00082 <span class="comment">// ***************************************************************</span>
00083 <span class="comment">// GET/PUT F6</span>
00084 <span class="comment">// ***************************************************************</span>
00085 <span class="keywordtype">void</span>
<a name="l00086"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a33">00086</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a4">GETSTATE_F6</a>(
00087    EM_pred_reg_specifier Pr0,
00088    EM_fp_reg_specifier   Fr1,
00089    EM_pred_reg_specifier Pr2,
00090    EM_fp_reg_specifier   Fr2,
00091    EM_fp_reg_specifier   Fr3)  {
00092 }
00093 
00094 <span class="keywordtype">void</span>
<a name="l00095"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a34">00095</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a5">PUTSTATE_F6</a>(
00096    EM_fp_reg_specifier   Fr1,
00097    EM_pred_reg_specifier Pr2) {
00098 
00099     <a class="code" href="../../d0/d3/fesupprt_8c.html#a0">RESTORE_CONSTANTS</a>;                   
00100 }
00101 
00102 
00103 <span class="comment">// ***************************************************************</span>
00104 <span class="comment">// GET/PUT F7</span>
00105 <span class="comment">// ***************************************************************</span>
00106 <span class="keywordtype">void</span>
<a name="l00107"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a35">00107</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a6">GETSTATE_F7</a>(
00108    EM_pred_reg_specifier Pr0,
00109    EM_fp_reg_specifier   Fr1,
00110    EM_pred_reg_specifier Pr2,
00111    EM_fp_reg_specifier   Fr3)  {
00112 }
00113 
00114 
00115 <span class="keywordtype">void</span>
<a name="l00116"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a36">00116</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a7">PUTSTATE_F7</a>(
00117    EM_fp_reg_specifier   Fr1,
00118    EM_pred_reg_specifier Pr2) {
00119 
00120     <a class="code" href="../../d0/d3/fesupprt_8c.html#a0">RESTORE_CONSTANTS</a>;                   
00121 }
00122 
00123 <span class="comment">// ***************************************************************</span>
00124 <span class="comment">// GET/PUT F8</span>
00125 <span class="comment">// ***************************************************************</span>
00126 <span class="keywordtype">void</span>
<a name="l00127"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a37">00127</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a8">GETSTATE_F8</a>(
00128    EM_pred_reg_specifier Pr0,
00129    EM_fp_reg_specifier   Fr1,
00130    EM_fp_reg_specifier   Fr2, 
00131    EM_fp_reg_specifier   Fr3)  {
00132 }
00133 
00134 <span class="keywordtype">void</span>
<a name="l00135"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a38">00135</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a9">PUTSTATE_F8</a>(
00136    EM_fp_reg_specifier   Fr1) {
00137 
00138    <a class="code" href="../../d0/d3/fesupprt_8c.html#a0">RESTORE_CONSTANTS</a>;                   
00139 }
00140 
00141 <span class="comment">// ***************************************************************</span>
00142 <span class="comment">// GET/PUT F10</span>
00143 <span class="comment">// ***************************************************************</span>
00144 <span class="keywordtype">void</span>
<a name="l00145"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a39">00145</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a10">GETSTATE_F10</a>(
00146    EM_pred_reg_specifier Pr0,
00147    EM_fp_reg_specifier   Fr1,
00148    EM_fp_reg_specifier   Fr2)  {
00149 
00150     <a class="code" href="../../d9/d2/festate_8h.html#a40">SIGNED_FORM</a>   = 0;
00151     <a class="code" href="../../d9/d2/festate_8h.html#a41">TRUNC_FORM</a>    = 0;
00152     <a class="code" href="../../d9/d2/festate_8h.html#a42">UNSIGNED_FORM</a> = 0;
00153 }
00154 
00155 <span class="keywordtype">void</span>
<a name="l00156"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a40">00156</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a11">PUTSTATE_F10</a>(
00157    EM_fp_reg_specifier   Fr1)  {
00158 
00159    <a class="code" href="../../d0/d3/fesupprt_8c.html#a0">RESTORE_CONSTANTS</a>;      
00160 }
00161 
00162 
<a name="l00163"></a><a class="code" href="../../d0/d3/fesupprt_8c.html#a1">00163</a> <span class="keywordtype">void</span> <a class="code" href="../../d0/d3/fesupprt_8c.html#a1">fp82_default_fp_exception_fault</a>(<span class="keywordtype">void</span> *vps, EM_uint_t isr_code) {
00164 <a class="code" href="../../d9/d8/structEM__state__struct.html">EM_state_type</a> *ps;
00165    ps = (<a class="code" href="../../d9/d8/structEM__state__struct.html">EM_state_type</a> *)vps;
00166    ps-&gt;<a class="code" href="../../d9/d8/structEM__state__struct.html#o8">state_MERCED_RTL</a> &amp;= ~0xffff0000;
00167    ps-&gt;<a class="code" href="../../d9/d8/structEM__state__struct.html#o8">state_MERCED_RTL</a> |= (isr_code &lt;&lt; 16);
00168    ps-&gt;<a class="code" href="../../d9/d8/structEM__state__struct.html#o12">trap_type</a> = 1; <span class="comment">// fault</span>
00169 }
00170 
00171 
<a name="l00172"></a><a class="code" href="../../d0/d3/fesupprt_8c.html#a2">00172</a> <span class="keywordtype">void</span> <a class="code" href="../../d0/d3/fesupprt_8c.html#a2">fp82_default_fp_exception_trap</a>(<span class="keywordtype">void</span> *vps, EM_uint_t isr_code) {
00173 <a class="code" href="../../d9/d8/structEM__state__struct.html">EM_state_type</a> *ps;
00174    ps = (<a class="code" href="../../d9/d8/structEM__state__struct.html">EM_state_type</a> *)vps;
00175    ps-&gt;<a class="code" href="../../d9/d8/structEM__state__struct.html#o8">state_MERCED_RTL</a> &amp;= ~0xffff0000;
00176    ps-&gt;<a class="code" href="../../d9/d8/structEM__state__struct.html#o8">state_MERCED_RTL</a> |= (isr_code &lt;&lt; 16);
00177    ps-&gt;<a class="code" href="../../d9/d8/structEM__state__struct.html#o12">trap_type</a> = 0; <span class="comment">// trap</span>
00178 }
00179 
00180 
00181 <span class="comment">/*************************************************************</span>
00182 <span class="comment">fp82_EM_initialize_state()</span>
00183 <span class="comment">*************************************************************/</span>
00184 <span class="keywordtype">void</span>
<a name="l00185"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a21">00185</a> <a class="code" href="../../d1/d3/fesupprt_8h.html#a21">fp82_EM_initialize_state</a>(<a class="code" href="../../d9/d8/structEM__state__struct.html">EM_state_type</a> *ps) {
00186     <a class="code" href="../../d2/d3/fetypes_8h.html#a11">EM_int_t</a> i;
00187 
00188     <a class="code" href="../../d9/d2/festate_8h.html#a2">PSR</a>.be                = 0;
00189     <a class="code" href="../../d9/d2/festate_8h.html#a2">PSR</a>.dfl               = 0;
00190     <a class="code" href="../../d9/d2/festate_8h.html#a2">PSR</a>.dfh               = 0;
00191     <a class="code" href="../../d9/d2/festate_8h.html#a2">PSR</a>.mfl               = 0;
00192     <a class="code" href="../../d9/d2/festate_8h.html#a2">PSR</a>.mfh               = 0;
00193 
00194     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.traps_vd         = 1;
00195     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.traps_dd         = 1;
00196     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.traps_zd         = 1;
00197     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.traps_od         = 1;
00198     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.traps_ud         = 1;
00199     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.traps_id         = 1;
00200 
00201     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf0_controls_ftz = 0;
00202     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf0_controls_wre = 1;
00203     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf0_controls_pc  = <a class="code" href="../../d2/d3/fetypes_8h.html#a454a411">sf_double_extended</a>;
00204     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf0_controls_rc  = <a class="code" href="../../d2/d3/fetypes_8h.html#a455a412">rc_rn</a>;
00205     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf0_controls_td  = 0;
00206     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf0_flags_v      = 0;
00207     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf0_flags_d      = 0;
00208     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf0_flags_z      = 0;
00209     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf0_flags_o      = 0;
00210     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf0_flags_u      = 0;
00211     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf0_flags_i      = 0;
00212  
00213     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf1_controls_ftz = 0;
00214     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf1_controls_wre = 1;
00215     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf1_controls_pc  = <a class="code" href="../../d2/d3/fetypes_8h.html#a454a411">sf_double_extended</a>;
00216     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf1_controls_rc  = <a class="code" href="../../d2/d3/fetypes_8h.html#a455a412">rc_rn</a>;
00217     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf1_controls_td  = 0;
00218     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf1_flags_v      = 0;
00219     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf1_flags_d      = 0;
00220     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf1_flags_z      = 0;
00221     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf1_flags_o      = 0;
00222     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf1_flags_u      = 0;
00223     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf1_flags_i      = 0;
00224 
00225     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf2_controls_ftz = 0;
00226     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf2_controls_wre = 1;
00227     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf2_controls_pc  = <a class="code" href="../../d2/d3/fetypes_8h.html#a454a411">sf_double_extended</a>;
00228     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf2_controls_rc  = <a class="code" href="../../d2/d3/fetypes_8h.html#a455a412">rc_rn</a>;
00229     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf2_controls_td  = 0;
00230     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf2_flags_v      = 0;
00231     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf2_flags_d      = 0;
00232     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf2_flags_z      = 0;
00233     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf2_flags_o      = 0;
00234     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf2_flags_u      = 0;
00235     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf2_flags_i      = 0;
00236 
00237     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf3_controls_ftz = 0;
00238     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf3_controls_wre = 1;
00239     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf3_controls_pc  = <a class="code" href="../../d2/d3/fetypes_8h.html#a454a411">sf_double_extended</a>;
00240     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf3_controls_rc  = <a class="code" href="../../d2/d3/fetypes_8h.html#a455a412">rc_rn</a>;
00241     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf3_controls_td  = 0;
00242     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf3_flags_v      = 0;
00243     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf3_flags_d      = 0;
00244     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf3_flags_z      = 0;
00245     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf3_flags_o      = 0;
00246     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf3_flags_u      = 0;
00247     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.sf3_flags_i      = 0;
00248     <a class="code" href="../../d9/d2/festate_8h.html#a0">FPSR</a>.reserved         = 0;
00249 
00250     <a class="code" href="../../d9/d2/festate_8h.html#a7">PR</a>[0] = 1;
00251     <span class="keywordflow">for</span> (i=1;i&lt;<a class="code" href="../../d2/d3/fetypes_8h.html#a9">EM_NUM_PR</a>;i++)
00252         <a class="code" href="../../d9/d2/festate_8h.html#a7">PR</a>[i] = 0;
00253 
00254     ps-&gt;<a class="code" href="../../d9/d8/structEM__state__struct.html#o8">state_MERCED_RTL</a> = 0;
00255 
00256     <a class="code" href="../../d9/d2/festate_8h.html#a5">FR</a>[0] = FP_ZERO;
00257     <a class="code" href="../../d9/d2/festate_8h.html#a5">FR</a>[1] = FP_ONE;
00258 
00259     <span class="keywordflow">for</span> (i=2;i&lt;<a class="code" href="../../d2/d3/fetypes_8h.html#a8">MAX_REAL_FR_INDEX</a>;i++)
00260         <a class="code" href="../../d9/d2/festate_8h.html#a5">FR</a>[i] = FP_ZERO;
00261 
00262     <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="../../d2/d3/fetypes_8h.html#a7">MAX_REAL_GR_INDEX</a>;i++) {
00263         <a class="code" href="../../d9/d2/festate_8h.html#a6">GR</a>[i].value = 0;
00264         <a class="code" href="../../d9/d2/festate_8h.html#a6">GR</a>[i].nat   = 0;
00265     }
00266 
00267     ps-&gt;<a class="code" href="../../d9/d8/structEM__state__struct.html#o9">state_fp82_fp_exception_fault</a> = <a class="code" href="../../d0/d3/fesupprt_8c.html#a1">fp82_default_fp_exception_fault</a>;
00268     ps-&gt;<a class="code" href="../../d9/d8/structEM__state__struct.html#o10">state_fp82_fp_exception_trap</a> = <a class="code" href="../../d0/d3/fesupprt_8c.html#a2">fp82_default_fp_exception_trap</a>;
00269 }
00270 
00271 
00272 <span class="comment">/* Other EM ISA helper functions */</span>
00273  
00274 <a class="code" href="../../d2/d3/fetypes_8h.html#a15">EM_boolean_t</a>
<a name="l00275"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a22">00275</a> <a class="code" href="../../d1/d3/fesupprt_8h.html#a22">fp82_fp_software_assistance_required</a>(<a class="code" href="../../d9/d8/structEM__state__struct.html">EM_state_type</a> *ps, 
00276     EM_opcode_type calling_instruction, ...)
00277 {
00278     <span class="keywordflow">return</span>(0);
00279 }
00280 
00281 
00282 
00283 <a class="code" href="../../d5/d3/filelock_8c.html#a1">INLINE</a> <span class="keywordtype">void</span>
<a name="l00284"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a23">00284</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a37">disabled_fp_register_fault</a>(EM_uint_t isr_code, EM_uint_t itype)
00285 {
00286 <span class="preprocessor">#ifdef IN_KERNEL</span>
00287 <span class="preprocessor"></span>    <a class="code" href="../../d9/d1/fedefs_8h.html#a1">FP_EMULATION_ERROR0</a> (<span class="stringliteral">"disabled_fp_register_fault () Internal Error\n"</span>);
00288 <span class="preprocessor">#else</span>
00289 <span class="preprocessor"></span>    printf (<span class="stringliteral">"disabled_fp_register_fault () Internal Error\n"</span>);
00290     <a class="code" href="../../d9/d1/fedefs_8h.html#a16">exit</a> (1);
00291 <span class="preprocessor">#endif</span>
00292 <span class="preprocessor"></span>}
00293 
00294 
00295 <a class="code" href="../../d5/d3/filelock_8c.html#a1">INLINE</a> <span class="keywordtype">void</span>
<a name="l00296"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a24">00296</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a35">fp_exception_fault</a>(EM_uint_t isr_code)
00297 {
00298 
00299     <a class="code" href="../../d9/d2/festate_8h.html#a7">PR</a>[0]       = 1;
00300     <a class="code" href="../../d9/d2/festate_8h.html#a6">GR</a>[0].value = 0;
00301     <a class="code" href="../../d9/d2/festate_8h.html#a6">GR</a>[0].nat   = 0;
00302     <a class="code" href="../../d9/d2/festate_8h.html#a5">FR</a>[0]       = FP_ZERO;
00303     <a class="code" href="../../d9/d2/festate_8h.html#a5">FR</a>[1]       = FP_ONE;
00304 
00305     ps-&gt;state_fp82_fp_exception_fault((<a class="code" href="../../d9/d8/structEM__state__struct.html">EM_state_type</a> *)ps, isr_code);
00306 
00307 }
00308 
00309 <a class="code" href="../../d5/d3/filelock_8c.html#a1">INLINE</a> <span class="keywordtype">void</span>
<a name="l00310"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a25">00310</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a36">fp_exception_trap</a>(EM_uint_t isr_code)
00311 {
00312 
00313     isr_code |= 0x00000001;
00314 
00315     ps-&gt;state_fp82_fp_exception_trap((<a class="code" href="../../d9/d8/structEM__state__struct.html">EM_state_type</a> *)ps, isr_code);
00316 
00317 }
00318 
00319 
00320 <a class="code" href="../../d5/d3/filelock_8c.html#a1">INLINE</a> <span class="keywordtype">void</span>
<a name="l00321"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a26">00321</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a33">illegal_operation_fault</a>(EM_uint_t non_rs)
00322 {
00323 <span class="preprocessor">#ifdef IN_KERNEL</span>
00324 <span class="preprocessor"></span>    <a class="code" href="../../d9/d1/fedefs_8h.html#a1">FP_EMULATION_ERROR0</a> (<span class="stringliteral">"illegal_operation_fault () Internal Error\n"</span>);
00325 <span class="preprocessor">#else</span>
00326 <span class="preprocessor"></span>    printf (<span class="stringliteral">"illegal_operation_fault () Internal Error\n"</span>);
00327     <a class="code" href="../../d9/d1/fedefs_8h.html#a16">exit</a> (1);
00328 <span class="preprocessor">#endif</span>
00329 <span class="preprocessor"></span>}
00330 
00331 <a class="code" href="../../d5/d3/filelock_8c.html#a1">INLINE</a> <span class="keywordtype">void</span>
<a name="l00332"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a27">00332</a> <a class="code" href="../../d1/d3/fesupprt_8h.html#a4">check_target_register</a>(EM_uint_t reg_specifier, EM_uint_t itype)
00333 {
00334   <span class="keywordflow">if</span>(reg_specifier == 0) {
00335 <span class="preprocessor">#ifdef IN_KERNEL</span>
00336 <span class="preprocessor"></span>    <a class="code" href="../../d9/d1/fedefs_8h.html#a1">FP_EMULATION_ERROR0</a> (<span class="stringliteral">"fp_check_target_register () Internal Error\n"</span>);
00337 <span class="preprocessor">#else</span>
00338 <span class="preprocessor"></span>    printf (<span class="stringliteral">"fp_check_target_register () Internal Error\n"</span>);
00339     <a class="code" href="../../d9/d1/fedefs_8h.html#a16">exit</a> (1);
00340 <span class="preprocessor">#endif</span>
00341 <span class="preprocessor"></span>  }
00342 }
00343 
00344 <span class="keywordtype">void</span>
<a name="l00345"></a><a class="code" href="../../d1/d3/fesupprt_8h.html#a28">00345</a> <a class="code" href="../../d3/d2/feinstr_8h.html#a34">fp_check_target_register</a>(EM_uint_t reg_specifier)
00346 {
00347   <span class="keywordflow">if</span>( (reg_specifier == 0) || (reg_specifier == 1) ){
00348 <span class="preprocessor">#ifdef IN_KERNEL</span>
00349 <span class="preprocessor"></span>    <a class="code" href="../../d9/d1/fedefs_8h.html#a1">FP_EMULATION_ERROR0</a> (<span class="stringliteral">"fp_check_target_register () Internal Error\n"</span>)
00350 #<span class="keywordflow">else</span>
00351     printf (<span class="stringliteral">"fp_check_target_register () Internal Error\n"</span>);
00352     <a class="code" href="../../d9/d1/fedefs_8h.html#a16">exit</a> (1);
00353 <span class="preprocessor">#endif</span>
00354 <span class="preprocessor"></span>  }
00355 }
00356 
00357 
00358 <a class="code" href="../../d5/d3/filelock_8c.html#a1">INLINE</a> <span class="keywordtype">void</span>
<a name="l00359"></a><a class="code" href="../../d0/d3/fesupprt_8c.html#a23">00359</a> <a class="code" href="../../d0/d3/fesupprt_8c.html#a23">reserved_register_field_fault</a>(EM_uint_t val)
00360 {
00361 <span class="preprocessor">#ifdef IN_KERNEL</span>
00362 <span class="preprocessor"></span>    <a class="code" href="../../d9/d1/fedefs_8h.html#a1">FP_EMULATION_ERROR0</a> (<span class="stringliteral">"reserved_register_field_fault () Internal Error\n"</span>)
00363 #<span class="keywordflow">else</span>
00364     printf (<span class="stringliteral">"reserved_register_field_fault () Internal Error\n"</span>);
00365     <a class="code" href="../../d9/d1/fedefs_8h.html#a16">exit</a> (1);
00366 <span class="preprocessor">#endif</span>
00367 <span class="preprocessor"></span>}
00368 
00369 
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:00 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

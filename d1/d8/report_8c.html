<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: report.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>report.c File Reference</h1><code>#include "<a class="el" href="../../d1/d5/iop_8h-source.html">iop.h</a>"</code><br>

<p>
<a href="../../d2/d7/report_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a0">DBG_AR</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a9">IopChangeInterfaceType</a> (IN OUT PIO_RESOURCE_REQUIREMENTS_LIST IoResources, IN OUT PCM_RESOURCE_LIST *AllocatedResource)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a10">IopInitializeResourceMap</a> (<a class="el" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a11">IoReportHalResourceUsage</a> (IN PUNICODE_STRING HalName, IN PCM_RESOURCE_LIST RawResourceList, IN PCM_RESOURCE_LIST TranslatedResourceList, IN ULONG ResourceListSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a12">IoReportResourceForDetection</a> (IN <a class="el" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject, IN PCM_RESOURCE_LIST DriverList OPTIONAL, IN ULONG DriverListSize OPTIONAL, IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject OPTIONAL, IN PCM_RESOURCE_LIST DeviceList OPTIONAL, IN ULONG DeviceListSize OPTIONAL, OUT PBOOLEAN ConflictDetected)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a13">IoReportResourceUsage</a> (IN PUNICODE_STRING DriverClassName OPTIONAL, IN <a class="el" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject, IN PCM_RESOURCE_LIST DriverList OPTIONAL, IN ULONG DriverListSize OPTIONAL, IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject OPTIONAL, IN PCM_RESOURCE_LIST DeviceList OPTIONAL, IN ULONG DeviceListSize OPTIONAL, IN BOOLEAN OverrideConflict, OUT PBOOLEAN ConflictDetected)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a14">IoReportResourceUsageInternal</a> (IN <a class="el" href="../../d6/d9/pnp_8h.html#a58">ARBITER_REQUEST_SOURCE</a> AllocationType, IN PUNICODE_STRING DriverClassName OPTIONAL, IN <a class="el" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject, IN PCM_RESOURCE_LIST DriverList OPTIONAL, IN ULONG DriverListSize OPTIONAL, IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject OPTIONAL, IN PCM_RESOURCE_LIST DeviceList OPTIONAL, IN ULONG DeviceListSize OPTIONAL, IN BOOLEAN OverrideConflict, OUT PBOOLEAN ConflictDetected)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a15">IopWriteResourceList</a> (HANDLE ResourceMapKey, PUNICODE_STRING ClassName, PUNICODE_STRING DriverName, PUNICODE_STRING DeviceName, PCM_RESOURCE_LIST ResourceList, ULONG ResourceListSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a16">IopDumpCmResourceDescriptor</a> (IN PUCHAR Indent, IN PCM_PARTIAL_RESOURCE_DESCRIPTOR Desc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a17">IopDumpCmResourceList</a> (IN PCM_RESOURCE_LIST CmList)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a1">IopWstrRaw</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a2">IopWstrTranslated</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a3">IopWstrBusTranslated</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a4">IopWstrOtherDrivers</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a5">IopWstrHal</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a6">IopWstrSystem</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a7">IopWstrPhysicalMemory</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/report_8c.html#a8">IopWstrSpecialMemory</a> []</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="report.c::DBG_AR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DBG_AR&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00029">29</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a9" doxytag="report.c::IopChangeInterfaceType" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN IopChangeInterfaceType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT PIO_RESOURCE_REQUIREMENTS_LIST&nbsp;</td>
          <td class="mdname" nowrap> <em>IoResources</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PCM_RESOURCE_LIST *&nbsp;</td>
          <td class="mdname" nowrap> <em>AllocatedResource</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00629">629</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00803">CmResourceTypeReserved</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00126">ExAllocatePool</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d1/pri__bld_2pnpsubs_8c-source.html#l03523">IopDetermineResourceListSize()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d8/ex_8h.html#a329a174">PagedPool</a>, <a class="el" href="../../d2/d9/pnpdata_8c-source.html#l00167">PnpDefaultInterfaceType</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d2/d7/report_8c-source.html#l00469">IoReportResourceUsageInternal()</a>.
<p>
<pre class="fragment"><div>00636                    :
00637 
00638     This routine takes an Io resourcelist and changes its interfacetype
00639     from internal to <span class="keywordflow">default</span> <a class="code" href="../../d4/d4/iafptrap_8c.html#a9">type</a> (isa or eisa or mca).
00640 
00641 Arguments:
00642 
00643     IoResources - Pointer to requirement list.
00644 
00645     AllocatedResources - Pointer to a variable that receives <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resource list.
00646 
00647 Return Value:
00648 
00649     BOOLEAN value to indicates <span class="keywordflow">if</span> change <a class="code" href="../../d3/d0/user32_8def.html#a107">made</a> or not.
00650 
00651 --*/
00652 
00653 {
00654     PIO_RESOURCE_LIST       IoResourceList;
00655     PIO_RESOURCE_DESCRIPTOR IoResourceDescriptor;
00656     PIO_RESOURCE_DESCRIPTOR IoResourceDescriptorEnd;
00657     LONG                    IoResourceListCount;
00658     BOOLEAN                 changed;
00659 
00660     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(AllocatedResources);
00661 
00662     changed = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00663 
00664     <span class="keywordflow">if</span> (!IoResources) {
00665 
00666         <span class="keywordflow">return</span> changed;
00667 
00668     }
00669 
00670     <span class="keywordflow">if</span> (IoResources-&gt;InterfaceType == Internal) {
00671 
00672         IoResources-&gt;InterfaceType = <a class="code" href="../../d1/d0/pnpdata_8c.html#a23">PnpDefaultInterfaceType</a>;
00673         changed = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00674 
00675     }
00676 
00677     IoResourceList = IoResources-&gt;List;
00678     IoResourceListCount = IoResources-&gt;AlternativeLists;
00679     <span class="keywordflow">while</span> (--IoResourceListCount &gt;= 0) {
00680 
00681         IoResourceDescriptor = IoResourceList-&gt;Descriptors;
00682         IoResourceDescriptorEnd = IoResourceDescriptor + IoResourceList-&gt;Count;
00683 
00684         <span class="keywordflow">for</span> (;IoResourceDescriptor &lt; IoResourceDescriptorEnd; IoResourceDescriptor++) {
00685 
00686             <span class="keywordflow">if</span> (IoResourceDescriptor-&gt;Type == <a class="code" href="../../d9/d0/pnpiop_8h.html#a74">CmResourceTypeReserved</a> &amp;&amp;
00687                 IoResourceDescriptor-&gt;u.DevicePrivate.Data[0] == Internal) {
00688 
00689                 IoResourceDescriptor-&gt;u.DevicePrivate.Data[0] = <a class="code" href="../../d1/d0/pnpdata_8c.html#a23">PnpDefaultInterfaceType</a>;
00690                 changed = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00691 
00692             }
00693         }
00694         IoResourceList = (PIO_RESOURCE_LIST) IoResourceDescriptorEnd;
00695     }
00696 
00697     <span class="keywordflow">if</span> (changed) {
00698 
00699         PCM_RESOURCE_LIST               oldResources = *AllocatedResources;
00700         PCM_RESOURCE_LIST               newResources;
00701         PCM_FULL_RESOURCE_DESCRIPTOR    cmFullDesc;
00702         PCM_PARTIAL_RESOURCE_DESCRIPTOR cmPartDesc;
00703         ULONG                           size;
00704 
00705         <span class="keywordflow">if</span> (oldResources) {
00706 
00707             size = <a class="code" href="../../d0/d2/pri__bld_2pnpsubs_8c.html#a21">IopDetermineResourceListSize</a>(oldResources);
00708             newResources = <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(PagedPool, size);
00709             <span class="keywordflow">if</span> (newResources == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00710 
00711                 changed = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00712 
00713             } <span class="keywordflow">else</span> {
00714 
00715                 ULONG   i;
00716                 ULONG   j;
00717 
00718 
00719                 RtlCopyMemory(newResources, oldResources, size);
00720 
00721                 <span class="comment">//</span>
00722                 <span class="comment">// Fix up the interface type</span>
00723                 <span class="comment">//</span>
00724 
00725                 cmFullDesc = &amp;newResources-&gt;List[0];
00726                 <span class="keywordflow">for</span> (i = 0; i &lt; oldResources-&gt;Count; i++) {
00727 
00728                     <span class="keywordflow">if</span> (cmFullDesc-&gt;InterfaceType == Internal) {
00729 
00730                         cmFullDesc-&gt;InterfaceType = <a class="code" href="../../d1/d0/pnpdata_8c.html#a23">PnpDefaultInterfaceType</a>;
00731 
00732                     }
00733                     cmPartDesc = &amp;cmFullDesc-&gt;PartialResourceList.PartialDescriptors[0];
00734                     <span class="keywordflow">for</span> (j = 0; j &lt; cmFullDesc-&gt;PartialResourceList.Count; j++) {
00735 
00736                         size = 0;
00737                         <span class="keywordflow">switch</span> (cmPartDesc-&gt;Type) {
00738 
00739                         <span class="keywordflow">case</span> CmResourceTypeDeviceSpecific:
00740                             size = cmPartDesc-&gt;u.DeviceSpecificData.DataSize;
00741                             <span class="keywordflow">break</span>;
00742 
00743                         }
00744                         cmPartDesc++;
00745                         cmPartDesc = (PCM_PARTIAL_RESOURCE_DESCRIPTOR) ((PUCHAR)cmPartDesc + size);
00746                     }
00747 
00748                     cmFullDesc = (PCM_FULL_RESOURCE_DESCRIPTOR)cmPartDesc;
00749                 }
00750 
00751                 *AllocatedResources = newResources;
00752             }
00753         }
00754     }
00755 
00756     <span class="keywordflow">return</span> changed;
00757 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="report.c::IopDumpCmResourceDescriptor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID IopDumpCmResourceDescriptor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Indent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCM_PARTIAL_RESOURCE_DESCRIPTOR&nbsp;</td>
          <td class="mdname" nowrap> <em>Desc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00868">868</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
References <a class="el" href="../../d7/d5/memprint_8h-source.html#l00079">DbgPrint</a>, and <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>.
<p>
Referenced by <a class="el" href="../../d2/d7/report_8c-source.html#l00929">IopDumpCmResourceList()</a>.
<p>
<pre class="fragment"><div>00874                    :
00875 
00876     This routine processes a IO_RESOURCE_DESCRIPTOR and displays <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a>.
00877 
00878 Arguments:
00879 
00880     Indent - # <span class="keywordtype">char</span> of indentation.
00881 
00882     Desc - supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> IO_RESOURCE_DESCRIPTOR to be displayed.
00883 
00884 Return Value:
00885 
00886     None.
00887 
00888 --*/
00889 {
00890     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00891 
00892     <span class="keywordflow">switch</span> (Desc-&gt;Type) {
00893         <span class="keywordflow">case</span> CmResourceTypePort:
00894             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a> (<span class="stringliteral">"%sIO  Start: %x:%08x, Length:  %x\n"</span>,
00895                 Indent,
00896                 Desc-&gt;u.Port.Start.HighPart, Desc-&gt;u.Port.Start.LowPart,
00897                 Desc-&gt;u.Port.Length
00898                 );
00899             <span class="keywordflow">break</span>;
00900 
00901         <span class="keywordflow">case</span> CmResourceTypeMemory:
00902             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a> (<span class="stringliteral">"%sMEM Start: %x:%08x, Length:  %x\n"</span>,
00903                 Indent,
00904                 Desc-&gt;u.Memory.Start.HighPart, Desc-&gt;u.Memory.Start.LowPart,
00905                 Desc-&gt;u.Memory.Length
00906                 );
00907             <span class="keywordflow">break</span>;
00908 
00909         <span class="keywordflow">case</span> CmResourceTypeInterrupt:
00910             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a> (<span class="stringliteral">"%sINT Level: %x, Vector: %x, Affinity: %x\n"</span>,
00911                 Indent,
00912                 Desc-&gt;u.Interrupt.Level,
00913                 Desc-&gt;u.Interrupt.Vector,
00914                 Desc-&gt;u.Interrupt.Affinity
00915                 );
00916             <span class="keywordflow">break</span>;
00917 
00918         <span class="keywordflow">case</span> CmResourceTypeDma:
00919             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a> (<span class="stringliteral">"%sDMA Channel: %x, Port: %x\n"</span>,
00920                 Indent,
00921                 Desc-&gt;u.Dma.Channel,
00922                 Desc-&gt;u.Dma.Port
00923                 );
00924             <span class="keywordflow">break</span>;
00925     }
00926 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="report.c::IopDumpCmResourceList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID IopDumpCmResourceList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCM_RESOURCE_LIST&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>CmList</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00929">929</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
References <a class="el" href="../../d7/d5/memprint_8h-source.html#l00079">DbgPrint</a>, <a class="el" href="../../d2/d7/report_8c-source.html#l00868">IopDumpCmResourceDescriptor()</a>, and <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>.
<p>
Referenced by <a class="el" href="../../d6/d0/pnpres_8c-source.html#l02320">IopBuildCmResourceLists()</a>, and <a class="el" href="../../d6/d0/pnpres_8c-source.html#l06996">IopReserveLegacyBootResources()</a>.
<p>
<pre class="fragment"><div>00934                    :
00935 
00936     This routine displays CM resource list.
00937 
00938 Arguments:
00939 
00940     CmList - supplies a pointer to CM resource list
00941 
00942 Return Value:
00943 
00944     None.
00945 
00946 --*/
00947 {
00948     PCM_FULL_RESOURCE_DESCRIPTOR fullDesc;
00949     PCM_PARTIAL_RESOURCE_LIST partialDesc;
00950     PCM_PARTIAL_RESOURCE_DESCRIPTOR desc;
00951     ULONG count, i;
00952 
00953     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00954 
00955     <span class="keywordflow">if</span> (CmList-&gt;Count &gt; 0) {
00956         <span class="keywordflow">if</span> (CmList) {
00957             fullDesc = &amp;CmList-&gt;List[0];
00958             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"Cm Resource List -\n"</span>);
00959             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"  List Count = %x, Bus Number = %x\n"</span>, CmList-&gt;Count, fullDesc-&gt;BusNumber);
00960             partialDesc = &amp;fullDesc-&gt;PartialResourceList;
00961             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"  Version = %x, Revision = %x, Desc count = %x\n"</span>, partialDesc-&gt;Version,
00962                      partialDesc-&gt;Revision, partialDesc-&gt;Count);
00963             count = partialDesc-&gt;Count;
00964             desc = &amp;partialDesc-&gt;PartialDescriptors[0];
00965             <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {
00966                 <a class="code" href="../../d1/d8/report_8c.html#a16">IopDumpCmResourceDescriptor</a>(<span class="stringliteral">"    "</span>, desc);
00967                 desc++;
00968             }
00969         }
00970     }
00971 }
<span class="comment">//#endif</span>
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="report.c::IopInitializeResourceMap" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID IopInitializeResourceMap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>LoaderBlock</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00066">66</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
References <a class="el" href="../../d3/d0/mm_8h-source.html#l00034">_PHYSICAL_MEMORY_RUN::BasePage</a>, <a class="el" href="../../d7/d9/cmdat_8c-source.html#l00172">CmRegistryMachineHardwareResourceMapName</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00126">ExAllocatePool</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d3/internal_8c-source.html#l05325">IopOpenRegistryKey()</a>, <a class="el" href="../../d2/d7/report_8c-source.html#l00760">IopWriteResourceList()</a>, <a class="el" href="../../d4/d4/iodata_8c-source.html#l00749">IopWstrPhysicalMemory</a>, <a class="el" href="../../d4/d4/iodata_8c-source.html#l00750">IopWstrSpecialMemory</a>, <a class="el" href="../../d4/d4/iodata_8c-source.html#l00748">IopWstrSystem</a>, <a class="el" href="../../d8/d8/assign_8c-source.html#l00056">IopWstrTranslated</a>, <a class="el" href="../../d1/d9/arc_8h.html#a320a278">LoaderMaximum</a>, <a class="el" href="../../d1/d9/arc_8h.html#a320a276">LoaderSpecialMemory</a>, <a class="el" href="../../d3/d0/mm_8h-source.html#l00031">MAX_PHYSICAL_MEMORY_FRAGMENTS</a>, <a class="el" href="../../d6/d0/mminit_8c-source.html#l01582">MmInitializeMemoryLimits()</a>, <a class="el" href="../../d3/d0/mm_8h-source.html#l00048">MmPhysicalMemoryBlock</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d0/mm_8h-source.html#l00039">_PHYSICAL_MEMORY_DESCRIPTOR::NumberOfRuns</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00600">PAGE_SHIFT</a>, <a class="el" href="../../d3/d0/mm_8h-source.html#l00035">_PHYSICAL_MEMORY_RUN::PageCount</a>, <a class="el" href="../../d5/d8/ex_8h.html#a329a174">PagedPool</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d3/d0/mm_8h-source.html#l00041">_PHYSICAL_MEMORY_DESCRIPTOR::Run</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d5/ioinit_8c-source.html#l00270">IoInitSystem()</a>.
<p>
<pre class="fragment"><div>00075 {
00076     ULONG i, j, pass, length;
00077     LARGE_INTEGER li;
00078     HANDLE keyHandle;
00079     UNICODE_STRING  unicodeString, systemString, listString;
00080     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
00081     PCM_RESOURCE_LIST ResourceList;
00082     PCM_PARTIAL_RESOURCE_DESCRIPTOR CmDescriptor;
00083     BOOLEAN IncludeType[<a class="code" href="../../d1/d9/arc_8h.html#a320a278">LoaderMaximum</a>];
00084     ULONG MemoryAlloc[(<span class="keyword">sizeof</span>(<a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html">PHYSICAL_MEMORY_DESCRIPTOR</a>) +
00085             <span class="keyword">sizeof</span>(<a class="code" href="../../d5/d5/struct__PHYSICAL__MEMORY__RUN.html">PHYSICAL_MEMORY_RUN</a>)*<a class="code" href="../../d2/d1/mm_8h.html#a0">MAX_PHYSICAL_MEMORY_FRAGMENTS</a>) /
00086               <span class="keyword">sizeof</span>(ULONG)];
00087     <a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html">PPHYSICAL_MEMORY_DESCRIPTOR</a> MemoryBlock;
00088 
00089     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;systemString,  IopWstrSystem);
00090     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;listString, IopWstrTranslated );
00091 
00092     <span class="keywordflow">for</span> (pass=0; pass &lt; 2; pass++) {
00093         <span class="keywordflow">switch</span> (pass) {
00094             <span class="keywordflow">case</span> 0:
00095                 <span class="comment">//</span>
00096                 <span class="comment">// Add MmPhysicalMemoryBlock to regitry</span>
00097                 <span class="comment">//</span>
00098 
00099                 <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;unicodeString, IopWstrPhysicalMemory);
00100                 MemoryBlock = <a class="code" href="../../d2/d1/mm_8h.html#a131">MmPhysicalMemoryBlock</a>;
00101                 <span class="keywordflow">break</span>;
00102 
00103             <span class="keywordflow">case</span> 1:
00104 
00105                 <span class="comment">//</span>
00106                 <span class="comment">// Add LoadSpecialMemory to registry</span>
00107                 <span class="comment">//</span>
00108 
00109                 <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;unicodeString, IopWstrSpecialMemory);
00110 
00111                 <span class="comment">//</span>
00112                 <span class="comment">// Computer memory limits of LoaderSpecialMemory</span>
00113                 <span class="comment">//</span>
00114 
00115                 MemoryBlock = (<a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html">PPHYSICAL_MEMORY_DESCRIPTOR</a>)&amp;MemoryAlloc;
00116                 MemoryBlock-&gt;<a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html#o0">NumberOfRuns</a> = <a class="code" href="../../d2/d1/mm_8h.html#a0">MAX_PHYSICAL_MEMORY_FRAGMENTS</a>;
00117 
00118                 <span class="keywordflow">for</span> (j=0; j &lt; <a class="code" href="../../d1/d9/arc_8h.html#a320a278">LoaderMaximum</a>; j++) {
00119                     IncludeType[j] = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00120                 }
00121                 IncludeType[<a class="code" href="../../d1/d9/arc_8h.html#a320a276">LoaderSpecialMemory</a>] = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00122                 <a class="code" href="../../d5/d1/mminit_8c.html#a52">MmInitializeMemoryLimits</a>(
00123                     LoaderBlock,
00124                     IncludeType,
00125                     MemoryBlock
00126                     );
00127 
00128                 <span class="keywordflow">break</span>;
00129         }
00130 
00131         <span class="comment">//</span>
00132         <span class="comment">// Allocate and build a CM_RESOURCE_LIST to describe all</span>
00133         <span class="comment">// of physical memory</span>
00134         <span class="comment">//</span>
00135 
00136         j = MemoryBlock-&gt;<a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html#o0">NumberOfRuns</a>;
00137         <span class="keywordflow">if</span> (j == 0) {
00138             <span class="keywordflow">continue</span>;
00139         }
00140 
00141         length = <span class="keyword">sizeof</span>(CM_RESOURCE_LIST) + (j-1) * <span class="keyword">sizeof</span> (CM_PARTIAL_RESOURCE_DESCRIPTOR);
00142         ResourceList = (PCM_RESOURCE_LIST) <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a> (PagedPool, length);
00143         <span class="keywordflow">if</span> (!ResourceList) {
00144             <span class="keywordflow">return</span>;
00145         }
00146         RtlZeroMemory ((PVOID) ResourceList, length);
00147 
00148         ResourceList-&gt;Count = 1;
00149         ResourceList-&gt;List[0].PartialResourceList.Count = j;
00150         CmDescriptor = ResourceList-&gt;List[0].PartialResourceList.PartialDescriptors;
00151 
00152         <span class="keywordflow">for</span> (i=0; i &lt; j; i++) {
00153             CmDescriptor-&gt;Type = CmResourceTypeMemory;
00154             CmDescriptor-&gt;ShareDisposition = CmResourceShareDeviceExclusive;
00155             li.QuadPart = (LONGLONG)(MemoryBlock-&gt;<a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html#o2">Run</a>[i].<a class="code" href="../../d5/d5/struct__PHYSICAL__MEMORY__RUN.html#o0">BasePage</a>);
00156             li.QuadPart &lt;&lt;= <a class="code" href="../../d6/d7/halmips_8h.html#a447">PAGE_SHIFT</a>;
00157             CmDescriptor-&gt;u.Memory.Start  = li;
00158 
00159             <span class="comment">// fixfix - handle page frame numbers greater than 32 bits.</span>
00160 
00161             CmDescriptor-&gt;u.Memory.Length =
00162                 (ULONG)(MemoryBlock-&gt;<a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html#o2">Run</a>[i].<a class="code" href="../../d5/d5/struct__PHYSICAL__MEMORY__RUN.html#o1">PageCount</a> &lt;&lt; <a class="code" href="../../d6/d7/halmips_8h.html#a447">PAGE_SHIFT</a>);
00163 
00164             CmDescriptor++;
00165         }
00166 
00167 
00168         <span class="comment">//</span>
00169         <span class="comment">// Add the resoruce list to the resorucemap</span>
00170         <span class="comment">//</span>
00171 
00172         status = <a class="code" href="../../d0/d6/iop_8h.html#a198">IopOpenRegistryKey</a>( &amp;keyHandle,
00173                                      (HANDLE) NULL,
00174                                      &amp;CmRegistryMachineHardwareResourceMapName,
00175                                      KEY_READ | KEY_WRITE,
00176                                      TRUE );
00177         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( status )) {
00178             <a class="code" href="../../d1/d8/report_8c.html#a15">IopWriteResourceList</a> ( keyHandle,
00179                                    &amp;systemString,
00180                                    &amp;unicodeString,
00181                                    &amp;listString,
00182                                    ResourceList,
00183                                    length
00184                                    );
00185             ZwClose( keyHandle );
00186         }
00187         <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a> (ResourceList);
00188     }
00189 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="report.c::IopWriteResourceList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IopWriteResourceList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>ResourceMapKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>ClassName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>DriverName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCM_RESOURCE_LIST&nbsp;</td>
          <td class="mdname" nowrap> <em>ResourceList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ResourceListSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00760">760</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
References <a class="el" href="../../d3/d3/internal_8c-source.html#l05325">IopOpenRegistryKey()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d0/pnpres_8c-source.html#l02034">IopBuildCmResourceList()</a>, <a class="el" href="../../d2/d7/report_8c-source.html#l00066">IopInitializeResourceMap()</a>, and <a class="el" href="../../d2/d7/report_8c-source.html#l00193">IoReportHalResourceUsage()</a>.
<p>
<pre class="fragment"><div>00771                    :
00772 
00773     This routine takes a resourcelist and stores <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> registry resource
00774     map, <span class="keyword">using</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ClassName, DriverName and DeviceName as <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a> of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00775     key to store <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> in.
00776 
00777 Arguments:
00778 
00779     ResourceMapKey - <a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a> to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> root of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resource map.
00780 
00781     ClassName - Pointer to a <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> that contains <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> name of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Class
00782         <span class="keywordflow">for</span> <span class="keyword">this</span> resource list.
00783 
00784     DriverName - Pointer to a <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> that contains <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> name of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00785         Driver <span class="keywordflow">for</span> <span class="keyword">this</span> resource list.
00786 
00787     DeviceName - Pointer to a <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> that contains <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> name of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00788         Device <span class="keywordflow">for</span> <span class="keyword">this</span> resource list.
00789 
00790     ResourceList - P to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resource list.
00791 
00792     ResourceListSize - Value determining <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resource list.
00793 
00794 Return Value:
00795 
00796     The status returned <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">final</span> completion status of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> operation.
00797 
00798 --*/
00799 
00800 
00801 {
00802     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
00803     HANDLE classKeyHandle;
00804     HANDLE driverKeyHandle;
00805 
00806     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00807 
00808     status = <a class="code" href="../../d0/d6/iop_8h.html#a198">IopOpenRegistryKey</a>( &amp;classKeyHandle,
00809                                  ResourceMapKey,
00810                                  ClassName,
00811                                  KEY_READ | KEY_WRITE,
00812                                  TRUE );
00813 
00814     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( status )) {
00815 
00816         <span class="comment">//</span>
00817         <span class="comment">// Take the resulting name to create the key.</span>
00818         <span class="comment">//</span>
00819 
00820         status = <a class="code" href="../../d0/d6/iop_8h.html#a198">IopOpenRegistryKey</a>( &amp;driverKeyHandle,
00821                                      classKeyHandle,
00822                                      DriverName,
00823                                      KEY_READ | KEY_WRITE,
00824                                      TRUE );
00825 
00826         ZwClose( classKeyHandle );
00827 
00828 
00829         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( status )) {
00830 
00831             <span class="comment">//</span>
00832             <span class="comment">// With this key handle, we can now store the required information</span>
00833             <span class="comment">// in the value entries of the key.</span>
00834             <span class="comment">//</span>
00835 
00836             <span class="comment">//</span>
00837             <span class="comment">// Store the device name as a value name and the device information</span>
00838             <span class="comment">// as the rest of the data.</span>
00839             <span class="comment">// Only store the information if the CM_RESOURCE_LIST was present.</span>
00840             <span class="comment">//</span>
00841 
00842             <span class="keywordflow">if</span> (ResourceList-&gt;Count == 0) {
00843 
00844                 status = ZwDeleteValueKey( driverKeyHandle,
00845                                            DeviceName );
00846 
00847             } <span class="keywordflow">else</span> {
00848 
00849                 status = ZwSetValueKey( driverKeyHandle,
00850                                         DeviceName,
00851                                         0L,
00852                                         REG_RESOURCE_LIST,
00853                                         ResourceList,
00854                                         ResourceListSize );
00855 
00856             }
00857 
00858             ZwClose( driverKeyHandle );
00859 
00860         }
00861     }
00862 
00863     <span class="keywordflow">return</span> status;
00864 }
<span class="comment">//#if DBG</span>
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="report.c::IoReportHalResourceUsage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IoReportHalResourceUsage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>HalName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCM_RESOURCE_LIST&nbsp;</td>
          <td class="mdname" nowrap> <em>RawResourceList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCM_RESOURCE_LIST&nbsp;</td>
          <td class="mdname" nowrap> <em>TranslatedResourceList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ResourceListSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00193">193</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
References <a class="el" href="../../d7/d9/cmdat_8c-source.html#l00172">CmRegistryMachineHardwareResourceMapName</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00126">ExAllocatePool</a>, <a class="el" href="../../d2/d9/pnpdata_8c-source.html#l00040">IopInitHalResources</a>, <a class="el" href="../../d3/d3/internal_8c-source.html#l05325">IopOpenRegistryKey()</a>, <a class="el" href="../../d2/d7/report_8c-source.html#l00760">IopWriteResourceList()</a>, <a class="el" href="../../d4/d4/iodata_8c-source.html#l00747">IopWstrHal</a>, <a class="el" href="../../d4/d4/iodata_8c-source.html#l00723">IopWstrRaw</a>, <a class="el" href="../../d8/d8/assign_8c-source.html#l00056">IopWstrTranslated</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d5/d8/ex_8h.html#a329a174">PagedPool</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00202                    :
00203 
00204     This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d2/genxx_8h.html#a21">HAL</a> to report its resources.
00205     The Hal <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> first component to report its resources, so we don'<a class="code" href="../../d4/d1/genmips_8c.html#a17">t</a> need
00206     to acquire <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resourcemap semaphore, and we <span class="keywordflow">do</span> not need to check <span class="keywordflow">for</span>
00207     conflicts.
00208 
00209 Arguments:
00210 
00211     HalName - <a class="code" href="../../d8/d0/geninst_8c.html#a20">Name</a> of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d2/genxx_8h.html#a21">HAL</a> reporting <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resources.
00212 
00213     RawResourceList - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d2/genxx_8h.html#a21">HAL</a>'s raw resource list.
00214 
00215     TranslatedResourceList - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d2/genxx_8h.html#a21">HAL</a>'s translated resource list.
00216 
00217     DriverListSize - Value determining <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d2/genxx_8h.html#a21">HAL</a>'s resource list.
00218 
00219 Return Value:
00220 
00221     The status returned <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">final</span> completion status of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> operation.
00222 
00223 --*/
00224 
00225 {
00226     HANDLE keyHandle;
00227     UNICODE_STRING halString;
00228     UNICODE_STRING listString;
00229     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
00230 
00231     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00232 
00233     <span class="comment">//</span>
00234     <span class="comment">// First open a handle to the RESOURCEMAP key.</span>
00235     <span class="comment">//</span>
00236 
00237     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;halString, IopWstrHal );
00238 
00239     status = <a class="code" href="../../d0/d6/iop_8h.html#a198">IopOpenRegistryKey</a>( &amp;keyHandle,
00240                                  (HANDLE) NULL,
00241                                  &amp;CmRegistryMachineHardwareResourceMapName,
00242                                  KEY_READ | KEY_WRITE,
00243                                  TRUE );
00244 
00245     <span class="comment">//</span>
00246     <span class="comment">// Write out the raw resource list</span>
00247     <span class="comment">//</span>
00248 
00249     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( status )) {
00250 
00251         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;listString, IopWstrRaw);
00252 
00253         status = <a class="code" href="../../d1/d8/report_8c.html#a15">IopWriteResourceList</a>( keyHandle,
00254                                        &amp;halString,
00255                                        HalName,
00256                                        &amp;listString,
00257                                        RawResourceList,
00258                                        ResourceListSize );
00259 
00260         <span class="comment">//</span>
00261         <span class="comment">// If we successfully wrote out the raw resource list, write out</span>
00262         <span class="comment">// the translated resource list.</span>
00263         <span class="comment">//</span>
00264 
00265         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( status )) {
00266 
00267             <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;listString, IopWstrTranslated);
00268             status = <a class="code" href="../../d1/d8/report_8c.html#a15">IopWriteResourceList</a>( keyHandle,
00269                                            &amp;halString,
00270                                            HalName,
00271                                            &amp;listString,
00272                                            TranslatedResourceList,
00273                                            ResourceListSize );
00274 
00275         }
00276         ZwClose( keyHandle );
00277     }
00278 
00279     <span class="comment">//</span>
00280     <span class="comment">// If every looks fine, we will make a copy of the Hal resources so will</span>
00281     <span class="comment">// can call Arbiters to reserve the resources after they initialized.</span>
00282     <span class="comment">//</span>
00283 
00284     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
00285         <a class="code" href="../../d1/d0/pnpdata_8c.html#a2">IopInitHalResources</a> = (PCM_RESOURCE_LIST) <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(PagedPool, ResourceListSize);
00286         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/pnpdata_8c.html#a2">IopInitHalResources</a>) {
00287             RtlMoveMemory(IopInitHalResources, RawResourceList, ResourceListSize);
00288         } <span class="keywordflow">else</span> {
00289             status = STATUS_INSUFFICIENT_RESOURCES;
00290         }
00291     }
00292 
00293     <span class="keywordflow">return</span> status;
00294 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="report.c::IoReportResourceForDetection" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IoReportResourceForDetection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DriverObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCM_RESOURCE_LIST DriverList&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG DriverListSize&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCM_RESOURCE_LIST DeviceList&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG DeviceListSize&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>ConflictDetected</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00297">297</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
References <a class="el" href="../../d6/d9/pnp_8h.html#a174a129">ArbiterRequestPnpDetected</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00570">DNF_LEGACY_RESOURCE_DEVICENODE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d7/report_8c-source.html#l00469">IoReportResourceUsageInternal()</a>, <a class="el" href="../../d0/d1/bugcheck_8c-source.html#l00428">KeBugCheckEx()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00632">PNP_ERR_INVALID_PDO</a>.
<p>
<pre class="fragment"><div>00309                    :
00310 
00311     This routine will automatically search through <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> configuration
00312     registry <span class="keywordflow">for</span> resource conflicts between resources requested by a device
00313     and <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resources already claimed by previously installed drivers. The
00314     contents of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> DriverList and <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> DeviceList will be matched against
00315     all <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> other resource list stored in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> registry to determine
00316     conflicts.
00317 
00318     The function may be called more than once <span class="keywordflow">for</span> a given device or driver.
00319     If a <span class="keyword">new</span> resource list <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> given, <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> previous resource list stored in
00320     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> registry will be replaced by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">new</span> list.
00321 
00322     Note, <span class="keyword">this</span> function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> drivers acquiring resources <span class="keywordflow">for</span> detection.
00323 
00324 Arguments:
00325 
00326     DriverObject - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver's driver object.
00327 
00328     DriverList - Optional pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver's resource list.
00329 
00330     DriverListSize - Optional value determining <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver's
00331         resource list.
00332 
00333     DeviceObject - Optional pointer to driver's device object.
00334 
00335     DeviceList - Optional pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device's resource list.
00336 
00337     DriverListSize - Optional value determining <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device's
00338         resource list.
00339 
00340     ConflictDetected - Supplies a pointer to a <span class="keywordtype">boolean</span> that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> set to <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>
00341         <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resource list conflicts with an already existing resource
00342         list in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> configuration registry.
00343 
00344 Return Value:
00345 
00346     The status returned <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">final</span> completion status of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> operation.
00347 
00348 --*/
00349 
00350 {
00351     <span class="comment">//</span>
00352     <span class="comment">// Sanity check that the caller did not pass in a PnP PDO.</span>
00353     <span class="comment">//</span>
00354 
00355     <span class="keywordflow">if</span> (DeviceObject) {
00356 
00357         <span class="keywordflow">if</span> (    DeviceObject-&gt;DeviceObjectExtension-&gt;DeviceNode &amp;&amp;
00358                 !(((<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a>)DeviceObject-&gt;DeviceObjectExtension-&gt;DeviceNode)-&gt;Flags &amp; <a class="code" href="../../d9/d0/pnpiop_8h.html#a34">DNF_LEGACY_RESOURCE_DEVICENODE</a>)) {
00359 
00360             <a class="code" href="../../d9/d1/bugcheck_8c.html#a19">KeBugCheckEx</a>(PNP_DETECTED_FATAL_ERROR, PNP_ERR_INVALID_PDO, (ULONG_PTR)DeviceObject, 0, 0);
00361 
00362         }
00363 
00364     }
00365 
00366     <span class="keywordflow">return</span> <a class="code" href="../../d1/d8/report_8c.html#a14">IoReportResourceUsageInternal</a>(   ArbiterRequestPnpDetected,
00367                                             NULL,
00368                                             DriverObject,
00369                                             DriverList,
00370                                             DriverListSize,
00371                                             DeviceObject,
00372                                             DeviceList,
00373                                             DeviceListSize,
00374                                             FALSE,
00375                                             ConflictDetected);
00376 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="report.c::IoReportResourceUsage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IoReportResourceUsage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING DriverClassName&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DriverObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCM_RESOURCE_LIST DriverList&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG DriverListSize&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCM_RESOURCE_LIST DeviceList&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG DeviceListSize&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>OverrideConflict</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>ConflictDetected</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00379">379</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
References <a class="el" href="../../d6/d9/pnp_8h.html#a174a126">ArbiterRequestLegacyReported</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00570">DNF_LEGACY_RESOURCE_DEVICENODE</a>, <a class="el" href="../../d2/d7/report_8c-source.html#l00469">IoReportResourceUsageInternal()</a>, <a class="el" href="../../d0/d1/bugcheck_8c-source.html#l00428">KeBugCheckEx()</a>, and <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00632">PNP_ERR_INVALID_PDO</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/fsvga_8c-source.html#l00053">DriverEntry()</a>.
<p>
<pre class="fragment"><div>00393                    :
00394 
00395     This routine will automatically search through <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> configuration
00396     registry <span class="keywordflow">for</span> resource conflicts between resources requested by a device
00397     and <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resources already claimed by previously installed drivers. The
00398     contents of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> DriverList and <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> DeviceList will be matched against
00399     all <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> other resource list stored in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> registry to determine
00400     conflicts.
00401 
00402     If not conflict was detected, or <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> OverrideConflict flag <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> set,
00403     <span class="keyword">this</span> routine will create appropriate entries in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> system resource map
00404     (in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> registry) that will contain <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified resource lists.
00405 
00406     The function may be called more than once <span class="keywordflow">for</span> a given device or driver.
00407     If a <span class="keyword">new</span> resource list <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> given, <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> previous resource list stored in
00408     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> registry will be replaced by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">new</span> list.
00409 
00410 Arguments:
00411 
00412     DriverClassName - Optional pointer to a UNICODE_STRING which describes
00413         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">class </span>of driver under which <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver information should be
00414         stored. <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> default <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> used if none <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> given.
00415 
00416     DriverObject - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver's driver object.
00417 
00418     DriverList - Optional pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver's resource list.
00419 
00420     DriverListSize - Optional value determining <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver's
00421         resource list.
00422 
00423     DeviceObject - Optional pointer to driver's device object.
00424 
00425     DeviceList - Optional pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device's resource list.
00426 
00427     DriverListSize - Optional value determining <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver's
00428         resource list.
00429 
00430     OverrideConflict - Determines if <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> information should be reported
00431         in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> configuration registry eventhough a conflict was found with
00432         another driver or device.
00433 
00434     ConflictDetected - Supplies a pointer to a boolean that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> set to <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>
00435         if <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resource list conflicts with an already existing resource
00436         list in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> configuration registry.
00437 
00438 Return Value:
00439 
00440     The status returned <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> final completion status of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> operation.
00441 
00442 --*/
00443 
00444 {
00445     <span class="keywordflow">if</span> (DeviceObject) {
00446 
00447         <span class="keywordflow">if</span> (    DeviceObject-&gt;DeviceObjectExtension-&gt;DeviceNode &amp;&amp;
00448                 !(((<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a>)DeviceObject-&gt;DeviceObjectExtension-&gt;DeviceNode)-&gt;Flags &amp; <a class="code" href="../../d9/d0/pnpiop_8h.html#a34">DNF_LEGACY_RESOURCE_DEVICENODE</a>)) {
00449 
00450             <a class="code" href="../../d9/d1/bugcheck_8c.html#a19">KeBugCheckEx</a>(PNP_DETECTED_FATAL_ERROR, PNP_ERR_INVALID_PDO, (ULONG_PTR)DeviceObject, 0, 0);
00451 
00452         }
00453 
00454     }
00455 
00456     <span class="keywordflow">return</span> <a class="code" href="../../d1/d8/report_8c.html#a14">IoReportResourceUsageInternal</a>(   ArbiterRequestLegacyReported,
00457                                             DriverClassName,
00458                                             DriverObject,
00459                                             DriverList,
00460                                             DriverListSize,
00461                                             DeviceObject,
00462                                             DeviceList,
00463                                             DeviceListSize,
00464                                             OverrideConflict,
00465                                             ConflictDetected);
00466 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="report.c::IoReportResourceUsageInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IoReportResourceUsageInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d6/d9/pnp_8h.html#a58">ARBITER_REQUEST_SOURCE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>AllocationType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING DriverClassName&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DriverObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCM_RESOURCE_LIST DriverList&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG DriverListSize&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCM_RESOURCE_LIST DeviceList&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG DeviceListSize&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>OverrideConflict</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>ConflictDetected</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00469">469</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d7/report_8c-source.html#l00629">IopChangeInterfaceType()</a>, <a class="el" href="../../d1/d1/pri__bld_2pnpsubs_8c-source.html#l04279">IopCmResourcesToIoResources()</a>, <a class="el" href="../../d6/d0/pnpres_8c-source.html#l06180">IopLegacyResourceAllocation()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l01548">IoReportDetectedDevice()</a>, <a class="el" href="../../d2/d7/report_8c-source.html#l00297">IoReportResourceForDetection()</a>, and <a class="el" href="../../d2/d7/report_8c-source.html#l00379">IoReportResourceUsage()</a>.
<p>
<pre class="fragment"><div>00484                    :
00485 
00486     This internal routine will <span class="keywordflow">do</span> all <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> work <span class="keywordflow">for</span> <a class="code" href="../../d0/d5/io_8h.html#a542">IoReportResourceUsage</a>.
00487 
00488 Arguments:
00489 
00490     AllocationType - Specifies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> request <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a>.
00491 
00492     DriverClassName - Optional pointer to a UNICODE_STRING which describes
00493         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">class </span>of driver under which <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver information should be
00494         stored. <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> default <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> used if none <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> given.
00495 
00496     DriverObject - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver's driver object.
00497 
00498     DriverList - Optional pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver's resource list.
00499 
00500     DriverListSize - Optional value determining <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver's
00501         resource list.
00502 
00503     DeviceObject - Optional pointer to driver's device object.
00504 
00505     DeviceList - Optional pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device's resource list.
00506 
00507     DriverListSize - Optional value determining <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver's
00508         resource list.
00509 
00510     OverrideConflict - Determines if <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> information should be reported
00511         in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> configuration registry eventhough a conflict was found with
00512         another driver or device.
00513 
00514     ConflictDetected - Supplies a pointer to a boolean that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> set to <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>
00515         if <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resource list conflicts with an already existing resource
00516         list in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> configuration registry.
00517 
00518 Return Value:
00519 
00520     The status returned <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> final completion status of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> operation.
00521 
00522 --*/
00523 
00524 {
00525     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>                        status = STATUS_UNSUCCESSFUL;
00526     PCM_RESOURCE_LIST               resourceList;
00527     PCM_RESOURCE_LIST               allocatedResources;
00528     PIO_RESOURCE_REQUIREMENTS_LIST  resourceRequirements;
00529     ULONG                           attempt;
00530     BOOLEAN                         freeAllocatedResources;
00531 
00532     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(DriverObject &amp;&amp; ConflictDetected);
00533 
00534     <span class="keywordflow">if</span> (DeviceList) {
00535 
00536         resourceList = DeviceList;
00537 
00538     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (DriverList) {
00539 
00540         resourceList = DriverList;
00541 
00542     } <span class="keywordflow">else</span> {
00543 
00544         resourceList = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00545 
00546     }
00547 
00548     resourceRequirements = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00549 
00550     <span class="keywordflow">if</span> (resourceList) {
00551 
00552         <span class="keywordflow">if</span> (resourceList-&gt;Count &amp;&amp; resourceList-&gt;List[0].PartialResourceList.Count) {
00553 
00554             resourceRequirements = <a class="code" href="../../d0/d2/pri__bld_2pnpsubs_8c.html#a28">IopCmResourcesToIoResources</a> (0, resourceList, LCPRI_NORMAL);
00555 
00556             <span class="keywordflow">if</span> (resourceRequirements == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00557 
00558                 <span class="keywordflow">return</span> status;
00559 
00560             }
00561 
00562         } <span class="keywordflow">else</span> {
00563 
00564             resourceList = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00565 
00566         }
00567 
00568     }
00569 
00570     *ConflictDetected = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00571     attempt = 0;
00572     allocatedResources = resourceList;
00573     freeAllocatedResources = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00574     <span class="keywordflow">do</span> {
00575 
00576         <span class="comment">//</span>
00577         <span class="comment">// Do the legacy resource allocation.</span>
00578         <span class="comment">//</span>
00579 
00580         status = <a class="code" href="../../d5/d1/pnpres_8c.html#a107">IopLegacyResourceAllocation</a> (  AllocationType,
00581                                                 DriverObject,
00582                                                 DeviceObject,
00583                                                 resourceRequirements,
00584                                                 &amp;allocatedResources);
00585 
00586         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
00587 
00588             *ConflictDetected = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00589             <span class="keywordflow">break</span>;
00590         }
00591 
00592         <span class="comment">//</span>
00593         <span class="comment">// Change the interface type and try again.</span>
00594         <span class="comment">//</span>
00595 
00596         <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d8/report_8c.html#a9">IopChangeInterfaceType</a>(resourceRequirements, &amp;allocatedResources)) {
00597 
00598             <span class="keywordflow">break</span>;
00599         }
00600         freeAllocatedResources = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00601 
00602     } <span class="keywordflow">while</span> (++attempt &lt; 2);
00603 
00604     <span class="keywordflow">if</span> (resourceRequirements) {
00605 
00606         <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(resourceRequirements);
00607 
00608     }
00609 
00610     <span class="keywordflow">if</span> (freeAllocatedResources) {
00611 
00612         <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(allocatedResources);
00613     }
00614 
00615     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
00616 
00617         status = STATUS_SUCCESS;
00618 
00619     } <span class="keywordflow">else</span> {
00620 
00621         status = STATUS_INSUFFICIENT_RESOURCES;
00622 
00623     }
00624 
00625     <span class="keywordflow">return</span> status;
00626 }

</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a3" doxytag="report.c::IopWstrBusTranslated" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d1/d8/report_8c.html#a3">IopWstrBusTranslated</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00033">33</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="report.c::IopWstrHal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d1/d8/report_8c.html#a5">IopWstrHal</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00036">36</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d7/report_8c-source.html#l00193">IoReportHalResourceUsage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="report.c::IopWstrOtherDrivers" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d1/d8/report_8c.html#a4">IopWstrOtherDrivers</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00034">34</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="report.c::IopWstrPhysicalMemory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d1/d8/report_8c.html#a7">IopWstrPhysicalMemory</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00038">38</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d7/report_8c-source.html#l00066">IopInitializeResourceMap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="report.c::IopWstrRaw" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d1/d8/report_8c.html#a1">IopWstrRaw</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00031">31</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d0/pnpres_8c-source.html#l02034">IopBuildCmResourceList()</a>, and <a class="el" href="../../d2/d7/report_8c-source.html#l00193">IoReportHalResourceUsage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="report.c::IopWstrSpecialMemory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d1/d8/report_8c.html#a8">IopWstrSpecialMemory</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00039">39</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d7/report_8c-source.html#l00066">IopInitializeResourceMap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="report.c::IopWstrSystem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d1/d8/report_8c.html#a6">IopWstrSystem</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00037">37</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
Referenced by <a class="el" href="../../d2/d7/report_8c-source.html#l00066">IopInitializeResourceMap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="report.c::IopWstrTranslated" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR <a class="el" href="../../d1/d8/report_8c.html#a2">IopWstrTranslated</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00032">32</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:28 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

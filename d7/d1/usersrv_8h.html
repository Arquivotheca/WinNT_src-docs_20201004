<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: usersrv.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>usersrv.h File Reference</h1><code>#include &lt;windows.h&gt;</code><br>
<code>#include &lt;w32gdip.h&gt;</code><br>
<code>#include &lt;stddef.h&gt;</code><br>
<code>#include &lt;ddeml.h&gt;</code><br>
<code>#include "ddemlp.h"</code><br>
<code>#include "winuserp.h"</code><br>
<code>#include "winuserk.h"</code><br>
<code>#include &lt;dde.h&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d7/d3/ddetrack_8h-source.html">ddetrack.h</a>&gt;</code><br>
<code>#include "kbd.h"</code><br>
<code>#include &lt;wowuserp.h&gt;</code><br>
<code>#include &lt;memory.h&gt;</code><br>
<code>#include &lt;w32err.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include "help.h"</code><br>
<code>#include "<a class="el" href="../../d2/d9/inc_2user_8h-source.html">user.h</a>"</code><br>
<code>#include "cscall.h"</code><br>
<code>#include "strid.h"</code><br>
<code>#include "<a class="el" href="../../d3/d9/csrmsg_8h-source.html">csrmsg.h</a>"</code><br>
<code>#include "<a class="el" href="../../d1/d6/ntuser_2server_2globals_8h-source.html">globals.h</a>"</code><br>

<p>
<a href="../../d8/d0/usersrv_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d1/structtagCTXHARDERRORINFO.html">tagCTXHARDERRORINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d3/struct__ENDDLGPARAMS.html">_ENDDLGPARAMS</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/structtagHARDERRORINFO.html">tagHARDERRORINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d9/structtagWMCSDATA.html">tagWMCSDATA</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a0">IDD_ENDTASK</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a1">IDC_STATUSICON</a>&nbsp;&nbsp;&nbsp;0x100</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a2">IDC_STATUSMSG</a>&nbsp;&nbsp;&nbsp;0x101</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a3">IDC_STATUSCANCEL</a>&nbsp;&nbsp;&nbsp;0x102</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a4">IDC_ENDNOW</a>&nbsp;&nbsp;&nbsp;0x103</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a5">IDI_CONSOLE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a6">ETD_XICON</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a7">ETD_YICON</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a8">IDB_WARNING</a>&nbsp;&nbsp;&nbsp;0x200</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a9">IDT_CHECKAPPSTATE</a>&nbsp;&nbsp;&nbsp;0x300</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a10">IDT_PROGRESS</a>&nbsp;&nbsp;&nbsp;0x301</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a11">EDPF_NODLG</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a12">EDPF_RESPONSE</a>&nbsp;&nbsp;&nbsp;0x00000002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a13">EDPF_HUNG</a>&nbsp;&nbsp;&nbsp;0x00000004</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a14">EDPF_WAIT</a>&nbsp;&nbsp;&nbsp;0x00000008</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a15">EDPF_INPUT</a>&nbsp;&nbsp;&nbsp;0x00000010</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a16">TSN_APPSAYSOK</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a17">TSN_APPSAYSNOTOK</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a18">TSN_USERSAYSKILL</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a19">TSN_USERSAYSCANCEL</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a20">TSN_NOWINDOW</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a21">HEIF_ACTIVE</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a22">HEIF_NUKED</a>&nbsp;&nbsp;&nbsp;0x00000002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a23">HEIF_ALLOCATEDMSG</a>&nbsp;&nbsp;&nbsp;0x00000004</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a24">HEIF_REPLIED</a>&nbsp;&nbsp;&nbsp;0x00000008</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a25">HEIF_DEREFTHREAD</a>&nbsp;&nbsp;&nbsp;0x00000010</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a26">HEIF_WRONGDESKTOP</a>&nbsp;&nbsp;&nbsp;0x00000020</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a27">HEIF_SYSTEMERROR</a>&nbsp;&nbsp;&nbsp;0x00000040</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a28">HEIF_VDMERROR</a>&nbsp;&nbsp;&nbsp;0x00000080</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a29">BHE_ACTIVATE</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a30">BHE_FORCE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a31">BHE_TEST</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a32">WMCSD_IGNORE</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a33">WMCSD_REPLY</a>&nbsp;&nbsp;&nbsp;0x00000002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a34">WMCSD_RECEIVED</a>&nbsp;&nbsp;&nbsp;0x00000004</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a35">ServerLoadString</a>(hmod, id, default, allocated)&nbsp;&nbsp;&nbsp;RtlLoadStringOrError((hmod), (id), (default), (allocated), FALSE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a36">EnterCrit</a>()&nbsp;&nbsp;&nbsp;RtlEnterCriticalSection(&amp;<a class="el" href="../../d0/d7/ntuser_2server_2globals_8h.html#a0">gcsUserSrv</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a37">LeaveCrit</a>()&nbsp;&nbsp;&nbsp;RtlLeaveCriticalSection(&amp;<a class="el" href="../../d0/d7/ntuser_2server_2globals_8h.html#a0">gcsUserSrv</a>)</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d5/d1/structtagCTXHARDERRORINFO.html">tagCTXHARDERRORINFO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a38">CTXHARDERRORINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d5/d1/structtagCTXHARDERRORINFO.html">tagCTXHARDERRORINFO</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a39">PCTXHARDERRORINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d4/d3/struct__ENDDLGPARAMS.html">_ENDDLGPARAMS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a40">ENDDLGPARAMS</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d6/structtagHARDERRORINFO.html">tagHARDERRORINFO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a48">HARDERRORINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d6/structtagHARDERRORINFO.html">tagHARDERRORINFO</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a49">PHARDERRORINFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d5/d9/structtagWMCSDATA.html">tagWMCSDATA</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a50">WMCSDATA</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d5/d9/structtagWMCSDATA.html">tagWMCSDATA</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a51">PWMCSDATA</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>INT_PTR APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a52">EndTaskDlgProc</a> (HWND hwndDlg, UINT <a class="el" href="../../d2/d1/userexts_8c.html#a129">msg</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a53">BoostHardError</a> (ULONG_PTR dwProcessId, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCode)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a54">ThreadShutdownNotify</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwClientFlags, ULONG_PTR dwThread, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL CALLBACK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a55">FindWindowFromThread</a> (HWND hwnd, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a56">InternalDoEndTaskDialog</a> (TCHAR *pszTitle, HANDLE h, int cSeconds)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LPWSTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a57">RtlLoadStringOrError</a> (HANDLE hModule, UINT wID, LPWSTR lpDefault, PBOOL pAllocated, BOOL bAnsi)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a41">ghModuleWin</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a42">gCmsHungAppTimeout</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a43">gCmsWaitToKillTimeout</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a44">gdwHungToKillCount</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a45">gdwServicesProcessId</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a46">gdwServicesWaitToKillTimeout</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d1/usersrv_8h.html#a47">gdwProcessTerminateTimeout</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a29" doxytag="usersrv.h::BHE_ACTIVATE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BHE_ACTIVATE&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00161">161</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01906">BoostHardError()</a>, and <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l03502">CreateCtrlThread()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="usersrv.h::BHE_FORCE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BHE_FORCE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00162">162</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01906">BoostHardError()</a>, <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l03502">CreateCtrlThread()</a>, <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l03451">KillProcess()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00219">UserClientShutdown()</a>, and <a class="el" href="../../d3/d7/api_8c-source.html#l00818">W32WinStationTerminate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="usersrv.h::BHE_TEST" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BHE_TEST&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00163">163</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="usersrv.h::EDPF_HUNG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define EDPF_HUNG&nbsp;&nbsp;&nbsp;0x00000004          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00112">112</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01151">SetEndTaskDlgStatus()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="usersrv.h::EDPF_INPUT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define EDPF_INPUT&nbsp;&nbsp;&nbsp;0x00000010          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00114">114</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="usersrv.h::EDPF_NODLG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define EDPF_NODLG&nbsp;&nbsp;&nbsp;0x00000001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00110">110</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="usersrv.h::EDPF_RESPONSE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define EDPF_RESPONSE&nbsp;&nbsp;&nbsp;0x00000002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00111">111</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="usersrv.h::EDPF_WAIT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define EDPF_WAIT&nbsp;&nbsp;&nbsp;0x00000008          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00113">113</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01151">SetEndTaskDlgStatus()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="usersrv.h::EnterCrit" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define EnterCrit          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;RtlEnterCriticalSection(&amp;<a class="el" href="../../d0/d7/ntuser_2server_2globals_8h.html#a0">gcsUserSrv</a>)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00201">201</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00050">_ExitWindowsEx()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01906">BoostHardError()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l00222">CheckAllowForeground()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00347">CheckDefaultDesktop()</a>, <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00503">DeviceClassNotify()</a>, <a class="el" href="../../d3/d8/sirens_8c-source.html#l00112">DownSiren()</a>, <a class="el" href="../../d2/d9/kernel_2exitwin_8c-source.html#l00324">EndShutdown()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00423">GetHardErrorText()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01129">HardErrorHandler()</a>, <a class="el" href="../../d3/d8/sirens_8c-source.html#l00035">HighBeep()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l02146">InitiateWin32kCleanup()</a>, <a class="el" href="../../d5/d7/ex_8c-source.html#l00191">InitSystemThread()</a>, <a class="el" href="../../d3/d8/sirens_8c-source.html#l00071">KeyClick()</a>, <a class="el" href="../../d3/d8/sirens_8c-source.html#l00053">LowBeep()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07905">NtUserUserHandleGrantAccess()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01599">ProcessHardErrorRequest()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l02615">ProcessKeyboardInput()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l01137">ProcessMouseInput()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l03784">ProcessQueuedMouseEvents()</a>, <a class="el" href="../../d8/d1/power_8c-source.html#l00076">QueuePowerRequest()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l03858">RawInputThread()</a>, <a class="el" href="../../d7/d3/icamsg_8c-source.html#l00068">RemoteDoMessage()</a>, <a class="el" href="../../d7/d3/icamsg_8c-source.html#l00167">RemoteMessageThread()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l02053">SrvRegisterServicesProcess()</a>, <a class="el" href="../../d5/d1/timers_8c-source.html#l00746">TimersProc()</a>, <a class="el" href="../../d3/d8/sirens_8c-source.html#l00089">UpSiren()</a>, <a class="el" href="../../d1/d0/base_8c-source.html#l00102">UserBeep()</a>, <a class="el" href="../../d8/d2/validate_8c-source.html#l00472">UserEnterUserCritSec()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02519">UserGetDesktopDC()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l03035">UserGlobalAtomTableCallout()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01686">UserHardErrorEx()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02004">UserInitialize()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l01321">UserRedrawDesktop()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00099">UserRegisterEventSource()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00447">UserReleaseDC()</a>, <a class="el" href="../../d1/d6/server_2server_8c-source.html#l00192">UserServerDllInitialization()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l00404">UserSetConsoleProcessWindowStation()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02595">UserThreadCallout()</a>, <a class="el" href="../../d8/d1/power_8c-source.html#l00727">VideoPortCalloutThread()</a>, <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l00097">Win32kNtUserCleanup()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02249">Win32UserInitialize()</a>, <a class="el" href="../../d2/d4/w32_2ntuser_2kernel_2debug_8c-source.html#l00032">xxxActivateDebugger()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01101">xxxAllowSetForegroundWindow()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l01797">xxxCreateDesktop()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l01501">xxxCreateThreadInfo()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00114">xxxDesktopThread()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l00140">xxxInitInput()</a>, <a class="el" href="../../d9/d7/winsta_8c-source.html#l00026">xxxInitTerminal()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00213">xxxInternalGetMessage()</a>, <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l02184">xxxLW_LoadFonts()</a>, <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l01616">xxxMKMouseMove()</a>, <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l01543">xxxMKMoveAccelCursorTimer()</a>, <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l01486">xxxMKMoveConstCursorTimer()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l03213">xxxMouseEventDirect()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l01936">xxxMoveEventAbsolute()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l04271">xxxMsgWaitForMultipleObjects()</a>, <a class="el" href="../../d5/d3/kernel_2msgbeep_8c-source.html#l00027">xxxOldMessageBeep()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l05481">xxxPollAndWaitForSingleObject()</a>, <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00639">xxxRegisterForDeviceClassNotifications()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00466">xxxSendMessageBSM()</a>, <a class="el" href="../../d7/d8/taskman_8c-source.html#l00252">xxxSleepTask()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l04382">xxxSleepThread()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l04137">xxxUserDuplicateObject()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l04171">xxxUserFindHandleForObject()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l00341">xxxUserNotifyConsoleApplication()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l00445">xxxUserNotifyProcessCreate()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02882">xxxUserProcessCallout()</a>, and <a class="el" href="../../d7/d2/queue_8c-source.html#l05310">xxxWaitForInputIdle()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="usersrv.h::ETD_XICON" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ETD_XICON&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00077">77</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="usersrv.h::ETD_YICON" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ETD_YICON&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00078">78</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="usersrv.h::HEIF_ACTIVE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HEIF_ACTIVE&nbsp;&nbsp;&nbsp;0x00000001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00151">151</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01906">BoostHardError()</a>, and <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01129">HardErrorHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="usersrv.h::HEIF_ALLOCATEDMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HEIF_ALLOCATEDMSG&nbsp;&nbsp;&nbsp;0x00000004          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00153">153</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00291">FreePhi()</a>, and <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01686">UserHardErrorEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="usersrv.h::HEIF_DEREFTHREAD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HEIF_DEREFTHREAD&nbsp;&nbsp;&nbsp;0x00000010          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00155">155</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00310">ReplyHardError()</a>, and <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01686">UserHardErrorEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="usersrv.h::HEIF_NUKED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HEIF_NUKED&nbsp;&nbsp;&nbsp;0x00000002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00152">152</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01906">BoostHardError()</a>, and <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01129">HardErrorHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="usersrv.h::HEIF_REPLIED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HEIF_REPLIED&nbsp;&nbsp;&nbsp;0x00000008          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00154">154</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00310">ReplyHardError()</a>, and <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01686">UserHardErrorEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="usersrv.h::HEIF_SYSTEMERROR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HEIF_SYSTEMERROR&nbsp;&nbsp;&nbsp;0x00000040          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00157">157</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00423">GetHardErrorText()</a>, and <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01686">UserHardErrorEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="usersrv.h::HEIF_VDMERROR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HEIF_VDMERROR&nbsp;&nbsp;&nbsp;0x00000080          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00158">158</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00423">GetHardErrorText()</a>, and <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01129">HardErrorHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="usersrv.h::HEIF_WRONGDESKTOP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HEIF_WRONGDESKTOP&nbsp;&nbsp;&nbsp;0x00000020          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00156">156</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00347">CheckDefaultDesktop()</a>, and <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01129">HardErrorHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="usersrv.h::IDB_WARNING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDB_WARNING&nbsp;&nbsp;&nbsp;0x200          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00080">80</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="usersrv.h::IDC_ENDNOW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDC_ENDNOW&nbsp;&nbsp;&nbsp;0x103          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00074">74</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01151">SetEndTaskDlgStatus()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="usersrv.h::IDC_STATUSCANCEL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDC_STATUSCANCEL&nbsp;&nbsp;&nbsp;0x102          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00073">73</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01151">SetEndTaskDlgStatus()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="usersrv.h::IDC_STATUSICON" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDC_STATUSICON&nbsp;&nbsp;&nbsp;0x100          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00071">71</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="usersrv.h::IDC_STATUSMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDC_STATUSMSG&nbsp;&nbsp;&nbsp;0x101          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00072">72</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01151">SetEndTaskDlgStatus()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="usersrv.h::IDD_ENDTASK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDD_ENDTASK&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00070">70</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="usersrv.h::IDI_CONSOLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDI_CONSOLE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00076">76</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, and <a class="el" href="../../d1/d4/srvinit_8c-source.html#l00590">InitWindowClass()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="usersrv.h::IDT_CHECKAPPSTATE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDT_CHECKAPPSTATE&nbsp;&nbsp;&nbsp;0x300          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00082">82</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01151">SetEndTaskDlgStatus()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="usersrv.h::IDT_PROGRESS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDT_PROGRESS&nbsp;&nbsp;&nbsp;0x301          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00083">83</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01151">SetEndTaskDlgStatus()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="usersrv.h::LeaveCrit" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LeaveCrit          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;RtlLeaveCriticalSection(&amp;<a class="el" href="../../d0/d7/ntuser_2server_2globals_8h.html#a0">gcsUserSrv</a>)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00202">202</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00050">_ExitWindowsEx()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01906">BoostHardError()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l00222">CheckAllowForeground()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00347">CheckDefaultDesktop()</a>, <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00503">DeviceClassNotify()</a>, <a class="el" href="../../d3/d8/sirens_8c-source.html#l00112">DownSiren()</a>, <a class="el" href="../../d2/d9/kernel_2exitwin_8c-source.html#l00324">EndShutdown()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00423">GetHardErrorText()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01129">HardErrorHandler()</a>, <a class="el" href="../../d3/d8/sirens_8c-source.html#l00035">HighBeep()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l02146">InitiateWin32kCleanup()</a>, <a class="el" href="../../d5/d7/ex_8c-source.html#l00191">InitSystemThread()</a>, <a class="el" href="../../d3/d8/sirens_8c-source.html#l00071">KeyClick()</a>, <a class="el" href="../../d3/d8/sirens_8c-source.html#l00053">LowBeep()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07905">NtUserUserHandleGrantAccess()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01599">ProcessHardErrorRequest()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l02615">ProcessKeyboardInput()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l01137">ProcessMouseInput()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l03784">ProcessQueuedMouseEvents()</a>, <a class="el" href="../../d8/d1/power_8c-source.html#l00076">QueuePowerRequest()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l03858">RawInputThread()</a>, <a class="el" href="../../d7/d3/icamsg_8c-source.html#l00068">RemoteDoMessage()</a>, <a class="el" href="../../d7/d3/icamsg_8c-source.html#l00167">RemoteMessageThread()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l02053">SrvRegisterServicesProcess()</a>, <a class="el" href="../../d5/d1/timers_8c-source.html#l00746">TimersProc()</a>, <a class="el" href="../../d3/d8/sirens_8c-source.html#l00089">UpSiren()</a>, <a class="el" href="../../d1/d0/base_8c-source.html#l00102">UserBeep()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02519">UserGetDesktopDC()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l03035">UserGlobalAtomTableCallout()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01686">UserHardErrorEx()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02004">UserInitialize()</a>, <a class="el" href="../../d8/d2/validate_8c-source.html#l00477">UserLeaveUserCritSec()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l01321">UserRedrawDesktop()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00099">UserRegisterEventSource()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00447">UserReleaseDC()</a>, <a class="el" href="../../d1/d6/server_2server_8c-source.html#l00192">UserServerDllInitialization()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l00404">UserSetConsoleProcessWindowStation()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02595">UserThreadCallout()</a>, <a class="el" href="../../d8/d1/power_8c-source.html#l00727">VideoPortCalloutThread()</a>, <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l00097">Win32kNtUserCleanup()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02249">Win32UserInitialize()</a>, <a class="el" href="../../d2/d4/w32_2ntuser_2kernel_2debug_8c-source.html#l00032">xxxActivateDebugger()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l01101">xxxAllowSetForegroundWindow()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l01797">xxxCreateDesktop()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l01501">xxxCreateThreadInfo()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00114">xxxDesktopThread()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l00140">xxxInitInput()</a>, <a class="el" href="../../d9/d7/winsta_8c-source.html#l00026">xxxInitTerminal()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00213">xxxInternalGetMessage()</a>, <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l02184">xxxLW_LoadFonts()</a>, <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l01616">xxxMKMouseMove()</a>, <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l01543">xxxMKMoveAccelCursorTimer()</a>, <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l01486">xxxMKMoveConstCursorTimer()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l03213">xxxMouseEventDirect()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l01936">xxxMoveEventAbsolute()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l04271">xxxMsgWaitForMultipleObjects()</a>, <a class="el" href="../../d5/d3/kernel_2msgbeep_8c-source.html#l00027">xxxOldMessageBeep()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l05481">xxxPollAndWaitForSingleObject()</a>, <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00639">xxxRegisterForDeviceClassNotifications()</a>, <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00466">xxxSendMessageBSM()</a>, <a class="el" href="../../d7/d8/taskman_8c-source.html#l00252">xxxSleepTask()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l04382">xxxSleepThread()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l04137">xxxUserDuplicateObject()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l04171">xxxUserFindHandleForObject()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l00341">xxxUserNotifyConsoleApplication()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l00445">xxxUserNotifyProcessCreate()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02882">xxxUserProcessCallout()</a>, and <a class="el" href="../../d7/d2/queue_8c-source.html#l05310">xxxWaitForInputIdle()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="usersrv.h::ServerLoadString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ServerLoadString          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hmod,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>id,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>default,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>allocated&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;RtlLoadStringOrError((hmod), (id), (default), (allocated), FALSE)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00196">196</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="usersrv.h::TSN_APPSAYSNOTOK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TSN_APPSAYSNOTOK&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00119">119</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01601">_EndTask()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00219">UserClientShutdown()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="usersrv.h::TSN_APPSAYSOK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TSN_APPSAYSOK&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00118">118</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00219">UserClientShutdown()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="usersrv.h::TSN_NOWINDOW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TSN_NOWINDOW&nbsp;&nbsp;&nbsp;5          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00122">122</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00219">UserClientShutdown()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="usersrv.h::TSN_USERSAYSCANCEL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TSN_USERSAYSCANCEL&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00121">121</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01601">_EndTask()</a>, <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l03502">CreateCtrlThread()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00219">UserClientShutdown()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="usersrv.h::TSN_USERSAYSKILL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TSN_USERSAYSKILL&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00120">120</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00219">UserClientShutdown()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="usersrv.h::WMCSD_IGNORE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WMCSD_IGNORE&nbsp;&nbsp;&nbsp;0x00000001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00174">174</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00676">WMCSCallback()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="usersrv.h::WMCSD_RECEIVED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WMCSD_RECEIVED&nbsp;&nbsp;&nbsp;0x00000004          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00176">176</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="usersrv.h::WMCSD_REPLY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WMCSD_REPLY&nbsp;&nbsp;&nbsp;0x00000002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00175">175</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00676">WMCSCallback()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a38" doxytag="usersrv.h::CTXHARDERRORINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d5/d1/structtagCTXHARDERRORINFO.html">tagCTXHARDERRORINFO</a>  <a class="el" href="../../d5/d1/structtagCTXHARDERRORINFO.html">CTXHARDERRORINFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d3/icamsg_8c-source.html#l00068">RemoteDoMessage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="usersrv.h::ENDDLGPARAMS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d4/d3/struct__ENDDLGPARAMS.html">_ENDDLGPARAMS</a>  <a class="el" href="../../d4/d3/struct__ENDDLGPARAMS.html">ENDDLGPARAMS</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="usersrv.h::HARDERRORINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d6/structtagHARDERRORINFO.html">tagHARDERRORINFO</a>  <a class="el" href="../../d3/d6/structtagHARDERRORINFO.html">HARDERRORINFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01686">UserHardErrorEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="usersrv.h::PCTXHARDERRORINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d5/d1/structtagCTXHARDERRORINFO.html">tagCTXHARDERRORINFO</a> * <a class="el" href="../../d5/d1/structtagCTXHARDERRORINFO.html">PCTXHARDERRORINFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="usersrv.h::PHARDERRORINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d6/structtagHARDERRORINFO.html">tagHARDERRORINFO</a> * <a class="el" href="../../d3/d6/structtagHARDERRORINFO.html">PHARDERRORINFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a51" doxytag="usersrv.h::PWMCSDATA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d5/d9/structtagWMCSDATA.html">tagWMCSDATA</a> * <a class="el" href="../../d5/d9/structtagWMCSDATA.html">PWMCSDATA</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00676">WMCSCallback()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a50" doxytag="usersrv.h::WMCSDATA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d5/d9/structtagWMCSDATA.html">tagWMCSDATA</a>  <a class="el" href="../../d5/d9/structtagWMCSDATA.html">WMCSDATA</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a53" doxytag="usersrv.h::BoostHardError" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL BoostHardError           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>dwProcessId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01906">1906</a> of file <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html">w32/ntuser/server/harderr.c</a>.
<p>
References <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00161">BHE_ACTIVATE</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00162">BHE_FORCE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00142">tagHARDERRORINFO::dwHEIFFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00201">EnterCrit</a>, <a class="el" href="../../d1/d7/clenum_8c-source.html#l00206">EnumThreadWindows()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d6/server_2server_8c-source.html#l01255">FindWindowFromThread()</a>, <a class="el" href="../../d5/d5/ntuser_2server_2globals_8c-source.html#l00044">gdwHardErrorThreadId</a>, <a class="el" href="../../d5/d5/ntuser_2server_2globals_8c-source.html#l00043">gphiList</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00151">HEIF_ACTIVE</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00152">HEIF_NUKED</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00202">LeaveCrit</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00643">NtUserHardErrorControl()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00138">tagHARDERRORINFO::phiNext</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00481">PostThreadMessage()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00310">ReplyHardError()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03499">SetForegroundWindow()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l03502">CreateCtrlThread()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l03451">KillProcess()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00219">UserClientShutdown()</a>, and <a class="el" href="../../d3/d7/api_8c-source.html#l00818">W32WinStationTerminate()</a>.
<p>
<pre class="fragment"><div>01909 {
01910     DESKRESTOREDATA drdRestore;
01911     <a class="code" href="../../d3/d6/structtagHARDERRORINFO.html">PHARDERRORINFO</a> phi, *pphi;
01912     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fHasError = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01913 
01914     <a class="code" href="../../d7/d1/usersrv_8h.html#a36">EnterCrit</a>();
01915     <span class="comment">/*</span>
01916 <span class="comment">     * If the list is empty, nothing do to here.</span>
01917 <span class="comment">     */</span>
01918     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d6/ntuser_2server_2globals_8c.html#a11">gphiList</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01919         <a class="code" href="../../d7/d1/usersrv_8h.html#a37">LeaveCrit</a>();
01920         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01921     }
01922     drdRestore.pdeskRestore = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01923     <span class="comment">/*</span>
01924 <span class="comment">     * Walk the hard error list</span>
01925 <span class="comment">     */</span>
01926     pphi = &amp;<a class="code" href="../../d4/d6/ntuser_2server_2globals_8c.html#a11">gphiList</a>;
01927     <span class="keywordflow">while</span> (*pphi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01928         <span class="comment">/*</span>
01929 <span class="comment">         * If not not nuking all and not owned by dwProcessId, continue walking</span>
01930 <span class="comment">         */</span>
01931         <span class="keywordflow">if</span> (dwProcessId != (ULONG_PTR)-1) {
01932             <span class="keywordflow">if</span> (((*pphi)-&gt;pthread == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01933                     || ((ULONG_PTR)((*pphi)-&gt;pthread-&gt;ClientId.UniqueProcess) != dwProcessId)) {
01934 
01935                 pphi = &amp;(*pphi)-&gt;<a class="code" href="../../d3/d6/structtagHARDERRORINFO.html#o0">phiNext</a>;
01936                 <span class="keywordflow">continue</span>;
01937             }
01938         } <span class="keywordflow">else</span> {
01939             UserAssert(dwCode == BHE_FORCE);
01940         }
01941         <span class="comment">/*</span>
01942 <span class="comment">         * Got one so we want to return TRUE</span>
01943 <span class="comment">         */</span>
01944         fHasError = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01945         <span class="comment">/*</span>
01946 <span class="comment">         * If nuking the request</span>
01947 <span class="comment">         */</span>
01948         <span class="keywordflow">if</span> (dwCode == <a class="code" href="../../d7/d1/usersrv_8h.html#a30">BHE_FORCE</a>) {
01949             <span class="comment">/*</span>
01950 <span class="comment">             * Unlink it from the list.</span>
01951 <span class="comment">             */</span>
01952             phi = *pphi;
01953             *pphi = phi-&gt;<a class="code" href="../../d3/d6/structtagHARDERRORINFO.html#o0">phiNext</a>;
01954 
01955             <span class="comment">/*</span>
01956 <span class="comment">             * If this box is being shown right now, signal it to go away.</span>
01957 <span class="comment">             * Otherwise, nuke it</span>
01958 <span class="comment">             */</span>
01959             <span class="keywordflow">if</span> (phi-&gt;<a class="code" href="../../d3/d6/structtagHARDERRORINFO.html#o4">dwHEIFFlags</a> &amp; <a class="code" href="../../d7/d1/usersrv_8h.html#a21">HEIF_ACTIVE</a>) {
01960                 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwHardErrorHandler = <a class="code" href="../../d4/d6/ntuser_2server_2globals_8c.html#a12">gdwHardErrorThreadId</a>;
01961                 phi-&gt;<a class="code" href="../../d3/d6/structtagHARDERRORINFO.html#o4">dwHEIFFlags</a> |= <a class="code" href="../../d7/d1/usersrv_8h.html#a22">HEIF_NUKED</a>;
01962                 <a class="code" href="../../d7/d1/usersrv_8h.html#a37">LeaveCrit</a>();
01963                 <a class="code" href="../../d0/d8/ntcftxt_8h.html#a21">PostThreadMessage</a>(dwHardErrorHandler, WM_QUIT, 0, 0);
01964             } <span class="keywordflow">else</span> {
01965                 <span class="comment">/*</span>
01966 <span class="comment">                 * Acknowledge the error as not handled, reply and free</span>
01967 <span class="comment">                 */</span>
01968                 <a class="code" href="../../d7/d1/usersrv_8h.html#a37">LeaveCrit</a>();
01969                 <a class="code" href="../../d7/d8/w32_2ntuser_2server_2harderr_8c.html#a21">ReplyHardError</a>(phi, ResponseNotHandled);
01970             }
01971 
01972             <span class="comment">/*</span>
01973 <span class="comment">             * Restart the search because we left the crit sect.</span>
01974 <span class="comment">             */</span>
01975             <a class="code" href="../../d7/d1/usersrv_8h.html#a36">EnterCrit</a>();
01976             pphi = &amp;<a class="code" href="../../d4/d6/ntuser_2server_2globals_8c.html#a11">gphiList</a>;
01977 
01978             <span class="comment">/* continue */</span>
01979 
01980         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwCode == <a class="code" href="../../d7/d1/usersrv_8h.html#a29">BHE_ACTIVATE</a>) {
01981             <span class="comment">/*</span>
01982 <span class="comment">             * If it's active, find it and show it.</span>
01983 <span class="comment">             */</span>
01984             phi = *pphi;
01985             <span class="keywordflow">if</span> (phi-&gt;<a class="code" href="../../d3/d6/structtagHARDERRORINFO.html#o4">dwHEIFFlags</a> &amp; <a class="code" href="../../d7/d1/usersrv_8h.html#a21">HEIF_ACTIVE</a>) {
01986                 HWND hwndError = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01987                 <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwHardErrorHandler = <a class="code" href="../../d4/d6/ntuser_2server_2globals_8c.html#a12">gdwHardErrorThreadId</a>;
01988 
01989                 <a class="code" href="../../d7/d1/usersrv_8h.html#a37">LeaveCrit</a>();
01990                 <a class="code" href="../../d0/d8/clenum_8c.html#a9">EnumThreadWindows</a>(dwHardErrorHandler, FindWindowFromThread, (LPARAM)&amp;hwndError);
01991 
01992                 <span class="keywordflow">if</span> ((hwndError != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01993                         &amp;&amp; (HEC_SUCCESS == <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a82">NtUserHardErrorControl</a>(HardErrorAttachNoQueue, NULL, &amp;drdRestore))) {
01994 
01995                     <a class="code" href="../../d3/d8/client_8c.html#a131">SetForegroundWindow</a>(hwndError);
01996 
01997                     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a82">NtUserHardErrorControl</a>(HardErrorDetachNoQueue, NULL, &amp;drdRestore);
01998                 }
01999                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02000             }
02001 
02002             <span class="comment">/*</span>
02003 <span class="comment">             * It's not active so move it to the head of the list</span>
02004 <span class="comment">             *  to make it show up next.</span>
02005 <span class="comment">             */</span>
02006             *pphi = phi-&gt;<a class="code" href="../../d3/d6/structtagHARDERRORINFO.html#o0">phiNext</a>;
02007             phi-&gt;<a class="code" href="../../d3/d6/structtagHARDERRORINFO.html#o0">phiNext</a> = <a class="code" href="../../d4/d6/ntuser_2server_2globals_8c.html#a11">gphiList</a>;
02008             <a class="code" href="../../d4/d6/ntuser_2server_2globals_8c.html#a11">gphiList</a> = phi;
02009             <span class="keywordflow">break</span>;
02010 
02011         } <span class="keywordflow">else</span> { <span class="comment">/* BHE_TEST */</span>
02012             <span class="comment">/*</span>
02013 <span class="comment">             * The caller just want to know if this process owns a hard error</span>
02014 <span class="comment">             */</span>
02015             <span class="keywordflow">break</span>;
02016         }
02017     } <span class="comment">/*  while (*pphi != NULL) */</span>
02018 
02019     <a class="code" href="../../d7/d1/usersrv_8h.html#a37">LeaveCrit</a>();
02020 
02021     <span class="comment">/*</span>
02022 <span class="comment">     * Bug 284468. Wake up the hard error handler</span>
02023 <span class="comment">     */</span>
02024     <span class="keywordflow">if</span> (dwCode == <a class="code" href="../../d7/d1/usersrv_8h.html#a30">BHE_FORCE</a> &amp;&amp; <a class="code" href="../../d4/d6/ntuser_2server_2globals_8c.html#a12">gdwHardErrorThreadId</a> != 0) {
02025         <a class="code" href="../../d0/d8/ntcftxt_8h.html#a21">PostThreadMessage</a>(gdwHardErrorThreadId, WM_NULL, 0, 0);
02026     }
02027 
02028     <span class="keywordflow">return</span> fHasError;
02029 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a52" doxytag="usersrv.h::EndTaskDlgProc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> INT_PTR APIENTRY EndTaskDlgProc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndDlg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">1312</a> of file <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html">server/exitwin.c</a>.
<p>
References <a class="el" href="../../d2/d0/bench_8c-source.html#l00048">APIENTRY</a>, <a class="el" href="../../d4/d9/user32_8def-source.html#l00327">BeginPaint</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00163">BHE_TEST</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01906">BoostHardError()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00031">CCHBODYMAX</a>, <a class="el" href="../../d4/d3/w32_2ntuser_2client_2nt6_2pch_8h-source.html#l00039">DestroyWindow</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00896">DrawEdge()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01204">DrawIcon()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00112">EDPF_HUNG</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00114">EDPF_INPUT</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00110">EDPF_NODLG</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00111">EDPF_RESPONSE</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00113">EDPF_WAIT</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00077">ETD_XICON</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00078">ETD_YICON</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d1/rtl_2draw_8c-source.html#l00061">FillRect()</a>, <a class="el" href="../../d5/d5/ntuser_2server_2globals_8c-source.html#l00022">gdwHungToKillCount</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00728">GetApplicationText()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00440">GetClassLongPtr()</a>, <a class="el" href="../../d4/d3/w32_2ntuser_2client_2nt6_2pch_8h-source.html#l00021">GetDC</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00698">GetInputWindow()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01387">GetProp()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00401">GetSystemMetrics()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00388">GetWindowLongPtr()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00781">GetWindowText()</a>, <a class="el" href="../../d5/d5/ntuser_2server_2globals_8c-source.html#l00017">ghModuleWin</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00080">ICON_PROP_NAME</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00080">IDB_WARNING</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00076">IDI_CONSOLE</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00082">IDT_CHECKAPPSTATE</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00083">IDT_PROGRESS</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00165">InflateRect()</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01052">ReleaseDC()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01151">SetEndTaskDlgStatus()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00408">SetWindowLongPtr()</a>, <a class="el" href="../../d4/d3/w32_2ntuser_2client_2nt6_2pch_8h-source.html#l00009">SetWindowPos</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00848">SetWindowText()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00608">WMCS_CONSOLE</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>.
<p>
<pre class="fragment"><div>01317 {
01318     <a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html">ENDDLGPARAMS</a>* pedp;
01319     WCHAR achTitle[<a class="code" href="../../d2/d0/server_2exitwin_8c.html#a3">CCHBODYMAX</a>];
01320     WCHAR *pwcText, *pwcTemp;
01321     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uLen;
01322     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uStrId;
01323     PAINTSTRUCT ps;
01324     HDC hdc, hdcMem;
01325     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fIsInput, fWasInput;
01326 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01327 <span class="preprocessor"></span>    <span class="keywordtype">int</span> iOldLayout;
01328 <span class="preprocessor">#endif</span>
01329 <span class="preprocessor"></span>
01330     <span class="keywordflow">switch</span> (<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>) {
01331     <span class="keywordflow">case</span> WM_INITDIALOG:
01332         <span class="comment">/*</span>
01333 <span class="comment">         * Save parameters</span>
01334 <span class="comment">         */</span>
01335         pedp = (<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html">ENDDLGPARAMS</a>*)lParam;
01336         <a class="code" href="../../d5/d9/cltxt_8h.html#a12">SetWindowLongPtr</a>(hwndDlg, GWLP_USERDATA, (ULONG_PTR)pedp);
01337         <span class="comment">/*</span>
01338 <span class="comment">         * This tells the caller that the dialog is up</span>
01339 <span class="comment">         */</span>
01340         pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> &amp;= ~<a class="code" href="../../d7/d1/usersrv_8h.html#a11">EDPF_NODLG</a>;
01341         <span class="comment">/*</span>
01342 <span class="comment">         * Build the dialog title making sure that</span>
01343 <span class="comment">         *  we end up with a NULL terminated string.</span>
01344 <span class="comment">         */</span>
01345         *(achTitle + <a class="code" href="../../d2/d0/server_2exitwin_8c.html#a3">CCHBODYMAX</a> - 1) = (WCHAR)0;
01346         uLen = <a class="code" href="../../d5/d9/cltxt_8h.html#a21">GetWindowText</a>(hwndDlg, achTitle, CCHBODYMAX - 1);
01347         pwcText = achTitle + uLen;
01348         uLen = <a class="code" href="../../d2/d0/server_2exitwin_8c.html#a3">CCHBODYMAX</a> - 1 - uLen;
01349         <span class="comment">/*</span>
01350 <span class="comment">         * Console provides the title; we figure it out for windows apps.</span>
01351 <span class="comment">         */</span>
01352         <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o1">dwClientFlags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a134">WMCS_CONSOLE</a>) {
01353             pwcTemp = (WCHAR *)pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o5">lParam</a>;
01354             <span class="keywordflow">while</span> (uLen-- &amp;&amp; (*pwcText++ = *pwcTemp++));
01355         } <span class="keywordflow">else</span> {
01356             <a class="code" href="../../d2/d0/server_2exitwin_8c.html#a13">GetApplicationText</a>((HWND)pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o5">lParam</a>, pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o4">pcsrt</a>-&gt;ThreadHandle, pwcText, uLen);
01357         }
01358 
01359         <a class="code" href="../../d5/d9/cltxt_8h.html#a23">SetWindowText</a>(hwndDlg, achTitle);
01360         <span class="comment">/*</span>
01361 <span class="comment">         * Get the app's icon: first look for atomIconProperty</span>
01362 <span class="comment">         * if not available, try the class icon.</span>
01363 <span class="comment">         * else, use the default icon.</span>
01364 <span class="comment">         */</span>
01365         pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o9">hIcon</a> = (HICON)<a class="code" href="../../d5/d9/cltxt_8h.html#a27">GetProp</a>((HWND)pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o5">lParam</a>, ICON_PROP_NAME);
01366 
01367         <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o9">hIcon</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01368 
01369             pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o9">hIcon</a> = (HICON)<a class="code" href="../../d5/d9/cltxt_8h.html#a13">GetClassLongPtr</a>((HWND)pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o5">lParam</a>, GCLP_HICON);
01370 
01371             <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o9">hIcon</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01372 
01373                 <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o1">dwClientFlags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a134">WMCS_CONSOLE</a>) {
01374                     pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o9">hIcon</a> = LoadIcon(ghModuleWin, MAKEINTRESOURCE(IDI_CONSOLE));
01375                 }
01376                 <span class="keywordflow">else</span> {
01377                     pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o9">hIcon</a> = LoadIcon(NULL, IDI_APPLICATION);
01378                 }
01379             }
01380         }
01381 
01382         <span class="comment">/*</span>
01383 <span class="comment">         * Figure out what message the caller wants initially</span>
01384 <span class="comment">         */</span>
01385         <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o1">dwClientFlags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a134">WMCS_CONSOLE</a>) {
01386             uStrId = STR_ENDTASK_CONSOLE;
01387         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> &amp; <a class="code" href="../../d7/d1/usersrv_8h.html#a15">EDPF_INPUT</a>) {
01388             uStrId = STR_ENDTASK_INPUT;
01389         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> &amp; <a class="code" href="../../d7/d1/usersrv_8h.html#a14">EDPF_WAIT</a>) {
01390             uStrId = STR_ENDTASK_WAIT;
01391         } <span class="keywordflow">else</span> {
01392             uStrId = STR_ENDTASK_HUNG;
01393         }
01394         <span class="comment">/*</span>
01395 <span class="comment">         * Display the message, set the focus and show the dialog</span>
01396 <span class="comment">         */</span>
01397         <a class="code" href="../../d2/d0/server_2exitwin_8c.html#a15">SetEndTaskDlgStatus</a>(pedp, hwndDlg, uStrId, TRUE);
01398         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01399 
01400 
01401     <span class="keywordflow">case</span> WM_PAINT:
01402         pedp = (<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html">ENDDLGPARAMS</a>*)<a class="code" href="../../d5/d9/cltxt_8h.html#a11">GetWindowLongPtr</a>(hwndDlg, GWLP_USERDATA);
01403         <span class="keywordflow">if</span> ((pedp == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o9">hIcon</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
01404             <span class="keywordflow">break</span>;
01405         }
01406         <span class="comment">/*</span>
01407 <span class="comment">         * Draw the icon</span>
01408 <span class="comment">         */</span>
01409         hdc = <a class="code" href="../../d3/d0/user32_8def.html#a41">BeginPaint</a>(hwndDlg, &amp;ps);
01410 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01411 <span class="preprocessor"></span>        iOldLayout = GetLayout(hdc);
01412         <span class="keywordflow">if</span> (iOldLayout != GDI_ERROR) {
01413             SetLayout(hdc, iOldLayout|LAYOUT_BITMAPORIENTATIONPRESERVED);
01414         }
01415 <span class="preprocessor">#endif</span>
01416 <span class="preprocessor"></span>        <a class="code" href="../../d3/d8/client_8c.html#a49">DrawIcon</a>(hdc, ETD_XICON, ETD_YICON, pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o9">hIcon</a>);
01417 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01418 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (iOldLayout != GDI_ERROR) {
01419             SetLayout(hdc, iOldLayout);
01420         }
01421 <span class="preprocessor">#endif</span>
01422 <span class="preprocessor"></span>        <span class="comment">/*</span>
01423 <span class="comment">         * If waiting, draw the progress bar;</span>
01424 <span class="comment">         *  else draw the warning sign</span>
01425 <span class="comment">         */</span>
01426         <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> &amp; <a class="code" href="../../d7/d1/usersrv_8h.html#a14">EDPF_WAIT</a>) {
01427             RECT rc;
01428             <span class="comment">/*</span>
01429 <span class="comment">             * Draw a client-edge-looking border.</span>
01430 <span class="comment">             */</span>
01431             rc = pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o10">rcBar</a>;
01432             <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a15">DrawEdge</a>(hdc, &amp;rc, BDR_SUNKENOUTER, BF_RECT | BF_ADJUST);
01433             <a class="code" href="../../d3/d6/rect_8c.html#a7">InflateRect</a>(&amp;rc, -1, -1);
01434             <span class="comment">/*</span>
01435 <span class="comment">             * Draw the blocks up to current position</span>
01436 <span class="comment">             */</span>
01437             rc.right = rc.left + pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o13">iProgressWidth</a> - 1;
01438             <span class="keywordflow">while</span> (rc.left &lt; pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o11">rcProgress</a>.left) {
01439                 <span class="keywordflow">if</span> (rc.right &gt; pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o12">iProgressStop</a>) {
01440                     rc.right = pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o12">iProgressStop</a>;
01441                     <span class="keywordflow">if</span> (rc.left &gt;= rc.right) {
01442                         <span class="keywordflow">break</span>;
01443                     }
01444                 }
01445                 <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a3">FillRect</a>(hdc, &amp;rc, pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o14">hbrProgress</a>);
01446                 rc.left += pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o13">iProgressWidth</a>;
01447                 rc.right += pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o13">iProgressWidth</a>;
01448             }
01449         } <span class="keywordflow">else</span> {
01450             <span class="comment">/*</span>
01451 <span class="comment">             * Load the bitmap the first time around and</span>
01452 <span class="comment">             *  figure out where it goes</span>
01453 <span class="comment">            */</span>
01454             <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o7">hbmpWarning</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01455                 BITMAP bmp;
01456                 pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o7">hbmpWarning</a> = LoadBitmap(ghModuleWin, MAKEINTRESOURCE(IDB_WARNING));
01457                 <span class="keywordflow">if</span> (GetObject(pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o7">hbmpWarning</a>, <span class="keyword">sizeof</span>(bmp), &amp;bmp)) {
01458                     pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o8">rcWarning</a>.left = <a class="code" href="../../d7/d1/usersrv_8h.html#a6">ETD_XICON</a>;
01459                     pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o8">rcWarning</a>.top = <a class="code" href="../../d7/d1/usersrv_8h.html#a6">ETD_XICON</a> + 32 - bmp.bmHeight;
01460                     pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o8">rcWarning</a>.right = bmp.bmWidth;
01461                     pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o8">rcWarning</a>.bottom = bmp.bmHeight;
01462                 }
01463             }
01464             <span class="comment">/*</span>
01465 <span class="comment">             * Blit it</span>
01466 <span class="comment">             */</span>
01467             hdcMem = CreateCompatibleDC(hdc);
01468             SelectObject(hdcMem, pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o7">hbmpWarning</a>);
01469             GdiTransparentBlt(hdc, pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o8">rcWarning</a>.left, pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o8">rcWarning</a>.top,
01470                    pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o8">rcWarning</a>.right, pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o8">rcWarning</a>.bottom,
01471                    hdcMem, 0, 0, pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o8">rcWarning</a>.right, pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o8">rcWarning</a>.bottom, RGB(255, 0, 255));
01472             DeleteDC(hdcMem);
01473         }
01474 
01475         EndPaint(hwndDlg, &amp;ps);
01476         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01477 
01478     <span class="keywordflow">case</span> WM_TIMER:
01479         pedp = (<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html">ENDDLGPARAMS</a>*)<a class="code" href="../../d5/d9/cltxt_8h.html#a11">GetWindowLongPtr</a>(hwndDlg, GWLP_USERDATA);
01480         <span class="keywordflow">if</span> (pedp == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01481             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01482         }
01483         <span class="keywordflow">switch</span> (wParam) {
01484         <span class="keywordflow">case</span> <a class="code" href="../../d7/d1/usersrv_8h.html#a9">IDT_CHECKAPPSTATE</a>:
01485             pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o6">dwCheckTimerCount</a>++;
01486             <span class="comment">/*</span>
01487 <span class="comment">             * Check if the app has switched from/to a waiting-for-input</span>
01488 <span class="comment">             *  mode. If so, update the dialog and wait a little longer</span>
01489 <span class="comment">             */</span>
01490             fIsInput = (<a class="code" href="../../d7/d1/usersrv_8h.html#a53">BoostHardError</a>((ULONG_PTR)pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o4">pcsrt</a>-&gt;ClientId.UniqueProcess, BHE_TEST)
01491                         || (<a class="code" href="../../d2/d0/server_2exitwin_8c.html#a12">GetInputWindow</a>(pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o4">pcsrt</a>, (HWND)pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o5">lParam</a>) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>));
01492             fWasInput = (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> &amp; <a class="code" href="../../d7/d1/usersrv_8h.html#a15">EDPF_INPUT</a>);
01493             <span class="keywordflow">if</span> (fIsInput ^ fWasInput) {
01494                 <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uProgress;
01495                 pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> &amp;= ~(<a class="code" href="../../d7/d1/usersrv_8h.html#a15">EDPF_INPUT</a> | <a class="code" href="../../d7/d1/usersrv_8h.html#a14">EDPF_WAIT</a>);
01496                 pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> |= (fIsInput ? <a class="code" href="../../d7/d1/usersrv_8h.html#a15">EDPF_INPUT</a> : <a class="code" href="../../d7/d1/usersrv_8h.html#a14">EDPF_WAIT</a>);
01497                 <a class="code" href="../../d2/d0/server_2exitwin_8c.html#a15">SetEndTaskDlgStatus</a>(pedp, hwndDlg,
01498                                     (fIsInput ? STR_ENDTASK_INPUT : STR_ENDTASK_WAIT),
01499                                      FALSE);
01500                 pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o6">dwCheckTimerCount</a> /= 2;
01501                 uProgress = pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o11">rcProgress</a>.left - pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o10">rcBar</a>.left - <a class="code" href="../../d3/d9/client_2wow_8c.html#a16">GetSystemMetrics</a>(SM_CXEDGE);
01502                 uProgress /= 2;
01503                 pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o11">rcProgress</a>.left -= uProgress;
01504                 pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o11">rcProgress</a>.right -= uProgress;
01505             }
01506             <span class="comment">/*</span>
01507 <span class="comment">             * Is it time to declare it hung?</span>
01508 <span class="comment">             */</span>
01509             <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o6">dwCheckTimerCount</a> &gt;= <a class="code" href="../../d4/d6/ntuser_2server_2globals_8c.html#a4">gdwHungToKillCount</a>) {
01510                 KillTimer(hwndDlg, IDT_CHECKAPPSTATE);
01511                 pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> &amp;= ~(<a class="code" href="../../d7/d1/usersrv_8h.html#a15">EDPF_INPUT</a> | <a class="code" href="../../d7/d1/usersrv_8h.html#a14">EDPF_WAIT</a>);
01512                 pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> |= <a class="code" href="../../d7/d1/usersrv_8h.html#a13">EDPF_HUNG</a>;
01513                 <a class="code" href="../../d2/d0/server_2exitwin_8c.html#a15">SetEndTaskDlgStatus</a>(pedp, hwndDlg, STR_ENDTASK_HUNG, FALSE);
01514             }
01515         <span class="keywordflow">break</span>;
01516 
01517         <span class="keywordflow">case</span> <a class="code" href="../../d7/d1/usersrv_8h.html#a10">IDT_PROGRESS</a>:
01518             <span class="comment">/*</span>
01519 <span class="comment">             * Draw the next block in the progress bar.</span>
01520 <span class="comment">             */</span>
01521             <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o11">rcProgress</a>.right &gt;= pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o12">iProgressStop</a>) {
01522                 pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o11">rcProgress</a>.right = pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o12">iProgressStop</a>;
01523                 <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o11">rcProgress</a>.left &gt;= pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o11">rcProgress</a>.right) {
01524                     <span class="keywordflow">break</span>;
01525                 }
01526             }
01527             hdc = <a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html#a1">GetDC</a>(hwndDlg);
01528             <a class="code" href="../../d9/d1/rtl_2draw_8c.html#a3">FillRect</a>(hdc, &amp;pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o11">rcProgress</a>, pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o14">hbrProgress</a>);
01529             <a class="code" href="../../d3/d8/client_8c.html#a45">ReleaseDC</a>(hwndDlg, hdc);
01530             pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o11">rcProgress</a>.left += pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o13">iProgressWidth</a>;
01531             pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o11">rcProgress</a>.right += pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o13">iProgressWidth</a>;
01532         <span class="keywordflow">break</span>;
01533         }
01534         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01535 
01536 
01537     <span class="keywordflow">case</span> WM_NCACTIVATE:
01538         <span class="comment">/*</span>
01539 <span class="comment">         * Make sure we're uncovered when active and not covering the app</span>
01540 <span class="comment">         *  when inactive</span>
01541 <span class="comment">         */</span>
01542         pedp = (<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html">ENDDLGPARAMS</a>*)<a class="code" href="../../d5/d9/cltxt_8h.html#a11">GetWindowLongPtr</a>(hwndDlg, GWLP_USERDATA);
01543         <span class="keywordflow">if</span> (pedp != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01544             HWND hwnd;
01545             <span class="keywordflow">if</span> (wParam) {
01546                 hwnd = HWND_TOPMOST;
01547             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o1">dwClientFlags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a134">WMCS_CONSOLE</a>) {
01548                 hwnd = HWND_TOP;
01549             } <span class="keywordflow">else</span> {
01550                 hwnd = (HWND)pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o5">lParam</a>;
01551             }
01552             <a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html#a0">SetWindowPos</a>(hwndDlg, hwnd,
01553                          0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE);
01554         }
01555         <span class="keywordflow">break</span>;
01556 
01557 
01558     <span class="keywordflow">case</span> WM_COMMAND:
01559         <span class="comment">/*</span>
01560 <span class="comment">         * The user has made a choice, we're done.</span>
01561 <span class="comment">         */</span>
01562         pedp = (<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html">ENDDLGPARAMS</a>*)<a class="code" href="../../d5/d9/cltxt_8h.html#a11">GetWindowLongPtr</a>(hwndDlg, GWLP_USERDATA);
01563         <span class="keywordflow">if</span> (pedp != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01564             pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o2">dwRet</a> = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)wParam;
01565         }
01566         <a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html#a3">DestroyWindow</a>(hwndDlg);
01567         <span class="keywordflow">break</span>;
01568 
01569 
01570     <span class="keywordflow">case</span> WM_DESTROY:
01571         <span class="comment">/*</span>
01572 <span class="comment">         * We're dead. Make sure the caller knows we're history</span>
01573 <span class="comment">         */</span>
01574         pedp = (<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html">ENDDLGPARAMS</a>*)<a class="code" href="../../d5/d9/cltxt_8h.html#a11">GetWindowLongPtr</a>(hwndDlg, GWLP_USERDATA);
01575         <span class="keywordflow">if</span> (pedp != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01576             pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> |= (<a class="code" href="../../d7/d1/usersrv_8h.html#a11">EDPF_NODLG</a> | <a class="code" href="../../d7/d1/usersrv_8h.html#a12">EDPF_RESPONSE</a>);
01577             <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o7">hbmpWarning</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01578                 DeleteObject(pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o7">hbmpWarning</a>);
01579             }
01580             <span class="keywordflow">if</span> (pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o14">hbrProgress</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01581                 DeleteObject(pedp-&gt;<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o14">hbrProgress</a>);
01582             }
01583         }
01584         <span class="keywordflow">break</span>;
01585     }
01586 
01587     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01588 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a55" doxytag="usersrv.h::FindWindowFromThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CALLBACK FindWindowFromThread           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d6/server_2server_8c-source.html#l01255">1255</a> of file <a class="el" href="../../d1/d6/server_2server_8c-source.html">server/server.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00305">GetWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01906">BoostHardError()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00423">GetHardErrorText()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>.
<p>
<pre class="fragment"><div>01256 {
01257     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fTopLevelOwner;
01258 <span class="preprocessor">#ifdef FE_IME</span>
01259 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ( IsImeWindow(hwnd) ) {
01260         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01261     }
01262 <span class="preprocessor">#endif</span>
01263 <span class="preprocessor"></span>
01264     fTopLevelOwner = (<a class="code" href="../../d3/d9/client_2wow_8c.html#a12">GetWindow</a>(hwnd, GW_OWNER) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
01265     <span class="keywordflow">if</span> ((*((HWND *)lParam) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || fTopLevelOwner) {
01266         *((HWND *)lParam) = hwnd;
01267     }
01268     <span class="keywordflow">return</span> !fTopLevelOwner;
01269 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a56" doxytag="usersrv.h::InternalDoEndTaskDialog" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int InternalDoEndTaskDialog           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">TCHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>pszTitle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cSeconds</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a57" doxytag="usersrv.h::RtlLoadStringOrError" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPWSTR RtlLoadStringOrError           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hModule</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpDefault</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PBOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>pAllocated</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01499">1499</a> of file <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html">w32/ntuser/server/harderr.c</a>.
<p>
References <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d2/ldrsnap_8c-source.html#l04150">LMEM_ZEROINIT</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d7/message_8c-source.html#l00030">RtlFindMessage()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d6/server_2server_8c-source.html#l01029">GetRegIntFromID()</a>, and <a class="el" href="../../d1/d6/server_2server_8c-source.html#l00192">UserServerDllInitialization()</a>.
<p>
<pre class="fragment"><div>01506 {
01507     LPTSTR lpsz;
01508     <span class="keywordtype">int</span> cch;
01509     LPWSTR lpw;
01510     PMESSAGE_RESOURCE_ENTRY MessageEntry;
01511     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
01512 
01513     cch = 0;
01514     lpw = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01515 
01516     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d0/d8/message_8c.html#a1">RtlFindMessage</a>((PVOID)hModule, (ULONG_PTR)RT_MESSAGETABLE,
01517             0, wID, &amp;MessageEntry);
01518     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
01519 
01520         <span class="comment">/*</span>
01521 <span class="comment">         * Return two fewer chars so the crlf in the message will be</span>
01522 <span class="comment">         * stripped out.</span>
01523 <span class="comment">         */</span>
01524         cch = wcslen((PWCHAR)MessageEntry-&gt;Text) - 2;
01525         lpsz = (LPWSTR)MessageEntry-&gt;Text;
01526 
01527         <span class="keywordflow">if</span> (bAnsi) {
01528             <span class="keywordtype">int</span> ich;
01529 
01530             <span class="comment">/*</span>
01531 <span class="comment">             * Add one to zero terminate then force the termination</span>
01532 <span class="comment">             */</span>
01533             ich = WCSToMB(lpsz, cch+1, (CHAR **)&amp;lpw, -1, TRUE);
01534             ((LPSTR)lpw)[ich-1] = 0;
01535 
01536             }
01537         <span class="keywordflow">else</span> {
01538             lpw = (LPWSTR)LocalAlloc(LMEM_ZEROINIT,(cch+1)*<span class="keyword">sizeof</span>(WCHAR));
01539             <span class="keywordflow">if</span> ( lpw ) {
01540 
01541                 <span class="comment">/*</span>
01542 <span class="comment">                 * Copy the string into the buffer.</span>
01543 <span class="comment">                 */</span>
01544                     RtlCopyMemory(lpw, lpsz, cch*<span class="keyword">sizeof</span>(WCHAR));
01545                 }
01546             }
01547         }
01548 
01549     <span class="keywordflow">if</span> ( !lpw ) {
01550         lpw = lpDefault;
01551         *pAllocated = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01552         } <span class="keywordflow">else</span> {
01553         *pAllocated = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01554         }
01555 
01556     <span class="keywordflow">return</span> lpw;
01557 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a54" doxytag="usersrv.h::ThreadShutdownNotify" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ThreadShutdownNotify           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwClientFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>dwThread</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">757</a> of file <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html">server/exitwin.c</a>.
<p>
References <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00162">BHE_FORCE</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00163">BHE_TEST</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01906">BoostHardError()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00031">CCHBODYMAX</a>, <a class="el" href="../../d4/d3/w32_2ntuser_2client_2nt6_2pch_8h-source.html#l00039">DestroyWindow</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00874">DispatchMessage()</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00170">tagWMCSDATA::dwFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00171">tagWMCSDATA::dwRet</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00112">EDPF_HUNG</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00114">EDPF_INPUT</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00110">EDPF_NODLG</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00111">EDPF_RESPONSE</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00113">EDPF_WAIT</a>, <a class="el" href="../../d7/d1/usersrv_8h.html#a40">ENDDLGPARAMS</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, <a class="el" href="../../d1/d7/clenum_8c-source.html#l00206">EnumThreadWindows()</a>, <a class="el" href="../../d2/d0/server_2exitwin_8c.html#a5">ESMH_CANCELEVENT</a>, <a class="el" href="../../d2/d0/server_2exitwin_8c.html#a7">ESMH_HANDLECOUNT</a>, <a class="el" href="../../d2/d0/server_2exitwin_8c.html#a6">ESMH_THREAD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d6/server_2server_8c-source.html#l01255">FindWindowFromThread()</a>, <a class="el" href="../../d5/d5/ntuser_2server_2globals_8c-source.html#l00020">gCmsHungAppTimeout</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00728">GetApplicationText()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00698">GetInputWindow()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00305">GetWindow()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00388">GetWindowLongPtr()</a>, <a class="el" href="../../d5/d5/ntuser_2server_2globals_8c-source.html#l00023">gfAutoEndTask</a>, <a class="el" href="../../d5/d5/ntuser_2server_2globals_8c-source.html#l00056">gheventCancel</a>, <a class="el" href="../../d5/d5/ntuser_2server_2globals_8c-source.html#l00017">ghModuleWin</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00074">IDC_ENDNOW</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00070">IDD_ENDTASK</a>, <a class="el" href="../../d4/d9/user32_8def-source.html#l00300">IsDialogMessage</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00538">IsWindowEnabled()</a>, <a class="el" href="../../d3/d0/userexts_8c-source.html#l01830">msg</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01475">MsgWaitForMultipleObjects()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07532">NtUserQueryInformationThread()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00483">PeekMessage()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00850">SendMessageCallback()</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00883">SendNotifyMessage()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03499">SetForegroundWindow()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00885">TranslateMessage()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00119">TSN_APPSAYSNOTOK</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00118">TSN_APPSAYSOK</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00122">TSN_NOWINDOW</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00121">TSN_USERSAYSCANCEL</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00120">TSN_USERSAYSKILL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00608">WMCS_CONSOLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00606">WMCS_CONTEXTLOGOFF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00607">WMCS_ENDTASK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00603">WMCS_EXIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00609">WMCS_NODLGIFHUNG</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00610">WMCS_NORETRY</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00604">WMCS_QUERYEND</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00676">WMCSCallback()</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00174">WMCSD_IGNORE</a>, <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00175">WMCSD_REPLY</a>, <a class="el" href="../../d7/d1/usersrv_8h.html#a50">WMCSDATA</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00616">WMCSR_ALLOWSHUTDOWN</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00618">WMCSR_CANCEL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00617">WMCSR_DONE</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01791">WowExitTask()</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01601">_EndTask()</a>, <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l03502">CreateCtrlThread()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00219">UserClientShutdown()</a>.
<p>
<pre class="fragment"><div>00758 {
00759     HWND hwnd, hwndOwner;
00760     <a class="code" href="../../d5/d9/structtagWMCSDATA.html">PWMCSDATA</a> pwmcsd = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00761     HWND hwndDlg;
00762     <a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html">ENDDLGPARAMS</a> edp;
00763     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwRet, dwRealTimeout, dwTimeout, dwStartTiming, dwCmd;
00764     MSG <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
00765     PCSR_THREAD pcsrt;
00766     HANDLE hThread;
00767     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fEndTaskNow = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00768 
00769 <span class="preprocessor">#define ESMH_CANCELEVENT     0</span>
00770 <span class="preprocessor"></span><span class="preprocessor">#define ESMH_THREAD          1</span>
00771 <span class="preprocessor"></span><span class="preprocessor">#define ESMH_HANDLECOUNT     2</span>
00772 <span class="preprocessor"></span>    HANDLE ahandles[<a class="code" href="../../d2/d0/server_2exitwin_8c.html#a7">ESMH_HANDLECOUNT</a>];
00773 
00774     <span class="comment">/*</span>
00775 <span class="comment">     * If this is console, just set up the wait loop and</span>
00776 <span class="comment">     *   bring the dialog up right away. Otherwise, find</span>
00777 <span class="comment">     *   the notification window, notify it and go wait.</span>
00778 <span class="comment">     */</span>
00779     <span class="keywordflow">if</span> (dwClientFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a134">WMCS_CONSOLE</a>) {
00780         hThread = (HANDLE)dwThread;
00781         dwRealTimeout = 0;
00782         <span class="keywordflow">goto</span> SetupWaitLoop;
00783     } <span class="keywordflow">else</span> {
00784         pcsrt = (PCSR_THREAD)dwThread;
00785         hThread = pcsrt-&gt;ThreadHandle;
00786         hwnd = (HWND)lParam;
00787     }
00788 
00789     <span class="comment">/*</span>
00790 <span class="comment">     * If no window was provided,</span>
00791 <span class="comment">     *  find a top-level window owned by the thread</span>
00792 <span class="comment">     */</span>
00793     <span class="keywordflow">if</span> (hwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00794         <a class="code" href="../../d0/d8/clenum_8c.html#a9">EnumThreadWindows</a>(HandleToUlong(pcsrt-&gt;ClientId.UniqueThread),
00795                             &amp;FindWindowFromThread, (LPARAM)&amp;hwnd);
00796     }
00797     <span class="keywordflow">if</span> (hwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00798         <span class="keywordflow">return</span> <a class="code" href="../../d7/d1/usersrv_8h.html#a20">TSN_NOWINDOW</a>;
00799     }
00800     <span class="comment">/*</span>
00801 <span class="comment">     * Find the root owner (we'll guess this is the "main" window)</span>
00802 <span class="comment">     */</span>
00803     <span class="keywordflow">while</span> ((hwndOwner = <a class="code" href="../../d3/d9/client_2wow_8c.html#a12">GetWindow</a>(hwnd, GW_OWNER)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00804         hwnd = hwndOwner;
00805     }
00806 
00807 <span class="preprocessor">#if defined(FE_IME)</span>
00808 <span class="preprocessor"></span>    <span class="comment">/*</span>
00809 <span class="comment">     * If this is a console window, then just returns TSN_APPSAYSOK.</span>
00810 <span class="comment">     * In this routine:</span>
00811 <span class="comment">     * Normally windows NT environment, hwnd never point to console window.</span>
00812 <span class="comment">     * However, In ConIme process, its owner window point to console window.</span>
00813 <span class="comment">     */</span>
00814     <span class="keywordflow">if</span> (!(dwClientFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a133">WMCS_ENDTASK</a>)) {
00815         <span class="keywordflow">if</span> ((HANDLE)<a class="code" href="../../d5/d9/cltxt_8h.html#a11">GetWindowLongPtr</a>(hwnd, GWLP_HINSTANCE) == <a class="code" href="../../d4/d6/ntuser_2server_2globals_8c.html#a0">ghModuleWin</a>) {
00816             <span class="keywordflow">return</span> <a class="code" href="../../d7/d1/usersrv_8h.html#a16">TSN_APPSAYSOK</a>;
00817         }
00818     }
00819 <span class="preprocessor">#endif</span>
00820 <span class="preprocessor"></span>
00821     <span class="comment">/*</span>
00822 <span class="comment">     * If this is an EndTask request but the window is disabled,</span>
00823 <span class="comment">     *   then we want to bring the dialog up right way (the app</span>
00824 <span class="comment">     *   is probably waiting for input).</span>
00825 <span class="comment">     * Otherwise, we bring the window to the foreground, send/post</span>
00826 <span class="comment">     *  the request and wait</span>
00827 <span class="comment">     */</span>
00828 
00829 
00830     <span class="comment">/*</span>
00831 <span class="comment">     * Bug 296188 - joejo</span>
00832 <span class="comment">     *</span>
00833 <span class="comment">     * Make sure we respond to the user ASAP when they</span>
00834 <span class="comment">     * attempt to shutdown an application that we know is hung.</span>
00835 <span class="comment">     */</span>
00836 
00837     <span class="keywordflow">if</span> ((dwClientFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a133">WMCS_ENDTASK</a>)) {
00838 
00839         dwTimeout = <a class="code" href="../../d4/d6/ntuser_2server_2globals_8c.html#a2">gCmsHungAppTimeout</a>;
00840         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a276">NtUserQueryInformationThread</a>(pcsrt-&gt;ThreadHandle, UserThreadHungStatus, &amp;dwTimeout, <span class="keyword">sizeof</span>(dwTimeout), NULL);
00841 
00842         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a20">IsWindowEnabled</a>(hwnd) || dwTimeout){
00843             dwRealTimeout = 0;
00844             fEndTaskNow = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00845         }
00846 
00847 
00848     }
00849 
00850     <span class="keywordflow">if</span> (!fEndTaskNow) {
00851 
00852         <a class="code" href="../../d3/d8/client_8c.html#a131">SetForegroundWindow</a>(hwnd);
00853         dwRealTimeout = <a class="code" href="../../d4/d6/ntuser_2server_2globals_8c.html#a2">gCmsHungAppTimeout</a>;
00854         <span class="keywordflow">if</span> (dwClientFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a133">WMCS_ENDTASK</a>) {
00855             <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(hwnd, WM_CLOSE, 0, 0);
00856         } <span class="keywordflow">else</span> {
00857             <span class="comment">/*</span>
00858 <span class="comment">             * If the shutdown was canceled, we don't need to wait.</span>
00859 <span class="comment">             *  (we're just sending the WM_ENDSESSION(FALSE))</span>
00860 <span class="comment">             */</span>
00861             <span class="keywordflow">if</span> (!(dwClientFlags &amp; (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a130">WMCS_QUERYEND</a> | <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a129">WMCS_EXIT</a>))) {
00862                 <a class="code" href="../../d0/d8/ntcftxt_8h.html#a28">SendNotifyMessage</a>(hwnd, WM_CLIENTSHUTDOWN, dwClientFlags, 0);
00863                 <span class="keywordflow">return</span> <a class="code" href="../../d7/d1/usersrv_8h.html#a16">TSN_APPSAYSOK</a>;
00864             }
00865             <span class="comment">/*</span>
00866 <span class="comment">             * Allocate callback data. If out of memory, kill it.</span>
00867 <span class="comment">             */</span>
00868             pwmcsd = (<a class="code" href="../../d5/d9/structtagWMCSDATA.html">PWMCSDATA</a>)LocalAlloc(LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d5/d9/structtagWMCSDATA.html">WMCSDATA</a>));
00869             <span class="keywordflow">if</span> (pwmcsd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00870                 <span class="keywordflow">return</span> <a class="code" href="../../d7/d1/usersrv_8h.html#a18">TSN_USERSAYSKILL</a>;
00871             }
00872 
00873             <a class="code" href="../../d0/d8/ntcftxt_8h.html#a27">SendMessageCallback</a>(hwnd, WM_CLIENTSHUTDOWN, dwClientFlags, 0,
00874                                 WMCSCallback, (ULONG_PTR)pwmcsd);
00875         }
00876     }
00877 
00878 SetupWaitLoop:
00879     <span class="comment">/*</span>
00880 <span class="comment">     * This tells us if the hwndDlg is valid. This is set/cleared by</span>
00881 <span class="comment">     *  EndTaskDlgProc</span>
00882 <span class="comment">     */</span>
00883     ZeroMemory(&amp;edp, <span class="keyword">sizeof</span>(edp));
00884     edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> = <a class="code" href="../../d7/d1/usersrv_8h.html#a11">EDPF_NODLG</a>;
00885     <span class="comment">/*</span>
00886 <span class="comment">     * Loop until the hwnd replies, the request is canceled</span>
00887 <span class="comment">     *  or the thread goes away. It time out, bring up the</span>
00888 <span class="comment">     *  dialog and wait until the user tells us what to do.</span>
00889 <span class="comment">     */</span>
00890     *(ahandles + <a class="code" href="../../d2/d0/server_2exitwin_8c.html#a5">ESMH_CANCELEVENT</a>) = <a class="code" href="../../d4/d6/ntuser_2server_2globals_8c.html#a20">gheventCancel</a>;
00891     *(ahandles + <a class="code" href="../../d2/d0/server_2exitwin_8c.html#a6">ESMH_THREAD</a>) = hThread;
00892     dwStartTiming = GetTickCount();
00893     dwCmd = 0;
00894     <span class="keywordflow">while</span> (dwCmd == 0) {
00895         <span class="comment">/*</span>
00896 <span class="comment">         * Calculate how long we have to wait.</span>
00897 <span class="comment">         */</span>
00898         dwTimeout = dwRealTimeout;
00899         <span class="keywordflow">if</span> ((dwTimeout != 0) &amp;&amp; (dwTimeout != INFINITE)) {
00900             dwTimeout -= (GetTickCount() - dwStartTiming);
00901             <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)dwTimeout &lt; 0) {
00902                 dwTimeout = 0;
00903             }
00904         }
00905 
00906         dwRet = <a class="code" href="../../d3/d8/client_8c.html#a57">MsgWaitForMultipleObjects</a>(ESMH_HANDLECOUNT, ahandles, FALSE, dwTimeout, QS_ALLINPUT);
00907 
00908         <span class="keywordflow">switch</span> (dwRet) {
00909             <span class="keywordflow">case</span> WAIT_OBJECT_0 + <a class="code" href="../../d2/d0/server_2exitwin_8c.html#a5">ESMH_CANCELEVENT</a>:
00910                 <span class="comment">/*</span>
00911 <span class="comment">                 * The request has been canceled.</span>
00912 <span class="comment">                 */</span>
00913                 dwCmd = <a class="code" href="../../d7/d1/usersrv_8h.html#a19">TSN_USERSAYSCANCEL</a>;
00914                 <span class="keywordflow">break</span>;
00915 
00916             <span class="keywordflow">case</span> WAIT_OBJECT_0 + <a class="code" href="../../d2/d0/server_2exitwin_8c.html#a6">ESMH_THREAD</a>:
00917                 <span class="comment">/*</span>
00918 <span class="comment">                 * The thread is gone.</span>
00919 <span class="comment">                 */</span>
00920                 dwCmd = <a class="code" href="../../d7/d1/usersrv_8h.html#a16">TSN_APPSAYSOK</a>;
00921                 <span class="keywordflow">break</span>;
00922 
00923             <span class="keywordflow">case</span> WAIT_OBJECT_0 + <a class="code" href="../../d2/d0/server_2exitwin_8c.html#a7">ESMH_HANDLECOUNT</a>:
00924                 <span class="comment">/*</span>
00925 <span class="comment">                 * We got some input; process it.</span>
00926 <span class="comment">                 */</span>
00927                 <span class="keywordflow">while</span> (<a class="code" href="../../d5/d9/cltxt_8h.html#a14">PeekMessage</a>(&amp;msg, NULL, 0, 0, PM_REMOVE)) {
00928                     <span class="keywordflow">if</span> ((edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> &amp; <a class="code" href="../../d7/d1/usersrv_8h.html#a11">EDPF_NODLG</a>)
00929                             || !<a class="code" href="../../d3/d0/user32_8def.html#a39">IsDialogMessage</a>(hwndDlg, &amp;msg)) {
00930 
00931                         <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a21">TranslateMessage</a>(&amp;msg);
00932                         <a class="code" href="../../d5/d9/cltxt_8h.html#a24">DispatchMessage</a>(&amp;msg);
00933                     }
00934                 }
00935                 <span class="comment">/*</span>
00936 <span class="comment">                 * If we got a reply to the message, act on it</span>
00937 <span class="comment">                 */</span>
00938                 <span class="keywordflow">if</span> ((pwmcsd != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (pwmcsd-&gt;<a class="code" href="../../d5/d9/structtagWMCSDATA.html#o0">dwFlags</a> &amp; <a class="code" href="../../d7/d1/usersrv_8h.html#a33">WMCSD_REPLY</a>)) {
00939 
00940                     <span class="keywordflow">switch</span> (pwmcsd-&gt;<a class="code" href="../../d5/d9/structtagWMCSDATA.html#o1">dwRet</a>) {
00941                         <span class="keywordflow">default</span>:
00942                             <span class="comment">/*</span>
00943 <span class="comment">                             * If the message was not processed (the thread</span>
00944 <span class="comment">                             *  exited) or someone processed it and returned</span>
00945 <span class="comment">                             *  a bogus value, just shut them down.</span>
00946 <span class="comment">                             * Fall through</span>
00947 <span class="comment">                             */</span>
00948                         <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a138">WMCSR_ALLOWSHUTDOWN</a>:
00949                             <span class="comment">/*</span>
00950 <span class="comment">                             * We're going to nuke this app, so get rid of</span>
00951 <span class="comment">                             *  any pending harderror boxes he might have</span>
00952 <span class="comment">                             */</span>
00953                             <a class="code" href="../../d7/d1/usersrv_8h.html#a53">BoostHardError</a>((ULONG_PTR)pcsrt-&gt;ClientId.UniqueProcess, BHE_FORCE);
00954                             <span class="comment">/*</span>
00955 <span class="comment">                             * Fall through.</span>
00956 <span class="comment">                             */</span>
00957                         <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a139">WMCSR_DONE</a>:
00958                             dwCmd = <a class="code" href="../../d7/d1/usersrv_8h.html#a16">TSN_APPSAYSOK</a>;
00959                             <span class="keywordflow">break</span>;
00960 
00961                         <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a140">WMCSR_CANCEL</a>:
00962                             dwCmd = <a class="code" href="../../d7/d1/usersrv_8h.html#a17">TSN_APPSAYSNOTOK</a>;
00963                             <span class="keywordflow">break</span>;
00964                     }
00965                 }
00966                 <span class="comment">/*</span>
00967 <span class="comment">                 * Else if the dialog is still up, keep waiting for the user</span>
00968 <span class="comment">                 *  to tell us what to do</span>
00969 <span class="comment">                 */</span>
00970                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> &amp; <a class="code" href="../../d7/d1/usersrv_8h.html#a11">EDPF_NODLG</a>)) {
00971                     <span class="keywordflow">break</span>;
00972                 }
00973                 <span class="comment">/*</span>
00974 <span class="comment">                 * Else if the user dismissed the dialog, act on his response</span>
00975 <span class="comment">                 */</span>
00976                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> &amp; <a class="code" href="../../d7/d1/usersrv_8h.html#a12">EDPF_RESPONSE</a>) {
00977                     <span class="keywordflow">switch</span>(edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o2">dwRet</a>) {
00978                         <span class="keywordflow">case</span> <a class="code" href="../../d7/d1/usersrv_8h.html#a4">IDC_ENDNOW</a>:
00979                             <span class="comment">/*</span>
00980 <span class="comment">                             * The user wants us to kill it</span>
00981 <span class="comment">                             */</span>
00982                             dwCmd = <a class="code" href="../../d7/d1/usersrv_8h.html#a18">TSN_USERSAYSKILL</a>;
00983                             <span class="keywordflow">break</span>;
00984 
00985                         <span class="comment">/* case IDCANCEL: */</span>
00986                         <span class="keywordflow">default</span>:
00987                             dwCmd = <a class="code" href="../../d7/d1/usersrv_8h.html#a19">TSN_USERSAYSCANCEL</a>;
00988                             <span class="keywordflow">break</span>;
00989                     }
00990                 }
00991                 <span class="keywordflow">break</span>;
00992 
00993             <span class="keywordflow">case</span> WAIT_TIMEOUT:
00994 
00995                 <span class="keywordflow">if</span> (dwClientFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a136">WMCS_NORETRY</a>) {
00996 
00997                     <span class="comment">/*</span>
00998 <span class="comment">                     * We come here only for Terminal Server case. We return</span>
00999 <span class="comment">                     * TSN_APPSAYSOK as Terminal Server 4 did in this case.</span>
01000 <span class="comment">                     */</span>
01001                     UserAssert(<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>());
01002 
01003                     dwCmd = <a class="code" href="../../d7/d1/usersrv_8h.html#a16">TSN_APPSAYSOK</a>;
01004                     <span class="keywordflow">break</span>;
01005                 }
01006 
01007 
01008                 <span class="comment">/*</span>
01009 <span class="comment">                 * Once we time out, we bring up the dialog and let</span>
01010 <span class="comment">                 *  its timer take over.</span>
01011 <span class="comment">                 */</span>
01012                 dwRealTimeout = INFINITE;
01013                 <span class="comment">/*</span>
01014 <span class="comment">                 * Check if the windows app is waiting for input;</span>
01015 <span class="comment">                 *  if not, we assume it is hung for EndTask;</span>
01016 <span class="comment">                 *   otherwise we enter a wait mode that brings the</span>
01017 <span class="comment">                 *   dialog up just to provide some (waiting) feedback</span>
01018 <span class="comment">                 * Console just gets the dialog right away</span>
01019 <span class="comment">                 */</span>
01020                 <span class="keywordflow">if</span> (!(dwClientFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a134">WMCS_CONSOLE</a>)) {
01021                     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d1/usersrv_8h.html#a53">BoostHardError</a>((ULONG_PTR)pcsrt-&gt;ClientId.UniqueProcess, BHE_TEST)
01022                            || (<a class="code" href="../../d2/d0/server_2exitwin_8c.html#a12">GetInputWindow</a>(pcsrt, hwnd) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
01023 
01024                         edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> |= <a class="code" href="../../d7/d1/usersrv_8h.html#a15">EDPF_INPUT</a>;
01025                     } <span class="keywordflow">else</span> {
01026                         <span class="comment">/*</span>
01027 <span class="comment">                         * EWX_FORCEIFHUNG support.</span>
01028 <span class="comment">                         * Also, if this is an ExitWindows call and the process is not in</span>
01029 <span class="comment">                         * the context being logged off, we won't kill it.</span>
01030 <span class="comment">                         * So don't bother asking the user what to do</span>
01031 <span class="comment">                         */</span>
01032                         <span class="keywordflow">if</span> ((dwClientFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a135">WMCS_NODLGIFHUNG</a>)
01033                                 || (!(dwClientFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a133">WMCS_ENDTASK</a>)
01034                                         &amp;&amp; !(dwClientFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a132">WMCS_CONTEXTLOGOFF</a>))) {
01035 
01036                             dwCmd = <a class="code" href="../../d7/d1/usersrv_8h.html#a18">TSN_USERSAYSKILL</a>;
01037                             <span class="keywordflow">break</span>;
01038                         }
01039                         <span class="comment">/*</span>
01040 <span class="comment">                         * Hung or Wait?</span>
01041 <span class="comment">                         */</span>
01042                         <span class="keywordflow">if</span> (dwClientFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a133">WMCS_ENDTASK</a>) {
01043                             edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> |= <a class="code" href="../../d7/d1/usersrv_8h.html#a13">EDPF_HUNG</a>;
01044                         } <span class="keywordflow">else</span> {
01045                             edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> |= <a class="code" href="../../d7/d1/usersrv_8h.html#a14">EDPF_WAIT</a>;
01046                         }
01047                     }
01048                 }
01049 
01050                 <span class="comment">/*</span>
01051 <span class="comment">                 * If the registry says no dialog, then tell the caller</span>
01052 <span class="comment">                 *  the user wants to kill the app.</span>
01053 <span class="comment">                 */</span>
01054                 <span class="keywordflow">if</span> (<a class="code" href="../../d4/d6/ntuser_2server_2globals_8c.html#a5">gfAutoEndTask</a>) {
01055                     dwCmd = <a class="code" href="../../d7/d1/usersrv_8h.html#a18">TSN_USERSAYSKILL</a>;
01056                     <span class="keywordflow">break</span>;
01057                 }
01058                 <span class="comment">/*</span>
01059 <span class="comment">                 * Setup the parameters needed by EndTaskDlgProc</span>
01060 <span class="comment">                 */</span>
01061                 edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o2">dwRet</a> = 0;
01062                 edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o1">dwClientFlags</a> = dwClientFlags;
01063                 <span class="keywordflow">if</span> (dwClientFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a134">WMCS_CONSOLE</a>) {
01064                     edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o4">pcsrt</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01065                     edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o5">lParam</a> = lParam;
01066                 } <span class="keywordflow">else</span> {
01067                     edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o4">pcsrt</a> = pcsrt;
01068                     edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o5">lParam</a> = (LPARAM)hwnd;
01069                 }
01070 
01071                 hwndDlg = CreateDialogParam (ghModuleWin, MAKEINTRESOURCE(IDD_ENDTASK),
01072                                         NULL, EndTaskDlgProc, (LPARAM)(&amp;edp));
01073                 <span class="comment">/*</span>
01074 <span class="comment">                 * If we cannot ask the user, then kill the app.</span>
01075 <span class="comment">                 */</span>
01076                 <span class="keywordflow">if</span> (hwndDlg == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01077                     edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> |= <a class="code" href="../../d7/d1/usersrv_8h.html#a11">EDPF_NODLG</a>;
01078                     dwCmd = <a class="code" href="../../d7/d1/usersrv_8h.html#a18">TSN_USERSAYSKILL</a>;
01079                     <span class="keywordflow">break</span>;
01080                 }
01081                 <span class="keywordflow">break</span>;
01082 
01083             <span class="keywordflow">default</span>:
01084                 <span class="comment">/*</span>
01085 <span class="comment">                 * Unexpected return; something is wrong. Kill the app.</span>
01086 <span class="comment">                 */</span>
01087                 UserAssert(dwRet != dwRet);
01088                 dwCmd = <a class="code" href="../../d7/d1/usersrv_8h.html#a18">TSN_USERSAYSKILL</a>;
01089                 <span class="keywordflow">break</span>;
01090         } <span class="comment">/* switch (dwRet) */</span>
01091     } <span class="comment">/* while (dwCmd == 0) */</span>
01092 
01093 
01094     <span class="comment">/*</span>
01095 <span class="comment">     * If the dialog is up, nuke it.</span>
01096 <span class="comment">     */</span>
01097     <span class="keywordflow">if</span> (!(edp.<a class="code" href="../../d4/d3/struct__ENDDLGPARAMS.html#o0">dwFlags</a> &amp; <a class="code" href="../../d7/d1/usersrv_8h.html#a11">EDPF_NODLG</a>)) {
01098         <a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html#a3">DestroyWindow</a>(hwndDlg);
01099     }
01100     <span class="comment">/*</span>
01101 <span class="comment">     * Make sure pwmcsd is freed or marked to be freed by WMCSCallback</span>
01102 <span class="comment">     *  when the reply comes</span>
01103 <span class="comment">     */</span>
01104     <span class="keywordflow">if</span> (pwmcsd != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01105         <span class="keywordflow">if</span> (pwmcsd-&gt;<a class="code" href="../../d5/d9/structtagWMCSDATA.html#o0">dwFlags</a> &amp; <a class="code" href="../../d7/d1/usersrv_8h.html#a33">WMCSD_REPLY</a>) {
01106             LocalFree(pwmcsd);
01107         } <span class="keywordflow">else</span> {
01108             pwmcsd-&gt;<a class="code" href="../../d5/d9/structtagWMCSDATA.html#o0">dwFlags</a> |= <a class="code" href="../../d7/d1/usersrv_8h.html#a32">WMCSD_IGNORE</a>;
01109         }
01110     }
01111 <span class="preprocessor">#if DBG</span>
01112 <span class="preprocessor"></span>    <span class="comment">/*</span>
01113 <span class="comment">     * If Canceling, let's the name the app that doesn't let us log off</span>
01114 <span class="comment">     */</span>
01115     <span class="keywordflow">if</span> ((dwClientFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a129">WMCS_EXIT</a>) &amp;&amp; (dwCmd == <a class="code" href="../../d7/d1/usersrv_8h.html#a17">TSN_APPSAYSNOTOK</a>)) {
01116         WCHAR achTitle[<a class="code" href="../../d2/d0/server_2exitwin_8c.html#a3">CCHBODYMAX</a>];
01117         WCHAR *pwcText;
01118         UserAssert(!(dwClientFlags &amp; WMCS_CONSOLE));
01119         pwcText = achTitle;
01120         *(achTitle + <a class="code" href="../../d2/d0/server_2exitwin_8c.html#a3">CCHBODYMAX</a> - 1) = (WCHAR)0;
01121         <a class="code" href="../../d2/d0/server_2exitwin_8c.html#a13">GetApplicationText</a>(hwnd, hThread, pwcText, CCHBODYMAX - 1);
01122         KdPrint((<span class="stringliteral">"Log off canceled by pid:%#lx tid:%#lx - '%ws'.\n"</span>,
01123                     HandleToUlong(pcsrt-&gt;ClientId.UniqueProcess),
01124                     HandleToUlong(pcsrt-&gt;ClientId.UniqueThread),
01125                     pwcText));
01126     }
01127 <span class="preprocessor">#endif</span>
01128 <span class="preprocessor"></span>    <span class="comment">/*</span>
01129 <span class="comment">     * If we're killing this dude, clean any hard errors.</span>
01130 <span class="comment">     * Also if wow takes care of it, then our caller doesn't need to</span>
01131 <span class="comment">     */</span>
01132     <span class="keywordflow">if</span> ((dwCmd == <a class="code" href="../../d7/d1/usersrv_8h.html#a18">TSN_USERSAYSKILL</a>) &amp;&amp; !(dwClientFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a134">WMCS_CONSOLE</a>)) {
01133 
01134         <a class="code" href="../../d7/d1/usersrv_8h.html#a53">BoostHardError</a>((ULONG_PTR)pcsrt-&gt;ClientId.UniqueProcess, BHE_FORCE);
01135 
01136         <span class="keywordflow">if</span> (!(pcsrt-&gt;Flags &amp; CSR_THREAD_DESTROYED) &amp;&amp; <a class="code" href="../../d2/d0/server_2exitwin_8c.html#a8">WowExitTask</a>(pcsrt)) {
01137             dwCmd = <a class="code" href="../../d7/d1/usersrv_8h.html#a16">TSN_APPSAYSOK</a>;
01138         }
01139     }
01140 
01141     <span class="keywordflow">return</span> dwCmd;
01142 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a42" doxytag="usersrv.h::gCmsHungAppTimeout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d7/d1/usersrv_8h.html#a42">gCmsHungAppTimeout</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00127">127</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l03502">CreateCtrlThread()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00698">GetInputWindow()</a>, <a class="el" href="../../d1/d6/server_2server_8c-source.html#l01068">GetTimeouts()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01151">SetEndTaskDlgStatus()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="usersrv.h::gCmsWaitToKillTimeout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d7/d1/usersrv_8h.html#a43">gCmsWaitToKillTimeout</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00128">128</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l03502">CreateCtrlThread()</a>, and <a class="el" href="../../d1/d6/server_2server_8c-source.html#l01068">GetTimeouts()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="usersrv.h::gdwHungToKillCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d7/d1/usersrv_8h.html#a44">gdwHungToKillCount</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00129">129</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, <a class="el" href="../../d1/d6/server_2server_8c-source.html#l01068">GetTimeouts()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01151">SetEndTaskDlgStatus()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="usersrv.h::gdwProcessTerminateTimeout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d7/d1/usersrv_8h.html#a47">gdwProcessTerminateTimeout</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00132">132</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d6/server_2server_8c-source.html#l01068">GetTimeouts()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00219">UserClientShutdown()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="usersrv.h::gdwServicesProcessId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d7/d1/usersrv_8h.html#a45">gdwServicesProcessId</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00130">130</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l03502">CreateCtrlThread()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l02053">SrvRegisterServicesProcess()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="usersrv.h::gdwServicesWaitToKillTimeout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d7/d1/usersrv_8h.html#a46">gdwServicesWaitToKillTimeout</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00131">131</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l03502">CreateCtrlThread()</a>, and <a class="el" href="../../d1/d6/server_2server_8c-source.html#l01068">GetTimeouts()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="usersrv.h::ghModuleWin" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE <a class="el" href="../../d7/d1/usersrv_8h.html#a41">ghModuleWin</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d0/usersrv_8h-source.html#l00126">126</a> of file <a class="el" href="../../d8/d0/usersrv_8h-source.html">usersrv.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01601">_EndTask()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l00423">GetHardErrorText()</a>, <a class="el" href="../../d1/d6/server_2server_8c-source.html#l01029">GetRegIntFromID()</a>, <a class="el" href="../../d1/d4/srvinit_8c-source.html#l00590">InitWindowClass()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01151">SetEndTaskDlgStatus()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, and <a class="el" href="../../d1/d6/server_2server_8c-source.html#l00192">UserServerDllInitialization()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:46:05 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

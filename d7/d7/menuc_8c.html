<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: menuc.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>menuc.c File Reference</h1><code>#include "<a class="el" href="../../d8/d2/w32_2ntuser_2client_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d8/d6/menuc_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d7/menuc_8c.html#a0">CheckMenuItem</a> (HMENU hMenu, UINT uIDCheckItem, UINT uCheck)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d7/menuc_8c.html#a1">GetMenuDefaultItem</a> (HMENU hMenu, UINT fByPosition, UINT uFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d7/menuc_8c.html#a2">SetMenuItemInfoStruct</a> (HMENU hMenu, UINT wFlags, UINT_PTR wIDNew, LPWSTR pwszNew, LPMENUITEMINFO pmii)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d7/menuc_8c.html#a3">SetMenuInfo</a> (HMENU hMenu, LPCMENUINFO lpmi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d7/menuc_8c.html#a4">ChangeMenuW</a> (HMENU hMenu, UINT cmd, LPCWSTR lpNewItem, UINT IdItem, UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d7/menuc_8c.html#a5">ChangeMenuA</a> (HMENU hMenu, UINT cmd, LPCSTR lpNewItem, UINT IdItem, UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d7/menuc_8c.html#a6">GetMenuCheckMarkDimensions</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WINUSERAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d7/menuc_8c.html#a7">GetMenuContextHelpId</a> (HMENU hMenu)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d7/menuc_8c.html#a8">TrackPopupMenu</a> (HMENU hMenu, UINT fuFlags, int x, int y, int nReserved, HWND hwnd, CONST RECT *prcRect)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d7/menuc_8c.html#a9">xxxGetSysMenuHandle</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d7/menuc_8c.html#a10">SetMenuItemBitmaps</a> (HMENU hMenu, UINT nPosition, UINT uFlags, HBITMAP hbmpUnchecked, HBITMAP hbmpChecked)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d7/menuc_8c.html#a11">DrawMenuBarTemp</a> (HWND hwnd, HDC hdc, LPCRECT lprc, HMENU hMenu, HFONT hFont)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d7/menuc_8c.html#a12">CheckMenuRadioItem</a> (HMENU hMenu, UINT wIDFirst, UINT wIDLast, UINT wIDCheck, UINT flags)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a5" doxytag="menuc.c::ChangeMenuA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ChangeMenuA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNewItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>IdItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/menuc_8c-source.html#l00176">176</a> of file <a class="el" href="../../d8/d6/menuc_8c-source.html">menuc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02761">MFMWFP_OFFMENU</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03988">NtUserDeleteMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05715">NtUserRemoveMenu()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>00182 {
00183     <span class="comment">/*</span>
00184 <span class="comment">     * These next two statements take care of sleazyness needed for</span>
00185 <span class="comment">     * compatability with old changemenu.</span>
00186 <span class="comment">     */</span>
00187     <span class="keywordflow">if</span> ((flags &amp; MF_SEPARATOR) &amp;&amp; cmd == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a776">MFMWFP_OFFMENU</a> &amp;&amp; !(flags &amp; MF_CHANGE))
00188         flags |= MF_APPEND;
00189 
00190     <span class="keywordflow">if</span> (lpNewItem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00191         flags |= MF_SEPARATOR;
00192 
00193 
00194 
00195     <span class="comment">/*</span>
00196 <span class="comment">     * MUST be MF_BYPOSITION for Win2.x compatability.</span>
00197 <span class="comment">     */</span>
00198     <span class="keywordflow">if</span> (flags &amp; MF_REMOVE)
00199         <span class="keywordflow">return</span>(<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a218">NtUserRemoveMenu</a>(hMenu, cmd,
00200                 (DWORD)((flags &amp; ~MF_REMOVE) | MF_BYPOSITION)));
00201 
00202     <span class="keywordflow">if</span> (flags &amp; MF_DELETE)
00203         <span class="keywordflow">return</span>(<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a154">NtUserDeleteMenu</a>(hMenu, cmd, (DWORD)(flags &amp; ~MF_DELETE)));
00204 
00205     <span class="keywordflow">if</span> (flags &amp; MF_CHANGE)
00206         <span class="keywordflow">return</span>(ModifyMenuA(hMenu, cmd, (DWORD)((flags &amp; ~MF_CHANGE) &amp;
00207                 (0x07F | MF_HELP | MF_BYPOSITION | MF_BYCOMMAND |
00208                 MF_SEPARATOR)), IdItem, lpNewItem));
00209 
00210     <span class="keywordflow">if</span> (flags &amp; MF_APPEND)
00211         <span class="keywordflow">return</span>(AppendMenuA(hMenu, (UINT)(flags &amp; ~MF_APPEND),
00212             IdItem, lpNewItem));
00213 
00214     <span class="comment">/*</span>
00215 <span class="comment">     * Default is insert</span>
00216 <span class="comment">     */</span>
00217     <span class="keywordflow">return</span>(InsertMenuA(hMenu, cmd, (DWORD)(flags &amp; ~MF_INSERT),
00218             IdItem, lpNewItem));
00219 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="menuc.c::ChangeMenuW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ChangeMenuW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNewItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>IdItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/menuc_8c-source.html#l00131">131</a> of file <a class="el" href="../../d8/d6/menuc_8c-source.html">menuc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02761">MFMWFP_OFFMENU</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03988">NtUserDeleteMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05715">NtUserRemoveMenu()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>00137 {
00138     <span class="comment">/*</span>
00139 <span class="comment">     * These next two statements take care of sleazyness needed for</span>
00140 <span class="comment">     * compatability with old changemenu.</span>
00141 <span class="comment">     */</span>
00142     <span class="keywordflow">if</span> ((flags &amp; MF_SEPARATOR) &amp;&amp; cmd == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a776">MFMWFP_OFFMENU</a> &amp;&amp; !(flags &amp; MF_CHANGE))
00143         flags |= MF_APPEND;
00144 
00145     <span class="keywordflow">if</span> (lpNewItem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00146         flags |= MF_SEPARATOR;
00147 
00148 
00149 
00150     <span class="comment">/*</span>
00151 <span class="comment">     * MUST be MF_BYPOSITION for Win2.x compatability.</span>
00152 <span class="comment">     */</span>
00153     <span class="keywordflow">if</span> (flags &amp; MF_REMOVE)
00154         <span class="keywordflow">return</span>(<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a218">NtUserRemoveMenu</a>(hMenu, cmd,
00155                 (DWORD)((flags &amp; ~MF_REMOVE) | MF_BYPOSITION)));
00156 
00157     <span class="keywordflow">if</span> (flags &amp; MF_DELETE)
00158         <span class="keywordflow">return</span>(<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a154">NtUserDeleteMenu</a>(hMenu, cmd, (DWORD)(flags &amp; ~MF_DELETE)));
00159 
00160     <span class="keywordflow">if</span> (flags &amp; MF_CHANGE)
00161         <span class="keywordflow">return</span>(ModifyMenuW(hMenu, cmd, (DWORD)((flags &amp; ~MF_CHANGE) &amp;
00162                 (0x07F | MF_HELP | MF_BYPOSITION | MF_BYCOMMAND |
00163                 MF_SEPARATOR)), IdItem, lpNewItem));
00164 
00165     <span class="keywordflow">if</span> (flags &amp; MF_APPEND)
00166         <span class="keywordflow">return</span>(AppendMenuW(hMenu, (UINT)(flags &amp; ~MF_APPEND),
00167             IdItem, lpNewItem));
00168 
00169     <span class="comment">/*</span>
00170 <span class="comment">     * Default is insert</span>
00171 <span class="comment">     */</span>
00172     <span class="keywordflow">return</span>(InsertMenuW(hMenu, cmd, (DWORD)(flags &amp; ~MF_INSERT),
00173             IdItem, lpNewItem));
00174 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="menuc.c::CheckMenuItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CheckMenuItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uIDCheckItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uCheck</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/menuc_8c-source.html#l00015">15</a> of file <a class="el" href="../../d8/d6/menuc_8c-source.html">menuc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02744">tagITEM::fState</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00486">MNLookUpItem()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03893">NtUserCheckMenuItem()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00196">VALIDATEHMENU</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00282">MainWndProc()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00499">MDISetMenu()</a>, <a class="el" href="../../d0/d1/usrbench_8c-source.html#l01859">SyncMenuChecks()</a>, <a class="el" href="../../d0/d1/usrbench_8c-source.html#l00268">WndProc()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>.
<p>
<pre class="fragment"><div>00019 {
00020     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pMenu;
00021     <a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a> pItem;
00022 
00023     pMenu = <a class="code" href="../../d6/d0/usercli_8h.html#a22">VALIDATEHMENU</a>(hMenu);
00024     <span class="keywordflow">if</span> (pMenu == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00025         <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)-1;
00026     }
00027 
00028     <span class="comment">/*</span>
00029 <span class="comment">     * Get a pointer the the menu item</span>
00030 <span class="comment">     */</span>
00031     <span class="keywordflow">if</span> ((pItem = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a10">MNLookUpItem</a>(pMenu, uIDCheckItem, (BOOL) (uCheck &amp; MF_BYPOSITION), NULL)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00032         <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)-1;
00033 
00034     <span class="comment">/*</span>
00035 <span class="comment">     * If the item is already in the state we're</span>
00036 <span class="comment">     * trying to set, just return.</span>
00037 <span class="comment">     */</span>
00038     <span class="keywordflow">if</span> ((pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o1">fState</a> &amp; MFS_CHECKED) == (uCheck &amp; MFS_CHECKED)) {
00039         <span class="keywordflow">return</span> pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o1">fState</a> &amp; MF_CHECKED;
00040     }
00041 
00042     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a150">NtUserCheckMenuItem</a>(hMenu, uIDCheckItem, uCheck);
00043 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="menuc.c::CheckMenuRadioItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CheckMenuRadioItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wIDFirst</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wIDLast</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wIDCheck</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/menuc_8c-source.html#l00354">354</a> of file <a class="el" href="../../d8/d6/menuc_8c-source.html">menuc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02744">tagITEM::fState</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02743">tagITEM::fType</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00486">MNLookUpItem()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04663">NtUserThunkedMenuItemInfo()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01513">PtoHq</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02779">TestMFS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02783">TestMFT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00196">VALIDATEHMENU</a>.
<p>
<pre class="fragment"><div>00356 {
00357     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fByPosition = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>) (flags &amp; MF_BYPOSITION);
00358     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a>   pMenu, pMenuItemIsOn;
00359     <a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a>   pItem;
00360     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>    wIDCur;
00361     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fChecked = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00362     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fFirst  = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00363     MENUITEMINFO mii;
00364 
00365     pMenu = <a class="code" href="../../d6/d0/usercli_8h.html#a22">VALIDATEHMENU</a>(hMenu);
00366     <span class="keywordflow">if</span> (pMenu == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00367         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00368     }
00369 
00370     mii.cbSize = <span class="keyword">sizeof</span>(mii);
00371     <span class="comment">/*</span>
00372 <span class="comment">     * Make sure we won't loop for ever</span>
00373 <span class="comment">     */</span>
00374     wIDLast = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(wIDLast, (UINT)0xFFFFFFFE);
00375 
00376     <span class="keywordflow">for</span> (wIDCur = wIDFirst; wIDCur &lt;= wIDLast; wIDCur++) {
00377         pItem = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a10">MNLookUpItem</a>(pMenu, wIDCur, fByPosition, &amp;pMenuItemIsOn);
00378         <span class="comment">/*</span>
00379 <span class="comment">         * Continue searching if it didn't find the item or it's a separator</span>
00380 <span class="comment">         */</span>
00381         <span class="keywordflow">if</span> ((pItem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a791">TestMFT</a>(pItem, MFT_SEPARATOR)) {
00382             <span class="keywordflow">continue</span>;
00383         }
00384         <span class="comment">/*</span>
00385 <span class="comment">         * If this is the first one, rememeber what menu it's on because</span>
00386 <span class="comment">         *  all items are supposed to be in the same menu.</span>
00387 <span class="comment">         */</span>
00388         <span class="keywordflow">if</span> (fFirst) {
00389             pMenu = pMenuItemIsOn;
00390             hMenu = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a449">PtoHq</a>(pMenu);
00391             fFirst = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00392         }
00393         <span class="comment">/*</span>
00394 <span class="comment">         * If this item is on a different menu, don't touch it</span>
00395 <span class="comment">         */</span>
00396         <span class="keywordflow">if</span> (pMenu != pMenuItemIsOn) {
00397             <span class="keywordflow">continue</span>;
00398         }
00399         <span class="comment">/*</span>
00400 <span class="comment">         * Set the new check state. Avoid the trip to the kernel if possible</span>
00401 <span class="comment">         */</span>
00402         <span class="keywordflow">if</span> (wIDCur == wIDCheck) {
00403             <span class="comment">/*</span>
00404 <span class="comment">             * Check it.</span>
00405 <span class="comment">             */</span>
00406             <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a791">TestMFT</a>(pItem, MFT_RADIOCHECK) || !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a788">TestMFS</a>(pItem, MFS_CHECKED)) {
00407                 mii.fMask = MIIM_FTYPE | MIIM_STATE;
00408                 mii.fType = (pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o0">fType</a> &amp; MFT_MASK) | MFT_RADIOCHECK;
00409                 mii.fState = (pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o1">fState</a> &amp; MFS_MASK) | MFS_CHECKED;
00410                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a181">NtUserThunkedMenuItemInfo</a>(hMenu, wIDCheck, fByPosition, FALSE, &amp;mii, NULL);
00411             }
00412             fChecked = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00413         } <span class="keywordflow">else</span> {
00414             <span class="comment">/*</span>
00415 <span class="comment">             * Uncheck it</span>
00416 <span class="comment">             * NOTE:  don't remove MFT_RADIOCHECK type</span>
00417 <span class="comment">             */</span>
00418             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a788">TestMFS</a>(pItem, MFS_CHECKED)) {
00419                 mii.fMask = MIIM_STATE;
00420                 mii.fState = (pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o1">fState</a> &amp; MFS_MASK) &amp; ~MFS_CHECKED;
00421                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a181">NtUserThunkedMenuItemInfo</a>(hMenu, wIDCur, fByPosition, FALSE, &amp;mii, NULL);
00422             }
00423         }
00424     } <span class="comment">/* for */</span>
00425 
00426     <span class="keywordflow">if</span> (fFirst) {
00427         <span class="comment">/*</span>
00428 <span class="comment">         * No item was ever found.</span>
00429 <span class="comment">         */</span>
00430         RIPERR0(ERROR_MENU_ITEM_NOT_FOUND, RIP_VERBOSE, <span class="stringliteral">"CheckMenuRadioItem, no items found\n"</span>);
00431 
00432     }
00433     <span class="keywordflow">return</span>(fChecked);
00434 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="menuc.c::DrawMenuBarTemp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int WINAPI DrawMenuBarTemp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HFONT&nbsp;</td>
          <td class="mdname" nowrap> <em>hFont</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/menuc_8c-source.html#l00313">313</a> of file <a class="el" href="../../d8/d6/menuc_8c-source.html">menuc.c</a>.
<p>
References <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00027">IsMetaFile()</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09444">NtUserDrawMenuBarTemp()</a>.
<p>
<pre class="fragment"><div>00319 {
00320     HDC hdcr;
00321 
00322     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a547">IsMetaFile</a>(hdc))
00323         <span class="keywordflow">return</span> -1;
00324 
00325     hdcr = GdiConvertAndCheckDC(hdc);
00326     <span class="keywordflow">if</span> (hdcr == (HDC)0)
00327         <span class="keywordflow">return</span> -1;
00328 
00329     <span class="keywordflow">if</span> (!hMenu)
00330         <span class="keywordflow">return</span> -1;
00331 
00332     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a324">NtUserDrawMenuBarTemp</a>(
00333             hwnd,
00334             hdc,
00335             lprc,
00336             hMenu,
00337             hFont);
00338 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="menuc.c::GetMenuCheckMarkDimensions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG GetMenuCheckMarkDimensions           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/menuc_8c-source.html#l00221">221</a> of file <a class="el" href="../../d8/d6/menuc_8c-source.html">menuc.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>.
<p>
<pre class="fragment"><div>00222 {
00223     <span class="keywordflow">return</span>((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)MAKELONG(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXMENUCHECK), <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYMENUCHECK)));
00224 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="menuc.c::GetMenuContextHelpId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WINUSERAPI <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI GetMenuContextHelpId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hMenu</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/menuc_8c-source.html#l00233">233</a> of file <a class="el" href="../../d8/d6/menuc_8c-source.html">menuc.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02799">tagMENU::dwContextHelpId</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00196">VALIDATEHMENU</a>.
<p>
<pre class="fragment"><div>00235 {
00236     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pMenu;
00237 
00238     pMenu = <a class="code" href="../../d6/d0/usercli_8h.html#a22">VALIDATEHMENU</a>(hMenu);
00239 
00240     <span class="keywordflow">if</span> (pMenu == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00241         <span class="keywordflow">return</span> 0;
00242 
00243     <span class="keywordflow">return</span> pMenu-&gt;<a class="code" href="../../d1/d1/structtagMENU.html#o10">dwContextHelpId</a>;
00244 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="menuc.c::GetMenuDefaultItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT GetMenuDefaultItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>fByPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/menuc_8c-source.html#l00045">45</a> of file <a class="el" href="../../d8/d6/menuc_8c-source.html">menuc.c</a>.
<p>
References <a class="el" href="../../d6/d6/ntuser_2rtl_2menu_8c-source.html#l00026">_GetMenuDefaultItem()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00196">VALIDATEHMENU</a>.
<p>
<pre class="fragment"><div>00045                                                                     {
00046     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pMenu;
00047 
00048     pMenu = <a class="code" href="../../d6/d0/usercli_8h.html#a22">VALIDATEHMENU</a>(hMenu);
00049     <span class="keywordflow">if</span> (pMenu == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00050         <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)-1;
00051     }
00052 
00053     <span class="keywordflow">return</span> <a class="code" href="../../d5/d7/ntuser_2rtl_2menu_8c.html#a0">_GetMenuDefaultItem</a>(pMenu, (BOOL)fByPosition, uFlags);
00054 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="menuc.c::SetMenuInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetMenuInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCMENUINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpmi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/menuc_8c-source.html#l00115">115</a> of file <a class="el" href="../../d8/d6/menuc_8c-source.html">menuc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01992">MENUAPI_SET</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04730">NtUserThunkedMenuInfo()</a>, and <a class="el" href="../../d0/d8/clmenu_8c-source.html#l00607">ValidateMENUINFO()</a>.
<p>
<pre class="fragment"><div>00116 {
00117     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a770">ValidateMENUINFO</a>(lpmi, MENUAPI_SET)) {
00118         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00119     }
00120 
00121     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a182">NtUserThunkedMenuInfo</a>(hMenu, (LPCMENUINFO)lpmi);
00122 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="menuc.c::SetMenuItemBitmaps" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI SetMenuItemBitmaps           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>nPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HBITMAP&nbsp;</td>
          <td class="mdname" nowrap> <em>hbmpUnchecked</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HBITMAP&nbsp;</td>
          <td class="mdname" nowrap> <em>hbmpChecked</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/menuc_8c-source.html#l00296">296</a> of file <a class="el" href="../../d8/d6/menuc_8c-source.html">menuc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01685">SetMenuItemInfo()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>00303 {
00304     MENUITEMINFO    mii;
00305     mii.cbSize          = <span class="keyword">sizeof</span>(MENUITEMINFO);
00306     mii.fMask           = MIIM_CHECKMARKS;
00307     mii.hbmpChecked     = hbmpChecked;
00308     mii.hbmpUnchecked   = hbmpUnchecked;
00309 
00310     <span class="keywordflow">return</span>(<a class="code" href="../../d5/d9/cltxt_8h.html#a30">SetMenuItemInfo</a>(hMenu, nPosition, (BOOL) (uFlags &amp; MF_BYPOSITION), &amp;mii));
00311 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="menuc.c::SetMenuItemInfoStruct" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SetMenuItemInfoStruct           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>wIDNew</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pwszNew</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPMENUITEMINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>pmii</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/menuc_8c-source.html#l00062">62</a> of file <a class="el" href="../../d8/d6/menuc_8c-source.html">menuc.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02791">tagMENU::cItems</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02743">tagITEM::fType</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">REBASEALWAYS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02783">TestMFT</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00196">VALIDATEHMENU</a>.
<p>
<pre class="fragment"><div>00063 {
00064     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pMenu;
00065     <a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a> pItem;
00066 
00067     UserAssert(<span class="keyword">sizeof</span>(MENUITEMINFOW) == <span class="keyword">sizeof</span>(MENUITEMINFOA));
00068 
00069     RtlZeroMemory(pmii, <span class="keyword">sizeof</span>(*pmii));
00070 
00071     pmii-&gt;fMask = MIIM_STATE | MIIM_ID | MIIM_FTYPE;
00072 
00073     <span class="comment">/*</span>
00074 <span class="comment">     * For compatibility, setting the bitmap drops the string and</span>
00075 <span class="comment">     *  viceversa; new apps that want to have sting and bitmaps</span>
00076 <span class="comment">     *  must use the MENUITEMINFO APIs</span>
00077 <span class="comment">     */</span>
00078     <span class="keywordflow">if</span> (wFlags &amp; MFT_BITMAP) {
00079         pmii-&gt;fMask |= MIIM_BITMAP | MIIM_STRING;
00080         pmii-&gt;hbmpItem = (HBITMAP)pwszNew;
00081         pmii-&gt;dwTypeData  = 0;
00082     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(wFlags &amp; MFT_NONSTRING)) {
00083         pmii-&gt;fMask |= MIIM_BITMAP | MIIM_STRING;
00084         pmii-&gt;dwTypeData  = pwszNew;
00085         pmii-&gt;hbmpItem = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00086     }
00087 
00088     <span class="keywordflow">if</span> (wFlags &amp; MF_POPUP) {
00089         pmii-&gt;fMask |= MIIM_SUBMENU;
00090         pmii-&gt;hSubMenu = (HMENU)wIDNew;
00091     }
00092 
00093     <span class="keywordflow">if</span> (wFlags &amp; MF_OWNERDRAW) {
00094         pmii-&gt;fMask |= MIIM_DATA;
00095         pmii-&gt;dwItemData = (ULONG_PTR) pwszNew;
00096     }
00097 
00098     pmii-&gt;fState = wFlags &amp; MFS_OLDAPI_MASK;
00099     pmii-&gt;fType  = wFlags &amp; MFT_OLDAPI_MASK;
00100     pMenu = <a class="code" href="../../d6/d0/usercli_8h.html#a22">VALIDATEHMENU</a>(hMenu);
00101     <span class="keywordflow">if</span> (pMenu &amp;&amp; pMenu-&gt;<a class="code" href="../../d1/d1/structtagMENU.html#o4">cItems</a>) {
00102         pItem = &amp;((<a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pMenu, rgItems))[0];
00103         <span class="keywordflow">if</span> (pItem &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a791">TestMFT</a>(pItem, MFT_RIGHTORDER)) {
00104             pmii-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o0">fType</a> |= MFT_RIGHTORDER;
00105         }
00106     }
00107     pmii-&gt;wID    = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wIDNew;
00108 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="menuc.c::TrackPopupMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL TrackPopupMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HMENU&nbsp;</td>
          <td class="mdname" nowrap> <em>hMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>fuFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nReserved</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>prcRect</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/menuc_8c-source.html#l00246">246</a> of file <a class="el" href="../../d8/d6/menuc_8c-source.html">menuc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06339">NtUserTrackPopupMenuEx()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00348">HelpMenu()</a>.
<p>
<pre class="fragment"><div>00254 {
00255     UNREFERENCED_PARAMETER(nReserved);
00256     UNREFERENCED_PARAMETER(prcRect);
00257 
00258     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a239">NtUserTrackPopupMenuEx</a>(hMenu, fuFlags, x, y, hwnd, NULL);
00259 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="menuc.c::xxxGetSysMenuHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a> xxxGetSysMenuHandle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/menuc_8c-source.html#l00270">270</a> of file <a class="el" href="../../d8/d6/menuc_8c-source.html">menuc.c</a>.
<p>
<pre class="fragment"><div>00272 {
00273     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pMenu;
00274 
00275     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFSYSMENU)) {
00276         pMenu = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o15">spmenuSys</a>;
00277 
00278         <span class="comment">/*</span>
00279 <span class="comment">         * If the window doesn't have a System Menu, use the default one.</span>
00280 <span class="comment">         */</span>
00281         <span class="keywordflow">if</span> (pMenu == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00282 
00283             <span class="comment">/*</span>
00284 <span class="comment">             * Change owner so this app can access this menu.</span>
00285 <span class="comment">             */</span>
00286             pMenu = (<a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a176">NtUserCallHwndLock</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), SFI_XXXGETSYSMENUHANDLE);
00287         }
00288     } <span class="keywordflow">else</span> {
00289         pMenu = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00290     }
00291 
00292     <span class="keywordflow">return</span> pMenu;
00293 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:38 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: partit.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>partit.c File Reference</h1><code>#include "<a class="el" href="../../d4/d2/arcinst_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d8/d2/partit_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a0">STATUS_ROW_TOP</a>&nbsp;&nbsp;&nbsp;13</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a1">STATUS_ROW_BOTTOM</a>&nbsp;&nbsp;&nbsp;17</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a2">MsgNoMem</a>()&nbsp;&nbsp;&nbsp;AlStatusMsg(STATUS_ROW_TOP,STATUS_ROW_BOTTOM,TRUE,<a class="el" href="../../d7/d3/partit_8c.html#a8">NOMEMMSG</a>);</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a3">SYSPARTMENU_CREATE</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a4">SYSPARTMENU_DELETE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a5">SYSPARTMENU_ADD</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a6">SYSPARTMENU_EXIT</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a7">MENU_ROW</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a26">AlGetNextArcNamToken</a> (IN PCHAR TokenString, OUT PCHAR OutputToken, OUT PULONG UnitNumber)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a27">Confirm</a> (PCHAR Warning)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a> (PCHAR FormatString,...)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a29">PrintMsg</a> (PCHAR FormatString,...)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a30">IsBootSelectionPartition</a> (PCHAR Variable, ULONG Disk, ULONG Partition, PULONG MatchNumber OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a31">ChooseDisk</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a32">DoPartitionCreate</a> (OUT PULONG DiskNo, OUT PULONG PartitionNo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a33">DoPartitionDelete</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a34">DoSystemPartitionCreate</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a35">DoMakePartitionSystemPartition</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a36">ConfigureSystemPartitions</a> (VOID)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a8">NOMEMMSG</a> [] = "Insufficient memory"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a9">NOCNFMSG</a> [] = "Unable to determine disk configuration (ARC status = %u)"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a10">NOFMTMSG</a> [] = "Format failed (ARC status = %u)"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a11">DSKFLMSG</a> [] = "Disk <a class="el" href="../../d3/d0/user32_8def.html#a108">is</a> full"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a12">NOCREMSG</a> [] = "Could not create partition (ARC status = %u)"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a13">NODELMSG</a> [] = "Could not delete partition (ARC status = %u)"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a14">ALREAMSG</a> [] = "Partition <a class="el" href="../../d3/d0/user32_8def.html#a108">is</a> already a system partition"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a15">NOFILMSG</a> [] = "Unable to determine filesystem on partition (ARC status = %u)"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a16">NOENVMSG</a> [] = "Error (ARC status = %u) determining environment"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a17">NOEVAMSG</a> [] = "Could not add partition to environment (ARC status = %u)"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a18">NOEVDMSG</a> [] = "Could not remove partition from environment (ARC status = %u)"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a19">NOSYSMSG</a> [] = "No system partitions defined"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a20">NOPARMSG</a> [] = "No partitions on this disk"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a21">SYSPARTVAR</a> [] = "SYSTEMPARTITION"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a22">OSLOADERVAR</a> [] = "OSLOADER"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a23">OSLOADPARTVAR</a> [] = "OSLOADPARTITION"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a24">SysPartMenu</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/partit_8c.html#a25">sprintfBuffer</a> [256]</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a7" doxytag="partit.c::MENU_ROW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MENU_ROW&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00069">69</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="partit.c::MsgNoMem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MsgNoMem          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;AlStatusMsg(STATUS_ROW_TOP,STATUS_ROW_BOTTOM,TRUE,<a class="el" href="../../d7/d3/partit_8c.html#a8">NOMEMMSG</a>);</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00056">56</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="partit.c::STATUS_ROW_BOTTOM" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STATUS_ROW_BOTTOM&nbsp;&nbsp;&nbsp;17          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00036">36</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00074">Confirm()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00093">PrintErrorMsg()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00111">PrintMsg()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="partit.c::STATUS_ROW_TOP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STATUS_ROW_TOP&nbsp;&nbsp;&nbsp;13          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00035">35</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00074">Confirm()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00093">PrintErrorMsg()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00111">PrintMsg()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="partit.c::SYSPARTMENU_ADD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SYSPARTMENU_ADD&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00066">66</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="partit.c::SYSPARTMENU_CREATE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SYSPARTMENU_CREATE&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00064">64</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="partit.c::SYSPARTMENU_DELETE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SYSPARTMENU_DELETE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00065">65</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="partit.c::SYSPARTMENU_EXIT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SYSPARTMENU_EXIT&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00067">67</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a26" doxytag="partit.c::AlGetNextArcNamToken" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR AlGetNextArcNamToken           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>TokenString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>OutputToken</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>UnitNumber</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01318">1318</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>.
<p>
<pre class="fragment"><div>01326                    :
01327 
01328     This routine scans <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified token string <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> next token and
01329     unit number. The token <a class="code" href="../../d8/d0/rtbatcr_8c.html#a8">format</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>:
01330 
01331         name[(unit)]
01332 
01333 Arguments:
01334 
01335     TokenString - Supplies a pointer to a zero terminated token string.
01336 
01337     OutputToken - Supplies a pointer to a variable that receives <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> next
01338         token.
01339 
01340     UnitNumber - Supplies a pointer to a variable that receives <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> unit
01341         number.
01342 
01343 Return Value:
01344 
01345     If another token exists in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> token string, then a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
01346     start of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> next token <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned. Otherwise, a value of <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
01347     returned.
01348 
01349 --*/
01350 
01351 {
01352 
01353     <span class="comment">//</span>
01354     <span class="comment">// If there are more characters in the token string, then parse the</span>
01355     <span class="comment">// next token. Otherwise, return a value of NULL.</span>
01356     <span class="comment">//</span>
01357 
01358     <span class="keywordflow">if</span> (*TokenString == <span class="charliteral">'\0'</span>) {
01359         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01360 
01361     } <span class="keywordflow">else</span> {
01362         <span class="keywordflow">while</span> ((*TokenString != <span class="charliteral">'\0'</span>) &amp;&amp; (*TokenString != <span class="charliteral">'('</span>)) {
01363             *OutputToken++ = *TokenString++;
01364         }
01365 
01366         *OutputToken = <span class="charliteral">'\0'</span>;
01367 
01368         <span class="comment">//</span>
01369         <span class="comment">// If a unit number is specified, then convert it to binary.</span>
01370         <span class="comment">// Otherwise, default the unit number to zero.</span>
01371         <span class="comment">//</span>
01372 
01373         *UnitNumber = 0;
01374         <span class="keywordflow">if</span> (*TokenString == <span class="charliteral">'('</span>) {
01375             TokenString += 1;
01376             <span class="keywordflow">while</span> ((*TokenString != <span class="charliteral">'\0'</span>) &amp;&amp; (*TokenString != <span class="charliteral">')'</span>)) {
01377                 *UnitNumber = (*UnitNumber * 10) + (*TokenString++ - <span class="charliteral">'0'</span>);
01378             }
01379 
01380             <span class="keywordflow">if</span> (*TokenString == <span class="charliteral">')'</span>) {
01381                 TokenString += 1;
01382             }
01383         }
01384     }
01385 
01386     <span class="keywordflow">return</span> TokenString;
01387 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="partit.c::ChooseDisk" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG ChooseDisk           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">149</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00684">AlAddMenuItem()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00740">AlDisplayMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01318">AlGetNextArcNamToken()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00647">AlNewMenu()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02587">GetDiskCount()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02615">GetDiskName()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00069">MENU_ROW</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00056">MsgNoMem</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d9/heappage_8c.html#a68">sprintf()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00071">sprintfBuffer</a>, and <a class="el" href="../../d7/d9/ctaccess_8c-source.html#l00123">Token</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.
<p>
<pre class="fragment"><div>00152 {
00153     ULONG DiskCount = <a class="code" href="../../d8/d1/fdengine_8c.html#a61">GetDiskCount</a>();
00154     PVOID MenuID;
00155     LONG Disk;
00156     ULONG ChosenDisk;
00157     PCHAR DiskName,TempDiskName;
00158     ULONG UnitNumber,ScsiNumber,ScsiId,DiskNumber;
00159     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> <a class="code" href="../../d6/d0/ctaccess_8c.html#a29">Token</a>[32];
00160 
00161     <span class="keywordflow">if</span> (DiskCount == 1) {
00162         <span class="keywordflow">return</span>(0);
00163     }
00164 
00165     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a91">AlNewMenu</a>(&amp;MenuID)) {
00166         <a class="code" href="../../d7/d3/partit_8c.html#a2">MsgNoMem</a>();
00167         <span class="keywordflow">return</span>(-1);
00168     }
00169 
00170     <span class="keywordflow">for</span>(Disk = DiskCount - 1; Disk &gt;= 0; Disk--) {
00171 
00172         DiskName = <a class="code" href="../../d8/d1/fdengine_8c.html#a62">GetDiskName</a>(Disk);
00173 
00174         <span class="keywordflow">if</span> ((strstr(DiskName, <span class="stringliteral">"scsi"</span>) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp;
00175             (strstr(DiskName, <span class="stringliteral">"disk"</span>) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) ) {
00176 
00177             ScsiNumber = ScsiId = DiskNumber = 0;
00178             TempDiskName = DiskName;
00179 
00180             <span class="keywordflow">while</span> (TempDiskName != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00181                 TempDiskName = <a class="code" href="../../d7/d3/partit_8c.html#a26">AlGetNextArcNamToken</a>(TempDiskName,
00182                                                     Token,
00183                                                     &amp;UnitNumber);
00184 
00185                 <span class="keywordflow">if</span> (strcmp(Token,<span class="stringliteral">"scsi"</span>) == 0) {
00186                     ScsiNumber = UnitNumber;
00187                 }
00188 
00189                 <span class="keywordflow">if</span> (strcmp(Token,<span class="stringliteral">"disk"</span>) == 0) {
00190                     ScsiId = UnitNumber;
00191                 }
00192 
00193                 <span class="keywordflow">if</span> (strcmp(Token,<span class="stringliteral">"rdisk"</span>) == 0) {
00194                     DiskNumber = UnitNumber;
00195                 }
00196             }
00197 
00198             <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a>(sprintfBuffer,
00199                     <span class="stringliteral">"Scsi bus %d, Identifier %d, Disk %d (%s)"</span>,
00200                     ScsiNumber,
00201                     ScsiId,
00202                     DiskNumber,
00203                     <a class="code" href="../../d8/d1/fdengine_8c.html#a62">GetDiskName</a>(Disk));
00204         } <span class="keywordflow">else</span> {
00205             <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a>(sprintfBuffer,<span class="stringliteral">"Disk %d (%s)"</span>,Disk,<a class="code" href="../../d8/d1/fdengine_8c.html#a62">GetDiskName</a>(Disk));
00206         }
00207 
00208 
00209         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a93">AlAddMenuItem</a>(MenuID,sprintfBuffer,Disk,0)) {
00210             <a class="code" href="../../d7/d3/partit_8c.html#a2">MsgNoMem</a>();
00211             <span class="keywordflow">return</span>(-1);
00212         }
00213     }
00214 
00215     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a95">AlDisplayMenu</a>(MenuID,FALSE,0,&amp;ChosenDisk,MENU_ROW,<span class="stringliteral">"Select Disk"</span>)) {
00216         <span class="keywordflow">return</span>(-1);
00217     } <span class="keywordflow">else</span> {
00218         <span class="keywordflow">return</span>(ChosenDisk);
00219     }
00220 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="partit.c::ConfigureSystemPartitions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ConfigureSystemPartitions           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">681</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00720">AlAddMenuItems()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00740">AlDisplayMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00664">AlFreeMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00647">AlNewMenu()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02587">GetDiskCount()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00069">MENU_ROW</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00056">MsgNoMem</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00058">SysPartMenu</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00066">SYSPARTMENU_ADD</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00064">SYSPARTMENU_CREATE</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00065">SYSPARTMENU_DELETE</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00067">SYSPARTMENU_EXIT</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>.
<p>
<pre class="fragment"><div>00684 {
00685     ULONG Choice=0,DiskCount=<a class="code" href="../../d8/d1/fdengine_8c.html#a61">GetDiskCount</a>();
00686     PVOID MenuID;
00687 
00688     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a91">AlNewMenu</a>(&amp;MenuID)) {
00689         <a class="code" href="../../d7/d3/partit_8c.html#a2">MsgNoMem</a>();
00690         <span class="keywordflow">return</span>;
00691     }
00692 
00693     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a94">AlAddMenuItems</a>(MenuID,SysPartMenu,<span class="keyword">sizeof</span>(SysPartMenu)/<span class="keyword">sizeof</span>(PCHAR))) {
00694         <a class="code" href="../../d7/d3/partit_8c.html#a2">MsgNoMem</a>();
00695         <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(MenuID);
00696         <span class="keywordflow">return</span>;
00697     }
00698 
00699     <span class="keywordflow">while</span>(1) {
00700 
00701         <span class="keywordflow">if</span> ((!<a class="code" href="../../d4/d9/arcinst_8h.html#a95">AlDisplayMenu</a>(MenuID,FALSE,Choice,&amp;Choice,MENU_ROW,<span class="stringliteral">"Configure System Partitions"</span>))
00702             || (Choice == <a class="code" href="../../d7/d3/partit_8c.html#a6">SYSPARTMENU_EXIT</a>))
00703         {
00704             <span class="keywordflow">break</span>;
00705         }
00706 
00707         <span class="keywordflow">switch</span>(Choice) {
00708 
00709         <span class="keywordflow">case</span> <a class="code" href="../../d7/d3/partit_8c.html#a3">SYSPARTMENU_CREATE</a>:
00710             <span class="comment">// create system partition.</span>
00711             <a class="code" href="../../d7/d3/partit_8c.html#a34">DoSystemPartitionCreate</a>();
00712             <span class="keywordflow">break</span>;
00713 
00714         <span class="keywordflow">case</span> <a class="code" href="../../d7/d3/partit_8c.html#a4">SYSPARTMENU_DELETE</a>:
00715             <span class="comment">// delete partition</span>
00716             <a class="code" href="../../d7/d3/partit_8c.html#a33">DoPartitionDelete</a>();
00717             <span class="keywordflow">break</span>;
00718 
00719         <span class="keywordflow">case</span> <a class="code" href="../../d7/d3/partit_8c.html#a5">SYSPARTMENU_ADD</a>:
00720             <span class="comment">// make existing into a system partition</span>
00721             <a class="code" href="../../d7/d3/partit_8c.html#a35">DoMakePartitionSystemPartition</a>();
00722             <span class="keywordflow">break</span>;
00723         }
00724     }
00725 
00726     <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(MenuID);
00727 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="partit.c::Confirm" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN Confirm           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PCHAR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Warning</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00074">74</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l01010">AlClearStatusArea()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01483">AlPrint()</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00033">ARC_CONSOLE_INPUT</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01530">ArcRead</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00023">ASCI_ESC</a>, <a class="el" href="../../d4/d9/user32_8def-source.html#l00799">c</a>, <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00051">Count</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00585">MSGMARGIN</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00036">STATUS_ROW_BOTTOM</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00035">STATUS_ROW_TOP</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.
<p>
<pre class="fragment"><div>00077 {
00078     <span class="keywordtype">char</span>  <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>;
00079     ULONG <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
00080 
00081     <a class="code" href="../../d4/d9/arcinst_8h.html#a103">AlClearStatusArea</a>(STATUS_ROW_TOP,STATUS_ROW_BOTTOM);
00082     <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(<span class="stringliteral">"%s%s (y/n)?"</span>,MSGMARGIN,Warning);
00083     <a class="code" href="../../d1/d9/arc_8h.html#a33">ArcRead</a>(ARC_CONSOLE_INPUT,&amp;c,1,&amp;Count);
00084     <span class="keywordflow">while</span>((<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> != <span class="charliteral">'y'</span>) &amp;&amp; (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> != <span class="charliteral">'Y'</span>) &amp;&amp; (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> != <span class="charliteral">'n'</span>) &amp;&amp; (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> != <span class="charliteral">'N'</span>) &amp;&amp; (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> != <a class="code" href="../../d4/d9/arcinst_8h.html#a9">ASCI_ESC</a>)) {
00085         <a class="code" href="../../d1/d9/arc_8h.html#a33">ArcRead</a>(ARC_CONSOLE_INPUT,&amp;c,1,&amp;Count);
00086     }
00087     <a class="code" href="../../d4/d9/arcinst_8h.html#a103">AlClearStatusArea</a>(STATUS_ROW_TOP,STATUS_ROW_BOTTOM);
00088     <span class="keywordflow">return</span>((BOOLEAN)((<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> == <span class="charliteral">'y'</span>) || (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> == <span class="charliteral">'Y'</span>)));
00089 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="partit.c::DoMakePartitionSystemPartition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID DoMakePartitionSystemPartition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">573</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00684">AlAddMenuItem()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00424">AlAddSystemPartition()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00740">AlDisplayMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00664">AlFreeMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00647">AlNewMenu()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00044">ALREAMSG</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00074">Confirm()</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00601">FmtFatFormat()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00093">FmtIsFat()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01013">FreeRegionArray()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02615">GetDiskName()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01425">GetHiddenSectorCount()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02719">GetSysIDName()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00602">GetUsedDiskRegions</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00129">IsBootSelectionPartition()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02114">IsExtended()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00069">MENU_ROW</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00056">MsgNoMem</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00039">NOCNFMSG</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00047">NOEVAMSG</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00045">NOFILMSG</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00040">NOFMTMSG</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00050">NOPARMSG</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00561">_tagREGION_DESCRIPTOR::PartitionNumber</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00093">PrintErrorMsg()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00111">PrintMsg()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01366">SetSysID()</a>, <a class="el" href="../../d6/d9/heappage_8c.html#a68">sprintf()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00071">sprintfBuffer</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a176a72">SYSID_BIGFAT</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00052">SYSPARTVAR</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>.
<p>
<pre class="fragment"><div>00576 {
00577     BOOLEAN            f,IsFAT;
00578     ULONG              Disk,i,Choice;
00579     PVOID              MenuID;
00580     <a class="code" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> Regions;
00581     ULONG              RegionCount;
00582     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>         status;
00583     <span class="keywordtype">char</span>               PartitionPath[256];
00584     ULONG              PartitionNumber;
00585 
00586 
00587     <span class="comment">// take an existing partition and add it to the</span>
00588     <span class="comment">// list of system partitions.  Also make sure it's</span>
00589     <span class="comment">// formatted as FAT.</span>
00590 
00591     <span class="keywordflow">if</span> ((Disk = <a class="code" href="../../d7/d3/partit_8c.html#a31">ChooseDisk</a>()) == -1) {
00592         <span class="keywordflow">return</span>;
00593     }
00594 
00595     status = <a class="code" href="../../d4/d9/arcinst_8h.html#a31">GetUsedDiskRegions</a>(Disk,&amp;Regions,&amp;RegionCount);
00596     <span class="keywordflow">if</span> (status != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00597         <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOCNFMSG,status);
00598         <span class="keywordflow">return</span>;
00599     }
00600 
00601     <span class="keywordflow">if</span> (!RegionCount) {
00602         <a class="code" href="../../d8/d1/fdengine_8c.html#a38">FreeRegionArray</a>(Regions,RegionCount);
00603         <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOPARMSG);
00604         <span class="keywordflow">return</span>;
00605     }
00606 
00607     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a91">AlNewMenu</a>(&amp;MenuID)) {
00608         <a class="code" href="../../d8/d1/fdengine_8c.html#a38">FreeRegionArray</a>(Regions,RegionCount);
00609         <a class="code" href="../../d7/d3/partit_8c.html#a2">MsgNoMem</a>();
00610         <span class="keywordflow">return</span>;
00611     }
00612 
00613     <span class="keywordflow">for</span>(i=0; i&lt;RegionCount; i++) {
00614         <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d1/fdengine_8c.html#a52">IsExtended</a>(Regions[i].SysID)) {
00615             <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a>(sprintfBuffer,
00616                     <span class="stringliteral">"Partition %u (%u MB %s)"</span>,
00617                     Regions[i].PartitionNumber,
00618                     Regions[i].SizeMB,
00619                     <a class="code" href="../../d8/d1/fdengine_8c.html#a63">GetSysIDName</a>(Regions[i].SysID)
00620                    );
00621             <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a93">AlAddMenuItem</a>(MenuID,sprintfBuffer,i,0)) {
00622                 <a class="code" href="../../d7/d3/partit_8c.html#a2">MsgNoMem</a>();
00623                 <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(MenuID);
00624                 <a class="code" href="../../d8/d1/fdengine_8c.html#a38">FreeRegionArray</a>(Regions,RegionCount);
00625                 <span class="keywordflow">return</span>;
00626             }
00627         }
00628     }
00629 
00630     f = <a class="code" href="../../d4/d9/arcinst_8h.html#a95">AlDisplayMenu</a>(MenuID,FALSE,0,&amp;Choice,MENU_ROW,<span class="stringliteral">"Choose Partition"</span>);
00631     <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(MenuID);
00632     <span class="keywordflow">if</span> (!f) {            <span class="comment">// user escaped</span>
00633         <a class="code" href="../../d8/d1/fdengine_8c.html#a38">FreeRegionArray</a>(Regions,RegionCount);
00634         <span class="keywordflow">return</span>;
00635     }
00636 
00637     PartitionNumber = Regions[Choice].<a class="code" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html#o3">PartitionNumber</a>;
00638     <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a>(PartitionPath,<span class="stringliteral">"%spartition(%u)"</span>,<a class="code" href="../../d8/d1/fdengine_8c.html#a62">GetDiskName</a>(Disk),PartitionNumber);
00639 
00640     <a class="code" href="../../d8/d1/fdengine_8c.html#a38">FreeRegionArray</a>(Regions,RegionCount);
00641 
00642     <span class="keywordflow">if</span>(<a class="code" href="../../d7/d3/partit_8c.html#a30">IsBootSelectionPartition</a>(SYSPARTVAR,Disk,PartitionNumber,NULL)) {
00643         <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(ALREAMSG);
00644         <span class="keywordflow">return</span>;
00645     }
00646 
00647     status = <a class="code" href="../../d1/d6/fmtexp_8c.html#a10">FmtIsFat</a>(PartitionPath,&amp;IsFAT);
00648     <span class="keywordflow">if</span> (status != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00649         <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOFILMSG,status);
00650         <span class="keywordflow">return</span>;
00651     }
00652 
00653     <span class="keywordflow">if</span> (!IsFAT) {
00654         <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/partit_8c.html#a27">Confirm</a>(<span class="stringliteral">"System partitions must be formatted with the FAT filesystem.\r\n Do you wish to format the chosen partition"</span>)
00655             &amp;&amp; <a class="code" href="../../d7/d3/partit_8c.html#a27">Confirm</a>(<span class="stringliteral">"All existing data will be lost.  Are you sure"</span>))
00656         {
00657             status = <a class="code" href="../../d1/d6/fmtexp_8c.html#a16">FmtFatFormat</a>(PartitionPath,<a class="code" href="../../d8/d1/fdengine_8c.html#a44">GetHiddenSectorCount</a>(Disk,PartitionNumber));
00658             <span class="keywordflow">if</span> (status != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00659                 <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOFMTMSG,status);
00660                 <span class="keywordflow">return</span>;
00661             }
00662             <a class="code" href="../../d8/d1/fdengine_8c.html#a42">SetSysID</a>(Disk,PartitionNumber,SYSID_BIGFAT);
00663         } <span class="keywordflow">else</span> {
00664             <span class="keywordflow">return</span>;
00665         }
00666     }
00667 
00668     <span class="comment">//</span>
00669     <span class="comment">// Add to list of system partitions.</span>
00670     <span class="comment">//</span>
00671     <span class="keywordflow">if</span> ((status = <a class="code" href="../../d4/d9/arcinst_8h.html#a84">AlAddSystemPartition</a>(PartitionPath)) == <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00672         <a class="code" href="../../d7/d3/partit_8c.html#a29">PrintMsg</a>(<span class="stringliteral">"Partition added successfully."</span>);
00673     } <span class="keywordflow">else</span> {
00674         <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOEVAMSG,status);
00675     }
00676 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="partit.c::DoPartitionCreate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN DoPartitionCreate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>DiskNo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>PartitionNo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">224</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00684">AlAddMenuItem()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01010">AlClearStatusArea()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00740">AlDisplayMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00664">AlFreeMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01508">AlGetString()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00647">AlNewMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01483">AlPrint()</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01574">ArcGetEnvironmentVariable</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01596">ArcSetEnvironmentVariable</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03063">CommitPartitionChanges()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00074">Confirm()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00698">CreatePartition()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02446">DoesAnyPrimaryExist()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00041">DSKFLMSG</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01013">FreeRegionArray()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02615">GetDiskName()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00599">GetFreeDiskRegions</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00620">GetFreeLogicalDiskRegions</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02141">IsAnyCreationAllowed()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00069">MENU_ROW</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00585">MSGMARGIN</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00056">MsgNoMem</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00039">NOCNFMSG</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00042">NOCREMSG</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00047">NOEVAMSG</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00561">_tagREGION_DESCRIPTOR::PartitionNumber</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a51">PREGION_DESCRIPTOR</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00093">PrintErrorMsg()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00111">PrintMsg()</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a175a68">REGION_EXTENDED</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a175a67">REGION_PRIMARY</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00563">_tagREGION_DESCRIPTOR::RegionType</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00560">_tagREGION_DESCRIPTOR::SizeMB</a>, <a class="el" href="../../d6/d9/heappage_8c.html#a68">sprintf()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00071">sprintfBuffer</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00036">STATUS_ROW_BOTTOM</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00035">STATUS_ROW_TOP</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00052">SYSPARTVAR</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>.
<p>
<pre class="fragment"><div>00228 {
00229     ULONG              Disk,i;
00230     <a class="code" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> Regions;
00231     ULONG              RegionCount,Choice;
00232     ULONG              ChosenSize;
00233     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>         status;
00234     BOOLEAN            xAny,xP,xE,xL,PrimaryExists;
00235     PVOID              MenuID;
00236     ULONG              PartitionNumber;
00237     <span class="keywordtype">char</span>               PartitionPath[256];
00238 
00239 
00240     <span class="keywordflow">if</span> ((Disk = <a class="code" href="../../d7/d3/partit_8c.html#a31">ChooseDisk</a>()) == -1) {
00241         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00242     }
00243 
00244     <span class="keywordflow">if</span> ((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a58">DoesAnyPrimaryExist</a>(Disk,&amp;PrimaryExists)) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00245         <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOCNFMSG,status);
00246         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00247     }
00248 
00249     <span class="keywordflow">if</span> ((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a53">IsAnyCreationAllowed</a>(Disk,
00250                                       TRUE,
00251                                       &amp;xAny,
00252                                       &amp;xP,
00253                                       &amp;xE,
00254                                       &amp;xL
00255                                      )
00256        )
00257       != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>)
00258     {
00259         <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOCNFMSG,status);
00260         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00261     }
00262 
00263     <span class="comment">// in order for a creation to be allowed there must be</span>
00264     <span class="comment">// - free space on the disk and a free mbr entry OR</span>
00265     <span class="comment">// - free space in an existing extended partition.</span>
00266 
00267     <span class="keywordflow">if</span> (!xAny) {
00268         <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(DSKFLMSG);
00269         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00270     }
00271 
00272     <span class="keywordflow">if</span> ((status = <a class="code" href="../../d4/d9/arcinst_8h.html#a30">GetFreeDiskRegions</a>(Disk,&amp;Regions,&amp;RegionCount)) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00273         <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOCNFMSG,status);
00274         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00275     }
00276 
00277     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a91">AlNewMenu</a>(&amp;MenuID)) {
00278         <a class="code" href="../../d7/d3/partit_8c.html#a2">MsgNoMem</a>();
00279         <a class="code" href="../../d8/d1/fdengine_8c.html#a38">FreeRegionArray</a>(Regions,RegionCount);
00280         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00281     }
00282 
00283     <span class="comment">// Present the user with a list of the free spaces</span>
00284     <span class="comment">// on the disk (and within the extended partition, if it</span>
00285     <span class="comment">// exists).</span>
00286 
00287     <span class="keywordflow">if</span> (RegionCount &gt; 1) {
00288 
00289         <span class="keywordflow">for</span>(i=0; i&lt;RegionCount; i++) {
00290 
00291             <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a>(sprintfBuffer,<span class="stringliteral">"%u MB space"</span>,Regions[i].SizeMB);
00292             <span class="keywordflow">if</span> (Regions[i].<a class="code" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html#o5">RegionType</a> == <a class="code" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>) {
00293                 strcat(sprintfBuffer,<span class="stringliteral">" (in extended partition)"</span>);
00294             }
00295             <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a93">AlAddMenuItem</a>(MenuID,sprintfBuffer,i,0)) {
00296                 <a class="code" href="../../d7/d3/partit_8c.html#a2">MsgNoMem</a>();
00297                 <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(MenuID);
00298                 <a class="code" href="../../d8/d1/fdengine_8c.html#a38">FreeRegionArray</a>(Regions,RegionCount);
00299                 <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00300             }
00301         }
00302 
00303         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a95">AlDisplayMenu</a>(MenuID,FALSE,0,&amp;Choice,MENU_ROW,<span class="stringliteral">"Available Free Spaces"</span>)) {
00304             <span class="comment">// user escaped</span>
00305             <a class="code" href="../../d4/d9/arcinst_8h.html#a103">AlClearStatusArea</a>(STATUS_ROW_TOP,STATUS_ROW_BOTTOM);
00306             <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(MenuID);
00307             <a class="code" href="../../d8/d1/fdengine_8c.html#a38">FreeRegionArray</a>(Regions,RegionCount);
00308             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00309         }
00310     } <span class="keywordflow">else</span> {
00311         Choice = 0;
00312     }
00313 
00314     <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(MenuID);
00315 
00316     <span class="comment">// now ask the user for the size of the partition to create in the chosen space.</span>
00317 
00318     <span class="keywordflow">do</span> {
00319         <a class="code" href="../../d4/d9/arcinst_8h.html#a103">AlClearStatusArea</a>(STATUS_ROW_TOP,STATUS_ROW_BOTTOM);
00320         <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(<span class="stringliteral">"%sEnter size in MB (1-%u): "</span>,MSGMARGIN,Regions[Choice].SizeMB);
00321         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a115">AlGetString</a>(sprintfBuffer,<span class="keyword">sizeof</span>(sprintfBuffer))) {
00322             <a class="code" href="../../d8/d1/fdengine_8c.html#a38">FreeRegionArray</a>(Regions,RegionCount);
00323             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00324         }
00325         ChosenSize = atoi(sprintfBuffer);
00326         <span class="keywordflow">if</span> (!ChosenSize || (ChosenSize &gt; Regions[Choice].<a class="code" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html#o2">SizeMB</a>)) {
00327             <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(<span class="stringliteral">"Invalid size."</span>);
00328         } <span class="keywordflow">else</span> {
00329             <span class="keywordflow">break</span>;
00330         }
00331     } <span class="keywordflow">while</span>(1);
00332 
00333     <span class="comment">// The chosen space is either in the extended partition or not.</span>
00334     <span class="comment">// If it is, just create the requested partition.</span>
00335 
00336     <span class="keywordflow">if</span> (Regions[Choice].<a class="code" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html#o5">RegionType</a> == <a class="code" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>) {
00337 
00338         status = <a class="code" href="../../d8/d1/fdengine_8c.html#a34">CreatePartition</a>(&amp;Regions[Choice],ChosenSize,REGION_LOGICAL);
00339         PartitionNumber = Regions[Choice].<a class="code" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html#o3">PartitionNumber</a>;
00340 
00341     } <span class="keywordflow">else</span> {
00342 
00343         <span class="comment">// The chosen space is not in an extended partition.</span>
00344         <span class="comment">// If there's already a primary and we can create</span>
00345         <span class="comment">// an extended partition, then first create an</span>
00346         <span class="comment">// extended partition spanning the entire space chosen</span>
00347         <span class="comment">// by the user, and then a logical volume within it of</span>
00348         <span class="comment">// size entered by the user.  Otherwise [ie, there's no primary</span>
00349         <span class="comment">// or we're not allowed to create an extended partition]</span>
00350         <span class="comment">// create a primary of the size entered by the user.</span>
00351 
00352 
00353         <span class="keywordflow">if</span> (PrimaryExists &amp;&amp; xE) {
00354 
00355             <span class="comment">// create extended partition first.</span>
00356             status = <a class="code" href="../../d8/d1/fdengine_8c.html#a34">CreatePartition</a>(&amp;Regions[Choice],Regions[Choice].SizeMB,REGION_EXTENDED);
00357             <a class="code" href="../../d8/d1/fdengine_8c.html#a38">FreeRegionArray</a>(Regions,RegionCount);
00358 
00359             <span class="keywordflow">if</span> ((status = <a class="code" href="../../d4/d9/arcinst_8h.html#a37">GetFreeLogicalDiskRegions</a>(Disk,&amp;Regions,&amp;RegionCount)) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00360                 <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOCNFMSG,status);
00361                 <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00362             }
00363             <span class="comment">// since we just created the extended partition, there will be one free</span>
00364             <span class="comment">// region in it.</span>
00365 
00366             status = <a class="code" href="../../d8/d1/fdengine_8c.html#a34">CreatePartition</a>(Regions,ChosenSize,REGION_LOGICAL);
00367             PartitionNumber = Regions[0].<a class="code" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html#o3">PartitionNumber</a>;
00368 
00369         } <span class="keywordflow">else</span> {
00370 
00371             status = <a class="code" href="../../d8/d1/fdengine_8c.html#a34">CreatePartition</a>(&amp;Regions[Choice],ChosenSize,REGION_PRIMARY);
00372             PartitionNumber = Regions[Choice].<a class="code" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html#o3">PartitionNumber</a>;
00373         }
00374     }
00375     <a class="code" href="../../d8/d1/fdengine_8c.html#a38">FreeRegionArray</a>(Regions,RegionCount);
00376 
00377     <span class="keywordflow">if</span> ( (status                                 == <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>)
00378     &amp;&amp; ((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a68">CommitPartitionChanges</a>(Disk)) == <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>))
00379     {
00380         <a class="code" href="../../d7/d3/partit_8c.html#a29">PrintMsg</a>(<span class="stringliteral">"Partition successfully created."</span>);
00381 
00382 <span class="preprocessor">#if 0</span>
00383 <span class="preprocessor"></span>        <span class="comment">//</span>
00384         <span class="comment">// This is bogus since this routine is called in the code path where</span>
00385         <span class="comment">// the user is creating a system partition.</span>
00386         <span class="comment">//</span>
00387         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d9/arc_8h.html#a39">ArcGetEnvironmentVariable</a>(SYSPARTVAR) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00388             <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/partit_8c.html#a27">Confirm</a>(<span class="stringliteral">"Do you want to make this the system partition"</span>)) {
00389                 <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a>(PartitionPath,<span class="stringliteral">"%spartition(%u)"</span>,<a class="code" href="../../d8/d1/fdengine_8c.html#a62">GetDiskName</a>(Disk),PartitionNumber);
00390                 <span class="keywordflow">if</span> ((status = <a class="code" href="../../d1/d9/arc_8h.html#a40">ArcSetEnvironmentVariable</a>(SYSPARTVAR,PartitionPath)) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00391                     <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOEVAMSG,status);
00392                 }
00393             }
00394         }
00395 <span class="preprocessor">#endif</span>
00396 <span class="preprocessor"></span>
00397         *DiskNo      = Disk;
00398         *PartitionNo = PartitionNumber;
00399         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00400 
00401     } <span class="keywordflow">else</span> {
00402         <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOCREMSG,status);
00403         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00404     }
00405 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="partit.c::DoPartitionDelete" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID DoPartitionDelete           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">409</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00684">AlAddMenuItem()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00740">AlDisplayMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00664">AlFreeMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00647">AlNewMenu()</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01574">ArcGetEnvironmentVariable</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00819">BootString</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03063">CommitPartitionChanges()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00074">Confirm()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00721">DeletePartition()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02394">DoesAnyPartitionExist()</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01013">FreeRegionArray()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02615">GetDiskName()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02719">GetSysIDName()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00602">GetUsedDiskRegions</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00129">IsBootSelectionPartition()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02114">IsExtended()</a>, <a class="el" href="../../d7/d7/jzcrap_8c-source.html#l00005">JzDeleteVariableSegment()</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a177a80">MaximumBootVariable</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00069">MENU_ROW</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00056">MsgNoMem</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00039">NOCNFMSG</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00043">NODELMSG</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00054">OSLOADPARTVAR</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00093">PrintErrorMsg()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00111">PrintMsg()</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>, <a class="el" href="../../d6/d9/heappage_8c.html#a68">sprintf()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00071">sprintfBuffer</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00052">SYSPARTVAR</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a177a75">SystemPartitionVariable</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>.
<p>
<pre class="fragment"><div>00412 {
00413     BOOLEAN            xAny,xPrimary,xExtended,xLogical;
00414     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>         status;
00415     PVOID              MenuID;
00416     ULONG              i,RegionCount,Choice;
00417     ULONG              MatchNumber,<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00418     LONG               Disk;
00419     <a class="code" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> Regions;
00420     BOOLEAN            err,Confirmation;
00421 
00422 
00423     <span class="keywordflow">if</span> ((Disk = <a class="code" href="../../d7/d3/partit_8c.html#a31">ChooseDisk</a>()) == -1) {
00424         <span class="keywordflow">return</span>;
00425     }
00426 
00427     <span class="keywordflow">if</span> ((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a57">DoesAnyPartitionExist</a>(Disk,&amp;xAny,&amp;xPrimary,&amp;xExtended,&amp;xLogical)) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00428         <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOCNFMSG,status);
00429         <span class="keywordflow">return</span>;
00430     }
00431 
00432     <span class="keywordflow">if</span> (xAny) {
00433 
00434         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a91">AlNewMenu</a>(&amp;MenuID)) {
00435             <a class="code" href="../../d7/d3/partit_8c.html#a2">MsgNoMem</a>();
00436             <span class="keywordflow">return</span>;
00437         }
00438 
00439         <span class="keywordflow">if</span> ((status = <a class="code" href="../../d4/d9/arcinst_8h.html#a31">GetUsedDiskRegions</a>(Disk,&amp;Regions,&amp;RegionCount)) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00440 
00441             <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOCNFMSG,status);
00442 
00443         } <span class="keywordflow">else</span> {
00444 
00445             err = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00446 
00447             <span class="keywordflow">for</span>(i=0; i&lt;RegionCount; i++) {
00448 
00449                 <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a>(sprintfBuffer,<span class="stringliteral">"%s%u MB "</span>,Regions[i].RegionType == REGION_LOGICAL ? <span class="stringliteral">"    "</span> : <span class="stringliteral">""</span>,Regions[i].SizeMB);
00450                 strcat(sprintfBuffer,<a class="code" href="../../d8/d1/fdengine_8c.html#a63">GetSysIDName</a>(Regions[i].SysID));
00451                 strcat(sprintfBuffer,Regions[i].RegionType == REGION_LOGICAL ? <span class="stringliteral">" Logical Volume"</span> : <span class="stringliteral">" Partition"</span>);
00452                 <span class="keywordflow">if</span> (<a class="code" href="../../d8/d1/fdengine_8c.html#a52">IsExtended</a>(Regions[i].SysID) &amp;&amp; xLogical) {
00453                     strcat(sprintfBuffer,<span class="stringliteral">", also resulting in the deletion of:"</span>);
00454                 }
00455 
00456                 <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a93">AlAddMenuItem</a>(MenuID,sprintfBuffer,i,0)) {
00457                     <a class="code" href="../../d7/d3/partit_8c.html#a2">MsgNoMem</a>();
00458                     err = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00459                     <span class="keywordflow">break</span>;
00460                 }
00461             }
00462 
00463             <span class="keywordflow">if</span> (!err) {
00464 
00465                 <span class="keywordflow">if</span> (<a class="code" href="../../d4/d9/arcinst_8h.html#a95">AlDisplayMenu</a>(MenuID,FALSE,0,&amp;Choice,MENU_ROW,<span class="stringliteral">"Select Partition to Delete"</span>)) {
00466 
00467                     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/partit_8c.html#a30">IsBootSelectionPartition</a>(SYSPARTVAR,Disk,Regions[Choice].PartitionNumber,NULL)) {
00468                         Confirmation = <a class="code" href="../../d7/d3/partit_8c.html#a27">Confirm</a>(<span class="stringliteral">"The selected partition is (or contains) a system partition.\r\n Are you sure you want to delete it"</span>);
00469                     } <span class="keywordflow">else</span> {
00470                         <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/partit_8c.html#a30">IsBootSelectionPartition</a>(OSLOADPARTVAR,Disk,Regions[Choice].PartitionNumber,NULL)) {
00471                             Confirmation = <a class="code" href="../../d7/d3/partit_8c.html#a27">Confirm</a>(<span class="stringliteral">"The selected partition contains an operating system.\r\n Are you sure you want to delete it"</span>);
00472                         } <span class="keywordflow">else</span> {
00473                             Confirmation = <a class="code" href="../../d7/d3/partit_8c.html#a27">Confirm</a>(<span class="stringliteral">"Are you sure"</span>);
00474                         }
00475                     }
00476                     <span class="keywordflow">if</span> (Confirmation) {
00477                         <span class="keywordflow">if</span> (((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a35">DeletePartition</a>(&amp;Regions[Choice])) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>)
00478                         || ((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a68">CommitPartitionChanges</a>(Disk)) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>))
00479                         {
00480                             <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NODELMSG,status);
00481                         } <span class="keywordflow">else</span> {
00482                             <a class="code" href="../../d7/d3/partit_8c.html#a29">PrintMsg</a>(<span class="stringliteral">"Partition deleted successfully."</span>);
00483 
00484                             <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a>(sprintfBuffer,
00485                                     <span class="stringliteral">"%spartition(%u)"</span>,
00486                                     <a class="code" href="../../d8/d1/fdengine_8c.html#a62">GetDiskName</a>(Disk),
00487                                     Regions[Choice].PartitionNumber
00488                                    );
00489 
00490                             <span class="comment">//</span>
00491                             <span class="comment">// If there are any boot selections and the deleted partition</span>
00492                             <span class="comment">// was used, ask if the associated boot selections should be</span>
00493                             <span class="comment">// deleted.</span>
00494                             <span class="comment">//</span>
00495 
00496                             <span class="keywordflow">if</span> (<a class="code" href="../../d1/d9/arc_8h.html#a39">ArcGetEnvironmentVariable</a>(OSLOADPARTVAR) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00497                                 <span class="keywordflow">if</span> ((<a class="code" href="../../d7/d3/partit_8c.html#a30">IsBootSelectionPartition</a>(SYSPARTVAR,Disk,Regions[Choice].PartitionNumber,NULL) ||
00498                                      <a class="code" href="../../d7/d3/partit_8c.html#a30">IsBootSelectionPartition</a>(OSLOADPARTVAR,Disk,Regions[Choice].PartitionNumber,NULL)) &amp;&amp;
00499                                      <a class="code" href="../../d7/d3/partit_8c.html#a27">Confirm</a>(<span class="stringliteral">"Do you want to delete the boot selection(s) associated\r\n with the deleted partition?"</span>)) {
00500 
00501                                     <span class="keywordflow">while</span> (<a class="code" href="../../d7/d3/partit_8c.html#a30">IsBootSelectionPartition</a>(SYSPARTVAR,Disk,Regions[Choice].PartitionNumber,&amp;MatchNumber)) {
00502                                         <span class="keywordflow">for</span> ( <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0 ; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; <a class="code" href="../../d4/d9/arcinst_8h.html#a177a80">MaximumBootVariable</a> ; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++ ) {
00503                                             <a class="code" href="../../d6/d8/jzcrap_8c.html#a1">JzDeleteVariableSegment</a>(BootString[Index],MatchNumber);
00504                                         }
00505                                     }
00506 
00507                                     <span class="keywordflow">while</span> (<a class="code" href="../../d7/d3/partit_8c.html#a30">IsBootSelectionPartition</a>(OSLOADPARTVAR,Disk,Regions[Choice].PartitionNumber,&amp;MatchNumber)) {
00508                                         <span class="keywordflow">for</span> ( <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0 ; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; <a class="code" href="../../d4/d9/arcinst_8h.html#a177a80">MaximumBootVariable</a> ; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++ ) {
00509                                             <a class="code" href="../../d6/d8/jzcrap_8c.html#a1">JzDeleteVariableSegment</a>(BootString[Index],MatchNumber);
00510                                         }
00511                                     }
00512                                 }
00513 
00514                             } <span class="keywordflow">else</span> {
00515 
00516                                 <span class="comment">//</span>
00517                                 <span class="comment">// There are no boot selections but delete all segments</span>
00518                                 <span class="comment">// of the SystemPartition variable that pointed to the</span>
00519                                 <span class="comment">// deleted partition.</span>
00520                                 <span class="comment">//</span>
00521 
00522                                 <span class="keywordflow">while</span> (<a class="code" href="../../d7/d3/partit_8c.html#a30">IsBootSelectionPartition</a>(SYSPARTVAR,Disk,Regions[Choice].PartitionNumber,&amp;MatchNumber)) {
00523                                     <a class="code" href="../../d6/d8/jzcrap_8c.html#a1">JzDeleteVariableSegment</a>(BootString[SystemPartitionVariable],MatchNumber);
00524                                 }
00525                             }
00526                         }
00527                     }
00528                 }
00529             }
00530 
00531             <a class="code" href="../../d8/d1/fdengine_8c.html#a38">FreeRegionArray</a>(Regions,RegionCount);
00532         }
00533         <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(MenuID);
00534 
00535     } <span class="keywordflow">else</span> {
00536         <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(<span class="stringliteral">"No partitions on this disk"</span>);
00537     }
00538 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="partit.c::DoSystemPartitionCreate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID DoSystemPartitionCreate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">542</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00424">AlAddSystemPartition()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00993">AlStatusMsgNoWait()</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00601">FmtFatFormat()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02615">GetDiskName()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01425">GetHiddenSectorCount()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00047">NOEVAMSG</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00040">NOFMTMSG</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00093">PrintErrorMsg()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00111">PrintMsg()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01366">SetSysID()</a>, <a class="el" href="../../d6/d9/heappage_8c.html#a68">sprintf()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00071">sprintfBuffer</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00036">STATUS_ROW_BOTTOM</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00035">STATUS_ROW_TOP</a>, and <a class="el" href="../../d4/d9/arcinst_8h.html#a176a72">SYSID_BIGFAT</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>.
<p>
<pre class="fragment"><div>00545 {
00546     ULONG      DiskNo,PartitionNo;
00547     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> status;
00548 
00549     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d3/partit_8c.html#a32">DoPartitionCreate</a>(&amp;DiskNo,&amp;PartitionNo)) {
00550 
00551         <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a>(sprintfBuffer,<span class="stringliteral">"%spartition(%u)"</span>,<a class="code" href="../../d8/d1/fdengine_8c.html#a62">GetDiskName</a>(DiskNo),PartitionNo);
00552 
00553         <span class="comment">// add the partition to the SYSTEMPARTITION NVRAM environment variable</span>
00554 
00555         <span class="keywordflow">if</span> ((status = <a class="code" href="../../d4/d9/arcinst_8h.html#a84">AlAddSystemPartition</a>(sprintfBuffer)) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00556             <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOEVAMSG,status);
00557             <span class="keywordflow">return</span>;
00558         }
00559 
00560         <a class="code" href="../../d4/d9/arcinst_8h.html#a102">AlStatusMsgNoWait</a>(STATUS_ROW_TOP,STATUS_ROW_BOTTOM,FALSE,<span class="stringliteral">"Formatting %s"</span>,sprintfBuffer);
00561         status = <a class="code" href="../../d1/d6/fmtexp_8c.html#a16">FmtFatFormat</a>(sprintfBuffer,<a class="code" href="../../d8/d1/fdengine_8c.html#a44">GetHiddenSectorCount</a>(DiskNo,PartitionNo));
00562         <span class="keywordflow">if</span> (status == <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00563             <a class="code" href="../../d8/d1/fdengine_8c.html#a42">SetSysID</a>(DiskNo,PartitionNo,SYSID_BIGFAT);
00564             <a class="code" href="../../d7/d3/partit_8c.html#a29">PrintMsg</a>(<span class="stringliteral">"Partition formatted successfully."</span>);
00565         } <span class="keywordflow">else</span> {
00566             <a class="code" href="../../d7/d3/partit_8c.html#a28">PrintErrorMsg</a>(NOFMTMSG,status);
00567         }
00568     }
00569 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="partit.c::IsBootSelectionPartition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN IsBootSelectionPartition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Variable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Disk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Partition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PULONG MatchNumber&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00129">129</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00361">AlFindNextMatchComponent()</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01574">ArcGetEnvironmentVariable</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02615">GetDiskName()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d9/heappage_8c.html#a68">sprintf()</a>, and <a class="el" href="../../d8/d0/genuedef_8c-source.html#l00007">text</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.
<p>
<pre class="fragment"><div>00135 {
00136     <span class="keywordtype">char</span>  <a class="code" href="../../d7/d1/genuedef_8c.html#a5">text</a>[256];
00137     PCHAR Var = <a class="code" href="../../d1/d9/arc_8h.html#a39">ArcGetEnvironmentVariable</a>(Variable);
00138 
00139     <span class="keywordflow">if</span> (Var == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00140         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00141     }
00142 
00143     <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a>(text,<span class="stringliteral">"%spartition(%u)"</span>,<a class="code" href="../../d8/d1/fdengine_8c.html#a62">GetDiskName</a>(Disk),Partition);
00144     <span class="keywordflow">return</span>(<a class="code" href="../../d4/d9/arcinst_8h.html#a83">AlFindNextMatchComponent</a>(Var,text,0,MatchNumber));
00145 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="partit.c::PrintErrorMsg" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID PrintErrorMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FormatString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00093">93</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l01010">AlClearStatusArea()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00934">AlWaitKey()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00036">STATUS_ROW_BOTTOM</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00035">STATUS_ROW_TOP</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">vAlStatusMsg()</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>.
<p>
<pre class="fragment"><div>00097 {
00098     va_list ArgList;
00099 
00100     va_start(ArgList,FormatString);
00101 
00102     <a class="code" href="../../d4/d9/arcinst_8h.html#a103">AlClearStatusArea</a>(STATUS_ROW_TOP,STATUS_ROW_BOTTOM);
00103     <a class="code" href="../../d4/d9/arcinst_8h.html#a100">vAlStatusMsg</a>(STATUS_ROW_TOP,TRUE,FormatString,ArgList);
00104 
00105     <a class="code" href="../../d4/d9/arcinst_8h.html#a99">AlWaitKey</a>(NULL);
00106     <a class="code" href="../../d4/d9/arcinst_8h.html#a103">AlClearStatusArea</a>(STATUS_ROW_TOP,STATUS_ROW_BOTTOM);
00107 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="partit.c::PrintMsg" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID PrintMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FormatString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00111">111</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l01010">AlClearStatusArea()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00934">AlWaitKey()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00036">STATUS_ROW_BOTTOM</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00035">STATUS_ROW_TOP</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">vAlStatusMsg()</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>.
<p>
<pre class="fragment"><div>00115 {
00116     va_list ArgList;
00117 
00118     va_start(ArgList,FormatString);
00119 
00120     <a class="code" href="../../d4/d9/arcinst_8h.html#a103">AlClearStatusArea</a>(STATUS_ROW_TOP,STATUS_ROW_BOTTOM);
00121     <a class="code" href="../../d4/d9/arcinst_8h.html#a100">vAlStatusMsg</a>(STATUS_ROW_TOP,FALSE,FormatString,ArgList);
00122 
00123     <a class="code" href="../../d4/d9/arcinst_8h.html#a99">AlWaitKey</a>(NULL);
00124     <a class="code" href="../../d4/d9/arcinst_8h.html#a103">AlClearStatusArea</a>(STATUS_ROW_TOP,STATUS_ROW_BOTTOM);
00125 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a14" doxytag="partit.c::ALREAMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a14">ALREAMSG</a>[] = "Partition <a class="el" href="../../d3/d0/user32_8def.html#a108">is</a> already a system partition"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00044">44</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="partit.c::DSKFLMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a11">DSKFLMSG</a>[] = "Disk <a class="el" href="../../d3/d0/user32_8def.html#a108">is</a> full"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00041">41</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="partit.c::NOCNFMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a9">NOCNFMSG</a>[] = "Unable to determine disk configuration (ARC status = %u)"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00039">39</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="partit.c::NOCREMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a12">NOCREMSG</a>[] = "Could not create partition (ARC status = %u)"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00042">42</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="partit.c::NODELMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a13">NODELMSG</a>[] = "Could not delete partition (ARC status = %u)"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00043">43</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="partit.c::NOENVMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a16">NOENVMSG</a>[] = "Error (ARC status = %u) determining environment"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00046">46</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="partit.c::NOEVAMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a17">NOEVAMSG</a>[] = "Could not add partition to environment (ARC status = %u)"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00047">47</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="partit.c::NOEVDMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a18">NOEVDMSG</a>[] = "Could not remove partition from environment (ARC status = %u)"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00048">48</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="partit.c::NOFILMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a15">NOFILMSG</a>[] = "Unable to determine filesystem on partition (ARC status = %u)"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00045">45</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="partit.c::NOFMTMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a10">NOFMTMSG</a>[] = "Format failed (ARC status = %u)"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00040">40</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="partit.c::NOMEMMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a8">NOMEMMSG</a>[] = "Insufficient memory"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00038">38</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="partit.c::NOPARMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a20">NOPARMSG</a>[] = "No partitions on this disk"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00050">50</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="partit.c::NOSYSMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a19">NOSYSMSG</a>[] = "No system partitions defined"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00049">49</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="partit.c::OSLOADERVAR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a22">OSLOADERVAR</a>[] = "OSLOADER"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00053">53</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="partit.c::OSLOADPARTVAR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a23">OSLOADPARTVAR</a>[] = "OSLOADPARTITION"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00054">54</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="partit.c::sprintfBuffer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a25">sprintfBuffer</a>[256]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00071">71</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="partit.c::SysPartMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR <a class="el" href="../../d7/d3/partit_8c.html#a24">SysPartMenu</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {   <span class="stringliteral">"Create System Partition"</span>,
                          <span class="stringliteral">"Delete Partition"</span>,
                          <span class="stringliteral">"Make Existing Partition into System Partition"</span>,
                          <span class="stringliteral">"Exit"</span>
                      }
</div></pre>
<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00058">58</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="partit.c::SYSPARTVAR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d7/d3/partit_8c.html#a21">SYSPARTVAR</a>[] = "SYSTEMPARTITION"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00052">52</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:01 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: perf.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>perf.c File Reference</h1><code>#include &lt;nt.h&gt;</code><br>
<code>#include &lt;ntrtl.h&gt;</code><br>
<code>#include &lt;nturtl.h&gt;</code><br>
<code>#include "<a class="el" href="../../d7/d9/usercli_8h-source.html">usercli.h</a>"</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include "ntcsrdll.h"</code><br>
<code>#include "csuser.h"</code><br>

<p>
<a href="../../d8/d3/perf_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef CSR_QLPC_API_MSG *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a0">PCSRMSG</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef PDWORD(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a1">PINSTUBFUNC</a> )(PDWORD, PDWORD, PDWORD, PDWORD)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef void(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a2">POUTSTUBFUNC</a> )(PDWORD, PDWORD)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef PDWORD(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a3">PCSINFUNC</a> )(PDWORD, PDWORD, PDWORD)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef PDWORD(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a4">PCSOUTFUNC</a> )(PDWORD, PDWORD)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>PDWORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a6">Copy4</a> (PDWORD psrc, PDWORD pdst, PDWORD pparam, PDWORD pmax)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PDWORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a7">Copy5</a> (PDWORD psrc, PDWORD pdst, PDWORD pparam, PDWORD pmax)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PDWORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a8">CopySTR</a> (PDWORD psrc, PDWORD pdst, PDWORD pparam, PDWORD pmax)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a9">OutCopy4</a> (PDWORD psrc, PDWORD pdst)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PDWORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a10">Copy6</a> (PDWORD psrc, PDWORD pdst, PDWORD pparam, PDWORD pmax)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PDWORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a11">AIDoClientInStuff</a> (PDWORD psrc, PDWORD pbase, PDWORD ptemplate, PDWORD pmax)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a12">AIDoClientOutStuff</a> (PDWORD psrc, PDWORD pbase, PDWORD ptemplate)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PDWORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a13">DoClientInStuff</a> (PDWORD psrc, PDWORD pbase, PDWORD ptemplate, PDWORD pmax)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a14">DoClientOutStuff</a> (PDWORD psrc, PDWORD pdst, PDWORD ptemplate)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a15">MakeCSCall</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> findex, PDWORD psrc, PDWORD pInTemplate, PDWORD pOutTemplate)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a16">CSMakeCall</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> findex, PDWORD psrc, <a class="el" href="../../d7/d4/perf_8c.html#a3">PCSINFUNC</a> pInFunc, <a class="el" href="../../d7/d4/perf_8c.html#a4">PCSOUTFUNC</a> pOutFunc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a17">ITestCall</a> (HWND hwnd, int a, int b, int <a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>, int d, int e)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a18">AITestCall</a> (HWND hwnd, int a, int b, int <a class="el" href="../../d7/d1/genuedef_8c.html#a8">c</a>, int d, int e)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d4/perf_8c.html#a5">InTestCall</a> []</td></tr>

</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a3" doxytag="perf.c::PCSINFUNC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef PDWORD(*  <a class="el" href="../../d7/d4/perf_8c.html#a3">PCSINFUNC</a>)(PDWORD, PDWORD, PDWORD)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00457">457</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="perf.c::PCSOUTFUNC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef PDWORD(*  <a class="el" href="../../d7/d4/perf_8c.html#a4">PCSOUTFUNC</a>)(PDWORD, PDWORD)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00458">458</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="perf.c::PCSRMSG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef CSR_QLPC_API_MSG* <a class="el" href="../../d7/d4/perf_8c.html#a0">PCSRMSG</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00025">25</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d3/perf_8c-source.html#l00461">CSMakeCall()</a>, and <a class="el" href="../../d8/d3/perf_8c-source.html#l00190">MakeCSCall()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="perf.c::PINSTUBFUNC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef PDWORD(*  <a class="el" href="../../d7/d4/perf_8c.html#a1">PINSTUBFUNC</a>)(PDWORD, PDWORD, PDWORD, PDWORD)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00027">27</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d3/perf_8c-source.html#l00140">DoClientInStuff()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="perf.c::POUTSTUBFUNC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef void(*  <a class="el" href="../../d7/d4/perf_8c.html#a2">POUTSTUBFUNC</a>)(PDWORD, PDWORD)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00028">28</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d3/perf_8c-source.html#l00170">DoClientOutStuff()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a11" doxytag="perf.c::AIDoClientInStuff" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PDWORD AIDoClientInStuff           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>psrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pbase</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>ptemplate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmax</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="perf.c::AIDoClientOutStuff" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID AIDoClientOutStuff           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>psrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pbase</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>ptemplate</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="perf.c::AITestCall" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> AITestCall           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>a</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>d</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>e</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00603">603</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d3/perf_8c-source.html#l00588">InTestCall</a>, <a class="el" href="../../d8/d3/perf_8c-source.html#l00190">MakeCSCall()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>00604 {
00605 <span class="preprocessor">#if defined(_MIPS_) || defined(_PPC_)</span>
00606 <span class="preprocessor"></span>   <span class="keywordflow">return</span> AIMakeCSCall(
00607 #<span class="keywordflow">else</span>
00608    <span class="keywordflow">return</span> <a class="code" href="../../d7/d4/perf_8c.html#a15">MakeCSCall</a>(
00609 #endif
00610        CSR_MAKE_API_NUMBER(4,FI_CTESTCALL),
00611        (PDWORD)&amp;hwnd,
00612        InTestCall,
00613        NULL
00614    );
00615 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="perf.c::Copy4" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PDWORD Copy4           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>psrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pdst</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pparam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmax</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00045">45</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
<pre class="fragment"><div>00050 {
00051     <span class="keywordflow">if</span> (pdst + 5 &lt;= pmax) {
00052         pdst[0] = psrc[0];
00053         pdst[1] = psrc[1];
00054         pdst[2] = psrc[2];
00055         pdst[3] = psrc[3];
00056         <span class="keywordflow">return</span> pdst + 4;
00057     }
00058     <span class="keywordflow">return</span> 0;
00059     pparam;
00060 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="perf.c::Copy5" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PDWORD Copy5           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>psrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pdst</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pparam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmax</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00062">62</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
<pre class="fragment"><div>00067 {
00068     <span class="keywordflow">if</span> (pdst + 5 &lt;= pmax) {
00069         pdst[0] = psrc[0];
00070         pdst[1] = psrc[1];
00071         pdst[2] = psrc[2];
00072         pdst[3] = psrc[3];
00073         pdst[4] = psrc[4];
00074         <span class="keywordflow">return</span> pdst + 5;
00075     }
00076     <span class="keywordflow">return</span> 0;
00077     pparam;
00078 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="perf.c::Copy6" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PDWORD Copy6           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>psrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pdst</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pparam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmax</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00080">80</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
<pre class="fragment"><div>00085 {
00086     <span class="keywordflow">if</span> (pdst + 6 &lt;= pmax) {
00087         pdst[0] = psrc[0];
00088         pdst[1] = psrc[1];
00089         pdst[2] = psrc[2];
00090         pdst[3] = psrc[3];
00091         pdst[4] = psrc[4];
00092         pdst[5] = psrc[5];
00093         <span class="keywordflow">return</span> pdst + 6;
00094     }
00095     <span class="keywordflow">return</span> 0;
00096     pparam;
00097 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="perf.c::CopySTR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PDWORD CopySTR           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>psrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pdst</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pparam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmax</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00099">99</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>.
<p>
<pre class="fragment"><div>00104 {
00105     <a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a> length = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)psrc;
00106 
00107     <span class="keywordflow">while</span> (*length)
00108         length++;
00109 
00110     length = (length - (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)psrc + (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pdst);
00111     length = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)(((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)length +3 ) &amp; ~3);
00112 
00113     <span class="keywordflow">if</span> (length &lt;= (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pmax) {
00114         <span class="keywordflow">while</span> ((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pdst != (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)length) {
00115             *pdst = *psrc;
00116             pdst++;
00117             psrc++;
00118         }
00119         <span class="keywordflow">return</span> (PDWORD)length;
00120     }
00121     <span class="keywordflow">return</span> 0;
00122     pparam;
00123 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="perf.c::CSMakeCall" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CSMakeCall           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>findex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>psrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d4/perf_8c.html#a3">PCSINFUNC</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pInFunc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d4/perf_8c.html#a4">PCSOUTFUNC</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pOutFunc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00461">461</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, and <a class="el" href="../../d8/d3/perf_8c-source.html#l00025">PCSRMSG</a>.
<p>
<pre class="fragment"><div>00467 {
00468     PCSR_QLPC_TEB pteb = (PCSR_QLPC_TEB)NtCurrentTeb()-&gt;CsrQlpcTeb;
00469     PCSR_QLPC_STACK pstack;
00470     <a class="code" href="../../d7/d4/perf_8c.html#a0">PCSRMSG</a> pmsg;
00471     ULONG retval;
00472     PDWORD pbase;
00473     PDWORD pdst;
00474     PDWORD plast;
00475     PDWORD pmax;
00476 
00477     <span class="comment">//</span>
00478     <span class="comment">// connect to the server</span>
00479     <span class="comment">//</span>
00480 
00481     <span class="keywordflow">if</span> (pteb == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00482         pteb = CsrClientThreadConnect();
00483         <span class="keywordflow">if</span> (pteb == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00484             <span class="keywordflow">return</span> 0;
00485         }
00486     }
00487 
00488     pstack = pteb-&gt;MessageStack;
00489     <span class="keywordflow">if</span> (pstack-&gt;BatchCount) {
00490         CsrClientSendMessage();
00491         pbase = (PDWORD)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pstack + pstack-&gt;Base);
00492     } <span class="keywordflow">else</span> {
00493         pbase = (PDWORD)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pstack + pstack-&gt;Current);
00494     }
00495     pmax = (PDWORD)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pstack + pstack-&gt;Limit);
00496     pmsg = (<a class="code" href="../../d7/d4/perf_8c.html#a0">PCSRMSG</a>)(pbase+1);
00497 
00498     <span class="comment">//</span>
00499     <span class="comment">// is there enough space left on the stack?</span>
00500     <span class="comment">//</span>
00501 
00502     pdst = (PDWORD)(pmsg + 1);
00503     <span class="keywordflow">if</span> (pdst &lt;= pmax) {
00504 
00505         <span class="comment">//</span>
00506         <span class="comment">// copy the data to shared memory</span>
00507         <span class="comment">//</span>
00508 
00509         <span class="keywordflow">if</span> (pInFunc) {
00510             plast = pInFunc(psrc, pdst, pmax);
00511         } <span class="keywordflow">else</span> {
00512             plast = pdst;
00513         }
00514 
00515         <span class="keywordflow">if</span> (plast) {
00516 
00517             <span class="comment">//</span>
00518             <span class="comment">// Make the call</span>
00519             <span class="comment">//</span>
00520 
00521             pmsg-&gt;Length = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)plast - (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pmsg;
00522             pmsg-&gt;ApiNumber = findex;
00523             *pbase = pstack-&gt;Base;
00524             pstack-&gt;Base = pstack-&gt;Current+4;
00525             pstack-&gt;Current = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pdst - (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pstack;
00526             pstack-&gt;BatchCount = 1;
00527 
00528             retval = CsrClientSendMessage();
00529 
00530             pstack-&gt;Current = pstack-&gt;Base - 4;
00531             pstack-&gt;Base = *pbase;
00532 
00533             <span class="comment">//</span>
00534             <span class="comment">// Do any post call copies</span>
00535             <span class="comment">//</span>
00536 
00537             <span class="keywordflow">if</span> (pOutFunc) {
00538                 pOutFunc(pdst, psrc);
00539             }
00540 
00541             <span class="keywordflow">return</span> retval;
00542         }
00543     }
00544 
00545     <span class="comment">//</span>
00546     <span class="comment">// an error occured</span>
00547     <span class="comment">//</span>
00548 
00549     <span class="keywordflow">return</span> 0;
00550 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="perf.c::DoClientInStuff" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PDWORD DoClientInStuff           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>psrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pbase</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>ptemplate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pmax</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00140">140</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, and <a class="el" href="../../d8/d3/perf_8c-source.html#l00027">PINSTUBFUNC</a>.
<p>
Referenced by <a class="el" href="../../d8/d3/perf_8c-source.html#l00190">MakeCSCall()</a>.
<p>
<pre class="fragment"><div>00145 {
00146     PDWORD pparam;
00147     PDWORD param;
00148     PDWORD pdst;
00149 
00150     <span class="keywordflow">if</span> (ptemplate[0]) {
00151         pdst = ((<a class="code" href="../../d7/d4/perf_8c.html#a1">PINSTUBFUNC</a>)ptemplate[0])(psrc, pbase, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, pmax);
00152         <span class="keywordflow">if</span> (!pdst) {
00153             <span class="keywordflow">return</span> 0;
00154         }
00155         ptemplate++;
00156 
00157         <span class="keywordflow">while</span> (ptemplate[0]) {
00158             pparam = (PDWORD)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pbase + ptemplate[1]);
00159             param = (PDWORD)*pparam;
00160             *pparam = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pdst - (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pbase;
00161             pdst = ((<a class="code" href="../../d7/d4/perf_8c.html#a1">PINSTUBFUNC</a>)ptemplate[0])(param, pdst, pparam, pmax);
00162             <span class="keywordflow">if</span> (!pdst) {
00163                 <span class="keywordflow">return</span> 0;
00164             }
00165             ptemplate += 2;
00166         }
00167     }
00168 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="perf.c::DoClientOutStuff" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID DoClientOutStuff           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>psrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pdst</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>ptemplate</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00170">170</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, <a class="el" href="../../d8/d3/perf_8c-source.html#l00028">POUTSTUBFUNC</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d8/d3/perf_8c-source.html#l00190">MakeCSCall()</a>.
<p>
<pre class="fragment"><div>00174 {
00175     PDWORD pparam;
00176 
00177     <span class="keywordflow">while</span> (ptemplate[0]) {
00178         pparam = (PDWORD)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)psrc + ptemplate[1]);
00179         ((<a class="code" href="../../d7/d4/perf_8c.html#a2">POUTSTUBFUNC</a>)ptemplate[0])(
00180             (PDWORD)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)psrc + *pparam),
00181             *(PDWORD *)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pdst + ptemplate[1])
00182         );
00183         ptemplate += 2;
00184     }
00185 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="perf.c::ITestCall" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ITestCall           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>a</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>d</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>e</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00593">593</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d3/perf_8c-source.html#l00588">InTestCall</a>, <a class="el" href="../../d8/d3/perf_8c-source.html#l00190">MakeCSCall()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>00594 {
00595    <span class="keywordflow">return</span> <a class="code" href="../../d7/d4/perf_8c.html#a15">MakeCSCall</a>(
00596        CSR_MAKE_API_NUMBER(4,FI_CTESTCALL),
00597        (PDWORD)&amp;hwnd,
00598        InTestCall,
00599        NULL
00600    );
00601 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="perf.c::MakeCSCall" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> MakeCSCall           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>findex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>psrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pInTemplate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pOutTemplate</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00190">190</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
References <a class="el" href="../../d8/d3/perf_8c-source.html#l00140">DoClientInStuff()</a>, <a class="el" href="../../d8/d3/perf_8c-source.html#l00170">DoClientOutStuff()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, and <a class="el" href="../../d8/d3/perf_8c-source.html#l00025">PCSRMSG</a>.
<p>
Referenced by <a class="el" href="../../d8/d3/perf_8c-source.html#l00603">AITestCall()</a>, and <a class="el" href="../../d8/d3/perf_8c-source.html#l00593">ITestCall()</a>.
<p>
<pre class="fragment"><div>00196 {
00197     PCSR_QLPC_TEB pteb = (PCSR_QLPC_TEB)NtCurrentTeb()-&gt;CsrQlpcTeb;
00198     PCSR_QLPC_STACK pstack;
00199     <a class="code" href="../../d7/d4/perf_8c.html#a0">PCSRMSG</a> pmsg;
00200     ULONG retval;
00201     PDWORD pbase;
00202     PDWORD pdst;
00203     PDWORD plast;
00204     PDWORD pmax;
00205 
00206     <span class="comment">//</span>
00207     <span class="comment">// connect to the server</span>
00208     <span class="comment">//</span>
00209 
00210     <span class="keywordflow">if</span> (pteb == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00211         pteb = CsrClientThreadConnect();
00212         <span class="keywordflow">if</span> (pteb == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00213             <span class="keywordflow">return</span> 0;
00214         }
00215     }
00216 
00217     pstack = pteb-&gt;MessageStack;
00218     <span class="keywordflow">if</span> (pstack-&gt;BatchCount) {
00219         CsrClientSendMessage();
00220         pbase = (PDWORD)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pstack + pstack-&gt;Base);
00221     } <span class="keywordflow">else</span> {
00222         pbase = (PDWORD)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pstack + pstack-&gt;Current);
00223     }
00224     pmax = (PDWORD)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pstack + pstack-&gt;Limit);
00225     pmsg = (<a class="code" href="../../d7/d4/perf_8c.html#a0">PCSRMSG</a>)(pbase+1);
00226 
00227     <span class="comment">//</span>
00228     <span class="comment">// is there enough space left on the stack?</span>
00229     <span class="comment">//</span>
00230 
00231     pdst = (PDWORD)(pmsg + 1);
00232     <span class="keywordflow">if</span> (pdst &lt;= pmax) {
00233 
00234         <span class="comment">//</span>
00235         <span class="comment">// copy the data to shared memory</span>
00236         <span class="comment">//</span>
00237 
00238         <span class="keywordflow">if</span> (pInTemplate) {
00239             plast = <a class="code" href="../../d7/d4/perf_8c.html#a13">DoClientInStuff</a>(psrc, pdst, pInTemplate, pmax);
00240         } <span class="keywordflow">else</span> {
00241             plast = pdst;
00242         }
00243 
00244         <span class="keywordflow">if</span> (plast) {
00245 
00246             <span class="comment">//</span>
00247             <span class="comment">// Make the call</span>
00248             <span class="comment">//</span>
00249 
00250             pmsg-&gt;Length = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)plast - (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pmsg;
00251             pmsg-&gt;ApiNumber = findex;
00252             *pbase = pstack-&gt;Base;
00253             pstack-&gt;Base = pstack-&gt;Current+4;
00254             pstack-&gt;Current = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pdst - (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pstack;
00255             pstack-&gt;BatchCount = 1;
00256 
00257             retval = CsrClientSendMessage();
00258 
00259             pstack-&gt;Current = pstack-&gt;Base - 4;
00260             pstack-&gt;Base = *pbase;
00261 
00262             <span class="comment">//</span>
00263             <span class="comment">// Do any post call copies</span>
00264             <span class="comment">//</span>
00265 
00266             <span class="keywordflow">if</span> (pOutTemplate) {
00267                 <a class="code" href="../../d7/d4/perf_8c.html#a14">DoClientOutStuff</a>(pdst, psrc, pOutTemplate);
00268             }
00269 
00270             <span class="keywordflow">return</span> retval;
00271         }
00272     }
00273 
00274     <span class="comment">//</span>
00275     <span class="comment">// an error occured</span>
00276     <span class="comment">//</span>
00277 
00278     <span class="keywordflow">return</span> 0;
00279 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="perf.c::OutCopy4" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void OutCopy4           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>psrc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pdst</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00035">35</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
<pre class="fragment"><div>00038 {
00039     pdst[0] = psrc[0];
00040     pdst[1] = psrc[1];
00041     pdst[2] = psrc[2];
00042     pdst[3] = psrc[3];
00043 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a5" doxytag="perf.c::InTestCall" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d7/d4/perf_8c.html#a5">InTestCall</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d7/d4/perf_8c.html#a10">Copy6</a>,
    0
}
</div></pre>
<p>
Definition at line <a class="el" href="../../d8/d3/perf_8c-source.html#l00588">588</a> of file <a class="el" href="../../d8/d3/perf_8c-source.html">perf.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d3/perf_8c-source.html#l00603">AITestCall()</a>, and <a class="el" href="../../d8/d3/perf_8c-source.html#l00593">ITestCall()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:02 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: nlsboot.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>nlsboot.c File Reference</h1><code>#include "<a class="el" href="../../d4/d2/arcinst_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d8/d5/nlsboot_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d6/nlsboot_8c.html#a0">upcase</a>(C)&nbsp;&nbsp;&nbsp;(WCHAR )(((C) &gt;= 'a' &amp;&amp; (C) &lt;= 'z' ? (C) - ('a' - 'A') : (C)))</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d6/nlsboot_8c.html#a1">RtlAnsiStringToUnicodeString</a> (OUT PUNICODE_STRING DestinationString, IN PANSI_STRING <a class="el" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a>, IN BOOLEAN AllocateDestinationString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d6/nlsboot_8c.html#a2">RtlCompareUnicodeString</a> (IN PUNICODE_STRING <a class="el" href="../../d9/d9/tcmpmem_8c.html#a1">String1</a>, IN PUNICODE_STRING <a class="el" href="../../d9/d9/tcmpmem_8c.html#a2">String2</a>, IN BOOLEAN CaseInSensitive)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d6/nlsboot_8c.html#a3">RtlEqualUnicodeString</a> (IN const PUNICODE_STRING <a class="el" href="../../d9/d9/tcmpmem_8c.html#a1">String1</a>, IN const PUNICODE_STRING <a class="el" href="../../d9/d9/tcmpmem_8c.html#a2">String2</a>, IN BOOLEAN CaseInSensitive)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d6/nlsboot_8c.html#a4">RtlInitString</a> (OUT PSTRING DestinationString, IN PCSZ <a class="el" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a> OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d6/nlsboot_8c.html#a5">RtlInitUnicodeString</a> (OUT PUNICODE_STRING DestinationString, IN PCWSTR <a class="el" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a> OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d6/nlsboot_8c.html#a6">RtlAppendUnicodeStringToString</a> (IN PUNICODE_STRING Destination, IN PUNICODE_STRING Source)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d6/nlsboot_8c.html#a7">RtlAppendUnicodeToString</a> (IN PUNICODE_STRING Destination, IN PCWSTR Source OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d6/nlsboot_8c.html#a8">RtlUpcaseUnicodeChar</a> (IN WCHAR SourceCharacter)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d6/nlsboot_8c.html#a9">RtlAnsiCharToUnicodeChar</a> (IN OUT PUCHAR *SourceCharacter)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d6/nlsboot_8c.html#a10">RtlUpcaseUnicodeToMultiByteN</a> (OUT PCH MultiByteString, IN ULONG MaxBytesInMultiByteString, OUT PULONG BytesInMultiByteString OPTIONAL, IN PWCH UnicodeString, IN ULONG BytesInUnicodeString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d6/nlsboot_8c.html#a11">RtlMultiByteToUnicodeN</a> (OUT PWCH UnicodeString, IN ULONG MaxBytesInUnicodeString, OUT PULONG BytesInUnicodeString OPTIONAL, IN PCH MultiByteString, IN ULONG BytesInMultiByteString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d6/nlsboot_8c.html#a12">RtlUnicodeToMultiByteN</a> (OUT PCH MultiByteString, IN ULONG MaxBytesInMultiByteString, OUT PULONG BytesInMultiByteString OPTIONAL, IN PWCH UnicodeString, IN ULONG BytesInUnicodeString)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="nlsboot.c::upcase" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define upcase          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">C&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(WCHAR )(((C) &gt;= 'a' &amp;&amp; (C) &lt;= 'z' ? (C) - ('a' - 'A') : (C)))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00033">33</a> of file <a class="el" href="../../d8/d5/nlsboot_8c-source.html">nlsboot.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00075">RtlCompareUnicodeString()</a>, <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00149">RtlEqualUnicodeString()</a>, <a class="el" href="../../d4/d6/config_2utils_2regutil_8c-source.html#l01460">RtlPrefixUnicodeString()</a>, and <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00433">RtlUpcaseUnicodeChar()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a9" doxytag="nlsboot.c::RtlAnsiCharToUnicodeChar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR RtlAnsiCharToUnicodeChar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT PUCHAR *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>SourceCharacter</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00464">464</a> of file <a class="el" href="../../d8/d5/nlsboot_8c-source.html">nlsboot.c</a>.
<p>
References <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>.
<p>
<pre class="fragment"><div>00470                    :
00471 
00472     This function translates <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified ansi character to unicode and
00473     returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> unicode value.  The purpose <span class="keywordflow">for</span> <span class="keyword">this</span> routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to allow
00474     <span class="keywordflow">for</span> character by character ansi to unicode <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a>.  The
00475     <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current system locale
00476     information.
00477 
00478 
00479 Arguments:
00480 
00481     SourceCharacter - Supplies a pointer to an ansi character pointer.
00482         Through two levels of indirection, <span class="keyword">this</span> supplies an ansi
00483         character that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be translated to unicode.  After
00484         <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a>, <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ansi character pointer <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> modified to point to
00485         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> next character to be converted.  This <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done to allow <span class="keywordflow">for</span>
00486         dbcs ansi characters.
00487 
00488 Return Value:
00489 
00490     Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> unicode equivalent of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified ansi character.
00491 
00492 --*/
00493 
00494 {
00495     WCHAR UnicodeCharacter;
00496     ULONG cbCharSize;
00497     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> st;
00498 
00499 
00500     UnicodeCharacter = (WCHAR)**SourceCharacter;
00501     (*SourceCharacter)++;
00502     <span class="keywordflow">return</span>(UnicodeCharacter);
00503 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="nlsboot.c::RtlAnsiStringToUnicodeString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlAnsiStringToUnicodeString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>DestinationString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PANSI_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>SourceString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>AllocateDestinationString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00037">37</a> of file <a class="el" href="../../d8/d5/nlsboot_8c-source.html">nlsboot.c</a>.
<p>
References <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d1/d1/usrbench_8h-source.html#l00230">SourceString</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00043 {
00044     ULONG UnicodeLength;
00045     ULONG <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00046     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> st;
00047 
00048     UnicodeLength = (<a class="code" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a>-&gt;Length &lt;&lt; 1) + <span class="keyword">sizeof</span>(UNICODE_NULL);
00049 
00050     <span class="keywordflow">if</span> ( UnicodeLength &gt; MAXUSHORT ) {
00051         <span class="keywordflow">return</span> STATUS_INVALID_PARAMETER_2;
00052         }
00053 
00054     DestinationString-&gt;Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(UnicodeLength - <span class="keyword">sizeof</span>(UNICODE_NULL));
00055     <span class="keywordflow">if</span> ( AllocateDestinationString ) {
00056         <span class="keywordflow">return</span> STATUS_NO_MEMORY;
00057         }
00058     <span class="keywordflow">else</span> {
00059         <span class="keywordflow">if</span> ( DestinationString-&gt;Length &gt;= DestinationString-&gt;MaximumLength ) {
00060             <span class="keywordflow">return</span> STATUS_BUFFER_OVERFLOW;
00061             }
00062         }
00063 
00064     <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0;
00065     <span class="keywordflow">while</span>(<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; DestinationString-&gt;Length ) {
00066         DestinationString-&gt;Buffer[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>] = (WCHAR)<a class="code" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a>-&gt;Buffer[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>];
00067         <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++;
00068         }
00069     DestinationString-&gt;Buffer[<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>] = UNICODE_NULL;
00070 
00071     <span class="keywordflow">return</span> STATUS_SUCCESS;
00072 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="nlsboot.c::RtlAppendUnicodeStringToString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlAppendUnicodeStringToString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>Destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>Source</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00320">320</a> of file <a class="el" href="../../d8/d5/nlsboot_8c-source.html">nlsboot.c</a>.
<p>
References <a class="el" href="../../d8/d9/exts_8h-source.html#l00092">n</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00327                    :
00328 
00329     This routine will concatinate two PSTRINGs together.  It will copy
00330     bytes from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> source up to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> MaximumLength of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> destination.
00331 
00332 Arguments:
00333 
00334     IN PSTRING Destination, - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> destination string
00335     IN PSTRING Source - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> source <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> string copy
00336 
00337 Return Value:
00338 
00339     STATUS_SUCCESS - The source string was successfully appended to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00340         destination counted string.
00341 
00342     STATUS_BUFFER_TOO_SMALL - The destination string length was not big
00343         enough to allow <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> source string to be appended.  The Destination
00344         string length <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not updated.
00345 
00346 --*/
00347 
00348 {
00349     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d7/d0/exts_8h.html#a0">n</a> = Source-&gt;Length;
00350     UNALIGNED WCHAR *dst;
00351 
00352     <span class="keywordflow">if</span> (<a class="code" href="../../d7/d0/exts_8h.html#a0">n</a>) {
00353         <span class="keywordflow">if</span> ((<a class="code" href="../../d7/d0/exts_8h.html#a0">n</a> + Destination-&gt;Length) &gt; Destination-&gt;MaximumLength) {
00354             <span class="keywordflow">return</span>( STATUS_BUFFER_TOO_SMALL );
00355             }
00356 
00357         dst = &amp;Destination-&gt;Buffer[ (Destination-&gt;Length / <span class="keyword">sizeof</span>( WCHAR )) ];
00358         RtlMoveMemory( dst, Source-&gt;Buffer, n );
00359 
00360         Destination-&gt;Length += <a class="code" href="../../d7/d0/exts_8h.html#a0">n</a>;
00361 
00362         <span class="keywordflow">if</span> (Destination-&gt;Length &lt; Destination-&gt;MaximumLength) {
00363             dst[ <a class="code" href="../../d7/d0/exts_8h.html#a0">n</a> / <span class="keyword">sizeof</span>( WCHAR ) ] = UNICODE_NULL;
00364             }
00365         }
00366 
00367     <span class="keywordflow">return</span>( STATUS_SUCCESS );
00368 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="nlsboot.c::RtlAppendUnicodeToString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlAppendUnicodeToString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>Destination</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCWSTR Source&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00372">372</a> of file <a class="el" href="../../d8/d5/nlsboot_8c-source.html">nlsboot.c</a>.
<p>
References <a class="el" href="../../d8/d9/exts_8h-source.html#l00092">n</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00379                    :
00380 
00381     This routine appends <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> supplied UNICODE string to an existing
00382     PUNICODE_STRING.
00383 
00384     It will copy bytes from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Source PSZ to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> destination PSTRING up to
00385     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> destinations PUNICODE_STRING-&gt;MaximumLength field.
00386 
00387 Arguments:
00388 
00389     IN PUNICODE_STRING Destination, - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> destination
00390                             string
00391     IN PWSTR Source - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> string to append to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> destination
00392 
00393 Return Value:
00394 
00395     STATUS_SUCCESS - The source string was successfully appended to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00396         destination counted string.
00397 
00398     STATUS_BUFFER_TOO_SMALL - The destination string length was not big
00399         enough to allow <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> source string to be appended.  The Destination
00400         string length <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not updated.
00401 
00402 --*/
00403 
00404 {
00405     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d7/d0/exts_8h.html#a0">n</a>;
00406     UNALIGNED WCHAR *dst;
00407 
00408     <span class="keywordflow">if</span> (ARGUMENT_PRESENT( Source )) {
00409         UNICODE_STRING UniSource;
00410 
00411         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UniSource, Source);
00412 
00413         <a class="code" href="../../d7/d0/exts_8h.html#a0">n</a> = UniSource.Length;
00414 
00415         <span class="keywordflow">if</span> ((<a class="code" href="../../d7/d0/exts_8h.html#a0">n</a> + Destination-&gt;Length) &gt; Destination-&gt;MaximumLength) {
00416             <span class="keywordflow">return</span>( STATUS_BUFFER_TOO_SMALL );
00417             }
00418 
00419         dst = &amp;Destination-&gt;Buffer[ (Destination-&gt;Length / <span class="keyword">sizeof</span>( WCHAR )) ];
00420         RtlMoveMemory( dst, Source, n );
00421 
00422         Destination-&gt;Length += <a class="code" href="../../d7/d0/exts_8h.html#a0">n</a>;
00423 
00424         <span class="keywordflow">if</span> (Destination-&gt;Length &lt; Destination-&gt;MaximumLength) {
00425             dst[ <a class="code" href="../../d7/d0/exts_8h.html#a0">n</a> / <span class="keyword">sizeof</span>( WCHAR ) ] = UNICODE_NULL;
00426             }
00427         }
00428 
00429     <span class="keywordflow">return</span>( STATUS_SUCCESS );
00430 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="nlsboot.c::RtlCompareUnicodeString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG RtlCompareUnicodeString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>String1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>String2</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>CaseInSensitive</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00075">75</a> of file <a class="el" href="../../d8/d5/nlsboot_8c-source.html">nlsboot.c</a>.
<p>
References <a class="el" href="../../d0/d9/tcmpmem_8c-source.html#l00037">String1</a>, <a class="el" href="../../d0/d9/tcmpmem_8c-source.html#l00038">String2</a>, <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00033">upcase</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00083                    :
00084 
00085     The <a class="code" href="../../d7/d6/nlsboot_8c.html#a2">RtlCompareUnicodeString</a> function compares two counted strings.  The
00086     <span class="keywordflow">return</span> value indicates <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> strings are equal or <a class="code" href="../../d9/d9/tcmpmem_8c.html#a1">String1</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> less than
00087     <a class="code" href="../../d9/d9/tcmpmem_8c.html#a2">String2</a> or <a class="code" href="../../d9/d9/tcmpmem_8c.html#a1">String1</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> greater than <a class="code" href="../../d9/d9/tcmpmem_8c.html#a2">String2</a>.
00088 
00089     The CaseInSensitive parameter specifies <span class="keywordflow">if</span> <span class="keywordflow">case</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be ignored when
00090     doing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> comparison.
00091 
00092 Arguments:
00093 
00094     <a class="code" href="../../d9/d9/tcmpmem_8c.html#a1">String1</a> - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> first string.
00095 
00096     <a class="code" href="../../d9/d9/tcmpmem_8c.html#a2">String2</a> - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> second string.
00097 
00098     CaseInsensitive - <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> <span class="keywordflow">case</span> should be ignored when doing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00099         comparison.
00100 
00101 Return Value:
00102 
00103     Signed value that gives <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> results of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> comparison:
00104 
00105         <a class="code" href="../../d6/d6/ttime_8c.html#a0">Zero</a> - <a class="code" href="../../d9/d9/tcmpmem_8c.html#a1">String1</a> equals <a class="code" href="../../d9/d9/tcmpmem_8c.html#a2">String2</a>
00106 
00107         &lt; <a class="code" href="../../d6/d6/ttime_8c.html#a0">Zero</a> - <a class="code" href="../../d9/d9/tcmpmem_8c.html#a1">String1</a> less than <a class="code" href="../../d9/d9/tcmpmem_8c.html#a2">String2</a>
00108 
00109         &gt; <a class="code" href="../../d6/d6/ttime_8c.html#a0">Zero</a> - <a class="code" href="../../d9/d9/tcmpmem_8c.html#a1">String1</a> greater than <a class="code" href="../../d9/d9/tcmpmem_8c.html#a2">String2</a>
00110 
00111 
00112 --*/
00113 
00114 {
00115 
00116     UNALIGNED WCHAR *s1, *s2;
00117     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> n1, n2;
00118     WCHAR c1, c2;
00119     LONG cDiff;
00120 
00121     s1 = <a class="code" href="../../d9/d9/tcmpmem_8c.html#a1">String1</a>-&gt;Buffer;
00122     s2 = <a class="code" href="../../d9/d9/tcmpmem_8c.html#a2">String2</a>-&gt;Buffer;
00123     n1 = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> )(<a class="code" href="../../d9/d9/tcmpmem_8c.html#a1">String1</a>-&gt;Length / <span class="keyword">sizeof</span>(WCHAR));
00124     n2 = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> )(<a class="code" href="../../d9/d9/tcmpmem_8c.html#a2">String2</a>-&gt;Length / <span class="keyword">sizeof</span>(WCHAR));
00125     <span class="keywordflow">while</span> (n1 &amp;&amp; n2) {
00126         c1 = *s1++;
00127         c2 = *s2++;
00128 
00129         <span class="keywordflow">if</span> (CaseInSensitive) {
00130             <span class="comment">//</span>
00131             <span class="comment">// Note that this needs to reference the translation table !</span>
00132             <span class="comment">//</span>
00133             c1 = <a class="code" href="../../d7/d6/nlsboot_8c.html#a0">upcase</a>(c1);
00134             c2 = <a class="code" href="../../d7/d6/nlsboot_8c.html#a0">upcase</a>(c2);
00135         }
00136 
00137         <span class="keywordflow">if</span> ((cDiff = ((LONG)c1 - (LONG)c2)) != 0) {
00138             <span class="keywordflow">return</span>( cDiff );
00139             }
00140 
00141         n1--;
00142         n2--;
00143         }
00144 
00145     <span class="keywordflow">return</span>( n1 - n2 );
00146 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="nlsboot.c::RtlEqualUnicodeString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN RtlEqualUnicodeString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN const PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>String1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN const PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>String2</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>CaseInSensitive</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00149">149</a> of file <a class="el" href="../../d8/d5/nlsboot_8c-source.html">nlsboot.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/tcmpmem_8c-source.html#l00037">String1</a>, <a class="el" href="../../d0/d9/tcmpmem_8c-source.html#l00038">String2</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00033">upcase</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00157                    :
00158 
00159     The <a class="code" href="../../d7/d6/nlsboot_8c.html#a3">RtlEqualUnicodeString</a> function compares two counted unicode strings <span class="keywordflow">for</span>
00160     equality.
00161 
00162     The CaseInSensitive parameter specifies <span class="keywordflow">if</span> <span class="keywordflow">case</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be ignored when
00163     doing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> comparison.
00164 
00165 Arguments:
00166 
00167     <a class="code" href="../../d9/d9/tcmpmem_8c.html#a1">String1</a> - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> first string.
00168 
00169     <a class="code" href="../../d9/d9/tcmpmem_8c.html#a2">String2</a> - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> second string.
00170 
00171     CaseInsensitive - <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> <span class="keywordflow">case</span> should be ignored when doing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00172         comparison.
00173 
00174 Return Value:
00175 
00176     <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a21">Boolean</a> value that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> <a class="code" href="../../d9/d9/tcmpmem_8c.html#a1">String1</a> equals <a class="code" href="../../d9/d9/tcmpmem_8c.html#a2">String2</a> and <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> otherwise.
00177 
00178 --*/
00179 
00180 {
00181     UNALIGNED WCHAR *s1, *s2;
00182     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> n1, n2;
00183     WCHAR c1, c2;
00184 
00185     s1 = <a class="code" href="../../d9/d9/tcmpmem_8c.html#a1">String1</a>-&gt;Buffer;
00186     s2 = <a class="code" href="../../d9/d9/tcmpmem_8c.html#a2">String2</a>-&gt;Buffer;
00187     n1 = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> )(<a class="code" href="../../d9/d9/tcmpmem_8c.html#a1">String1</a>-&gt;Length / <span class="keyword">sizeof</span>(WCHAR));
00188     n2 = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> )(<a class="code" href="../../d9/d9/tcmpmem_8c.html#a2">String2</a>-&gt;Length / <span class="keyword">sizeof</span>(WCHAR));
00189 
00190     <span class="keywordflow">if</span> ( n1 != n2 ) {
00191         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00192         }
00193 
00194     <span class="keywordflow">if</span> (CaseInSensitive) {
00195 
00196         <span class="keywordflow">while</span> ( n1 ) {
00197 
00198             <span class="keywordflow">if</span> ( *s1++ != *s2++ ) {
00199                 c1 = <a class="code" href="../../d7/d6/nlsboot_8c.html#a0">upcase</a>(*(s1-1));
00200                 c2 = <a class="code" href="../../d7/d6/nlsboot_8c.html#a0">upcase</a>(*(s2-1));
00201                 <span class="keywordflow">if</span> (c1 != c2) {
00202                     <span class="keywordflow">return</span>( <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> );
00203                     }
00204                 }
00205             n1--;
00206             }
00207         }
00208     <span class="keywordflow">else</span> {
00209 
00210         <span class="keywordflow">while</span> ( n1 ) {
00211 
00212             <span class="keywordflow">if</span> (*s1++ != *s2++) {
00213                 <span class="keywordflow">return</span>( <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> );
00214                 }
00215 
00216             n1--;
00217             }
00218         }
00219 
00220     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00221 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="nlsboot.c::RtlInitString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID RtlInitString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>DestinationString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCSZ <a class="el" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00225">225</a> of file <a class="el" href="../../d8/d5/nlsboot_8c-source.html">nlsboot.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, and <a class="el" href="../../d1/d1/usrbench_8h-source.html#l00230">SourceString</a>.
<p>
<pre class="fragment"><div>00232                    :
00233 
00234     The <a class="code" href="../../d7/d6/nlsboot_8c.html#a4">RtlInitString</a> function initializes an NT counted string.
00235     The DestinationString <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> initialized to point to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a>
00236     and <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Length and MaximumLength fields of DestinationString are
00237     initialized to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a>, which <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> zero <span class="keywordflow">if</span>
00238     <a class="code" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not specified.
00239 
00240 Arguments:
00241 
00242     DestinationString - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> counted string to initialize
00243 
00244     <a class="code" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a> - Optional pointer to a null terminated string that
00245         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> counted string <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to point to.
00246 
00247 
00248 Return Value:
00249 
00250     None.
00251 
00252 --*/
00253 
00254 {
00255     DestinationString-&gt;Length = 0;
00256     DestinationString-&gt;Buffer = (PCHAR)<a class="code" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a>;
00257     <span class="keywordflow">if</span> (ARGUMENT_PRESENT( SourceString )) {
00258         <span class="keywordflow">while</span> (*<a class="code" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a>++) {
00259             DestinationString-&gt;Length++;
00260             }
00261 
00262         DestinationString-&gt;MaximumLength = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(DestinationString-&gt;Length+1);
00263         }
00264     <span class="keywordflow">else</span> {
00265         DestinationString-&gt;MaximumLength = 0;
00266         }
00267 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="nlsboot.c::RtlInitUnicodeString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID RtlInitUnicodeString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>DestinationString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCWSTR <a class="el" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00271">271</a> of file <a class="el" href="../../d8/d5/nlsboot_8c-source.html">nlsboot.c</a>.
<p>
References <a class="el" href="../../d1/d1/usrbench_8h-source.html#l00230">SourceString</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00278                    :
00279 
00280     The <a class="code" href="../../d7/d6/nlsboot_8c.html#a5">RtlInitUnicodeString</a> function initializes an NT counted
00281     unicode string.  The DestinationString <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> initialized to point to
00282     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a> and <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Length and MaximumLength fields of
00283     DestinationString are initialized to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a>,
00284     which <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> zero <span class="keywordflow">if</span> <a class="code" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not specified.
00285 
00286 Arguments:
00287 
00288     DestinationString - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> counted string to initialize
00289 
00290     <a class="code" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a> - Optional pointer to a null terminated unicode string that
00291         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> counted string <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to point to.
00292 
00293 
00294 Return Value:
00295 
00296     None.
00297 
00298 --*/
00299 
00300 {
00301     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> Length = 0;
00302     DestinationString-&gt;Length = 0;
00303     DestinationString-&gt;Buffer = (PWSTR)<a class="code" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a>;
00304     <span class="keywordflow">if</span> (ARGUMENT_PRESENT( SourceString )) {
00305         <span class="keywordflow">while</span> (*<a class="code" href="../../d0/d2/usrbench_8h.html#a33">SourceString</a>++) {
00306             Length += <span class="keyword">sizeof</span>(*SourceString);
00307             }
00308 
00309         DestinationString-&gt;Length = Length;
00310 
00311         DestinationString-&gt;MaximumLength = Length+(<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<span class="keyword">sizeof</span>(UNICODE_NULL);
00312         }
00313     <span class="keywordflow">else</span> {
00314         DestinationString-&gt;MaximumLength = 0;
00315         }
00316 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="nlsboot.c::RtlMultiByteToUnicodeN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlMultiByteToUnicodeN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PWCH&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MaxBytesInUnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG BytesInUnicodeString&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCH&nbsp;</td>
          <td class="mdname" nowrap> <em>MultiByteString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInMultiByteString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00576">576</a> of file <a class="el" href="../../d8/d5/nlsboot_8c-source.html">nlsboot.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>.
<p>
<pre class="fragment"><div>00585                    :
00586 
00587     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> converts <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified ansi source string into a
00588     <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> string. The <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00589     ANSI Code Page (ACP) installed at boot time.  Single byte characters
00590     in the range 0x00 - 0x7f are simply zero extended as a performance
00591     enhancement.  In some far eastern code pages 0x5c is defined as the
00592     Yen sign.  For system translation we always want to consider 0x5c
00593     to be the backslash character.  We get this for free by zero extending.
00594 
00595     NOTE: This routine only supports precomposed Unicode characters.
00596 
00597 Arguments:
00598 
00599     UnicodeString - Returns a unicode string that is equivalent to
00600         the ansi source string.
00601 
00602     MaxBytesInUnicodeString - Supplies the maximum number of bytes to be
00603         written to UnicodeString.  If this causes UnicodeString to be a
00604         truncated equivalent of MultiByteString, no error condition results.
00605 
00606     BytesInUnicodeString - Returns the number of bytes in the returned
00607         unicode string pointed to by UnicodeString.
00608 
00609     MultiByteString - Supplies the ansi source string that is to be
00610         converted to unicode.
00611 
00612     BytesInMultiByteString - The number of bytes in the string pointed to
00613         by MultiByteString.
00614 
00615 Return Value:
00616 
00617     SUCCESS - The conversion was successful.
00618 
00619 
00620 --*/
00621 
00622 {
00623     ULONG LoopCount;
00624     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> TranslateTable;
00625     ULONG MaxCharsInUnicodeString;
00626     ULONG i;
00627 
00628     MaxCharsInUnicodeString = MaxBytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
00629 
00630     LoopCount = (MaxCharsInUnicodeString &lt; BytesInMultiByteString) ?
00631                  MaxCharsInUnicodeString : BytesInMultiByteString;
00632 
00633     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInUnicodeString))
00634         *BytesInUnicodeString = LoopCount * <span class="keyword">sizeof</span>(WCHAR);
00635 
00636     <span class="keywordflow">for</span> (i=0;i&lt;LoopCount;i++) {
00637         UnicodeString[i] = (WCHAR)((UCHAR)(MultiByteString[i]));
00638     }
00639 
00640     <span class="keywordflow">return</span>(STATUS_SUCCESS);
00641 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="nlsboot.c::RtlUnicodeToMultiByteN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlUnicodeToMultiByteN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PCH&nbsp;</td>
          <td class="mdname" nowrap> <em>MultiByteString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MaxBytesInMultiByteString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG BytesInMultiByteString&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PWCH&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInUnicodeString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00644">644</a> of file <a class="el" href="../../d8/d5/nlsboot_8c-source.html">nlsboot.c</a>.
<p>
References <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>.
<p>
<pre class="fragment"><div>00653                    :
00654 
00655     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> converts <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified unicode source string into an
00656     ansi string. The <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00657     ANSI Code Page (ACP) loaded at boot time.
00658 
00659 Arguments:
00660 
00661     MultiByteString - Returns an ansi string that is equivalent to the
00662         unicode source string.  If the translation can not be done,
00663         an error is returned.
00664 
00665     MaxBytesInMultiByteString - Supplies the maximum number of bytes to be
00666         written to MultiByteString.  If this causes MultiByteString to be a
00667         truncated equivalent of UnicodeString, no error condition results.
00668 
00669     BytesInMultiByteString - Returns the number of bytes in the returned
00670         ansi string pointed to by MultiByteString.
00671 
00672     UnicodeString - Supplies the unicode source string that is to be
00673         converted to ansi.
00674 
00675     BytesInUnicodeString - The number of bytes in the the string pointed to by
00676         UnicodeString.
00677 
00678 Return Value:
00679 
00680     SUCCESS - The conversion was successful
00681 
00682 --*/
00683 
00684 {
00685     ULONG TmpCount;
00686     ULONG LoopCount;
00687     ULONG CharsInUnicodeString;
00688     UCHAR SbChar;
00689     WCHAR UnicodeChar;
00690     ULONG i;
00691 
00692     <span class="comment">//</span>
00693     <span class="comment">// Convert Unicode byte count to character count. Byte count of</span>
00694     <span class="comment">// multibyte string is equivalent to character count.</span>
00695     <span class="comment">//</span>
00696     CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
00697 
00698     LoopCount = (CharsInUnicodeString &lt; MaxBytesInMultiByteString) ?
00699                  CharsInUnicodeString : MaxBytesInMultiByteString;
00700 
00701     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInMultiByteString))
00702         *BytesInMultiByteString = LoopCount;
00703 
00704 
00705     <span class="keywordflow">for</span> (i=0;i&lt;LoopCount;i++) {
00706         MultiByteString[i] = (<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>)UnicodeString[i];
00707     }
00708 
00709     <span class="keywordflow">return</span> STATUS_SUCCESS;
00710 
00711 }
}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="nlsboot.c::RtlUpcaseUnicodeChar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WCHAR RtlUpcaseUnicodeChar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN WCHAR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>SourceCharacter</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00433">433</a> of file <a class="el" href="../../d8/d5/nlsboot_8c-source.html">nlsboot.c</a>.
<p>
References <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00033">upcase</a>.
<p>
<pre class="fragment"><div>00439                    :
00440 
00441     This function translates <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified unicode character to its
00442     equivalent upcased unicode chararacter.  The purpose <span class="keywordflow">for</span> <span class="keyword">this</span> routine
00443     <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to allow <span class="keywordflow">for</span> character by character <a class="code" href="../../d7/d6/nlsboot_8c.html#a0">upcase</a> <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a>.  The
00444     <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current system locale
00445     information.
00446 
00447 
00448 Arguments:
00449 
00450     SourceCharacter - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> unicode character to be upcased.
00451 
00452 Return Value:
00453 
00454     Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> upcased unicode equivalent of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified input character.
00455 
00456 --*/
00457 
00458 {
00459 
00460     <span class="keywordflow">return</span> (<a class="code" href="../../d7/d6/nlsboot_8c.html#a0">upcase</a>(SourceCharacter));
00461 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="nlsboot.c::RtlUpcaseUnicodeToMultiByteN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RtlUpcaseUnicodeToMultiByteN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PCH&nbsp;</td>
          <td class="mdname" nowrap> <em>MultiByteString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>MaxBytesInMultiByteString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG BytesInMultiByteString&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PWCH&nbsp;</td>
          <td class="mdname" nowrap> <em>UnicodeString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BytesInUnicodeString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/nlsboot_8c-source.html#l00506">506</a> of file <a class="el" href="../../d8/d5/nlsboot_8c-source.html">nlsboot.c</a>.
<p>
References <a class="el" href="../../d7/d5/nls_8c-source.html#l01178">RtlUpcaseUnicodeChar()</a>.
<p>
<pre class="fragment"><div>00515                    :
00516 
00517     This <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a16">functions</a> upper cases <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified unicode source string and
00518     converts <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> into an ansi string. The <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a46">translation</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> done with respect
00519     to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ANSI Code Page (ACP) loaded at boot time.
00520 
00521 Arguments:
00522 
00523     MultiByteString - Returns an ansi string that is equivalent to the
00524         upper case of the unicode source string.  If the translation can
00525         not be done, an error is returned.
00526 
00527     MaxBytesInMultiByteString - Supplies the maximum number of bytes to be
00528         written to MultiByteString.  If this causes MultiByteString to be a
00529         truncated equivalent of UnicodeString, no error condition results.
00530 
00531     BytesInMultiByteString - Returns the number of bytes in the returned
00532         ansi string pointed to by MultiByteString.
00533 
00534     UnicodeString - Supplies the unicode source string that is to be
00535         converted to ansi.
00536 
00537     BytesInUnicodeString - The number of bytes in the the string pointed to by
00538         UnicodeString.
00539 
00540 Return Value:
00541 
00542     SUCCESS - The conversion was successful
00543 
00544 --*/
00545 
00546 {
00547     ULONG TmpCount;
00548     ULONG LoopCount;
00549     ULONG CharsInUnicodeString;
00550     UCHAR SbChar;
00551     WCHAR UnicodeChar;
00552     ULONG i;
00553 
00554     <span class="comment">//</span>
00555     <span class="comment">// Convert Unicode byte count to character count. Byte count of</span>
00556     <span class="comment">// multibyte string is equivalent to character count.</span>
00557     <span class="comment">//</span>
00558     CharsInUnicodeString = BytesInUnicodeString / <span class="keyword">sizeof</span>(WCHAR);
00559 
00560     LoopCount = (CharsInUnicodeString &lt; MaxBytesInMultiByteString) ?
00561                  CharsInUnicodeString : MaxBytesInMultiByteString;
00562 
00563     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(BytesInMultiByteString))
00564         *BytesInMultiByteString = LoopCount;
00565 
00566 
00567     <span class="keywordflow">for</span> (i=0;i&lt;LoopCount;i++) {
00568 
00569         MultiByteString[i] = (UCHAR)<a class="code" href="../../d6/d6/nls_8c.html#a33">RtlUpcaseUnicodeChar</a>((UCHAR)(UnicodeString[i]));
00570     }
00571 
00572     <span class="keywordflow">return</span> STATUS_SUCCESS;
00573 }

</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:51 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

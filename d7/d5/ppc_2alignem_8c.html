<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: ppc/alignem.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>alignem.c File Reference</h1><code>#include "<a class="el" href="../../d1/d9/ki_8h-source.html">ki.h</a>"</code><br>

<p>
<a href="../../d8/d4/ppc_2alignem_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/struct__ALFAULT.html">_ALFAULT</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a0">LDARX_INDEX_VALUE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a1">LD_INDEX_VALUE</a>&nbsp;&nbsp;&nbsp;13</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a2">STD_INDEX_VALUE</a>&nbsp;&nbsp;&nbsp;15</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a3">STWCX_INDEX_VALUE</a>&nbsp;&nbsp;&nbsp;66</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a4">STDCX_INDEX_VALUE</a>&nbsp;&nbsp;&nbsp;67</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a5">LWBRX_INDEX_VALUE</a>&nbsp;&nbsp;&nbsp;72</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a6">STWBRX_INDEX_VALUE</a>&nbsp;&nbsp;&nbsp;74</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a7">LHBRX_INDEX_VALUE</a>&nbsp;&nbsp;&nbsp;76</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a8">STHBRX_INDEX_VALUE</a>&nbsp;&nbsp;&nbsp;78</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a9">ECIWX_INDEX_VALUE</a>&nbsp;&nbsp;&nbsp;84</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a10">ECOWX_INDEX_VALUE</a>&nbsp;&nbsp;&nbsp;86</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a11">DCBZ_INDEX_VALUE</a>&nbsp;&nbsp;&nbsp;95</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a12">STFIWX_INDEX_VALUE</a>&nbsp;&nbsp;&nbsp;111</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d6/struct__ALFAULT.html">_ALFAULT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a13">ALFAULT</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d6/struct__ALFAULT.html">_ALFAULT</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a14">PALFAULT</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a16">KiSetFloatRegisterValue</a> (IN ULONG, IN DOUBLE, OUT PKEXCEPTION_FRAME, OUT PKTRAP_FRAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>DOUBLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a17">KiGetFloatRegisterValue</a> (IN ULONG, IN PKEXCEPTION_FRAME, IN PKTRAP_FRAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a18">KiEmulateReference</a> (IN OUT PEXCEPTION_RECORD ExceptionRecord, IN OUT PKEXCEPTION_FRAME ExceptionFrame, IN OUT PKTRAP_FRAME TrapFrame)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a19">KiEmulateDcbz</a> (IN OUT PEXCEPTION_RECORD ExceptionRecord, IN OUT PKEXCEPTION_FRAME ExceptionFrame, IN OUT PKTRAP_FRAME TrapFrame)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/struct__ALFAULT.html">ALFAULT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a15">AlFault</a> [128]</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a11" doxytag="ppc/alignem.c::DCBZ_INDEX_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DCBZ_INDEX_VALUE&nbsp;&nbsp;&nbsp;95          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00118">118</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00754">KiEmulateDcbz()</a>, and <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">KiEmulateReference()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="ppc/alignem.c::ECIWX_INDEX_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ECIWX_INDEX_VALUE&nbsp;&nbsp;&nbsp;84          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00116">116</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">KiEmulateReference()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="ppc/alignem.c::ECOWX_INDEX_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ECOWX_INDEX_VALUE&nbsp;&nbsp;&nbsp;86          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00117">117</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">KiEmulateReference()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="ppc/alignem.c::LD_INDEX_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LD_INDEX_VALUE&nbsp;&nbsp;&nbsp;13          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00108">108</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">KiEmulateReference()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="ppc/alignem.c::LDARX_INDEX_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LDARX_INDEX_VALUE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00107">107</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">KiEmulateReference()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="ppc/alignem.c::LHBRX_INDEX_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LHBRX_INDEX_VALUE&nbsp;&nbsp;&nbsp;76          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00114">114</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">KiEmulateReference()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="ppc/alignem.c::LWBRX_INDEX_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LWBRX_INDEX_VALUE&nbsp;&nbsp;&nbsp;72          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00112">112</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">KiEmulateReference()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="ppc/alignem.c::STD_INDEX_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STD_INDEX_VALUE&nbsp;&nbsp;&nbsp;15          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00109">109</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">KiEmulateReference()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="ppc/alignem.c::STDCX_INDEX_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STDCX_INDEX_VALUE&nbsp;&nbsp;&nbsp;67          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00111">111</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">KiEmulateReference()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="ppc/alignem.c::STFIWX_INDEX_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STFIWX_INDEX_VALUE&nbsp;&nbsp;&nbsp;111          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00119">119</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">KiEmulateReference()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="ppc/alignem.c::STHBRX_INDEX_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STHBRX_INDEX_VALUE&nbsp;&nbsp;&nbsp;78          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00115">115</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">KiEmulateReference()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="ppc/alignem.c::STWBRX_INDEX_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STWBRX_INDEX_VALUE&nbsp;&nbsp;&nbsp;74          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00113">113</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">KiEmulateReference()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="ppc/alignem.c::STWCX_INDEX_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STWCX_INDEX_VALUE&nbsp;&nbsp;&nbsp;66          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00110">110</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">KiEmulateReference()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a13" doxytag="ppc/alignem.c::ALFAULT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d6/struct__ALFAULT.html">_ALFAULT</a>  <a class="el" href="../../d0/d6/struct__ALFAULT.html">ALFAULT</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="ppc/alignem.c::PALFAULT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d6/struct__ALFAULT.html">_ALFAULT</a> * <a class="el" href="../../d0/d6/struct__ALFAULT.html">PALFAULT</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a19" doxytag="ppc/alignem.c::KiEmulateDcbz" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN KiEmulateDcbz           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT PEXCEPTION_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionRecord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PKEXCEPTION_FRAME&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionFrame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PKTRAP_FRAME&nbsp;</td>
          <td class="mdname" nowrap> <em>TrapFrame</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00754">754</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
References <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00121">AlFault</a>, <a class="el" href="../../d1/d2/ppc_8h-source.html#l01882">_DSISR::DataReg</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00118">DCBZ_INDEX_VALUE</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00102">_ALFAULT::Escape</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d2/ppc_8h-source.html#l01883">_DSISR::Index</a>, <a class="el" href="../../d3/d8/ppc_2exceptn_8c-source.html#l00886">KiCopyInformation()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00096">_ALFAULT::Valid</a>.
<p>
Referenced by <a class="el" href="../../d3/d8/ppc_2exceptn_8c-source.html#l00373">KiDispatchException()</a>.
<p>
<pre class="fragment"><div>00762                    :
00763 
00764     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called to emulate a Data Cache Block <a class="code" href="../../d6/d6/ttime_8c.html#a0">Zero</a> instruction.
00765     The PowerPC hardware will raise an alignment exception <span class="keywordflow">if</span> a DCBZ <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
00766     attempted on non-cached memory.   We need to emulate <span class="keyword">this</span> even in kernel
00767     mode so we can debug h/w problems by disabling <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data cache.
00768 
00769 Arguments:
00770 
00771     ExceptionRecord - Supplies a pointer to an exception record.
00772 
00773     ExceptionFrame - Supplies a pointer to an exception frame.
00774 
00775     TrapFrame - Supplies a pointer to a trap frame.
00776 
00777 Return Value:
00778 
00779     <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> value of <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data reference <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> successfully
00780     emulated. Otherwise, a value of <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
00781 
00782 --*/
00783 
00784 {
00785 
00786     PUCHAR DataAddress;
00787     PVOID ExceptionAddress;
00788     <a class="code" href="../../d7/d9/struct__DSISR.html">DSISR</a> DsisrValue;
00789     ULONG TableIndex;
00790     ULONG DataRegNum;
00791     <a class="code" href="../../d0/d6/struct__ALFAULT.html">ALFAULT</a> Info;
00792 
00793     <span class="comment">//</span>
00794     <span class="comment">// Save the original exception address in case another exception</span>
00795     <span class="comment">// occurs.</span>
00796     <span class="comment">//</span>
00797 
00798     ExceptionAddress = ExceptionRecord-&gt;ExceptionAddress;
00799 
00800     <span class="comment">//</span>
00801     <span class="comment">// Any exception that occurs during the attempted emulation of the</span>
00802     <span class="comment">// unaligned reference causes the emulation to be aborted. The new</span>
00803     <span class="comment">// exception code and information is copied to the original exception</span>
00804     <span class="comment">// record and a value of FALSE is returned.</span>
00805     <span class="comment">//</span>
00806 
00807     <span class="keywordflow">try</span> {
00808 
00809         <span class="comment">//</span>
00810         <span class="comment">// The effective address of the reference from the DAR was saved</span>
00811         <span class="comment">// in the exception record. Check to make sure it is within the</span>
00812         <span class="comment">// user part of the address space. Alignment exceptions take</span>
00813         <span class="comment">// precedence over memory management exceptions (this is true</span>
00814         <span class="comment">// for PowerPC as well as MIPS) and the address could be a</span>
00815         <span class="comment">// system address.</span>
00816         <span class="comment">//</span>
00817 
00818         DataAddress = (PUCHAR) (ExceptionRecord-&gt;ExceptionInformation[1]);
00819 
00820         <span class="comment">//</span>
00821         <span class="comment">// Get information about the failing instruction from saved DSISR.</span>
00822         <span class="comment">//</span>
00823 
00824         DsisrValue = *(<a class="code" href="../../d7/d9/struct__DSISR.html">DSISR</a>*) &amp;(ExceptionRecord-&gt;ExceptionInformation[2]);
00825         TableIndex = DsisrValue.<a class="code" href="../../d7/d9/struct__DSISR.html#o2">Index</a>;
00826         DataRegNum = DsisrValue.<a class="code" href="../../d7/d9/struct__DSISR.html#o1">DataReg</a>;
00827         Info = <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a15">AlFault</a>[TableIndex];
00828 
00829         <span class="comment">//</span>
00830         <span class="comment">// If table entry is valid and does not indicate special processing</span>
00831         <span class="comment">// needed, and is a DCBZ instruction, emulate the execution of the </span>
00832         <span class="comment">// instruction</span>
00833         <span class="comment">//</span>
00834 
00835         <span class="keywordflow">if</span> (Info.<a class="code" href="../../d0/d6/struct__ALFAULT.html#o0">Valid</a> &amp;&amp; Info.<a class="code" href="../../d0/d6/struct__ALFAULT.html#o6">Escape</a> &amp;&amp; (TableIndex == <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a11">DCBZ_INDEX_VALUE</a>)) {
00836 
00837             <span class="comment">//</span>
00838             <span class="comment">// Data Cache Block Zero</span>
00839             <span class="comment">//</span>
00840             <span class="comment">//   A data cache block is 32 bytes long, we emulate this</span>
00841             <span class="comment">//   instruction by storing 8 zero integers a the address</span>
00842             <span class="comment">//   specified.</span>
00843             <span class="comment">//</span>
00844             <span class="comment">//   Note, dcbz zeros the block "containing" the address</span>
00845             <span class="comment">//   so we round down first.</span>
00846             <span class="comment">//</span>
00847 
00848             PULONG DcbAddress = (PULONG)((ULONG)DataAddress &amp; ~0x1f);
00849 
00850             *DcbAddress++ = 0;
00851             *DcbAddress++ = 0;
00852             *DcbAddress++ = 0;
00853             *DcbAddress++ = 0;
00854             *DcbAddress++ = 0;
00855             *DcbAddress++ = 0;
00856             *DcbAddress++ = 0;
00857             *DcbAddress++ = 0;
00858 
00859             <span class="comment">//</span>
00860             <span class="comment">// Bump instruction address to next instruction.</span>
00861             <span class="comment">//</span>
00862 
00863             TrapFrame-&gt;Iar += 4;
00864 
00865             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00866         }
00867 
00868     <span class="comment">//</span>
00869     <span class="comment">// If an exception occurs, then copy the new exception information to the</span>
00870     <span class="comment">// original exception record and handle the exception.</span>
00871     <span class="comment">//</span>
00872 
00873     } except (<a class="code" href="../../d2/d9/ppc_2exceptn_8c.html#a12">KiCopyInformation</a>(ExceptionRecord,
00874                                (GetExceptionInformation())-&gt;ExceptionRecord)) {
00875 
00876         <span class="comment">//</span>
00877         <span class="comment">// Preserve the original exception address.</span>
00878         <span class="comment">//</span>
00879 
00880         ExceptionRecord-&gt;ExceptionAddress = ExceptionAddress;
00881     }
00882 
00883     <span class="comment">//</span>
00884     <span class="comment">// Return a value of FALSE.</span>
00885     <span class="comment">//</span>
00886 
00887     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00888 }
}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="ppc/alignem.c::KiEmulateReference" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN KiEmulateReference           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT PEXCEPTION_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionRecord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PKEXCEPTION_FRAME&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionFrame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PKTRAP_FRAME&nbsp;</td>
          <td class="mdname" nowrap> <em>TrapFrame</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">255</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
References <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00121">AlFault</a>, <a class="el" href="../../d1/d2/ppc_8h-source.html#l01882">_DSISR::DataReg</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00118">DCBZ_INDEX_VALUE</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00116">ECIWX_INDEX_VALUE</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00117">ECOWX_INDEX_VALUE</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00102">_ALFAULT::Escape</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00100">_ALFAULT::Fixed</a>, <a class="el" href="../../d1/d2/ppc_8h-source.html#l01883">_DSISR::Index</a>, <a class="el" href="../../d9/d5/verifier_8c.html#a117">KeLowerIrql()</a>, <a class="el" href="../../d2/d8/clock_8c-source.html#l00401">KeProfileInterruptWithSource()</a>, <a class="el" href="../../d9/d5/verifier_8c.html#a116">KeRaiseIrql()</a>, <a class="el" href="../../d3/d8/ppc_2exceptn_8c-source.html#l00886">KiCopyInformation()</a>, <a class="el" href="../../d7/d4/ia64_2getsetrg_8c-source.html#l00586">KiGetFloatRegisterValue()</a>, <a class="el" href="../../d6/d4/alpha_2getsetrg_8c-source.html#l00035">KiGetRegisterValue()</a>, <a class="el" href="../../d6/d8/kernldat_8c-source.html#l00458">KiProfileAlignmentFixup</a>, <a class="el" href="../../d6/d8/kernldat_8c-source.html#l00472">KiProfileAlignmentFixupCount</a>, <a class="el" href="../../d6/d8/kernldat_8c-source.html#l00465">KiProfileAlignmentFixupInterval</a>, <a class="el" href="../../d7/d4/ia64_2getsetrg_8c-source.html#l00619">KiSetFloatRegisterValue()</a>, <a class="el" href="../../d6/d4/alpha_2getsetrg_8c-source.html#l00527">KiSetRegisterValue()</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00108">LD_INDEX_VALUE</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00107">LDARX_INDEX_VALUE</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00098">_ALFAULT::Length</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00114">LHBRX_INDEX_VALUE</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00097">_ALFAULT::Load</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00112">LWBRX_INDEX_VALUE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00090">PROFILE_LEVEL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00099">_ALFAULT::Signed</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00109">STD_INDEX_VALUE</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00111">STDCX_INDEX_VALUE</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00119">STFIWX_INDEX_VALUE</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00115">STHBRX_INDEX_VALUE</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00113">STWBRX_INDEX_VALUE</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00110">STWCX_INDEX_VALUE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00101">_ALFAULT::Update</a>, <a class="el" href="../../d1/d2/ppc_8h-source.html#l01881">_DSISR::UpdateReg</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>, and <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00096">_ALFAULT::Valid</a>.
<p>
Referenced by <a class="el" href="../../d9/d7/alpha_2exceptn_8c-source.html#l00412">KiDispatchException()</a>.
<p>
<pre class="fragment"><div>00263                    :
00264 
00265     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called to emulate an unaligned data reference to an
00266     address in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> user part of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address space.
00267 
00268 Arguments:
00269 
00270     ExceptionRecord - Supplies a pointer to an exception record.
00271 
00272     ExceptionFrame - Supplies a pointer to an exception frame.
00273 
00274     TrapFrame - Supplies a pointer to a trap frame.
00275 
00276 Return Value:
00277 
00278     <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> value of <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data reference <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> successfully
00279     emulated. Otherwise, a value of <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
00280 
00281 --*/
00282 
00283 {
00284 
00285     ULONG BranchAddress;
00286     PUCHAR DataAddress;
00287 
00288     <span class="keyword">union </span>{
00289         DOUBLE Double;
00290         <span class="keywordtype">float</span>  Float;
00291         ULONG  Long;
00292         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>  Short;
00293     } DataReference;
00294     PUCHAR DataValue = (PUCHAR) &amp;DataReference;
00295 
00296     PVOID ExceptionAddress;
00297     <a class="code" href="../../d7/d9/struct__DSISR.html">DSISR</a> DsisrValue;
00298     ULONG TableIndex;
00299     ULONG DataRegNum;
00300     <a class="code" href="../../d0/d6/struct__ALFAULT.html">ALFAULT</a> Info;
00301     KIRQL OldIrql;
00302 
00303     <span class="comment">//</span>
00304     <span class="comment">// Call out to profile interrupt if alignment profiling is active</span>
00305     <span class="comment">//</span>
00306     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9/kernldat_8c.html#a52">KiProfileAlignmentFixup</a>) {
00307 
00308         <span class="keywordflow">if</span> (++<a class="code" href="../../d5/d9/kernldat_8c.html#a54">KiProfileAlignmentFixupCount</a> &gt;= <a class="code" href="../../d5/d9/kernldat_8c.html#a53">KiProfileAlignmentFixupInterval</a>) {
00309 
00310             <a class="code" href="../../d9/d5/verifier_8c.html#a116">KeRaiseIrql</a>(PROFILE_LEVEL, &amp;OldIrql);
00311             <a class="code" href="../../d5/d9/kernldat_8c.html#a54">KiProfileAlignmentFixupCount</a> = 0;
00312             <a class="code" href="../../d1/d9/clock_8c.html#a6">KeProfileInterruptWithSource</a>(TrapFrame, ProfileAlignmentFixup);
00313             <a class="code" href="../../d9/d5/verifier_8c.html#a117">KeLowerIrql</a>(OldIrql);
00314 
00315         }
00316     }
00317 
00318     <span class="comment">//</span>
00319     <span class="comment">// Save the original exception address in case another exception</span>
00320     <span class="comment">// occurs.</span>
00321     <span class="comment">//</span>
00322 
00323     ExceptionAddress = ExceptionRecord-&gt;ExceptionAddress;
00324 
00325     <span class="comment">//</span>
00326     <span class="comment">// Any exception that occurs during the attempted emulation of the</span>
00327     <span class="comment">// unaligned reference causes the emulation to be aborted. The new</span>
00328     <span class="comment">// exception code and information is copied to the original exception</span>
00329     <span class="comment">// record and a value of FALSE is returned.</span>
00330     <span class="comment">//</span>
00331 
00332     <span class="keywordflow">try</span> {
00333 
00334         <span class="comment">//</span>
00335         <span class="comment">// PowerPC has no branch-delay-slot complexities like MIPS</span>
00336         <span class="comment">//</span>
00337 
00338         BranchAddress = TrapFrame-&gt;Iar + 4;
00339 
00340         <span class="comment">//</span>
00341         <span class="comment">// The effective address of the reference from the DAR was saved</span>
00342         <span class="comment">// in the exception record. Check to make sure it is within the</span>
00343         <span class="comment">// user part of the address space. Alignment exceptions take</span>
00344         <span class="comment">// precedence over memory management exceptions (this is true</span>
00345         <span class="comment">// for PowerPC as well as MIPS) and the address could be a</span>
00346         <span class="comment">// system address.</span>
00347         <span class="comment">//</span>
00348 
00349         DataAddress = (PUCHAR) (ExceptionRecord-&gt;ExceptionInformation[1]);
00350 
00351         <span class="keywordflow">if</span> ((ULONG)DataAddress &lt; MM_USER_PROBE_ADDRESS) {
00352 
00353             <span class="comment">//</span>
00354             <span class="comment">// Get information about the failing instruction from saved DSISR.</span>
00355             <span class="comment">//</span>
00356 
00357             DsisrValue = *(<a class="code" href="../../d7/d9/struct__DSISR.html">DSISR</a>*) &amp;(ExceptionRecord-&gt;ExceptionInformation[2]);
00358             TableIndex = DsisrValue.<a class="code" href="../../d7/d9/struct__DSISR.html#o2">Index</a>;
00359             DataRegNum = DsisrValue.<a class="code" href="../../d7/d9/struct__DSISR.html#o1">DataReg</a>;
00360             Info = <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a15">AlFault</a>[TableIndex];
00361 
00362             <span class="comment">//</span>
00363             <span class="comment">// If table entry is marked invalid, we have some sort of logic error.</span>
00364             <span class="comment">//</span>
00365 
00366             <span class="keywordflow">if</span> (!Info.<a class="code" href="../../d0/d6/struct__ALFAULT.html#o0">Valid</a>)
00367                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00368 
00369             <span class="comment">//</span>
00370             <span class="comment">// If table entry does not indicate special processing needed,</span>
00371             <span class="comment">//   emulate the execution of the instruction</span>
00372             <span class="comment">//</span>
00373 
00374             <span class="keywordflow">if</span> (!Info.<a class="code" href="../../d0/d6/struct__ALFAULT.html#o6">Escape</a>) {
00375 
00376                     <span class="comment">//</span>
00377                     <span class="comment">// Integer or float load or store</span>
00378                     <span class="comment">//</span>
00379 
00380                 <span class="keywordflow">if</span> (Info.<a class="code" href="../../d0/d6/struct__ALFAULT.html#o4">Fixed</a>) {
00381 
00382                         <span class="comment">//</span>
00383                         <span class="comment">// Integer register</span>
00384                         <span class="comment">//</span>
00385 
00386                     <span class="keywordflow">if</span> (Info.<a class="code" href="../../d0/d6/struct__ALFAULT.html#o1">Load</a>) {
00387 
00388                             <span class="comment">//</span>
00389                             <span class="comment">// Integer load</span>
00390                             <span class="comment">//</span>
00391 
00392                         <span class="keywordflow">switch</span> (Info.<a class="code" href="../../d0/d6/struct__ALFAULT.html#o2">Length</a>) {
00393 
00394                                 <span class="comment">//</span>
00395                                 <span class="comment">// Halfword integer load</span>
00396                                 <span class="comment">//</span>
00397 
00398                           <span class="keywordflow">case</span> 1:
00399                             DataValue[0] = DataAddress[0];
00400                             DataValue[1] = DataAddress[1];
00401                             <a class="code" href="../../d5/d5/alpha_2getsetrg_8c.html#a1">KiSetRegisterValue</a>
00402                                 (DataRegNum,
00403                                  Info.<a class="code" href="../../d0/d6/struct__ALFAULT.html#o3">Signed</a> ?   <span class="comment">// sign extension ...</span>
00404                                      (ULONG) ((LONG) DataReference.Short) :
00405                                      (ULONG) ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>) DataReference.Short),
00406                                  ExceptionFrame,
00407                                  TrapFrame);
00408                             <span class="keywordflow">break</span>;
00409 
00410                                 <span class="comment">//</span>
00411                                 <span class="comment">// Fullword integer load</span>
00412                                 <span class="comment">//</span>
00413 
00414                           <span class="keywordflow">case</span> 2:
00415                             DataValue[0] = DataAddress[0];
00416                             DataValue[1] = DataAddress[1];
00417                             DataValue[2] = DataAddress[2];
00418                             DataValue[3] = DataAddress[3];
00419                             <a class="code" href="../../d5/d5/alpha_2getsetrg_8c.html#a1">KiSetRegisterValue</a>
00420                                 (DataRegNum,
00421                                  DataReference.Long,
00422                                  ExceptionFrame,
00423                                  TrapFrame);
00424                             <span class="keywordflow">break</span>;
00425 
00426                                 <span class="comment">//</span>
00427                                 <span class="comment">// Doubleword integer load</span>
00428                                 <span class="comment">//</span>
00429 
00430                           <span class="keywordflow">case</span> 3:
00431                             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>; <span class="comment">// Have no 8-byte integer regs yet</span>
00432 
00433                         }
00434                     } <span class="keywordflow">else</span> {
00435 
00436                             <span class="comment">//</span>
00437                             <span class="comment">// Integer store</span>
00438                             <span class="comment">//</span>
00439 
00440                         <span class="keywordflow">switch</span> (Info.<a class="code" href="../../d0/d6/struct__ALFAULT.html#o2">Length</a>) {
00441 
00442                                 <span class="comment">//</span>
00443                                 <span class="comment">// Halfword integer store</span>
00444                                 <span class="comment">//</span>
00445 
00446                           <span class="keywordflow">case</span> 1:
00447                             DataReference.Short = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)
00448                                 <a class="code" href="../../d5/d5/alpha_2getsetrg_8c.html#a0">KiGetRegisterValue</a>
00449                                     (DataRegNum,
00450                                      ExceptionFrame,
00451                                      TrapFrame);
00452                             DataAddress[0] = DataValue[0];
00453                             DataAddress[1] = DataValue[1];
00454                             <span class="keywordflow">break</span>;
00455 
00456                                 <span class="comment">//</span>
00457                                 <span class="comment">// Fullword integer store</span>
00458                                 <span class="comment">//</span>
00459 
00460                           <span class="keywordflow">case</span> 2:       <span class="comment">// Word</span>
00461                             DataReference.Long =
00462                                 <a class="code" href="../../d5/d5/alpha_2getsetrg_8c.html#a0">KiGetRegisterValue</a>
00463                                     (DataRegNum,
00464                                      ExceptionFrame,
00465                                      TrapFrame);
00466                             DataAddress[0] = DataValue[0];
00467                             DataAddress[1] = DataValue[1];
00468                             DataAddress[2] = DataValue[2];
00469                             DataAddress[3] = DataValue[3];
00470                             <span class="keywordflow">break</span>;
00471 
00472                                 <span class="comment">//</span>
00473                                 <span class="comment">// Doubleword integer store</span>
00474                                 <span class="comment">//</span>
00475 
00476                           <span class="keywordflow">case</span> 3:
00477 
00478                             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>; <span class="comment">// Have no 8-byte integer regs yet</span>
00479                         }
00480                     }
00481                 } <span class="keywordflow">else</span> {                <span class="comment">// Floating point</span>
00482 
00483                         <span class="comment">//</span>
00484                         <span class="comment">// Floating-point register</span>
00485                         <span class="comment">//</span>
00486 
00487                     <span class="keywordflow">if</span> (Info.<a class="code" href="../../d0/d6/struct__ALFAULT.html#o1">Load</a>) {    <span class="comment">// Floating point load</span>
00488 
00489                             <span class="comment">//</span>
00490                             <span class="comment">// Floating-point load</span>
00491                             <span class="comment">//</span>
00492 
00493                         <span class="keywordflow">if</span> (Info.<a class="code" href="../../d0/d6/struct__ALFAULT.html#o2">Length</a> == 2) {
00494 
00495                                 <span class="comment">//</span>
00496                                 <span class="comment">// Floating-point single precision load</span>
00497                                 <span class="comment">//</span>
00498                             DataValue[0] = DataAddress[0];
00499                             DataValue[1] = DataAddress[1];
00500                             DataValue[2] = DataAddress[2];
00501                             DataValue[3] = DataAddress[3];
00502                             <a class="code" href="../../d6/d5/ia64_2getsetrg_8c.html#a6">KiSetFloatRegisterValue</a>
00503                                 (DataRegNum,
00504                                  (DOUBLE) DataReference.Float,
00505                                  ExceptionFrame,
00506                                  TrapFrame);
00507 
00508                         } <span class="keywordflow">else</span> {
00509 
00510                                 <span class="comment">//</span>
00511                                 <span class="comment">// Floating-point double precision load</span>
00512                                 <span class="comment">//</span>
00513                             DataValue[0] = DataAddress[0];
00514                             DataValue[1] = DataAddress[1];
00515                             DataValue[2] = DataAddress[2];
00516                             DataValue[3] = DataAddress[3];
00517                             DataValue[4] = DataAddress[4];
00518                             DataValue[5] = DataAddress[5];
00519                             DataValue[6] = DataAddress[6];
00520                             DataValue[7] = DataAddress[7];
00521                             <a class="code" href="../../d6/d5/ia64_2getsetrg_8c.html#a6">KiSetFloatRegisterValue</a>
00522                                 (DataRegNum,
00523                                  DataReference.Double,
00524                                  ExceptionFrame,
00525                                  TrapFrame);
00526                         }
00527                     } <span class="keywordflow">else</span> {
00528 
00529                             <span class="comment">//</span>
00530                             <span class="comment">// Floating-point store</span>
00531                             <span class="comment">//</span>
00532 
00533                         <span class="keywordflow">if</span> (Info.<a class="code" href="../../d0/d6/struct__ALFAULT.html#o2">Length</a> == 2) {
00534 
00535                                 <span class="comment">//</span>
00536                                 <span class="comment">// Floating-point single precision store</span>
00537                                 <span class="comment">//</span>
00538 
00539                             DataReference.Float = (<span class="keywordtype">float</span>)
00540                                 <a class="code" href="../../d6/d5/ia64_2getsetrg_8c.html#a5">KiGetFloatRegisterValue</a>
00541                                     (DataRegNum,
00542                                      ExceptionFrame,
00543                                      TrapFrame);
00544                             DataAddress[0] = DataValue[0];
00545                             DataAddress[1] = DataValue[1];
00546                             DataAddress[2] = DataValue[2];
00547                             DataAddress[3] = DataValue[3];
00548 
00549                         } <span class="keywordflow">else</span> {
00550 
00551                                 <span class="comment">//</span>
00552                                 <span class="comment">// Floating-point double precision store</span>
00553                                 <span class="comment">//</span>
00554                             DataReference.Double =
00555                                 <a class="code" href="../../d6/d5/ia64_2getsetrg_8c.html#a5">KiGetFloatRegisterValue</a>
00556                                     (DataRegNum,
00557                                      ExceptionFrame,
00558                                      TrapFrame);
00559                             DataAddress[0] = DataValue[0];
00560                             DataAddress[1] = DataValue[1];
00561                             DataAddress[2] = DataValue[2];
00562                             DataAddress[3] = DataValue[3];
00563                             DataAddress[4] = DataValue[4];
00564                             DataAddress[5] = DataValue[5];
00565                             DataAddress[6] = DataValue[6];
00566                             DataAddress[7] = DataValue[7];
00567                         }
00568                     }
00569                 }
00570 
00571                 <span class="comment">//</span>
00572                 <span class="comment">// See if "update" (post-increment) form of addressing</span>
00573                 <span class="comment">//</span>
00574 
00575                 <span class="keywordflow">if</span> (Info.<a class="code" href="../../d0/d6/struct__ALFAULT.html#o5">Update</a>)
00576                     <a class="code" href="../../d5/d5/alpha_2getsetrg_8c.html#a1">KiSetRegisterValue</a>  <span class="comment">// Store effective addr back into base reg</span>
00577                         (DsisrValue.<a class="code" href="../../d7/d9/struct__DSISR.html#o0">UpdateReg</a>,
00578                          (ULONG) DataAddress,
00579                          ExceptionFrame,
00580                          TrapFrame);
00581 
00582             }
00583 
00584             <span class="comment">//</span>
00585             <span class="comment">// Table indicates that special processing is needed, either because</span>
00586             <span class="comment">// the DSISR does not contain enough information to disambiguate the</span>
00587             <span class="comment">// failing instruction, or the instruction is not a load or store,</span>
00588             <span class="comment">// or the instruction has some other unusual requirement.</span>
00589             <span class="comment">//</span>
00590 
00591             <span class="keywordflow">else</span> {                      <span class="comment">// Info.Escape == 1</span>
00592                 <span class="keywordflow">switch</span> (TableIndex) {
00593 
00594                 <span class="comment">//</span>
00595                 <span class="comment">// Doubleword integers not yet supported</span>
00596                 <span class="comment">//</span>
00597 
00598                   <span class="keywordflow">case</span> <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a1">LD_INDEX_VALUE</a>:
00599                   <span class="keywordflow">case</span> <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a2">STD_INDEX_VALUE</a>:
00600                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00601 
00602                 <span class="comment">//</span>
00603                 <span class="comment">// Load-and-reserve, store-conditional not supported</span>
00604                 <span class="comment">//   for misaligned addresses</span>
00605                 <span class="comment">//</span>
00606 
00607                   <span class="keywordflow">case</span> <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a0">LDARX_INDEX_VALUE</a>:
00608                   <span class="keywordflow">case</span> <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a3">STWCX_INDEX_VALUE</a>:
00609                   <span class="keywordflow">case</span> <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a4">STDCX_INDEX_VALUE</a>:
00610                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00611 
00612                 <span class="comment">//</span>
00613                 <span class="comment">// Integer byte-reversed fullword load</span>
00614                 <span class="comment">//</span>
00615 
00616                   <span class="keywordflow">case</span> <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a5">LWBRX_INDEX_VALUE</a>:
00617                     DataValue[0] = DataAddress[3];
00618                     DataValue[1] = DataAddress[2];
00619                     DataValue[2] = DataAddress[1];
00620                     DataValue[3] = DataAddress[0];
00621                     <a class="code" href="../../d5/d5/alpha_2getsetrg_8c.html#a1">KiSetRegisterValue</a>
00622                         (DataRegNum,
00623                          DataReference.Long,
00624                          ExceptionFrame,
00625                          TrapFrame);
00626                     <span class="keywordflow">break</span>;
00627 
00628                 <span class="comment">//</span>
00629                 <span class="comment">// Integer byte-reversed fullword store</span>
00630                 <span class="comment">//</span>
00631 
00632                   <span class="keywordflow">case</span> <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a6">STWBRX_INDEX_VALUE</a>:
00633                     DataReference.Long =
00634                         <a class="code" href="../../d5/d5/alpha_2getsetrg_8c.html#a0">KiGetRegisterValue</a>
00635                             (DataRegNum,
00636                              ExceptionFrame,
00637                              TrapFrame);
00638                     DataAddress[0] = DataValue[3];
00639                     DataAddress[1] = DataValue[2];
00640                     DataAddress[2] = DataValue[1];
00641                     DataAddress[3] = DataValue[0];
00642                     <span class="keywordflow">break</span>;
00643 
00644                 <span class="comment">//</span>
00645                 <span class="comment">// Integer byte-reversed halfword load</span>
00646                 <span class="comment">//</span>
00647 
00648                   <span class="keywordflow">case</span> <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a7">LHBRX_INDEX_VALUE</a>:
00649                     DataValue[0] = DataAddress[1];
00650                     DataValue[1] = DataAddress[0];
00651                     <a class="code" href="../../d5/d5/alpha_2getsetrg_8c.html#a1">KiSetRegisterValue</a>
00652                         (DataRegNum,
00653                          Info.<a class="code" href="../../d0/d6/struct__ALFAULT.html#o3">Signed</a> ?   <span class="comment">// sign extension ...</span>
00654                              (ULONG) ((LONG) DataReference.Short) :
00655                              (ULONG) ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>) DataReference.Short),
00656                          ExceptionFrame,
00657                          TrapFrame);
00658                     <span class="keywordflow">break</span>;
00659 
00660                 <span class="comment">//</span>
00661                 <span class="comment">// Integer byte-reversed halfword store</span>
00662                 <span class="comment">//</span>
00663 
00664                   <span class="keywordflow">case</span> <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a8">STHBRX_INDEX_VALUE</a>:
00665                     DataReference.Short = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)
00666                         <a class="code" href="../../d5/d5/alpha_2getsetrg_8c.html#a0">KiGetRegisterValue</a>
00667                             (DataRegNum,
00668                              ExceptionFrame,
00669                              TrapFrame);
00670                     DataAddress[0] = DataValue[1];
00671                     DataAddress[1] = DataValue[0];
00672                     <span class="keywordflow">break</span>;
00673 
00674                 <span class="comment">//</span>
00675                 <span class="comment">// Special I/O instructions not supported yet</span>
00676                 <span class="comment">//</span>
00677 
00678                   <span class="keywordflow">case</span> <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a9">ECIWX_INDEX_VALUE</a>:
00679                   <span class="keywordflow">case</span> <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a10">ECOWX_INDEX_VALUE</a>:
00680                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00681 
00682                 <span class="comment">//</span>
00683                 <span class="comment">// Data Cache Block Zero</span>
00684                 <span class="comment">//</span>
00685                 <span class="comment">//   dcbz causes an alignment fault if cache is disabled</span>
00686                 <span class="comment">//   for the address range covered by the block.</span>
00687                 <span class="comment">//</span>
00688                 <span class="comment">//   A data cache block is 32 bytes long, we emulate this</span>
00689                 <span class="comment">//   instruction by storing 8 zero integers a the address</span>
00690                 <span class="comment">//   specified.</span>
00691                 <span class="comment">//</span>
00692                 <span class="comment">//   Note, dcbz zeros the block "containing" the address</span>
00693                 <span class="comment">//   so we round down first.</span>
00694                 <span class="comment">//</span>
00695 
00696                   <span class="keywordflow">case</span> <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a11">DCBZ_INDEX_VALUE</a>: {
00697                     PULONG DcbAddress = (PULONG)((ULONG)DataAddress &amp; ~0x1f);
00698 
00699                     *DcbAddress++ = 0;
00700                     *DcbAddress++ = 0;
00701                     *DcbAddress++ = 0;
00702                     *DcbAddress++ = 0;
00703                     *DcbAddress++ = 0;
00704                     *DcbAddress++ = 0;
00705                     *DcbAddress++ = 0;
00706                     *DcbAddress++ = 0;
00707                     <span class="keywordflow">break</span>;
00708                   }
00709 
00710                 <span class="comment">//</span>
00711                 <span class="comment">// Store Floating as Integer</span>
00712                 <span class="comment">//</span>
00713 
00714                   <span class="keywordflow">case</span> <a class="code" href="../../d7/d5/ppc_2alignem_8c.html#a12">STFIWX_INDEX_VALUE</a>:
00715                     DataReference.Double =
00716                         <a class="code" href="../../d6/d5/ia64_2getsetrg_8c.html#a5">KiGetFloatRegisterValue</a>
00717                             (DataRegNum,
00718                              ExceptionFrame,
00719                              TrapFrame);
00720                     DataAddress[0] = DataValue[0];
00721                     DataAddress[1] = DataValue[1];
00722                     DataAddress[2] = DataValue[2];
00723                     DataAddress[3] = DataValue[3];
00724                 }
00725             }
00726 
00727             TrapFrame-&gt;Iar = BranchAddress;
00728             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00729         }
00730 
00731     <span class="comment">//</span>
00732     <span class="comment">// If an exception occurs, then copy the new exception information to the</span>
00733     <span class="comment">// original exception record and handle the exception.</span>
00734     <span class="comment">//</span>
00735 
00736     } except (<a class="code" href="../../d2/d9/ppc_2exceptn_8c.html#a12">KiCopyInformation</a>(ExceptionRecord,
00737                                (GetExceptionInformation())-&gt;ExceptionRecord)) {
00738 
00739         <span class="comment">//</span>
00740         <span class="comment">// Preserve the original exception address.</span>
00741         <span class="comment">//</span>
00742 
00743         ExceptionRecord-&gt;ExceptionAddress = ExceptionAddress;
00744     }
00745 
00746     <span class="comment">//</span>
00747     <span class="comment">// Return a value of FALSE.</span>
00748     <span class="comment">//</span>
00749 
00750     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00751 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="ppc/alignem.c::KiGetFloatRegisterValue" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DOUBLE KiGetFloatRegisterValue           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN&nbsp;</td>
          <td class="mdname" nowrap> <em>ULONG</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN&nbsp;</td>
          <td class="mdname" nowrap> <em>PKEXCEPTION_FRAME</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN&nbsp;</td>
          <td class="mdname" nowrap> <em>PKTRAP_FRAME</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d4/ppc_2getsetrg_8c-source.html#l00276">276</a> of file <a class="el" href="../../d9/d4/ppc_2getsetrg_8c-source.html">ppc/getsetrg.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/ia64_2getsetrg_8c-source.html#l00684">get_fp_register()</a>, and <a class="el" href="../../d6/d4/ia64_2alignem_8c-source.html#l00166">KiEmulateReference()</a>.
<p>
<pre class="fragment"><div>00284                    :
00285 
00286     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called to get <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> value of a floating point <span class="keyword">register</span> 
00287     from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified exception or trap frame.
00288 
00289 Arguments:
00290 
00291     Register - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">register</span> whose value <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be
00292         returned.  Only FPRs (<span class="keywordtype">float</span> regs) are supported, numbered 0..31.
00293 
00294     ExceptionFrame - Supplies a pointer to an exception frame.
00295 
00296     TrapFrame - Supplies a pointer to a trap frame.
00297 
00298 Return Value:
00299 
00300     The value of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified <span class="keyword">register</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned as <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> function value.
00301 
00302 --*/
00303 
00304 {
00305 
00306     <span class="comment">//</span>
00307     <span class="comment">// Dispatch on the FP register number.</span>
00308     <span class="comment">//</span>
00309 
00310     <span class="keywordflow">switch</span> (Register) {
00311       <span class="keywordflow">case</span> 0:
00312         <span class="keywordflow">return</span> TrapFrame-&gt;Fpr0;
00313       <span class="keywordflow">case</span> 1:
00314             <span class="keywordflow">return</span> TrapFrame-&gt;Fpr1;
00315       <span class="keywordflow">case</span> 2:
00316             <span class="keywordflow">return</span> TrapFrame-&gt;Fpr2;
00317       <span class="keywordflow">case</span> 3:
00318         <span class="keywordflow">return</span> TrapFrame-&gt;Fpr3;
00319       <span class="keywordflow">case</span> 4:
00320         <span class="keywordflow">return</span> TrapFrame-&gt;Fpr4;
00321       <span class="keywordflow">case</span> 5:
00322         <span class="keywordflow">return</span> TrapFrame-&gt;Fpr5;
00323       <span class="keywordflow">case</span> 6:
00324         <span class="keywordflow">return</span> TrapFrame-&gt;Fpr6;
00325       <span class="keywordflow">case</span> 7:
00326         <span class="keywordflow">return</span> TrapFrame-&gt;Fpr7;
00327       <span class="keywordflow">case</span> 8:
00328         <span class="keywordflow">return</span> TrapFrame-&gt;Fpr8;
00329       <span class="keywordflow">case</span> 9:
00330         <span class="keywordflow">return</span> TrapFrame-&gt;Fpr9;
00331       <span class="keywordflow">case</span> 10:
00332         <span class="keywordflow">return</span> TrapFrame-&gt;Fpr10;
00333       <span class="keywordflow">case</span> 11:
00334         <span class="keywordflow">return</span> TrapFrame-&gt;Fpr11;
00335       <span class="keywordflow">case</span> 12:
00336         <span class="keywordflow">return</span> TrapFrame-&gt;Fpr12;
00337       <span class="keywordflow">case</span> 13:
00338             <span class="keywordflow">return</span> TrapFrame-&gt;Fpr13;
00339       <span class="keywordflow">case</span> 14:
00340             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr14;
00341       <span class="keywordflow">case</span> 15:
00342             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr15;
00343       <span class="keywordflow">case</span> 16:
00344             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr16;
00345       <span class="keywordflow">case</span> 17:
00346             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr17;
00347       <span class="keywordflow">case</span> 18:
00348             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr18;
00349       <span class="keywordflow">case</span> 19:
00350             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr19;
00351       <span class="keywordflow">case</span> 20:
00352             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr20;
00353       <span class="keywordflow">case</span> 21:
00354             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr21;
00355       <span class="keywordflow">case</span> 22:
00356             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr22;
00357       <span class="keywordflow">case</span> 23:
00358             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr23;
00359       <span class="keywordflow">case</span> 24:
00360             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr24;
00361       <span class="keywordflow">case</span> 25:
00362             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr25;
00363       <span class="keywordflow">case</span> 26:
00364             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr26;
00365       <span class="keywordflow">case</span> 27:
00366             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr27;
00367       <span class="keywordflow">case</span> 28:
00368             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr28;
00369       <span class="keywordflow">case</span> 29:
00370             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr29;
00371       <span class="keywordflow">case</span> 30:
00372             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr30;
00373       <span class="keywordflow">case</span> 31:
00374             <span class="keywordflow">return</span> ExceptionFrame-&gt;Fpr31;
00375     }
00376 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="ppc/alignem.c::KiSetFloatRegisterValue" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KiSetFloatRegisterValue           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN&nbsp;</td>
          <td class="mdname" nowrap> <em>ULONG</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN&nbsp;</td>
          <td class="mdname" nowrap> <em>DOUBLE</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT&nbsp;</td>
          <td class="mdname" nowrap> <em>PKEXCEPTION_FRAME</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT&nbsp;</td>
          <td class="mdname" nowrap> <em>PKTRAP_FRAME</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d4/ppc_2getsetrg_8c-source.html#l00379">379</a> of file <a class="el" href="../../d9/d4/ppc_2getsetrg_8c-source.html">ppc/getsetrg.c</a>.
<p>
Referenced by <a class="el" href="../../d6/d4/ia64_2alignem_8c-source.html#l00166">KiEmulateReference()</a>, and <a class="el" href="../../d7/d4/ia64_2getsetrg_8c-source.html#l00697">set_fp_register()</a>.
<p>
<pre class="fragment"><div>00388                    :
00389 
00390     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called to set <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> value of a floating point <span class="keyword">register</span> 
00391     in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified exception or trap frame.
00392 
00393 Arguments:
00394 
00395     Register - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">register</span> whose value <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be
00396         stored.  This routine handles <a class="code" href="../../d3/d0/imm32_8def.html#a1">only</a> Fprs (<span class="keywordtype">float</span> regs), numbered 0..31.
00397 
00398     Value - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> value to be stored in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified <span class="keyword">register</span>.
00399 
00400     ExceptionFrame - Supplies a pointer to an exception frame.
00401 
00402     TrapFrame - Supplies a pointer to a trap frame.
00403 
00404 Return Value:
00405 
00406     None.
00407 
00408 --*/
00409 
00410 {
00411 
00412     <span class="comment">//</span>
00413     <span class="comment">// Dispatch on the FP register number.</span>
00414     <span class="comment">//</span>
00415 
00416     <span class="keywordflow">switch</span> (Register) {
00417 
00418       <span class="keywordflow">case</span> 0:
00419         TrapFrame-&gt;Fpr0 = Value;
00420         <span class="keywordflow">return</span>;
00421       <span class="keywordflow">case</span> 1:
00422         TrapFrame-&gt;Fpr1 = Value;
00423         <span class="keywordflow">return</span>;
00424       <span class="keywordflow">case</span> 2:
00425         TrapFrame-&gt;Fpr2 = Value;
00426         <span class="keywordflow">return</span>;
00427       <span class="keywordflow">case</span> 3:
00428         TrapFrame-&gt;Fpr3 = Value;
00429         <span class="keywordflow">return</span>;
00430       <span class="keywordflow">case</span> 4:
00431         TrapFrame-&gt;Fpr4 = Value;
00432         <span class="keywordflow">return</span>;
00433       <span class="keywordflow">case</span> 5:
00434         TrapFrame-&gt;Fpr5 = Value;
00435         <span class="keywordflow">return</span>;
00436       <span class="keywordflow">case</span> 6:
00437         TrapFrame-&gt;Fpr6 = Value;
00438         <span class="keywordflow">return</span>;
00439       <span class="keywordflow">case</span> 7:
00440         TrapFrame-&gt;Fpr7 = Value;
00441         <span class="keywordflow">return</span>;
00442       <span class="keywordflow">case</span> 8:
00443         TrapFrame-&gt;Fpr8 = Value;
00444         <span class="keywordflow">return</span>;
00445       <span class="keywordflow">case</span> 9:
00446         TrapFrame-&gt;Fpr9 = Value;
00447         <span class="keywordflow">return</span>;
00448       <span class="keywordflow">case</span> 10:
00449         TrapFrame-&gt;Fpr10 = Value;
00450         <span class="keywordflow">return</span>;
00451       <span class="keywordflow">case</span> 11:
00452         TrapFrame-&gt;Fpr11 = Value;
00453         <span class="keywordflow">return</span>;
00454       <span class="keywordflow">case</span> 12:
00455         TrapFrame-&gt;Fpr12 = Value;
00456         <span class="keywordflow">return</span>;
00457       <span class="keywordflow">case</span> 13:
00458         TrapFrame-&gt;Fpr13 = Value;
00459         <span class="keywordflow">return</span>;
00460       <span class="keywordflow">case</span> 14:
00461         ExceptionFrame-&gt;Fpr14 = Value;
00462         <span class="keywordflow">return</span>;
00463       <span class="keywordflow">case</span> 15:
00464         ExceptionFrame-&gt;Fpr15 = Value;
00465         <span class="keywordflow">return</span>;
00466       <span class="keywordflow">case</span> 16:
00467         ExceptionFrame-&gt;Fpr16 = Value;
00468         <span class="keywordflow">return</span>;
00469       <span class="keywordflow">case</span> 17:
00470         ExceptionFrame-&gt;Fpr17 = Value;
00471         <span class="keywordflow">return</span>;
00472       <span class="keywordflow">case</span> 18:
00473         ExceptionFrame-&gt;Fpr18 = Value;
00474         <span class="keywordflow">return</span>;
00475       <span class="keywordflow">case</span> 19:
00476         ExceptionFrame-&gt;Fpr19 = Value;
00477         <span class="keywordflow">return</span>;
00478       <span class="keywordflow">case</span> 20:
00479         ExceptionFrame-&gt;Fpr20 = Value;
00480         <span class="keywordflow">return</span>;
00481       <span class="keywordflow">case</span> 21:
00482         ExceptionFrame-&gt;Fpr21 = Value;
00483         <span class="keywordflow">return</span>;
00484       <span class="keywordflow">case</span> 22:
00485         ExceptionFrame-&gt;Fpr22 = Value;
00486         <span class="keywordflow">return</span>;
00487       <span class="keywordflow">case</span> 23:
00488         ExceptionFrame-&gt;Fpr23 = Value;
00489         <span class="keywordflow">return</span>;
00490       <span class="keywordflow">case</span> 24:
00491         ExceptionFrame-&gt;Fpr24 = Value;
00492         <span class="keywordflow">return</span>;
00493       <span class="keywordflow">case</span> 25:
00494         ExceptionFrame-&gt;Fpr25 = Value;
00495         <span class="keywordflow">return</span>;
00496       <span class="keywordflow">case</span> 26:
00497         ExceptionFrame-&gt;Fpr26 = Value;
00498         <span class="keywordflow">return</span>;
00499       <span class="keywordflow">case</span> 27:
00500         ExceptionFrame-&gt;Fpr27 = Value;
00501         <span class="keywordflow">return</span>;
00502       <span class="keywordflow">case</span> 28:
00503         ExceptionFrame-&gt;Fpr28 = Value;
00504         <span class="keywordflow">return</span>;
00505       <span class="keywordflow">case</span> 29:
00506         ExceptionFrame-&gt;Fpr29 = Value;
00507         <span class="keywordflow">return</span>;
00508       <span class="keywordflow">case</span> 30:
00509         ExceptionFrame-&gt;Fpr30 = Value;
00510         <span class="keywordflow">return</span>;
00511       <span class="keywordflow">case</span> 31:
00512         ExceptionFrame-&gt;Fpr31 = Value;
00513         <span class="keywordflow">return</span>;
00514 
00515     }
00516 }
}
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a15" doxytag="ppc/alignem.c::AlFault" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/struct__ALFAULT.html">ALFAULT</a> <a class="el" href="../../d7/d5/ppc_2alignem_8c.html#a15">AlFault</a>[128]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00121">121</a> of file <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html">ppc/alignem.c</a>.
<p>
Referenced by <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00754">KiEmulateDcbz()</a>, and <a class="el" href="../../d8/d4/ppc_2alignem_8c-source.html#l00255">KiEmulateReference()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:42:50 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

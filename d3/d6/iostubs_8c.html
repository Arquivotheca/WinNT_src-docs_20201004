<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: iostubs.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>iostubs.c File Reference</h1><code>#include "<a class="el" href="../../d5/d2/w32_2ntcon_2client_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d4/d5/iostubs_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a0">SCREEN_BUFFER_POINTER</a>(BASE, X, Y, XSIZE, CELLSIZE)&nbsp;&nbsp;&nbsp;((ULONG_PTR)BASE + ((XSIZE * (Y)) + (X)) * (ULONG)CELLSIZE)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a1">GetConsoleInput</a> (IN HANDLE hConsoleInput, OUT PINPUT_RECORD lpBuffer, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, OUT LPDWORD lpNumberOfEventsRead, IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> wFlags, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a2">PeekConsoleInputA</a> (HANDLE hConsoleInput, PINPUT_RECORD lpBuffer, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, LPDWORD lpNumberOfEventsRead)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW6432)  <a href="#a2"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a3">PeekConsoleInputW</a> (HANDLE hConsoleInput, PINPUT_RECORD lpBuffer, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, LPDWORD lpNumberOfEventsRead)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a4">ReadConsoleInputA</a> (HANDLE hConsoleInput, PINPUT_RECORD lpBuffer, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, LPDWORD lpNumberOfEventsRead)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a5">ReadConsoleInputW</a> (HANDLE hConsoleInput, PINPUT_RECORD lpBuffer, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, LPDWORD lpNumberOfEventsRead)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a6">ReadConsoleInputExA</a> (HANDLE hConsoleInput, PINPUT_RECORD lpBuffer, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, LPDWORD lpNumberOfEventsRead, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> wFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a7">ReadConsoleInputExW</a> (HANDLE hConsoleInput, PINPUT_RECORD lpBuffer, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, LPDWORD lpNumberOfEventsRead, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> wFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a8">WriteConsoleInputInternal</a> (IN HANDLE hConsoleInput, IN CONST INPUT_RECORD *lpBuffer, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, OUT LPDWORD lpNumberOfEventsWritten, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>, IN BOOLEAN Append)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a8"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a9">WriteConsoleInputA</a> (HANDLE hConsoleInput, CONST INPUT_RECORD *lpBuffer, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, LPDWORD lpNumberOfEventsWritten)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW6432)  <a href="#a9"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a10">WriteConsoleInputW</a> (HANDLE hConsoleInput, CONST INPUT_RECORD *lpBuffer, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, LPDWORD lpNumberOfEventsWritten)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a11">CopyRectangle</a> (IN CONST CHAR_INFO *Source, IN COORD SourceSize, IN PSMALL_RECT SourceRect, OUT PCHAR_INFO Target, IN COORD TargetSize, IN COORD TargetPoint)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a11"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a12">ReadConsoleOutputInternal</a> (IN HANDLE hConsoleOutput, OUT PCHAR_INFO lpBuffer, IN COORD dwBufferSize, IN COORD dwBufferCoord, IN OUT PSMALL_RECT lpReadRegion, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a13">ReadConsoleOutputW</a> (HANDLE hConsoleOutput, PCHAR_INFO lpBuffer, COORD dwBufferSize, COORD dwBufferCoord, PSMALL_RECT lpReadRegion)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW6432)  <a href="#a13"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a14">ReadConsoleOutputA</a> (HANDLE hConsoleOutput, PCHAR_INFO lpBuffer, COORD dwBufferSize, COORD dwBufferCoord, PSMALL_RECT lpReadRegion)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a15">WriteConsoleOutputInternal</a> (IN HANDLE hConsoleOutput, IN CONST CHAR_INFO *lpBuffer, IN COORD dwBufferSize, IN COORD dwBufferCoord, IN PSMALL_RECT lpWriteRegion, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a15"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a16">WriteConsoleOutputW</a> (HANDLE hConsoleOutput, CONST CHAR_INFO *lpBuffer, COORD dwBufferSize, COORD dwBufferCoord, PSMALL_RECT lpWriteRegion)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW6432)  <a href="#a16"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a17">WriteConsoleOutputA</a> (HANDLE hConsoleOutput, CONST CHAR_INFO *lpBuffer, COORD dwBufferSize, COORD dwBufferCoord, PSMALL_RECT lpWriteRegion)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a18">ReadConsoleOutputString</a> (IN HANDLE hConsoleOutput, OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> lpString, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nSize, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fFlags, IN COORD dwReadCoord, OUT LPDWORD lpNumberOfElementsRead)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a19">ReadConsoleOutputCharacterA</a> (HANDLE hConsoleOutput, LPSTR lpCharacter, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, COORD dwReadCoord, LPDWORD lpNumberOfCharsRead)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW6432)  <a href="#a19"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a20">ReadConsoleOutputCharacterW</a> (HANDLE hConsoleOutput, LPWSTR lpCharacter, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, COORD dwReadCoord, LPDWORD lpNumberOfCharsRead)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a21">ReadConsoleOutputAttribute</a> (HANDLE hConsoleOutput, LPWORD lpAttribute, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, COORD dwReadCoord, LPDWORD lpNumberOfAttrsRead)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a22">WriteConsoleOutputString</a> (IN HANDLE hConsoleOutput, IN CONST VOID *lpString, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nSize, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fFlags, IN COORD dwWriteCoord, OUT LPDWORD lpNumberOfElementsWritten)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a22"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a23">WriteConsoleOutputCharacterA</a> (HANDLE hConsoleOutput, LPCSTR lpCharacter, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, COORD dwWriteCoord, LPDWORD lpNumberOfCharsWritten)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW6432)  <a href="#a23"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a24">WriteConsoleOutputCharacterW</a> (HANDLE hConsoleOutput, LPCWSTR lpCharacter, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, COORD dwWriteCoord, LPDWORD lpNumberOfCharsWritten)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a25">WriteConsoleOutputAttribute</a> (HANDLE hConsoleOutput, CONST WORD *lpAttribute, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, COORD dwWriteCoord, LPDWORD lpNumberOfAttrsWritten)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a26">FillConsoleOutput</a> (IN HANDLE hConsoleOutput, IN WORD Element, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fFlags, IN COORD dwWriteCoord, OUT LPDWORD lpNumberOfElementsWritten)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a26"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a27">FillConsoleOutputCharacterA</a> (HANDLE hConsoleOutput, <a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a> cCharacter, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, COORD dwWriteCoord, LPDWORD lpNumberOfCharsWritten)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW6432)  <a href="#a27"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a28">FillConsoleOutputCharacterW</a> (HANDLE hConsoleOutput, WCHAR cCharacter, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, COORD dwWriteCoord, LPDWORD lpNumberOfCharsWritten)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a29">FillConsoleOutputAttribute</a> (HANDLE hConsoleOutput, WORD wAttribute, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, COORD dwWriteCoord, LPDWORD lpNumberOfAttrsWritten)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a30">CreateConsoleScreenBuffer</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwDesiredAccess, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwShareMode, IN CONST SECURITY_ATTRIBUTES *lpSecurityAttributes, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, IN PVOID lpScreenBufferData OPTIONAL)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a30"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d6/iostubs_8c.html#a31">InvalidateConsoleDIBits</a> (IN HANDLE hConsoleOutput, IN PSMALL_RECT lpRect)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="iostubs.c::SCREEN_BUFFER_POINTER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SCREEN_BUFFER_POINTER          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">BASE,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>X,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>Y,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>XSIZE,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CELLSIZE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((ULONG_PTR)BASE + ((XSIZE * (Y)) + (X)) * (ULONG)CELLSIZE)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00472">CopyRectangle()</a>, <a class="el" href="../../d0/d2/__priv_8h-source.html#l00041">FE_WriteRegionToScreenHW()</a>, <a class="el" href="../../d7/d7/fsvga_8c-source.html#l01349">FsVgaCopyFrameBuffer()</a>, <a class="el" href="../../d7/d7/fsvga_8c-source.html#l01546">FsVgaReverseMousePointer()</a>, <a class="el" href="../../d7/d7/fsvga_8c-source.html#l01429">FsVgaWriteToFrameBuffer()</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l01415">ReadRectFromScreenBuffer()</a>, and <a class="el" href="../../d9/d1/__output_8h-source.html#l00187">WWSB_WriteRectToScreenBuffer()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a11" doxytag="iostubs.c::CopyRectangle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CopyRectangle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN CONST CHAR_INFO *&nbsp;</td>
          <td class="mdname" nowrap> <em>Source</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>SourceSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSMALL_RECT&nbsp;</td>
          <td class="mdname" nowrap> <em>SourceRect</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCHAR_INFO&nbsp;</td>
          <td class="mdname" nowrap> <em>Target</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>TargetSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>TargetPoint</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00472">472</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00058">CONSOLE_RECT_SIZE_X</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00059">CONSOLE_RECT_SIZE_Y</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d6/iostubs_8c.html#a0">SCREEN_BUFFER_POINTER</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00483                    :
00484 
00485     This routine copies a rectangular region, doing any necessary clipping.
00486 
00487 Arguments:
00488 
00489     Source - pointer to source buffer
00490 
00491     SourceSize - dimensions of source buffer
00492 
00493     SourceRect - rectangle in source buffer to copy
00494 
00495     Target - pointer to target buffer
00496 
00497     TargetSize - dimensions of target buffer
00498 
00499     TargetPoint - upper left coordinates of target rectangle
00500 
00501 Return Value:
00502 
00503 
00504 --*/
00505 
00506 {
00507 
00508 <span class="preprocessor">#define SCREEN_BUFFER_POINTER(BASE,X,Y,XSIZE,CELLSIZE) ((ULONG_PTR)BASE + ((XSIZE * (Y)) + (X)) * (ULONG)CELLSIZE)</span>
00509 <span class="preprocessor"></span>
00510     CONST CHAR_INFO *SourcePtr;
00511     PCHAR_INFO TargetPtr;
00512     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a> i,j;
00513     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a> XSize,YSize;
00514     BOOLEAN WholeSource,WholeTarget;
00515 
00516     XSize = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)<a class="code" href="../../d6/d4/condll_8h.html#a7">CONSOLE_RECT_SIZE_X</a>(SourceRect);
00517     YSize = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)<a class="code" href="../../d6/d4/condll_8h.html#a8">CONSOLE_RECT_SIZE_Y</a>(SourceRect);
00518 
00519     <span class="comment">// do clipping.  we only clip for target, not source.</span>
00520 
00521     <span class="keywordflow">if</span> (XSize &gt; (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(TargetSize.X - TargetPoint.X + 1)) {
00522         XSize = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(TargetSize.X - TargetPoint.X + 1);
00523     }
00524     <span class="keywordflow">if</span> (YSize &gt; (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(TargetSize.Y - TargetPoint.Y + 1)) {
00525         YSize = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(TargetSize.Y - TargetPoint.Y + 1);
00526     }
00527 
00528     WholeSource = WholeTarget = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00529     <span class="keywordflow">if</span> (XSize == SourceSize.X) {
00530         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a> (SourceRect-&gt;Left == 0);
00531         <span class="keywordflow">if</span> (SourceRect-&gt;Top == 0) {
00532             SourcePtr = Source;
00533         }
00534         <span class="keywordflow">else</span> {
00535             SourcePtr = (PCHAR_INFO) <a class="code" href="../../d3/d6/iostubs_8c.html#a0">SCREEN_BUFFER_POINTER</a>(Source,
00536                                                            SourceRect-&gt;Left,
00537                                                            SourceRect-&gt;Top,
00538                                                            SourceSize.X,
00539                                                            <span class="keyword">sizeof</span>(CHAR_INFO));
00540         }
00541         WholeSource = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00542     }
00543     <span class="keywordflow">if</span> (XSize == TargetSize.X) {
00544         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a> (TargetPoint.X == 0);
00545         <span class="keywordflow">if</span> (TargetPoint.Y == 0) {
00546             TargetPtr = Target;
00547         }
00548         <span class="keywordflow">else</span> {
00549             TargetPtr = (PCHAR_INFO) <a class="code" href="../../d3/d6/iostubs_8c.html#a0">SCREEN_BUFFER_POINTER</a>(Target,
00550                                                            TargetPoint.X,
00551                                                            TargetPoint.Y,
00552                                                            TargetSize.X,
00553                                                            <span class="keyword">sizeof</span>(CHAR_INFO));
00554         }
00555         WholeTarget = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00556     }
00557     <span class="keywordflow">if</span> (WholeSource &amp;&amp; WholeTarget) {
00558         memmove(TargetPtr,SourcePtr,XSize*YSize*<span class="keyword">sizeof</span>(CHAR_INFO));
00559         <span class="keywordflow">return</span>;
00560     }
00561 
00562     <span class="keywordflow">for</span> (i=0;i&lt;YSize;i++) {
00563         <span class="keywordflow">if</span> (!WholeTarget) {
00564             TargetPtr = (PCHAR_INFO) <a class="code" href="../../d3/d6/iostubs_8c.html#a0">SCREEN_BUFFER_POINTER</a>(Target,
00565                                                            TargetPoint.X,
00566                                                            TargetPoint.Y+i,
00567                                                            TargetSize.X,
00568                                                            <span class="keyword">sizeof</span>(CHAR_INFO));
00569         }
00570         <span class="keywordflow">if</span> (!WholeSource) {
00571             SourcePtr = (PCHAR_INFO) <a class="code" href="../../d3/d6/iostubs_8c.html#a0">SCREEN_BUFFER_POINTER</a>(Source,
00572                                                            SourceRect-&gt;Left,
00573                                                            SourceRect-&gt;Top+i,
00574                                                            SourceSize.X,
00575                                                            <span class="keyword">sizeof</span>(CHAR_INFO));
00576         }
00577         <span class="keywordflow">for</span> (j=0;j&lt;XSize;j++,SourcePtr++,TargetPtr++) {
00578             *TargetPtr = *SourcePtr;
00579         }
00580     }
00581 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="iostubs.c::CreateConsoleScreenBuffer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE WINAPI CreateConsoleScreenBuffer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwDesiredAccess</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwShareMode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST SECURITY_ATTRIBUTES *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpSecurityAttributes</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID lpScreenBufferData&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01666">1666</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d8/d1/output_8h-source.html#l00149">CONSOLE_GRAPHICS_BUFFER</a>, <a class="el" href="../../d8/d1/output_8h-source.html#l00148">CONSOLE_TEXTMODE_BUFFER</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00203">_CONSOLE_CREATESCREENBUFFER_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a203">ConsolepCreateScreenBuffer</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00204">_CONSOLE_CREATESCREENBUFFER_MSG::DesiredAccess</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00207">_CONSOLE_CREATESCREENBUFFER_MSG::Flags</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00208">_CONSOLE_CREATESCREENBUFFER_MSG::GraphicsBufferInfo</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00205">_CONSOLE_CREATESCREENBUFFER_MSG::InheritHandle</a>, <a class="el" href="../../d6/d3/rxact_8c-source.html#l00212">INVALID_HANDLE_VALUE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00206">_CONSOLE_CREATESCREENBUFFER_MSG::ShareMode</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00053">VALID_ACCESSES</a>, and <a class="el" href="../../d7/d3/condll_8h-source.html#l00054">VALID_SHARE_ACCESSES</a>.
<p>
Referenced by <a class="el" href="../../d1/d0/tgraph_8c-source.html#l00093">main()</a>.
<p>
<pre class="fragment"><div>01673 {
01674     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
01675     <a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html">PCONSOLE_CREATESCREENBUFFER_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.CreateConsoleScreenBuffer;
01676     PCONSOLE_GRAPHICS_BUFFER_INFO GraphicsBufferInfo;
01677     PCSR_CAPTURE_HEADER CaptureBuffer=<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01678 
01679     <span class="keywordflow">if</span> (dwDesiredAccess &amp; ~<a class="code" href="../../d6/d4/condll_8h.html#a4">VALID_ACCESSES</a> ||
01680         dwShareMode &amp; ~<a class="code" href="../../d6/d4/condll_8h.html#a5">VALID_SHARE_ACCESSES</a> ||
01681         (<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> != <a class="code" href="../../d7/d2/output_8h.html#a0">CONSOLE_TEXTMODE_BUFFER</a> &amp;&amp;
01682          <a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> != <a class="code" href="../../d7/d2/output_8h.html#a1">CONSOLE_GRAPHICS_BUFFER</a>)) {
01683         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_PARAMETER);
01684         <span class="keywordflow">return</span> (HANDLE) <a class="code" href="../../d5/d4/rxact_8c.html#a0">INVALID_HANDLE_VALUE</a>;
01685     }
01686     a-&gt;<a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
01687     a-&gt;<a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html#o1">DesiredAccess</a> = dwDesiredAccess;
01688     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(lpSecurityAttributes)) {
01689         a-&gt;<a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html#o2">InheritHandle</a> = lpSecurityAttributes-&gt;bInheritHandle;
01690     }
01691     <span class="keywordflow">else</span> {
01692         a-&gt;<a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html#o2">InheritHandle</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01693     }
01694     a-&gt;<a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html#o3">ShareMode</a> = dwShareMode;
01695     a-&gt;<a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html#o4">Flags</a> = <a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>;
01696     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> == <a class="code" href="../../d7/d2/output_8h.html#a1">CONSOLE_GRAPHICS_BUFFER</a>) {
01697         <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html#o2">InheritHandle</a> || lpScreenBufferData == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01698             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_PARAMETER);
01699             <span class="keywordflow">return</span> (HANDLE) <a class="code" href="../../d5/d4/rxact_8c.html#a0">INVALID_HANDLE_VALUE</a>;
01700         }
01701         GraphicsBufferInfo = lpScreenBufferData;
01702         <span class="keywordflow">try</span> {
01703             a-&gt;<a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html#o5">GraphicsBufferInfo</a> = *GraphicsBufferInfo;
01704             CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
01705                                                       a-&gt;<a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html#o5">GraphicsBufferInfo</a>.dwBitMapInfoLength
01706                                                     );
01707             <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01708                 <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
01709                 <span class="keywordflow">return</span> (HANDLE) <a class="code" href="../../d5/d4/rxact_8c.html#a0">INVALID_HANDLE_VALUE</a>;
01710             }
01711             <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
01712                                      (PCHAR) GraphicsBufferInfo-&gt;lpBitMapInfo,
01713                                      a-&gt;<a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html#o5">GraphicsBufferInfo</a>.dwBitMapInfoLength,
01714                                      (PVOID *) &amp;a-&gt;<a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html#o5">GraphicsBufferInfo</a>.lpBitMapInfo
01715                                    );
01716 
01717         } except( EXCEPTION_EXECUTE_HANDLER ) {
01718             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
01719             <span class="keywordflow">return</span> (HANDLE) <a class="code" href="../../d5/d4/rxact_8c.html#a0">INVALID_HANDLE_VALUE</a>;
01720         }
01721     }
01722     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
01723                          CaptureBuffer,
01724                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
01725                                               ConsolepCreateScreenBuffer
01726                                             ),
01727                          <span class="keyword">sizeof</span>( *a )
01728                        );
01729     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01730         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
01731     }
01732     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue)) {
01733         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
01734         <span class="keywordflow">return</span> (HANDLE) <a class="code" href="../../d5/d4/rxact_8c.html#a0">INVALID_HANDLE_VALUE</a>;
01735     }
01736     <span class="keywordflow">else</span> {
01737         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> == <a class="code" href="../../d7/d2/output_8h.html#a1">CONSOLE_GRAPHICS_BUFFER</a>) {
01738             <span class="keywordflow">try</span> {
01739                 GraphicsBufferInfo-&gt;hMutex = a-&gt;<a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html#o6">hMutex</a>;
01740                 GraphicsBufferInfo-&gt;lpBitMap = a-&gt;<a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html#o7">lpBitmap</a>;
01741             } except( EXCEPTION_EXECUTE_HANDLER ) {
01742                 <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
01743                 <span class="keywordflow">return</span> (HANDLE) <a class="code" href="../../d5/d4/rxact_8c.html#a0">INVALID_HANDLE_VALUE</a>;
01744             }
01745         }
01746         <span class="keywordflow">return</span> a-&gt;<a class="code" href="../../d8/d9/struct__CONSOLE__CREATESCREENBUFFER__MSG.html#o8">Handle</a>;
01747     }
01748 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="iostubs.c::FillConsoleOutput" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY FillConsoleOutput           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>Element</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwWriteCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfElementsWritten</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01448">1448</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00295">_CONSOLE_FILLCONSOLEOUTPUT_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a170">ConsolepFillConsoleOutput</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00299">_CONSOLE_FILLCONSOLEOUTPUT_MSG::Element</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00298">_CONSOLE_FILLCONSOLEOUTPUT_MSG::ElementType</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00300">_CONSOLE_FILLCONSOLEOUTPUT_MSG::Length</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00296">_CONSOLE_FILLCONSOLEOUTPUT_MSG::OutputHandle</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00297">_CONSOLE_FILLCONSOLEOUTPUT_MSG::WriteCoord</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01616">FillConsoleOutputAttribute()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01524">FillConsoleOutputCharacterA()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01570">FillConsoleOutputCharacterW()</a>.
<p>
<pre class="fragment"><div>01459           :
01460 
01461     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
01462         that is to be written.  The handle must have been created with
01463         GENERIC_WRITE access.
01464 
01465     Element - The attribute or character to write.
01466 
01467     nLength - Number of times to write the element.
01468 
01469     fFlags - flag indicating what type of element to write.
01470 
01471     dwWriteCoord - Screen buffer coordinates to write the element to.
01472 
01473     lpNumberOfElementsWritten - Pointer to number of elements written.
01474 
01475 Return Value:
01476 
01477     TRUE - The operation was successful.
01478 
01479     FALSE/NULL - The operation failed.
01480         Extended error status is available using GetLastError.
01481 
01482 --*/
01483 
01484 {
01485 
01486     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
01487     <a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html">PCONSOLE_FILLCONSOLEOUTPUT_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.FillConsoleOutput;
01488 
01489     a-&gt;<a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
01490     a-&gt;<a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html#o1">OutputHandle</a> = hConsoleOutput;
01491     a-&gt;<a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html#o5">Length</a> = nLength;
01492     a-&gt;<a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html#o3">ElementType</a> = fFlags;
01493     a-&gt;<a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html#o4">Element</a> = Element;
01494     a-&gt;<a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html#o2">WriteCoord</a> = dwWriteCoord;
01495     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
01496                          NULL,
01497                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
01498                                               ConsolepFillConsoleOutput
01499                                             ),
01500                          <span class="keyword">sizeof</span>( *a )
01501                        );
01502     <span class="keywordflow">try</span> {
01503         *lpNumberOfElementsWritten = a-&gt;<a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html#o5">Length</a>;
01504     } except( EXCEPTION_EXECUTE_HANDLER ) {
01505         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
01506         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01507     }
01508     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(m.ReturnValue)) {
01509         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
01510         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01511     }
01512     <span class="keywordflow">else</span> {
01513         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01514     }
01515 
01516 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="iostubs.c::FillConsoleOutputAttribute" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY FillConsoleOutputAttribute           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>wAttribute</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwWriteCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfAttrsWritten</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01616">1616</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00271">CONSOLE_ATTRIBUTE</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01448">FillConsoleOutput()</a>.
<p>
<pre class="fragment"><div>01626           :
01627 
01628     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
01629         that is to be written.  The handle must have been created with
01630         GENERIC_WRITE access.
01631 
01632     wAttribute - Supplies the attribute to write to the screen buffer.
01633 
01634     nLength - Number of times to write the attribute.
01635 
01636     dwWriteCoord - Screen buffer coordinates to begin writing the attribute
01637         to.
01638 
01639     lpNumberOfAttrsWritten - Pointer to number of attrs written.
01640 
01641 Return Value:
01642 
01643     TRUE - The operation was successful.
01644 
01645     FALSE/NULL - The operation failed.
01646         Extended error status is available using GetLastError.
01647 
01648 --*/
01649 
01650 {
01651     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a26">FillConsoleOutput</a>(hConsoleOutput,
01652                              wAttribute,
01653                              nLength,
01654                              CONSOLE_ATTRIBUTE,
01655                              dwWriteCoord,
01656                              lpNumberOfAttrsWritten
01657                             );
01658 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="iostubs.c::FillConsoleOutputCharacterA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY FillConsoleOutputCharacterA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a8">CHAR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cCharacter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwWriteCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfCharsWritten</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW6432) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01524">1524</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00269">CONSOLE_ASCII</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01448">FillConsoleOutput()</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>01534           :
01535 
01536     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
01537         that is to be written.  The handle must have been created with
01538         GENERIC_WRITE access.
01539 
01540     cCharacter - Supplies the ASCII character to write to the screen buffer.
01541 
01542     nLength - Number of times to write the character.
01543 
01544     dwWriteCoord - Screen buffer coordinates to begin writing the character
01545         to.
01546 
01547     lpNumberOfCharsWritten - Pointer to number of chars written.
01548 
01549 Return Value:
01550 
01551     TRUE - The operation was successful.
01552 
01553     FALSE/NULL - The operation failed.
01554         Extended error status is available using GetLastError.
01555 
01556 --*/
01557 
01558 {
01559     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a26">FillConsoleOutput</a>(hConsoleOutput,
01560                              (USHORT) cCharacter,
01561                              nLength,
01562                              CONSOLE_ASCII,
01563                              dwWriteCoord,
01564                              lpNumberOfCharsWritten
01565                             );
01566 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="iostubs.c::FillConsoleOutputCharacterW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY FillConsoleOutputCharacterW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>cCharacter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwWriteCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfCharsWritten</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01570">1570</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00270">CONSOLE_REAL_UNICODE</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01448">FillConsoleOutput()</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>01580           :
01581 
01582     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
01583         that is to be written.  The handle must have been created with
01584         GENERIC_WRITE access.
01585 
01586     cCharacter - Supplies the ASCII character to write to the screen buffer.
01587 
01588     nLength - Number of times to write the character.
01589 
01590     dwWriteCoord - Screen buffer coordinates to begin writing the character
01591         to.
01592 
01593     lpNumberOfCharsWritten - Pointer to number of chars written.
01594 
01595 Return Value:
01596 
01597     TRUE - The operation was successful.
01598 
01599     FALSE/NULL - The operation failed.
01600         Extended error status is available using GetLastError.
01601 
01602 --*/
01603 
01604 {
01605     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a26">FillConsoleOutput</a>(hConsoleOutput,
01606                              (USHORT) cCharacter,
01607                              nLength,
01608                              CONSOLE_REAL_UNICODE,
01609                              dwWriteCoord,
01610                              lpNumberOfCharsWritten
01611                             );
01612 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="iostubs.c::GetConsoleInput" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY GetConsoleInput           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PINPUT_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfEventsRead</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>wFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">29</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00229">_CONSOLE_GETCONSOLEINPUT_MSG::BufPtr</a>, <a class="el" href="../../d6/d4/rdwr_8c-source.html#l00044">CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00226">_CONSOLE_GETCONSOLEINPUT_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a164">ConsolepGetConsoleInput</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00231">_CONSOLE_GETCONSOLEINPUT_MSG::Flags</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00223">INPUT_RECORD_BUFFER_SIZE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00227">_CONSOLE_GETCONSOLEINPUT_MSG::InputHandle</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00230">_CONSOLE_GETCONSOLEINPUT_MSG::NumRecords</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00228">_CONSOLE_GETCONSOLEINPUT_MSG::Record</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00232">_CONSOLE_GETCONSOLEINPUT_MSG::Unicode</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00150">PeekConsoleInputA()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00168">PeekConsoleInputW()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00209">ReadConsoleInputA()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00268">ReadConsoleInputExA()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00287">ReadConsoleInputExW()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00227">ReadConsoleInputW()</a>.
<p>
<pre class="fragment"><div>00040           :
00041 
00042     hConsoleInput - Supplies an open handle to CONIN$ that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be
00043         read.  The handle must have been created with GENERIC_READ access.
00044 
00045     lpBuffer - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of a buffer to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data read
00046         from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer.
00047 
00048     nLength - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of lpBuffer in INPUT_RECORDs.
00049 
00050     lpNumberOfEventsRead - Pointer to number of events read.
00051 
00052     wFlags - Flags that <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a58">control</a> how data <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> read.
00053 
00054 Return Value:
00055 
00056     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - The operation was successful.
00057 
00058     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>/<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - The operation failed.
00059         Extended error status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available <span class="keyword">using</span> GetLastError.
00060 
00061 --*/
00062 
00063 {
00064     PCSR_CAPTURE_HEADER CaptureBuffer;
00065     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00066     <a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html">PCONSOLE_GETCONSOLEINPUT_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetConsoleInput;
00067 
00068     <span class="comment">//</span>
00069     <span class="comment">// If it's not a well formed handle, don't bother going to the server.</span>
00070     <span class="comment">//</span>
00071 
00072     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d5/rdwr_8c.html#a8">CONSOLE_HANDLE</a>(hConsoleInput)) {
00073         <span class="keywordflow">try</span> {
00074             *lpNumberOfEventsRead = 0;
00075             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_HANDLE);
00076         } except( EXCEPTION_EXECUTE_HANDLER ) {
00077             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00078         }
00079         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00080     }
00081 
00082     a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00083     a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o1">InputHandle</a> = hConsoleInput;
00084     a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o4">NumRecords</a> = nLength;
00085     a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o5">Flags</a> = wFlags;
00086     a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o6">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00087 
00088     <span class="comment">//</span>
00089     <span class="comment">// for speed in the case where we're only reading a few records, we have</span>
00090     <span class="comment">// a buffer in the msg we pass to the server. this means we don't have to</span>
00091     <span class="comment">// allocate a capture buffer.</span>
00092     <span class="comment">//</span>
00093 
00094     <span class="keywordflow">if</span> (nLength &gt; <a class="code" href="../../d5/d5/conmsg_8h.html#a7">INPUT_RECORD_BUFFER_SIZE</a>) {
00095         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00096                                                   nLength * <span class="keyword">sizeof</span>(INPUT_RECORD)
00097                                                 );
00098         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00099             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00100             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00101         }
00102         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00103                                  NULL,
00104                                  nLength * <span class="keyword">sizeof</span>(INPUT_RECORD),
00105                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o3">BufPtr</a>
00106                                );
00107 
00108     } <span class="keywordflow">else</span> {
00109         a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o3">BufPtr</a> = a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o2">Record</a>;
00110         CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00111     }
00112     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00113                          CaptureBuffer,
00114                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00115                                               ConsolepGetConsoleInput
00116                                             ),
00117                          <span class="keyword">sizeof</span>( *a )
00118                        );
00119 
00120     <span class="keywordflow">try</span> {
00121         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00122             *lpNumberOfEventsRead = a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o4">NumRecords</a>;
00123             RtlCopyMemory(lpBuffer, a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o3">BufPtr</a>, a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o4">NumRecords</a> * <span class="keyword">sizeof</span>(INPUT_RECORD));
00124         }
00125         <span class="keywordflow">else</span> {
00126             *lpNumberOfEventsRead = 0;
00127             <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00128         }
00129     } except( EXCEPTION_EXECUTE_HANDLER ) {
00130         <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00131             <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00132         }
00133         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00134         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00135     }
00136     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00137         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00138     }
00139 
00140     <span class="keywordflow">return</span> <a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(m.ReturnValue);
00141 
00142 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="iostubs.c::InvalidateConsoleDIBits" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI InvalidateConsoleDIBits           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSMALL_RECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpRect</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01752">1752</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00626">_CONSOLE_INVALIDATERECT_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a204">ConsolepInvalidateBitmapRect</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00627">_CONSOLE_INVALIDATERECT_MSG::OutputHandle</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00628">_CONSOLE_INVALIDATERECT_MSG::Rect</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>.
<p>
Referenced by <a class="el" href="../../d1/d0/tgraph_8c-source.html#l00093">main()</a>.
<p>
<pre class="fragment"><div>01759           :
01760 
01761     hConsoleHandle - Supplies a console input or output handle.
01762 
01763     lpRect - <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> region that needs to be updated to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen.
01764 
01765 Return Value:
01766 
01767     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - The operation was successful.
01768 
01769     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>/<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - The operation failed. Extended error status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available
01770         <span class="keyword">using</span> GetLastError.
01771 
01772 
01773 --*/
01774 
01775 {
01776     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
01777     <a class="code" href="../../d2/d3/struct__CONSOLE__INVALIDATERECT__MSG.html">PCONSOLE_INVALIDATERECT_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.InvalidateConsoleBitmapRect;
01778 
01779     a-&gt;<a class="code" href="../../d2/d3/struct__CONSOLE__INVALIDATERECT__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
01780     a-&gt;<a class="code" href="../../d2/d3/struct__CONSOLE__INVALIDATERECT__MSG.html#o1">OutputHandle</a> = hConsoleOutput;
01781     <span class="keywordflow">try</span> {
01782         a-&gt;<a class="code" href="../../d2/d3/struct__CONSOLE__INVALIDATERECT__MSG.html#o2">Rect</a> = *lpRect;
01783     } except( EXCEPTION_EXECUTE_HANDLER ) {
01784         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
01785         <span class="keywordflow">return</span> ERROR_INVALID_ACCESS;
01786     }
01787     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
01788                          NULL,
01789                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
01790                                               ConsolepInvalidateBitmapRect
01791                                             ),
01792                          <span class="keyword">sizeof</span>( *a )
01793                        );
01794     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
01795         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01796     } <span class="keywordflow">else</span> {
01797         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a> (m.ReturnValue);
01798         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01799     }
01800 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="iostubs.c::PeekConsoleInputA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY PeekConsoleInputA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PINPUT_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfEventsRead</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW6432) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00150">150</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">GetConsoleInput()</a>.
<p>
<pre class="fragment"><div>00157 {
00158     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a1">GetConsoleInput</a>(hConsoleInput,
00159                            lpBuffer,
00160                            nLength,
00161                            lpNumberOfEventsRead,
00162                            CONSOLE_READ_NOREMOVE | CONSOLE_READ_NOWAIT,
00163                            FALSE);
00164 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="iostubs.c::PeekConsoleInputW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY PeekConsoleInputW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PINPUT_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfEventsRead</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00168">168</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">GetConsoleInput()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00177           :
00178 
00179     hConsoleInput - Supplies an open handle to CONIN$ that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be
00180         read.  The handle must have been created with GENERIC_READ access.
00181 
00182     lpBuffer - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of a buffer to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data read
00183         from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer.
00184 
00185     nLength - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of lpBuffer in INPUT_RECORDs.
00186 
00187     lpNumberOfEventsRead - Pointer to number of events read.
00188 
00189 Return Value:
00190 
00191     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - The operation was successful.
00192 
00193     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>/<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - The operation failed.
00194         Extended error status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available <span class="keyword">using</span> GetLastError.
00195 
00196 --*/
00197 
00198 {
00199     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a1">GetConsoleInput</a>(hConsoleInput,
00200                            lpBuffer,
00201                            nLength,
00202                            lpNumberOfEventsRead,
00203                            CONSOLE_READ_NOREMOVE | CONSOLE_READ_NOWAIT,
00204                            TRUE);
00205 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="iostubs.c::ReadConsoleInputA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ReadConsoleInputA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PINPUT_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfEventsRead</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00209">209</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">GetConsoleInput()</a>.
<p>
<pre class="fragment"><div>00216 {
00217     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a1">GetConsoleInput</a>(hConsoleInput,
00218                            lpBuffer,
00219                            nLength,
00220                            lpNumberOfEventsRead,
00221                            0,
00222                            FALSE);
00223 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="iostubs.c::ReadConsoleInputExA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ReadConsoleInputExA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PINPUT_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfEventsRead</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>wFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00268">268</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">GetConsoleInput()</a>.
<p>
<pre class="fragment"><div>00276 {
00277     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a1">GetConsoleInput</a>(hConsoleInput,
00278                            lpBuffer,
00279                            nLength,
00280                            lpNumberOfEventsRead,
00281                            wFlags,
00282                            FALSE);
00283 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="iostubs.c::ReadConsoleInputExW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ReadConsoleInputExW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PINPUT_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfEventsRead</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>wFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00287">287</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">GetConsoleInput()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00297           :
00298 
00299     hConsoleInput - Supplies an open handle to CONIN$ that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be
00300         read.  The handle must have been created with GENERIC_READ access.
00301 
00302     lpBuffer - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of a buffer to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data read
00303         from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer.
00304 
00305     nLength - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of lpBuffer in INPUT_RECORDs.
00306 
00307     lpNumberOfEventsRead - Pointer to number of events read.
00308 
00309     wFlags - Flags that <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a58">control</a> how data <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> read.
00310 
00311 Return Value:
00312 
00313     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - The operation was successful.
00314 
00315     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>/<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - The operation failed.
00316         Extended error status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available <span class="keyword">using</span> GetLastError.
00317 
00318 --*/
00319 
00320 {
00321     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a1">GetConsoleInput</a>(hConsoleInput,
00322                            lpBuffer,
00323                            nLength,
00324                            lpNumberOfEventsRead,
00325                            wFlags,
00326                            TRUE);
00327 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="iostubs.c::ReadConsoleInputW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ReadConsoleInputW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PINPUT_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfEventsRead</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00227">227</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">GetConsoleInput()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00236           :
00237 
00238     hConsoleInput - Supplies an open handle to CONIN$ that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be
00239         read.  The handle must have been created with GENERIC_READ access.
00240 
00241     lpBuffer - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of a buffer to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data read
00242         from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer.
00243 
00244     nLength - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of lpBuffer in INPUT_RECORDs.
00245 
00246     lpNumberOfEventsRead - Pointer to number of events read.
00247 
00248 Return Value:
00249 
00250     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - The operation was successful.
00251 
00252     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>/<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - The operation failed.
00253         Extended error status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available <span class="keyword">using</span> GetLastError.
00254 
00255 --*/
00256 
00257 {
00258     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a1">GetConsoleInput</a>(hConsoleInput,
00259                            lpBuffer,
00260                            nLength,
00261                            lpNumberOfEventsRead,
00262                            0,
00263                            TRUE);
00264 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="iostubs.c::ReadConsoleOutputA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ReadConsoleOutputA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCHAR_INFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSMALL_RECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpReadRegion</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00748">748</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00585">ReadConsoleOutputInternal()</a>.
<p>
<pre class="fragment"><div>00755 {
00756     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a12">ReadConsoleOutputInternal</a>(hConsoleOutput,
00757                                      lpBuffer,
00758                                      dwBufferSize,
00759                                      dwBufferCoord,
00760                                      lpReadRegion,
00761                                      FALSE
00762                                     );
00763 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="iostubs.c::ReadConsoleOutputAttribute" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ReadConsoleOutputAttribute           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpAttribute</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwReadCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfAttrsRead</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01160">1160</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00271">CONSOLE_ATTRIBUTE</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00974">ReadConsoleOutputString()</a>.
<p>
<pre class="fragment"><div>01170           :
01171 
01172     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
01173         that is to be read.  The handle must have been created with
01174         GENERIC_READ access.
01175 
01176     lpAttribute - Supplies the address of a buffer to receive the attribute
01177         string read from the screen buffer.
01178 
01179     nLength - Size of lpAttribute buffer in bytes.
01180 
01181     dwReadCoord - Screen buffer coordinates of string to read.
01182         read data.
01183 
01184     lpNumberOfAttrsRead - Pointer to number of attrs read.
01185 
01186 Return Value:
01187 
01188     TRUE - The operation was successful.
01189 
01190     FALSE/NULL - The operation failed.
01191         Extended error status is available using GetLastError.
01192 
01193 --*/
01194 
01195 {
01196     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a18">ReadConsoleOutputString</a>(hConsoleOutput,
01197                                    lpAttribute,
01198                                    nLength,
01199                                    <span class="keyword">sizeof</span>(WORD),
01200                                    CONSOLE_ATTRIBUTE,
01201                                    dwReadCoord,
01202                                    lpNumberOfAttrsRead
01203                                   );
01204 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="iostubs.c::ReadConsoleOutputCharacterA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ReadConsoleOutputCharacterA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCharacter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwReadCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfCharsRead</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW6432) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01089">1089</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00269">CONSOLE_ASCII</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00974">ReadConsoleOutputString()</a>.
<p>
<pre class="fragment"><div>01099           :
01100 
01101     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
01102         that is to be read.  The handle must have been created with
01103         GENERIC_READ access.
01104 
01105     lpCharacter - Supplies the address of a buffer to receive the character
01106         string read from the screen buffer.
01107 
01108     nLength - Size of lpCharacter buffer in characters.
01109 
01110     dwReadCoord - Screen buffer coordinates of string to read.
01111         read data.
01112 
01113     lpNumberOfCharsRead - Pointer to number of chars read.
01114 
01115 Return Value:
01116 
01117     TRUE - The operation was successful.
01118 
01119     FALSE/NULL - The operation failed.
01120         Extended error status is available using GetLastError.
01121 
01122 --*/
01123 
01124 {
01125     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a18">ReadConsoleOutputString</a>(hConsoleOutput,
01126                                    lpCharacter,
01127                                    nLength,
01128                                    <span class="keyword">sizeof</span>(CHAR),
01129                                    CONSOLE_ASCII,
01130                                    dwReadCoord,
01131                                    lpNumberOfCharsRead
01132                                   );
01133 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="iostubs.c::ReadConsoleOutputCharacterW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ReadConsoleOutputCharacterW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCharacter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwReadCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfCharsRead</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01138">1138</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00270">CONSOLE_REAL_UNICODE</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00974">ReadConsoleOutputString()</a>.
<p>
<pre class="fragment"><div>01146 {
01147     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a18">ReadConsoleOutputString</a>(hConsoleOutput,
01148                                    lpCharacter,
01149                                    nLength,
01150                                    <span class="keyword">sizeof</span>(WCHAR),
01151                                    CONSOLE_REAL_UNICODE,
01152                                    dwReadCoord,
01153                                    lpNumberOfCharsRead
01154                                   );
01155 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="iostubs.c::ReadConsoleOutputInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ReadConsoleOutputInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCHAR_INFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PSMALL_RECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpReadRegion</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00585">585</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00249">_CONSOLE_READCONSOLEOUTPUT_MSG::BufPtr</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00248">_CONSOLE_READCONSOLEOUTPUT_MSG::Char</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00250">_CONSOLE_READCONSOLEOUTPUT_MSG::CharRegion</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00058">CONSOLE_RECT_SIZE_X</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00059">CONSOLE_RECT_SIZE_Y</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00246">_CONSOLE_READCONSOLEOUTPUT_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a166">ConsolepReadConsoleOutput</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l01551">CopyRectangle()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00247">_CONSOLE_READCONSOLEOUTPUT_MSG::OutputHandle</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00251">_CONSOLE_READCONSOLEOUTPUT_MSG::Unicode</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00748">ReadConsoleOutputA()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00729">ReadConsoleOutputW()</a>.
<p>
<pre class="fragment"><div>00595           :
00596 
00597     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
00598         that is to be read.  The handle must have been created with
00599         GENERIC_READ access.
00600 
00601     lpBuffer - Supplies the address of a buffer to receive the data read
00602         from the screen buffer.  This pointer is treated as the origin of
00603         a two dimensional array of size dwBufferSize.
00604 
00605     dwBufferSize - size of lpBuffer
00606 
00607     dwBufferCoord - coordinates of upper left point in buffer to receive
00608         read data.
00609 
00610     lpReadRegion - Supplies on input the address of a structure indicating the
00611         rectangle within the screen buffer to read from.  The fields in
00612         the structure are column and row coordinates.  On output, the fields
00613         contain the actual region read.
00614 
00615 Return Value:
00616 
00617     TRUE - The operation was successful.
00618 
00619     FALSE/NULL - The operation failed. Extended error status is available
00620         using GetLastError.
00621 --*/
00622 
00623 {
00624     PCSR_CAPTURE_HEADER CaptureBuffer;
00625     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00626     <a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html">PCONSOLE_READCONSOLEOUTPUT_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.ReadConsoleOutput;
00627     ULONG NumChars;
00628     COORD SourceSize;
00629 
00630     a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00631     a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o1">OutputHandle</a> = hConsoleOutput;
00632     a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o5">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00633 
00634     <span class="comment">//</span>
00635     <span class="comment">// clip region to read based on caller's buffer size</span>
00636     <span class="comment">//</span>
00637 
00638     SourceSize.X = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)<a class="code" href="../../d6/d4/condll_8h.html#a7">CONSOLE_RECT_SIZE_X</a>(lpReadRegion);
00639     <span class="keywordflow">if</span> (SourceSize.X &gt; dwBufferSize.X-dwBufferCoord.X)
00640         SourceSize.X = dwBufferSize.X-dwBufferCoord.X;
00641     SourceSize.Y = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)<a class="code" href="../../d6/d4/condll_8h.html#a8">CONSOLE_RECT_SIZE_Y</a>(lpReadRegion);
00642     <span class="keywordflow">if</span> (SourceSize.Y &gt; dwBufferSize.Y-dwBufferCoord.Y)
00643         SourceSize.Y = dwBufferSize.Y-dwBufferCoord.Y;
00644 
00645     a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Left = lpReadRegion-&gt;Left;
00646     a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Right = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(lpReadRegion-&gt;Left + SourceSize.X - 1);
00647     a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Top  = lpReadRegion-&gt;Top;
00648     a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Bottom = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(lpReadRegion-&gt;Top + SourceSize.Y - 1);
00649 
00650     <span class="comment">//</span>
00651     <span class="comment">// for speed in the case where we're only reading one character, we have</span>
00652     <span class="comment">// a buffer in the msg we pass to the server. this means we don't have to</span>
00653     <span class="comment">// allocate a capture buffer.</span>
00654     <span class="comment">//</span>
00655 
00656     NumChars = SourceSize.X * SourceSize.Y;
00657     <span class="keywordflow">if</span> (NumChars &gt; 1) {
00658         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00659                                                   NumChars * <span class="keyword">sizeof</span>(CHAR_INFO)
00660                                                 );
00661         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00662             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00663             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00664         }
00665         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00666                                  NULL,
00667                                  NumChars * <span class="keyword">sizeof</span>(CHAR_INFO),
00668                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o3">BufPtr</a>
00669                                );
00670     }
00671     <span class="keywordflow">else</span> {
00672         CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00673         a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o3">BufPtr</a> = &amp;a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o2">Char</a>;
00674     }
00675     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00676                          CaptureBuffer,
00677                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00678                                               ConsolepReadConsoleOutput
00679                                             ),
00680                          <span class="keyword">sizeof</span>( *a )
00681                        );
00682     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00683         <span class="keywordflow">try</span> {
00684             SMALL_RECT SourceRect;
00685 
00686             SourceRect.Left = a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Left - lpReadRegion-&gt;Left;
00687             SourceRect.Top = a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Top - lpReadRegion-&gt;Top;
00688             SourceRect.Right = SourceRect.Left +
00689                     (a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Right - a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Left);
00690             SourceRect.Bottom =  SourceRect.Top +
00691                     (a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Bottom - a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Top);
00692             dwBufferCoord.X += SourceRect.Left;
00693             dwBufferCoord.Y += SourceRect.Top;
00694             <a class="code" href="../../d6/d2/output_8c.html#a51">CopyRectangle</a>(a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o3">BufPtr</a>,
00695                           SourceSize,
00696                           &amp;SourceRect,
00697                           lpBuffer,
00698                           dwBufferSize,
00699                           dwBufferCoord
00700                          );
00701         } except( EXCEPTION_EXECUTE_HANDLER ) {
00702             <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00703                 <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00704             }
00705             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00706             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00707         }
00708     }
00709     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00710         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00711     }
00712     *lpReadRegion = a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>;
00713     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(m.ReturnValue)) {
00714         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00715         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00716     }
00717     <span class="keywordflow">else</span> {
00718         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00719     }
00720 
00721 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="iostubs.c::ReadConsoleOutputString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ReadConsoleOutputString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwReadCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfElementsRead</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00974">974</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00280">_CONSOLE_READCONSOLEOUTPUTSTRING_MSG::BufPtr</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00275">_CONSOLE_READCONSOLEOUTPUTSTRING_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a168">ConsolepReadConsoleOutputString</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00281">_CONSOLE_READCONSOLEOUTPUTSTRING_MSG::NumRecords</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00276">_CONSOLE_READCONSOLEOUTPUTSTRING_MSG::OutputHandle</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00277">_CONSOLE_READCONSOLEOUTPUTSTRING_MSG::ReadCoord</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00279">_CONSOLE_READCONSOLEOUTPUTSTRING_MSG::String</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00278">_CONSOLE_READCONSOLEOUTPUTSTRING_MSG::StringType</a>, and <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01160">ReadConsoleOutputAttribute()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01089">ReadConsoleOutputCharacterA()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01138">ReadConsoleOutputCharacterW()</a>.
<p>
<pre class="fragment"><div>00986           :
00987 
00988     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
00989         that is to be read.  The handle must have been created with
00990         GENERIC_READ access.
00991 
00992     lpString - Supplies the address of a buffer to receive the character
00993         or attribute string read from the screen buffer.
00994 
00995     nLength - Size of lpCharacter buffer in elements.
00996 
00997     nSize - Size of element to read.
00998 
00999     fFlags - flag indicating what type of string to copy
01000 
01001     dwReadCoord - Screen buffer coordinates of string to read.
01002         read data.
01003 
01004     lpNumberOfElementsRead - Pointer to number of events read.
01005 
01006 Return Value:
01007 
01008     TRUE - The operation was successful.
01009 
01010     FALSE/NULL - The operation failed.
01011         Extended error status is available using GetLastError.
01012 
01013 --*/
01014 
01015 {
01016     PCSR_CAPTURE_HEADER CaptureBuffer;
01017     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
01018     <a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html">PCONSOLE_READCONSOLEOUTPUTSTRING_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.ReadConsoleOutputString;
01019     ULONG DataLength;
01020 
01021     a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
01022     a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o1">OutputHandle</a> = hConsoleOutput;
01023     a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o6">NumRecords</a> = nLength;
01024     a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o3">StringType</a> = fFlags;
01025     a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o2">ReadCoord</a> = dwReadCoord;
01026 
01027     DataLength = nLength*nSize;
01028 
01029     <span class="comment">//</span>
01030     <span class="comment">// for speed in the case where the string is small, we have a buffer</span>
01031     <span class="comment">// in the msg we pass to the server. this means we don't have to</span>
01032     <span class="comment">// allocate a capture buffer.</span>
01033     <span class="comment">//</span>
01034 
01035     <span class="keywordflow">if</span> (DataLength &gt; <span class="keyword">sizeof</span>(a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o4">String</a>)) {
01036         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
01037                                                   DataLength
01038                                                 );
01039         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01040             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
01041             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01042         }
01043         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
01044                                  NULL,
01045                                  DataLength,
01046                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o5">BufPtr</a>
01047                                );
01048 
01049     }
01050     <span class="keywordflow">else</span> {
01051         a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o5">BufPtr</a> = a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o4">String</a>;
01052         CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01053     }
01054     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
01055                          CaptureBuffer,
01056                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
01057                                               ConsolepReadConsoleOutputString
01058                                             ),
01059                          <span class="keyword">sizeof</span>( *a )
01060                        );
01061 
01062     <span class="keywordflow">try</span> {
01063        *lpNumberOfElementsRead = a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o6">NumRecords</a>;
01064         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
01065             RtlCopyMemory(lpString, a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o5">BufPtr</a>, a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o6">NumRecords</a> * nSize);
01066         }
01067         <span class="keywordflow">else</span> {
01068             <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
01069         }
01070     } except( EXCEPTION_EXECUTE_HANDLER ) {
01071         <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01072             <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
01073         }
01074         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
01075         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01076     }
01077     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01078         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
01079     }
01080     <span class="keywordflow">return</span> <a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(m.ReturnValue);
01081 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="iostubs.c::ReadConsoleOutputW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ReadConsoleOutputW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCHAR_INFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSMALL_RECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpReadRegion</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW6432) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00729">729</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00585">ReadConsoleOutputInternal()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00736 {
00737     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a12">ReadConsoleOutputInternal</a>(hConsoleOutput,
00738                                      lpBuffer,
00739                                      dwBufferSize,
00740                                      dwBufferCoord,
00741                                      lpReadRegion,
00742                                      TRUE
00743                                     );
00744 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="iostubs.c::WriteConsoleInputA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY WriteConsoleInputA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST INPUT_RECORD *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfEventsWritten</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW6432) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00444">444</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00335">WriteConsoleInputInternal()</a>.
<p>
<pre class="fragment"><div>00450 {
00451     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a8">WriteConsoleInputInternal</a>(hConsoleInput,lpBuffer,nLength,lpNumberOfEventsWritten,FALSE,TRUE);
00452 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="iostubs.c::WriteConsoleInputInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY WriteConsoleInputInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST INPUT_RECORD *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfEventsWritten</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Append</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00335">335</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00242">_CONSOLE_WRITECONSOLEINPUT_MSG::Append</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00239">_CONSOLE_WRITECONSOLEINPUT_MSG::BufPtr</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00236">_CONSOLE_WRITECONSOLEINPUT_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a165">ConsolepWriteConsoleInput</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00223">INPUT_RECORD_BUFFER_SIZE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00237">_CONSOLE_WRITECONSOLEINPUT_MSG::InputHandle</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00240">_CONSOLE_WRITECONSOLEINPUT_MSG::NumRecords</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00238">_CONSOLE_WRITECONSOLEINPUT_MSG::Record</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00241">_CONSOLE_WRITECONSOLEINPUT_MSG::Unicode</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00444">WriteConsoleInputA()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00803">WriteConsoleInputVDMA()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00815">WriteConsoleInputVDMW()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00456">WriteConsoleInputW()</a>.
<p>
<pre class="fragment"><div>00345           :
00346 
00347     hConsoleInput - Supplies an open handle to CONIN$ that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be
00348         written.  The handle must have been created with GENERIC_WRITE access.
00349 
00350     lpBuffer - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of a buffer containing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input records
00351         to write to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer.
00352 
00353     nLength - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of lpBuffer in INPUT_RECORDs.
00354 
00355     lpNumberOfEventsWritten - Pointer to number of events written.
00356 
00357     <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> - <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> characters are unicode
00358 
00359     Append - <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> append to end of input stream.  <span class="keywordflow">if</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>, write to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00360     beginning of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input stream (used by VDM).
00361 
00362 Return Value:
00363 
00364     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - The operation was successful.
00365 
00366     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>/<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - The operation failed.
00367         Extended error status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available <span class="keyword">using</span> GetLastError.
00368 
00369 --*/
00370 
00371 {
00372     PCSR_CAPTURE_HEADER CaptureBuffer;
00373     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00374     <a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html">PCONSOLE_WRITECONSOLEINPUT_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.WriteConsoleInput;
00375 
00376     a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00377     a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o1">InputHandle</a> = hConsoleInput;
00378     a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o4">NumRecords</a> = nLength;
00379     a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o5">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00380     a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o6">Append</a> = Append;
00381 
00382     <span class="comment">//</span>
00383     <span class="comment">// for speed in the case where we're only writing a few records, we have</span>
00384     <span class="comment">// a buffer in the msg we pass to the server. this means we don't have to</span>
00385     <span class="comment">// allocate a capture buffer.</span>
00386     <span class="comment">//</span>
00387 
00388     <span class="keywordflow">if</span> (nLength &gt; <a class="code" href="../../d5/d5/conmsg_8h.html#a7">INPUT_RECORD_BUFFER_SIZE</a>) {
00389         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00390                                                   nLength * <span class="keyword">sizeof</span>(INPUT_RECORD)
00391                                                 );
00392         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00393             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00394             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00395         }
00396         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00397                                  (PCHAR) lpBuffer,
00398                                  nLength * <span class="keyword">sizeof</span>(INPUT_RECORD),
00399                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o3">BufPtr</a>
00400                                );
00401 
00402     } <span class="keywordflow">else</span> {
00403         a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o3">BufPtr</a> = a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o2">Record</a>;
00404         CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00405         <span class="keywordflow">try</span> {
00406             RtlCopyMemory(a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o3">BufPtr</a>, lpBuffer, nLength * <span class="keyword">sizeof</span>(INPUT_RECORD));
00407         } except( EXCEPTION_EXECUTE_HANDLER ) {
00408             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00409             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00410         }
00411     }
00412     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00413                          CaptureBuffer,
00414                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00415                                               ConsolepWriteConsoleInput
00416                                             ),
00417                          <span class="keyword">sizeof</span>( *a )
00418                        );
00419     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00420         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00421     }
00422     <span class="keywordflow">try</span> {
00423         *lpNumberOfEventsWritten = a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o4">NumRecords</a>;
00424     } except( EXCEPTION_EXECUTE_HANDLER ) {
00425         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00426         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00427     }
00428     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(m.ReturnValue)) {
00429         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00430         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00431     }
00432     <span class="keywordflow">else</span> {
00433         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00434     }
00435 
00436 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="iostubs.c::WriteConsoleInputW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY WriteConsoleInputW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST INPUT_RECORD *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfEventsWritten</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00456">456</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00335">WriteConsoleInputInternal()</a>.
<p>
<pre class="fragment"><div>00462 {
00463     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a8">WriteConsoleInputInternal</a>(hConsoleInput,lpBuffer,nLength,lpNumberOfEventsWritten,TRUE,TRUE);
00464 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="iostubs.c::WriteConsoleOutputA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY WriteConsoleOutputA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST CHAR_INFO *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSMALL_RECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpWriteRegion</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00951">951</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00771">WriteConsoleOutputInternal()</a>.
<p>
<pre class="fragment"><div>00958 {
00959     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a15">WriteConsoleOutputInternal</a>(hConsoleOutput,
00960                                       lpBuffer,
00961                                       dwBufferSize,
00962                                       dwBufferCoord,
00963                                       lpWriteRegion,
00964                                       FALSE
00965                                       );
00966 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="iostubs.c::WriteConsoleOutputAttribute" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY WriteConsoleOutputAttribute           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST WORD *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpAttribute</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwWriteCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfAttrsWritten</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01397">1397</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00271">CONSOLE_ATTRIBUTE</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01212">WriteConsoleOutputString()</a>.
<p>
<pre class="fragment"><div>01407           :
01408 
01409     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
01410         that is to be written.  The handle must have been created with
01411         GENERIC_WRITE access.
01412 
01413     lpAttribute - Supplies the address of a buffer containing the attribute
01414         string to write to the screen buffer.
01415 
01416     nLength - Length of string to write.
01417 
01418     dwWriteCoord - Screen buffer coordinates to write the string to.
01419 
01420     lpNumberOfAttrsWritten - Pointer to number of attrs written.
01421 
01422 Return Value:
01423 
01424     TRUE - The operation was successful.
01425 
01426     FALSE/NULL - The operation failed.
01427         Extended error status is available using GetLastError.
01428 
01429 --*/
01430 
01431 {
01432     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a22">WriteConsoleOutputString</a>(hConsoleOutput,
01433                                     lpAttribute,
01434                                     nLength,
01435                                     <span class="keyword">sizeof</span>(WORD),
01436                                     CONSOLE_ATTRIBUTE,
01437                                     dwWriteCoord,
01438                                     lpNumberOfAttrsWritten
01439                                    );
01440 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="iostubs.c::WriteConsoleOutputCharacterA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY WriteConsoleOutputCharacterA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCharacter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwWriteCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfCharsWritten</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW6432) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01329">1329</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00269">CONSOLE_ASCII</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01212">WriteConsoleOutputString()</a>.
<p>
<pre class="fragment"><div>01339           :
01340 
01341     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
01342         that is to be written.  The handle must have been created with
01343         GENERIC_WRITE access.
01344 
01345     lpCharacter - Supplies the address of a buffer containing the character
01346         string to write to the screen buffer.
01347 
01348     nLength - Length of string to write, in characters.
01349 
01350     dwWriteCoord - Screen buffer coordinates to write the string to.
01351 
01352     lpNumberOfCharsWritten - Pointer to number of chars written.
01353 
01354 Return Value:
01355 
01356     TRUE - The operation was successful.
01357 
01358     FALSE/NULL - The operation failed.
01359         Extended error status is available using GetLastError.
01360 
01361 --*/
01362 
01363 {
01364     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a22">WriteConsoleOutputString</a>(hConsoleOutput,
01365                                     lpCharacter,
01366                                     nLength,
01367                                     <span class="keyword">sizeof</span>(CHAR),
01368                                     CONSOLE_ASCII,
01369                                     dwWriteCoord,
01370                                     lpNumberOfCharsWritten
01371                                    );
01372 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="iostubs.c::WriteConsoleOutputCharacterW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY WriteConsoleOutputCharacterW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCharacter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwWriteCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfCharsWritten</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01376">1376</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00270">CONSOLE_REAL_UNICODE</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01212">WriteConsoleOutputString()</a>.
<p>
<pre class="fragment"><div>01384 {
01385     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a22">WriteConsoleOutputString</a>(hConsoleOutput,
01386                                     lpCharacter,
01387                                     nLength,
01388                                     <span class="keyword">sizeof</span>(WCHAR),
01389                                     CONSOLE_REAL_UNICODE,
01390                                     dwWriteCoord,
01391                                     lpNumberOfCharsWritten
01392                                    );
01393 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="iostubs.c::WriteConsoleOutputInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY WriteConsoleOutputInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST CHAR_INFO *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSMALL_RECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpWriteRegion</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00771">771</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00258">_CONSOLE_WRITECONSOLEOUTPUT_MSG::BufPtr</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00257">_CONSOLE_WRITECONSOLEOUTPUT_MSG::Char</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00259">_CONSOLE_WRITECONSOLEOUTPUT_MSG::CharRegion</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00058">CONSOLE_RECT_SIZE_X</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00059">CONSOLE_RECT_SIZE_Y</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00255">_CONSOLE_WRITECONSOLEOUTPUT_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a167">ConsolepWriteConsoleOutput</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l01551">CopyRectangle()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00256">_CONSOLE_WRITECONSOLEOUTPUT_MSG::OutputHandle</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00261">_CONSOLE_WRITECONSOLEOUTPUT_MSG::ReadVM</a>, <a class="el" href="../../d4/d6/config_2utils_2regutil_8c-source.html#l00022">RtlAllocateHeap</a>, <a class="el" href="../../d4/d6/config_2utils_2regutil_8c-source.html#l00023">RtlFreeHeap</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00260">_CONSOLE_WRITECONSOLEOUTPUT_MSG::Unicode</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00951">WriteConsoleOutputA()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00932">WriteConsoleOutputW()</a>.
<p>
<pre class="fragment"><div>00781           :
00782 
00783     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
00784         that is to be written.  The handle must have been created with
00785         GENERIC_WRITE access.
00786 
00787     lpBuffer - Supplies the address of a buffer containing the data to write
00788         to the screen buffer.  This buffer is treated as a two dimensional
00789         array.
00790 
00791     dwBufferSize - size of lpBuffer
00792 
00793     dwBufferCoord - coordinates of upper left point in buffer to write data
00794         from.
00795 
00796     lpWriteRegion - Supplies on input the address of a structure indicating the
00797         rectangle within the screen buffer to write to.  The fields in
00798         the structure are column and row coordinates.  On output, the fields
00799         contain the actual region written.
00800 
00801 Return Value:
00802 
00803     TRUE - The operation was successful.
00804 
00805     FALSE/NULL - The operation failed. Extended error status is available
00806         using GetLastError.
00807 --*/
00808 
00809 {
00810 
00811     PCSR_CAPTURE_HEADER CaptureBuffer;
00812     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00813     <a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html">PCONSOLE_WRITECONSOLEOUTPUT_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.WriteConsoleOutput;
00814     ULONG NumChars;
00815     COORD SourceSize;
00816     COORD TargetPoint;
00817 
00818     a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00819     a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o1">OutputHandle</a> = hConsoleOutput;
00820     a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o5">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00821 
00822     <span class="comment">//</span>
00823     <span class="comment">// clip region to write based on caller's buffer size</span>
00824     <span class="comment">//</span>
00825 
00826     SourceSize.X = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)<a class="code" href="../../d6/d4/condll_8h.html#a7">CONSOLE_RECT_SIZE_X</a>(lpWriteRegion);
00827     <span class="keywordflow">if</span> (SourceSize.X &gt; dwBufferSize.X-dwBufferCoord.X)
00828         SourceSize.X = dwBufferSize.X-dwBufferCoord.X;
00829     SourceSize.Y = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)<a class="code" href="../../d6/d4/condll_8h.html#a8">CONSOLE_RECT_SIZE_Y</a>(lpWriteRegion);
00830     <span class="keywordflow">if</span> (SourceSize.Y &gt; dwBufferSize.Y-dwBufferCoord.Y)
00831         SourceSize.Y = dwBufferSize.Y-dwBufferCoord.Y;
00832 
00833     <span class="keywordflow">if</span> (SourceSize.X &lt;= 0 ||
00834         SourceSize.Y &lt;= 0) {
00835         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_PARAMETER);
00836         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00837     }
00838 
00839     a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Left = lpWriteRegion-&gt;Left;
00840     a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Right = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(lpWriteRegion-&gt;Left + SourceSize.X - 1);
00841     a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Top  = lpWriteRegion-&gt;Top;
00842     a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Bottom = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(lpWriteRegion-&gt;Top + SourceSize.Y - 1);
00843 
00844     <span class="comment">//</span>
00845     <span class="comment">// for speed in the case where we're only writing one character, we have</span>
00846     <span class="comment">// a buffer in the msg we pass to the server. this means we don't have to</span>
00847     <span class="comment">// allocate a capture buffer.</span>
00848     <span class="comment">//</span>
00849 
00850     NumChars = SourceSize.X * SourceSize.Y;
00851     <span class="keywordflow">if</span> (NumChars &gt; 1) {
00852         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00853                                                   NumChars * <span class="keyword">sizeof</span>(CHAR_INFO)
00854                                                 );
00855         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00856             a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o6">ReadVM</a>=<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00857             a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o3">BufPtr</a> = <a class="code" href="../../d3/d7/config_2utils_2regutil_8c.html#a0">RtlAllocateHeap</a>( RtlProcessHeap(), 0, NumChars * <span class="keyword">sizeof</span>(CHAR_INFO));
00858             <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o3">BufPtr</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00859                 <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00860                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00861             }
00862         } <span class="keywordflow">else</span> {
00863             a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o6">ReadVM</a>=<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00864             <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00865                                      NULL,
00866                                      NumChars * <span class="keyword">sizeof</span>(CHAR_INFO),
00867                                      (PVOID *) &amp;a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o3">BufPtr</a>
00868                                    );
00869         }
00870     }
00871     <span class="keywordflow">else</span> {
00872         a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o6">ReadVM</a>=<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00873         CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00874         a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o3">BufPtr</a> = &amp;a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o2">Char</a>;
00875     }
00876     <span class="keywordflow">try</span> {
00877         SMALL_RECT SourceRect;
00878 
00879         SourceRect.Left = dwBufferCoord.X;
00880         SourceRect.Top = dwBufferCoord.Y;
00881         SourceRect.Right = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(dwBufferCoord.X+SourceSize.X-1);
00882         SourceRect.Bottom = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(dwBufferCoord.Y+SourceSize.Y-1);
00883         TargetPoint.X = 0;
00884         TargetPoint.Y = 0;
00885         <a class="code" href="../../d6/d2/output_8c.html#a51">CopyRectangle</a>(lpBuffer,
00886                       dwBufferSize,
00887                       &amp;SourceRect,
00888                       a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o3">BufPtr</a>,
00889                       SourceSize,
00890                       TargetPoint
00891                      );
00892     } except( EXCEPTION_EXECUTE_HANDLER ) {
00893         <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00894             <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00895         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o6">ReadVM</a>) {
00896             <span class="comment">// a-&gt;BufPtr was allocated with RtlAllocateHeap.</span>
00897             <a class="code" href="../../d3/d7/config_2utils_2regutil_8c.html#a1">RtlFreeHeap</a>( RtlProcessHeap(), 0, a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o3">BufPtr</a>);  
00898         }
00899         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00900         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00901     }
00902     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00903                          CaptureBuffer,
00904                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00905                                               ConsolepWriteConsoleOutput
00906                                             ),
00907                          <span class="keyword">sizeof</span>( *a )
00908                        );
00909     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00910         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00911     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o6">ReadVM</a>) {
00912         <span class="comment">// a-&gt;BufPtr was allocated with RtlAllocateHeap.</span>
00913         <a class="code" href="../../d3/d7/config_2utils_2regutil_8c.html#a1">RtlFreeHeap</a>(RtlProcessHeap(),0,a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o3">BufPtr</a>);       
00914     }
00915     *lpWriteRegion = a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o4">CharRegion</a>;
00916     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(m.ReturnValue)) {
00917         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00918         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00919     }
00920     <span class="keywordflow">else</span> {
00921         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00922     }
00923 
00924 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="iostubs.c::WriteConsoleOutputString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY WriteConsoleOutputString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST VOID *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwWriteCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfElementsWritten</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01212">1212</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00290">_CONSOLE_WRITECONSOLEOUTPUTSTRING_MSG::BufPtr</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00285">_CONSOLE_WRITECONSOLEOUTPUTSTRING_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a169">ConsolepWriteConsoleOutputString</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00291">_CONSOLE_WRITECONSOLEOUTPUTSTRING_MSG::NumRecords</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00286">_CONSOLE_WRITECONSOLEOUTPUTSTRING_MSG::OutputHandle</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00289">_CONSOLE_WRITECONSOLEOUTPUTSTRING_MSG::String</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00288">_CONSOLE_WRITECONSOLEOUTPUTSTRING_MSG::StringType</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00287">_CONSOLE_WRITECONSOLEOUTPUTSTRING_MSG::WriteCoord</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01397">WriteConsoleOutputAttribute()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01329">WriteConsoleOutputCharacterA()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01376">WriteConsoleOutputCharacterW()</a>.
<p>
<pre class="fragment"><div>01224           :
01225 
01226     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
01227         that is to be written.  The handle must have been created with
01228         GENERIC_WRITE access.
01229 
01230     lpString - Supplies the address of a buffer containing the character
01231         or attribute string to write to the screen buffer.
01232 
01233     nLength - Length of string to write, in elements.
01234 
01235     nSize - Size of element to read.
01236 
01237     fFlags - flag indicating what type of string to copy
01238 
01239     dwWriteCoord - Screen buffer coordinates to write the string to.
01240 
01241     lpNumberOfElementsWritten - Pointer to number of elements written.
01242 
01243 Return Value:
01244 
01245     TRUE - The operation was successful.
01246 
01247     FALSE/NULL - The operation failed.
01248         Extended error status is available using GetLastError.
01249 
01250 --*/
01251 
01252 {
01253 
01254     PCSR_CAPTURE_HEADER CaptureBuffer;
01255     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
01256     <a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html">PCONSOLE_WRITECONSOLEOUTPUTSTRING_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.WriteConsoleOutputString;
01257     ULONG DataLength;
01258 
01259     a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
01260     a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o1">OutputHandle</a> = hConsoleOutput;
01261     a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o6">NumRecords</a> = nLength;
01262     a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o3">StringType</a> = fFlags;
01263     a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o2">WriteCoord</a> = dwWriteCoord;
01264 
01265     <span class="comment">//</span>
01266     <span class="comment">// for speed in the case where the string is small, we have a buffer</span>
01267     <span class="comment">// in the msg we pass to the server. this means we don't have to</span>
01268     <span class="comment">// allocate a capture buffer.</span>
01269     <span class="comment">//</span>
01270 
01271     DataLength = nLength*nSize;
01272     <span class="keywordflow">if</span> (DataLength &gt; <span class="keyword">sizeof</span>(a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o4">String</a>)) {
01273         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
01274                                                   DataLength
01275                                                 );
01276         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01277             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
01278             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01279         }
01280         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
01281                                  (PCHAR) lpString,
01282                                  DataLength,
01283                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o5">BufPtr</a>
01284                                );
01285     }
01286     <span class="keywordflow">else</span> {
01287         a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o5">BufPtr</a> = a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o4">String</a>;
01288         CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01289 
01290         <span class="keywordflow">try</span> {
01291             RtlCopyMemory(a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o5">BufPtr</a>, lpString, DataLength);
01292         } except( EXCEPTION_EXECUTE_HANDLER ) {
01293             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
01294             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01295         }
01296     }
01297     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
01298                          CaptureBuffer,
01299                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
01300                                               ConsolepWriteConsoleOutputString
01301                                             ),
01302                          <span class="keyword">sizeof</span>( *a )
01303                        );
01304     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01305         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
01306     }
01307     <span class="keywordflow">try</span> {
01308         *lpNumberOfElementsWritten = a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o6">NumRecords</a>;
01309     } except( EXCEPTION_EXECUTE_HANDLER ) {
01310         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
01311         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01312     }
01313     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(m.ReturnValue)) {
01314         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
01315         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01316     }
01317     <span class="keywordflow">else</span> {
01318         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01319     }
01320 
01321 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="iostubs.c::WriteConsoleOutputW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY WriteConsoleOutputW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST CHAR_INFO *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSMALL_RECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpWriteRegion</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW6432) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00932">932</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00771">WriteConsoleOutputInternal()</a>.
<p>
<pre class="fragment"><div>00939 {
00940     <span class="keywordflow">return</span> <a class="code" href="../../d3/d6/iostubs_8c.html#a15">WriteConsoleOutputInternal</a>(hConsoleOutput,
00941                                       lpBuffer,
00942                                       dwBufferSize,
00943                                       dwBufferCoord,
00944                                       lpWriteRegion,
00945                                       TRUE
00946                                       );
00947 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:21 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

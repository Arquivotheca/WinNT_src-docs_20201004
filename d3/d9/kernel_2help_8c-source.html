<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: help.c Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>help.c</h1><a href="../../d2/d0/kernel_2help_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/**************************** Module Header ********************************\</span>
00002 <span class="comment">* Module Name: help.c</span>
00003 <span class="comment">*</span>
00004 <span class="comment">* Copyright (c) 1985 - 1999, Microsoft Corporation</span>
00005 <span class="comment">*</span>
00006 <span class="comment">* Help function</span>
00007 <span class="comment">*</span>
00008 <span class="comment">* History:</span>
00009 <span class="comment">* 04-15-91 JimA             Ported.</span>
00010 <span class="comment">\***************************************************************************/</span>
00011 
00012 <span class="preprocessor">#include "<a class="code" href="../../d0/d4/w32_2ntuser_2kernel_2precomp_8h.html">precomp.h</a>"</span>
00013 <span class="preprocessor">#pragma hdrstop</span>
00014 <span class="preprocessor"></span>
<a name="l00015"></a><a class="code" href="../../d4/d1/userk_8h.html#a1100">00015</a> <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="code" href="../../d4/d1/userk_8h.html#a1100">_GetWindowContextHelpId</a>(<a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pWnd)
00016 {
00017     <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(ULONG_PTR)<a class="code" href="../../d7/d8/rtl_2winprop_8c.html#a2">_GetProp</a>(pWnd, <a class="code" href="../../d6/d1/userrtl_8h.html#a0">MAKEINTATOM</a>(<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o30">atomContextHelpIdProp</a>),
00018             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a498">PROPF_INTERNAL</a>);
00019 }
00020 
00021 
<a name="l00022"></a><a class="code" href="../../d4/d1/userk_8h.html#a1101">00022</a> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d4/d1/userk_8h.html#a1101">_SetWindowContextHelpId</a>(<a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pWnd, DWORD dwContextId)
00023 {
00024     <span class="comment">//If dwContextId is NULL, then this implies that the caller wants to</span>
00025     <span class="comment">// remove the dwContextId associated with this Window.</span>
00026     <span class="keywordflow">if</span>(dwContextId == 0) {
00027         <a class="code" href="../../d4/d8/kernel_2winprop_8c.html#a1">InternalRemoveProp</a>(pWnd, <a class="code" href="../../d6/d1/userrtl_8h.html#a0">MAKEINTATOM</a>(<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o30">atomContextHelpIdProp</a>),
00028                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a498">PROPF_INTERNAL</a>);
00029         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00030       }
00031 
00032     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d8/kernel_2winprop_8c.html#a0">InternalSetProp</a>(pWnd, <a class="code" href="../../d6/d1/userrtl_8h.html#a0">MAKEINTATOM</a>(<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o30">atomContextHelpIdProp</a>),
00033             (HANDLE)LongToHandle( dwContextId ), <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a498">PROPF_INTERNAL</a> | <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a500">PROPF_NOPOOL</a>));
00034 }
00035 
00036 
00037 <span class="comment">/***************************************************************************\</span>
00038 <span class="comment">* SendHelpMessage</span>
00039 <span class="comment">*</span>
00040 <span class="comment">*</span>
00041 <span class="comment">\***************************************************************************/</span>
00042 
<a name="l00043"></a><a class="code" href="../../d4/d1/userk_8h.html#a1102">00043</a> <span class="keywordtype">void</span> <a class="code" href="../../d4/d1/userk_8h.html#a1102">xxxSendHelpMessage</a>(
00044     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>   pwnd,
00045     <span class="keywordtype">int</span>    iType,
00046     <span class="keywordtype">int</span>    iCtrlId,
00047     HANDLE hItemHandle,
00048     DWORD  dwContextId)
00049 {
00050     HELPINFO    HelpInfo;
00051     <span class="keywordtype">long</span>        lValue;
00052 
00053     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00054 
00055     HelpInfo.cbSize = <span class="keyword">sizeof</span>(HELPINFO);
00056     HelpInfo.iContextType = iType;
00057     HelpInfo.iCtrlId = iCtrlId;
00058     HelpInfo.hItemHandle = hItemHandle;
00059     HelpInfo.dwContextId = dwContextId;
00060 
00061     lValue = <a class="code" href="../../d4/d1/userk_8h.html#a1639">_GetMessagePos</a>();
00062     HelpInfo.MousePos.x = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lValue);
00063     HelpInfo.MousePos.y = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(lValue);
00064 
00065     <a class="code" href="../../d4/d1/userk_8h.html#a1579">xxxSendMessage</a>(pwnd, WM_HELP, 0, (LPARAM)(LPHELPINFO)&amp;HelpInfo);
00066 }
00067 
00068 
00069 <span class="comment">/*</span>
00070 <span class="comment"> * Modal loop for when the user has selected the help icon from the titlebar</span>
00071 <span class="comment"> *</span>
00072 <span class="comment"> */</span>
<a name="l00073"></a><a class="code" href="../../d4/d1/userk_8h.html#a1465">00073</a> <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a> <a class="code" href="../../d4/d1/userk_8h.html#a1465">xxxHelpLoop</a>(<a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)
00074 {
00075     HWND        hwndChild;
00076     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>        pwndChild;
00077     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>        pwndControl;
00078     MSG         <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
00079     RECT        rc;
00080     <span class="keywordtype">int</span>         cBorders;
00081     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
00082     <a class="code" href="../../d1/d4/structtagDLGENUMDATA.html">DLGENUMDATA</a> DlgEnumData;
00083     <a class="code" href="../../d5/d1/struct__TL.html">TL</a>          tlpwndChild;
00084 
00085     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00086     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a616">IsWinEventNotifyDeferredOK</a>());
00087 
00088     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00089         <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_SYSTEM_CONTEXTHELPSTART, pwnd, OBJID_WINDOW,
00090             INDEXID_CONTAINER, 0);
00091     }
00092 
00093     <a class="code" href="../../d4/d1/userk_8h.html#a1785">zzzSetCursor</a>(<a class="code" href="../../d4/d1/userk_8h.html#a321">SYSCUR</a>(<a class="code" href="../../d2/d5/editreg_8c.html#a13">HELP</a>));
00094     <a class="code" href="../../d4/d1/userk_8h.html#a1516">xxxCapture</a>(ptiCurrent, pwnd, <a class="code" href="../../d4/d1/userk_8h.html#a466">SCREEN_CAPTURE</a>);
00095 
00096     cBorders = <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a7">GetWindowBorders</a>(pwnd-&gt;style, pwnd-&gt;ExStyle, <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>, <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00097 
00098     <a class="code" href="../../d3/d6/rect_8c.html#a2">CopyInflateRect</a>(&amp;rc, &amp;pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>, -cBorders * <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER), -cBorders * <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER));
00099 
00100     <span class="keywordflow">while</span> (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o6">spwndCapture</a> == pwnd) {
00101         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a576">xxxPeekMessage</a>(&amp;<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, 0, 0, PM_NOYIELD | PM_NOREMOVE)) {
00102             <a class="code" href="../../d4/d1/userk_8h.html#a1634">xxxWaitMessage</a>();
00103             <span class="keywordflow">continue</span>;
00104         }
00105 
00106         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.message == WM_NCLBUTTONDOWN) {
00107             <span class="keywordflow">break</span>;
00108         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.message == WM_LBUTTONDOWN) {
00109             <span class="comment">/*</span>
00110 <span class="comment">             *  If user clicked outside of window client, bail out now.</span>
00111 <span class="comment">             */</span>
00112             <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;rc, <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.pt))
00113                 <span class="keywordflow">break</span>;
00114 
00115             <span class="comment">/*</span>
00116 <span class="comment">             *  WindowHitTest() won't return a static control's handle</span>
00117 <span class="comment">             */</span>
00118             hwndChild = <a class="code" href="../../d9/d8/winwhere_8c.html#a4">xxxWindowHitTest</a>(pwnd, <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.pt, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, 0);
00119             pwndChild = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>( hwndChild );
00120             <a class="code" href="../../d6/d0/usercli_8h.html#a36">ThreadLock</a>(pwndChild, &amp;tlpwndChild);
00121 
00122             <span class="keywordflow">if</span> (pwndChild &amp;&amp; <a class="code" href="../../d4/d0/rtl_2help_8c.html#a0">FIsParentDude</a>(pwndChild))
00123             {
00124                 <span class="comment">/*</span>
00125 <span class="comment">                 * If this is a dialog class, then one of three things has</span>
00126 <span class="comment">                 * happened:</span>
00127 <span class="comment">                 *</span>
00128 <span class="comment">                 *  o   This is a static text control</span>
00129 <span class="comment">                 *  o   This is the background of the dialog box.</span>
00130 <span class="comment">                 *</span>
00131 <span class="comment">                 * What we do is enumerate the child windows and see if</span>
00132 <span class="comment">                 * any of them contain the current cursor point. If they do,</span>
00133 <span class="comment">                 * change our window handle and continue on. Otherwise,</span>
00134 <span class="comment">                 * return doing nothing -- we don't want context-sensitive</span>
00135 <span class="comment">                 * help for a dialog background.</span>
00136 <span class="comment">                 *</span>
00137 <span class="comment">                 * If this is a group box, then we might have clicked on a</span>
00138 <span class="comment">                 * disabled control, so we enumerate child windows to see</span>
00139 <span class="comment">                 * if we get another control.</span>
00140 <span class="comment">                 */</span>
00141 
00142                 <span class="comment">/*</span>
00143 <span class="comment">                 *  We're enumerating a dialog's children.  So, if we don't</span>
00144 <span class="comment">                 *  find any matches, hwndChild will be NULL and the check</span>
00145 <span class="comment">                 *  below will drop out.</span>
00146 <span class="comment">                 */</span>
00147                 DlgEnumData.<a class="code" href="../../d1/d4/structtagDLGENUMDATA.html#o0">pwndDialog</a> = pwndChild;
00148                 DlgEnumData.<a class="code" href="../../d1/d4/structtagDLGENUMDATA.html#o1">pwndControl</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00149                 DlgEnumData.<a class="code" href="../../d1/d4/structtagDLGENUMDATA.html#o2">ptCurHelp</a> = <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.pt;
00150                 <a class="code" href="../../d4/d1/userk_8h.html#a1428">xxxInternalEnumWindow</a>(pwndChild, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1164">EnumPwndDlgChildProc</a>, (LPARAM)&amp;DlgEnumData, <a class="code" href="../../d4/d1/userk_8h.html#a409">BWL_ENUMCHILDREN</a>);
00151                 pwndControl = DlgEnumData.pwndControl;
00152             } <span class="keywordflow">else</span> {
00153                 pwndControl = pwndChild;
00154             }
00155 
00156             <span class="comment">/*</span>
00157 <span class="comment">             * If we click on nothing, just exit.</span>
00158 <span class="comment">             */</span>
00159             <span class="keywordflow">if</span> (pwndControl == pwnd) {
00160                 pwndControl = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00161             }
00162 
00163             <span class="comment">/*</span>
00164 <span class="comment">             *  HACK ALERT (Visual Basic 4.0) - they have their own non-window</span>
00165 <span class="comment">             *    based controls that draw directly on the main dialog.  In order</span>
00166 <span class="comment">             *    to provide help for these controls, we pass along the WM_HELP</span>
00167 <span class="comment">             *    message iff the main dialog has a context id assigned.</span>
00168 <span class="comment">             *</span>
00169 <span class="comment">             *  If the top level window has its own context help ID,</span>
00170 <span class="comment">             *  then pass it in the context help message.</span>
00171 <span class="comment">             */</span>
00172             <span class="keywordflow">if</span> (!pwndControl) {
00173                 <span class="keywordflow">if</span> (<a class="code" href="../../d7/d8/rtl_2winprop_8c.html#a2">_GetProp</a>(pwnd, <a class="code" href="../../d6/d1/userrtl_8h.html#a0">MAKEINTATOM</a>(<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o30">atomContextHelpIdProp</a>), <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>))
00174                     pwndControl = pwnd;
00175             }
00176 
00177             <span class="keywordflow">if</span> (pwndControl) {
00178                 <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>    pwndSend;
00179                 <span class="keywordtype">int</span>     <span class="keywordtype">id</span>;
00180                 <a class="code" href="../../d5/d1/struct__TL.html">TL</a>      tlpwndSend;
00181                 <a class="code" href="../../d5/d1/struct__TL.html">TL</a>      tlpwndControl;
00182 
00183                 <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pwndControl, &amp;tlpwndControl);
00184 
00185                 <a class="code" href="../../d4/d1/userk_8h.html#a1785">zzzSetCursor</a>(<a class="code" href="../../d4/d1/userk_8h.html#a321">SYSCUR</a>(ARROW));
00186                 <a class="code" href="../../d4/d1/userk_8h.html#a1713">xxxReleaseCapture</a>();
00187                 <a class="code" href="../../d4/d1/userk_8h.html#a1995">xxxRedrawTitle</a>(pwnd, DC_BUTTONS);
00188                 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a733">ClrWF</a>(pwnd, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a600">WFHELPBUTTONDOWN</a>);
00189                 <a class="code" href="../../d4/d1/userk_8h.html#a577">xxxGetMessage</a>(&amp;<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, 0, 0);
00190 
00191                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00192                     <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_OBJECT_STATECHANGE, pwnd, OBJID_TITLEBAR,
00193                         INDEX_TITLEBAR_HELPBUTTON, <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00194 
00195                     <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_SYSTEM_CONTEXTHELPEND, pwnd, OBJID_WINDOW,
00196                         INDEXID_CONTAINER, <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00197                 }
00198 
00199                 <span class="comment">/*</span>
00200 <span class="comment">                 * Determine the ID of the control</span>
00201 <span class="comment">                 * We used to always sign extend, but Win98 doesn't do that</span>
00202 <span class="comment">                 * so we only sign extend 0xffff.  MCostea #218711</span>
00203 <span class="comment">                 */</span>
00204                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwndControl)) {
00205                     <span class="keywordtype">id</span> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a99">PTR_TO_ID</a>(pwndControl-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o16">spmenu</a>);
00206                     <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == 0xffff) {
00207                         <span class="keywordtype">id</span> = -1;
00208                     }
00209                 } <span class="keywordflow">else</span> {
00210                     <span class="keywordtype">id</span> = -1;
00211                 }
00212 
00213                 <span class="comment">/*</span>
00214 <span class="comment">                 * Disabled controls and static controls won't pass this</span>
00215 <span class="comment">                 * on to their parent, so instead, we send the message to</span>
00216 <span class="comment">                 * their parent.</span>
00217 <span class="comment">                 */</span>
00218 
00219                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndControl, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a651">WFDISABLED</a>)) {
00220                     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a14">_GetParent</a>(pwndControl);
00221                     <span class="keywordflow">if</span> (!pwndParent)
00222                     {
00223                         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>( &amp;tlpwndControl );
00224                         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>( &amp;tlpwndChild );
00225                         <span class="keywordflow">return</span>;
00226                     }
00227                     pwndSend = pwndParent;
00228                 } <span class="keywordflow">else</span> {
00229                     pwndSend = pwndControl;
00230                 }
00231 
00232                 <a class="code" href="../../d6/d0/usercli_8h.html#a37">ThreadLockAlways</a>(pwndSend, &amp;tlpwndSend);
00233                 <a class="code" href="../../d4/d1/userk_8h.html#a1102">xxxSendHelpMessage</a>( pwndSend, HELPINFO_WINDOW, <span class="keywordtype">id</span>,
00234                     (HANDLE)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwndControl), <a class="code" href="../../d4/d0/rtl_2help_8c.html#a1">GetContextHelpId</a>(pwndControl));
00235                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndSend);
00236                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndControl);
00237                 <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndChild);
00238                 <span class="keywordflow">return</span>;
00239             }
00240             <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndChild);
00241             <span class="keywordflow">break</span>;
00242 
00243         }
00244         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.message == WM_RBUTTONDOWN) || 
00245                  (<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.message == WM_MBUTTONDOWN) || 
00246                  (<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.message == WM_XBUTTONDOWN)) {
00247             <span class="comment">/*</span>
00248 <span class="comment">             *  fix bug 29852; break the loop for right and middle buttons</span>
00249 <span class="comment">             *  and pass along the messages to the control</span>
00250 <span class="comment">             */</span>
00251             <span class="keywordflow">break</span>;
00252         }
00253         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.message == WM_MOUSEMOVE) {
00254             <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;rc, <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.pt))
00255                 <a class="code" href="../../d4/d1/userk_8h.html#a1785">zzzSetCursor</a>(<a class="code" href="../../d4/d1/userk_8h.html#a321">SYSCUR</a>(<a class="code" href="../../d2/d5/editreg_8c.html#a13">HELP</a>));
00256             <span class="keywordflow">else</span>
00257                 <a class="code" href="../../d4/d1/userk_8h.html#a1785">zzzSetCursor</a>(<a class="code" href="../../d4/d1/userk_8h.html#a321">SYSCUR</a>(ARROW));
00258         }
00259         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.message == WM_KEYDOWN &amp;&amp; <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.wParam == VK_ESCAPE)
00260         {
00261             <a class="code" href="../../d4/d1/userk_8h.html#a577">xxxGetMessage</a>( &amp;<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, 0, 0 );
00262             <span class="keywordflow">break</span>;
00263         }
00264 
00265         <a class="code" href="../../d4/d1/userk_8h.html#a577">xxxGetMessage</a>(&amp;<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, 0, 0);
00266         <a class="code" href="../../d4/d1/userk_8h.html#a1646">xxxTranslateMessage</a>(&amp;<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>, 0);
00267         <a class="code" href="../../d4/d1/userk_8h.html#a1640">xxxDispatchMessage</a>(&amp;<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>);
00268     }
00269 
00270     <a class="code" href="../../d4/d1/userk_8h.html#a1713">xxxReleaseCapture</a>();
00271     <a class="code" href="../../d4/d1/userk_8h.html#a1785">zzzSetCursor</a>(<a class="code" href="../../d4/d1/userk_8h.html#a321">SYSCUR</a>(ARROW));
00272     <a class="code" href="../../d4/d1/userk_8h.html#a1995">xxxRedrawTitle</a>(pwnd, DC_BUTTONS);
00273 
00274     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a733">ClrWF</a>(pwnd, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a600">WFHELPBUTTONDOWN</a>);
00275     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00276         <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_OBJECT_STATECHANGE, pwnd, OBJID_TITLEBAR,
00277                 INDEX_TITLEBAR_HELPBUTTON, 0);
00278 
00279         <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_SYSTEM_CONTEXTHELPEND, pwnd, OBJID_WINDOW,
00280                 INDEXID_CONTAINER, 0);
00281     }
00282 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:17 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

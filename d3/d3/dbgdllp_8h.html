<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: dbgdllp.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>dbgdllp.h File Reference</h1><code>#include &lt;nt.h&gt;</code><br>
<code>#include &lt;ntrtl.h&gt;</code><br>
<code>#include &lt;nturtl.h&gt;</code><br>
<code>#include &lt;ntsm.h&gt;</code><br>
<code>#include &lt;wdbgexts.h&gt;</code><br>
<code>#include &lt;ntdbg.h&gt;</code><br>

<p>
<a href="../../d4/d2/dbgdllp_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">_DBGSS_CONTINUE_KEY</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a0">NOEXTAPI</a></td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">_DBGSS_CONTINUE_KEY</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a6">DBGSS_CONTINUE_KEY</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">_DBGSS_CONTINUE_KEY</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a7">PDBGSS_CONTINUE_KEY</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a8">DbgSspConnectToDbg</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a9">DbgSspSrvApiLoop</a> (IN PVOID ThreadParameter)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a10">DbgSspCreateProcess</a> (IN <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a> ContinueKey, IN PCLIENT_ID AppClientId, IN PCLIENT_ID DebugUiClientId, IN PDBGKM_CREATE_PROCESS NewProcess)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a11">DbgSspCreateThread</a> (IN <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a> ContinueKey, IN PCLIENT_ID AppClientId, IN PDBGKM_CREATE_THREAD NewThread)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a12">DbgSspExitThread</a> (IN <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a> ContinueKey, IN PCLIENT_ID AppClientId, IN PDBGKM_EXIT_THREAD ExitThread)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a13">DbgSspExitProcess</a> (IN <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a> ContinueKey, IN PCLIENT_ID AppClientId, IN PDBGKM_EXIT_PROCESS ExitProcess)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a14">DbgSspException</a> (IN <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a> ContinueKey, IN PCLIENT_ID AppClientId, IN PDBGKM_EXCEPTION Exception)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a15">DbgSspLoadDll</a> (IN <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a> ContinueKey, IN PCLIENT_ID AppClientId, IN PDBGKM_LOAD_DLL LoadDll)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a16">DbgSspUnloadDll</a> (IN <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a> ContinueKey, IN PCLIENT_ID AppClientId, IN PDBGKM_UNLOAD_DLL UnloadDll)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a1">DbgSspApiPort</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a2">DbgSspKmReplyPort</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PDBGSS_UI_LOOKUP&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a3">DbgSspUiLookUpRoutine</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PDBGSS_SUBSYSTEMKEY_LOOKUP&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a4">DbgSspSubsystemKeyLookupRoutine</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PDBGSS_DBGKM_APIMSG_FILTER&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d3/dbgdllp_8h.html#a5">DbgSspKmApiMsgFilter</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="dbgdllp.h::NOEXTAPI" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NOEXTAPI          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00028">28</a> of file <a class="el" href="../../d4/d2/dbgdllp_8h-source.html">dbgdllp.h</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a6" doxytag="dbgdllp.h::DBGSS_CONTINUE_KEY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">_DBGSS_CONTINUE_KEY</a>  <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">DBGSS_CONTINUE_KEY</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="dbgdllp.h::PDBGSS_CONTINUE_KEY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">_DBGSS_CONTINUE_KEY</a> * <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a8" doxytag="dbgdllp.h::DbgSspConnectToDbg" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS DbgSspConnectToDbg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00025">25</a> of file <a class="el" href="../../d4/d9/dllssstb_8c-source.html">dllssstb.c</a>.
<p>
References <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00038">DbgSspApiPort</a>, <a class="el" href="../../d4/d8/ulpc_8h-source.html#l00049">DynamicQos</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d5/lpcconn_8c-source.html#l00043">NtConnectPort()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d8/ulpc_8h-source.html#l00032">PortName</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00429">DbgSsInitialize()</a>.
<p>
<pre class="fragment"><div>00029                    :
00030 
00031     This routine makes a connection between <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> caller and <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00032     DbgSs port in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d9/d5/cdfs__rec_8c.html#a0">Dbg</a> subsystem.
00033 
00034 Arguments:
00035 
00036     None.
00037 
00038 Return Value:
00039 
00040     TBD.
00041 
00042 --*/
00043 
00044 {
00045     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> st;
00046     UNICODE_STRING <a class="code" href="../../d3/d9/ulpc_8h.html#a2">PortName</a>;
00047     SECURITY_QUALITY_OF_SERVICE <a class="code" href="../../d3/d9/ulpc_8h.html#a4">DynamicQos</a>;
00048 
00049     <span class="comment">//</span>
00050     <span class="comment">// Set up the security quality of service parameters to use over the</span>
00051     <span class="comment">// port.  Use the most efficient (least overhead) - which is dynamic</span>
00052     <span class="comment">// rather than static tracking.</span>
00053     <span class="comment">//</span>
00054 
00055     <a class="code" href="../../d3/d9/ulpc_8h.html#a4">DynamicQos</a>.ImpersonationLevel = SecurityImpersonation;
00056     <a class="code" href="../../d3/d9/ulpc_8h.html#a4">DynamicQos</a>.ContextTrackingMode = SECURITY_DYNAMIC_TRACKING;
00057     <a class="code" href="../../d3/d9/ulpc_8h.html#a4">DynamicQos</a>.EffectiveOnly = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00058 
00059 
00060     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;PortName,L<span class="stringliteral">"\\DbgSsApiPort"</span>);
00061     st = <a class="code" href="../../d5/d6/lpcconn_8c.html#a1">NtConnectPort</a>(
00062             &amp;DbgSspApiPort,
00063             &amp;PortName,
00064             &amp;DynamicQos,
00065             NULL,
00066             NULL,
00067             NULL,
00068             NULL,
00069             0L
00070             );
00071 
00072     <span class="keywordflow">return</span> st;
00073 
00074 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="dbgdllp.h::DbgSspCreateProcess" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS DbgSspCreateProcess           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ContinueKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCLIENT_ID&nbsp;</td>
          <td class="mdname" nowrap> <em>AppClientId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCLIENT_ID&nbsp;</td>
          <td class="mdname" nowrap> <em>DebugUiClientId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PDBGKM_CREATE_PROCESS&nbsp;</td>
          <td class="mdname" nowrap> <em>NewProcess</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00176">176</a> of file <a class="el" href="../../d4/d9/dllssstb_8c-source.html">dllssstb.c</a>.
<p>
References <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00038">DbgSspApiPort</a>, <a class="el" href="../../d7/d6/lpcsend_8c-source.html#l00032">NtRequestPort()</a>, and <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00517">DbgSsHandleKmApiMsg()</a>.
<p>
<pre class="fragment"><div>00185                    :
00186 
00187     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called by emulation subsystems to report <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00188     creation of a <span class="keyword">new</span> process to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d9/d5/cdfs__rec_8c.html#a0">Dbg</a> subsystem.  It <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00189     responsibility of individual subsystems to track a process and its
00190     controlling DebugUi.
00191 
00192 Arguments:
00193 
00194     ContinueKey - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> captured DbgKm API message that needs a reply
00195         should <span class="keyword">this</span> API complete successfully.
00196 
00197     AppClientId - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">new</span> thread's ClientId.
00198 
00199     DebugUiClientId - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ClientId of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> user
00200         interface controlling <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">new</span> thread.
00201 
00202     NewProcess - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> NewProcess message as sent through
00203         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> applications <a class="code" href="../../d8/d7/udbgk_8c.html#a0">DebugPort</a>. The calling subsystem may modify <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00204         SubSystemKey fields of <span class="keyword">this</span> message.
00205 
00206 Return Value:
00207 
00208     TBD
00209 
00210 --*/
00211 
00212 {
00213 
00214     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> st;
00215     DBGSS_APIMSG ApiMsg;
00216 
00217     PDBGSS_CREATE_PROCESS args;
00218 
00219     args = &amp;ApiMsg.u.CreateProcessInfo;
00220 
00221     DBGSS_FORMAT_API_MSG(ApiMsg,DbgSsCreateProcessApi,<span class="keyword">sizeof</span>(*args),AppClientId,ContinueKey);
00222 
00223     args-&gt;DebugUiClientId = *DebugUiClientId;
00224     args-&gt;NewProcess = *NewProcess;
00225 
00226     st = <a class="code" href="../../d6/d7/lpcsend_8c.html#a0">NtRequestPort</a>(DbgSspApiPort, (PPORT_MESSAGE) &amp;ApiMsg);
00227 
00228     <span class="keywordflow">return</span> st;
00229 
00230 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="dbgdllp.h::DbgSspCreateThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS DbgSspCreateThread           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ContinueKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCLIENT_ID&nbsp;</td>
          <td class="mdname" nowrap> <em>AppClientId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PDBGKM_CREATE_THREAD&nbsp;</td>
          <td class="mdname" nowrap> <em>NewThread</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00126">126</a> of file <a class="el" href="../../d4/d9/dllssstb_8c-source.html">dllssstb.c</a>.
<p>
References <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00038">DbgSspApiPort</a>, <a class="el" href="../../d7/d6/lpcsend_8c-source.html#l00032">NtRequestPort()</a>, and <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00517">DbgSsHandleKmApiMsg()</a>.
<p>
<pre class="fragment"><div>00134                    :
00135 
00136     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called by emulation subsystems to report <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00137     creation of a <span class="keyword">new</span> thread to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d9/d5/cdfs__rec_8c.html#a0">Dbg</a> subsystem.
00138 
00139 Arguments:
00140 
00141     ContinueKey - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> captured DbgKm API message that needs a reply
00142         should <span class="keyword">this</span> API complete successfully.
00143 
00144     AppClientId - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">new</span> thread's ClientId.
00145 
00146     NewThread - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> NewThread message as sent through
00147         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> applications <a class="code" href="../../d8/d7/udbgk_8c.html#a0">DebugPort</a>. The calling subsystem may modify <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00148         SubSystemKey field of <span class="keyword">this</span> message.
00149 
00150 Return Value:
00151 
00152     TBD
00153 
00154 --*/
00155 
00156 {
00157 
00158     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> st;
00159     DBGSS_APIMSG ApiMsg;
00160 
00161     PDBGKM_CREATE_THREAD args;
00162 
00163     args = &amp;ApiMsg.u.CreateThread;
00164 
00165     DBGSS_FORMAT_API_MSG(ApiMsg,DbgSsCreateThreadApi,<span class="keyword">sizeof</span>(*args),AppClientId, ContinueKey);
00166 
00167     *args = *NewThread;
00168 
00169     st = <a class="code" href="../../d6/d7/lpcsend_8c.html#a0">NtRequestPort</a>(DbgSspApiPort, (PPORT_MESSAGE) &amp;ApiMsg);
00170 
00171     <span class="keywordflow">return</span> st;
00172 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="dbgdllp.h::DbgSspException" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS DbgSspException           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ContinueKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCLIENT_ID&nbsp;</td>
          <td class="mdname" nowrap> <em>AppClientId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PDBGKM_EXCEPTION&nbsp;</td>
          <td class="mdname" nowrap> <em>Exception</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00077">77</a> of file <a class="el" href="../../d4/d9/dllssstb_8c-source.html">dllssstb.c</a>.
<p>
References <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00038">DbgSspApiPort</a>, <a class="el" href="../../d7/d6/lpcsend_8c-source.html#l00032">NtRequestPort()</a>, and <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00517">DbgSsHandleKmApiMsg()</a>.
<p>
<pre class="fragment"><div>00085                    :
00086 
00087     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called by emulation subsystems to report that
00088     an exception occured in a thread.
00089 
00090 Arguments:
00091 
00092     ContinueKey - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> captured DbgKm API message that needs a reply
00093         should <span class="keyword">this</span> API complete successfully.
00094 
00095     AppClientId - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ClientId of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> thread that
00096         encountered an exception.
00097 
00098     Exception - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Exception message as sent
00099         through <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> applications <a class="code" href="../../d8/d7/udbgk_8c.html#a0">DebugPort</a>.
00100 
00101 Return Value:
00102 
00103     TBD
00104 
00105 --*/
00106 
00107 {
00108 
00109     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> st;
00110     DBGSS_APIMSG ApiMsg;
00111 
00112     PDBGKM_EXCEPTION args;
00113 
00114     args = &amp;ApiMsg.u.Exception;
00115 
00116     DBGSS_FORMAT_API_MSG(ApiMsg,DbgSsExceptionApi,<span class="keyword">sizeof</span>(*args),AppClientId,ContinueKey);
00117 
00118     *args = *Exception;
00119 
00120     st = <a class="code" href="../../d6/d7/lpcsend_8c.html#a0">NtRequestPort</a>(DbgSspApiPort, (PPORT_MESSAGE) &amp;ApiMsg);
00121 
00122     <span class="keywordflow">return</span> st;
00123 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="dbgdllp.h::DbgSspExitProcess" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS DbgSspExitProcess           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ContinueKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCLIENT_ID&nbsp;</td>
          <td class="mdname" nowrap> <em>AppClientId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PDBGKM_EXIT_PROCESS&nbsp;</td>
          <td class="mdname" nowrap> <em>ExitProcess</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00281">281</a> of file <a class="el" href="../../d4/d9/dllssstb_8c-source.html">dllssstb.c</a>.
<p>
References <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00038">DbgSspApiPort</a>, <a class="el" href="../../d7/d6/lpcsend_8c-source.html#l00032">NtRequestPort()</a>, and <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00517">DbgSsHandleKmApiMsg()</a>.
<p>
<pre class="fragment"><div>00289                    :
00290 
00291     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called by emulation subsystems to report that
00292     a process <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> exiting.
00293 
00294 Arguments:
00295 
00296     ContinueKey - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> captured DbgKm API message that needs a reply
00297         should <span class="keyword">this</span> API complete successfully.
00298 
00299     AppClientId - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ClientId of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> last thread
00300         in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> process to <a class="code" href="../../d9/d1/fedefs_8h.html#a16">exit</a>.
00301 
00302     ExitProcess - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ExitProcess message as sent
00303         through <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> applications <a class="code" href="../../d8/d7/udbgk_8c.html#a0">DebugPort</a>.
00304 
00305 Return Value:
00306 
00307     TBD
00308 
00309 --*/
00310 
00311 {
00312 
00313     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> st;
00314     DBGSS_APIMSG ApiMsg;
00315 
00316     PDBGKM_EXIT_PROCESS args;
00317 
00318     args = &amp;ApiMsg.u.ExitProcess;
00319 
00320     DBGSS_FORMAT_API_MSG(ApiMsg,DbgSsExitProcessApi,<span class="keyword">sizeof</span>(*args),AppClientId,ContinueKey);
00321 
00322     *args = *ExitProcess;
00323 
00324     st = <a class="code" href="../../d6/d7/lpcsend_8c.html#a0">NtRequestPort</a>(DbgSspApiPort, (PPORT_MESSAGE) &amp;ApiMsg);
00325 
00326     <span class="keywordflow">return</span> st;
00327 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="dbgdllp.h::DbgSspExitThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS DbgSspExitThread           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ContinueKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCLIENT_ID&nbsp;</td>
          <td class="mdname" nowrap> <em>AppClientId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PDBGKM_EXIT_THREAD&nbsp;</td>
          <td class="mdname" nowrap> <em>ExitThread</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00233">233</a> of file <a class="el" href="../../d4/d9/dllssstb_8c-source.html">dllssstb.c</a>.
<p>
References <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00038">DbgSspApiPort</a>, <a class="el" href="../../d7/d6/lpcsend_8c-source.html#l00032">NtRequestPort()</a>, and <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00517">DbgSsHandleKmApiMsg()</a>.
<p>
<pre class="fragment"><div>00241                    :
00242 
00243     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called by emulation subsystems to report that
00244     a thread <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> exiting.
00245 
00246 Arguments:
00247 
00248     ContinueKey - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> captured DbgKm API message that needs a reply
00249         should <span class="keyword">this</span> API complete successfully.
00250 
00251     AppClientId - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exiting thread's ClientId.
00252 
00253     ExitThread - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ExitThread message as sent
00254         through <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> applications <a class="code" href="../../d8/d7/udbgk_8c.html#a0">DebugPort</a>.
00255 
00256 Return Value:
00257 
00258     TBD
00259 
00260 --*/
00261 
00262 {
00263 
00264     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> st;
00265     DBGSS_APIMSG ApiMsg;
00266 
00267     PDBGKM_EXIT_THREAD args;
00268 
00269     args = &amp;ApiMsg.u.ExitThread;
00270 
00271     DBGSS_FORMAT_API_MSG(ApiMsg,DbgSsExitThreadApi,<span class="keyword">sizeof</span>(*args),AppClientId,ContinueKey);
00272 
00273     *args = *ExitThread;
00274 
00275     st = <a class="code" href="../../d6/d7/lpcsend_8c.html#a0">NtRequestPort</a>(DbgSspApiPort, (PPORT_MESSAGE) &amp;ApiMsg);
00276 
00277     <span class="keywordflow">return</span> st;
00278 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="dbgdllp.h::DbgSspLoadDll" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS DbgSspLoadDll           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ContinueKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCLIENT_ID&nbsp;</td>
          <td class="mdname" nowrap> <em>AppClientId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PDBGKM_LOAD_DLL&nbsp;</td>
          <td class="mdname" nowrap> <em>LoadDll</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00330">330</a> of file <a class="el" href="../../d4/d9/dllssstb_8c-source.html">dllssstb.c</a>.
<p>
References <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00038">DbgSspApiPort</a>, <a class="el" href="../../d7/d6/lpcsend_8c-source.html#l00032">NtRequestPort()</a>, and <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00517">DbgSsHandleKmApiMsg()</a>.
<p>
<pre class="fragment"><div>00338                    :
00339 
00340     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called by emulation subsystems to report that
00341     a a process has loaded a DLL
00342 
00343 Arguments:
00344 
00345     ContinueKey - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> captured DbgKm API message that needs a reply
00346         should <span class="keyword">this</span> API complete successfully.
00347 
00348     AppClientId - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ClientId of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> thread
00349         that mapped <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> section.
00350 
00351     LoadDll - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> LoadDll message as sent
00352         through <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> applications <a class="code" href="../../d8/d7/udbgk_8c.html#a0">DebugPort</a>.
00353 
00354 Return Value:
00355 
00356     TBD
00357 
00358 --*/
00359 
00360 {
00361 
00362     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> st;
00363     DBGSS_APIMSG ApiMsg;
00364 
00365     PDBGKM_LOAD_DLL args;
00366 
00367     args = &amp;ApiMsg.u.LoadDll;
00368 
00369     DBGSS_FORMAT_API_MSG(ApiMsg,DbgSsLoadDllApi,<span class="keyword">sizeof</span>(*args),AppClientId,ContinueKey);
00370 
00371     *args = *LoadDll;
00372 
00373     st = <a class="code" href="../../d6/d7/lpcsend_8c.html#a0">NtRequestPort</a>(DbgSspApiPort, (PPORT_MESSAGE) &amp;ApiMsg);
00374 
00375     <span class="keywordflow">return</span> st;
00376 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="dbgdllp.h::DbgSspSrvApiLoop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS DbgSspSrvApiLoop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PVOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ThreadParameter</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00737">737</a> of file <a class="el" href="../../d4/d9/dllssstb_8c-source.html">dllssstb.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00038">DbgSspApiPort</a>, <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00039">DbgSspKmReplyPort</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00045">_DBGSS_CONTINUE_KEY::KmApiMsg</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d6/d6/lpcreply_8c-source.html#l00044">NtReplyPort()</a>, <a class="el" href="../../d5/d6/lpcrecv_8c-source.html#l00029">NtReplyWaitReceivePort()</a>, <a class="el" href="../../d1/d7/ex_2event_8c-source.html#l00748">NtSetEvent()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00046">_DBGSS_CONTINUE_KEY::ReplyEvent</a>, and <a class="el" href="../../d4/d6/config_2utils_2regutil_8c-source.html#l00023">RtlFreeHeap</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00429">DbgSsInitialize()</a>.
<p>
<pre class="fragment"><div>00743                    :
00744 
00745     This loop services <a class="code" href="../../d9/d5/cdfs__rec_8c.html#a0">Dbg</a> Subsystem server originated messages.
00746 
00747 Arguments:
00748 
00749     ThreadParameter - Not used.
00750 
00751 Return Value:
00752 
00753     None.
00754 
00755 --*/
00756 
00757 {
00758     DBGSRV_APIMSG DbgSrvApiMsg;
00759     <a class="code" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a> ContinueKey;
00760     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> st;
00761 
00762     <span class="keywordflow">for</span>(;;) {
00763 
00764         st = <a class="code" href="../../d4/d7/lpcrecv_8c.html#a0">NtReplyWaitReceivePort</a>(
00765                 DbgSspApiPort,
00766                 NULL,
00767                 NULL,
00768                 (PPORT_MESSAGE) &amp;DbgSrvApiMsg
00769                 );
00770 
00771         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( st )) {
00772             <span class="keywordflow">continue</span>;
00773             }
00774 
00775         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(DbgSrvApiMsg.ApiNumber &lt; DbgSrvMaxApiNumber);
00776 
00777         <span class="keywordflow">switch</span> (DbgSrvApiMsg.ApiNumber ) {
00778         <span class="keywordflow">case</span> DbgSrvContinueApi :
00779 
00780             <span class="comment">//</span>
00781             <span class="comment">// Might want to implement continue status based callout</span>
00782             <span class="comment">// like DBG_TERMINATE_PROCESS/THREAD</span>
00783             <span class="comment">//</span>
00784 
00785             ContinueKey = (<a class="code" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a>) DbgSrvApiMsg.ContinueKey;
00786             ContinueKey-&gt;<a class="code" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html#o0">KmApiMsg</a>.ReturnedStatus = DbgSrvApiMsg.ReturnedStatus;
00787 
00788             <span class="keywordflow">if</span> ( ContinueKey-&gt;<a class="code" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html#o1">ReplyEvent</a> ) {
00789                 st = <a class="code" href="../../d0/d8/ex_2event_8c.html#a10">NtSetEvent</a>(ContinueKey-&gt;<a class="code" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html#o1">ReplyEvent</a>,NULL);
00790             } <span class="keywordflow">else</span> {
00791                 st = <a class="code" href="../../d5/d7/lpcreply_8c.html#a1">NtReplyPort</a>(DbgSspKmReplyPort,
00792                                  (PPORT_MESSAGE) &amp;ContinueKey-&gt;<a class="code" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html#o0">KmApiMsg</a>
00793                                 );
00794             }
00795 
00796             <a class="code" href="../../d3/d7/config_2utils_2regutil_8c.html#a1">RtlFreeHeap</a>(RtlProcessHeap(), 0, ContinueKey);
00797             <span class="keywordflow">break</span>;
00798         <span class="keywordflow">default</span> :
00799             <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(FALSE);
00800         }
00801     }
00802 
00803     <span class="comment">//</span>
00804     <span class="comment">// Make the compiler happy</span>
00805     <span class="comment">//</span>
00806 
00807     <span class="keywordflow">return</span> st;
00808 }
}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="dbgdllp.h::DbgSspUnloadDll" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS DbgSspUnloadDll           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d2/d0/struct__DBGSS__CONTINUE__KEY.html">PDBGSS_CONTINUE_KEY</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ContinueKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCLIENT_ID&nbsp;</td>
          <td class="mdname" nowrap> <em>AppClientId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PDBGKM_UNLOAD_DLL&nbsp;</td>
          <td class="mdname" nowrap> <em>UnloadDll</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00379">379</a> of file <a class="el" href="../../d4/d9/dllssstb_8c-source.html">dllssstb.c</a>.
<p>
References <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00038">DbgSspApiPort</a>, <a class="el" href="../../d7/d6/lpcsend_8c-source.html#l00032">NtRequestPort()</a>, and <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00517">DbgSsHandleKmApiMsg()</a>.
<p>
<pre class="fragment"><div>00387                    :
00388 
00389     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called by emulation subsystems to report that
00390     a a process has un-mapped a view of a section
00391 
00392 Arguments:
00393 
00394     ContinueKey - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> captured DbgKm API message that needs a reply
00395         should <span class="keyword">this</span> API complete successfully.
00396 
00397     AppClientId - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ClientId of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> thread
00398         that mapped <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> section.
00399 
00400     UnloadDll - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> UnloadDll message as sent
00401         through <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> applications <a class="code" href="../../d8/d7/udbgk_8c.html#a0">DebugPort</a>.
00402 
00403 Return Value:
00404 
00405     TBD
00406 
00407 --*/
00408 
00409 {
00410 
00411     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> st;
00412     DBGSS_APIMSG ApiMsg;
00413 
00414     PDBGKM_UNLOAD_DLL args;
00415 
00416     args = &amp;ApiMsg.u.UnloadDll;
00417 
00418     DBGSS_FORMAT_API_MSG(ApiMsg,DbgSsUnloadDllApi,<span class="keyword">sizeof</span>(*args),AppClientId,ContinueKey);
00419 
00420     *args = *UnloadDll;
00421 
00422     st = <a class="code" href="../../d6/d7/lpcsend_8c.html#a0">NtRequestPort</a>(DbgSspApiPort, (PPORT_MESSAGE) &amp;ApiMsg);
00423 
00424     <span class="keywordflow">return</span> st;
00425 }

</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a1" doxytag="dbgdllp.h::DbgSspApiPort" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE <a class="el" href="../../d3/d3/dbgdllp_8h.html#a1">DbgSspApiPort</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00038">38</a> of file <a class="el" href="../../d4/d2/dbgdllp_8h-source.html">dbgdllp.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00025">DbgSspConnectToDbg()</a>, <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00176">DbgSspCreateProcess()</a>, <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00126">DbgSspCreateThread()</a>, <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00077">DbgSspException()</a>, <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00281">DbgSspExitProcess()</a>, <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00233">DbgSspExitThread()</a>, <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00330">DbgSspLoadDll()</a>, <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00737">DbgSspSrvApiLoop()</a>, and <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00379">DbgSspUnloadDll()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="dbgdllp.h::DbgSspKmApiMsgFilter" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PDBGSS_DBGKM_APIMSG_FILTER <a class="el" href="../../d3/d3/dbgdllp_8h.html#a5">DbgSspKmApiMsgFilter</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00042">42</a> of file <a class="el" href="../../d4/d2/dbgdllp_8h-source.html">dbgdllp.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00517">DbgSsHandleKmApiMsg()</a>, and <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00429">DbgSsInitialize()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="dbgdllp.h::DbgSspKmReplyPort" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE <a class="el" href="../../d3/d3/dbgdllp_8h.html#a2">DbgSspKmReplyPort</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00039">39</a> of file <a class="el" href="../../d4/d2/dbgdllp_8h-source.html">dbgdllp.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00517">DbgSsHandleKmApiMsg()</a>, <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00429">DbgSsInitialize()</a>, and <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00737">DbgSspSrvApiLoop()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="dbgdllp.h::DbgSspSubsystemKeyLookupRoutine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PDBGSS_SUBSYSTEMKEY_LOOKUP <a class="el" href="../../d3/d3/dbgdllp_8h.html#a4">DbgSspSubsystemKeyLookupRoutine</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00041">41</a> of file <a class="el" href="../../d4/d2/dbgdllp_8h-source.html">dbgdllp.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00517">DbgSsHandleKmApiMsg()</a>, and <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00429">DbgSsInitialize()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="dbgdllp.h::DbgSspUiLookUpRoutine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PDBGSS_UI_LOOKUP <a class="el" href="../../d3/d3/dbgdllp_8h.html#a3">DbgSspUiLookUpRoutine</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d2/dbgdllp_8h-source.html#l00040">40</a> of file <a class="el" href="../../d4/d2/dbgdllp_8h-source.html">dbgdllp.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00517">DbgSsHandleKmApiMsg()</a>, and <a class="el" href="../../d4/d9/dllssstb_8c-source.html#l00429">DbgSsInitialize()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:23 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

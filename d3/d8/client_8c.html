<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: client.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>client.c File Reference</h1><code>#include "<a class="el" href="../../d8/d2/w32_2ntuser_2client_2precomp_8h-source.html">precomp.h</a>"</code><br>
<code>#include "kbd.h"</code><br>

<p>
<a href="../../d4/d7/client_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d4/struct__HANDLENODE.html">_HANDLENODE</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a0">NSZKLKEY</a>&nbsp;&nbsp;&nbsp;(sizeof <a class="el" href="../../d3/d8/client_8c.html#a8">szKLKey</a> + 16)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a1">CCH_KL_LIBNAME</a>&nbsp;&nbsp;&nbsp;256</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a2">CCH_KL_ID</a>&nbsp;&nbsp;&nbsp;16</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a3">GETCCP_SIZE</a>&nbsp;&nbsp;&nbsp;8</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a4">SW_FLAG_RC</a>&nbsp;&nbsp;&nbsp;(SW_SCROLLWINDOW | SW_INVALIDATE | SW_ERASE | SW_SCROLLCHILDREN)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a5">SW_FLAG_NRC</a>&nbsp;&nbsp;&nbsp;(SW_SCROLLWINDOW | SW_INVALIDATE | SW_ERASE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a6">NSIZEPRELOAD</a>&nbsp;&nbsp;&nbsp;(4)</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d4/struct__HANDLENODE.html">_HANDLENODE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a20">HANDLENODE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d4/struct__HANDLENODE.html">HANDLENODE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a21">PHANDLENODE</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>HBITMAP&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a25">WOWLoadBitmapA</a> (HINSTANCE hmod, LPCSTR lpName, LPBYTE pResData, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbResData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HMENU&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a26">WowServerLoadCreateMenu</a> (HANDLE hMod, LPTSTR lpName, CONST LPMENUTEMPLATE pmt, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cb, BOOL fCallClient)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a27">GetFullUserHandle</a> (WORD wHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a28">GetClipboardCodePage</a> (LCID, LCTYPE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a29">WOWFindResourceExWCover</a> (HANDLE hmod, LPCWSTR rt, LPCWSTR lpUniName, WORD LangId)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a30">EnableEUDC</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a31">CheckValidLayoutName</a> (LPWSTR lpszName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a32">WOWModuleUnload</a> (HANDLE hModule)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a33">WOWCleanup</a> (HANDLE hInstance, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> hTaskWow)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a34">BringWindowToTop</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a35">ChildWindowFromPoint</a> (HWND hwndParent, POINT point)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HICON&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a36">CopyIcon</a> (HICON hicon)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a37">AdjustWindowRect</a> (LPRECT lprc, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> style, BOOL fMenu)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a38">TranslateAcceleratorW</a> (HWND hwnd, HACCEL hAccel, LPMSG lpMsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a39">TranslateAcceleratorA</a> (HWND hwnd, HACCEL hAccel, LPMSG lpMsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a40">DeleteClientClipboardHandle</a> (<a class="el" href="../../d3/d4/struct__HANDLENODE.html">PHANDLENODE</a> phn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a41">ClientEmptyClipboard</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a42">GetClipboardData</a> (UINT uFmt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a43">SetClipboardData</a> (UINT wFmt, HANDLE hMem)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a44">SetDeskWallpaper</a> (IN LPCSTR pString OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a45">ReleaseDC</a> (HWND hwnd, HDC hdc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a46">ToAscii</a> (UINT wVirtKey, UINT wScanCode, CONST <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *lpKeyState, LPWORD lpChar, UINT wFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a47">ToAsciiEx</a> (UINT wVirtKey, UINT wScanCode, CONST <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *lpKeyState, LPWORD lpChar, UINT wFlags, HKL hkl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a48">ScrollDC</a> (HDC hDC, int dx, int dy, CONST RECT *lprcScroll, CONST RECT *lprcClip, HRGN hrgnUpdate, LPRECT lprcUpdate)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a49">DrawIcon</a> (HDC hdc, int x, int y, HICON hicon)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a50">DrawIconEx</a> (HDC hdc, int x, int y, HICON hIcon, int cx, int <a class="el" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>, UINT istepIfAniCur, HBRUSH hbrFlickerFreeDraw, UINT diFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a51">ValidateRgn</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HRGN hRgn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a52">GetUpdateRgn</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HRGN hRgn, BOOL bErase)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a53">GetUpdateRect</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, LPRECT lprc, BOOL bErase)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a54">ScrollWindow</a> (HWND hwnd, int dx, int dy, CONST RECT *prcScroll, CONST RECT *prcClip)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a55">SwitchToThisWindow</a> (HWND hwnd, BOOL fAltTab)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a56">WaitForInputIdle</a> (HANDLE hProcess, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwMilliseconds)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a57">MsgWaitForMultipleObjects</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nCount, CONST HANDLE *pHandles, BOOL fWaitAll, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwMilliseconds, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwWakeMask)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a58">MsgWaitForMultipleObjectsEx</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nCount, CONST HANDLE *pHandles, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwMilliseconds, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwWakeMask, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a59">InnerGrayStringAorW</a> (HDC hdc, HBRUSH hbr, GRAYSTRINGPROC lpfnPrint, LPARAM lParam, int cch, int x, int y, int cx, int <a class="el" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>, BOOL bAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a60">GrayStringA</a> (HDC hdc, HBRUSH hbr, GRAYSTRINGPROC lpfnPrint, LPARAM lParam, int cch, int x, int y, int cx, int <a class="el" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a61">GrayStringW</a> (HDC hdc, HBRUSH hbr, GRAYSTRINGPROC lpfnPrint, LPARAM lParam, int cch, int x, int y, int cx, int <a class="el" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a62">GetUserObjectSecurity</a> (HANDLE hObject, PSECURITY_INFORMATION pRequestedInformation, PSECURITY_DESCRIPTOR pSecurityDescriptor, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, LPDWORD lpnLengthRequired)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a63">SetUserObjectSecurity</a> (HANDLE hObject, PSECURITY_INFORMATION pRequestedInformation, PSECURITY_DESCRIPTOR pSecurityDescriptor)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a64">GetUserObjectInformationA</a> (HANDLE hObject, int nIndex, PVOID pvInfo, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, LPDWORD pnLengthNeeded)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a65">GetWinStationInfo</a> (WSINFO *pWsInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a66">WinStaQueryInformationW</a> (HANDLE hServer, ULONG ulLogonId, WINSTATIONINFOCLASS WinStationInformationClass, PVOID pWinStationInformation, ULONG ulWinStationInformationLength, PULONG pulReturnLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a67">GetServerIMEKeyboardLayout</a> (LPTSTR pszImeFileName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a68">GetRemoteKeyboardLayout</a> (PWCHAR LayoutBuf)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWINSTA&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a69">CommonCreateWindowStation</a> (PUNICODE_STRING pstrName, ACCESS_MASK amRequest, PSECURITY_ATTRIBUTES lpsa)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWINSTA&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a70">CreateWindowStationA</a> (LPCSTR pwinsta, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwReserved, ACCESS_MASK amRequest, PSECURITY_ATTRIBUTES lpsa)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWINSTA&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a71">CreateWindowStationW</a> (LPCWSTR pwinsta, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwReserved, ACCESS_MASK amRequest, PSECURITY_ATTRIBUTES lpsa)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWINSTA&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a72">CommonOpenWindowStation</a> (CONST UNICODE_STRING *pstrName, BOOL fInherit, ACCESS_MASK amRequest)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWINSTA&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a73">OpenWindowStationA</a> (LPCSTR pwinsta, BOOL fInherit, ACCESS_MASK amRequest)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWINSTA&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a74">OpenWindowStationW</a> (LPCWSTR pwinsta, BOOL fInherit, ACCESS_MASK amRequest)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HDESK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a75">CommonCreateDesktop</a> (PUNICODE_STRING pstrDesktop, PUNICODE_STRING pstrDevice, LPDEVMODEW pDevmode, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, ACCESS_MASK amRequest, PSECURITY_ATTRIBUTES lpsa)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HDESK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a76">CreateDesktopA</a> (LPCSTR pDesktop, LPCSTR pDevice, LPDEVMODEA pDevmode, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, ACCESS_MASK amRequest, PSECURITY_ATTRIBUTES lpsa)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HDESK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a77">CreateDesktopW</a> (LPCWSTR pDesktop, LPCWSTR pDevice, LPDEVMODEW pDevmode, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, ACCESS_MASK amRequest, PSECURITY_ATTRIBUTES lpsa)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HDESK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a78">CommonOpenDesktop</a> (PUNICODE_STRING pstrDesktop, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, BOOL fInherit, ACCESS_MASK amRequest)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HDESK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a79">OpenDesktopA</a> (LPCSTR pdesktop, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, BOOL fInherit, ACCESS_MASK amRequest)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HDESK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a80">OpenDesktopW</a> (LPCWSTR pdesktop, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, BOOL fInherit, ACCESS_MASK amRequest)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ATOM WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a81">RegisterClassWOWA</a> (WNDCLASSA *lpWndClass, LPDWORD pdwWOWstuff)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>WORD&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a82">WowGetDefWindowProcBits</a> (<a class="el" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a> pDefWindowProcBits, WORD cbDefWindowProcBits)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG_PTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a83">UserRegisterWowHandlers</a> (APFNWOWHANDLERSIN apfnWowIn, APFNWOWHANDLERSOUT apfnWowOut)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a84">GetEditDS</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a85">ReleaseEditDS</a> (HANDLE h)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a86">TellWOWThehDlg</a> (HWND hDlg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a87">DispatchClientMessage</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, WPARAM wParam, LPARAM lParam, ULONG_PTR pfn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a88">ArrangeIconicWindows</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a89">BeginDeferWindowPos</a> (int nNumWindows)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a90">EndDeferWindowPos</a> (HDWP hWinPosInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a91">CascadeChildWindows</a> (HWND hwndParent, UINT nCode)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a92">CloseWindow</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HMENU&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a93">CreateMenu</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HMENU&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a94">CreatePopupMenu</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a95">DestroyCaret</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a96">DirectedYield</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwThreadId)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a97">DrawMenuBar</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a98">EnableWindow</a> (HWND hwnd, BOOL bEnable)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a99">EnumClipboardFormats</a> (UINT fmt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a100">FlashWindow</a> (HWND hwnd, BOOL bInvert)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>long&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a101">GetDialogBaseUnits</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HDESK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a102">GetInputDesktop</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a103">GetClientKeyboardType</a> (PCLIENTKEYBOARDTYPE KeyboardType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a104">GetKeyboardType</a> (int nTypeFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a105">GetMessagePos</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a106">GetQueueStatus</a> (UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a107">KillSystemTimer</a> (HWND hwnd, UINT nIDEvent)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a108">LoadRemoteFonts</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a109">LoadLocalFonts</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a110">MessageBeep</a> (UINT wType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a111">OpenIcon</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a112">GetShellWindow</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a113">SetShellWindow</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a114">GetProgmanWindow</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a115">SetProgmanWindow</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a116">GetTaskmanWindow</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a117">SetTaskmanWindow</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a118">SetWindowContextHelpId</a> (HWND hwnd, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> id)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a119">GetWindowContextHelpId</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a120">SetWindowState</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a121">ClearWindowState</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a122">PostQuitMessage</a> (int nExitCode)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a123">RegisterUserHungAppHandlers</a> (PFNW32ET pfnW32EndTask, HANDLE hEventWowExec)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a124">ReleaseCapture</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a125">ReplyMessage</a> (LRESULT pp1)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a126">RegisterSystemThread</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwReserved)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a127">SetCaretBlinkTime</a> (UINT wMSeconds)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a128">SetCaretPos</a> (int X, int Y)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a129">SetCursorPos</a> (int X, int Y)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a130">SetDoubleClickTime</a> (UINT cms)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a131">SetForegroundWindow</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a132">AllowSetForegroundWindow</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwProcessId)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a133">LockSetForegroundWindow</a> (UINT uLockCode)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a134">ShowCursor</a> (BOOL bShow)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a135">ShowOwnedPopups</a> (HWND hwnd, BOOL fShow)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a136">ShowStartGlass</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwTimeout)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a137">SwapMouseButton</a> (BOOL fSwap)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a138">TileChildWindows</a> (HWND hwndParent, UINT flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a139">UnhookWindowsHook</a> (int nCode, HOOKPROC pfnFilterProc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a140">UpdateWindow</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a141">RegisterShellHookWindow</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a142">DeregisterShellHookWindow</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a143">UserRealizePalette</a> (HDC hdc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HWND&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a144">WindowFromDC</a> (HDC hdc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a145">GetWindowRgn</a> (HWND hwnd, HRGN hrgn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a146">GetActiveKeyboardName</a> (LPWSTR lpszName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a147">LoadPreloadKeyboardLayouts</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a148">OpenKeyboardLayoutFile</a> (LPWSTR lpszKLName, <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> puFlags, <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> poffTable, <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> pKbdInputLocale)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HKL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a149">LoadKeyboardLayoutWorker</a> (HKL hkl, LPCWSTR lpszKLName, UINT uFlags, BOOL fFailSafe)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HKL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a150">LoadKeyboardLayoutEx</a> (HKL hkl, LPCWSTR lpszKLName, UINT uFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HKL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a151">LoadKeyboardLayoutW</a> (LPCWSTR lpszKLName, UINT uFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HKL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a152">LoadKeyboardLayoutA</a> (LPCSTR lpszKLName, UINT uFlags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a153">UnloadKeyboardLayout</a> (IN HKL hkl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HKL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a154">GetKeyboardLayout</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> idThread)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a155">SetDebugErrorLevel</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwLevel)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a7">aiClassWow</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a8">szKLKey</a> [] = L"\\Registry\\Machine\\System\\CurrentControlSet\\Control\\Keyboard Layouts\\"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a9">szKLFile</a> [] = L"Layout <a class="el" href="../../d1/d9/icmui_8def.html#a0">File</a>"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a10">szKLAttributes</a> [] = L"Attributes"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a11">szKLId</a> [] = L"Layout ID"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST LPWSTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a12">pwszKLLibSafety</a> = L"kbdus.dll"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a13">wKbdLocaleSafety</a> = 0x04090409</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST LPWSTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a14">pwszKLLibSafetyJPN</a> = L"kbdjpn.dll"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a15">wKbdLocaleSafetyJPN</a> = 0x04110411</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST LPWSTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a16">pwszKLLibSafetyKOR</a> = L"kbdkor.dll"</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a17">wKbdLocaleSafetyKOR</a> = 0x04120412</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a18">gfLogonProcess</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UNICODE_STRING&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a19">strRootDirectory</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d4/struct__HANDLENODE.html">PHANDLENODE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a22">gphn</a> = NULL</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a23">uCachedCP</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HKL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/client_8c.html#a24">hCachedHKL</a> = 0</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a2" doxytag="client.c::CCH_KL_ID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CCH_KL_ID&nbsp;&nbsp;&nbsp;16          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00077">77</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="client.c::CCH_KL_LIBNAME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CCH_KL_LIBNAME&nbsp;&nbsp;&nbsp;256          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00076">76</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l01983">GetServerIMEKeyboardLayout()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="client.c::GETCCP_SIZE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GETCCP_SIZE&nbsp;&nbsp;&nbsp;8          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00833">833</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l00835">GetClipboardCodePage()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="client.c::NSIZEPRELOAD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NSIZEPRELOAD&nbsp;&nbsp;&nbsp;(4)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03974">3974</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l03976">LoadPreloadKeyboardLayouts()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="client.c::NSZKLKEY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NSZKLKEY&nbsp;&nbsp;&nbsp;(sizeof <a class="el" href="../../d3/d8/client_8c.html#a8">szKLKey</a> + 16)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00066">66</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04516">CheckValidLayoutName()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01983">GetServerIMEKeyboardLayout()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="client.c::SW_FLAG_NRC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SW_FLAG_NRC&nbsp;&nbsp;&nbsp;(SW_SCROLLWINDOW | SW_INVALIDATE | SW_ERASE)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01391">1391</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l01394">ScrollWindow()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="client.c::SW_FLAG_RC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SW_FLAG_RC&nbsp;&nbsp;&nbsp;(SW_SCROLLWINDOW | SW_INVALIDATE | SW_ERASE | SW_SCROLLCHILDREN)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01390">1390</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l01394">ScrollWindow()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a20" doxytag="client.c::HANDLENODE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d4/struct__HANDLENODE.html">_HANDLENODE</a>  <a class="el" href="../../d3/d4/struct__HANDLENODE.html">HANDLENODE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="client.c::PHANDLENODE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef <a class="el" href="../../d3/d4/struct__HANDLENODE.html">HANDLENODE</a>* <a class="el" href="../../d3/d4/struct__HANDLENODE.html">PHANDLENODE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00275">275</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l00353">ClientEmptyClipboard()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00390">GetClipboardData()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l00876">SetClipboardData()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a37" doxytag="client.c::AdjustWindowRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI AdjustWindowRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>style</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fMenu</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00175">175</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00604">_AdjustWindowRectEx()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03173">ConnectIfNecessary</a>, and <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>.
<p>
<pre class="fragment"><div>00179 {
00180     <a class="code" href="../../d1/d0/inc_2user_8h.html#a848">ConnectIfNecessary</a>();
00181 
00182     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/inc_2user_8h.html#a1195">_AdjustWindowRectEx</a>(lprc, style, fMenu, 0L);
00183 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a132" doxytag="client.c::AllowSetForegroundWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL AllowSetForegroundWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dwProcessId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03509">3509</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
Referenced by <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00039">SendWinHelpMessage()</a>.
<p>
<pre class="fragment"><div>03511 {
03512     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(dwProcessId, SFI_XXXALLOWSETFOREGROUNDWINDOW);
03513 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a88" doxytag="client.c::ArrangeIconicWindows" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT ArrangeIconicWindows           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02868">2868</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04563">NtUserCallHwndLock()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>02870 {
02871     <span class="keywordflow">return</span> (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a176">NtUserCallHwndLock</a>(hwnd, SFI_XXXARRANGEICONICWINDOWS);
02872 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a89" doxytag="client.c::BeginDeferWindowPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE BeginDeferWindowPos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>nNumWindows</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02880">2880</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
Referenced by <a class="el" href="../../d6/d7/resizedlg_8cpp-source.html#l01127">CScaleDlg::ResizeControls()</a>, and <a class="el" href="../../d6/d7/resizedlg_8cpp-source.html#l00268">CResizeDlg::ResizeControls()</a>.
<p>
<pre class="fragment"><div>02882 {
02883     <span class="keywordflow">if</span> (nNumWindows &lt; 0) {
02884         RIPERR1(ERROR_INVALID_PARAMETER,
02885                 RIP_WARNING,
02886                 <span class="stringliteral">"Invalid parameter \"nNumWindows\" (%ld) to BeginDeferWindowPos"</span>,
02887                 nNumWindows);
02888 
02889         <span class="keywordflow">return</span> 0;
02890     }
02891 
02892     <span class="keywordflow">return</span> (HANDLE)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(nNumWindows, SFI__BEGINDEFERWINDOWPOS);
02893 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="client.c::BringWindowToTop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL BringWindowToTop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00105">105</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02180">NtUserSetWindowPos()</a>.
<p>
<pre class="fragment"><div>00107 {
00108     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a115">NtUserSetWindowPos</a>(hwnd,
00109                               HWND_TOP,
00110                               0,
00111                               0,
00112                               0,
00113                               0,
00114                               SWP_NOSIZE | SWP_NOMOVE);
00115 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a91" doxytag="client.c::CascadeChildWindows" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CascadeChildWindows           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>nCode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02913">2913</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01061">CascadeWindows()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>02916 {
02917     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>) <a class="code" href="../../d6/d5/mdiwin_8c.html#a21">CascadeWindows</a>(hwndParent, nCode, NULL, 0, NULL);
02918 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="client.c::CheckValidLayoutName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CheckValidLayoutName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPWSTR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpszName</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l04516">4516</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00591">IS_IME_ENABLED</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00149">IS_IME_KBDLAYOUT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00066">NSZKLKEY</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l01870">NtOpenKey()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00062">szKLKey</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l03729">GetActiveKeyboardName()</a>.
<p>
<pre class="fragment"><div>04517 {
04518     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wLayoutId;
04519     WCHAR awchKLRegKey[<a class="code" href="../../d3/d8/client_8c.html#a0">NSZKLKEY</a>];
04520     LPWSTR lpszKLRegKey = &amp;awchKLRegKey[0];
04521     OBJECT_ATTRIBUTES OA;
04522     HANDLE hKey;
04523     UNICODE_STRING UnicodeString;
04524 
04525     UserAssert(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a126">IS_IME_ENABLED</a>());
04526 
04527     wLayoutId = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wcstoul(lpszKLName, NULL, 16);
04528 
04529     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d5/conimep_8h.html#a49">IS_IME_KBDLAYOUT</a>(wLayoutId)) {
04530     <span class="comment">//</span>
04531     <span class="comment">// if it's an IME layout, we need to check if</span>
04532     <span class="comment">// the layout name does exist in the HKEY_LOCAL_MACHINE.</span>
04533     <span class="comment">// if we've upgraded from NT 3.51 the corresponding</span>
04534     <span class="comment">// entry might be lost, because those process-type IMEs that</span>
04535     <span class="comment">// are supported on NT 3.51 are not supported NT 4.0 any more.</span>
04536     <span class="comment">//</span>
04537         wcscpy(lpszKLRegKey, szKLKey);
04538         wcscat(lpszKLRegKey, lpszKLName);
04539         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString, lpszKLRegKey);
04540         InitializeObjectAttributes(&amp;OA, &amp;UnicodeString, OBJ_CASE_INSENSITIVE, NULL, NULL);
04541 
04542         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(<a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>(&amp;hKey, KEY_READ, &amp;OA))) {
04543             <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKey );
04544         } <span class="keywordflow">else</span> {
04545             <span class="comment">// quick'n dirty way to make the fallback name...</span>
04546             lpszKLName[0] = lpszKLName[1] = lpszKLName[2] = lpszKLName[3] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'0'</span>;
04547 <span class="preprocessor">#ifdef LATER</span>
04548 <span class="preprocessor"></span>            <span class="comment">// display a message box to warn user</span>
04549 <span class="preprocessor">#endif</span>
04550 <span class="preprocessor"></span>        }
04551     }
04552 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="client.c::ChildWindowFromPoint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND ChildWindowFromPoint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>POINT&nbsp;</td>
          <td class="mdname" nowrap> <em>point</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00117">117</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00794">FNID_COMBOBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03915">NtUserChildWindowFromPointEx()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1051">PCBOX</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1053">PCOMBOWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l01178">TestWindowProcess()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>.
<p>
<pre class="fragment"><div>00120 {
00121     <span class="comment">/*</span>
00122 <span class="comment">     * Cool Hack Alert... Corel Ventura 5.0</span>
00123 <span class="comment">     * Dies after it calls ChildWindowFromPoint, and</span>
00124 <span class="comment">     * the combobox doesn't have its edit window at 1,1...</span>
00125 <span class="comment">     */</span>
00126     <span class="keywordflow">if</span> ((point.x == 1) &amp;&amp; (point.y == 1)) {
00127         <a class="code" href="../../d7/d9/structtagCBox.html">PCBOX</a> pcCombo;
00128         <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00129 
00130         pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwndParent);
00131         <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00132             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00133 
00134         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT)   &amp;&amp;
00135             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a201">FNID_COMBOBOX</a> &amp;&amp;
00136             <a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a16">TestWindowProcess</a>(pwnd) &amp;&amp;
00137             ((pcCombo = ((<a class="code" href="../../d0/d1/structtagCOMBOWND.html">PCOMBOWND</a>)pwnd)-&gt;pcbox) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp;
00138             !(pcCombo-&gt;fNoEdit)) {
00139 
00140             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ChildWindowFromPoint: Combobox @1,1. Returning spwndEdit"</span>);
00141             <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pcCombo-&gt;spwndEdit);
00142         }
00143 
00144     }
00145 
00146     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a151">NtUserChildWindowFromPointEx</a>(hwndParent, point, 0);
00147 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a121" doxytag="client.c::ClearWindowState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ClearWindowState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03373">3373</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
<pre class="fragment"><div>03376 {
03377     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, flags))
03378         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a178">NtUserCallHwndParam</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), flags, SFI_CLEARWINDOWSTATE);
03379 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="client.c::ClientEmptyClipboard" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ClientEmptyClipboard           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00353">353</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l00285">DeleteClientClipboardHandle()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00091">gcsClipboard</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00277">gphn</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00272">_HANDLENODE::handleClient</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00134">pfnWowEmptyClipBoard</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00275">PHANDLENODE</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l00269">_HANDLENODE::pnext</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00540">OpenClipboard()</a>.
<p>
<pre class="fragment"><div>00354 {
00355     <a class="code" href="../../d3/d4/struct__HANDLENODE.html">PHANDLENODE</a> phnNext;
00356     <a class="code" href="../../d3/d4/struct__HANDLENODE.html">PHANDLENODE</a> phnT;
00357 
00358     RtlEnterCriticalSection(&amp;gcsClipboard);
00359 
00360     phnT = <a class="code" href="../../d3/d8/client_8c.html#a22">gphn</a>;
00361     <span class="keywordflow">while</span> (phnT != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00362         phnNext = phnT-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o0">pnext</a>;
00363 
00364         <span class="keywordflow">if</span> (phnT-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a> != (HANDLE)0)
00365             <a class="code" href="../../d3/d8/client_8c.html#a40">DeleteClientClipboardHandle</a>(phnT);
00366 
00367         LocalFree(phnT);
00368 
00369         phnT = phnNext;
00370     }
00371     <a class="code" href="../../d3/d8/client_8c.html#a22">gphn</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00372 
00373     <span class="comment">/*</span>
00374 <span class="comment">     * Tell wow to cleanup it's clipboard stuff</span>
00375 <span class="comment">     */</span>
00376     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8/clglobal_8c.html#a52">pfnWowEmptyClipBoard</a>) {
00377         <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a62">pfnWowEmptyClipBoard</a>();
00378     }
00379 
00380     RtlLeaveCriticalSection(&amp;gcsClipboard);
00381 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a92" doxytag="client.c::CloseWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CloseWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02927">2927</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">NtUserShowWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02420">WFMINIMIZED</a>.
<p>
<pre class="fragment"><div>02929 {
02930     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
02931 
02932     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02933         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02934     }
02935     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMINIMIZED)) {
02936         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwnd, SW_SHOWMINIMIZED);
02937     }
02938     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02939 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a75" doxytag="client.c::CommonCreateDesktop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HDESK CommonCreateDesktop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrDesktop</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrDevice</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDEVMODEW&nbsp;</td>
          <td class="mdname" nowrap> <em>pDevmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSECURITY_ATTRIBUTES&nbsp;</td>
          <td class="mdname" nowrap> <em>lpsa</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02420">2420</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01173">NtUserCreateDesktop()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01150">NtUserGetProcessWindowStation()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02455">CreateDesktopA()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l02525">CreateDesktopW()</a>.
<p>
<pre class="fragment"><div>02427 {
02428     OBJECT_ATTRIBUTES Obja;
02429     HDESK hdesk = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02430 
02431     InitializeObjectAttributes(&amp;Obja,
02432                                pstrDesktop,
02433                                OBJ_CASE_INSENSITIVE | OBJ_OPENIF |
02434                                    ((lpsa &amp;&amp; lpsa-&gt;bInheritHandle) ? OBJ_INHERIT : 0),
02435                                <a class="code" href="../../d0/d0/ntuser_8h.html#a14">NtUserGetProcessWindowStation</a>(),
02436                                lpsa ? lpsa-&gt;lpSecurityDescriptor : NULL);
02437 
02438     hdesk = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a93">NtUserCreateDesktop</a>(&amp;Obja,
02439                                 pstrDevice,
02440                                 pDevmode,
02441                                 dwFlags,
02442                                 amRequest);
02443 
02444     <span class="keywordflow">return</span> hdesk;
02445 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a69" doxytag="client.c::CommonCreateWindowStation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWINSTA CommonCreateWindowStation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSECURITY_ATTRIBUTES&nbsp;</td>
          <td class="mdname" nowrap> <em>lpsa</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02154">2154</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d7/clinit_8c-source.html#l01729">CtxInitUser32()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03729">GetActiveKeyboardName()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00293">ISREMOTESESSION</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d9/d9/obdir_8c-source.html#l00144">NtOpenDirectoryObject()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00891">NtUserCreateWindowStation()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00081">strRootDirectory</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01931">WinStaQueryInformationW()</a>, and <a class="el" href="../../d7/d9/wsprintf_8c-source.html#l00995">wsprintfW()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02291">CreateWindowStationA()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l02312">CreateWindowStationW()</a>.
<p>
<pre class="fragment"><div>02158 {
02159     OBJECT_ATTRIBUTES   Obja;
02160     HANDLE              hRootDirectory;
02161     HWINSTA             hwinstaNew = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02162     WCHAR               pwszKLID[KL_NAMELENGTH];
02163     HANDLE              hKeyboardFile = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02164     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>               offTable;
02165     UNICODE_STRING      strKLID;
02166     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>                uKbdInputLocale, uFlags;
02167     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>            <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02168 
02169     <span class="comment">/*</span>
02170 <span class="comment">     * Load initial keyboard layout.  Continue even if</span>
02171 <span class="comment">     * this fails (esp. important with KLF_INITTIME set)</span>
02172 <span class="comment">     */</span>
02173     ULONG               KeyboardLayout = 0;
02174     ULONG               Length;
02175     WINSTATIONCONFIG    ConfigData;
02176     BOOLEAN             bResult;
02177 
02178     <span class="keyword">extern</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d2/d8/api_8c.html#a24">CtxInitUser32</a>(VOID);
02179 
02180     hKeyboardFile = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02181 
02182     <span class="comment">/*</span>
02183 <span class="comment">     * Get winstation info</span>
02184 <span class="comment">     */</span>
02185     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a30">ISREMOTESESSION</a>()) {
02186 
02187         bResult = <a class="code" href="../../d3/d8/client_8c.html#a66">WinStaQueryInformationW</a>(SERVERNAME_CURRENT,
02188                                                        LOGONID_CURRENT,
02189                                                        WinStationConfiguration,
02190                                                        &amp;ConfigData,
02191                                                        <span class="keyword">sizeof</span>(ConfigData),
02192                                                        &amp;Length);
02193         <span class="keywordflow">if</span> (bResult) {
02194             KeyboardLayout = ConfigData.User.KeyboardLayout;
02195 
02196             <span class="keywordflow">if</span> (KeyboardLayout) {
02197                 <a class="code" href="../../d6/d0/wsprintf_8c.html#a10">wsprintfW</a>(pwszKLID, L<span class="stringliteral">"%8.8lx"</span>, KeyboardLayout);
02198                 uFlags = KLF_ACTIVATE | KLF_INITTIME;
02199 
02200                 hKeyboardFile = <a class="code" href="../../d6/d0/usercli_8h.html#a604">OpenKeyboardLayoutFile</a>(pwszKLID,
02201                             &amp;uFlags, &amp;offTable, &amp;uKbdInputLocale);
02202 
02203                 RIPMSG0(RIP_WARNING, <span class="stringliteral">"OpenKeyboardLayoutFile() failed. Will use the fallback keyboard layout"</span>);
02204             }
02205         }
02206     }
02207 
02208     <span class="keywordflow">if</span> (hKeyboardFile == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02209 
02210         <a class="code" href="../../d6/d0/usercli_8h.html#a603">GetActiveKeyboardName</a>(pwszKLID);
02211 retry:
02212         uFlags = KLF_ACTIVATE | KLF_INITTIME;
02213         hKeyboardFile = <a class="code" href="../../d6/d0/usercli_8h.html#a604">OpenKeyboardLayoutFile</a>(pwszKLID,
02214                 &amp;uFlags, &amp;offTable, &amp;uKbdInputLocale);
02215         <span class="keywordflow">if</span> (hKeyboardFile == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
02216             <span class="keywordflow">if</span> (wcscmp(pwszKLID, L<span class="stringliteral">"00000409"</span>)) {
02217                 wcscpy(pwszKLID, L<span class="stringliteral">"00000409"</span>);
02218                 RIPMSG0(RIP_WARNING, <span class="stringliteral">"OpendKeyboardLayoutFile() failed: will use the fallback keyboard layout."</span>);
02219                 <span class="keywordflow">goto</span> retry;
02220             }
02221             uKbdInputLocale = 0x04090409;
02222         }
02223     }
02224 
02225 
02226     <span class="comment">/*</span>
02227 <span class="comment">     * Finish the rest of the DLL initialization for WinStations.</span>
02228 <span class="comment">     * Until this point we had no video driver.</span>
02229 <span class="comment">     *</span>
02230 <span class="comment">     * clupu: We have to prevent this for NOIO windowstations !!!</span>
02231 <span class="comment">     */</span>
02232     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
02233         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d8/api_8c.html#a24">CtxInitUser32</a>()) {
02234             RIPMSG0(RIP_WARNING, <span class="stringliteral">"CtxInitUser32 failed"</span>);
02235             <span class="keywordflow">goto</span> Exit;
02236         }
02237     }
02238 
02239     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;strKLID, pwszKLID);
02240 
02241     <span class="comment">/*</span>
02242 <span class="comment">     * If a name was specified, open the parent directory.  Be sure</span>
02243 <span class="comment">     * to test the length rather than the buffer because for NULL</span>
02244 <span class="comment">     * string RtlCreateUnicodeStringFromAsciiz will allocate a</span>
02245 <span class="comment">     * buffer pointing to an empty string.</span>
02246 <span class="comment">     */</span>
02247     <span class="keywordflow">if</span> (pstrName-&gt;Length != 0) {
02248         InitializeObjectAttributes(&amp;Obja,
02249                                    (PUNICODE_STRING)&amp;strRootDirectory,
02250                                    OBJ_CASE_INSENSITIVE,
02251                                    NULL, NULL);
02252         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d8/d0/obdir_8c.html#a1">NtOpenDirectoryObject</a>(&amp;hRootDirectory,
02253                 DIRECTORY_CREATE_OBJECT, &amp;Obja);
02254         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
02255             RIPNTERR0(Status, RIP_VERBOSE, <span class="stringliteral">""</span>);
02256             <span class="keywordflow">goto</span> Exit;
02257         }
02258     } <span class="keywordflow">else</span> {
02259         pstrName = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02260         hRootDirectory = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02261     }
02262 
02263     InitializeObjectAttributes(&amp;Obja, pstrName,
02264             OBJ_CASE_INSENSITIVE  | OBJ_OPENIF |
02265                 ((lpsa &amp;&amp; lpsa-&gt;bInheritHandle) ? OBJ_INHERIT : 0),
02266             hRootDirectory, lpsa ? lpsa-&gt;lpSecurityDescriptor : NULL);
02267 
02268     <span class="comment">/*</span>
02269 <span class="comment">     * NULL hKeyboardFile will let the kernel to utilize</span>
02270 <span class="comment">     * the kbdnull layout which is a built in as a fallback layout</span>
02271 <span class="comment">     * in Win32k.sys.</span>
02272 <span class="comment">     */</span>
02273     hwinstaNew = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a87">NtUserCreateWindowStation</a>(
02274                             &amp;Obja,
02275                             amRequest,
02276                             hKeyboardFile,
02277                             offTable,
02278                             &amp;strKLID,
02279                             uKbdInputLocale);
02280 
02281     <span class="keywordflow">if</span> (hRootDirectory != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
02282         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hRootDirectory);
02283 Exit:
02284     <span class="keywordflow">if</span> (hKeyboardFile) {
02285         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hKeyboardFile);
02286     }
02287 
02288     <span class="keywordflow">return</span> hwinstaNew;
02289 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a78" doxytag="client.c::CommonOpenDesktop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HDESK CommonOpenDesktop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrDesktop</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fInherit</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02555">2555</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01150">NtUserGetProcessWindowStation()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01219">NtUserOpenDesktop()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02575">OpenDesktopA()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l02594">OpenDesktopW()</a>.
<p>
<pre class="fragment"><div>02560 {
02561     OBJECT_ATTRIBUTES ObjA;
02562 
02563     InitializeObjectAttributes( &amp;ObjA,
02564                                 pstrDesktop,
02565                                 OBJ_CASE_INSENSITIVE,
02566                                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a91">NtUserGetProcessWindowStation</a>(),
02567                                 NULL
02568                                 );
02569     <span class="keywordflow">if</span> (fInherit)
02570         ObjA.Attributes |= OBJ_INHERIT;
02571 
02572     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a94">NtUserOpenDesktop</a>(&amp;ObjA, dwFlags, amRequest);
02573 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a72" doxytag="client.c::CommonOpenWindowStation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWINSTA CommonOpenWindowStation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CONST UNICODE_STRING *&nbsp;</td>
          <td class="mdname" nowrap> <em>pstrName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fInherit</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02336">2336</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d9/d9/obdir_8c-source.html#l00144">NtOpenDirectoryObject()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01028">NtUserOpenWindowStation()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00081">strRootDirectory</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00371">WINSTA_NAME</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02382">OpenWindowStationA()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l02400">OpenWindowStationW()</a>.
<p>
<pre class="fragment"><div>02340 {
02341     WCHAR awchName[<span class="keyword">sizeof</span>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a94">WINSTA_NAME</a>) / <span class="keyword">sizeof</span>(WCHAR)];
02342     UNICODE_STRING strDefaultName;
02343     OBJECT_ATTRIBUTES ObjA;
02344     HANDLE hRootDirectory;
02345     HWINSTA hwinsta;
02346     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02347 
02348     InitializeObjectAttributes(&amp;ObjA,
02349                                (PUNICODE_STRING)&amp;strRootDirectory,
02350                                OBJ_CASE_INSENSITIVE,
02351                                NULL, NULL);
02352     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d8/d0/obdir_8c.html#a1">NtOpenDirectoryObject</a>(&amp;hRootDirectory,
02353                                    DIRECTORY_TRAVERSE,
02354                                    &amp;ObjA);
02355     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
02356         RIPNTERR0(Status, RIP_VERBOSE, <span class="stringliteral">""</span>);
02357         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02358     }
02359 
02360     <span class="keywordflow">if</span> (pstrName-&gt;Length == 0) {
02361         RtlCopyMemory(awchName, WINSTA_NAME, <span class="keyword">sizeof</span>(WINSTA_NAME));
02362         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;strDefaultName, awchName);
02363         pstrName = &amp;strDefaultName;
02364     }
02365 
02366     InitializeObjectAttributes( &amp;ObjA,
02367                                 (PUNICODE_STRING)pstrName,
02368                                 OBJ_CASE_INSENSITIVE,
02369                                 hRootDirectory,
02370                                 NULL
02371                                 );
02372     <span class="keywordflow">if</span> (fInherit)
02373         ObjA.Attributes |= OBJ_INHERIT;
02374 
02375     hwinsta = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a88">NtUserOpenWindowStation</a>(&amp;ObjA, amRequest);
02376 
02377     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hRootDirectory);
02378 
02379     <span class="keywordflow">return</span> hwinsta;
02380 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="client.c::CopyIcon" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HICON CopyIcon           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HICON&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hicon</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00150">150</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d8/clres_8c-source.html#l01307">CreateIconIndirect()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01450">GetIconInfo()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d0/d4/ntcon_2server_2getset_8c-source.html#l01164">SrvSetConsoleIcon()</a>.
<p>
<pre class="fragment"><div>00152 {
00153     HICON    hIconT = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00154     ICONINFO ii;
00155 
00156     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d9/clres_8c.html#a61">GetIconInfo</a>(hicon, &amp;ii)) {
00157         hIconT = <a class="code" href="../../d4/d9/clres_8c.html#a60">CreateIconIndirect</a>(&amp;ii);
00158 
00159         DeleteObject(ii.hbmMask);
00160 
00161         <span class="keywordflow">if</span> (ii.hbmColor != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00162             DeleteObject(ii.hbmColor);
00163     }
00164 
00165     <span class="keywordflow">return</span> hIconT;
00166 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a76" doxytag="client.c::CreateDesktopA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HDESK CreateDesktopA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pDesktop</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pDevice</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDEVMODEA&nbsp;</td>
          <td class="mdname" nowrap> <em>pDevmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSECURITY_ATTRIBUTES&nbsp;</td>
          <td class="mdname" nowrap> <em>lpsa</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02455">2455</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l02420">CommonCreateDesktop()</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l00082">RtlAnsiStringToUnicodeString()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l01215">RtlFreeUnicodeString()</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00102">RtlInitAnsiString()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>02462 {
02463     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
02464     ANSI_STRING AnsiString;
02465     UNICODE_STRING UnicodeDesktop;
02466     UNICODE_STRING UnicodeDevice;
02467     PUNICODE_STRING pUnicodeDevice = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02468     LPDEVMODEW lpDevModeW = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02469     HDESK hdesk;
02470 
02471     <a class="code" href="../../d2/d7/string_8c.html#a6">RtlInitAnsiString</a>(&amp;AnsiString, pDesktop);
02472     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d6/d6/nls_8c.html#a21">RtlAnsiStringToUnicodeString</a>(&amp;UnicodeDesktop, &amp;AnsiString, TRUE);
02473 
02474     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
02475         RIPNTERR1(Status, RIP_VERBOSE, <span class="stringliteral">"CreateDesktop fails with Status = 0x%x"</span>, Status);
02476         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02477     }
02478 
02479     <span class="keywordflow">if</span> (pDevice) {
02480 
02481         pUnicodeDevice = &amp;UnicodeDevice;
02482         <a class="code" href="../../d2/d7/string_8c.html#a6">RtlInitAnsiString</a>(&amp;AnsiString, pDevice);
02483         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d6/d6/nls_8c.html#a21">RtlAnsiStringToUnicodeString</a>( &amp;UnicodeDevice, &amp;AnsiString, TRUE );
02484 
02485         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
02486             RIPNTERR0(Status, RIP_VERBOSE, <span class="stringliteral">""</span>);
02487             <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>(&amp;UnicodeDesktop);
02488             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02489         }
02490     }
02491 
02492     <span class="keywordflow">if</span> (pDevmode) {
02493 
02494         lpDevModeW = GdiConvertToDevmodeW(pDevmode);
02495 
02496     }
02497 
02498     hdesk = <a class="code" href="../../d3/d8/client_8c.html#a75">CommonCreateDesktop</a>(&amp;UnicodeDesktop,
02499                                 pUnicodeDevice,
02500                                 lpDevModeW,
02501                                 dwFlags,
02502                                 amRequest,
02503                                 lpsa);
02504 
02505     <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>(&amp;UnicodeDesktop);
02506     <span class="keywordflow">if</span> (pDevice) {
02507         <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>(&amp;UnicodeDevice);
02508     }
02509 
02510     <span class="keywordflow">if</span> (lpDevModeW) {
02511         LocalFree(lpDevModeW);
02512     }
02513 
02514     <span class="keywordflow">return</span> hdesk;
02515 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a77" doxytag="client.c::CreateDesktopW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HDESK CreateDesktopW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pDesktop</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pDevice</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDEVMODEW&nbsp;</td>
          <td class="mdname" nowrap> <em>pDevmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSECURITY_ATTRIBUTES&nbsp;</td>
          <td class="mdname" nowrap> <em>lpsa</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02525">2525</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l02420">CommonCreateDesktop()</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>.
<p>
<pre class="fragment"><div>02532 {
02533     UNICODE_STRING strDesktop;
02534     UNICODE_STRING strDevice;
02535 
02536     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;strDesktop, pDesktop);
02537     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;strDevice, pDevice);
02538 
02539     <span class="keywordflow">return</span> <a class="code" href="../../d3/d8/client_8c.html#a75">CommonCreateDesktop</a>(&amp;strDesktop,
02540                                pDevice ? &amp;strDevice : NULL,
02541                                pDevmode,
02542                                dwFlags,
02543                                amRequest,
02544                                lpsa);
02545 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a93" doxytag="client.c::CreateMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HMENU CreateMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02947">2947</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04510">NtUserCallNoParam()</a>.
<p>
<pre class="fragment"><div>02948 {
02949     <span class="keywordflow">return</span> (HMENU)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a173">NtUserCallNoParam</a>(SFI__CREATEMENU);
02950 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a94" doxytag="client.c::CreatePopupMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HMENU CreatePopupMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02958">2958</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04510">NtUserCallNoParam()</a>.
<p>
<pre class="fragment"><div>02959 {
02960     <span class="keywordflow">return</span> (HMENU)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a173">NtUserCallNoParam</a>(SFI__CREATEPOPUPMENU);
02961 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a70" doxytag="client.c::CreateWindowStationA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWINSTA CreateWindowStationA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pwinsta</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwReserved</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSECURITY_ATTRIBUTES&nbsp;</td>
          <td class="mdname" nowrap> <em>lpsa</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02291">2291</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l02154">CommonCreateWindowStation()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00544">RtlCreateUnicodeStringFromAsciiz()</a>, and <a class="el" href="../../d7/d5/nls_8c-source.html#l01215">RtlFreeUnicodeString()</a>.
<p>
<pre class="fragment"><div>02296 {
02297     UNICODE_STRING UnicodeString;
02298     HWINSTA hwinsta;
02299 
02300     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d7/string_8c.html#a13">RtlCreateUnicodeStringFromAsciiz</a>(&amp;UnicodeString, pwinsta))
02301         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02302 
02303     hwinsta = <a class="code" href="../../d3/d8/client_8c.html#a69">CommonCreateWindowStation</a>(&amp;UnicodeString, amRequest, lpsa);
02304 
02305     <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>(&amp;UnicodeString);
02306 
02307     <span class="keywordflow">return</span> hwinsta;
02308 
02309     UNREFERENCED_PARAMETER(dwReserved);
02310 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a71" doxytag="client.c::CreateWindowStationW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWINSTA CreateWindowStationW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pwinsta</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwReserved</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSECURITY_ATTRIBUTES&nbsp;</td>
          <td class="mdname" nowrap> <em>lpsa</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02312">2312</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l02154">CommonCreateWindowStation()</a>, and <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>.
<p>
<pre class="fragment"><div>02317 {
02318     UNICODE_STRING strWinSta;
02319 
02320     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;strWinSta, pwinsta);
02321 
02322     <span class="keywordflow">return</span> <a class="code" href="../../d3/d8/client_8c.html#a69">CommonCreateWindowStation</a>(&amp;strWinSta, amRequest, lpsa);
02323 
02324     UNREFERENCED_PARAMETER(dwReserved);
02325 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="client.c::DeleteClientClipboardHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL DeleteClientClipboardHandle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d3/d4/struct__HANDLENODE.html">PHANDLENODE</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>phn</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00285">285</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00273">_HANDLENODE::fGlobalHandle</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00270">_HANDLENODE::fmt</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00272">_HANDLENODE::handleClient</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00124">UserGlobalFree</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00128">USERGLOBALLOCK</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00123">USERGLOBALUNLOCK</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l00353">ClientEmptyClipboard()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l00876">SetClipboardData()</a>.
<p>
<pre class="fragment"><div>00287 {
00288     LPMETAFILEPICT lpMFP;
00289 
00290     UserAssert(phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a> != (HANDLE)0);
00291 
00292     <span class="keywordflow">switch</span> (phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o1">fmt</a>) {
00293     <span class="keywordflow">case</span> CF_BITMAP:
00294     <span class="keywordflow">case</span> CF_DSPBITMAP:
00295     <span class="keywordflow">case</span> CF_PALETTE:
00296         <span class="comment">// Does nothing (should remove).</span>
00297         <span class="comment">//</span>
00298         <span class="comment">//GdiDeleteLocalObject((ULONG)hobjDelete);</span>
00299         <span class="keywordflow">break</span>;
00300 
00301     <span class="keywordflow">case</span> CF_METAFILEPICT:
00302     <span class="keywordflow">case</span> CF_DSPMETAFILEPICT:
00303         <a class="code" href="../../d6/d0/usercli_8h.html#a4">USERGLOBALLOCK</a>(phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a>, lpMFP);
00304         <span class="keywordflow">if</span> (lpMFP) {
00305             DeleteMetaFile(lpMFP-&gt;hMF);
00306             <a class="code" href="../../d6/d0/usercli_8h.html#a1">USERGLOBALUNLOCK</a>(phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a>);
00307             <a class="code" href="../../d6/d0/usercli_8h.html#a2">UserGlobalFree</a>(phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a>);
00308         } <span class="keywordflow">else</span> {
00309             RIPMSG1(RIP_ERROR,<span class="stringliteral">"DeleteClientClipboardHandle, can't lock client handle %#p\n"</span>,phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a>);
00310             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00311         }
00312         <span class="keywordflow">break</span>;
00313 
00314     <span class="keywordflow">case</span> CF_ENHMETAFILE:
00315     <span class="keywordflow">case</span> CF_DSPENHMETAFILE:
00316         DeleteEnhMetaFile((HENHMETAFILE)phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a>);
00317         <span class="keywordflow">break</span>;
00318 
00319     <span class="keywordflow">default</span>:
00320     <span class="comment">//case CF_TEXT:</span>
00321     <span class="comment">//case CF_OEMTEXT:</span>
00322     <span class="comment">//case CF_UNICODETEXT:</span>
00323     <span class="comment">//case CF_LOCALE:</span>
00324     <span class="comment">//case CF_DSPTEXT:</span>
00325     <span class="comment">//case CF_DIB:</span>
00326     <span class="comment">//case CF_DIBV5:</span>
00327         <span class="keywordflow">if</span> (phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o4">fGlobalHandle</a>) {
00328             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a2">UserGlobalFree</a>(phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a>)) {
00329              RIPMSG1(RIP_WARNING, <span class="stringliteral">"CloseClipboard UserGlobalFree(%#p) Failed\n"</span>, phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a>);
00330                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00331             }
00332         } <span class="keywordflow">else</span> {
00333             UserAssert(GlobalFlags(phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a>) == GMEM_INVALID_HANDLE);
00334         }
00335         <span class="keywordflow">break</span>;
00336     }
00337 
00338     <span class="comment">/*</span>
00339 <span class="comment">     * Deleted successfully</span>
00340 <span class="comment">     */</span>
00341     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00342 
00343 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a142" doxytag="client.c::DeregisterShellHookWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL DeregisterShellHookWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03634">3634</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04543">NtUserCallHwnd()</a>.
<p>
<pre class="fragment"><div>03636 {
03637     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a175">NtUserCallHwnd</a>(hwnd, SFI__DEREGISTERSHELLHOOKWINDOW);
03638 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a95" doxytag="client.c::DestroyCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL DestroyCaret           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02981">2981</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04510">NtUserCallNoParam()</a>.
<p>
Referenced by <a class="el" href="../../d6/d3/edecrare_8c-source.html#l01225">ECSetCaretHandler()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>02982 {
02983     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a173">NtUserCallNoParam</a>(SFI_ZZZDESTROYCARET);
02984 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a96" doxytag="client.c::DirectedYield" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DirectedYield           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dwThreadId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02992">2992</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.
<p>
<pre class="fragment"><div>02994 {
02995     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(dwThreadId, SFI_XXXDIRECTEDYIELD);
02996 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a87" doxytag="client.c::DispatchClientMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT DispatchClientMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pfn</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02822">2822</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00187">CALLPROC_WOWCHECKPWW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, and <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00047">ValidateHwndNoRip()</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/clinit_8c-source.html#l01219">ClientThreadSetup()</a>.
<p>
<pre class="fragment"><div>02828 {
02829     HWND hwnd = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;CallbackWnd.hwnd;
02830 
02831     <span class="comment">/*</span>
02832 <span class="comment">     * Assert that the header comment is legit (must be).</span>
02833 <span class="comment">     * for WM_TIMERs not associated to a window, pwnd can be NULL. So</span>
02834 <span class="comment">     *  don't rip validating the handle.</span>
02835 <span class="comment">     */</span>
02836     UserAssert(pwnd == <a class="code" href="../../d3/d9/client_2wow_8c.html#a1">ValidateHwndNoRip</a>(hwnd));
02837 
02838     <span class="comment">/*</span>
02839 <span class="comment">     * Add assert to catch dispatching messages to a thread not associated</span>
02840 <span class="comment">     * with a desktop.</span>
02841 <span class="comment">     */</span>
02842     UserAssert(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;ulClientDelta != 0);
02843 
02844     <span class="comment">/*</span>
02845 <span class="comment">     * More complicate then regular CALLPROC_WOWCHECK() we want to get the</span>
02846 <span class="comment">     * PWW so wow doesn't have to</span>
02847 <span class="comment">     */</span>
02848 
02849     <span class="comment">/* Bug 234292 - joejo</span>
02850 <span class="comment">     * Since the called window/dialog proc may have a different calling</span>
02851 <span class="comment">     * convention, we must wrap the call and, check esp and replace with</span>
02852 <span class="comment">     * a good esp when the call returns. This is what UserCallWinProc* does.</span>
02853 <span class="comment">    */</span>
02854 <span class="preprocessor">#ifdef _WIN64</span>
02855 <span class="preprocessor"></span>    UNREFERENCED_PARAMETER(pwnd);
02856 <span class="preprocessor">#endif</span>
02857 <span class="preprocessor"></span>
02858     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a19">CALLPROC_WOWCHECKPWW</a>((WNDPROC)pfn, hwnd, message, wParam, lParam, &amp;(pwnd-&gt;state));
02859 
02860 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="client.c::DrawIcon" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI DrawIcon           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HICON&nbsp;</td>
          <td class="mdname" nowrap> <em>hicon</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01204">1204</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l01210">DrawIconEx()</a>.
<p>
Referenced by <a class="el" href="../../d7/d1/output_8c-source.html#l04700">ConsoleWindowProc()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>.
<p>
<pre class="fragment"><div>01205 {
01206     <span class="keywordflow">return</span> <a class="code" href="../../d3/d8/client_8c.html#a50">DrawIconEx</a>(hdc, x, y, hicon, 0, 0, 0, 0, DI_NORMAL | DI_COMPAT | DI_DEFAULTSIZE );
01207 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a50" doxytag="client.c::DrawIconEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL DrawIconEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HICON&nbsp;</td>
          <td class="mdname" nowrap> <em>hIcon</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cy</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>istepIfAniCur</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HBRUSH&nbsp;</td>
          <td class="mdname" nowrap> <em>hbrFlickerFreeDraw</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>diFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01210">1210</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00498">_DRAWICONEXDATA::cx</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00499">_DRAWICONEXDATA::cy</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a976">DRAWICONEXDATA</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00090">gcsHdc</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00101">ghdcBits2</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00497">_DRAWICONEXDATA::hbmColor</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00496">_DRAWICONEXDATA::hbmMask</a>, <a class="el" href="../../d4/d1/client_2drawtext_8c-source.html#l00027">IsMetaFile()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01710">NtUserDrawIconEx()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l01204">DrawIcon()</a>, <a class="el" href="../../d0/d2/mngrayc_8c-source.html#l00075">DrawStateW()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01899">LoadBmp()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00419">xxxStaticPaint()</a>.
<p>
<pre class="fragment"><div>01213 {
01214     <a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html">DRAWICONEXDATA</a> did;
01215     HBITMAP hbmT;
01216     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> retval = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01217     HDC hdcr;
01218 
01219     <span class="keywordflow">if</span> (diFlags &amp; ~DI_VALID) {
01220         RIPERR0(ERROR_INVALID_PARAMETER, RIP_VERBOSE, <span class="stringliteral">""</span>);
01221         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01222     }
01223 
01224     <span class="keywordflow">if</span> (diFlags &amp; DI_DEFAULTSIZE) {
01225         cx = 0;
01226         <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = 0;
01227     }
01228 
01229     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a547">IsMetaFile</a>(hdc)) {
01230         hdcr = GdiConvertAndCheckDC(hdc);
01231         <span class="keywordflow">if</span> (hdcr == (HDC)0)
01232             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01233 
01234         <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a107">NtUserDrawIconEx</a>(hdcr, x, y, hIcon, cx, cy, istepIfAniCur,
01235                                 hbrFlickerFreeDraw, diFlags, FALSE, &amp;did);
01236     }
01237 
01238     <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a107">NtUserDrawIconEx</a>(NULL, 0, 0, hIcon, cx, cy, 0, NULL, 0, TRUE, &amp;did)) {
01239         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01240     }
01241 
01242     <span class="keywordflow">if</span> (diFlags == 0)
01243         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01244 
01245     RtlEnterCriticalSection(&amp;gcsHdc);
01246 
01247     <span class="comment">/*</span>
01248 <span class="comment">     * Setup the attributes</span>
01249 <span class="comment">     */</span>
01250     <span class="keywordflow">if</span> (!cx)
01251         cx = did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o2">cx</a>;
01252     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>)
01253         <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o3">cy</a> / 2;
01254 
01255     SetTextColor(hdc, 0x00000000L);
01256     SetBkColor(hdc, 0x00FFFFFFL);
01257 
01258     <span class="keywordflow">if</span> (diFlags &amp; DI_MASK) {
01259 
01260         <span class="keywordflow">if</span> (did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o0">hbmMask</a>) {
01261 
01262             hbmT = SelectObject(ghdcBits2, did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o0">hbmMask</a>);
01263             StretchBlt(hdc,
01264                        x,
01265                        y,
01266                        cx,
01267                        cy,
01268                        ghdcBits2,
01269                        0,
01270                        0,
01271                        did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o2">cx</a>,
01272                        did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o3">cy</a> / 2,
01273                        SRCAND);
01274             SelectObject(ghdcBits2,hbmT);
01275             retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01276         }
01277     }
01278 
01279     <span class="keywordflow">if</span> (diFlags &amp; DI_IMAGE) {
01280 
01281         <span class="keywordflow">if</span> (did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o1">hbmColor</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01282             hbmT = SelectObject(ghdcBits2, did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o1">hbmColor</a>);
01283             StretchBlt(hdc,
01284                        x,
01285                        y,
01286                        cx,
01287                        cy,
01288                        ghdcBits2,
01289                        0,
01290                        0,
01291                        did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o2">cx</a>,
01292                        did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o3">cy</a> / 2,
01293                        SRCINVERT);
01294             SelectObject(ghdcBits2, hbmT);
01295             retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01296         } <span class="keywordflow">else</span> {
01297             <span class="keywordflow">if</span> (did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o0">hbmMask</a>) {
01298                 hbmT = SelectObject(ghdcBits2, did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o0">hbmMask</a>);
01299                 StretchBlt(hdc,
01300                            x,
01301                            y,
01302                            cx,
01303                            cy,
01304                            ghdcBits2,
01305                            0,
01306                            did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o3">cy</a> / 2,
01307                            did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o2">cx</a>,
01308                            did.<a class="code" href="../../d9/d8/struct__DRAWICONEXDATA.html#o3">cy</a> / 2,
01309                            SRCINVERT);
01310                 SelectObject(ghdcBits2, hbmT);
01311                 retval = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01312             }
01313         }
01314     }
01315     RtlLeaveCriticalSection(&amp;gcsHdc);
01316 
01317     <span class="keywordflow">return</span> retval;
01318 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a97" doxytag="client.c::DrawMenuBar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL DrawMenuBar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03004">3004</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04563">NtUserCallHwndLock()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00282">MainWndProc()</a>.
<p>
<pre class="fragment"><div>03006 {
03007     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a176">NtUserCallHwndLock</a>(hwnd, SFI_XXXDRAWMENUBAR);
03008 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="client.c::EnableEUDC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY EnableEUDC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l03223">LoadRemoteFonts()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a98" doxytag="client.c::EnableWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL EnableWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bEnable</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03016">3016</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04626">NtUserCallHwndParamLock()</a>.
<p>
Referenced by <a class="el" href="../../d2/d0/bench_8c-source.html#l01284">ClearDlg()</a>, <a class="el" href="../../d8/d7/appui_8cpp-source.html#l00399">CColorMatchDialog::EnableApplyButton()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l01293">CMonitorProfileManagement::FillList()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l00741">CPrinterProfileManagement::FillList()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l00121">CDeviceProfileManagement::FillList()</a>, <a class="el" href="../../d5/d7/propdlg_8cpp-source.html#l00124">CAdvancedPage::OnCommand()</a>, <a class="el" href="../../d7/d4/profassoc_8cpp-source.html#l00421">CAddDeviceDialog::OnCommand()</a>, <a class="el" href="../../d7/d4/profassoc_8cpp-source.html#l00220">CProfileAssociationPage::OnCommand()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l00950">CPrinterProfileManagement::OnCommand()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l00360">CDeviceProfileManagement::OnCommand()</a>, <a class="el" href="../../d7/d4/profassoc_8cpp-source.html#l00389">CAddDeviceDialog::OnInit()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l01397">CMonitorProfileManagement::OnInit()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l01220">CScannerProfileManagement::OnInit()</a>, <a class="el" href="../../d6/d6/devprop_8cpp-source.html#l00822">CPrinterProfileManagement::OnInit()</a>, <a class="el" href="../../d5/d7/propdlg_8cpp-source.html#l00084">CAdvancedPage::Update()</a>, <a class="el" href="../../d8/d7/appui_8cpp-source.html#l00363">CColorMatchDialog::UpdateControls()</a>, <a class="el" href="../../d7/d4/profassoc_8cpp-source.html#l00173">CProfileAssociationPage::UpdateDeviceListBox()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>03019 {
03020     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a179">NtUserCallHwndParamLock</a>(hwnd, bEnable,
03021                                          SFI_XXXENABLEWINDOW);
03022 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a90" doxytag="client.c::EndDeferWindowPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL EndDeferWindowPos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDWP&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hWinPosInfo</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02901">2901</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01865">NtUserEndDeferWindowPosEx()</a>.
<p>
Referenced by <a class="el" href="../../d6/d7/resizedlg_8cpp-source.html#l01127">CScaleDlg::ResizeControls()</a>, and <a class="el" href="../../d6/d7/resizedlg_8cpp-source.html#l00268">CResizeDlg::ResizeControls()</a>.
<p>
<pre class="fragment"><div>02903 {
02904     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a109">NtUserEndDeferWindowPosEx</a>(hWinPosInfo, FALSE);
02905 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a99" doxytag="client.c::EnumClipboardFormats" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT EnumClipboardFormats           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fmt</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03030">3030</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>03032 {
03033     <span class="comment">/*</span>
03034 <span class="comment">     * So apps can tell if the API failed or just ran out of formats</span>
03035 <span class="comment">     * we "clear" the last error.</span>
03036 <span class="comment">     */</span>
03037     UserSetLastError(ERROR_SUCCESS);
03038 
03039     <span class="keywordflow">return</span> (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(fmt, SFI__ENUMCLIPBOARDFORMATS);
03040 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a100" doxytag="client.c::FlashWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL FlashWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bInvert</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03050">3050</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l13325">NtUserFlashWindowEx()</a>.
<p>
<pre class="fragment"><div>03053 {
03054     FLASHWINFO fwi = {
03055             <span class="keyword">sizeof</span>(FLASHWINFO), <span class="comment">// cbSize</span>
03056             hwnd,   <span class="comment">// hwnd</span>
03057             bInvert ? (FLASHW_CAPTION | FLASHW_TRAY) : 0,   <span class="comment">// flags</span>
03058             1,      <span class="comment">// uCount</span>
03059             0       <span class="comment">// dwTimeout</span>
03060         };
03061     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a405">NtUserFlashWindowEx</a>(&amp;fwi);
03062 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a146" doxytag="client.c::GetActiveKeyboardName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID GetActiveKeyboardName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPWSTR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpszName</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03729">3729</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l04516">CheckValidLayoutName()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00591">IS_IME_ENABLED</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l00166">NtCreateKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l00504">NtDeleteValueKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l01870">NtOpenKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l02187">NtQueryValueKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l02672">NtSetValueKey()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d5/d6/rtl_2regutil_8c-source.html#l01564">RtlOpenCurrentUser()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>, and <a class="el" href="../../d2/d4/w32_2ntuser_2rtl_2random_8c-source.html#l00146">wcsncpycch()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02154">CommonCreateWindowStation()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00049">UpdatePerUserSystemParameters()</a>.
<p>
<pre class="fragment"><div>03731 {
03732     LPTSTR szKbdActive = TEXT(<span class="stringliteral">"Active"</span>);
03733     LPTSTR szKbdLayout = TEXT(<span class="stringliteral">"Keyboard Layout"</span>);
03734     LPTSTR szKbdLayoutPreload = TEXT(<span class="stringliteral">"Keyboard Layout\\Preload"</span>);
03735     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> rc;
03736     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbSize;
03737     HANDLE UserKeyHandle, hKey, hKeyPreload;
03738     OBJECT_ATTRIBUTES ObjA;
03739     UNICODE_STRING UnicodeString;
03740     ULONG CreateDisposition;
03741     <span class="keyword">struct </span>{
03742         KEY_VALUE_PARTIAL_INFORMATION KeyInfo;
03743         WCHAR KeyLayoutId[KL_NAMELENGTH];
03744     } KeyValueId;
03745 
03746     <span class="comment">/*</span>
03747 <span class="comment">     * Load initial keyboard name ( HKEY_CURRENT_USER\Keyboard Layout\Preload\1 )</span>
03748 <span class="comment">     */</span>
03749     rc = <a class="code" href="../../d4/d7/rtl_2regutil_8c.html#a27">RtlOpenCurrentUser</a>( MAXIMUM_ALLOWED, &amp;UserKeyHandle );
03750     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc ))
03751     {
03752         RIPMSG1( RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Could NOT open HKEY_CURRENT_USER (%lx).\n"</span>, rc );
03753         wcscpy( lpszName, L<span class="stringliteral">"00000409"</span> );
03754         <span class="keywordflow">return</span>;
03755     }
03756 
03757     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;UnicodeString, szKbdLayoutPreload );
03758     InitializeObjectAttributes( &amp;ObjA,
03759                                 &amp;UnicodeString,
03760                                 OBJ_CASE_INSENSITIVE,
03761                                 UserKeyHandle,
03762                                 NULL );
03763     rc = <a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>( &amp;hKey,
03764                     KEY_ALL_ACCESS,
03765                     &amp;ObjA );
03766     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc ))
03767     {
03768         <span class="comment">/*</span>
03769 <span class="comment">         *  Query the value from the registry.</span>
03770 <span class="comment">         */</span>
03771         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;UnicodeString, L<span class="stringliteral">"1"</span> );
03772 
03773         rc = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>( hKey,
03774                               &amp;UnicodeString,
03775                               KeyValuePartialInformation,
03776                               &amp;KeyValueId,
03777                               <span class="keyword">sizeof</span>(KeyValueId),
03778                               &amp;cbSize );
03779 
03780         <span class="keywordflow">if</span> ( rc == STATUS_BUFFER_OVERFLOW ) {
03781             RIPMSG0(RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Buffer overflow."</span>);
03782             rc = STATUS_SUCCESS;
03783         }
03784         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc )) {
03785             <a class="code" href="../../d1/d5/w32_2ntuser_2rtl_2random_8c.html#a3">wcsncpycch</a>( lpszName, (LPWSTR)KeyValueId.KeyInfo.Data, KL_NAMELENGTH - 1 );
03786             lpszName[KL_NAMELENGTH - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
03787         } <span class="keywordflow">else</span> {
03788             <span class="comment">/*</span>
03789 <span class="comment">             * Error reading value...use default</span>
03790 <span class="comment">             */</span>
03791             wcscpy( lpszName, L<span class="stringliteral">"00000409"</span> );
03792         }
03793 
03794         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKey );
03795         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( UserKeyHandle );
03796         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a126">IS_IME_ENABLED</a>()) {
03797             <a class="code" href="../../d3/d8/client_8c.html#a31">CheckValidLayoutName</a>( lpszName );
03798         }
03799         <span class="keywordflow">return</span>;
03800     }
03801 
03802     <span class="comment">/*</span>
03803 <span class="comment">     * NOTE: The code below is only executed the first time a user logs</span>
03804 <span class="comment">     *       on after an upgrade from NT3.x to NT4.0.</span>
03805 <span class="comment">     */</span>
03806     <span class="comment">/*</span>
03807 <span class="comment">     * The Preload key does not exist in the registry.  Try reading the</span>
03808 <span class="comment">     * old registry entry "Keyboard Layout\Active".  If it exists, we</span>
03809 <span class="comment">     * convert it to the new style Preload key.</span>
03810 <span class="comment">     */</span>
03811     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;UnicodeString, szKbdLayout );
03812     InitializeObjectAttributes( &amp;ObjA,
03813                                 &amp;UnicodeString,
03814                                 OBJ_CASE_INSENSITIVE,
03815                                 UserKeyHandle,
03816                                 NULL );
03817     rc = <a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>( &amp;hKey,
03818                     KEY_ALL_ACCESS,
03819                     &amp;ObjA );
03820 
03821     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( UserKeyHandle );
03822 
03823     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc ))
03824     {
03825         RIPMSG1( RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Could not determine active keyboard layout (%lx).\n"</span>, rc  );
03826         wcscpy( lpszName, L<span class="stringliteral">"00000409"</span> );
03827         <span class="keywordflow">return</span>;
03828     }
03829 
03830     <span class="comment">/*</span>
03831 <span class="comment">     *  Query the value from the registry.</span>
03832 <span class="comment">     */</span>
03833     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;UnicodeString, szKbdActive );
03834 
03835     rc = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>( hKey,
03836                           &amp;UnicodeString,
03837                           KeyValuePartialInformation,
03838                           &amp;KeyValueId,
03839                           <span class="keyword">sizeof</span>(KeyValueId),
03840                           &amp;cbSize );
03841 
03842     <span class="keywordflow">if</span> ( rc == STATUS_BUFFER_OVERFLOW ) {
03843         RIPMSG0(RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Buffer overflow."</span>);
03844         rc = STATUS_SUCCESS;
03845     }
03846     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc )) {
03847         <a class="code" href="../../d1/d5/w32_2ntuser_2rtl_2random_8c.html#a3">wcsncpycch</a>( lpszName, (LPWSTR)KeyValueId.KeyInfo.Data, KL_NAMELENGTH - 1 );
03848         lpszName[KL_NAMELENGTH - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
03849     } <span class="keywordflow">else</span> {
03850         <span class="comment">/*</span>
03851 <span class="comment">         * Error reading value...use default</span>
03852 <span class="comment">         */</span>
03853         RIPMSG1( RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Could not query active keyboard layout (%lx).\n"</span>, rc );
03854         wcscpy( lpszName, L<span class="stringliteral">"00000409"</span> );
03855         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKey );
03856         <span class="keywordflow">return</span>;
03857     }
03858 
03859     <span class="comment">/*</span>
03860 <span class="comment">     * if 'Active' keyboard layout is for Japanese/Korean layout. just put</span>
03861 <span class="comment">     * IME prefix, because user prefer to have keyboard layout with IME as</span>
03862 <span class="comment">     * default.</span>
03863 <span class="comment">     */</span>
03864     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a126">IS_IME_ENABLED</a>()) {
03865         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wLanguageId = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wcstoul(lpszName, NULL, 16);
03866 
03867         <span class="comment">/*</span>
03868 <span class="comment">         * Default keyboard layout values.</span>
03869 <span class="comment">         *</span>
03870 <span class="comment">         * [LATER, if needed]</span>
03871 <span class="comment">         *</span>
03872 <span class="comment">         * The hard-codeed default value might be wanted</span>
03873 <span class="comment">         * come from registry or somewhere...</span>
03874 <span class="comment">         */</span>
03875         CONST LPWSTR lpszJapaneseDefaultLayout = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"E0010411"</span>;
03876         CONST LPWSTR lpszKoreanDefaultLayout   = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"E0010412"</span>;
03877 
03878         <span class="comment">/*</span>
03879 <span class="comment">         * Need to mask off hi-word to look up locale ID, because</span>
03880 <span class="comment">         * NEC PC-9800 Series version of Windows NT 3.5 contains</span>
03881 <span class="comment">         * bogus value in hi-word.</span>
03882 <span class="comment">         */</span>
03883         wLanguageId &amp;= 0x0000FFFF;
03884 
03885         <span class="keywordflow">if</span> (PRIMARYLANGID(wLanguageId) == LANG_JAPANESE) {
03886 
03887             <span class="comment">/*</span>
03888 <span class="comment">             * Set Japanese default layout Id.</span>
03889 <span class="comment">             */</span>
03890             wcscpy(lpszName,lpszJapaneseDefaultLayout);
03891 
03892         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PRIMARYLANGID(wLanguageId) == LANG_KOREAN) {
03893 
03894             <span class="comment">/*</span>
03895 <span class="comment">             * Set Korean default layout Id.</span>
03896 <span class="comment">             */</span>
03897             wcscpy(lpszName,lpszKoreanDefaultLayout);
03898         }
03899     }
03900 
03901     <span class="comment">/*</span>
03902 <span class="comment">     * We have the Active value.  Now create the Preload key.</span>
03903 <span class="comment">     */</span>
03904     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;UnicodeString, L<span class="stringliteral">"Preload"</span> );
03905     InitializeObjectAttributes( &amp;ObjA,
03906                                 &amp;UnicodeString,
03907                                 OBJ_CASE_INSENSITIVE,
03908                                 hKey,
03909                                 NULL );
03910     rc = <a class="code" href="../../d7/d7/ntapi_8c.html#a14">NtCreateKey</a>( &amp;hKeyPreload,
03911                       STANDARD_RIGHTS_WRITE |
03912                         KEY_QUERY_VALUE |
03913                         KEY_ENUMERATE_SUB_KEYS |
03914                         KEY_SET_VALUE |
03915                         KEY_CREATE_SUB_KEY,
03916                       &amp;ObjA,
03917                       0,
03918                       NULL,
03919                       0,
03920                       &amp;CreateDisposition );
03921 
03922     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc ))
03923     {
03924         RIPMSG1( RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Could NOT create Preload key (%lx).\n"</span>, rc );
03925         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKey );
03926         <span class="keywordflow">return</span>;
03927     }
03928 
03929     <span class="comment">/*</span>
03930 <span class="comment">     * Set the new value entry.</span>
03931 <span class="comment">     */</span>
03932     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;UnicodeString, L<span class="stringliteral">"1"</span> );
03933     rc = <a class="code" href="../../d7/d7/ntapi_8c.html#a29">NtSetValueKey</a>( hKeyPreload,
03934                         &amp;UnicodeString,
03935                         0,
03936                         REG_SZ,
03937                         lpszName,
03938                         (wcslen(lpszName)+1) * <span class="keyword">sizeof</span>(WCHAR)
03939                       );
03940 
03941     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc ))
03942     {
03943         RIPMSG1( RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Could NOT create value entry 1 for Preload key (%lx).\n"</span>, rc );
03944         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKey );
03945         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKeyPreload );
03946         <span class="keywordflow">return</span>;
03947     }
03948 
03949     <span class="comment">/*</span>
03950 <span class="comment">     * Success: attempt to delete the Active value key.</span>
03951 <span class="comment">     */</span>
03952     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>( &amp;UnicodeString, szKbdActive );
03953     rc = <a class="code" href="../../d7/d7/ntapi_8c.html#a16">NtDeleteValueKey</a>( hKey, &amp;UnicodeString );
03954 
03955     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( rc ))
03956     {
03957         RIPMSG1( RIP_WARNING, <span class="stringliteral">"GetActiveKeyboardName - Could NOT delete value key 'Active'.\n"</span>, rc );
03958     }
03959     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKey );
03960     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>( hKeyPreload );
03961 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a103" doxytag="client.c::GetClientKeyboardType" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetClientKeyboardType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PCLIENTKEYBOARDTYPE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>KeyboardType</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03097">3097</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00293">ISREMOTESESSION</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l01931">WinStaQueryInformationW()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l03143">GetKeyboardType()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>.
<p>
<pre class="fragment"><div>03098 {
03099     ULONG Length;
03100     WINSTATIONCLIENTW ClientData;
03101     <span class="keyword">static</span> CLIENTKEYBOARDTYPE ClientKeyboard = { (ULONG)-1, (ULONG)-1, (ULONG)-1 };
03102 
03103     <span class="comment">//</span>
03104     <span class="comment">// Should be called only if this is a HYDRA remote session.</span>
03105     <span class="comment">//</span>
03106     UserAssert(<a class="code" href="../../d6/d0/usercli_8h.html#a30">ISREMOTESESSION</a>());
03107 
03108     <span class="comment">//  Skip if this is the console</span>
03109     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a30">ISREMOTESESSION</a>()) {
03110         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03111     }
03112 
03113     <span class="keywordflow">if</span> (ClientKeyboard.Type == (ULONG)-1) {
03114 
03115         <span class="comment">// Fetch the WinStation's basic information</span>
03116         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d8/client_8c.html#a66">WinStaQueryInformationW</a>(SERVERNAME_CURRENT,
03117                                    LOGONID_CURRENT,
03118                                    WinStationClient,
03119                                    &amp;ClientData,
03120                                    <span class="keyword">sizeof</span>(ClientData),
03121                                    &amp;Length)) {
03122             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03123         }
03124 
03125         ClientKeyboard.Type        = ClientData.KeyboardType;
03126         ClientKeyboard.SubType     = ClientData.KeyboardSubType;
03127         ClientKeyboard.FunctionKey = ClientData.KeyboardFunctionKey;
03128 
03129     }
03130 
03131     *KeyboardType = ClientKeyboard;
03132 
03133     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03134 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="client.c::GetClipboardCodePage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT GetClipboardCodePage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LCID&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LCTYPE&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00835">835</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00833">GETCCP_SIZE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l00390">GetClipboardData()</a>.
<p>
<pre class="fragment"><div>00838 {
00839     WCHAR wszCodePage[<a class="code" href="../../d3/d8/client_8c.html#a3">GETCCP_SIZE</a>];
00840     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> uCPage;
00841 
00842     <span class="keywordflow">if</span> (GetLocaleInfoW(uLocale, uLocaleType, wszCodePage, GETCCP_SIZE)) {
00843 
00844         uCPage = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wcstol(wszCodePage, NULL, 10);
00845 
00846     } <span class="keywordflow">else</span> {
00847 
00848         <span class="keywordflow">switch</span>(uLocaleType) {
00849 
00850         <span class="keywordflow">case</span> LOCALE_IDEFAULTCODEPAGE:
00851             uCPage = CP_OEMCP;
00852             <span class="keywordflow">break</span>;
00853 
00854         <span class="keywordflow">case</span> LOCALE_IDEFAULTANSICODEPAGE:
00855             uCPage = CP_ACP;
00856             <span class="keywordflow">break</span>;
00857 
00858         <span class="keywordflow">default</span>:
00859             uCPage = CP_MACCP;
00860             <span class="keywordflow">break</span>;
00861         }
00862     }
00863 
00864     <span class="keywordflow">return</span> uCPage;
00865 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="client.c::GetClipboardData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE WINAPI GetClipboardData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>uFmt</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00390">390</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00189">ConvertMemHandle()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00230">CreateLocalMemHandle()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00273">_HANDLENODE::fGlobalHandle</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01388">tagGETCLIPBDATA::fGlobalHandle</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01402">tagSETCLIPBDATA::fGlobalHandle</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01403">tagSETCLIPBDATA::fIncSerialNumber</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00270">_HANDLENODE::fmt</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00091">gcsClipboard</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1007">GETCLIPBDATA</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00835">GetClipboardCodePage()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00277">gphn</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00272">_HANDLENODE::handleClient</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00271">_HANDLENODE::handleServer</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01390">tagGETCLIPBDATA::hLocale</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01391">tagGETCLIPBDATA::hPalette</a>, <a class="el" href="../../d3/d2/ldrsnap_8c-source.html#l04149">LMEM_MOVEABLE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04050">NtUserGetClipboardData()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03274">NtUserSetClipboardData()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00275">PHANDLENODE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00269">_HANDLENODE::pnext</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1009">SETCLIPBDATA</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01387">tagGETCLIPBDATA::uFmtRet</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00124">UserGlobalFree</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/ntcon_2server_2clipbrd_8c-source.html#l01008">DoPaste()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02720">MLPasteText()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00307">msProfClipboardGroup()</a>, and <a class="el" href="../../d4/d4/editsl_8c-source.html#l01157">SLPasteText()</a>.
<p>
<pre class="fragment"><div>00392 {
00393     HANDLE       handleClient;
00394     HANDLE       handleServer;
00395     <a class="code" href="../../d3/d4/struct__HANDLENODE.html">PHANDLENODE</a>  phn;
00396     <a class="code" href="../../d3/d4/struct__HANDLENODE.html">PHANDLENODE</a>  phnNew;
00397     <a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html">GETCLIPBDATA</a> gcd;
00398 
00399     <span class="comment">/*</span>
00400 <span class="comment">     * Get the Server's Data; return if there is no data.</span>
00401 <span class="comment">     */</span>
00402     <span class="keywordflow">if</span> (!(handleServer = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a157">NtUserGetClipboardData</a>(uFmt, &amp;gcd)))
00403         <span class="keywordflow">return</span> (HANDLE)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00404 
00405     <span class="comment">/*</span>
00406 <span class="comment">     * Handle any translation that must be done for text items.  The</span>
00407 <span class="comment">     * format returned will only differ for text items.  Metafile and</span>
00408 <span class="comment">     * Enhanced-Metafiles are handled through GDI for their converstions.</span>
00409 <span class="comment">     * And Bitmap color space convertion also nessesary for CF_BITMAP,</span>
00410 <span class="comment">     * CF_DIB and CF_DIBV5 with color space.</span>
00411 <span class="comment">     */</span>
00412     <span class="keywordflow">if</span> (uFmt != gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a>) {
00413 
00414         LPBYTE       lpSrceData = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00415         LPBYTE       lpDestData = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00416         LPBYTE       lptData = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00417         LPDWORD      lpLocale;
00418         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>        uLocale;
00419         <span class="keywordtype">int</span>          iSrce;
00420         <span class="keywordtype">int</span>          iDest;
00421         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>         uCPage;
00422         <a class="code" href="../../d3/d6/structtagSETCLIPBDATA.html">SETCLIPBDATA</a> scd;
00423         <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>         cbNULL = 0;
00424 
00425         <span class="comment">/*</span>
00426 <span class="comment">         * Make sure handleServer is server-side memory handle</span>
00427 <span class="comment">         */</span>
00428         <span class="keywordflow">if</span> ((gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a> == CF_TEXT)        || (gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a> == CF_OEMTEXT) ||
00429             (gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a> == CF_UNICODETEXT) ||
00430             (gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a> == CF_DIB)         || (gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a> == CF_DIBV5)) {
00431 
00432             lpSrceData = <a class="code" href="../../d6/d0/usercli_8h.html#a628">CreateLocalMemHandle</a>(handleServer);
00433 
00434             <span class="comment">/*</span>
00435 <span class="comment">             * Allocate space for the converted TEXT data.</span>
00436 <span class="comment">             */</span>
00437             <span class="keywordflow">if</span> (!(iSrce = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)GlobalSize(lpSrceData)))
00438                 <span class="keywordflow">goto</span> AbortDummyHandle;
00439 
00440             <span class="comment">/*</span>
00441 <span class="comment">             * Only CF_xxxTEXT may have locale information.</span>
00442 <span class="comment">             */</span>
00443             <span class="keywordflow">if</span> ((gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a> == CF_TEXT) || (gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a> == CF_OEMTEXT) ||
00444                 (gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a> == CF_UNICODETEXT)) {
00445 
00446                 <span class="comment">/*</span>
00447 <span class="comment">                 * Get the locale out of the parameter-struct.  We will</span>
00448 <span class="comment">                 * use this to get the codepage for text-translation.</span>
00449 <span class="comment">                 */</span>
00450                 <span class="keywordflow">if</span> (lpLocale = (LPDWORD)<a class="code" href="../../d6/d0/usercli_8h.html#a628">CreateLocalMemHandle</a>(gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o2">hLocale</a>)) {
00451 
00452                     uLocale = *lpLocale;
00453                     GlobalFree(lpLocale);
00454                 } <span class="keywordflow">else</span> {
00455                     uLocale = 0;
00456                 }
00457 
00458                 <span class="comment">/*</span>
00459 <span class="comment">                 * And also, pre-allocate translated buffer in same size as source.</span>
00460 <span class="comment">                 */</span>
00461                 <span class="keywordflow">if</span> ((lpDestData = GlobalAlloc(LPTR, iSrce)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00462                     <span class="keywordflow">goto</span> AbortDummyHandle;
00463                 }
00464             }
00465 
00466             <span class="keywordflow">switch</span> (uFmt) {
00467                 <span class="keywordflow">case</span> CF_TEXT:
00468                 cbNULL = 1;
00469                 <span class="keywordflow">if</span> (gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a> == CF_OEMTEXT) {
00470 
00471                     <span class="comment">/*</span>
00472 <span class="comment">                     * CF_OEMTEXT --&gt; CF_TEXT conversion</span>
00473 <span class="comment">                     */</span>
00474                     OemToAnsi((LPSTR)lpSrceData, (LPSTR)lpDestData);
00475                 } <span class="keywordflow">else</span> {
00476 
00477                     uCPage = <a class="code" href="../../d3/d8/client_8c.html#a28">GetClipboardCodePage</a>(uLocale,
00478                                                   LOCALE_IDEFAULTANSICODEPAGE);
00479 
00480                     <span class="comment">/*</span>
00481 <span class="comment">                     * CF_UNICODETEXT --&gt; CF_TEXT conversion</span>
00482 <span class="comment">                     */</span>
00483                     iDest = 0;
00484                     <span class="keywordflow">if</span> ((iDest = WideCharToMultiByte(uCPage,
00485                                                      (DWORD)0,
00486                                                      (LPWSTR)lpSrceData,
00487                                                      (<span class="keywordtype">int</span>)(iSrce / <span class="keyword">sizeof</span>(WCHAR)),
00488                                                      (LPSTR)NULL,
00489                                                      (<span class="keywordtype">int</span>)iDest,
00490                                                      (LPSTR)NULL,
00491                                                      (LPBOOL)NULL)) == 0) {
00492 AbortGetClipData:
00493                         <a class="code" href="../../d6/d0/usercli_8h.html#a2">UserGlobalFree</a>(lpDestData);
00494 AbortDummyHandle:
00495                         <a class="code" href="../../d6/d0/usercli_8h.html#a2">UserGlobalFree</a>(lpSrceData);
00496                         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00497                     }
00498 
00499                     <span class="keywordflow">if</span> (!(lptData = GlobalReAlloc( lpDestData, iDest, LPTR | LMEM_MOVEABLE)))
00500                         <span class="keywordflow">goto</span> AbortGetClipData;
00501 
00502                     lpDestData = lptData;
00503 
00504                     <span class="keywordflow">if</span> (WideCharToMultiByte(uCPage,
00505                                             (DWORD)0,
00506                                             (LPWSTR)lpSrceData,
00507                                             (<span class="keywordtype">int</span>)(iSrce / <span class="keyword">sizeof</span>(WCHAR)),
00508                                             (LPSTR)lpDestData,
00509                                             (<span class="keywordtype">int</span>)iDest,
00510                                             (LPSTR)NULL,
00511                                             (LPBOOL)NULL) == 0)
00512                         <span class="keywordflow">goto</span> AbortGetClipData;
00513                 }
00514                 <span class="keywordflow">break</span>;
00515 
00516             <span class="keywordflow">case</span> CF_OEMTEXT:
00517                 cbNULL = 1;
00518                 <span class="keywordflow">if</span> (gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a> == CF_TEXT) {
00519 
00520                     <span class="comment">/*</span>
00521 <span class="comment">                     * CF_TEXT --&gt; CF_OEMTEXT conversion</span>
00522 <span class="comment">                     */</span>
00523                     AnsiToOem((LPSTR)lpSrceData, (LPSTR)lpDestData);
00524                 } <span class="keywordflow">else</span> {
00525 
00526                     uCPage = <a class="code" href="../../d3/d8/client_8c.html#a28">GetClipboardCodePage</a>(uLocale,
00527                                                   LOCALE_IDEFAULTCODEPAGE);
00528 
00529                     <span class="comment">/*</span>
00530 <span class="comment">                     * CF_UNICODETEXT --&gt; CF_OEMTEXT conversion</span>
00531 <span class="comment">                     */</span>
00532                     iDest = 0;
00533                     <span class="keywordflow">if</span> ((iDest = WideCharToMultiByte(uCPage,
00534                                                      (DWORD)0,
00535                                                      (LPWSTR)lpSrceData,
00536                                                      (<span class="keywordtype">int</span>)(iSrce / <span class="keyword">sizeof</span>(WCHAR)),
00537                                                      (LPSTR)NULL,
00538                                                      (<span class="keywordtype">int</span>)iDest,
00539                                                      (LPSTR)NULL,
00540                                                      (LPBOOL)NULL)) == 0)
00541                         <span class="keywordflow">goto</span> AbortGetClipData;
00542 
00543                     <span class="keywordflow">if</span> (!(lptData = GlobalReAlloc( lpDestData, iDest, LPTR | LMEM_MOVEABLE)))
00544                         <span class="keywordflow">goto</span> AbortGetClipData;
00545 
00546                     lpDestData = lptData;
00547 
00548                     <span class="keywordflow">if</span> (WideCharToMultiByte(uCPage,
00549                                             (DWORD)0,
00550                                             (LPWSTR)lpSrceData,
00551                                             (<span class="keywordtype">int</span>)(iSrce / <span class="keyword">sizeof</span>(WCHAR)),
00552                                             (LPSTR)lpDestData,
00553                                             (<span class="keywordtype">int</span>)iDest,
00554                                             (LPSTR)NULL,
00555                                             (LPBOOL)NULL) == 0)
00556                         <span class="keywordflow">goto</span> AbortGetClipData;
00557                 }
00558                 <span class="keywordflow">break</span>;
00559 
00560             <span class="keywordflow">case</span> CF_UNICODETEXT:
00561                 cbNULL = 2;
00562                 <span class="keywordflow">if</span> (gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a> == CF_TEXT) {
00563 
00564                     uCPage = <a class="code" href="../../d3/d8/client_8c.html#a28">GetClipboardCodePage</a>(uLocale,
00565                                                   LOCALE_IDEFAULTANSICODEPAGE);
00566 
00567                     <span class="comment">/*</span>
00568 <span class="comment">                     * CF_TEXT --&gt; CF_UNICODETEXT conversion</span>
00569 <span class="comment">                     */</span>
00570                     iDest = 0;
00571                     <span class="keywordflow">if</span> ((iDest = MultiByteToWideChar(uCPage,
00572                                                      (DWORD)MB_PRECOMPOSED,
00573                                                      (LPSTR)lpSrceData,
00574                                                      (<span class="keywordtype">int</span>)iSrce,
00575                                                      (LPWSTR)NULL,
00576                                                      (<span class="keywordtype">int</span>)iDest)) == 0)
00577                         <span class="keywordflow">goto</span> AbortGetClipData;
00578 
00579                     <span class="keywordflow">if</span> (!(lptData = GlobalReAlloc(lpDestData,
00580                             iDest * <span class="keyword">sizeof</span>(WCHAR), LPTR | LMEM_MOVEABLE)))
00581                         <span class="keywordflow">goto</span> AbortGetClipData;
00582 
00583                     lpDestData = lptData;
00584 
00585                     <span class="keywordflow">if</span> (MultiByteToWideChar(uCPage,
00586                                             (DWORD)MB_PRECOMPOSED,
00587                                             (LPSTR)lpSrceData,
00588                                             (<span class="keywordtype">int</span>)iSrce,
00589                                             (LPWSTR)lpDestData,
00590                                             (<span class="keywordtype">int</span>)iDest) == 0)
00591                         <span class="keywordflow">goto</span> AbortGetClipData;
00592 
00593                 } <span class="keywordflow">else</span> {
00594 
00595                     uCPage = <a class="code" href="../../d3/d8/client_8c.html#a28">GetClipboardCodePage</a>(uLocale,
00596                                                   LOCALE_IDEFAULTCODEPAGE);
00597 
00598                     <span class="comment">/*</span>
00599 <span class="comment">                     * CF_OEMTEXT --&gt; CF_UNICDOETEXT conversion</span>
00600 <span class="comment">                     */</span>
00601                     iDest = 0;
00602                     <span class="keywordflow">if</span> ((iDest = MultiByteToWideChar(uCPage,
00603                                                      (DWORD)MB_PRECOMPOSED,
00604                                                      (LPSTR)lpSrceData,
00605                                                      (<span class="keywordtype">int</span>)iSrce,
00606                                                      (LPWSTR)NULL,
00607                                                      (<span class="keywordtype">int</span>)iDest)) == 0)
00608                         <span class="keywordflow">goto</span> AbortGetClipData;
00609 
00610                     <span class="keywordflow">if</span> (!(lptData = GlobalReAlloc(lpDestData,
00611                             iDest * <span class="keyword">sizeof</span>(WCHAR), LPTR | LMEM_MOVEABLE)))
00612                         <span class="keywordflow">goto</span> AbortGetClipData;
00613 
00614                     lpDestData = lptData;
00615 
00616                     <span class="keywordflow">if</span> (MultiByteToWideChar(uCPage,
00617                                             (DWORD)MB_PRECOMPOSED,
00618                                             (LPSTR)lpSrceData,
00619                                             (<span class="keywordtype">int</span>)iSrce,
00620                                             (LPWSTR)lpDestData,
00621                                             (<span class="keywordtype">int</span>)iDest) == 0)
00622                         <span class="keywordflow">goto</span> AbortGetClipData;
00623                 }
00624                 <span class="keywordflow">break</span>;
00625 
00626             <span class="keywordflow">case</span> CF_BITMAP:
00627                 <span class="keywordflow">if</span> (gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a> == CF_DIBV5) {
00628 
00629                     <span class="comment">/*</span>
00630 <span class="comment">                     * CF_DIBV5 --&gt; CF_BITMAP (sRGB)</span>
00631 <span class="comment">                     *</span>
00632 <span class="comment">                     * The GDI bitmap handle will be returned in handleServer.</span>
00633 <span class="comment">                     */</span>
00634                     <span class="keywordflow">if</span> ((handleServer = GdiConvertBitmapV5(lpSrceData,iSrce,
00635                                                            gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o3">hPalette</a>,CF_BITMAP)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00636 
00637                         <span class="comment">/*</span>
00638 <span class="comment">                         * GDI failed to convert.</span>
00639 <span class="comment">                         */</span>
00640                         RIPMSG0(RIP_ERROR, <span class="stringliteral">"GetClipboardData: Failed CF_DIBV5 -&gt; CF_BITMAP\n"</span>);
00641                         <span class="keywordflow">goto</span> AbortDummyHandle;
00642                     }
00643                 } <span class="keywordflow">else</span> {
00644 
00645                     RIPMSG0(RIP_ERROR, <span class="stringliteral">"GetClipboardData: bad conversion request\n"</span>);
00646                     <span class="keywordflow">goto</span> AbortDummyHandle;
00647                 }
00648                 <span class="keywordflow">break</span>;
00649 
00650             <span class="keywordflow">case</span> CF_DIB:
00651                 <span class="keywordflow">if</span> (gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a> == CF_DIBV5) {
00652 
00653                     <span class="comment">/*</span>
00654 <span class="comment">                     * CF_DIBV5 --&gt; CF_DIB (sRGB)</span>
00655 <span class="comment">                     *</span>
00656 <span class="comment">                     * The local memory handle will be returned in lpDestData.</span>
00657 <span class="comment">                     */</span>
00658                     <span class="keywordflow">if</span> ((lpDestData = (LPBYTE) GdiConvertBitmapV5(lpSrceData,iSrce,
00659                                                                   gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o3">hPalette</a>,CF_DIB)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00660 
00661                         <span class="comment">/*</span>
00662 <span class="comment">                         * GDI failed to convert.</span>
00663 <span class="comment">                         */</span>
00664                         RIPMSG0(RIP_ERROR, <span class="stringliteral">"GetClipboardData: Failed CF_DIBV5 -&gt; CF_DIB\n"</span>);
00665                         <span class="keywordflow">goto</span> AbortDummyHandle;
00666                     }
00667                 } <span class="keywordflow">else</span> {
00668 
00669                     RIPMSG0(RIP_ERROR, <span class="stringliteral">"GetClipboardData: bad conversion request\n"</span>);
00670                     <span class="keywordflow">goto</span> AbortDummyHandle;
00671                 }
00672                 <span class="keywordflow">break</span>;
00673             }
00674         }
00675 
00676         <span class="keywordflow">if</span> (lpDestData) {
00677             <span class="comment">/*</span>
00678 <span class="comment">             * Replace the dummy user-mode memory handle with the actual handle.</span>
00679 <span class="comment">             */</span>
00680             handleServer = <a class="code" href="../../d6/d0/usercli_8h.html#a629">ConvertMemHandle</a>(lpDestData, cbNULL);
00681             <span class="keywordflow">if</span> (handleServer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00682                 <span class="keywordflow">goto</span> AbortGetClipData;
00683         }
00684 
00685         <span class="comment">/*</span>
00686 <span class="comment">         * Update the server.  If that is successfull update the client</span>
00687 <span class="comment">         */</span>
00688         RtlEnterCriticalSection(&amp;gcsClipboard);
00689         scd.<a class="code" href="../../d3/d6/structtagSETCLIPBDATA.html#o0">fGlobalHandle</a>    = gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o1">fGlobalHandle</a>;
00690         scd.<a class="code" href="../../d3/d6/structtagSETCLIPBDATA.html#o1">fIncSerialNumber</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00691         <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a131">NtUserSetClipboardData</a>(uFmt, handleServer, &amp;scd)) {
00692             handleServer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00693         }
00694         RtlLeaveCriticalSection(&amp;gcsClipboard);
00695 
00696         <span class="keywordflow">if</span> (lpDestData)
00697             <a class="code" href="../../d6/d0/usercli_8h.html#a2">UserGlobalFree</a>(lpDestData);
00698         <span class="keywordflow">if</span> (lpSrceData)
00699             <a class="code" href="../../d6/d0/usercli_8h.html#a2">UserGlobalFree</a>(lpSrceData);
00700 
00701         <span class="keywordflow">if</span> (handleServer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00702             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00703     }
00704 
00705     <span class="comment">/*</span>
00706 <span class="comment">     * See if we already have a client side handle; validate the format</span>
00707 <span class="comment">     * as well because some server objects, metafile for example, are dual mode</span>
00708 <span class="comment">     * and yield two kinds of client objects enhanced and regular metafiles</span>
00709 <span class="comment">     */</span>
00710     handleClient = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00711     RtlEnterCriticalSection(&amp;gcsClipboard);
00712 
00713     phn = <a class="code" href="../../d3/d8/client_8c.html#a22">gphn</a>;
00714     <span class="keywordflow">while</span> (phn) {
00715         <span class="keywordflow">if</span> ((phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o2">handleServer</a> == handleServer) &amp;&amp; (phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o1">fmt</a> == uFmt)) {
00716             handleClient = phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a>;
00717             <span class="keywordflow">goto</span> Exit;
00718         }
00719         phn = phn-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o0">pnext</a>;
00720     }
00721 
00722     <span class="comment">/*</span>
00723 <span class="comment">     * We don't have a handle cached so we'll create one</span>
00724 <span class="comment">     */</span>
00725     phnNew = (<a class="code" href="../../d3/d4/struct__HANDLENODE.html">PHANDLENODE</a>)LocalAlloc(LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d3/d4/struct__HANDLENODE.html">HANDLENODE</a>));
00726     <span class="keywordflow">if</span> (phnNew == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00727         <span class="keywordflow">goto</span> Exit;
00728 
00729     phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o2">handleServer</a>  = handleServer;
00730     phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o1">fmt</a>           = gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o0">uFmtRet</a>;
00731     phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o4">fGlobalHandle</a> = gcd.<a class="code" href="../../d6/d5/structtagGETCLIPBDATA.html#o1">fGlobalHandle</a>;
00732 
00733     <span class="keywordflow">switch</span> (uFmt) {
00734 
00735         <span class="comment">/*</span>
00736 <span class="comment">         * Misc GDI Handles</span>
00737 <span class="comment">         */</span>
00738         <span class="keywordflow">case</span> CF_BITMAP:
00739         <span class="keywordflow">case</span> CF_DSPBITMAP:
00740         <span class="keywordflow">case</span> CF_PALETTE:
00741             phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a> = handleServer;
00742             <span class="keywordflow">break</span>;
00743 
00744         <span class="keywordflow">case</span> CF_METAFILEPICT:
00745         <span class="keywordflow">case</span> CF_DSPMETAFILEPICT:
00746             phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a> = GdiCreateLocalMetaFilePict(handleServer);
00747             <span class="keywordflow">break</span>;
00748 
00749         <span class="keywordflow">case</span> CF_ENHMETAFILE:
00750         <span class="keywordflow">case</span> CF_DSPENHMETAFILE:
00751             phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a> = GdiCreateLocalEnhMetaFile(handleServer);
00752             <span class="keywordflow">break</span>;
00753 
00754         <span class="comment">/*</span>
00755 <span class="comment">         * GlobalHandle Cases</span>
00756 <span class="comment">         */</span>
00757         <span class="keywordflow">case</span> CF_TEXT:
00758         <span class="keywordflow">case</span> CF_OEMTEXT:
00759         <span class="keywordflow">case</span> CF_UNICODETEXT:
00760         <span class="keywordflow">case</span> CF_LOCALE:
00761         <span class="keywordflow">case</span> CF_DSPTEXT:
00762         <span class="keywordflow">case</span> CF_DIB:
00763         <span class="keywordflow">case</span> CF_DIBV5:
00764             phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a> = <a class="code" href="../../d6/d0/usercli_8h.html#a628">CreateLocalMemHandle</a>(handleServer);
00765             phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o4">fGlobalHandle</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00766             <span class="keywordflow">break</span>;
00767 
00768         <span class="keywordflow">default</span>:
00769             <span class="comment">/*</span>
00770 <span class="comment">             * Private Data Format; If this is global data, create a copy of that</span>
00771 <span class="comment">             * data here on the client. If it isn't global data, it is just a dword</span>
00772 <span class="comment">             * in which case we just return a dword. If it is global data and</span>
00773 <span class="comment">             * the server fails to give us that memory, return NULL. If it isn't</span>
00774 <span class="comment">             * global data, handleClient is just a dword.</span>
00775 <span class="comment">             */</span>
00776             <span class="keywordflow">if</span> (phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o4">fGlobalHandle</a>) {
00777                 phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a> = <a class="code" href="../../d6/d0/usercli_8h.html#a628">CreateLocalMemHandle</a>(handleServer);
00778             } <span class="keywordflow">else</span> {
00779                 phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a> = handleServer;
00780             }
00781             <span class="keywordflow">break</span>;
00782     }
00783 
00784     <span class="keywordflow">if</span> (phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00785         <span class="comment">/*</span>
00786 <span class="comment">         * Something bad happened, gdi didn't give us back a</span>
00787 <span class="comment">         * handle. Since gdi has logged the error, we'll just</span>
00788 <span class="comment">         * clean up and return an error.</span>
00789 <span class="comment">         */</span>
00790         RIPMSG1(RIP_WARNING, <span class="stringliteral">"GetClipboardData unable to convert server handle %#p to client handle\n"</span>, handleServer);
00791 
00792         LocalFree(phnNew);
00793         <span class="keywordflow">goto</span> Exit;
00794     }
00795 
00796 <span class="preprocessor">#if DBG</span>
00797 <span class="preprocessor"></span>    <span class="comment">/*</span>
00798 <span class="comment">     * If handleClient came from a GlobalAlloc, then fGlobalHandle must be TRUE.</span>
00799 <span class="comment">     * Some formats are acutally global handles but require special cleanup.</span>
00800 <span class="comment">     */</span>
00801     <span class="keywordflow">switch</span> (phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o1">fmt</a>) {
00802         <span class="keywordflow">case</span> CF_METAFILEPICT:
00803         <span class="keywordflow">case</span> CF_DSPMETAFILEPICT:
00804             <span class="keywordflow">break</span>;
00805 
00806         <span class="keywordflow">default</span>:
00807             UserAssert(phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o4">fGlobalHandle</a>
00808                        ^ (GlobalFlags(phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a>) == GMEM_INVALID_HANDLE));
00809             <span class="keywordflow">break</span>;
00810     }
00811 <span class="preprocessor">#endif</span>
00812 <span class="preprocessor"></span>
00813     <span class="comment">/*</span>
00814 <span class="comment">     * Cache the new handle by linking it into our list</span>
00815 <span class="comment">     */</span>
00816     phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o0">pnext</a> = <a class="code" href="../../d3/d8/client_8c.html#a22">gphn</a>;
00817     <a class="code" href="../../d3/d8/client_8c.html#a22">gphn</a> = phnNew;
00818     handleClient = phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a>;
00819 
00820 Exit:
00821     RtlLeaveCriticalSection(&amp;gcsClipboard);
00822     <span class="keywordflow">return</span> handleClient;
00823 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a101" doxytag="client.c::GetDialogBaseUnits" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> long GetDialogBaseUnits           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03070">3070</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>.
<p>
<pre class="fragment"><div>03071 {
03072     <span class="keywordflow">return</span> MAKELONG(<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;cxSysFontChar, <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;cySysFontChar);
03073 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a84" doxytag="client.c::GetEditDS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE GetEditDS           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02766">2766</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00132">pfn16GlobalAlloc</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>.
<p>
<pre class="fragment"><div>02767 {
02768     UserAssert(pfn16GlobalAlloc != NULL);
02769 
02770     <span class="keywordflow">return</span>((HANDLE)((*pfn16GlobalAlloc)(GHND | GMEM_SHARE, 256)));
02771 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="client.c::GetFullUserHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> GetFullUserHandle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">WORD&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>wHandle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/handles_8c-source.html#l00293">293</a> of file <a class="el" href="../../d4/d7/handles_8c-source.html">handles.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01278">tagSHAREDINFO::aheList</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01514">_HANDLEENTRY::bType</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01189">tagSERVERINFO::cHandleEntries</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00052">gSharedInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01470">HMIndexFromHandle</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00906">TYPE_WINDOW</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01516">_HANDLEENTRY::wUniq</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.
<p>
<pre class="fragment"><div>00294 {
00295     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwHandle;
00296     <a class="code" href="../../d2/d4/struct__HANDLEENTRY.html">PHE</a> phe;
00297 
00298     dwHandle = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a432">HMIndexFromHandle</a>(wHandle);
00299 
00300     <span class="keywordflow">if</span> (dwHandle &lt; <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o4">cHandleEntries</a>) {
00301 
00302         phe = &amp;<a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.<a class="code" href="../../d4/d6/structtagSHAREDINFO.html#o1">aheList</a>[dwHandle];
00303 
00304         <span class="keywordflow">if</span> (phe-&gt;<a class="code" href="../../d2/d4/struct__HANDLEENTRY.html#o2">bType</a> == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a237">TYPE_WINDOW</a>)
00305             <span class="keywordflow">return</span>(MAKELONG(dwHandle, phe-&gt;<a class="code" href="../../d2/d4/struct__HANDLEENTRY.html#o4">wUniq</a>));
00306     }
00307 
00308     <span class="comment">/*</span>
00309 <span class="comment">     * object may be gone, but we must pass something.</span>
00310 <span class="comment">     * DDE terminates will fail if we don't map this right even after</span>
00311 <span class="comment">     * the window is dead!</span>
00312 <span class="comment">     *</span>
00313 <span class="comment">     * NOTE: This fix will only work for WOW apps, but since the 32bit</span>
00314 <span class="comment">     * tracking layer locks dde windows until the last terminate is</span>
00315 <span class="comment">     * received, we won't see this problem on the 32bit side.</span>
00316 <span class="comment">     *</span>
00317 <span class="comment">     * BUG: We WILL see a problem for OLE32 thunked DDE though.</span>
00318 <span class="comment">     */</span>
00319     <span class="keywordflow">return</span>(wHandle);
00320 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a102" doxytag="client.c::GetInputDesktop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HDESK GetInputDesktop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03081">3081</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04510">NtUserCallNoParam()</a>.
<p>
<pre class="fragment"><div>03082 {
03083     <span class="keywordflow">return</span> (HDESK)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a173">NtUserCallNoParam</a>(SFI_XXXGETINPUTDESKTOP);
03084 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a154" doxytag="client.c::GetKeyboardLayout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HKL GetKeyboardLayout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>idThread</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l04502">4502</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
Referenced by <a class="el" href="../../d7/d1/output_8c-source.html#l06099">GetNonBiDiKeyboardLayout()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00672">GetThreadKeyboardLayoutCP()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00495">ImmActivateLayout()</a>, <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00034">ImmCallImeConsoleIME()</a>, <a class="el" href="../../d7/d8/softkbd_8c-source.html#l00137">ImmCreateSoftKeyboard()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00061">ImmDestroyContext()</a>, <a class="el" href="../../d8/d9/imminit_8c-source.html#l00067">ImmDllInitialize()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00416">ImmFreeLayout()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00759">ImmGetImeMenuItemsWorker()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00190">ImmIMPGetIMEA()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00176">ImmIMPGetIMEW()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00374">ImmIMPSetIMEW()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01294">ImmNotifyIME()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01128">ImmPenAuxInput()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00610">ImmSetCompositionStringWorker()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00057">ImmSimulateHotKey()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">ImmTranslateMessage()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00303">InternalImmLockIMC()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03158">MakeIMENotify()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00081">SendIMEMessageAll()</a>, <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00689">TransConvertList()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00932">TransEnterWordRegisterMode()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00373">TransGetOpenK()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01042">TransHanjaMode()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00054">TranslateIMESubFunctions()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00425">TransMoveImeWindow()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00828">TransSendVKey()</a>, and <a class="el" href="../../d3/d4/transsub_8c-source.html#l00311">TransSetOpenK()</a>.
<p>
<pre class="fragment"><div>04504 {
04505     <span class="keywordflow">return</span> (HKL)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(idThread, SFI__GETKEYBOARDLAYOUT);
04506 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a104" doxytag="client.c::GetKeyboardType" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int GetKeyboardType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>nTypeFlags</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03143">3143</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l03097">GetClientKeyboardType()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00293">ISREMOTESESSION</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
<pre class="fragment"><div>03145 {
03146     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a30">ISREMOTESESSION</a>()) {
03147         <span class="comment">//</span>
03148         <span class="comment">//  Get keyboard type from Hydra client if this is not the console</span>
03149         <span class="comment">//</span>
03150         CLIENTKEYBOARDTYPE KeyboardType;
03151 
03152         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/client_8c.html#a103">GetClientKeyboardType</a>(&amp;KeyboardType)) {
03153             <span class="keywordflow">switch</span> (nTypeFlags) {
03154             <span class="keywordflow">case</span> 0:
03155                 <span class="keywordflow">return</span> KeyboardType.Type;
03156             <span class="keywordflow">case</span> 1:
03157                 <span class="keywordflow">if</span> (KeyboardType.Type == 7) {               <span class="comment">/* 7 is a Japanese */</span>
03158                     <span class="comment">// Because HIWORD has been using private value</span>
03159                     <span class="comment">// for Japanese keyboard layout.</span>
03160                     <span class="keywordflow">return</span> LOWORD(KeyboardType.SubType);
03161                 }
03162                 <span class="keywordflow">else</span>
03163                     <span class="keywordflow">return</span> KeyboardType.SubType;
03164             <span class="keywordflow">case</span> 2:
03165                 <span class="keywordflow">return</span> KeyboardType.FunctionKey;
03166             <span class="keywordflow">default</span>:
03167                 <span class="keywordflow">break</span>;
03168             }
03169         }
03170         <span class="keywordflow">return</span> 0;
03171     }
03172     <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(nTypeFlags, SFI__GETKEYBOARDTYPE);
03173 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a105" doxytag="client.c::GetMessagePos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> GetMessagePos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03181">3181</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04510">NtUserCallNoParam()</a>.
<p>
<pre class="fragment"><div>03182 {
03183     <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a173">NtUserCallNoParam</a>(SFI__GETMESSAGEPOS);
03184 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a114" doxytag="client.c::GetProgmanWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND GetProgmanWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03298">3298</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03173">ConnectIfNecessary</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00530">_CLIENTINFO::pDeskInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02163">tagDESKTOPINFO::spwndProgman</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00514">_CLIENTINFO::ulClientDelta</a>.
<p>
<pre class="fragment"><div>03298                             {
03299     <a class="code" href="../../d2/d2/struct__CLIENTINFO.html">PCLIENTINFO</a> pci;
03300     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
03301 
03302     <a class="code" href="../../d1/d0/inc_2user_8h.html#a848">ConnectIfNecessary</a>();
03303 
03304     pci = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>();
03305     pwnd = pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o5">pDeskInfo</a>-&gt;<a class="code" href="../../d1/d3/structtagDESKTOPINFO.html#o9">spwndProgman</a>;
03306     <span class="keywordflow">if</span> (pwnd != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03307         pwnd = (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)((KERNEL_ULONG_PTR)pwnd - pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o6">ulClientDelta</a>);
03308         <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
03309     }
03310     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
03311 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a106" doxytag="client.c::GetQueueStatus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> GetQueueStatus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>flags</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03192">3192</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
<pre class="fragment"><div>03194 {
03195     <span class="keywordflow">if</span> (flags &amp; ~QS_VALID) {
03196         RIPERR2(ERROR_INVALID_FLAGS, RIP_WARNING, <span class="stringliteral">"Invalid flags %x &amp; ~%x != 0"</span>,
03197               flags, QS_VALID);
03198         <span class="keywordflow">return</span> 0;
03199     }
03200 
03201     <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(flags, SFI__GETQUEUESTATUS);
03202 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a68" doxytag="client.c::GetRemoteKeyboardLayout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetRemoteKeyboardLayout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PWCHAR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>LayoutBuf</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02091">2091</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01983">GetServerIMEKeyboardLayout()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00591">IS_IME_ENABLED</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00149">IS_IME_KBDLAYOUT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00293">ISREMOTESESSION</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01931">WinStaQueryInformationW()</a>, and <a class="el" href="../../d7/d9/wsprintf_8c-source.html#l00995">wsprintfW()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00049">UpdatePerUserSystemParameters()</a>.
<p>
<pre class="fragment"><div>02093 {
02094     ULONG                        KeyboardLayout;
02095     ULONG                        Length;
02096     WINSTATIONCONFIG             ConfigData;
02097 
02098     <span class="comment">/*</span>
02099 <span class="comment">     * Skip if this is the main session</span>
02100 <span class="comment">     */</span>
02101     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a30">ISREMOTESESSION</a>()) {
02102         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02103     }
02104 
02105     <span class="comment">/*</span>
02106 <span class="comment">     * Fetch the WinStation's basic information</span>
02107 <span class="comment">     */</span>
02108     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d8/client_8c.html#a66">WinStaQueryInformationW</a>(SERVERNAME_CURRENT,
02109                                 LOGONID_CURRENT,
02110                                 WinStationConfiguration,
02111                                 &amp;ConfigData,
02112                                 <span class="keyword">sizeof</span>(ConfigData),
02113                                 &amp;Length)) {
02114 
02115         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02116     }
02117 
02118     KeyboardLayout = ConfigData.User.KeyboardLayout;
02119 
02120     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a126">IS_IME_ENABLED</a>()) {
02121         WINSTATIONCLIENTW ClientData;
02122 
02123         <span class="comment">// Fetch the WinStation's basic information</span>
02124         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d8/client_8c.html#a66">WinStaQueryInformationW</a>(SERVERNAME_CURRENT,
02125                                            LOGONID_CURRENT,
02126                                            WinStationClient,
02127                                            &amp;ClientData,
02128                                            <span class="keyword">sizeof</span>(ClientData),
02129                                            &amp;Length)) {
02130             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02131         }
02132 
02133         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d5/conimep_8h.html#a49">IS_IME_KBDLAYOUT</a>(ConfigData.User.KeyboardLayout)) {
02134             KeyboardLayout = <a class="code" href="../../d3/d8/client_8c.html#a67">GetServerIMEKeyboardLayout</a>(ClientData.imeFileName);
02135         }
02136     }
02137 
02138     <span class="keywordflow">if</span> (KeyboardLayout != 0) {
02139         <a class="code" href="../../d6/d0/wsprintf_8c.html#a10">wsprintfW</a>(LayoutBuf, L<span class="stringliteral">"%8.8lx"</span>, KeyboardLayout);
02140         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02141     }
02142 
02143     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
02144 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a67" doxytag="client.c::GetServerIMEKeyboardLayout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG GetServerIMEKeyboardLayout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPTSTR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pszImeFileName</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01983">1983</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00076">CCH_KL_LIBNAME</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00149">IS_IME_KBDLAYOUT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00066">NSZKLKEY</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l00610">NtEnumerateKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l01870">NtOpenKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l02187">NtQueryValueKey()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d0/d3/cnvint_8c-source.html#l00225">RtlUnicodeStringToInteger()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00062">szKLKey</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02091">GetRemoteKeyboardLayout()</a>.
<p>
<pre class="fragment"><div>01985 {
01986     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fFound = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01987     ULONG wLayoutId;
01988     UNICODE_STRING UnicodeStringKLKey;
01989     UNICODE_STRING UnicodeStringSubKLKey;
01990     UNICODE_STRING UnicodeStringIME;
01991     OBJECT_ATTRIBUTES OA;
01992     HANDLE hKey;
01993     ULONG <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01994     WCHAR awchKLRegKey[<a class="code" href="../../d3/d8/client_8c.html#a0">NSZKLKEY</a>];
01995     LPWSTR lpszKLRegKey = awchKLRegKey;
01996     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
01997 
01998     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeStringKLKey, szKLKey);
01999     InitializeObjectAttributes(&amp;OA, &amp;UnicodeStringKLKey, OBJ_CASE_INSENSITIVE, NULL, NULL);
02000 
02001     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(<a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>(&amp;hKey, KEY_READ, &amp;OA))) {
02002 
02003         <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0; <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++) {
02004 
02005             <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> KeyBuffer[<span class="keyword">sizeof</span>(KEY_BASIC_INFORMATION) + KL_NAMELENGTH * <span class="keyword">sizeof</span>(WCHAR)];
02006             PKEY_BASIC_INFORMATION pKeyInfo;
02007             ULONG ResultLength;
02008 
02009             pKeyInfo = (PKEY_BASIC_INFORMATION)KeyBuffer;
02010             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a17">NtEnumerateKey</a>(hKey,
02011                                     Index,
02012                                     KeyBasicInformation,
02013                                     pKeyInfo,
02014                                     <span class="keyword">sizeof</span>(KeyBuffer),
02015                                     &amp;ResultLength);
02016 
02017             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
02018                 UnicodeStringSubKLKey.Buffer = (PWSTR)&amp;(pKeyInfo-&gt;Name[0]);
02019                 UnicodeStringSubKLKey.Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)pKeyInfo-&gt;NameLength;
02020                 UnicodeStringSubKLKey.MaximumLength = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)pKeyInfo-&gt;NameLength;
02021                 <a class="code" href="../../d9/d3/cnvint_8c.html#a4">RtlUnicodeStringToInteger</a>(&amp;UnicodeStringSubKLKey, 16, &amp;wLayoutId);
02022 
02023                 <span class="keywordflow">if</span> (<a class="code" href="../../d4/d5/conimep_8h.html#a49">IS_IME_KBDLAYOUT</a>(wLayoutId)) {
02024 
02025                     HANDLE hSubKey;
02026 
02027                     wcscpy(lpszKLRegKey, szKLKey);
02028                     wcsncat(lpszKLRegKey, UnicodeStringSubKLKey.Buffer,
02029                                           UnicodeStringSubKLKey.Length / <span class="keyword">sizeof</span>(WCHAR));
02030                     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeStringKLKey, lpszKLRegKey);
02031                     InitializeObjectAttributes(&amp;OA, &amp;UnicodeStringKLKey, OBJ_CASE_INSENSITIVE, NULL, NULL);
02032 
02033                     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(<a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>(&amp;hSubKey, KEY_READ, &amp;OA))) {
02034                         <span class="comment">/*</span>
02035 <span class="comment">                         * GetIME file name from "HKLM\...&lt;Index&gt;\IME File"</span>
02036 <span class="comment">                         */</span>
02037                         <span class="keyword">static</span> CONST WCHAR szIMEfile[]  = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"IME file"</span>;
02038                         <span class="keyword">struct </span>{
02039                             KEY_VALUE_PARTIAL_INFORMATION KeyInfo;
02040                             WCHAR awchImeName[<a class="code" href="../../d3/d8/client_8c.html#a1">CCH_KL_LIBNAME</a>];
02041                         } IMEfile;
02042                         LPWSTR pwszIME;
02043                         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbSize;
02044 
02045                         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeStringIME, szIMEfile);
02046 
02047                         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>(hSubKey,
02048                                                  &amp;UnicodeStringIME,
02049                                                  KeyValuePartialInformation,
02050                                                  &amp;IMEfile,
02051                                                  <span class="keyword">sizeof</span> IMEfile,
02052                                                  &amp;cbSize);
02053                         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hSubKey);
02054 
02055                         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
02056                             pwszIME = (LPWSTR)IMEfile.KeyInfo.Data;
02057                             pwszIME[<a class="code" href="../../d3/d8/client_8c.html#a1">CCH_KL_LIBNAME</a> - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
02058                             <span class="keywordflow">if</span> (!lstrcmpi(pwszIME, pszImeFileName)) {
02059                                 <span class="comment">/*</span>
02060 <span class="comment">                                 * IME file name match !!</span>
02061 <span class="comment">                                 */</span>
02062                                 fFound = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
02063                                 <span class="keywordflow">break</span>;
02064                             }
02065                         }
02066                     }
02067                 }
02068             }
02069             <span class="keywordflow">else</span> {
02070                 <span class="keywordflow">break</span>;
02071             }
02072         }
02073         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hKey);
02074     }
02075 
02076     <span class="keywordflow">if</span> (fFound)
02077         <span class="keywordflow">return</span> wLayoutId;
02078 
02079     <span class="keywordflow">return</span> 0;
02080 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a112" doxytag="client.c::GetShellWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND GetShellWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03279">3279</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03173">ConnectIfNecessary</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00530">_CLIENTINFO::pDeskInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02159">tagDESKTOPINFO::spwndShell</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00514">_CLIENTINFO::ulClientDelta</a>.
<p>
<pre class="fragment"><div>03279                           {
03280     <a class="code" href="../../d2/d2/struct__CLIENTINFO.html">PCLIENTINFO</a> pci;
03281     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
03282 
03283     <a class="code" href="../../d1/d0/inc_2user_8h.html#a848">ConnectIfNecessary</a>();
03284 
03285     pci = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>();
03286     pwnd = pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o5">pDeskInfo</a>-&gt;<a class="code" href="../../d1/d3/structtagDESKTOPINFO.html#o5">spwndShell</a>;
03287     <span class="keywordflow">if</span> (pwnd != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03288         pwnd = (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)((KERNEL_ULONG_PTR)pwnd - pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o6">ulClientDelta</a>);
03289         <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
03290     }
03291     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
03292 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a116" doxytag="client.c::GetTaskmanWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND GetTaskmanWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03319">3319</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03173">ConnectIfNecessary</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01515">HWq</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00530">_CLIENTINFO::pDeskInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02162">tagDESKTOPINFO::spwndTaskman</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00514">_CLIENTINFO::ulClientDelta</a>.
<p>
<pre class="fragment"><div>03319                             {
03320     <a class="code" href="../../d2/d2/struct__CLIENTINFO.html">PCLIENTINFO</a> pci;
03321     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
03322 
03323     <a class="code" href="../../d1/d0/inc_2user_8h.html#a848">ConnectIfNecessary</a>();
03324 
03325     pci = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>();
03326     pwnd = pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o5">pDeskInfo</a>-&gt;<a class="code" href="../../d1/d3/structtagDESKTOPINFO.html#o8">spwndTaskman</a>;
03327     <span class="keywordflow">if</span> (pwnd != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03328         pwnd = (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)((KERNEL_ULONG_PTR)pwnd - pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o6">ulClientDelta</a>);
03329         <span class="keywordflow">return</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd);
03330     }
03331     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
03332 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a53" doxytag="client.c::GetUpdateRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int WINAPI GetUpdateRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bErase</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01357">1357</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01757">tagWND::hrgnUpdate</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05245">NtUserGetUpdateRect()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00245">SetRectEmpty</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02289">WFPAINTNOTPROCESSED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02270">WFSENDERASEBKGND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02272">WFSENDNCPAINT</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02274">WFUPDATEDIRTY</a>.
<p>
<pre class="fragment"><div>01358 {
01359     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
01360 
01361     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hWnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01362         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01363     }
01364 
01365     <span class="comment">/*</span>
01366 <span class="comment">     * Check for the simple case where nothing needs to be done.</span>
01367 <span class="comment">     */</span>
01368     <span class="keywordflow">if</span> (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o11">hrgnUpdate</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
01369             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFSENDERASEBKGND) &amp;&amp;
01370             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFSENDNCPAINT) &amp;&amp;
01371             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFUPDATEDIRTY) &amp;&amp;
01372             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFPAINTNOTPROCESSED)) {
01373         <span class="keywordflow">if</span> (lprc)
01374             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a35">SetRectEmpty</a>(lprc);
01375         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01376     }
01377 
01378     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a203">NtUserGetUpdateRect</a>(hWnd, lprc, bErase);
01379 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a52" doxytag="client.c::GetUpdateRgn" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int WINAPI GetUpdateRgn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HRGN&nbsp;</td>
          <td class="mdname" nowrap> <em>hRgn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bErase</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01328">1328</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01757">tagWND::hrgnUpdate</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06715">NtUserGetUpdateRgn()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02289">WFPAINTNOTPROCESSED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02270">WFSENDERASEBKGND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02272">WFSENDNCPAINT</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02274">WFUPDATEDIRTY</a>.
<p>
<pre class="fragment"><div>01329 {
01330     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
01331 
01332     <span class="keywordflow">if</span> (hRgn == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01333         RIPERR1(ERROR_INVALID_HANDLE, RIP_WARNING, <span class="stringliteral">"Invalid region %#p"</span>, hRgn);
01334         <span class="keywordflow">return</span> ERROR;
01335     }
01336 
01337     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hWnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01338         <span class="keywordflow">return</span> ERROR;
01339     }
01340 
01341     <span class="comment">/*</span>
01342 <span class="comment">     * Check for the simple case where nothing needs to be done.</span>
01343 <span class="comment">     */</span>
01344     <span class="keywordflow">if</span> (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o11">hrgnUpdate</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
01345             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFSENDERASEBKGND) &amp;&amp;
01346             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFSENDNCPAINT) &amp;&amp;
01347             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFUPDATEDIRTY) &amp;&amp;
01348             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFPAINTNOTPROCESSED)) {
01349         SetRectRgn(hRgn, 0, 0, 0, 0);
01350         <span class="keywordflow">return</span> NULLREGION;
01351     }
01352 
01353     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a253">NtUserGetUpdateRgn</a>(hWnd, hRgn, bErase);
01354 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a64" doxytag="client.c::GetUserObjectInformationA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetUserObjectInformationA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>pvInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pnLengthNeeded</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01894">1894</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00662">NtUserGetObjectInformation()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>01900 {
01901     PVOID pvInfoW;
01902     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLengthW;
01903     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fSuccess;
01904 
01905     <span class="keywordflow">if</span> (nIndex == UOI_NAME || nIndex == UOI_TYPE) {
01906         nLengthW = nLength * <span class="keyword">sizeof</span>(WCHAR);
01907         pvInfoW = LocalAlloc(LPTR, nLengthW);
01908         fSuccess = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a83">NtUserGetObjectInformation</a>(hObject, nIndex, pvInfoW,
01909                 nLengthW, pnLengthNeeded);
01910         <span class="keywordflow">if</span> (fSuccess) {
01911             <span class="keywordflow">if</span> (pnLengthNeeded != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01912                  *pnLengthNeeded /= <span class="keyword">sizeof</span>(WCHAR);
01913             WCSToMB(pvInfoW, -1, &amp;(PCHAR)pvInfo, nLength, FALSE);
01914         }
01915         LocalFree(pvInfoW);
01916         <span class="keywordflow">return</span> fSuccess;
01917     } <span class="keywordflow">else</span> {
01918         <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a83">NtUserGetObjectInformation</a>(hObject, nIndex, pvInfo,
01919                 nLength, pnLengthNeeded);
01920     }
01921 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a62" doxytag="client.c::GetUserObjectSecurity" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetUserObjectSecurity           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSECURITY_INFORMATION&nbsp;</td>
          <td class="mdname" nowrap> <em>pRequestedInformation</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSECURITY_DESCRIPTOR&nbsp;</td>
          <td class="mdname" nowrap> <em>pSecurityDescriptor</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpnLengthRequired</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01837">1837</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d1/obse_8c-source.html#l00255">NtQuerySecurityObject()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>01843 {
01844     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
01845 
01846     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d9/d1/obse_8c.html#a2">NtQuerySecurityObject</a>(hObject,
01847                                    *pRequestedInformation,
01848                                    pSecurityDescriptor,
01849                                    nLength,
01850                                    lpnLengthRequired);
01851     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
01852         RIPNTERR0(Status, RIP_VERBOSE, <span class="stringliteral">""</span>);
01853         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01854     }
01855     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01856 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a119" doxytag="client.c::GetWindowContextHelpId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> GetWindowContextHelpId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03359">3359</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04543">NtUserCallHwnd()</a>.
<p>
<pre class="fragment"><div>03361 {
03362     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a175">NtUserCallHwnd</a>(hwnd, SFI__GETWINDOWCONTEXTHELPID);
03363 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a145" doxytag="client.c::GetWindowRgn" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int GetWindowRgn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HRGN&nbsp;</td>
          <td class="mdname" nowrap> <em>hrgn</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03680">3680</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01768">tagWND::hrgnClip</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01514">HW</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02323">WFMAXFAKEREGIONAL</a>.
<p>
<pre class="fragment"><div>03681 {
03682     <span class="keywordtype">int</span> code;
03683     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
03684 
03685     <span class="keywordflow">if</span> (hrgn == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
03686         <span class="keywordflow">return</span> ERROR;
03687 
03688     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03689         <span class="keywordflow">return</span> ERROR;
03690     }
03691 
03692     <span class="comment">/*</span>
03693 <span class="comment">     * If there is no region selected into this window, then return error</span>
03694 <span class="comment">     */</span>
03695     <span class="keywordflow">if</span> (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o19">hrgnClip</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMAXFAKEREGIONAL)) {
03696         <span class="keywordflow">return</span> ERROR;
03697     }
03698 
03699     code = CombineRgn(hrgn, pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o19">hrgnClip</a>, NULL, RGN_COPY);
03700 
03701     <span class="keywordflow">if</span> (code == ERROR)
03702         <span class="keywordflow">return</span> ERROR;
03703 
03704     <span class="comment">/*</span>
03705 <span class="comment">     * Offset it to window rect coordinates (not client rect coordinates)</span>
03706 <span class="comment">     */</span>
03707      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>) {
03708         code = OffsetRgn(hrgn, -pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left, -pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.top);
03709      }
03710 
03711 <span class="preprocessor">#ifdef USE_MIRRORING</span>
03712 <span class="preprocessor"></span>     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLAYOUTRTL)) {
03713          MirrorRgn(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a450">HW</a>(pwnd), hrgn);
03714      }
03715 <span class="preprocessor">#endif</span>
03716 <span class="preprocessor"></span>
03717     <span class="keywordflow">return</span> code;
03718 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a65" doxytag="client.c::GetWinStationInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetWinStationInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">WSINFO *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pWsInfo</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01923">1923</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
<pre class="fragment"><div>01925 {
01926     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>((ULONG_PTR)pWsInfo, SFI__GETWINSTATIONINFO);
01927 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a60" doxytag="client.c::GrayStringA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GrayStringA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HBRUSH&nbsp;</td>
          <td class="mdname" nowrap> <em>hbr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>GRAYSTRINGPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>lpfnPrint</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cch</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cy</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01781">1781</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01618">InnerGrayStringAorW()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>01791 {
01792     <span class="keywordflow">return</span> (<a class="code" href="../../d3/d8/client_8c.html#a59">InnerGrayStringAorW</a>(hdc,
01793                                 hbr,
01794                                 lpfnPrint,
01795                                 lParam,
01796                                 cch,
01797                                 x,
01798                                 y,
01799                                 cx,
01800                                 cy,
01801                                 TRUE));
01802 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a61" doxytag="client.c::GrayStringW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GrayStringW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HBRUSH&nbsp;</td>
          <td class="mdname" nowrap> <em>hbr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>GRAYSTRINGPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>lpfnPrint</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cch</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cy</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01804">1804</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l01618">InnerGrayStringAorW()</a>.
<p>
<pre class="fragment"><div>01814 {
01815     <span class="keywordflow">return</span> (<a class="code" href="../../d3/d8/client_8c.html#a59">InnerGrayStringAorW</a>(hdc,
01816                                 hbr,
01817                                 lpfnPrint,
01818                                 lParam,
01819                                 cch,
01820                                 x,
01821                                 y,
01822                                 cx,
01823                                 cy,
01824                                 FALSE));
01825 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a59" doxytag="client.c::InnerGrayStringAorW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL InnerGrayStringAorW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HBRUSH&nbsp;</td>
          <td class="mdname" nowrap> <em>hbr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>GRAYSTRINGPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>lpfnPrint</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cch</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cy</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01618">1618</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00220">DESTINATION</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00090">gcsHdc</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00105">gcxGray</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00106">gcyGray</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00104">ghbrWindowText</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00102">ghdcGray</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00103">ghFontSys</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d4/localrtl_8c-source.html#l00030">PATTERN</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00221">SOURCE</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l01781">GrayStringA()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l01804">GrayStringW()</a>.
<p>
<pre class="fragment"><div>01629 {
01630     HBITMAP hbm;
01631     HBITMAP hbmOld;
01632     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fResult;
01633     HFONT   hFontSave = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01634     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fReturn = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01635 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01636 <span class="preprocessor"></span>    <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   dwOldLayout = GDI_ERROR;
01637 <span class="preprocessor">#endif</span>
01638 <span class="preprocessor"></span>    <span class="comment">/*</span>
01639 <span class="comment">     * Win 3.1 tries to calc the size even if we don't know if it is a string.</span>
01640 <span class="comment">     */</span>
01641     <span class="keywordflow">if</span> (cch == 0) {
01642 
01643         <span class="keywordflow">try</span> {
01644 
01645             cch = bAnsi ? <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>((LPSTR)lParam) : wcslen((LPWSTR)lParam);
01646 
01647         } except (W32ExceptionHandler(FALSE, RIP_WARNING)) {
01648             fReturn = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01649         }
01650 
01651         <span class="keywordflow">if</span> (fReturn)
01652             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01653     }
01654 
01655     <span class="keywordflow">if</span> (cx == 0 || <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> == 0) {
01656 
01657        SIZE size;
01658 
01659         <span class="comment">/*</span>
01660 <span class="comment">         * We use the caller supplied hdc (instead of hdcBits) since we may be</span>
01661 <span class="comment">         * graying a font which is different than the system font and we want to</span>
01662 <span class="comment">         * get the proper text extents.</span>
01663 <span class="comment">         */</span>
01664         <span class="keywordflow">try</span> {
01665             <span class="keywordflow">if</span> (bAnsi) {
01666                 GetTextExtentPointA(hdc, (LPSTR)lParam, cch, &amp;size);
01667             } <span class="keywordflow">else</span> {
01668                 GetTextExtentPointW(hdc, (LPWSTR)lParam, cch, &amp;size);
01669             }
01670 
01671             cx = size.cx;
01672             <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = size.cy;
01673 
01674         } except (W32ExceptionHandler(FALSE, RIP_WARNING)) {
01675             fReturn = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01676         }
01677 
01678         <span class="keywordflow">if</span> (fReturn)
01679             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01680     }
01681 
01682     UserAssert (ghdcGray != NULL);
01683 
01684     RtlEnterCriticalSection(&amp;gcsHdc);
01685 
01686     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8/clglobal_8c.html#a30">gcxGray</a> &lt; cx || <a class="code" href="../../d1/d8/clglobal_8c.html#a31">gcyGray</a> &lt; <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>) {
01687 
01688         <span class="keywordflow">if</span> ((hbm = CreateBitmap(cx, cy, 1, 1, 0L)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01689 
01690             hbmOld = SelectObject(ghdcGray, hbm);
01691             DeleteObject(hbmOld);
01692 
01693             <a class="code" href="../../d1/d8/clglobal_8c.html#a30">gcxGray</a> = cx;
01694             <a class="code" href="../../d1/d8/clglobal_8c.html#a31">gcyGray</a> = <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>;
01695 
01696         } <span class="keywordflow">else</span> {
01697             cx = <a class="code" href="../../d1/d8/clglobal_8c.html#a30">gcxGray</a>;
01698             <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = <a class="code" href="../../d1/d8/clglobal_8c.html#a31">gcyGray</a>;
01699         }
01700     }
01701 
01702 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01703 <span class="preprocessor"></span>    <span class="comment">/*</span>
01704 <span class="comment">     * If the caller hdc is mirrored then mirror ghdcGray.</span>
01705 <span class="comment">     */</span>
01706     <span class="keywordflow">if</span> (MIRRORED_HDC(hdc)) {
01707         dwOldLayout = SetLayoutWidth(ghdcGray, cx, LAYOUT_RTL);
01708     }
01709 <span class="preprocessor">#endif</span>
01710 <span class="preprocessor"></span>
01711     <span class="comment">/*</span>
01712 <span class="comment">     * Force the ghdcGray font to be the same as hDC; ghdcGray is always</span>
01713 <span class="comment">     * the system font</span>
01714 <span class="comment">     */</span>
01715     hFontSave = SelectObject(hdc, ghFontSys);
01716 
01717     <span class="keywordflow">if</span> (hFontSave != <a class="code" href="../../d1/d8/clglobal_8c.html#a28">ghFontSys</a>) {
01718         SelectObject(hdc, hFontSave);
01719         hFontSave = SelectObject(ghdcGray, hFontSave);
01720     }
01721 
01722     <span class="keywordflow">if</span> (lpfnPrint != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01723         PatBlt(ghdcGray, 0, 0, cx, cy, WHITENESS);
01724         fResult = (*lpfnPrint)(<a class="code" href="../../d1/d8/clglobal_8c.html#a27">ghdcGray</a>, lParam, cch);
01725     } <span class="keywordflow">else</span> {
01726 
01727         <span class="keywordflow">if</span> (bAnsi) {
01728             fResult = TextOutA(ghdcGray, 0, 0, (LPSTR)lParam, cch);
01729         } <span class="keywordflow">else</span> {
01730             fResult = TextOutW(ghdcGray, 0, 0, (LPWSTR)lParam, cch);
01731         }
01732     }
01733 
01734     <span class="keywordflow">if</span> (fResult)
01735         PatBlt(ghdcGray, 0, 0, cx, cy, DESTINATION | PATTERN);
01736 
01737     <span class="keywordflow">if</span> (fResult || cch == -1) {
01738 
01739         HBRUSH hbrSave;
01740         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>  textColorSave;
01741         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>  bkColorSave;
01742 
01743         textColorSave = SetTextColor(hdc, 0x00000000L);
01744         bkColorSave = SetBkColor(hdc, 0x00FFFFFFL);
01745 
01746         hbrSave = SelectObject(hdc, hbr ? hbr : ghbrWindowText);
01747 
01748         BitBlt(hdc,
01749                x,
01750                y,
01751                cx,
01752                cy,
01753                ghdcGray,
01754                0,
01755                0,
01756                (((PATTERN ^ DESTINATION) &amp; SOURCE) ^ PATTERN));
01757 
01758         SelectObject(hdc, hbrSave);
01759 
01760         <span class="comment">/*</span>
01761 <span class="comment">         * Restore saved colors</span>
01762 <span class="comment">         */</span>
01763         SetTextColor(hdc, textColorSave);
01764         SetBkColor(hdc, bkColorSave);
01765     }
01766 
01767     SelectObject(ghdcGray, hFontSave);
01768 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01769 <span class="preprocessor"></span>    <span class="comment">/*</span>
01770 <span class="comment">     * Restore ghdcGray layout state.</span>
01771 <span class="comment">     */</span>
01772     <span class="keywordflow">if</span> (dwOldLayout != GDI_ERROR) {
01773         SetLayoutWidth(ghdcGray, cx, dwOldLayout);
01774     }
01775 <span class="preprocessor">#endif</span>
01776 <span class="preprocessor"></span>    RtlLeaveCriticalSection(&amp;gcsHdc);
01777 
01778     <span class="keywordflow">return</span> fResult;
01779 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a107" doxytag="client.c::KillSystemTimer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL KillSystemTimer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>nIDEvent</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03210">3210</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04602">NtUserCallHwndParam()</a>.
<p>
<pre class="fragment"><div>03213 {
03214     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a178">NtUserCallHwndParam</a>(hwnd, nIDEvent, SFI__KILLSYSTEMTIMER);
03215 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a152" doxytag="client.c::LoadKeyboardLayoutA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HKL LoadKeyboardLayoutA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszKLName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l04470">4470</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04463">LoadKeyboardLayoutW()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00065">MAX_PATH</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>04473 {
04474     WCHAR awchKLName[<a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>];
04475     LPWSTR lpBuffer = awchKLName;
04476 
04477     <span class="keywordflow">if</span> (!MBToWCS(lpszKLName, -1, &amp;lpBuffer, <span class="keyword">sizeof</span>(awchKLName), FALSE))
04478         <span class="keywordflow">return</span> (HKL)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04479 
04480     <span class="keywordflow">return</span> <a class="code" href="../../d3/d8/client_8c.html#a151">LoadKeyboardLayoutW</a>(awchKLName, uFlags);
04481 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a150" doxytag="client.c::LoadKeyboardLayoutEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HKL LoadKeyboardLayoutEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszKLName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l04439">4439</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04385">LoadKeyboardLayoutWorker()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>04443 {
04444     RIPMSG0(RIP_WARNING, <span class="stringliteral">"LoadKeyboardLayoutEx is called."</span>);
04445     <span class="comment">/*</span>
04446 <span class="comment">     * NULL hkl is not allowed.</span>
04447 <span class="comment">     */</span>
04448     <span class="keywordflow">if</span> (hkl == (HKL)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04449         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04450     }
04451 
04452     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a608">LoadKeyboardLayoutWorker</a>(hkl, lpszKLName, uFlags, FALSE);
04453 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a151" doxytag="client.c::LoadKeyboardLayoutW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HKL LoadKeyboardLayoutW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszKLName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l04463">4463</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04385">LoadKeyboardLayoutWorker()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d7/d9/immime_8c-source.html#l00416">ImmFreeLayout()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04470">LoadKeyboardLayoutA()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l03976">LoadPreloadKeyboardLayouts()</a>.
<p>
<pre class="fragment"><div>04466 {
04467     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a608">LoadKeyboardLayoutWorker</a>(NULL, lpszKLName, uFlags, FALSE);
04468 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a149" doxytag="client.c::LoadKeyboardLayoutWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HKL LoadKeyboardLayoutWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszKLName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fFailSafe</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l04385">4385</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d6/d0/usercli_8h.html#a625">_LoadKeyboardLayoutEx()</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00077">ISHK_ADD</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04439">LoadKeyboardLayoutEx()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04463">LoadKeyboardLayoutW()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00049">UpdatePerUserSystemParameters()</a>.
<p>
<pre class="fragment"><div>04390 {
04391     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> offTable;
04392     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> KbdInputLocale;
04393     HANDLE hFile;
04394     HKL hKbdLayout;
04395     WCHAR awchKL[KL_NAMELENGTH];
04396 
04397     TAGMSG1(DBGTAG_IMM, <span class="stringliteral">"LoadKeyboardLayoutWorker called with KLNAME=%S"</span>, lpszKLName);
04398 
04399     <span class="comment">/*</span>
04400 <span class="comment">     * If there is a substitute keyboard layout OpenKeyboardLayoutFile returns</span>
04401 <span class="comment">     * the substitute keyboard layout name to load.</span>
04402 <span class="comment">     */</span>
04403     wcsncpy(awchKL, lpszKLName, KL_NAMELENGTH - 1);
04404     awchKL[KL_NAMELENGTH - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
04405 
04406     <span class="comment">/*</span>
04407 <span class="comment">     * Open the layout file</span>
04408 <span class="comment">     */</span>
04409     hFile = <a class="code" href="../../d6/d0/usercli_8h.html#a604">OpenKeyboardLayoutFile</a>(awchKL, &amp;uFlags, &amp;offTable, &amp;KbdInputLocale);
04410     <span class="keywordflow">if</span> (hFile == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04411         <span class="keywordflow">if</span> (!fFailSafe &amp;&amp; (uFlags &amp; KLF_FAILSAFE) == 0) {
04412             <span class="comment">// If not fail safe mode, just bail to fail.</span>
04413             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04414         }
04415         uFlags &amp;= ~KLF_SUBSTITUTE_OK;
04416         <span class="keywordflow">if</span> (wcscmp(awchKL, L<span class="stringliteral">"00000409"</span>)) {
04417             wcscpy(awchKL, L<span class="stringliteral">"00000409"</span>);
04418             hFile = <a class="code" href="../../d6/d0/usercli_8h.html#a604">OpenKeyboardLayoutFile</a>(awchKL, &amp;uFlags, &amp;offTable, &amp;KbdInputLocale);
04419         }
04420         <span class="keywordflow">if</span> (hFile == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04421             <span class="comment">// It's OK to pass NULL hFile. This lets the win32k prepare and</span>
04422             <span class="comment">// allocate the fallback keyboard layout.</span>
04423             <span class="comment">// kbdnul, which is a fallback keyboard layout stored in in win32k, will be used:</span>
04424         }
04425     }
04426 
04427     <span class="comment">/*</span>
04428 <span class="comment">     * Call the server to read the keyboard tables.  Note that</span>
04429 <span class="comment">     * the server will close the file handle when it is done.</span>
04430 <span class="comment">     */</span>
04431     hKbdLayout = <a class="code" href="../../d6/d0/usercli_8h.html#a625">_LoadKeyboardLayoutEx</a>(hFile, offTable, hkl, awchKL, KbdInputLocale, uFlags);
04432     <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hFile);
04433 
04434     <a class="code" href="../../d6/d0/usercli_8h.html#a788">CliImmInitializeHotKeys</a>(ISHK_ADD, (HKL)IntToPtr( KbdInputLocale ));
04435 
04436     <span class="keywordflow">return</span> hKbdLayout;
04437 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a109" doxytag="client.c::LoadLocalFonts" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void LoadLocalFonts           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03240">3240</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
<pre class="fragment"><div>03241 {
03242     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(FALSE,SFI_XXXLW_LOADFONTS);
03243 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a147" doxytag="client.c::LoadPreloadKeyboardLayouts" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID LoadPreloadKeyboardLayouts           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03976">3976</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00293">ISREMOTESESSION</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04463">LoadKeyboardLayoutW()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03974">NSIZEPRELOAD</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00049">UpdatePerUserSystemParameters()</a>.
<p>
<pre class="fragment"><div>03977 {
03978     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>  i;
03979     WCHAR szPreLoadee[<a class="code" href="../../d3/d8/client_8c.html#a6">NSIZEPRELOAD</a>];
03980     WCHAR lpszName[KL_NAMELENGTH];
03981 
03982     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/usercli_8h.html#a30">ISREMOTESESSION</a>()) {
03983         <span class="comment">/*</span>
03984 <span class="comment">         * Console doesn't have a client layout, so start from 2.</span>
03985 <span class="comment">         */</span>
03986         i = 2;
03987     } <span class="keywordflow">else</span> {
03988         <span class="comment">/*</span>
03989 <span class="comment">         * Client might have specified a keyboard layout, if this</span>
03990 <span class="comment">         * is so, then Preload\1 was not loaded, so start from 1.</span>
03991 <span class="comment">         */</span>
03992         i = 1;
03993     }
03994 
03995     <span class="keywordflow">for</span> (; i &lt; 1000; i++) {
03996         wsprintf(szPreLoadee, L<span class="stringliteral">"%d"</span>, i );
03997         <span class="keywordflow">if</span> ((GetPrivateProfileStringW(
03998                  L<span class="stringliteral">"Preload"</span>,
03999                  szPreLoadee,
04000                  L<span class="stringliteral">""</span>,                            <span class="comment">// default = NULL</span>
04001                  lpszName,                       <span class="comment">// output buffer</span>
04002                  KL_NAMELENGTH,
04003                  L<span class="stringliteral">"keyboardlayout.ini"</span>) == -1 ) || (*lpszName == <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>)) {
04004             <span class="keywordflow">break</span>;
04005         }
04006         <a class="code" href="../../d3/d8/client_8c.html#a151">LoadKeyboardLayoutW</a>(lpszName, KLF_REPLACELANG |KLF_SUBSTITUTE_OK |KLF_NOTELLSHELL);
04007     }
04008 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a108" doxytag="client.c::LoadRemoteFonts" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void LoadRemoteFonts           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03223">3223</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d3/d8/client_8c.html#a30">EnableEUDC()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>03224 {
03225     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(TRUE,SFI_XXXLW_LOADFONTS);
03226 
03227     <span class="comment">/*</span>
03228 <span class="comment">     * After load remote fonts, let eudc enabled.</span>
03229 <span class="comment">     */</span>
03230     <a class="code" href="../../d3/d8/client_8c.html#a30">EnableEUDC</a>(TRUE);
03231 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a133" doxytag="client.c::LockSetForegroundWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL LockSetForegroundWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>uLockCode</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03519">3519</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
<pre class="fragment"><div>03521 {
03522     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(uLockCode, SFI__LOCKSETFOREGROUNDWINDOW);
03523 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a110" doxytag="client.c::MessageBeep" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MessageBeep           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>wType</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03252">3252</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
Referenced by <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00716">SKC1ButtonDown()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00680">SKT1InvertButton()</a>, and <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00968">SKT1SetCursor()</a>.
<p>
<pre class="fragment"><div>03254 {
03255     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(wType, SFI_XXXMESSAGEBEEP);
03256 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a57" doxytag="client.c::MsgWaitForMultipleObjects" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI MsgWaitForMultipleObjects           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nCount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST HANDLE *&nbsp;</td>
          <td class="mdname" nowrap> <em>pHandles</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fWaitAll</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwMilliseconds</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwWakeMask</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01475">1475</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l01486">MsgWaitForMultipleObjectsEx()</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01129">HardErrorHandler()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l01210">SmoothScrollWindowEx()</a>, and <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>.
<p>
<pre class="fragment"><div>01481 {
01482     <span class="keywordflow">return</span>  <a class="code" href="../../d3/d8/client_8c.html#a58">MsgWaitForMultipleObjectsEx</a>(nCount, pHandles,
01483                 dwMilliseconds, dwWakeMask, fWaitAll?MWMO_WAITALL:0);
01484 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a58" doxytag="client.c::MsgWaitForMultipleObjectsEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WINAPI MsgWaitForMultipleObjectsEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nCount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST HANDLE *&nbsp;</td>
          <td class="mdname" nowrap> <em>pHandles</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwMilliseconds</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwWakeMask</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01486">1486</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00529">_CLIENTINFO::dwTIFlags</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03067">GetInputBits()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00196">HEVENT_REMOVEME</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04510">NtUserCallNoParam()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01541">NtUserWaitForMsgAndEvent()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00061">PCLIENTTHREADINFO</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02827">TIF_16BIT</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00084">ExitWindowsWorker()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01475">MsgWaitForMultipleObjects()</a>, and <a class="el" href="../../d7/d4/connect_8c-source.html#l01474">WaitForZombieTerminate()</a>.
<p>
<pre class="fragment"><div>01492 {
01493     HANDLE hEventInput;
01494     PHANDLE ph;
01495     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex;
01496     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>  ReenterWowScheduler;
01497     <a class="code" href="../../d2/d2/struct__CLIENTINFO.html">PCLIENTINFO</a> pci;
01498     HANDLE rgHandles[ 8 + 1 ];
01499     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fWaitAll = ((<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; MWMO_WAITALL) != 0);
01500     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fAlertable = ((<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; MWMO_ALERTABLE) != 0);
01501     <a class="code" href="../../d4/d0/structtagCLIENTTHREADINFO.html">PCLIENTTHREADINFO</a> pcti;
01502 
01503     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; ~MWMO_VALID) {
01504         RIPERR1(ERROR_INVALID_PARAMETER, RIP_ERROR, <span class="stringliteral">"MsgWaitForMultipleObjectsEx, invalid flags 0x%08lx\n"</span>, dwFlags);
01505         <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)-1;
01506     }
01507 
01508     pci = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>();
01509     <span class="keywordflow">if</span> (pci == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01510         <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)-1;
01511 
01512     <span class="comment">/*</span>
01513 <span class="comment">     * If we have a pcti, see if we can return immediately.</span>
01514 <span class="comment">     * pcti migth be NULL if this is the first W32 call made by this thread.</span>
01515 <span class="comment">     */</span>
01516 
01517     pcti = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;pClientThreadInfo;
01518     <span class="keywordflow">if</span> (pcti &amp;&amp; (!fWaitAll || !nCount)) {
01519         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/inc_2user_8h.html#a1143">GetInputBits</a>(pcti, LOWORD(dwWakeMask), (dwFlags &amp; MWMO_INPUTAVAILABLE))) {
01520             <span class="keywordflow">return</span> nCount;
01521         }
01522     }
01523 
01524     <span class="comment">/*</span>
01525 <span class="comment">     * Note -- the wake mask is a WORD, and only 3 flags are defined, so</span>
01526 <span class="comment">     * they can be combined for the call.</span>
01527 <span class="comment">     */</span>
01528 
01529     hEventInput = (HANDLE)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(MAKELONG(dwWakeMask, dwFlags), SFI_XXXGETINPUTEVENT);
01530 
01531     <span class="keywordflow">if</span> (hEventInput == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01532         RIPMSG0(RIP_WARNING, <span class="stringliteral">"MsgWaitForMultipleObjectsEx, GetInputEvent failed\n"</span>);
01533         <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)-1;
01534     }
01535 
01536     <span class="comment">/*</span>
01537 <span class="comment">     * If needed, allocate a new array of handles that will include</span>
01538 <span class="comment">     * the input event handle.</span>
01539 <span class="comment">     */</span>
01540     ph = rgHandles;
01541     <span class="keywordflow">if</span> (pHandles) {
01542 
01543         <span class="keywordflow">if</span> (nCount &gt; 8) {
01544             ph = (PHANDLE)LocalAlloc(LPTR, <span class="keyword">sizeof</span>(HANDLE) * (nCount + 1));
01545             <span class="keywordflow">if</span> (ph == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01546                 <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a173">NtUserCallNoParam</a>(SFI_CLEARWAKEMASK);
01547                 <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)-1;
01548             }
01549         }
01550 
01551         RtlCopyMemory((PVOID)ph, pHandles, <span class="keyword">sizeof</span>(HANDLE) * nCount);
01552 
01553     } <span class="keywordflow">else</span> {
01554         <span class="comment">// if this isn't Zero, the function parameters are invalid</span>
01555         nCount = 0;
01556     }
01557 
01558     ph[nCount] = hEventInput;
01559 
01560 
01561     <span class="comment">/*</span>
01562 <span class="comment">     *  WowApps must exit the Wow scheduler otherwise other tasks</span>
01563 <span class="comment">     *  in this Wow scheduler can't run. The only exception is if</span>
01564 <span class="comment">     *  the timeout is Zero.  We pass HEVENT_REMOVEME as the handle so we will go</span>
01565 <span class="comment">     *  into the sleeptask AND return without going to sleep but letting</span>
01566 <span class="comment">     *  other apps run.</span>
01567 <span class="comment">     */</span>
01568     <span class="keywordflow">if</span> ((pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o4">dwTIFlags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a796">TIF_16BIT</a>) &amp;&amp; dwMilliseconds) {
01569         ReenterWowScheduler = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01570         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a103">NtUserWaitForMsgAndEvent</a>(HEVENT_REMOVEME);
01571         <span class="comment">/*</span>
01572 <span class="comment">         * If our wait condition is satisfied, make sure we won't wait.</span>
01573 <span class="comment">         * We must have a pcti now since we just went to the kernel</span>
01574 <span class="comment">         */</span>
01575         pcti = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;pClientThreadInfo;
01576         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/inc_2user_8h.html#a1143">GetInputBits</a>(pcti, LOWORD(dwWakeMask), (dwFlags &amp; MWMO_INPUTAVAILABLE))) {
01577             SetEvent(hEventInput);
01578         }
01579     } <span class="keywordflow">else</span> {
01580         ReenterWowScheduler = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01581     }
01582 
01583     dwIndex = WaitForMultipleObjectsEx(nCount + 1, ph, fWaitAll, dwMilliseconds, fAlertable);
01584 
01585     <span class="comment">/*</span>
01586 <span class="comment">     * Clear the wake mask since we're done waiting on these events.</span>
01587 <span class="comment">     */</span>
01588     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a173">NtUserCallNoParam</a>(SFI_CLEARWAKEMASK);
01589 
01590     <span class="comment">/*</span>
01591 <span class="comment">     *  If needed reenter the wow scheduler</span>
01592 <span class="comment">     */</span>
01593     <span class="keywordflow">if</span> (ReenterWowScheduler) {
01594         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(DY_OLDYIELD, SFI_XXXDIRECTEDYIELD);
01595     }
01596 
01597     <span class="keywordflow">if</span> (ph != rgHandles) {
01598         LocalFree(ph);
01599     }
01600 
01601     <span class="keywordflow">return</span> dwIndex;
01602 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a79" doxytag="client.c::OpenDesktopA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HDESK OpenDesktopA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pdesktop</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fInherit</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02575">2575</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l02555">CommonOpenDesktop()</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00544">RtlCreateUnicodeStringFromAsciiz()</a>, and <a class="el" href="../../d7/d5/nls_8c-source.html#l01215">RtlFreeUnicodeString()</a>.
<p>
<pre class="fragment"><div>02580 {
02581     UNICODE_STRING UnicodeString;
02582     HDESK hdesk;
02583 
02584     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d7/string_8c.html#a13">RtlCreateUnicodeStringFromAsciiz</a>(&amp;UnicodeString, pdesktop))
02585         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02586 
02587     hdesk = <a class="code" href="../../d3/d8/client_8c.html#a78">CommonOpenDesktop</a>(&amp;UnicodeString, dwFlags, fInherit, amRequest);
02588 
02589     <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>(&amp;UnicodeString);
02590 
02591     <span class="keywordflow">return</span> hdesk;
02592 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a80" doxytag="client.c::OpenDesktopW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HDESK OpenDesktopW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pdesktop</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fInherit</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02594">2594</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l02555">CommonOpenDesktop()</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, and <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>.
<p>
<pre class="fragment"><div>02599 {
02600     UNICODE_STRING strDesktop;
02601 
02602     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;strDesktop, pdesktop);
02603 
02604     <span class="keywordflow">return</span> <a class="code" href="../../d3/d8/client_8c.html#a78">CommonOpenDesktop</a>(&amp;strDesktop, dwFlags, fInherit, amRequest);
02605 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a111" doxytag="client.c::OpenIcon" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL OpenIcon           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03265">3265</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06274">NtUserShowWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02420">WFMINIMIZED</a>.
<p>
<pre class="fragment"><div>03267 {
03268     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
03269 
03270     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03271         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03272     }
03273     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMINIMIZED)) {
03274         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a237">NtUserShowWindow</a>(hwnd, SW_NORMAL);
03275     }
03276     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03277 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a148" doxytag="client.c::OpenKeyboardLayoutFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE OpenKeyboardLayoutFile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszKLName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>puFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>poffTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pKbdInputLocale</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l04019">4019</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d5/perfuser_8c.html#a20">BOOL()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00077">CCH_KL_ID</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00076">CCH_KL_LIBNAME</a>, <a class="el" href="../../d7/d5/memprint_8h-source.html#l00079">DbgPrint</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03097">GetClientKeyboardType()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00149">IS_IME_KBDLAYOUT</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00293">ISREMOTESESSION</a>, <a class="el" href="../../d3/d1/rtload_8c-source.html#l00051">KeyAttributes</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00065">MAX_PATH</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00066">NSZKLKEY</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l01870">NtOpenKey()</a>, <a class="el" href="../../d8/d6/ntapi_8c-source.html#l02187">NtQueryValueKey()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d8/ntfsexp_8h.html#a141a69">OPEN_EXISTING</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">PUINT</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00069">pwszKLLibSafety</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00071">pwszKLLibSafetyJPN</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00073">pwszKLLibSafetyKOR</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d0/d3/cnvint_8c-source.html#l00225">RtlUnicodeStringToInteger()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00064">szKLAttributes</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00063">szKLFile</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00065">szKLId</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00062">szKLKey</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00070">wKbdLocaleSafety</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00072">wKbdLocaleSafetyJPN</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l00074">wKbdLocaleSafetyKOR</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02154">CommonCreateWindowStation()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l04385">LoadKeyboardLayoutWorker()</a>.
<p>
<pre class="fragment"><div>04024 {
04025     PKBDNLSTABLES (*pfnNls)();
04026     <a class="code" href="../../d0/d5/perfuser_8c.html#a20">BOOL</a> (*pfnDriverNT4)(LPWSTR);
04027     <a class="code" href="../../d0/d5/perfuser_8c.html#a20">BOOL</a> (*pfnDriver)(HKL, LPWSTR, PCLIENTKEYBOARDTYPE, <a class="code" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>);
04028     WCHAR awchRealLayoutFile[<a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>];
04029     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bMightBeKbdNlsDriver = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
04030     WCHAR awchKL[KL_NAMELENGTH];
04031     WCHAR awchKLRegKey[<a class="code" href="../../d3/d8/client_8c.html#a0">NSZKLKEY</a>];
04032     LPWSTR lpszKLRegKey = &amp;awchKLRegKey[0];
04033     PKBDTABLES (*pfn)();
04034     LPWSTR pwszLib;
04035     LPWSTR pwszId;
04036     HANDLE hLibModule;
04037     WCHAR awchModName[<a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>];
04038     UNICODE_STRING UnicodeString;
04039     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wLayoutId;
04040     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wLanguageId;
04041     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
04042     OBJECT_ATTRIBUTES OA;
04043     HANDLE hKey;
04044     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbSize;
04045     <span class="keyword">struct </span>{
04046         KEY_VALUE_PARTIAL_INFORMATION KeyInfo;
04047         WCHAR awchLibName[<a class="code" href="../../d3/d8/client_8c.html#a1">CCH_KL_LIBNAME</a>];
04048     } KeyFile;
04049     <span class="keyword">struct </span>{
04050         KEY_VALUE_PARTIAL_INFORMATION KeyInfo;
04051         WCHAR awchId[<a class="code" href="../../d3/d8/client_8c.html#a2">CCH_KL_ID</a>];
04052     } KeyId;
04053     <span class="keyword">struct </span>{
04054         KEY_VALUE_PARTIAL_INFORMATION KeyInfo;
04055         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Attributes;
04056     } <a class="code" href="../../d2/d2/rtload_8c.html#a6">KeyAttributes</a>;
04057 
04058     wLanguageId = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wcstoul(lpszKLName, NULL, 16);
04059     <span class="comment">/*</span>
04060 <span class="comment">     * Substitute Layout if required.</span>
04061 <span class="comment">     */</span>
04062     <span class="keywordflow">if</span> (*puFlags &amp; KLF_SUBSTITUTE_OK) {
04063         GetPrivateProfileStringW(
04064                 L<span class="stringliteral">"Substitutes"</span>,
04065                 lpszKLName,
04066                 lpszKLName,        <span class="comment">// default == no change (no substitute found)</span>
04067                 awchKL,
04068                 <span class="keyword">sizeof</span>(awchKL)/<span class="keyword">sizeof</span>(WCHAR),
04069                 L<span class="stringliteral">"keyboardlayout.ini"</span>);
04070 
04071         <span class="comment">/*</span>
04072 <span class="comment">         * #273562 : Flush the registry cache, because the cpanel applet</span>
04073 <span class="comment">         * destroys and recreates the Substitutes section a lot, which</span>
04074 <span class="comment">         * would otherwise leave us with STATUS_KEY_DELETED.</span>
04075 <span class="comment">         */</span>
04076         WritePrivateProfileStringW(NULL, NULL, NULL, NULL);
04077 
04078         awchKL[KL_NAMELENGTH - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
04079         wcscpy(lpszKLName, awchKL);
04080     }
04081 
04082     wLayoutId = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wcstoul(lpszKLName, NULL, 16);
04083 
04084     <span class="comment">/*</span>
04085 <span class="comment">     * Get DLL name from the registry, load it, and get the entry point.</span>
04086 <span class="comment">     */</span>
04087     pwszLib = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04088     wcscpy(lpszKLRegKey, szKLKey);
04089     wcscat(lpszKLRegKey, lpszKLName);
04090     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString, lpszKLRegKey);
04091     InitializeObjectAttributes(&amp;OA, &amp;UnicodeString, OBJ_CASE_INSENSITIVE, NULL, NULL);
04092 
04093     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(<a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>(&amp;hKey, KEY_READ, &amp;OA))) {
04094         <span class="comment">/*</span>
04095 <span class="comment">         * Read the "Layout File" value.</span>
04096 <span class="comment">         */</span>
04097         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString, szKLFile);
04098 
04099         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>(hKey,
04100                 &amp;UnicodeString,
04101                 KeyValuePartialInformation,
04102                 &amp;KeyFile,
04103                 <span class="keyword">sizeof</span>(KeyFile),
04104                 &amp;cbSize);
04105 
04106         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> == STATUS_BUFFER_OVERFLOW) {
04107             RIPMSG0(RIP_WARNING, <span class="stringliteral">"OpenKeyboardLayoutFile (Layout File) - Buffer overflow."</span>);
04108             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
04109         }
04110         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
04111             pwszLib = (LPWSTR)KeyFile.KeyInfo.Data;
04112             pwszLib[<a class="code" href="../../d3/d8/client_8c.html#a1">CCH_KL_LIBNAME</a> - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
04113 
04114         }
04115 
04116         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString, szKLAttributes);
04117         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>(hKey,
04118                 &amp;UnicodeString,
04119                 KeyValuePartialInformation,
04120                 &amp;KeyAttributes,
04121                 <span class="keyword">sizeof</span>(KeyAttributes),
04122                 &amp;cbSize);
04123 
04124         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
04125 <span class="preprocessor">#if DBG</span>
04126 <span class="preprocessor"></span>            <span class="keywordflow">if</span> ((*((PDWORD)<a class="code" href="../../d2/d2/rtload_8c.html#a6">KeyAttributes</a>.KeyInfo.Data) &amp; ~KLF_ATTRMASK) != 0) {
04127                 RIPMSG1(RIP_WARNING,
04128                         <span class="stringliteral">"OpenKeyboardLayoutFile - Unexpected attributes %lx"</span>,
04129                         *((PDWORD)<a class="code" href="../../d2/d2/rtload_8c.html#a6">KeyAttributes</a>.KeyInfo.Data));
04130             }
04131 <span class="preprocessor">#endif</span>
04132 <span class="preprocessor"></span>            *puFlags |= (*(PDWORD)<a class="code" href="../../d2/d2/rtload_8c.html#a6">KeyAttributes</a>.KeyInfo.Data &amp; KLF_ATTRMASK);
04133         }
04134 
04135         <span class="comment">/*</span>
04136 <span class="comment">         * If the high word of wLayoutId is 0xE??? then this is an IME based</span>
04137 <span class="comment">         * keyboard layout.</span>
04138 <span class="comment">         */</span>
04139         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d5/conimep_8h.html#a49">IS_IME_KBDLAYOUT</a>(wLayoutId)) {
04140             wLayoutId = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)HIWORD(wLayoutId);
04141         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (HIWORD(wLayoutId)) {
04142             <span class="comment">/*</span>
04143 <span class="comment">             * If the high word of wLayoutId is non-null then read the "Layout ID" value.</span>
04144 <span class="comment">             * Layout IDs start at 1, increase sequentially and are unique.</span>
04145 <span class="comment">             */</span>
04146             <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString, szKLId);
04147 
04148             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>(hKey,
04149                     &amp;UnicodeString,
04150                     KeyValuePartialInformation,
04151                     &amp;KeyId,
04152                     <span class="keyword">sizeof</span>(KeyId),
04153                     &amp;cbSize);
04154 
04155             <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> == STATUS_BUFFER_OVERFLOW) {
04156                 RIPMSG0(RIP_WARNING, <span class="stringliteral">"OpenKeyboardLayoutFile - Buffer overflow."</span>);
04157                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
04158             }
04159             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
04160                 pwszId = (LPWSTR)KeyId.KeyInfo.Data;
04161                 pwszId[<a class="code" href="../../d3/d8/client_8c.html#a2">CCH_KL_ID</a> - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
04162                 wLayoutId = (wcstol(pwszId, NULL, 16) &amp; 0x0fff) | 0xf000;
04163             } <span class="keywordflow">else</span> {
04164                 wLayoutId = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)0xfffe ;    <span class="comment">// error in layout ID, load separately</span>
04165             }
04166         }
04167         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hKey);
04168     } <span class="keywordflow">else</span> {
04169         <span class="comment">/*</span>
04170 <span class="comment">         * This is a temporary case to allow booting the new multilingual user on top of a</span>
04171 <span class="comment">         * Daytona registry.</span>
04172 <span class="comment">         */</span>
04173         <span class="comment">/*</span>
04174 <span class="comment">         * Get DLL name from the registry, load it, and get the entry point.</span>
04175 <span class="comment">         */</span>
04176         pwszLib = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04177         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString,
04178                 L<span class="stringliteral">"\\Registry\\Machine\\System\\CurrentControlSet\\Control\\Keyboard Layout"</span>);
04179         InitializeObjectAttributes(&amp;OA, &amp;UnicodeString, OBJ_CASE_INSENSITIVE, NULL, NULL);
04180 
04181         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(<a class="code" href="../../d7/d7/ntapi_8c.html#a23">NtOpenKey</a>(&amp;hKey, KEY_READ, &amp;OA))) {
04182             <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString, lpszKLName);
04183 
04184             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d7/ntapi_8c.html#a25">NtQueryValueKey</a>(hKey,
04185                     &amp;UnicodeString,
04186                     KeyValuePartialInformation,
04187                     &amp;KeyFile,
04188                     <span class="keyword">sizeof</span>(KeyFile),
04189                     &amp;cbSize);
04190 
04191             <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> == STATUS_BUFFER_OVERFLOW) {
04192                 RIPMSG0(RIP_WARNING, <span class="stringliteral">"OpenKeyboardLayoutFile - Buffer overflow."</span>);
04193                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
04194             }
04195             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
04196                 pwszLib = (LPWSTR)KeyFile.KeyInfo.Data;
04197                 pwszLib[<a class="code" href="../../d3/d8/client_8c.html#a1">CCH_KL_LIBNAME</a> - 1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
04198             }
04199 
04200             <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(hKey);
04201         }
04202     }
04203 
04204     *pKbdInputLocale = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)MAKELONG(LOWORD(wLanguageId),LOWORD(wLayoutId));
04205 
04206     <span class="keywordflow">if</span> (pwszLib == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04207         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a30">ISREMOTESESSION</a>() &amp;&amp; <a class="code" href="../../d4/d5/conimep_8h.html#a49">IS_IME_KBDLAYOUT</a>(wLayoutId)) {
04208             <span class="comment">/*</span>
04209 <span class="comment">             * -- port from HYDRA --</span>
04210 <span class="comment">             * Could not find the keyboard KL for FE, so give them some reasonable one.</span>
04211 <span class="comment">             * If the high word of wLayoutId is 0xE??? then this is an IME based</span>
04212 <span class="comment">             * keyboard layout.</span>
04213 <span class="comment">             * And, the safe KL name is KBDJPN.DLL for Japanese.</span>
04214 <span class="comment">             *                       or KBDKOR.DLL for Korean</span>
04215 <span class="comment">             *                       or KBDUS.DLL  for other Far East</span>
04216 <span class="comment">             */</span>
04217             <span class="keywordflow">if</span> (PRIMARYLANGID(wLanguageId) == LANG_JAPANESE) {
04218                 pwszLib = <a class="code" href="../../d3/d8/client_8c.html#a14">pwszKLLibSafetyJPN</a>;
04219                 *pKbdInputLocale = <a class="code" href="../../d3/d8/client_8c.html#a15">wKbdLocaleSafetyJPN</a>;
04220             }
04221             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PRIMARYLANGID(wLanguageId) == LANG_KOREAN) {
04222                 pwszLib = <a class="code" href="../../d3/d8/client_8c.html#a16">pwszKLLibSafetyKOR</a>;
04223                 *pKbdInputLocale = <a class="code" href="../../d3/d8/client_8c.html#a17">wKbdLocaleSafetyKOR</a>;
04224             }
04225             <span class="keywordflow">else</span> {
04226                 pwszLib = <a class="code" href="../../d3/d8/client_8c.html#a12">pwszKLLibSafety</a>;
04227                 *pKbdInputLocale = MAKELONG(LOWORD(wLanguageId), LOWORD(wLanguageId));
04228             }
04229         }
04230         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*puFlags &amp; KLF_INITTIME) {
04231             pwszLib = <a class="code" href="../../d3/d8/client_8c.html#a12">pwszKLLibSafety</a>;
04232             *pKbdInputLocale = <a class="code" href="../../d3/d8/client_8c.html#a13">wKbdLocaleSafety</a>;
04233         } <span class="keywordflow">else</span> {
04234             RIPMSG1(RIP_WARNING, <span class="stringliteral">"no DLL name for %ws"</span>, lpszKLName);
04235             <span class="comment">/*</span>
04236 <span class="comment">             * We're going to use the fallback layout...</span>
04237 <span class="comment">             * This could happen when IMM32 is trying to unload the IME,</span>
04238 <span class="comment">             * by making any non IME keyboard layout tentatively active.</span>
04239 <span class="comment">             */</span>
04240             pwszLib = <a class="code" href="../../d3/d8/client_8c.html#a12">pwszKLLibSafety</a>;
04241             *pKbdInputLocale = <a class="code" href="../../d3/d8/client_8c.html#a13">wKbdLocaleSafety</a>;
04242 <span class="comment">//            return NULL;</span>
04243         }
04244     }
04245 
04246 RetryLoad:
04247     hLibModule = LoadLibraryW(pwszLib);
04248 
04249     <span class="keywordflow">if</span> (hLibModule == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04250         RIPMSG1(RIP_WARNING, <span class="stringliteral">"Keyboard Layout: cannot load %ws\n"</span>, pwszLib);
04251         <span class="comment">/*</span>
04252 <span class="comment">         * It is OK to fail to load DLL here:</span>
04253 <span class="comment">         * if this ever happens, the fallback keyboard layout built in</span>
04254 <span class="comment">         * win32k.sys shall be used.</span>
04255 <span class="comment">         */</span>
04256         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04257     }
04258 
04259     <span class="comment">/*</span>
04260 <span class="comment">     * if the layout driver is not "REAL" layout driver, the driver has</span>
04261 <span class="comment">     * "3" or "5" entry point, then we call this to get real layout driver..</span>
04262 <span class="comment">     * This is neccesary for Japanese and Korean systems. because their</span>
04263 <span class="comment">     * keyboard layout driver is "KBDJPN.DLL" or "KBDKOR.DLL", but its</span>
04264 <span class="comment">     * "REAL" driver becomes different depending their keyboard hardware.</span>
04265 <span class="comment">     */</span>
04266 
04267     <span class="comment">/*</span>
04268 <span class="comment">     * Get the entrypoints.</span>
04269 <span class="comment">     */</span>
04270     pfnDriver = (<a class="code" href="../../d0/d5/perfuser_8c.html#a20">BOOL</a>(*)(HKL, LPWSTR, PCLIENTKEYBOARDTYPE, <a class="code" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>))GetProcAddress(hLibModule, (LPCSTR)5);
04271     pfnDriverNT4 = (<a class="code" href="../../d0/d5/perfuser_8c.html#a20">BOOL</a>(*)(LPWSTR))GetProcAddress(hLibModule, (LPCSTR)3);
04272 
04273     <span class="keywordflow">if</span> (pfnDriver || pfnDriverNT4) {
04274         HKL hkl;
04275         CLIENTKEYBOARDTYPE clientKbdType;
04276         PCLIENTKEYBOARDTYPE pClientKbdType = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04277 
04278         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;UnicodeString, lpszKLName);
04279         <a class="code" href="../../d9/d3/cnvint_8c.html#a4">RtlUnicodeStringToInteger</a>(&amp;UnicodeString, 0x10, (PULONG)&amp;hkl);
04280         <span class="comment">/*</span>
04281 <span class="comment">         * When we reach here, the layout DLL may have KBDNLSTABLE</span>
04282 <span class="comment">         * even if we fail from now on. Our temporary layout</span>
04283 <span class="comment">         * dll should have the fallback tables for just in case.</span>
04284 <span class="comment">         */</span>
04285         bMightBeKbdNlsDriver = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
04286 
04287         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0/usercli_8h.html#a30">ISREMOTESESSION</a>() &amp;&amp; <a class="code" href="../../d3/d8/client_8c.html#a103">GetClientKeyboardType</a>(&amp;clientKbdType)) {
04288             pClientKbdType = &amp;clientKbdType;
04289         }
04290 
04291         <span class="comment">/*</span>
04292 <span class="comment">         * Call the entry.</span>
04293 <span class="comment">         * a. NT5 / Hydra (oridinal=5)</span>
04294 <span class="comment">         * b. NT4 compatible (3)</span>
04295 <span class="comment">         */</span>
04296         <span class="keywordflow">if</span> ((pfnDriver &amp;&amp; pfnDriver(hkl, awchRealLayoutFile, pClientKbdType, NULL)) ||
04297                 (pfnDriverNT4 &amp;&amp; pfnDriverNT4(awchRealLayoutFile))) {
04298 
04299             HANDLE hLibModuleNew;
04300             <span class="comment">/*</span>
04301 <span class="comment">             * Try to load "REAL" keyboard layout file.</span>
04302 <span class="comment">             */</span>
04303             RIPMSG1(RIP_VERBOSE, <span class="stringliteral">"awchRealLayoutFile='%S'\n"</span>, awchRealLayoutFile);
04304             <span class="keywordflow">if</span> (hLibModuleNew = LoadLibraryW(awchRealLayoutFile)) {
04305                 <span class="comment">/*</span>
04306 <span class="comment">                 * Set "REAL" layout file name.</span>
04307 <span class="comment">                 */</span>
04308                 pwszLib = awchRealLayoutFile;
04309                 <span class="comment">/*</span>
04310 <span class="comment">                 * Unload temporary layout driver.</span>
04311 <span class="comment">                 */</span>
04312                 FreeLibrary(hLibModule);
04313                 <span class="comment">/*</span>
04314 <span class="comment">                 * Updates it.</span>
04315 <span class="comment">                 */</span>
04316                 hLibModule = hLibModuleNew;
04317             }
04318         }
04319     }
04320 
04321     <span class="comment">/*</span>
04322 <span class="comment">     * HACK Part 1!  Get the pointer to the layout table and</span>
04323 <span class="comment">     * change it to a virtual offset.  The server will then</span>
04324 <span class="comment">     * use this offset when poking through the file header to</span>
04325 <span class="comment">     * locate the table within the file.</span>
04326 <span class="comment">     */</span>
04327     pfn = (PKBDTABLES(*)())GetProcAddress(hLibModule, (LPCSTR)1);
04328     <span class="keywordflow">if</span> (pfn == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04329         RIPMSG0(RIP_ERROR, <span class="stringliteral">"Keyboard Layout: cannot get proc addr"</span>);
04330         <span class="keywordflow">if</span> ((*puFlags &amp; KLF_INITTIME) &amp;&amp; (pwszLib != <a class="code" href="../../d3/d8/client_8c.html#a12">pwszKLLibSafety</a>)) {
04331             pwszLib = <a class="code" href="../../d3/d8/client_8c.html#a12">pwszKLLibSafety</a>;
04332             <span class="keywordflow">goto</span> RetryLoad;
04333         }
04334         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04335     }
04336     *poffTable = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pfn() - (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)hLibModule);
04337 
04338     <span class="keywordflow">if</span> (bMightBeKbdNlsDriver) {
04339         pfnNls = (PKBDNLSTABLES(*)())GetProcAddress(hLibModule, (LPCSTR)2);
04340         <span class="keywordflow">if</span> (pfnNls != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04341             <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> offNlsTable;
04342 
04343             offNlsTable = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)((<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)pfnNls() - (<a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>)hLibModule);
04344 
04345 <span class="preprocessor">#if DBG_FE</span>
04346 <span class="preprocessor"></span>            <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"USER32:Offset to KBDTABLES    = %d (%x)\n"</span>,*poffTable,*poffTable);
04347             <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"USER32:Offset to KBDNLSTABLES = %d (%x)\n"</span>,offNlsTable,offNlsTable);
04348 <span class="preprocessor">#endif // DBG_FE</span>
04349 <span class="preprocessor"></span>
04350             <span class="comment">/*</span>
04351 <span class="comment">             * Combine these offsets...</span>
04352 <span class="comment">             *</span>
04353 <span class="comment">             *  LOWORD(*poffTable) = Offset to KBDTABLES.</span>
04354 <span class="comment">             *  HIWORD(*poffTable) = Offset to KBDNLSTABLES.</span>
04355 <span class="comment">             */</span>
04356             *poffTable |= (offNlsTable &lt;&lt; 16);
04357         }
04358     }
04359 
04360     <span class="comment">/*</span>
04361 <span class="comment">     * Open the dll for read access.</span>
04362 <span class="comment">     */</span>
04363     GetModuleFileName(hLibModule, awchModName, <span class="keyword">sizeof</span>(awchModName));
04364     FreeLibrary(hLibModule);
04365     <span class="keywordflow">return</span> CreateFileW(
04366             awchModName,
04367             GENERIC_READ,
04368             FILE_SHARE_READ,
04369             NULL,
04370             OPEN_EXISTING,
04371             0,
04372             NULL);
04373 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a73" doxytag="client.c::OpenWindowStationA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWINSTA OpenWindowStationA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pwinsta</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fInherit</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02382">2382</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l02336">CommonOpenWindowStation()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00544">RtlCreateUnicodeStringFromAsciiz()</a>, and <a class="el" href="../../d7/d5/nls_8c-source.html#l01215">RtlFreeUnicodeString()</a>.
<p>
<pre class="fragment"><div>02386 {
02387     UNICODE_STRING UnicodeString;
02388     HWINSTA hwinsta;
02389 
02390     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d7/string_8c.html#a13">RtlCreateUnicodeStringFromAsciiz</a>(&amp;UnicodeString, pwinsta))
02391         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02392 
02393     hwinsta = <a class="code" href="../../d3/d8/client_8c.html#a72">CommonOpenWindowStation</a>(&amp;UnicodeString, fInherit, amRequest);
02394 
02395     <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>(&amp;UnicodeString);
02396 
02397     <span class="keywordflow">return</span> hwinsta;
02398 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a74" doxytag="client.c::OpenWindowStationW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWINSTA OpenWindowStationW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pwinsta</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fInherit</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>amRequest</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02400">2400</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l02336">CommonOpenWindowStation()</a>, and <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>.
<p>
<pre class="fragment"><div>02404 {
02405     UNICODE_STRING strWinSta;
02406 
02407     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;strWinSta, pwinsta);
02408 
02409     <span class="keywordflow">return</span> <a class="code" href="../../d3/d8/client_8c.html#a72">CommonOpenWindowStation</a>(&amp;strWinSta, fInherit, amRequest);
02410 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a122" doxytag="client.c::PostQuitMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID PostQuitMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>nExitCode</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03387">3387</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00282">MainWndProc()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>03389 {
03390     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(nExitCode, SFI__POSTQUITMESSAGE);
03391 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a81" doxytag="client.c::RegisterClassWOWA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ATOM WINAPI RegisterClassWOWA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">WNDCLASSA *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpWndClass</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>pdwWOWstuff</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02615">2615</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d6/d0/usercli_8h.html#a635">RegisterClassExWOWA()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.
<p>
<pre class="fragment"><div>02618 {
02619     WNDCLASSEXA wc;
02620 
02621     <span class="comment">/*</span>
02622 <span class="comment">     * On 64-bit plaforms we'll have 32 bits of padding between style and</span>
02623 <span class="comment">     * lpfnWndProc in WNDCLASS, so start the copy from the first 64-bit</span>
02624 <span class="comment">     * aligned field and hand copy the rest.</span>
02625 <span class="comment">     */</span>
02626     RtlCopyMemory(&amp;(wc.lpfnWndProc), &amp;(lpWndClass-&gt;lpfnWndProc), <span class="keyword">sizeof</span>(WNDCLASSA) - FIELD_OFFSET(WNDCLASSA, lpfnWndProc));
02627     wc.style = lpWndClass-&gt;style;
02628     wc.hIconSm = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02629     wc.cbSize = <span class="keyword">sizeof</span>(WNDCLASSEXA);
02630 
02631     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a635">RegisterClassExWOWA</a>(&amp;wc, pdwWOWstuff, 0);
02632 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a141" doxytag="client.c::RegisterShellHookWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL RegisterShellHookWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03628">3628</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04543">NtUserCallHwnd()</a>.
<p>
<pre class="fragment"><div>03630 {
03631     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a175">NtUserCallHwnd</a>(hwnd, SFI__REGISTERSHELLHOOKWINDOW);
03632 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a126" doxytag="client.c::RegisterSystemThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID RegisterSystemThread           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwReserved</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03437">3437</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04648">NtUserCallTwoParam()</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
<pre class="fragment"><div>03439 {
03440     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a180">NtUserCallTwoParam</a>(dwFlags, dwReserved, SFI_ZZZREGISTERSYSTEMTHREAD);
03441 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a123" doxytag="client.c::RegisterUserHungAppHandlers" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL RegisterUserHungAppHandlers           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PFNW32ET&nbsp;</td>
          <td class="mdname" nowrap> <em>pfnW32EndTask</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hEventWowExec</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03399">3399</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04648">NtUserCallTwoParam()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.
<p>
<pre class="fragment"><div>03402 {
03403     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a180">NtUserCallTwoParam</a>((ULONG_PTR)pfnW32EndTask,
03404                                     (ULONG_PTR)hEventWowExec,
03405                                     SFI_XXXREGISTERUSERHUNGAPPHANDLERS);
03406 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a124" doxytag="client.c::ReleaseCapture" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ReleaseCapture           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03414">3414</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04510">NtUserCallNoParam()</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/ntcon_2server_2clipbrd_8c-source.html#l00308">CancelMouseSelection()</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l04700">ConsoleWindowProc()</a>, <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l03080">HandleMouseEvent()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00914">SKC1ButtonUp()</a>, and <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l01099">SKT1ButtonUp()</a>.
<p>
<pre class="fragment"><div>03415 {
03416     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a173">NtUserCallNoParam</a>(SFI_XXXRELEASECAPTURE);
03417 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="client.c::ReleaseDC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ReleaseDC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hdc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01052">1052</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00810">AnimateWindow()</a>, <a class="el" href="../../d6/d7/resizedlg_8cpp-source.html#l00723">CResizeDlg::Annotate()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00288">BNReleaseDC()</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l01228">ChooseNewFont()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00061">ChopText()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01284">ClearDlg()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00023">Create()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00342">CreateC1Window()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00254">DecompileBitmap()</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l04454">DestroyWindowsWindow()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00109">ECCalcMarginForDBCSFont()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02524">ECReleaseEditDC()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00708">ECSetFont()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01312">EndTaskDlgProc()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00050">GetSKT1TextMetric()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00347">InitSKT1Bitmap()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00508">InternalImeMenuCreateBitmap()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l01186">SetSKT1Data()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00716">SKC1ButtonDown()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00914">SKC1ButtonUp()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00844">SKC1MouseMove()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00680">SKT1InvertButton()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l01042">SKWndProcC1()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l01210">SmoothScrollWindowEx()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00489">UpdateSKC1Window()</a>, and <a class="el" href="../../d0/d1/usrbench_8c-source.html#l00268">WndProc()</a>.
<p>
<pre class="fragment"><div>01055 {
01056 
01057     <span class="comment">/*</span>
01058 <span class="comment">     * NOTE: This is a smart stub that calls _ReleaseDC so there is</span>
01059 <span class="comment">     * no need for a separate ReleaseDC layer or client-server stub.</span>
01060 <span class="comment">     * _ReleaseDC has simpler layer and client-server stubs since the</span>
01061 <span class="comment">     * hwnd can be ignored.</span>
01062 <span class="comment">     */</span>
01063 
01064     UNREFERENCED_PARAMETER(hwnd);
01065 
01066     <span class="comment">/*</span>
01067 <span class="comment">     * Translate the handle.</span>
01068 <span class="comment">     */</span>
01069     <span class="keywordflow">if</span> (hdc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01070         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01071 
01072     <span class="comment">/*</span>
01073 <span class="comment">     *  call GDI to release user mode DC resources</span>
01074 <span class="comment">     */</span>
01075 
01076     GdiReleaseDC(hdc);
01077 
01078     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>((ULONG_PTR)hdc, SFI__RELEASEDC);
01079 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a85" doxytag="client.c::ReleaseEditDS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ReleaseEditDS           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>h</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02783">2783</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00133">pfn16GlobalFree</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>.
<p>
<pre class="fragment"><div>02785 {
02786     UserAssert(pfn16GlobalFree != NULL);
02787 
02788     (*pfn16GlobalFree)(LOWORD(HandleToUlong(h)));
02789 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a125" doxytag="client.c::ReplyMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ReplyMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LRESULT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pp1</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03425">3425</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
Referenced by <a class="el" href="../../d7/d1/output_8c-source.html#l04454">DestroyWindowsWindow()</a>, <a class="el" href="../../d7/d6/lpcsend_8c-source.html#l01407">LpcRequestWaitReplyPort()</a>, <a class="el" href="../../d6/d6/lpcreply_8c-source.html#l00044">NtReplyPort()</a>, <a class="el" href="../../d5/d6/lpcrecv_8c-source.html#l00029">NtReplyWaitReceivePort()</a>, <a class="el" href="../../d5/d6/lpcrecv_8c-source.html#l00635">NtReplyWaitReceivePortEx()</a>, <a class="el" href="../../d6/d6/lpcreply_8c-source.html#l00375">NtReplyWaitReplyPort()</a>, <a class="el" href="../../d7/d6/lpcsend_8c-source.html#l00395">NtRequestWaitReplyPort()</a>, <a class="el" href="../../d1/d9/rmmain_8c-source.html#l00907">SepRmCallLsa()</a>, <a class="el" href="../../d1/d9/rmmain_8c-source.html#l00309">SepRmCommandServerThread()</a>, <a class="el" href="../../d1/d9/rmmain_8c-source.html#l00758">SepRmComponentTestCommandWrkr()</a>, <a class="el" href="../../d0/d9/rmlogon_8c-source.html#l00122">SepRmCreateLogonSessionWrkr()</a>, <a class="el" href="../../d0/d9/rmlogon_8c-source.html#l00200">SepRmDeleteLogonSessionWrkr()</a>, <a class="el" href="../../d1/d9/rmmain_8c-source.html#l00824">SepRmSendCommandToLsaWrkr()</a>, <a class="el" href="../../d8/d8/rmaudit_8c-source.html#l00051">SepRmSetAuditEventWrkr()</a>, and <a class="el" href="../../d8/d8/rmaudit_8c-source.html#l00164">SepRmSetAuditLogWrkr()</a>.
<p>
<pre class="fragment"><div>03427 {
03428     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(pp1, SFI__REPLYMESSAGE);
03429 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="client.c::ScrollDC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ScrollDC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname" nowrap> <em>hDC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dy</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lprcScroll</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lprcClip</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HRGN&nbsp;</td>
          <td class="mdname" nowrap> <em>hrgnUpdate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprcUpdate</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01176">1176</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06824">NtUserScrollDC()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00245">SetRectEmpty</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d7/d1/output_8c-source.html#l02737">ScrollScreen()</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l03626">SetWindowOrigin()</a>, and <a class="el" href="../../d7/d1/output_8c-source.html#l02998">StreamScrollRegion()</a>.
<p>
<pre class="fragment"><div>01184 {
01185     <span class="keywordflow">if</span> (hDC == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01186         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01187 
01188     <span class="comment">/*</span>
01189 <span class="comment">     * If we're not scrolling, just empty the update region and return.</span>
01190 <span class="comment">     */</span>
01191     <span class="keywordflow">if</span> (dx == 0 &amp;&amp; dy == 0) {
01192         <span class="keywordflow">if</span> (hrgnUpdate)
01193             SetRectRgn(hrgnUpdate, 0, 0, 0, 0);
01194         <span class="keywordflow">if</span> (lprcUpdate)
01195             <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a35">SetRectEmpty</a>(lprcUpdate);
01196         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01197     }
01198 
01199     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a257">NtUserScrollDC</a>(hDC, dx, dy, lprcScroll, lprcClip,
01200             hrgnUpdate, lprcUpdate);
01201 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a54" doxytag="client.c::ScrollWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ScrollWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dy</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>prcScroll</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>prcClip</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01394">1394</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00410">IS_PTR</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05740">NtUserScrollWindowEx()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01391">SW_FLAG_NRC</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l01390">SW_FLAG_RC</a>.
<p>
<pre class="fragment"><div>01400 {
01401     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a219">NtUserScrollWindowEx</a>(
01402             hwnd,
01403             dx,
01404             dy,
01405             prcScroll,
01406             prcClip,
01407             NULL,
01408             NULL,
01409             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a98">IS_PTR</a>(prcScroll) ? SW_FLAG_RC : SW_FLAG_NRC) != ERROR;
01410 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a127" doxytag="client.c::SetCaretBlinkTime" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetCaretBlinkTime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>wMSeconds</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03449">3449</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
<pre class="fragment"><div>03451 {
03452     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(wMSeconds, SFI__SETCARETBLINKTIME);
03453 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a128" doxytag="client.c::SetCaretPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetCaretPos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>X</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Y</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03461">3461</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04648">NtUserCallTwoParam()</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>03464 {
03465     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a180">NtUserCallTwoParam</a>(X, Y, SFI_ZZZSETCARETPOS);
03466 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="client.c::SetClipboardData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE WINAPI SetClipboardData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wFmt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hMem</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00876">876</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00189">ConvertMemHandle()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00285">DeleteClientClipboardHandle()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00273">_HANDLENODE::fGlobalHandle</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01402">tagSETCLIPBDATA::fGlobalHandle</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01403">tagSETCLIPBDATA::fIncSerialNumber</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00270">_HANDLENODE::fmt</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00091">gcsClipboard</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00277">gphn</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00272">_HANDLENODE::handleClient</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00271">_HANDLENODE::handleServer</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03274">NtUserSetClipboardData()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00138">pfnWowCBStoreHandle</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00275">PHANDLENODE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00269">_HANDLENODE::pnext</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02703">ECCopy()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01176">MB_CopyToClipboard()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00307">msProfClipboardGroup()</a>, and <a class="el" href="../../d8/d7/ntcon_2server_2clipbrd_8c-source.html#l00452">StoreSelection()</a>.
<p>
<pre class="fragment"><div>00879 {
00880     <a class="code" href="../../d3/d4/struct__HANDLENODE.html">PHANDLENODE</a>  phnNew;
00881     HANDLE       hServer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00882     <a class="code" href="../../d3/d6/structtagSETCLIPBDATA.html">SETCLIPBDATA</a> scd;
00883     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>         fGlobalHandle = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00884 
00885     <span class="keywordflow">if</span> (hMem != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00886 
00887         <span class="keywordflow">switch</span>(wFmt) {
00888 
00889             <span class="keywordflow">case</span> CF_BITMAP:
00890             <span class="keywordflow">case</span> CF_DSPBITMAP:
00891             <span class="keywordflow">case</span> CF_PALETTE:
00892                 hServer = hMem;
00893                 <span class="keywordflow">break</span>;
00894 
00895             <span class="keywordflow">case</span> CF_METAFILEPICT:
00896             <span class="keywordflow">case</span> CF_DSPMETAFILEPICT:
00897                 hServer = GdiConvertMetaFilePict(hMem);
00898                 <span class="keywordflow">break</span>;
00899 
00900             <span class="keywordflow">case</span> CF_ENHMETAFILE:
00901             <span class="keywordflow">case</span> CF_DSPENHMETAFILE:
00902                 hServer = GdiConvertEnhMetaFile(hMem);
00903                 <span class="keywordflow">break</span>;
00904 
00905             <span class="comment">/*</span>
00906 <span class="comment">             * Must have a valid hMem (GlobalHandle)</span>
00907 <span class="comment">             */</span>
00908             <span class="keywordflow">case</span> CF_TEXT:
00909             <span class="keywordflow">case</span> CF_OEMTEXT:
00910             <span class="keywordflow">case</span> CF_LOCALE:
00911             <span class="keywordflow">case</span> CF_DSPTEXT:
00912                 hServer = <a class="code" href="../../d6/d0/usercli_8h.html#a629">ConvertMemHandle</a>(hMem, 1);
00913                 fGlobalHandle = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00914                 <span class="keywordflow">break</span>;
00915 
00916             <span class="keywordflow">case</span> CF_UNICODETEXT:
00917                 hServer = <a class="code" href="../../d6/d0/usercli_8h.html#a629">ConvertMemHandle</a>(hMem, 2);
00918                 fGlobalHandle = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00919                 <span class="keywordflow">break</span>;
00920 
00921             <span class="keywordflow">case</span> CF_DIB:
00922             <span class="keywordflow">case</span> CF_DIBV5:
00923                 hServer = <a class="code" href="../../d6/d0/usercli_8h.html#a629">ConvertMemHandle</a>(hMem, 0);
00924                 fGlobalHandle = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00925                 <span class="keywordflow">break</span>;
00926 
00927             <span class="comment">/*</span>
00928 <span class="comment">             * hMem should have been NULL but Write sends non-null when told</span>
00929 <span class="comment">             * to render</span>
00930 <span class="comment">             */</span>
00931             <span class="keywordflow">case</span> CF_OWNERDISPLAY:
00932                 <span class="comment">// Fall Through;</span>
00933 
00934             <span class="comment">/*</span>
00935 <span class="comment">             * May have an hMem (GlobalHandle) or may be private handle\info</span>
00936 <span class="comment">             */</span>
00937             <span class="keywordflow">default</span>:
00938                 <span class="keywordflow">if</span> (GlobalFlags(hMem) == GMEM_INVALID_HANDLE) {
00939                     hServer = hMem;    <span class="comment">// No server equivalent; private data</span>
00940                     <span class="keywordflow">goto</span> SCD_AFTERNULLCHECK;
00941                 } <span class="keywordflow">else</span> {
00942                     fGlobalHandle = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00943                     hServer = <a class="code" href="../../d6/d0/usercli_8h.html#a629">ConvertMemHandle</a>(hMem, 0);
00944                 }
00945                 <span class="keywordflow">break</span>;
00946         }
00947 
00948         <span class="keywordflow">if</span> (hServer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00949             <span class="comment">/*</span>
00950 <span class="comment">             * Something bad happened, gdi didn't give us back a</span>
00951 <span class="comment">             * handle. Since gdi has logged the error, we'll just</span>
00952 <span class="comment">             * clean up and return an error.</span>
00953 <span class="comment">             */</span>
00954             RIPMSG0(RIP_WARNING, <span class="stringliteral">"SetClipboardData: bad handle\n"</span>);
00955             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00956         }
00957     }
00958 
00959 SCD_AFTERNULLCHECK:
00960 
00961     RtlEnterCriticalSection(&amp;gcsClipboard);
00962 
00963     <span class="comment">/*</span>
00964 <span class="comment">     * Update the server if that is successfull update the client</span>
00965 <span class="comment">     */</span>
00966     scd.<a class="code" href="../../d3/d6/structtagSETCLIPBDATA.html#o0">fGlobalHandle</a>    = fGlobalHandle;
00967     scd.<a class="code" href="../../d3/d6/structtagSETCLIPBDATA.html#o1">fIncSerialNumber</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00968 
00969     <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a131">NtUserSetClipboardData</a>(wFmt, hServer, &amp;scd)) {
00970         RtlLeaveCriticalSection(&amp;gcsClipboard);
00971         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00972     }
00973 
00974     <span class="comment">/*</span>
00975 <span class="comment">     * See if we already have a client handle of this type.  If so</span>
00976 <span class="comment">     * delete it.</span>
00977 <span class="comment">     */</span>
00978     phnNew = <a class="code" href="../../d3/d8/client_8c.html#a22">gphn</a>;
00979     <span class="keywordflow">while</span> (phnNew) {
00980         <span class="keywordflow">if</span> (phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o1">fmt</a> == wFmt) {
00981             <span class="keywordflow">if</span> (phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00982                 <a class="code" href="../../d3/d8/client_8c.html#a40">DeleteClientClipboardHandle</a>(phnNew);
00983                 <span class="comment">/*</span>
00984 <span class="comment">                 * Notify WOW to clear its associated cached h16 for this format</span>
00985 <span class="comment">                 * so that OLE32 thunked calls, which bypass the WOW cache will work.</span>
00986 <span class="comment">                 */</span>
00987                 <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8/clglobal_8c.html#a56">pfnWowCBStoreHandle</a>) {
00988                     <a class="code" href="../../d8/d6/ntuser_2client_2globals_8h.html#a66">pfnWowCBStoreHandle</a>((WORD)wFmt, 0);
00989                 }
00990             }
00991             <span class="keywordflow">break</span>;
00992         }
00993 
00994         phnNew = phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o0">pnext</a>;
00995     }
00996 
00997     <span class="comment">/*</span>
00998 <span class="comment">     * If we aren't re-using an old client cache entry alloc a new one</span>
00999 <span class="comment">     */</span>
01000     <span class="keywordflow">if</span> (!phnNew) {
01001         phnNew = (<a class="code" href="../../d3/d4/struct__HANDLENODE.html">PHANDLENODE</a>)LocalAlloc(LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d3/d4/struct__HANDLENODE.html">HANDLENODE</a>));
01002 
01003         <span class="keywordflow">if</span> (phnNew == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01004             RIPMSG0(RIP_WARNING, <span class="stringliteral">"SetClipboardData: not enough memory\n"</span>);
01005 
01006             RtlLeaveCriticalSection(&amp;gcsClipboard);
01007             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01008         }
01009 
01010         <span class="comment">/*</span>
01011 <span class="comment">         * Link in the newly allocated cache entry</span>
01012 <span class="comment">         */</span>
01013         phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o0">pnext</a> = <a class="code" href="../../d3/d8/client_8c.html#a22">gphn</a>;
01014         <a class="code" href="../../d3/d8/client_8c.html#a22">gphn</a> = phnNew;
01015     }
01016 
01017     phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o2">handleServer</a>  = hServer;
01018     phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o3">handleClient</a>  = hMem;
01019     phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o1">fmt</a>           = wFmt;
01020     phnNew-&gt;<a class="code" href="../../d3/d4/struct__HANDLENODE.html#o4">fGlobalHandle</a> = fGlobalHandle;
01021 
01022     RtlLeaveCriticalSection(&amp;gcsClipboard);
01023 
01024     <span class="keywordflow">return</span> hMem;
01025 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a129" doxytag="client.c::SetCursorPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetCursorPos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>X</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Y</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03474">3474</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04648">NtUserCallTwoParam()</a>.
<p>
<pre class="fragment"><div>03477 {
03478     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a180">NtUserCallTwoParam</a>(X, Y, SFI_ZZZSETCURSORPOS);
03479 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a155" doxytag="client.c::SetDebugErrorLevel" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID SetDebugErrorLevel           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dwLevel</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l04509">4509</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
<pre class="fragment"><div>04510 {
04511     UNREFERENCED_PARAMETER(dwLevel);
04512 <span class="comment">//    NtUserCallNoParam(SFI__SETDEBUGERRORLEVEL);</span>
04513     <span class="keywordflow">return</span>;
04514 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="client.c::SetDeskWallpaper" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetDeskWallpaper           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN LPCSTR pString&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>OPTIONAL</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01034">1034</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>01036 {
01037     <span class="keywordflow">return</span> SystemParametersInfoA(SPI_SETDESKWALLPAPER, 0, (PVOID)pString, TRUE);
01038 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a130" doxytag="client.c::SetDoubleClickTime" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetDoubleClickTime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cms</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03487">3487</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
<pre class="fragment"><div>03489 {
03490     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(cms, SFI__SETDOUBLECLICKTIME);
03491 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a131" doxytag="client.c::SetForegroundWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetForegroundWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03499">3499</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l01573">NtUserSetForegroundWindow</a>.
<p>
Referenced by <a class="el" href="../../d8/d7/w32_2ntuser_2server_2harderr_8c-source.html#l01906">BoostHardError()</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l04700">ConsoleWindowProc()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l01151">SetEndTaskDlgStatus()</a>, <a class="el" href="../../d3/d9/server_2exitwin_8c-source.html#l00757">ThreadShutdownNotify()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>03501 {
03502     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a228">NtUserSetForegroundWindow</a>(hwnd);
03503 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a115" doxytag="client.c::SetProgmanWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetProgmanWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03313">3313</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04584">NtUserCallHwndOpt()</a>.
<p>
<pre class="fragment"><div>03315 {
03316     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a177">NtUserCallHwndOpt</a>(hwnd, SFI__SETPROGMANWINDOW);
03317 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a113" doxytag="client.c::SetShellWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetShellWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03294">3294</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l02307">NtUserSetShellWindowEx()</a>.
<p>
<pre class="fragment"><div>03294                                 {
03295     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a116">NtUserSetShellWindowEx</a>(hwnd, hwnd);
03296 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a117" doxytag="client.c::SetTaskmanWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetTaskmanWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03334">3334</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04584">NtUserCallHwndOpt()</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>.
<p>
<pre class="fragment"><div>03336 {
03337     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a177">NtUserCallHwndOpt</a>(hwnd, SFI__SETTASKMANWINDOW);
03338 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a63" doxytag="client.c::SetUserObjectSecurity" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetUserObjectSecurity           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSECURITY_INFORMATION&nbsp;</td>
          <td class="mdname" nowrap> <em>pRequestedInformation</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PSECURITY_DESCRIPTOR&nbsp;</td>
          <td class="mdname" nowrap> <em>pSecurityDescriptor</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01868">1868</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d1/obse_8c-source.html#l00046">NtSetSecurityObject()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>01872 {
01873     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
01874 
01875     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d9/d1/obse_8c.html#a0">NtSetSecurityObject</a>(hObject,
01876                                  *pRequestedInformation,
01877                                  pSecurityDescriptor);
01878     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
01879         RIPNTERR0(Status, RIP_VERBOSE, <span class="stringliteral">""</span>);
01880         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01881     }
01882     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01883 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a118" doxytag="client.c::SetWindowContextHelpId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetWindowContextHelpId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03346">3346</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04602">NtUserCallHwndParam()</a>.
<p>
<pre class="fragment"><div>03349 {
03350     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a178">NtUserCallHwndParam</a>(hwnd, <span class="keywordtype">id</span>, SFI__SETWINDOWCONTEXTHELPID);
03351 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a120" doxytag="client.c::SetWindowState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void SetWindowState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03365">3365</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
<pre class="fragment"><div>03368 {
03369     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, flags) != <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(flags))
03370         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a178">NtUserCallHwndParam</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a451">HWq</a>(pwnd), flags, SFI_SETWINDOWSTATE);
03371 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a134" doxytag="client.c::ShowCursor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ShowCursor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">BOOL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>bShow</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03531">3531</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
Referenced by <a class="el" href="../../d0/d1/usrbench_8c-source.html#l00268">WndProc()</a>.
<p>
<pre class="fragment"><div>03533 {
03534     <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(bShow, SFI_ZZZSHOWCURSOR);
03535 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a135" doxytag="client.c::ShowOwnedPopups" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ShowOwnedPopups           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fShow</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03543">3543</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04626">NtUserCallHwndParamLock()</a>.
<p>
<pre class="fragment"><div>03546 {
03547     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a179">NtUserCallHwndParamLock</a>(hwnd, fShow,
03548                                          SFI_XXXSHOWOWNEDPOPUPS);
03549 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a136" doxytag="client.c::ShowStartGlass" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ShowStartGlass           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dwTimeout</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03557">3557</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
<pre class="fragment"><div>03559 {
03560     <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(dwTimeout, SFI_ZZZSHOWSTARTGLASS);
03561 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a137" doxytag="client.c::SwapMouseButton" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SwapMouseButton           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">BOOL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fSwap</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03569">3569</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
<pre class="fragment"><div>03571 {
03572     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>(fSwap, SFI__SWAPMOUSEBUTTON);
03573 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a55" doxytag="client.c::SwitchToThisWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void WINAPI SwitchToThisWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAltTab</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01418">1418</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04626">NtUserCallHwndParamLock()</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
<pre class="fragment"><div>01421 {
01422     (<a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a179">NtUserCallHwndParamLock</a>(hwnd, fAltTab, SFI_XXXSWITCHTOTHISWINDOW);
01423 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a86" doxytag="client.c::TellWOWThehDlg" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID TellWOWThehDlg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hDlg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02801">2801</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00140">pfnWOWTellWOWThehDlg</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>.
<p>
<pre class="fragment"><div>02803 {
02804     UserAssert(pfnWOWTellWOWThehDlg != NULL);
02805 
02806     (*pfnWOWTellWOWThehDlg)(hDlg);
02807 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a138" doxytag="client.c::TileChildWindows" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL TileChildWindows           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03581">3581</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01217">TileWindows()</a>.
<p>
<pre class="fragment"><div>03584 {
03585     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d6/d5/mdiwin_8c.html#a23">TileWindows</a>(hwndParent, flags, NULL, 0, NULL);
03586 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="client.c::ToAscii" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int WINAPI ToAscii           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wVirtKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wScanCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpKeyState</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpChar</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01082">1082</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00905">RtlUnicodeToMultiByteN()</a>, and <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00946">ToUnicode()</a>.
<p>
<pre class="fragment"><div>01089 {
01090     WCHAR UnicodeChar[2];
01091     <span class="keywordtype">int</span> cch, retval;
01092 
01093     retval = <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a24">ToUnicode</a>(wVirtKey, wScanCode, lpKeyState, UnicodeChar,2, wFlags);
01094     cch = (retval &lt; 0) ? -retval : retval;
01095     <span class="keywordflow">if</span> (cch != 0) {
01096         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(<a class="code" href="../../d9/d6/nlsxlat_8c.html#a37">RtlUnicodeToMultiByteN</a>(
01097                 (LPSTR)lpChar,
01098                 (ULONG) <span class="keyword">sizeof</span>(*lpChar),
01099                 (PULONG)&amp;cch,
01100                 UnicodeChar,
01101                 cch * <span class="keyword">sizeof</span>(WCHAR)))) {
01102             <span class="keywordflow">return</span> 0;
01103         }
01104     }
01105     <span class="keywordflow">return</span> (retval &lt; 0) ? -cch : cch;
01106 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="client.c::ToAsciiEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int WINAPI ToAsciiEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wVirtKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wScanCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpKeyState</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpChar</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01112">1112</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01109">hCachedHKL</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00973">ToUnicodeEx()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l01108">uCachedCP</a>.
<p>
Referenced by <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">ImmTranslateMessage()</a>.
<p>
<pre class="fragment"><div>01120 {
01121     WCHAR UnicodeChar[2];
01122     <span class="keywordtype">int</span> cch, retval;
01123     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fUsedDefaultChar;
01124 
01125     retval = <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a25">ToUnicodeEx</a>(wVirtKey, wScanCode, lpKeyState, UnicodeChar,2, wFlags, hkl);
01126     cch = (retval &lt; 0) ? -retval : retval;
01127     <span class="keywordflow">if</span> (cch != 0) {
01128         <span class="keywordflow">if</span> (hkl != <a class="code" href="../../d3/d8/client_8c.html#a24">hCachedHKL</a>) {
01129             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCodePage;
01130             <span class="keywordflow">if</span> (!GetLocaleInfoW(
01131                      HandleToUlong(hkl) &amp; 0xffff,
01132                      LOCALE_IDEFAULTANSICODEPAGE | LOCALE_RETURN_NUMBER,
01133                      (LPWSTR)&amp;dwCodePage,
01134                      <span class="keyword">sizeof</span>(dwCodePage) / <span class="keyword">sizeof</span>(WCHAR)
01135                      )) {
01136                 <span class="keywordflow">return</span> 0;
01137             }
01138             <a class="code" href="../../d3/d8/client_8c.html#a23">uCachedCP</a> = dwCodePage;
01139             <a class="code" href="../../d3/d8/client_8c.html#a24">hCachedHKL</a> = hkl;
01140         }
01141         <span class="keywordflow">if</span> (!WideCharToMultiByte(
01142                  uCachedCP,
01143                  0,
01144                  UnicodeChar,
01145                  cch,
01146                  (LPSTR)lpChar,
01147                  <span class="keyword">sizeof</span>(*lpChar),
01148                  NULL,
01149                  &amp;fUsedDefaultChar)) {
01150             <span class="keywordflow">return</span> 0;
01151         }
01152     }
01153     <span class="keywordflow">return</span> (retval &lt; 0) ? -cch : cch;
01154 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="client.c::TranslateAcceleratorA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int WINAPI TranslateAcceleratorA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HACCEL&nbsp;</td>
          <td class="mdname" nowrap> <em>hAccel</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPMSG&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMsg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00225">225</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01991">NtUserTranslateAccelerator()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d6/d5/chartran_8c-source.html#l00490">RtlMBMessageWParamCharToWCS()</a>.
<p>
<pre class="fragment"><div>00229 {
00230     WPARAM wParamT;
00231     <span class="keywordtype">int</span> iT;
00232 
00233     <span class="comment">/*</span>
00234 <span class="comment">     * NULL pwnd is a valid case - since this is called from the center</span>
00235 <span class="comment">     * of main loops, pwnd == NULL happens all the time, and we shouldn't</span>
00236 <span class="comment">     * generate a warning because of it.</span>
00237 <span class="comment">     */</span>
00238     <span class="keywordflow">if</span> (hwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00239         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00240 
00241     <span class="comment">/*</span>
00242 <span class="comment">     * We only need to pass key-down messages to the server,</span>
00243 <span class="comment">     * everything else ends up returning 0/FALSE from this function.</span>
00244 <span class="comment">     */</span>
00245     <span class="keywordflow">switch</span> (lpMsg-&gt;message) {
00246 
00247     <span class="keywordflow">case</span> WM_KEYDOWN:
00248     <span class="keywordflow">case</span> WM_SYSKEYDOWN:
00249     <span class="keywordflow">case</span> WM_CHAR:
00250     <span class="keywordflow">case</span> WM_SYSCHAR:
00251         wParamT = lpMsg-&gt;wParam;
00252         <a class="code" href="../../d5/d6/chartran_8c.html#a5">RtlMBMessageWParamCharToWCS</a>(lpMsg-&gt;message, &amp;(lpMsg-&gt;wParam));
00253         iT = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a112">NtUserTranslateAccelerator</a>(hwnd, hAccel, lpMsg);
00254         lpMsg-&gt;wParam = wParamT;
00255         <span class="keywordflow">return</span> iT;
00256 
00257     <span class="keywordflow">default</span>:
00258         <span class="keywordflow">return</span> 0;
00259     }
00260 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="client.c::TranslateAcceleratorW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int WINAPI TranslateAcceleratorW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HACCEL&nbsp;</td>
          <td class="mdname" nowrap> <em>hAccel</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPMSG&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMsg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00195">195</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01991">NtUserTranslateAccelerator()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>00199 {
00200     <span class="comment">/*</span>
00201 <span class="comment">     * NULL pwnd is a valid case - since this is called from the center</span>
00202 <span class="comment">     * of main loops, pwnd == NULL happens all the time, and we shouldn't</span>
00203 <span class="comment">     * generate a warning because of it.</span>
00204 <span class="comment">     */</span>
00205     <span class="keywordflow">if</span> (hwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00206         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00207 
00208     <span class="comment">/*</span>
00209 <span class="comment">     * We only need to pass key-down messages to the server,</span>
00210 <span class="comment">     * everything else ends up returning 0/FALSE from this function.</span>
00211 <span class="comment">     */</span>
00212     <span class="keywordflow">switch</span> (lpMsg-&gt;message) {
00213 
00214     <span class="keywordflow">case</span> WM_KEYDOWN:
00215     <span class="keywordflow">case</span> WM_SYSKEYDOWN:
00216     <span class="keywordflow">case</span> WM_CHAR:
00217     <span class="keywordflow">case</span> WM_SYSCHAR:
00218         <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a112">NtUserTranslateAccelerator</a>(hwnd, hAccel, lpMsg);
00219 
00220     <span class="keywordflow">default</span>:
00221         <span class="keywordflow">return</span> 0;
00222     }
00223 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a139" doxytag="client.c::UnhookWindowsHook" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL UnhookWindowsHook           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>nCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HOOKPROC&nbsp;</td>
          <td class="mdname" nowrap> <em>pfnFilterProc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03594">3594</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04648">NtUserCallTwoParam()</a>.
<p>
<pre class="fragment"><div>03597 {
03598     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a180">NtUserCallTwoParam</a>(nCode, (ULONG_PTR)pfnFilterProc,
03599                                     SFI_ZZZUNHOOKWINDOWSHOOK);
03600 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a153" doxytag="client.c::UnloadKeyboardLayout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL UnloadKeyboardLayout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HKL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hkl</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l04483">4483</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00129">CliImmInitializeHotKeys()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00076">ISHK_REMOVE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l08494">NtUserUnloadKeyboardLayout()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/layout_8c-source.html#l00266">ImmInstallIMEW()</a>.
<p>
<pre class="fragment"><div>04484 {
04485     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fRet = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a296">NtUserUnloadKeyboardLayout</a>(hkl);
04486 
04487     <span class="keywordflow">if</span> (fRet) {
04488         <a class="code" href="../../d6/d0/usercli_8h.html#a788">CliImmInitializeHotKeys</a>(ISHK_REMOVE, hkl);
04489         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
04490     }
04491 
04492     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
04493 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a140" doxytag="client.c::UpdateWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL UpdateWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03608">3608</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01774">NEEDSPAINT</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04563">NtUserCallHwndLock()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01746">tagWND::spwndChild</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02547">ECResetTextInfo()</a>, <a class="el" href="../../d7/d8/softkbd_8c-source.html#l00137">ImmCreateSoftKeyboard()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00109">InitConsoleIME()</a>, <a class="el" href="../../d0/d1/usrbench_8c-source.html#l01995">InitializeInstance()</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00224">InitInstance()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00369">msProfAvgDlgCreate()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00342">msProfAvgDlgDraw()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01435">msProfMenu()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01393">msProfMove()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01353">msProfSize()</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l01791">msProfUpdateWindow()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00311">ReaderProcInternal()</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l02231">ResizeScreenBuffer()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01719">xxxCBHideListBoxWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01819">xxxCBShowListBoxWindow()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00691">xxxLBoxCtlHScroll()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02012">xxxNewITopEx()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l01211">xxxNextAniIconStep()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00029">xxxPressButton()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00094">xxxSetStaticImage()</a>.
<p>
<pre class="fragment"><div>03610 {
03611     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
03612 
03613     <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03614         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03615     }
03616 
03617     <span class="comment">/*</span>
03618 <span class="comment">     * Don't need to do anything if this window does not need any painting</span>
03619 <span class="comment">     * and it has no child windows</span>
03620 <span class="comment">     */</span>
03621     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a501">NEEDSPAINT</a>(pwnd) &amp;&amp; (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o4">spwndChild</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
03622         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03623     }
03624 
03625     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a176">NtUserCallHwndLock</a>(hwnd, SFI_XXXUPDATEWINDOW);
03626 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a143" doxytag="client.c::UserRealizePalette" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT UserRealizePalette           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hdc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03646">3646</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>03648 {
03649     <span class="keywordflow">return</span> (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>((ULONG_PTR)hdc, SFI_XXXREALIZEPALETTE);
03650 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a83" doxytag="client.c::UserRegisterWowHandlers" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG_PTR UserRegisterWowHandlers           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">APFNWOWHANDLERSIN&nbsp;</td>
          <td class="mdname" nowrap> <em>apfnWowIn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>APFNWOWHANDLERSOUT&nbsp;</td>
          <td class="mdname" nowrap> <em>apfnWowOut</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02696">2696</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01197">_CreateWindowEx()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00021">aiClassWow</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02992">DirectedYield()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01580">FillWindow</a>, <a class="el" href="../../d1/d8/hdata_8c-source.html#l00491">FreeDDEData()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00100">GetClassWOWWords()</a>, <a class="el" href="../../d4/d7/handles_8c-source.html#l00293">GetFullUserHandle()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00052">gSharedInfo</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00140">InitTask()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04462">NtUserGetMenuIndex()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l01541">NtUserWaitForMsgAndEvent()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07022">NtUserYieldTask()</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00132">pfn16GlobalAlloc</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00133">pfn16GlobalFree</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00118">pfnFindResourceExA</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00119">pfnFindResourceExW</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00123">pfnFreeResource</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00131">pfnGetExpWinVer</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00120">pfnLoadResource</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00125">pfnLocalAlloc</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00130">pfnLocalFree</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00127">pfnLocalLock</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00126">pfnLocalReAlloc</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00129">pfnLocalSize</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00128">pfnLocalUnlock</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00121">pfnLockResource</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00124">pfnSizeofResource</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00122">pfnUnlockResource</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00138">pfnWowCBStoreHandle</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00136">pfnWowDlgProcEx</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00137">pfnWowEditNextWord</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00134">pfnWowEmptyClipBoard</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00139">pfnWowGetProcModule</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00142">pfnWowIlstrcmp</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00141">pfnWowMsgBoxIndirectCallback</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00140">pfnWOWTellWOWThehDlg</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00135">pfnWowWndProcEx</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02615">RegisterClassWOWA()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03399">RegisterUserHungAppHandlers()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00090">WOWCleanup()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04127">WOWFindResourceExWCover()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00041">WOWFindWindow()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02641">WowGetDefWindowProcBits()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04158">WOWLoadBitmapA()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00085">WOWModuleUnload()</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l04200">WowServerLoadCreateCursorIcon()</a>, and <a class="el" href="../../d3/d8/client_8c.html#a26">WowServerLoadCreateMenu()</a>.
<p>
<pre class="fragment"><div>02699 {
02700 
02701     <span class="comment">// In'ees</span>
02702     <a class="code" href="../../d1/d8/clglobal_8c.html#a43">pfnLocalAlloc</a> = apfnWowIn-&gt;pfnLocalAlloc;
02703     <a class="code" href="../../d1/d8/clglobal_8c.html#a44">pfnLocalReAlloc</a> = apfnWowIn-&gt;pfnLocalReAlloc;
02704     <a class="code" href="../../d1/d8/clglobal_8c.html#a45">pfnLocalLock</a> = apfnWowIn-&gt;pfnLocalLock;
02705     <a class="code" href="../../d1/d8/clglobal_8c.html#a46">pfnLocalUnlock</a> = apfnWowIn-&gt;pfnLocalUnlock;
02706     <a class="code" href="../../d1/d8/clglobal_8c.html#a47">pfnLocalSize</a> = apfnWowIn-&gt;pfnLocalSize;
02707     <a class="code" href="../../d1/d8/clglobal_8c.html#a48">pfnLocalFree</a> = apfnWowIn-&gt;pfnLocalFree;
02708     <a class="code" href="../../d1/d8/clglobal_8c.html#a49">pfnGetExpWinVer</a> = apfnWowIn-&gt;pfnGetExpWinVer;
02709     <a class="code" href="../../d1/d8/clglobal_8c.html#a50">pfn16GlobalAlloc</a> = apfnWowIn-&gt;pfn16GlobalAlloc;
02710     <a class="code" href="../../d1/d8/clglobal_8c.html#a51">pfn16GlobalFree</a> = apfnWowIn-&gt;pfn16GlobalFree;
02711     <a class="code" href="../../d1/d8/clglobal_8c.html#a52">pfnWowEmptyClipBoard</a> = apfnWowIn-&gt;pfnEmptyCB;
02712     <a class="code" href="../../d1/d8/clglobal_8c.html#a55">pfnWowEditNextWord</a> = apfnWowIn-&gt;pfnWowEditNextWord;
02713     <a class="code" href="../../d1/d8/clglobal_8c.html#a56">pfnWowCBStoreHandle</a> = apfnWowIn-&gt;pfnWowCBStoreHandle;
02714     <a class="code" href="../../d1/d8/clglobal_8c.html#a36">pfnFindResourceExA</a> = apfnWowIn-&gt;pfnFindResourceEx;
02715     <a class="code" href="../../d1/d8/clglobal_8c.html#a38">pfnLoadResource</a> = apfnWowIn-&gt;pfnLoadResource;
02716     <a class="code" href="../../d1/d8/clglobal_8c.html#a39">pfnLockResource</a> = apfnWowIn-&gt;pfnLockResource;
02717     <a class="code" href="../../d1/d8/clglobal_8c.html#a40">pfnUnlockResource</a> = apfnWowIn-&gt;pfnUnlockResource;
02718     <a class="code" href="../../d1/d8/clglobal_8c.html#a41">pfnFreeResource</a> = apfnWowIn-&gt;pfnFreeResource;
02719     <a class="code" href="../../d1/d8/clglobal_8c.html#a42">pfnSizeofResource</a> = apfnWowIn-&gt;pfnSizeofResource;
02720     <a class="code" href="../../d1/d8/clglobal_8c.html#a37">pfnFindResourceExW</a> = <a class="code" href="../../d3/d8/client_8c.html#a29">WOWFindResourceExWCover</a>;
02721     <a class="code" href="../../d1/d8/clglobal_8c.html#a54">pfnWowDlgProcEx</a> = apfnWowIn-&gt;pfnWowDlgProcEx;
02722     <a class="code" href="../../d1/d8/clglobal_8c.html#a53">pfnWowWndProcEx</a> = apfnWowIn-&gt;pfnWowWndProcEx;
02723     <a class="code" href="../../d1/d8/clglobal_8c.html#a57">pfnWowGetProcModule</a> = apfnWowIn-&gt;pfnGetProcModule16;
02724     <a class="code" href="../../d1/d8/clglobal_8c.html#a58">pfnWOWTellWOWThehDlg</a> = apfnWowIn-&gt;pfnWOWTellWOWThehDlg;
02725     <a class="code" href="../../d1/d8/clglobal_8c.html#a59">pfnWowMsgBoxIndirectCallback</a> = apfnWowIn-&gt;pfnWowMsgBoxIndirectCallback;
02726     <a class="code" href="../../d1/d8/clglobal_8c.html#a60">pfnWowIlstrcmp</a> = apfnWowIn-&gt;pfnWowIlstrsmp;
02727 
02728     <span class="comment">// Out'ees</span>
02729 <span class="preprocessor">#if DBG</span>
02730 <span class="preprocessor"></span>    apfnWowOut-&gt;dwBldInfo = (WINVER &lt;&lt; 16) | 0x80000000;
02731 <span class="preprocessor">#else</span>
02732 <span class="preprocessor"></span>    apfnWowOut-&gt;dwBldInfo = (WINVER &lt;&lt; 16);
02733 <span class="preprocessor">#endif</span>
02734 <span class="preprocessor"></span>    apfnWowOut-&gt;pfnCsCreateWindowEx            = <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a31">_CreateWindowEx</a>;
02735     apfnWowOut-&gt;pfnDirectedYield               = <a class="code" href="../../d3/d8/client_8c.html#a96">DirectedYield</a>;
02736     apfnWowOut-&gt;pfnFreeDDEData                 = <a class="code" href="../../d0/d4/ddemlcli_8h.html#a125">FreeDDEData</a>;
02737     apfnWowOut-&gt;pfnGetClassWOWWords            = <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a6">GetClassWOWWords</a>;
02738     apfnWowOut-&gt;pfnInitTask                    = <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a7">InitTask</a>;
02739     apfnWowOut-&gt;pfnRegisterClassWOWA           = <a class="code" href="../../d3/d8/client_8c.html#a81">RegisterClassWOWA</a>;
02740     apfnWowOut-&gt;pfnRegisterUserHungAppHandlers = <a class="code" href="../../d3/d8/client_8c.html#a123">RegisterUserHungAppHandlers</a>;
02741     apfnWowOut-&gt;pfnServerCreateDialog          = <a class="code" href="../../d0/d9/dlgbegin_8c.html#a23">InternalCreateDialog</a>;
02742     apfnWowOut-&gt;pfnServerLoadCreateCursorIcon  = <a class="code" href="../../d4/d9/clres_8c.html#a102">WowServerLoadCreateCursorIcon</a>;
02743     apfnWowOut-&gt;pfnServerLoadCreateMenu        = <a class="code" href="../../d3/d8/client_8c.html#a26">WowServerLoadCreateMenu</a>;
02744     apfnWowOut-&gt;pfnWOWCleanup                  = <a class="code" href="../../d3/d8/client_8c.html#a33">WOWCleanup</a>;
02745     apfnWowOut-&gt;pfnWOWModuleUnload             = <a class="code" href="../../d3/d8/client_8c.html#a32">WOWModuleUnload</a>;
02746     apfnWowOut-&gt;pfnWOWFindWindow               = <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a3">WOWFindWindow</a>;
02747     apfnWowOut-&gt;pfnWOWLoadBitmapA              = <a class="code" href="../../d3/d8/client_8c.html#a25">WOWLoadBitmapA</a>;
02748     apfnWowOut-&gt;pfnWowWaitForMsgAndEvent       = <a class="code" href="../../d0/d0/ntuser_8h.html#a26">NtUserWaitForMsgAndEvent</a>;
02749     apfnWowOut-&gt;pfnYieldTask                   = <a class="code" href="../../d0/d0/ntuser_8h.html#a165">NtUserYieldTask</a>;
02750     apfnWowOut-&gt;pfnGetFullUserHandle           = <a class="code" href="../../d3/d8/client_8c.html#a27">GetFullUserHandle</a>;
02751     apfnWowOut-&gt;pfnGetMenuIndex                = <a class="code" href="../../d0/d0/ntuser_8h.html#a79">NtUserGetMenuIndex</a>;
02752     apfnWowOut-&gt;pfnWowGetDefWindowProcBits     = <a class="code" href="../../d3/d8/client_8c.html#a82">WowGetDefWindowProcBits</a>;
02753     apfnWowOut-&gt;pfnFillWindow                  = <a class="code" href="../../d6/d0/usercli_8h.html#a234">FillWindow</a>;
02754     apfnWowOut-&gt;aiWowClass                     = <a class="code" href="../../d3/d8/client_8c.html#a7">aiClassWow</a>;
02755     <span class="keywordflow">return</span> (ULONG_PTR)&amp;<a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>;
02756 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a51" doxytag="client.c::ValidateRgn" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ValidateRgn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HRGN&nbsp;</td>
          <td class="mdname" nowrap> <em>hRgn</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01322">1322</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04626">NtUserCallHwndParamLock()</a>.
<p>
<pre class="fragment"><div>01323 {
01324     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a179">NtUserCallHwndParamLock</a>(hWnd, (ULONG_PTR)hRgn,
01325                                          SFI_XXXVALIDATERGN);
01326 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a56" doxytag="client.c::WaitForInputIdle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> WaitForInputIdle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hProcess</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwMilliseconds</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01434">1434</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d1/psquery_8c-source.html#l00531">NtQueryInformationProcess()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06491">NtUserWaitForInputIdle()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00361">ImeRunHelp()</a>, <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00183">LaunchHelper()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00059">UserClientDllInitialize()</a>.
<p>
<pre class="fragment"><div>01437 {
01438     PROCESS_BASIC_INFORMATION processinfo;
01439     ULONG_PTR idProcess;
01440     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
01441     <span class="comment">/*</span>
01442 <span class="comment">     * First get the process id from the hProcess.</span>
01443 <span class="comment">     */</span>
01444     status = <a class="code" href="../../d9/d1/psquery_8c.html#a18">NtQueryInformationProcess</a>(hProcess, ProcessBasicInformation,
01445             &amp;processinfo, <span class="keyword">sizeof</span>(processinfo), NULL);
01446     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
01447         <span class="keywordflow">if</span> (status == STATUS_OBJECT_TYPE_MISMATCH) {
01448             <span class="keywordflow">if</span> ((ULONG_PTR)hProcess &amp; 0x2) {
01449             <span class="comment">/*</span>
01450 <span class="comment">             * WOW Process handles are really semaphore handles.</span>
01451 <span class="comment">             * CreateProcess ORs in a 0x2 (the low 2 bits of handles</span>
01452 <span class="comment">             * are not used) so we can identify it more clearly.</span>
01453 <span class="comment">             */</span>
01454                 idProcess = ((ULONG_PTR)hProcess &amp; ~0x03);
01455                 <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a244">NtUserWaitForInputIdle</a>(idProcess, dwMilliseconds, TRUE);
01456             }
01457 
01458             <span class="comment">/*</span>
01459 <span class="comment">             * VDM (DOS) Process handles are really semaphore handles.</span>
01460 <span class="comment">             * CreateProcess ORs in a 0x1 (the low 2 bits of handles</span>
01461 <span class="comment">             * are not used) so we can identify and return immidiately.</span>
01462 <span class="comment">             */</span>
01463             <span class="keywordflow">if</span> ((ULONG_PTR)hProcess &amp; 0x1) {
01464                 <span class="keywordflow">return</span> 0;
01465             }
01466         }
01467 
01468         RIPERR1(ERROR_INVALID_HANDLE, RIP_WARNING, <span class="stringliteral">"WaitForInputIdle invalid process"</span>, hProcess);
01469         <span class="keywordflow">return</span> (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)-1;
01470     }
01471     idProcess = processinfo.UniqueProcessId;
01472     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a244">NtUserWaitForInputIdle</a>(idProcess, dwMilliseconds, FALSE);
01473 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a144" doxytag="client.c::WindowFromDC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HWND WindowFromDC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HDC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hdc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l03658">3658</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
<pre class="fragment"><div>03660 {
03661     <span class="keywordflow">return</span> (HWND)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>((ULONG_PTR)hdc, SFI__WINDOWFROMDC);
03662 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a66" doxytag="client.c::WinStaQueryInformationW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN WinStaQueryInformationW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hServer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ulLogonId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WINSTATIONINFOCLASS&nbsp;</td>
          <td class="mdname" nowrap> <em>WinStationInformationClass</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>pWinStationInformation</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ulWinStationInformationLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>pulReturnLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01931">1931</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02154">CommonCreateWindowStation()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03097">GetClientKeyboardType()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l02091">GetRemoteKeyboardLayout()</a>.
<p>
<pre class="fragment"><div>01938 {
01939     PWINSTATIONQUERYINFORMATIONW pfnWinStationQueryInformationW;
01940     HMODULE hwinsta;
01941     BOOLEAN fRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01942 
01943     <span class="comment">/*</span>
01944 <span class="comment">     *  Get handle to winsta.dll</span>
01945 <span class="comment">     */</span>
01946     <span class="keywordflow">if</span> ((hwinsta = LoadLibraryA(<span class="stringliteral">"WINSTA"</span>)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01947         <span class="keywordflow">if</span> ((pfnWinStationQueryInformationW = (PWINSTATIONQUERYINFORMATIONW)
01948              GetProcAddress(hwinsta, <span class="stringliteral">"WinStationQueryInformationW"</span>)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01949 
01950                 <span class="comment">/*</span>
01951 <span class="comment">                 * Fetch the WinStation's basic information</span>
01952 <span class="comment">                 */</span>
01953                 fRet = (*pfnWinStationQueryInformationW)(hServer,
01954                            ulLogonId,
01955                            WinStationInformationClass,
01956                            pWinStationInformation,
01957                            ulWinStationInformationLength,
01958                            pulReturnLength);
01959         }
01960         FreeLibrary(hwinsta);
01961     }
01962 
01963 
01964     <span class="keywordflow">return</span> fRet;
01965 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="client.c::WOWCleanup" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WOWCleanup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hInstance</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>hTaskWow</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00090">90</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04648">NtUserCallTwoParam()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.
<p>
<pre class="fragment"><div>00090                                                   {
00091     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a180">NtUserCallTwoParam</a>((ULONG_PTR)hInstance,
00092                                     (ULONG_PTR)hTaskWow,
00093                                     SFI__WOWCLEANUP);
00094 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="client.c::WOWFindResourceExWCover" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE WOWFindResourceExWCover           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hmod</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>rt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpUniName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>LangId</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/clres_8c-source.html#l04127">4127</a> of file <a class="el" href="../../d5/d8/clres_8c-source.html">clres.c</a>.
<p>
References <a class="el" href="../../d7/d9/usercli_8h-source.html#l00909">FINDRESOURCEEXA</a>, <a class="el" href="../../d5/d8/smbtrsup_8c-source.html#l00151">ID</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.
<p>
<pre class="fragment"><div>04132 {
04133     LPSTR  lpAnsiName;
04134     HANDLE hRes;
04135 
04136     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a>(lpUniName))
04137         <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a127">FINDRESOURCEEXA</a>(hmod, (LPSTR)lpUniName, (LPSTR)rt, LangId);
04138 
04139     <span class="comment">/*</span>
04140 <span class="comment">     * Otherwise convert the name of the menu then call LoadMenu</span>
04141 <span class="comment">     */</span>
04142     <span class="keywordflow">if</span> (!WCSToMB(lpUniName, -1, &amp;lpAnsiName, -1, TRUE))
04143         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04144 
04145     hRes = <a class="code" href="../../d6/d0/usercli_8h.html#a127">FINDRESOURCEEXA</a>(hmod, lpAnsiName, (LPSTR)rt, LangId);
04146 
04147     <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(lpAnsiName);
04148 
04149     <span class="keywordflow">return</span> hRes;
04150 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a82" doxytag="client.c::WowGetDefWindowProcBits" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> WORD WowGetDefWindowProcBits           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDefWindowProcBits</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>cbDefWindowProcBits</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l02641">2641</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01273">_WNDMSG::abMsgs</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01357">tagSHAREDINFO::DefWindowMsgs</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01358">tagSHAREDINFO::DefWindowSpecMsgs</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00052">gSharedInfo</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01344">_WNDMSG::maxMsgs</a>, and <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.
<p>
<pre class="fragment"><div>02644 {
02645     WORD  wMaxMsg;
02646     <a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a> pbSrc, pbDst, pbDstEnd;
02647 
02648     UNREFERENCED_PARAMETER(cbDefWindowProcBits);
02649 
02650     <span class="comment">/*</span>
02651 <span class="comment">     * Merge the bits from gpsi-&gt;gabDefWindowMsgs and</span>
02652 <span class="comment">     * gpsi-&gt;gabDefWindowSpecMsgs into WOW's DefWindowProcBits.  These two</span>
02653 <span class="comment">     * indicate which messages must go directly to the server and which</span>
02654 <span class="comment">     * can be handled with some special code in DefWindowProcWorker.</span>
02655 <span class="comment">     * Bitwise OR'ing the two gives a bit array with 1 in the bit field</span>
02656 <span class="comment">     * for each message that must go to user32's DefWindowProc, and 0</span>
02657 <span class="comment">     * for those that can be returned back to the client immediately.</span>
02658 <span class="comment">     *</span>
02659 <span class="comment">     * For speed we assume WOW has zeroed the buffer, in fact it's in</span>
02660 <span class="comment">     * USER.EXE's code segment and is zeroed in the image.</span>
02661 <span class="comment">     */</span>
02662 
02663     wMaxMsg = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(<a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.<a class="code" href="../../d4/d6/structtagSHAREDINFO.html#o6">DefWindowMsgs</a>.<a class="code" href="../../d1/d9/struct__WNDMSG.html#o0">maxMsgs</a>,
02664             <a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.<a class="code" href="../../d4/d6/structtagSHAREDINFO.html#o7">DefWindowSpecMsgs</a>.<a class="code" href="../../d1/d9/struct__WNDMSG.html#o0">maxMsgs</a>);
02665 
02666     UserAssert((wMaxMsg / 8 + 1) &lt;= cbDefWindowProcBits);
02667 
02668     <span class="comment">//</span>
02669     <span class="comment">// If the above assertion fires, the size of the DWPBits array in</span>
02670     <span class="comment">// \nt\private\mvdm\wow16\user\user.asm needs to be increased.</span>
02671     <span class="comment">//</span>
02672 
02673     <span class="comment">/* First copy the bits from DefWindowMsgs */</span>
02674 
02675     RtlCopyMemory(
02676         pDefWindowProcBits,
02677         <a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.<a class="code" href="../../d4/d6/structtagSHAREDINFO.html#o6">DefWindowMsgs</a>.<a class="code" href="../../d1/d9/struct__WNDMSG.html#o1">abMsgs</a>,
02678         <a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.<a class="code" href="../../d4/d6/structtagSHAREDINFO.html#o6">DefWindowMsgs</a>.<a class="code" href="../../d1/d9/struct__WNDMSG.html#o0">maxMsgs</a> / 8 + 1
02679         );
02680 
02681     <span class="comment">/* Next OR in the bits from DefWindowSpecMsgs */</span>
02682 
02683     pbSrc = <a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.<a class="code" href="../../d4/d6/structtagSHAREDINFO.html#o7">DefWindowSpecMsgs</a>.<a class="code" href="../../d1/d9/struct__WNDMSG.html#o1">abMsgs</a>;
02684     pbDst = pDefWindowProcBits;
02685     pbDstEnd = pbDst + (<a class="code" href="../../d1/d8/clglobal_8c.html#a5">gSharedInfo</a>.<a class="code" href="../../d4/d6/structtagSHAREDINFO.html#o7">DefWindowSpecMsgs</a>.<a class="code" href="../../d1/d9/struct__WNDMSG.html#o0">maxMsgs</a> / 8 + 1);
02686 
02687     <span class="keywordflow">while</span> (pbDst &lt; pbDstEnd)
02688     {
02689         *pbDst++ |= *pbSrc++;
02690     }
02691 
02692     <span class="keywordflow">return</span> wMaxMsg;
02693 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="client.c::WOWLoadBitmapA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HBITMAP WOWLoadBitmapA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HINSTANCE&nbsp;</td>
          <td class="mdname" nowrap> <em>hmod</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPBYTE&nbsp;</td>
          <td class="mdname" nowrap> <em>pResData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cbResData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/clres_8c-source.html#l04158">4158</a> of file <a class="el" href="../../d5/d8/clres_8c-source.html">clres.c</a>.
<p>
References <a class="el" href="../../d6/d0/usercli_8h.html#a659">ConvertDIBBitmap()</a>, <a class="el" href="../../d5/d8/smbtrsup_8c-source.html#l00151">ID</a>, <a class="el" href="../../d5/d8/clres_8c-source.html#l01899">LoadBmp()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d7/d9/usercli_8h-source.html#l00960">UserLocalFree</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.
<p>
<pre class="fragment"><div>04163 {
04164     LPWSTR  lpUniName;
04165     HBITMAP hRet;
04166 
04167     UNREFERENCED_PARAMETER(cbResData);
04168 
04169     <span class="keywordflow">if</span> (pResData == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
04170 
04171         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a>(lpName))
04172             <span class="keywordflow">return</span> <a class="code" href="../../d4/d9/clres_8c.html#a73">LoadBmp</a>(hmod, (LPCWSTR)lpName, 0, 0, 0);
04173 
04174         <span class="keywordflow">if</span> (!MBToWCS(lpName, -1, &amp;lpUniName, -1, TRUE))
04175             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
04176 
04177         hRet = <a class="code" href="../../d4/d9/clres_8c.html#a73">LoadBmp</a>(hmod, lpUniName, 0, 0, 0);
04178 
04179         <a class="code" href="../../d6/d0/usercli_8h.html#a138">UserLocalFree</a>(lpUniName);
04180 
04181     } <span class="keywordflow">else</span> {
04182 
04183         hRet = <a class="code" href="../../d6/d0/usercli_8h.html#a659">ConvertDIBBitmap</a>((LPBITMAPINFOHEADER)pResData,
04184                                 0,
04185                                 0,
04186                                 LR_DEFAULTSIZE,
04187                                 NULL,
04188                                 NULL);
04189     }
04190 
04191     <span class="keywordflow">return</span> hRet;
04192 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="client.c::WOWModuleUnload" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WOWModuleUnload           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hModule</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00085">85</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, and <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04526">NtUserCallOneParam()</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.
<p>
<pre class="fragment"><div>00085                                      {
00086     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a174">NtUserCallOneParam</a>((ULONG_PTR)hModule,
00087                                     SFI__WOWMODULEUNLOAD);
00088 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="client.c::WowServerLoadCreateMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HMENU WowServerLoadCreateMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hMod</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPTSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>CONST LPMENUTEMPLATE&nbsp;</td>
          <td class="mdname" nowrap> <em>pmt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fCallClient</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a7" doxytag="client.c::aiClassWow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int <a class="el" href="../../d3/d8/client_8c.html#a7">aiClassWow</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><pre class="fragment"><div> {
    WOWCLASS_SCROLLBAR,
    WOWCLASS_ICONTITLE,
    WOWCLASS_MENU,
    WOWCLASS_DESKTOP,
    WOWCLASS_WIN16,
    WOWCLASS_BUTTON,
    WOWCLASS_COMBOBOX,
    WOWCLASS_COMBOLBOX,
    WOWCLASS_DIALOG,
    WOWCLASS_EDIT,
    WOWCLASS_LISTBOX,
    WOWCLASS_MDICLIENT,
    WOWCLASS_STATIC,
    WOWCLASS_WIN16,    
    WOWCLASS_WIN16,
    WOWCLASS_WIN16,
    WOWCLASS_WIN16,
    WOWCLASS_WIN16,
    WOWCLASS_WIN16,
    WOWCLASS_WIN16,
    WOWCLASS_WIN16,
    WOWCLASS_WIN16,     
    WOWCLASS_WIN16,
    WOWCLASS_WIN16,
    WOWCLASS_WIN16,
    WOWCLASS_SWITCHWND

    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00021">21</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02696">UserRegisterWowHandlers()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="client.c::gfLogonProcess" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL <a class="el" href="../../d3/d0/csrstubs_8c.html#a3">gfLogonProcess</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00079">79</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/imectl_8c-source.html#l00272">ImeWndCreateHandler()</a>, <a class="el" href="../../d7/d7/clinit_8c-source.html#l00933">LoadAppDlls()</a>, and <a class="el" href="../../d4/d9/csrstubs_8c-source.html#l00252">RegisterLogonProcess()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="client.c::gphn" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d4/struct__HANDLENODE.html">PHANDLENODE</a> <a class="el" href="../../d3/d8/client_8c.html#a22">gphn</a> = NULL          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00277">277</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l00353">ClientEmptyClipboard()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00390">GetClipboardData()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l00876">SetClipboardData()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="client.c::hCachedHKL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HKL <a class="el" href="../../d3/d8/client_8c.html#a24">hCachedHKL</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01109">1109</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l01112">ToAsciiEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="client.c::pwszKLLibSafety" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST LPWSTR <a class="el" href="../../d3/d8/client_8c.html#a12">pwszKLLibSafety</a> = L"kbdus.dll"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00069">69</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="client.c::pwszKLLibSafetyJPN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST LPWSTR <a class="el" href="../../d3/d8/client_8c.html#a14">pwszKLLibSafetyJPN</a> = L"kbdjpn.dll"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00071">71</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="client.c::pwszKLLibSafetyKOR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST LPWSTR <a class="el" href="../../d3/d8/client_8c.html#a16">pwszKLLibSafetyKOR</a> = L"kbdkor.dll"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00073">73</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="client.c::strRootDirectory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UNICODE_STRING <a class="el" href="../../d8/d6/ntuser_2client_2globals_8h.html#a71">strRootDirectory</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00081">81</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l02154">CommonCreateWindowStation()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02336">CommonOpenWindowStation()</a>, and <a class="el" href="../../d7/d7/clinit_8c-source.html#l00059">UserClientDllInitialize()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="client.c::szKLAttributes" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST WCHAR <a class="el" href="../../d3/d8/client_8c.html#a10">szKLAttributes</a>[] = L"Attributes"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00064">64</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="client.c::szKLFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST WCHAR <a class="el" href="../../d3/d8/client_8c.html#a9">szKLFile</a>[] = L"Layout <a class="el" href="../../d1/d9/icmui_8def.html#a0">File</a>"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00063">63</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="client.c::szKLId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST WCHAR <a class="el" href="../../d3/d8/client_8c.html#a11">szKLId</a>[] = L"Layout ID"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00065">65</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="client.c::szKLKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST WCHAR <a class="el" href="../../d3/d8/client_8c.html#a8">szKLKey</a>[] = L"\\Registry\\Machine\\System\\CurrentControlSet\\Control\\Keyboard Layouts\\"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00062">62</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04516">CheckValidLayoutName()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01983">GetServerIMEKeyboardLayout()</a>, and <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="client.c::uCachedCP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT <a class="el" href="../../d3/d8/client_8c.html#a23">uCachedCP</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l01108">1108</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l01112">ToAsciiEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="client.c::wKbdLocaleSafety" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST UINT <a class="el" href="../../d3/d8/client_8c.html#a13">wKbdLocaleSafety</a> = 0x04090409          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00070">70</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="client.c::wKbdLocaleSafetyJPN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST UINT <a class="el" href="../../d3/d8/client_8c.html#a15">wKbdLocaleSafetyJPN</a> = 0x04110411          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00072">72</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="client.c::wKbdLocaleSafetyKOR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST UINT <a class="el" href="../../d3/d8/client_8c.html#a17">wKbdLocaleSafetyKOR</a> = 0x04120412          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d7/client_8c-source.html#l00074">74</a> of file <a class="el" href="../../d4/d7/client_8c-source.html">client.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:04 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: pnpmemio.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>pnpmemio.c File Reference</h1><code>#include "<a class="el" href="../../d1/d5/iop_8h-source.html">iop.h</a>"</code><br>

<p>
<a href="../../d4/d0/pnpmemio_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d9/struct__PORT__ARBITER__EXTENSION.html">_PORT_ARBITER_EXTENSION</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a0">BUGFEST_HACKS</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a1">MAX_ULONGLONG</a>&nbsp;&nbsp;&nbsp;((ULONGLONG) -1)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a2">MAX_ALIAS_PORT</a>&nbsp;&nbsp;&nbsp;0x0000FFFF</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a3">ADDRESS_SPACE_MEMORY</a>&nbsp;&nbsp;&nbsp;0x0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a4">ADDRESS_SPACE_PORT</a>&nbsp;&nbsp;&nbsp;0x1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a5">ADDRESS_SPACE_USER_MEMORY</a>&nbsp;&nbsp;&nbsp;0x2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a6">ADDRESS_SPACE_USER_PORT</a>&nbsp;&nbsp;&nbsp;0x3</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a7">ADDRESS_SPACE_DENSE_MEMORY</a>&nbsp;&nbsp;&nbsp;0x4</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a8">ADDRESS_SPACE_USER_DENSE_MEMORY</a>&nbsp;&nbsp;&nbsp;0x6</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a9">MAX_SCORE</a>&nbsp;&nbsp;&nbsp;MAXLONG</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d9/struct__PORT__ARBITER__EXTENSION.html">_PORT_ARBITER_EXTENSION</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a10">PORT_ARBITER_EXTENSION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d9/struct__PORT__ARBITER__EXTENSION.html">_PORT_ARBITER_EXTENSION</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a11">PPORT_ARBITER_EXTENSION</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a12">IopPortBacktrackAllocation</a> (IN <a class="el" href="../../d9/d8/arbiter_8h.html#a39">PARBITER_INSTANCE</a> Arbiter, IN <a class="el" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html">PARBITER_ALLOCATION_STATE</a> State)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a13">IopPortGetNextAlias</a> (ULONG IoDescriptorFlags, ULONGLONG LastAlias, PULONGLONG NextAlias)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a14">IopPortFindSuitableRange</a> (<a class="el" href="../../d9/d8/arbiter_8h.html#a39">PARBITER_INSTANCE</a> Arbiter, <a class="el" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html">PARBITER_ALLOCATION_STATE</a> State)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a15">IopMemFindSuitableRange</a> (<a class="el" href="../../d9/d8/arbiter_8h.html#a39">PARBITER_INSTANCE</a> Arbiter, <a class="el" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html">PARBITER_ALLOCATION_STATE</a> State)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a16">IopGenericUnpackRequirement</a> (IN PIO_RESOURCE_DESCRIPTOR Descriptor, OUT PULONGLONG Minimum, OUT PULONGLONG Maximum, OUT PULONG Length, OUT PULONG Alignment)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a17">IopGenericPackResource</a> (IN PIO_RESOURCE_DESCRIPTOR Requirement, IN ULONGLONG <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a14">Start</a>, OUT PCM_PARTIAL_RESOURCE_DESCRIPTOR Descriptor)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a18">IopGenericScoreRequirement</a> (IN PIO_RESOURCE_DESCRIPTOR Descriptor)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a19">IopGenericUnpackResource</a> (IN PCM_PARTIAL_RESOURCE_DESCRIPTOR Descriptor, OUT PULONGLONG <a class="el" href="../../d5/d2/config_2ia64_2initia64_8c.html#a14">Start</a>, OUT PULONG Length)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a20">IopPortIsAliasedRangeAvailable</a> (IN <a class="el" href="../../d9/d8/arbiter_8h.html#a39">PARBITER_INSTANCE</a> Arbiter, IN <a class="el" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html">PARBITER_ALLOCATION_STATE</a> State)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a21">IopMemInitialize</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a22">IopPortAddAllocation</a> (IN <a class="el" href="../../d9/d8/arbiter_8h.html#a39">PARBITER_INSTANCE</a> Arbiter, IN <a class="el" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html">PARBITER_ALLOCATION_STATE</a> State)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a23">IopTranslateBusAddress</a> (IN PHYSICAL_ADDRESS SourceAddress, IN UCHAR SourceResourceType, OUT PPHYSICAL_ADDRESS TargetAddress, OUT PUCHAR TargetResourceType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a24">IopGenericTranslateOrdering</a> (OUT PIO_RESOURCE_DESCRIPTOR Target, IN PIO_RESOURCE_DESCRIPTOR Source)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a25">IopPortInitialize</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d1/pnpmemio_8c.html#a26">IopPortIsAliasedRangeAvailable</a> (<a class="el" href="../../d9/d8/arbiter_8h.html#a39">PARBITER_INSTANCE</a> Arbiter, <a class="el" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html">PARBITER_ALLOCATION_STATE</a> State)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a7" doxytag="pnpmemio.c::ADDRESS_SPACE_DENSE_MEMORY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ADDRESS_SPACE_DENSE_MEMORY&nbsp;&nbsp;&nbsp;0x4          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00151">151</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00155">IopTranslateBusAddress()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="pnpmemio.c::ADDRESS_SPACE_MEMORY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ADDRESS_SPACE_MEMORY&nbsp;&nbsp;&nbsp;0x0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00147">147</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00155">IopTranslateBusAddress()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="pnpmemio.c::ADDRESS_SPACE_PORT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ADDRESS_SPACE_PORT&nbsp;&nbsp;&nbsp;0x1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00148">148</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00155">IopTranslateBusAddress()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="pnpmemio.c::ADDRESS_SPACE_USER_DENSE_MEMORY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ADDRESS_SPACE_USER_DENSE_MEMORY&nbsp;&nbsp;&nbsp;0x6          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00152">152</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00155">IopTranslateBusAddress()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="pnpmemio.c::ADDRESS_SPACE_USER_MEMORY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ADDRESS_SPACE_USER_MEMORY&nbsp;&nbsp;&nbsp;0x2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00149">149</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00155">IopTranslateBusAddress()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="pnpmemio.c::ADDRESS_SPACE_USER_PORT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ADDRESS_SPACE_USER_PORT&nbsp;&nbsp;&nbsp;0x3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00150">150</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00155">IopTranslateBusAddress()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="pnpmemio.c::BUGFEST_HACKS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUGFEST_HACKS          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00024">24</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="pnpmemio.c::MAX_ALIAS_PORT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAX_ALIAS_PORT&nbsp;&nbsp;&nbsp;0x0000FFFF          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00031">31</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l01087">IopPortGetNextAlias()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="pnpmemio.c::MAX_SCORE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAX_SCORE&nbsp;&nbsp;&nbsp;MAXLONG          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00542">IopGenericScoreRequirement()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="pnpmemio.c::MAX_ULONGLONG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAX_ULONGLONG&nbsp;&nbsp;&nbsp;((ULONGLONG) -1)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00030">30</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a10" doxytag="pnpmemio.c::PORT_ARBITER_EXTENSION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d9/struct__PORT__ARBITER__EXTENSION.html">_PORT_ARBITER_EXTENSION</a>  <a class="el" href="../../d3/d9/struct__PORT__ARBITER__EXTENSION.html">PORT_ARBITER_EXTENSION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="pnpmemio.c::PPORT_ARBITER_EXTENSION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d9/struct__PORT__ARBITER__EXTENSION.html">_PORT_ARBITER_EXTENSION</a> * <a class="el" href="../../d3/d9/struct__PORT__ARBITER__EXTENSION.html">PPORT_ARBITER_EXTENSION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a17" doxytag="pnpmemio.c::IopGenericPackResource" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IopGenericPackResource           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PIO_RESOURCE_DESCRIPTOR&nbsp;</td>
          <td class="mdname" nowrap> <em>Requirement</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONGLONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Start</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCM_PARTIAL_RESOURCE_DESCRIPTOR&nbsp;</td>
          <td class="mdname" nowrap> <em>Descriptor</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00630">630</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
References <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00052">ARB_PRINT</a>, <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, and <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00049">Start</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00396">IopMemInitialize()</a>, and <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00349">IopPortInitialize()</a>.
<p>
<pre class="fragment"><div>00638                    :
00639 
00640     This routine packs an resource descriptor.
00641 
00642 Arguments:
00643 
00644     Requirement - The requirement from which <span class="keyword">this</span> resource was chosen.
00645 
00646     <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a> - The start value of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resource.
00647 
00648     Descriptor - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> descriptor to pack into.
00649 
00650 Return Value:
00651 
00652     Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> status of <span class="keyword">this</span> operation.
00653 
00654 --*/
00655 
00656 {
00657 
00658     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00659     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(Descriptor);
00660     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(Requirement);
00661     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(Requirement-&gt;Type == CmResourceTypePort
00662            || Requirement-&gt;Type == CmResourceTypeMemory);
00663 
00664     Descriptor-&gt;Type = Requirement-&gt;Type;
00665     Descriptor-&gt;Flags = Requirement-&gt;Flags;
00666     Descriptor-&gt;ShareDisposition = Requirement-&gt;ShareDisposition;
00667     Descriptor-&gt;u.Generic.Start.QuadPart = <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a>;
00668     Descriptor-&gt;u.Generic.Length = Requirement-&gt;u.Generic.Length;
00669 
00670     <a class="code" href="../../d9/d8/arbiter_8h.html#a1">ARB_PRINT</a>(2,
00671                 (<span class="stringliteral">"Packing %s resource %p =&gt; 0x%I64x length 0x%x\n"</span>,
00672                 Descriptor-&gt;Type == CmResourceTypePort ? <span class="stringliteral">"port"</span> : <span class="stringliteral">"memory"</span>,
00673                 Descriptor,
00674                 Descriptor-&gt;u.Port.Start.QuadPart,
00675                 Descriptor-&gt;u.Port.Length
00676                 ));
00677 
00678     <span class="keywordflow">return</span> STATUS_SUCCESS;
00679 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="pnpmemio.c::IopGenericScoreRequirement" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG IopGenericScoreRequirement           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PIO_RESOURCE_DESCRIPTOR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Descriptor</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00542">542</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
References <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00139">ALIGN_ADDRESS_UP</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00052">ARB_PRINT</a>, <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d3/d1/pnpmemio_8c.html#a9">MAX_SCORE</a>, and <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00396">IopMemInitialize()</a>, and <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00349">IopPortInitialize()</a>.
<p>
<pre class="fragment"><div>00548                    :
00549 
00550     This routine scores a requirement based on how flexible <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>.  The least
00551     flexible devices are scored <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> least and so when <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> arbitration list <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
00552     sorted we <span class="keywordflow">try</span> to allocate their resources first.
00553 
00554 Arguments:
00555 
00556     Descriptor - The descriptor describing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> requirement to score.
00557 
00558 
00559 Return Value:
00560 
00561     The score.
00562 
00563 --*/
00564 
00565 {
00566     LONG score;
00567     ULONGLONG start, end;
00568     LONGLONG bigscore;
00569     ULONG alignment;
00570 
00571     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00572 
00573 <span class="preprocessor">#define MAX_SCORE MAXLONG</span>
00574 <span class="preprocessor"></span>
00575     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(Descriptor);
00576     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>((Descriptor-&gt;Type == CmResourceTypePort) ||
00577            (Descriptor-&gt;Type == CmResourceTypeMemory));
00578 
00579     alignment = Descriptor-&gt;u.Generic.Alignment;
00580 
00581     <span class="comment">//</span>
00582     <span class="comment">// Fix the broken hardware that reports 0 alignment</span>
00583     <span class="comment">// Since this is not a PCI device, set the alignment to 1.</span>
00584     <span class="comment">//</span>
00585     <span class="comment">//</span>
00586 
00587     <span class="keywordflow">if</span> (alignment == 0 &amp;&amp;
00588         ((Descriptor-&gt;Type == CmResourceTypePort) ||
00589          (Descriptor-&gt;Type == CmResourceTypeMemory))) {
00590         alignment = 1;
00591     }
00592 
00593 
00594 
00595     start = <a class="code" href="../../d9/d8/arbiter_8h.html#a4">ALIGN_ADDRESS_UP</a>(
00596                 Descriptor-&gt;u.Generic.MinimumAddress.QuadPart,
00597                 alignment
00598                 );
00599 
00600     end = Descriptor-&gt;u.Generic.MaximumAddress.QuadPart;
00601 
00602     <span class="comment">//</span>
00603     <span class="comment">// The score is the number of possible allocations that could be made</span>
00604     <span class="comment">// given the alignment and length constraints</span>
00605     <span class="comment">//</span>
00606 
00607     bigscore = (((end - Descriptor-&gt;u.Generic.Length + 1) - start)
00608                     / alignment) + 1;
00609 
00610     score = (LONG)bigscore;
00611     <span class="keywordflow">if</span> (bigscore &lt; 0) {
00612         score = -1;
00613     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bigscore &gt; <a class="code" href="../../d3/d1/pnpmemio_8c.html#a9">MAX_SCORE</a>) {
00614         score = <a class="code" href="../../d3/d1/pnpmemio_8c.html#a9">MAX_SCORE</a>;
00615     }
00616 
00617     <a class="code" href="../../d9/d8/arbiter_8h.html#a1">ARB_PRINT</a>(2,
00618                 (<span class="stringliteral">"Scoring port resource %p(0x%I64x-0x%I64x) =&gt; %i\n"</span>,
00619                 Descriptor-&gt;Type == CmResourceTypePort ? <span class="stringliteral">"port"</span> : <span class="stringliteral">"memory"</span>,
00620                 Descriptor,
00621                 Descriptor-&gt;u.Generic.MinimumAddress.QuadPart,
00622                 end,
00623                 score
00624                 ));
00625 
00626     <span class="keywordflow">return</span> score;
00627 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="pnpmemio.c::IopGenericTranslateOrdering" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IopGenericTranslateOrdering           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PIO_RESOURCE_DESCRIPTOR&nbsp;</td>
          <td class="mdname" nowrap> <em>Target</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PIO_RESOURCE_DESCRIPTOR&nbsp;</td>
          <td class="mdname" nowrap> <em>Source</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00263">263</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00155">IopTranslateBusAddress()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, and <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00396">IopMemInitialize()</a>, and <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00349">IopPortInitialize()</a>.
<p>
<pre class="fragment"><div>00270                    :
00271 
00272     This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called during arbiter initialization to translate <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00273     orderings.
00274 
00275 Parameters:
00276 
00277     Target - Place to put <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> translated descriptor
00278 
00279     Source - Descriptor to translate
00280 
00281 Return Value:
00282 
00283     STATUS_SUCCESS
00284 
00285 
00286 
00287 */
00288 
00289 {
00290     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
00291     UCHAR initialResourceType, minResourceType, maxResourceType;
00292     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00293 
00294 
00295     *Target = *Source;
00296 
00297     <span class="keywordflow">if</span> (Source-&gt;Type != CmResourceTypeMemory
00298     &amp;&amp; Source-&gt;Type != CmResourceTypePort) {
00299         <span class="keywordflow">return</span> STATUS_SUCCESS;
00300     }
00301 
00302     initialResourceType = Source-&gt;Type;
00303 
00304     <span class="comment">//</span>
00305     <span class="comment">// Translate the minimum</span>
00306     <span class="comment">//</span>
00307 
00308     status = <a class="code" href="../../d3/d1/pnpmemio_8c.html#a23">IopTranslateBusAddress</a>(Source-&gt;u.Generic.MinimumAddress,
00309                                     initialResourceType,
00310                                     &amp;Target-&gt;u.Generic.MinimumAddress,
00311                                     &amp;minResourceType
00312                                     );
00313 
00314     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
00315 
00316         <span class="comment">//</span>
00317         <span class="comment">// Translate the maximum iff we could translate the minimum</span>
00318         <span class="comment">//</span>
00319 
00320         status = <a class="code" href="../../d3/d1/pnpmemio_8c.html#a23">IopTranslateBusAddress</a>(Source-&gt;u.Generic.MaximumAddress,
00321                                         initialResourceType,
00322                                         &amp;Target-&gt;u.Generic.MaximumAddress,
00323                                         &amp;maxResourceType
00324                                         );
00325 
00326     }
00327 
00328     <span class="comment">//</span>
00329     <span class="comment">// If we couldn't translate both ends of the range then we want to skip this</span>
00330     <span class="comment">// range - set it's type to CmResourceTypeNull</span>
00331     <span class="comment">//</span>
00332 
00333     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
00334         Target-&gt;Type = CmResourceTypeNull;
00335     } <span class="keywordflow">else</span> {
00336         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(minResourceType == maxResourceType);
00337         Target-&gt;Type = minResourceType;
00338     }
00339 
00340     <span class="keywordflow">return</span> STATUS_SUCCESS;
00341 
00342 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="pnpmemio.c::IopGenericUnpackRequirement" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IopGenericUnpackRequirement           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PIO_RESOURCE_DESCRIPTOR&nbsp;</td>
          <td class="mdname" nowrap> <em>Descriptor</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONGLONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Minimum</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONGLONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Maximum</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Alignment</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00463">463</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
References <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00052">ARB_PRINT</a>, <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, and <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00396">IopMemInitialize()</a>, and <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00349">IopPortInitialize()</a>.
<p>
<pre class="fragment"><div>00473                    :
00474 
00475     This routine unpacks an resource requirement descriptor.
00476 
00477 Arguments:
00478 
00479     Descriptor - The descriptor describing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> requirement to unpack.
00480 
00481     Minimum - Pointer to where <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d4/mrcf_8c.html#a3">minimum</a> acceptable start value should be
00482         unpacked to.
00483 
00484     Maximum - Pointer to where <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> maximum acceptable end value should be
00485         unpacked to.
00486 
00487     Length - Pointer to where <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> required length should be unpacked to.
00488 
00489     Minimum - Pointer to where <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> required alignment should be unpacked to.
00490 
00491 Return Value:
00492 
00493     Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> status of <span class="keyword">this</span> operation.
00494 
00495 --*/
00496 
00497 {
00498     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00499     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(Descriptor);
00500     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(Descriptor-&gt;Type == CmResourceTypePort
00501            || Descriptor-&gt;Type == CmResourceTypeMemory);
00502 
00503 
00504     *Minimum = (ULONGLONG) Descriptor-&gt;u.Generic.MinimumAddress.QuadPart;
00505     *Maximum = (ULONGLONG) Descriptor-&gt;u.Generic.MaximumAddress.QuadPart;
00506     *Length = Descriptor-&gt;u.Generic.Length;
00507     *Alignment = Descriptor-&gt;u.Generic.Alignment;
00508 
00509     <span class="comment">//</span>
00510     <span class="comment">// Fix the broken hardware that reports 0 alignment</span>
00511     <span class="comment">//</span>
00512 
00513     <span class="keywordflow">if</span> (*Alignment == 0) {
00514         *Alignment = 1;
00515     }
00516 
00517     <span class="comment">//</span>
00518     <span class="comment">// Fix broken INF's that report they support 24bit memory &gt; 0xFFFFFF</span>
00519     <span class="comment">//</span>
00520 
00521     <span class="keywordflow">if</span> (Descriptor-&gt;Type == CmResourceTypeMemory
00522     &amp;&amp; Descriptor-&gt;Flags &amp; CM_RESOURCE_MEMORY_24
00523     &amp;&amp; Descriptor-&gt;u.Memory.MaximumAddress.QuadPart &gt; 0xFFFFFF) {
00524         *Maximum = 0xFFFFFF;
00525     }
00526 
00527     <a class="code" href="../../d9/d8/arbiter_8h.html#a1">ARB_PRINT</a>(2,
00528                 (<span class="stringliteral">"Unpacking %s requirement %p =&gt; 0x%I64x-0x%I64x length 0x%x alignment 0x%x\n"</span>,
00529                 Descriptor-&gt;Type == CmResourceTypePort ? <span class="stringliteral">"port"</span> : <span class="stringliteral">"memory"</span>,
00530                 Descriptor,
00531                 *Minimum,
00532                 *Maximum,
00533                 *Length,
00534                 *Alignment
00535                 ));
00536 
00537     <span class="keywordflow">return</span> STATUS_SUCCESS;
00538 
00539 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="pnpmemio.c::IopGenericUnpackResource" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IopGenericUnpackResource           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCM_PARTIAL_RESOURCE_DESCRIPTOR&nbsp;</td>
          <td class="mdname" nowrap> <em>Descriptor</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONGLONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Start</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00682">682</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
References <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00052">ARB_PRINT</a>, <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, and <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00049">Start</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00396">IopMemInitialize()</a>, and <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00349">IopPortInitialize()</a>.
<p>
<pre class="fragment"><div>00690                    :
00691 
00692     This routine unpacks an resource descriptor.
00693 
00694 Arguments:
00695 
00696     Descriptor - The descriptor describing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resource to unpack.
00697 
00698     <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a> - Pointer to where <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> start value should be unpacked to.
00699 
00700     Length - Pointer to where <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length value should be unpacked to.
00701 
00702 Return Value:
00703 
00704     Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> status of <span class="keyword">this</span> operation.
00705 
00706 --*/
00707 
00708 {
00709 
00710     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00711     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(Descriptor);
00712     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(Descriptor-&gt;Type == CmResourceTypePort
00713            || Descriptor-&gt;Type == CmResourceTypeMemory);
00714 
00715     *<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a> = Descriptor-&gt;u.Generic.Start.QuadPart;
00716     *Length = Descriptor-&gt;u.Generic.Length;
00717 
00718     <a class="code" href="../../d9/d8/arbiter_8h.html#a1">ARB_PRINT</a>(2,
00719                 (<span class="stringliteral">"Unpacking %s resource %p =&gt; 0x%I64x Length 0x%x\n"</span>,
00720                 Descriptor-&gt;Type == CmResourceTypePort ? <span class="stringliteral">"port"</span> : <span class="stringliteral">"memory"</span>,
00721                 Descriptor,
00722                 *Start,
00723                 *Length
00724                 ));
00725 
00726     <span class="keywordflow">return</span> STATUS_SUCCESS;
00727 
00728 }
<span class="preprocessor">#if 0</span>
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="pnpmemio.c::IopMemFindSuitableRange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN IopMemFindSuitableRange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d8/arbiter_8h.html#a39">PARBITER_INSTANCE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Arbiter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html">PARBITER_ALLOCATION_STATE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>State</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l01342">1342</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
References <a class="el" href="../../d9/d7/arbiter_8c-source.html#l02065">ArbFindSuitableRange()</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00719">ARBITER_FLAG_BOOT_CONFIG</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00440">ARBITER_RANGE_BOOT_ALLOCATED</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00245">_ARBITER_ALLOCATION_STATE::Entry</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00764">_ARBITER_LIST_ENTRY::Flags</a>, and <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00279">_ARBITER_ALLOCATION_STATE::RangeAvailableAttributes</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00396">IopMemInitialize()</a>.
<p>
<pre class="fragment"><div>01348                    :
01349 
01350     This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called from AllocateEntry once we have decided where we want
01351     to allocate from.  It tries to find a free range that matches <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
01352     requirements in State <span class="keywordflow">while</span> restricting its possible solutions to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> range
01353     State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o0">Start</a> to State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o3">CurrentMaximum</a>.  On success State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o0">Start</a> and
01354     State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o1">End</a> represent <span class="keyword">this</span> range.  Conflicts between boot configs are allowed
01355 
01356 Arguments:
01357 
01358     Arbiter - The instance data of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> arbiter who was called.
01359 
01360     State - The state of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current arbitration.
01361 
01362 Return Value:
01363 
01364     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> we found a range, <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> otherwise.
01365 
01366 --*/
01367 {
01368     <span class="comment">//</span>
01369     <span class="comment">// If this was a boot config then consider other boot configs to be</span>
01370     <span class="comment">// available</span>
01371     <span class="comment">//</span>
01372 
01373     <span class="keywordflow">if</span> (State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o4">Entry</a>-&gt;<a class="code" href="../../d0/d8/struct__ARBITER__LIST__ENTRY.html#o5">Flags</a> &amp; <a class="code" href="../../d6/d9/pnp_8h.html#a8">ARBITER_FLAG_BOOT_CONFIG</a>) {
01374         State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o10">RangeAvailableAttributes</a> |= <a class="code" href="../../d9/d8/arbiter_8h.html#a13">ARBITER_RANGE_BOOT_ALLOCATED</a>;
01375     }
01376 
01377     <span class="comment">//</span>
01378     <span class="comment">// Do the default thing</span>
01379     <span class="comment">//</span>
01380 
01381     <span class="keywordflow">return</span> <a class="code" href="../../d9/d8/arbiter_8h.html#a83">ArbFindSuitableRange</a>(Arbiter, State);
01382 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="pnpmemio.c::IopMemInitialize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IopMemInitialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d8/d9/pnpinit_8c-source.html#l00093">IopInitializePlugPlayServices()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="pnpmemio.c::IopPortAddAllocation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID IopPortAddAllocation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d9/d8/arbiter_8h.html#a39">PARBITER_INSTANCE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Arbiter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html">PARBITER_ALLOCATION_STATE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>State</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l01146">1146</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
References <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00052">ARB_PRINT</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00150">ARBITER_ALTERNATIVE_FLAG_SHARED</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00442">ARBITER_RANGE_ALIAS</a>, <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l01087">IopPortGetNextAlias()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, and <a class="el" href="../../d3/d4/range_8c-source.html#l00340">RtlAddRange()</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00349">IopPortInitialize()</a>.
<p>
<pre class="fragment"><div>01153                    :
01154 
01155     This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called from AllocateEntry once we have found a possible
01156     solution (State-&gt;Start - State-&gt;End).  It adds <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ranges that will not be
01157     available <span class="keywordflow">if</span> we commit to <span class="keyword">this</span> solution to Arbiter-&gt;PossibleAllocation.
01158 
01159 Arguments:
01160 
01161     Arbiter - The instance data of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> arbiter who was called.
01162 
01163     State - The state of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current arbitration.
01164 
01165 Return Value:
01166 
01167     None.
01168 
01169 --*/
01170 
01171 {
01172     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
01173     ULONGLONG alias;
01174     BOOLEAN isAlias;
01175 
01176     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
01177 
01178     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(Arbiter);
01179     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(State);
01180 
01181     status = <a class="code" href="../../d2/d5/range_8c.html#a16">RtlAddRange</a>(Arbiter-&gt;PossibleAllocation,
01182                  State-&gt;Start,
01183                  State-&gt;End,
01184                  State-&gt;RangeAttributes,
01185                  RTL_RANGE_LIST_ADD_IF_CONFLICT +
01186                     (State-&gt;CurrentAlternative-&gt;Flags &amp; ARBITER_ALTERNATIVE_FLAG_SHARED
01187                         ? RTL_RANGE_LIST_ADD_SHARED : 0),
01188                  NULL,
01189                  State-&gt;Entry-&gt;PhysicalDeviceObject
01190                  );
01191 
01192     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status));
01193 
01194     <span class="comment">//</span>
01195     <span class="comment">// Add any aliases</span>
01196     <span class="comment">//</span>
01197 
01198     alias = State-&gt;Start;
01199     <a class="code" href="../../d9/d8/arbiter_8h.html#a1">ARB_PRINT</a>(2, (<span class="stringliteral">"Adding aliases\n"</span>));
01200 
01201     <span class="keywordflow">while</span> (<a class="code" href="../../d3/d1/pnpmemio_8c.html#a13">IopPortGetNextAlias</a>(State-&gt;CurrentAlternative-&gt;Descriptor-&gt;Flags,
01202                              alias,
01203                              &amp;alias)) {
01204 
01205         status = <a class="code" href="../../d2/d5/range_8c.html#a16">RtlAddRange</a>(Arbiter-&gt;PossibleAllocation,
01206                      alias,
01207                      alias + State-&gt;CurrentAlternative-&gt;Length - 1,
01208                      (UCHAR) (State-&gt;RangeAttributes | ARBITER_RANGE_ALIAS),
01209                      RTL_RANGE_LIST_ADD_IF_CONFLICT +
01210                         (State-&gt;CurrentAlternative-&gt;Flags &amp; ARBITER_ALTERNATIVE_FLAG_SHARED
01211                             ? RTL_RANGE_LIST_ADD_SHARED : 0),
01212                      NULL,
01213                      State-&gt;Entry-&gt;PhysicalDeviceObject
01214                      );
01215 
01216         <span class="comment">//</span>
01217         <span class="comment">// We have already checked if these ranges are available</span>
01218         <span class="comment">// so we should not fail...</span>
01219         <span class="comment">//</span>
01220 
01221         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status));
01222     }
01223 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="pnpmemio.c::IopPortBacktrackAllocation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID IopPortBacktrackAllocation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d9/d8/arbiter_8h.html#a39">PARBITER_INSTANCE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Arbiter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html">PARBITER_ALLOCATION_STATE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>State</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00890">890</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
References <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00052">ARB_PRINT</a>, <a class="el" href="../../d9/d7/arbiter_8c-source.html#l02238">ArbBacktrackAllocation()</a>, <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l01087">IopPortGetNextAlias()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, and <a class="el" href="../../d3/d4/range_8c-source.html#l01071">RtlDeleteRange()</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00349">IopPortInitialize()</a>.
<p>
<pre class="fragment"><div>00897                    :
00898 
00899     This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called from AllocateEntry <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> possible solution
00900     (State-&gt;Start - State-&gt;End) does not allow us to allocate resources to
00901     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> rest of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> devices being considered.  It deletes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ranges that were
00902     added to Arbiter-&gt;PossibleAllocation by AddAllocation including those
00903     associated with ISA aliases.
00904 
00905 Arguments:
00906 
00907     Arbiter - The instance data of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> arbiter who was called.
00908 
00909     State - The state of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current arbitration.
00910 
00911 Return Value:
00912 
00913     None.
00914 
00915 --*/
00916 
00917 
00918 {
00919 
00920     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
00921     ULONGLONG alias = State-&gt;Start;
00922 
00923     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00924 
00925     <span class="comment">//</span>
00926     <span class="comment">// Delete the aliases</span>
00927     <span class="comment">//</span>
00928 
00929     <a class="code" href="../../d9/d8/arbiter_8h.html#a1">ARB_PRINT</a>(2, (<span class="stringliteral">"\t\tDeleting aliases\n"</span>));
00930 
00931     <span class="keywordflow">while</span> (<a class="code" href="../../d3/d1/pnpmemio_8c.html#a13">IopPortGetNextAlias</a>(State-&gt;CurrentAlternative-&gt;Flags,
00932                                alias,
00933                                &amp;alias)) {
00934 
00935         status = <a class="code" href="../../d2/d5/range_8c.html#a17">RtlDeleteRange</a>(
00936                      Arbiter-&gt;PossibleAllocation,
00937                      alias,
00938                      alias + State-&gt;CurrentAlternative-&gt;Length - 1,
00939                      State-&gt;Entry-&gt;PhysicalDeviceObject
00940                      );
00941 
00942         <span class="comment">//</span>
00943         <span class="comment">// We should not fail...</span>
00944         <span class="comment">//</span>
00945 
00946         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status));
00947     }
00948 
00949     <span class="comment">//</span>
00950     <span class="comment">// Now call the original function to delete the base range</span>
00951     <span class="comment">//</span>
00952 
00953     <a class="code" href="../../d9/d8/arbiter_8h.html#a81">ArbBacktrackAllocation</a>(Arbiter, State);
00954 
00955 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="pnpmemio.c::IopPortFindSuitableRange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN IopPortFindSuitableRange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d8/arbiter_8h.html#a39">PARBITER_INSTANCE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Arbiter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html">PARBITER_ALLOCATION_STATE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>State</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00959">959</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
References <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00183">_ARBITER_ALTERNATIVE::Alignment</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00150">ARBITER_ALTERNATIVE_FLAG_SHARED</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00719">ARBITER_FLAG_BOOT_CONFIG</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00440">ARBITER_RANGE_BOOT_ALLOCATED</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a174a128">ArbiterRequestLegacyAssigned</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a174a126">ArbiterRequestLegacyReported</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00250">_ARBITER_ALLOCATION_STATE::CurrentAlternative</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00240">_ARBITER_ALLOCATION_STATE::CurrentMaximum</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00239">_ARBITER_ALLOCATION_STATE::CurrentMinimum</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00232">_ARBITER_ALLOCATION_STATE::End</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00245">_ARBITER_ALLOCATION_STATE::Entry</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00198">_ARBITER_ALTERNATIVE::Flags</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00764">_ARBITER_LIST_ENTRY::Flags</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l01227">IopPortIsAliasedRangeAvailable()</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00178">_ARBITER_ALTERNATIVE::Length</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00759">_ARBITER_LIST_ENTRY::RequestSource</a>, <a class="el" href="../../d3/d4/range_8c-source.html#l01954">RtlFindRange()</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00227">_ARBITER_ALLOCATION_STATE::Start</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00349">IopPortInitialize()</a>.
<p>
<pre class="fragment"><div>00965                    :
00966 
00967     This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called from AllocateEntry once we have decided where we want
00968     to allocate from.  It tries to find a free range that matches <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00969     requirements in State <span class="keywordflow">while</span> restricting its possible solutions to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> range
00970     State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o0">Start</a> to State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o3">CurrentMaximum</a>.  On success State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o0">Start</a> and
00971     State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o1">End</a> represent <span class="keyword">this</span> range.  Conflicts with ISA aliases are considered.
00972 
00973 Arguments:
00974 
00975     Arbiter - The instance data of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> arbiter who was called.
00976 
00977     State - The state of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current arbitration.
00978 
00979 Return Value:
00980 
00981     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> we found a range, <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> otherwise.
00982 
00983 --*/
00984 {
00985     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
00986     UCHAR userFlagsMask = 0;
00987 
00988     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00989 
00990     <span class="comment">//</span>
00991     <span class="comment">// If we are asking for zero ports then trivially succeed with the minimum</span>
00992     <span class="comment">// value</span>
00993     <span class="comment">//</span>
00994 
00995     <span class="keywordflow">if</span> (State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o5">CurrentAlternative</a>-&gt;<a class="code" href="../../d6/d7/struct__ARBITER__ALTERNATIVE.html#o2">Length</a> == 0) {
00996         State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o1">End</a> = State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o0">Start</a>;
00997         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00998     }
00999 
01000     <span class="comment">//</span>
01001     <span class="comment">// For legacy requests from IoAssignResources (directly or by way of</span>
01002     <span class="comment">// HalAssignSlotResources) or IoReportResourceUsage we consider preallocated</span>
01003     <span class="comment">// resources to be available for backward compatibility reasons.</span>
01004     <span class="comment">//</span>
01005     <span class="comment">// If we are allocating a devices boot config then we consider all other</span>
01006     <span class="comment">// boot configs to be available.</span>
01007     <span class="comment">//</span>
01008 
01009     <span class="keywordflow">if</span> (State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o4">Entry</a>-&gt;<a class="code" href="../../d0/d8/struct__ARBITER__LIST__ENTRY.html#o4">RequestSource</a> == <a class="code" href="../../d6/d9/pnp_8h.html#a174a126">ArbiterRequestLegacyReported</a>
01010         || State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o4">Entry</a>-&gt;<a class="code" href="../../d0/d8/struct__ARBITER__LIST__ENTRY.html#o4">RequestSource</a> == <a class="code" href="../../d6/d9/pnp_8h.html#a174a128">ArbiterRequestLegacyAssigned</a>
01011         || State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o4">Entry</a>-&gt;<a class="code" href="../../d0/d8/struct__ARBITER__LIST__ENTRY.html#o5">Flags</a> &amp; <a class="code" href="../../d6/d9/pnp_8h.html#a8">ARBITER_FLAG_BOOT_CONFIG</a>) {
01012 
01013         userFlagsMask = <a class="code" href="../../d9/d8/arbiter_8h.html#a13">ARBITER_RANGE_BOOT_ALLOCATED</a>;
01014     }
01015 
01016     <span class="comment">//</span>
01017     <span class="comment">// Try to satisfy the request</span>
01018     <span class="comment">//</span>
01019 
01020     <span class="keywordflow">while</span> (State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o2">CurrentMinimum</a> &lt;= State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o3">CurrentMaximum</a>) {
01021 
01022         <span class="comment">//</span>
01023         <span class="comment">// Select the first free alternative from the current alternative</span>
01024         <span class="comment">//</span>
01025 
01026         status = <a class="code" href="../../d2/d5/range_8c.html#a22">RtlFindRange</a>(
01027                      Arbiter-&gt;PossibleAllocation,
01028                      State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o2">CurrentMinimum</a>,
01029                      State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o3">CurrentMaximum</a>,
01030                      State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o5">CurrentAlternative</a>-&gt;<a class="code" href="../../d6/d7/struct__ARBITER__ALTERNATIVE.html#o2">Length</a>,
01031                      State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o5">CurrentAlternative</a>-&gt;<a class="code" href="../../d6/d7/struct__ARBITER__ALTERNATIVE.html#o3">Alignment</a>,
01032                      State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o5">CurrentAlternative</a>-&gt;<a class="code" href="../../d6/d7/struct__ARBITER__ALTERNATIVE.html#o5">Flags</a> &amp;
01033                         ARBITER_ALTERNATIVE_FLAG_SHARED ?
01034                             RTL_RANGE_LIST_SHARED_OK : 0,
01035                      userFlagsMask,
01036                      Arbiter-&gt;ConflictCallbackContext,
01037                      Arbiter-&gt;ConflictCallback,
01038                      &amp;State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o0">Start</a>
01039                      );
01040 
01041 
01042         <span class="comment">//</span>
01043         <span class="comment">// Did we find a range and if not can we override any conflict</span>
01044         <span class="comment">//</span>
01045         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)
01046         || Arbiter-&gt;OverrideConflict(Arbiter, State)) {
01047 
01048             State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o1">End</a> = State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o0">Start</a> + State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o5">CurrentAlternative</a>-&gt;<a class="code" href="../../d6/d7/struct__ARBITER__ALTERNATIVE.html#o2">Length</a> - 1;
01049 
01050             <span class="comment">//</span>
01051             <span class="comment">// Check if the aliases are available</span>
01052             <span class="comment">//</span>
01053             <span class="keywordflow">if</span> (<a class="code" href="../../d3/d1/pnpmemio_8c.html#a26">IopPortIsAliasedRangeAvailable</a>(Arbiter, State)) {
01054 
01055                 <span class="comment">//</span>
01056                 <span class="comment">// We found a suitable range so return</span>
01057                 <span class="comment">//</span>
01058 
01059                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01060 
01061             } <span class="keywordflow">else</span> {
01062 
01063                 <span class="comment">//</span>
01064                 <span class="comment">// This range's aliases arn't available so try the next range</span>
01065                 <span class="comment">//</span>
01066 
01067                 State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o0">Start</a> += State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o5">CurrentAlternative</a>-&gt;<a class="code" href="../../d6/d7/struct__ARBITER__ALTERNATIVE.html#o2">Length</a>;
01068 
01069                 <span class="keywordflow">continue</span>;
01070             }
01071         } <span class="keywordflow">else</span> {
01072 
01073             <span class="comment">//</span>
01074             <span class="comment">// We couldn't find a base range</span>
01075             <span class="comment">//</span>
01076 
01077             <span class="keywordflow">break</span>;
01078         }
01079     }
01080 
01081     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01082 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="pnpmemio.c::IopPortGetNextAlias" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN IopPortGetNextAlias           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>IoDescriptorFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONGLONG&nbsp;</td>
          <td class="mdname" nowrap> <em>LastAlias</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PULONGLONG&nbsp;</td>
          <td class="mdname" nowrap> <em>NextAlias</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l01087">1087</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00031">MAX_ALIAS_PORT</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l01146">IopPortAddAllocation()</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00890">IopPortBacktrackAllocation()</a>, and <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l01227">IopPortIsAliasedRangeAvailable()</a>.
<p>
<pre class="fragment"><div>01094                    :
01095 
01096     This routine calculates <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> next alias of an IO port up to <a class="code" href="../../d3/d1/pnpmemio_8c.html#a2">MAX_ALIAS_PORT</a>.
01097 
01098 Arguments:
01099 
01100     IoDescriptorFlags - The flags from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> requirement descriptor indicating <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
01101         <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> of alias <span class="keywordflow">if</span> any.
01102 
01103     LastAlias - The alias previous to <span class="keyword">this</span> one.
01104 
01105     NextAlias - <a class="code" href="../../d7/d5/structPoint.html">Point</a> to where <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> next alias should be returned
01106 
01107 Return Value:
01108 
01109     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> we found an alias, <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> otherwise.
01110 
01111 --*/
01112 
01113 {
01114     ULONGLONG next;
01115 
01116     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
01117 
01118     <span class="keywordflow">if</span> (IoDescriptorFlags &amp; CM_RESOURCE_PORT_10_BIT_DECODE) {
01119         next = LastAlias + (1 &lt;&lt; 10);
01120     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IoDescriptorFlags &amp; CM_RESOURCE_PORT_12_BIT_DECODE) {
01121         next = LastAlias + (1 &lt;&lt; 12);
01122     } <span class="keywordflow">else</span> {
01123 
01124         <span class="comment">// BUGBUG - should CM_RESOURCE_PORT_16_BIT_DECODE be set?</span>
01125         <span class="comment">//</span>
01126         <span class="comment">// There are no aliases</span>
01127         <span class="comment">//</span>
01128 
01129         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01130     }
01131 
01132     <span class="comment">//</span>
01133     <span class="comment">// Check that we are below the maximum aliased port</span>
01134     <span class="comment">//</span>
01135 
01136     <span class="keywordflow">if</span> (next &gt; <a class="code" href="../../d3/d1/pnpmemio_8c.html#a2">MAX_ALIAS_PORT</a>) {
01137         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01138     } <span class="keywordflow">else</span> {
01139         *NextAlias = next;
01140         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01141     }
01142 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="pnpmemio.c::IopPortInitialize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IopPortInitialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00349">349</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
References <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00549">_ARBITER_INSTANCE::AddAllocation</a>, <a class="el" href="../../d9/d7/arbiter_8c-source.html#l00192">ArbInitializeArbiterInstance()</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00550">_ARBITER_INSTANCE::BacktrackAllocation</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00548">_ARBITER_INSTANCE::FindSuitableRange</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00630">IopGenericPackResource()</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00542">IopGenericScoreRequirement()</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00263">IopGenericTranslateOrdering()</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00463">IopGenericUnpackRequirement()</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00682">IopGenericUnpackResource()</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l01146">IopPortAddAllocation()</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00890">IopPortBacktrackAllocation()</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00959">IopPortFindSuitableRange()</a>, <a class="el" href="../../d2/d9/pnpdata_8c-source.html#l00204">IopRootPortArbiter</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00525">_ARBITER_INSTANCE::PackResource</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00527">_ARBITER_INSTANCE::ScoreRequirement</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00524">_ARBITER_INSTANCE::UnpackRequirement</a>, and <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00526">_ARBITER_INSTANCE::UnpackResource</a>.
<p>
Referenced by <a class="el" href="../../d8/d9/pnpinit_8c-source.html#l00093">IopInitializePlugPlayServices()</a>.
<p>
<pre class="fragment"><div>00355                    :
00356 
00357     This routine initializes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> arbiter
00358 
00359 Parameters:
00360 
00361     None
00362 
00363 Return Value:
00364 
00365     None
00366 
00367 --*/
00368 
00369 {
00370     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00371 
00372     <span class="comment">//</span>
00373     <span class="comment">// Fill in the non-default action handlers</span>
00374     <span class="comment">//</span>
00375 
00376     <a class="code" href="../../d1/d0/pnpdata_8c.html#a30">IopRootPortArbiter</a>.<a class="code" href="../../d8/d7/struct__ARBITER__INSTANCE.html#o28">FindSuitableRange</a>    = <a class="code" href="../../d3/d1/pnpmemio_8c.html#a14">IopPortFindSuitableRange</a>;
00377     <a class="code" href="../../d1/d0/pnpdata_8c.html#a30">IopRootPortArbiter</a>.<a class="code" href="../../d8/d7/struct__ARBITER__INSTANCE.html#o29">AddAllocation</a>        = <a class="code" href="../../d3/d1/pnpmemio_8c.html#a22">IopPortAddAllocation</a>;
00378     <a class="code" href="../../d1/d0/pnpdata_8c.html#a30">IopRootPortArbiter</a>.<a class="code" href="../../d8/d7/struct__ARBITER__INSTANCE.html#o30">BacktrackAllocation</a>  = <a class="code" href="../../d3/d1/pnpmemio_8c.html#a12">IopPortBacktrackAllocation</a>;
00379 
00380     <a class="code" href="../../d1/d0/pnpdata_8c.html#a30">IopRootPortArbiter</a>.<a class="code" href="../../d8/d7/struct__ARBITER__INSTANCE.html#o12">UnpackRequirement</a>    = <a class="code" href="../../d3/d1/pnpmemio_8c.html#a16">IopGenericUnpackRequirement</a>;
00381     <a class="code" href="../../d1/d0/pnpdata_8c.html#a30">IopRootPortArbiter</a>.<a class="code" href="../../d8/d7/struct__ARBITER__INSTANCE.html#o13">PackResource</a>         = <a class="code" href="../../d3/d1/pnpmemio_8c.html#a17">IopGenericPackResource</a>;
00382     <a class="code" href="../../d1/d0/pnpdata_8c.html#a30">IopRootPortArbiter</a>.<a class="code" href="../../d8/d7/struct__ARBITER__INSTANCE.html#o14">UnpackResource</a>       = <a class="code" href="../../d3/d1/pnpmemio_8c.html#a19">IopGenericUnpackResource</a>;
00383     <a class="code" href="../../d1/d0/pnpdata_8c.html#a30">IopRootPortArbiter</a>.<a class="code" href="../../d8/d7/struct__ARBITER__INSTANCE.html#o15">ScoreRequirement</a>     = <a class="code" href="../../d3/d1/pnpmemio_8c.html#a18">IopGenericScoreRequirement</a>;
00384 
00385     <span class="keywordflow">return</span> <a class="code" href="../../d9/d8/arbiter_8h.html#a67">ArbInitializeArbiterInstance</a>(&amp;IopRootPortArbiter,
00386                                         NULL,     <span class="comment">// Indicates ROOT arbiter</span>
00387                                         CmResourceTypePort,
00388                                         L<span class="stringliteral">"RootPort"</span>,
00389                                         L<span class="stringliteral">"Root"</span>,
00390                                         IopGenericTranslateOrdering
00391                                         );
00392 
00393 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="pnpmemio.c::IopPortIsAliasedRangeAvailable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN IopPortIsAliasedRangeAvailable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d8/arbiter_8h.html#a39">PARBITER_INSTANCE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Arbiter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html">PARBITER_ALLOCATION_STATE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>State</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l01227">1227</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
References <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00052">ARB_PRINT</a>, <a class="el" href="../../d9/d8/arbiter_8h.html#a37">ARBITER_ALLOCATION_STATE</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00150">ARBITER_ALTERNATIVE_FLAG_SHARED</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00440">ARBITER_RANGE_BOOT_ALLOCATED</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a174a128">ArbiterRequestLegacyAssigned</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a174a126">ArbiterRequestLegacyReported</a>, <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00250">_ARBITER_ALLOCATION_STATE::CurrentAlternative</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00240">_ARBITER_ALLOCATION_STATE::CurrentMaximum</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00239">_ARBITER_ALLOCATION_STATE::CurrentMinimum</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00203">_ARBITER_ALTERNATIVE::Descriptor</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00245">_ARBITER_ALLOCATION_STATE::Entry</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00198">_ARBITER_ALTERNATIVE::Flags</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l01087">IopPortGetNextAlias()</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00178">_ARBITER_ALTERNATIVE::Length</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00759">_ARBITER_LIST_ENTRY::RequestSource</a>, <a class="el" href="../../d3/d4/range_8c-source.html#l01744">RtlIsRangeAvailable()</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00227">_ARBITER_ALLOCATION_STATE::Start</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00959">IopPortFindSuitableRange()</a>.
<p>
<pre class="fragment"><div>01234                    :
01235 
01236     This routine determines <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> range (Start-(Length-1)) <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available taking
01237     into account any aliases.
01238 
01239 Arguments:
01240 
01241     Arbiter - The instance data of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> arbiter who was called.
01242 
01243     State - The state of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current arbitration.
01244 
01245 Return Value:
01246 
01247     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> range <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available, <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> otherwise.
01248 
01249 --*/
01250 
01251 {
01252     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
01253     ULONGLONG alias = State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o0">Start</a>;
01254     BOOLEAN aliasAvailable;
01255     UCHAR userFlagsMask = 0;
01256 
01257     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
01258 
01259 <span class="preprocessor">#if defined(BUGFEST_HACKS)</span>
01260 <span class="preprocessor"></span>    <span class="comment">//</span>
01261     <span class="comment">// For the purposes of the Bug^H^H^HPlugFest don't mind is aliases conflict</span>
01262     <span class="comment">// with any devices but still add them...</span>
01263     <span class="comment">//</span>
01264     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01265 <span class="preprocessor">#endif</span>
01266 <span class="preprocessor"></span>
01267     <span class="comment">//</span>
01268     <span class="comment">// For legacy requests from IoAssignResources (directly or by way of</span>
01269     <span class="comment">// HalAssignSlotResources) or IoReportResourceUsage we consider preallocated</span>
01270     <span class="comment">// resources to be available for backward compatibility reasons.</span>
01271     <span class="comment">//</span>
01272     <span class="keywordflow">if</span> (State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o4">Entry</a>-&gt;<a class="code" href="../../d0/d8/struct__ARBITER__LIST__ENTRY.html#o4">RequestSource</a> == <a class="code" href="../../d6/d9/pnp_8h.html#a174a126">ArbiterRequestLegacyReported</a>
01273         || State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o4">Entry</a>-&gt;<a class="code" href="../../d0/d8/struct__ARBITER__LIST__ENTRY.html#o4">RequestSource</a> == <a class="code" href="../../d6/d9/pnp_8h.html#a174a128">ArbiterRequestLegacyAssigned</a>) {
01274 
01275         userFlagsMask |= <a class="code" href="../../d9/d8/arbiter_8h.html#a13">ARBITER_RANGE_BOOT_ALLOCATED</a>;
01276     }
01277 
01278     <span class="keywordflow">while</span> (<a class="code" href="../../d3/d1/pnpmemio_8c.html#a13">IopPortGetNextAlias</a>(State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o5">CurrentAlternative</a>-&gt;<a class="code" href="../../d6/d7/struct__ARBITER__ALTERNATIVE.html#o6">Descriptor</a>-&gt;Flags,
01279                              alias,
01280                              &amp;alias)) {
01281 
01282         status = <a class="code" href="../../d2/d5/range_8c.html#a21">RtlIsRangeAvailable</a>(
01283                      Arbiter-&gt;PossibleAllocation,
01284                      alias,
01285                      alias + State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o5">CurrentAlternative</a>-&gt;<a class="code" href="../../d6/d7/struct__ARBITER__ALTERNATIVE.html#o2">Length</a> - 1,
01286                      State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o5">CurrentAlternative</a>-&gt;<a class="code" href="../../d6/d7/struct__ARBITER__ALTERNATIVE.html#o5">Flags</a> &amp; ARBITER_ALTERNATIVE_FLAG_SHARED ?
01287                         RTL_RANGE_LIST_SHARED_OK : 0,
01288                      userFlagsMask,
01289                      Arbiter-&gt;ConflictCallbackContext,
01290                      Arbiter-&gt;ConflictCallback,
01291                      &amp;aliasAvailable
01292                      );
01293 
01294         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status));
01295 
01296         <span class="keywordflow">if</span> (!aliasAvailable) {
01297 
01298             <a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html">ARBITER_ALLOCATION_STATE</a> tempState;
01299 
01300             <span class="comment">//</span>
01301             <span class="comment">// Check if we allow this conflict by calling OverrideConflict -</span>
01302             <span class="comment">// we will need to falsify ourselves an allocation state first</span>
01303             <span class="comment">//</span>
01304             <span class="comment">// BUGBUG - this works but relies on knowing what OverrideConflict</span>
01305             <span class="comment">// looks at.  A better fix invloves storing the aliases in another</span>
01306             <span class="comment">// list but this it too much of a change for Win2k</span>
01307             <span class="comment">//</span>
01308 
01309             RtlCopyMemory(&amp;tempState, State, <span class="keyword">sizeof</span>(<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html">ARBITER_ALLOCATION_STATE</a>));
01310 
01311             tempState.<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o2">CurrentMinimum</a> = alias;
01312             tempState.<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o3">CurrentMaximum</a> = alias + State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o5">CurrentAlternative</a>-&gt;<a class="code" href="../../d6/d7/struct__ARBITER__ALTERNATIVE.html#o2">Length</a> - 1;
01313 
01314             <span class="keywordflow">if</span> (Arbiter-&gt;OverrideConflict(Arbiter, &amp;tempState)) {
01315                 <span class="comment">//</span>
01316                 <span class="comment">// We decided this conflict was ok so contine checking the rest</span>
01317                 <span class="comment">// of the aliases</span>
01318                 <span class="comment">//</span>
01319 
01320                 <span class="keywordflow">continue</span>;
01321 
01322             }
01323 
01324             <span class="comment">//</span>
01325             <span class="comment">// An alias isn't available - get another possibility</span>
01326             <span class="comment">//</span>
01327 
01328             <a class="code" href="../../d9/d8/arbiter_8h.html#a1">ARB_PRINT</a>(2,
01329                         (<span class="stringliteral">"\t\tAlias 0x%x-0x%x not available\n"</span>,
01330                         alias,
01331                         alias + State-&gt;<a class="code" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html#o5">CurrentAlternative</a>-&gt;<a class="code" href="../../d6/d7/struct__ARBITER__ALTERNATIVE.html#o2">Length</a> - 1
01332                         ));
01333 
01334             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01335         }
01336     }
01337 
01338     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01339 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="pnpmemio.c::IopPortIsAliasedRangeAvailable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN IopPortIsAliasedRangeAvailable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d9/d8/arbiter_8h.html#a39">PARBITER_INSTANCE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Arbiter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d5/d7/struct__ARBITER__ALLOCATION__STATE.html">PARBITER_ALLOCATION_STATE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>State</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="pnpmemio.c::IopTranslateBusAddress" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS IopTranslateBusAddress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PHYSICAL_ADDRESS&nbsp;</td>
          <td class="mdname" nowrap> <em>SourceAddress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>SourceResourceType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PPHYSICAL_ADDRESS&nbsp;</td>
          <td class="mdname" nowrap> <em>TargetAddress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>TargetResourceType</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00155">155</a> of file <a class="el" href="../../d4/d0/pnpmemio_8c-source.html">pnpmemio.c</a>.
<p>
References <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00151">ADDRESS_SPACE_DENSE_MEMORY</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00147">ADDRESS_SPACE_MEMORY</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00148">ADDRESS_SPACE_PORT</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00152">ADDRESS_SPACE_USER_DENSE_MEMORY</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00149">ADDRESS_SPACE_USER_MEMORY</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00150">ADDRESS_SPACE_USER_PORT</a>, <a class="el" href="../../d0/d8/arbiter_8h-source.html#l00052">ARB_PRINT</a>, <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d2/d7/hal_8h.html#a184">HalTranslateBusAddress()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, and <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00263">IopGenericTranslateOrdering()</a>.
<p>
<pre class="fragment"><div>00163                    :
00164 
00165     This routine translates addresses.
00166 
00167 Parameters:
00168 
00169     SourceAddress - The address to translate
00170 
00171     ResourceType - The resource <a class="code" href="../../d4/d4/iafptrap_8c.html#a9">type</a> (IO or Memory) we are translaing.  If <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00172         address space changes from IO-&gt;Memory <span class="keyword">this</span> will be updated.
00173 
00174     TargetAddress - Pointer to where <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> target should be translated to.
00175 
00176 Return Value:
00177 
00178     STATUS_SUCCESS or an error status
00179 
00180 --*/
00181 
00182 {
00183     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status = STATUS_UNSUCCESSFUL;
00184     ULONG sourceAddressSpace, targetAddressSpace;
00185     BOOLEAN translated;
00186 
00187     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00188 
00189     <span class="comment">//</span>
00190     <span class="comment">// Select the appropriate address space</span>
00191     <span class="comment">//</span>
00192 
00193     <span class="keywordflow">if</span> (SourceResourceType == CmResourceTypeMemory) {
00194         sourceAddressSpace = <a class="code" href="../../d3/d1/pnpmemio_8c.html#a3">ADDRESS_SPACE_MEMORY</a>;
00195     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (SourceResourceType == CmResourceTypePort) {
00196         sourceAddressSpace = <a class="code" href="../../d3/d1/pnpmemio_8c.html#a4">ADDRESS_SPACE_PORT</a>;
00197     } <span class="keywordflow">else</span> {
00198         <span class="keywordflow">return</span> STATUS_INVALID_PARAMETER;
00199     }
00200 
00201     <a class="code" href="../../d9/d8/arbiter_8h.html#a1">ARB_PRINT</a>(
00202         2,
00203         (<span class="stringliteral">"Translating %s address 0x%I64x =&gt; "</span>,
00204         SourceResourceType == CmResourceTypeMemory ? <span class="stringliteral">"Memory"</span> : <span class="stringliteral">"I/O"</span>,
00205         SourceAddress.QuadPart
00206        ));
00207 
00208     <span class="comment">//</span>
00209     <span class="comment">// HACKHACK Ask the HAL to translate on ISA bus - if we can't then just</span>
00210     <span class="comment">// don't translate because this must be a PCI system so the root arbiters</span>
00211     <span class="comment">// don't do much (Yes it's a steaming hack but it'll work for beta 1)</span>
00212     <span class="comment">//</span>
00213 
00214     targetAddressSpace = sourceAddressSpace;
00215     translated = <a class="code" href="../../d2/d7/hal_8h.html#a184">HalTranslateBusAddress</a>(
00216                      Isa,
00217                      0,
00218                      SourceAddress,
00219                      &amp;targetAddressSpace,
00220                      TargetAddress
00221                      );
00222 
00223     <span class="keywordflow">if</span> (!translated) {
00224         <a class="code" href="../../d9/d8/arbiter_8h.html#a1">ARB_PRINT</a>(2,(<span class="stringliteral">"Translation failed!\n"</span>));
00225         <span class="keywordflow">return</span> STATUS_UNSUCCESSFUL;
00226     }
00227 
00228     <span class="comment">//</span>
00229     <span class="comment">// Update the resource type in the target if we have gone from Io to Memory</span>
00230     <span class="comment">//</span>
00231 
00232 
00233     <span class="comment">//</span>
00234     <span class="comment">// BUBBUG - update the length for IO -&gt; Memory (Dense vs Sparse)</span>
00235     <span class="comment">// I think the answer is dense -&gt; spares is multiply length by 32</span>
00236     <span class="comment">//</span>
00237 
00238     <span class="keywordflow">if</span> (targetAddressSpace == <a class="code" href="../../d3/d1/pnpmemio_8c.html#a3">ADDRESS_SPACE_MEMORY</a>
00239     ||  targetAddressSpace == <a class="code" href="../../d3/d1/pnpmemio_8c.html#a5">ADDRESS_SPACE_USER_MEMORY</a>
00240     ||  targetAddressSpace == <a class="code" href="../../d3/d1/pnpmemio_8c.html#a7">ADDRESS_SPACE_DENSE_MEMORY</a>
00241     ||  targetAddressSpace == <a class="code" href="../../d3/d1/pnpmemio_8c.html#a8">ADDRESS_SPACE_USER_DENSE_MEMORY</a>) {
00242         *TargetResourceType = CmResourceTypeMemory;
00243     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (targetAddressSpace == <a class="code" href="../../d3/d1/pnpmemio_8c.html#a4">ADDRESS_SPACE_PORT</a>
00244            ||  targetAddressSpace == <a class="code" href="../../d3/d1/pnpmemio_8c.html#a6">ADDRESS_SPACE_USER_PORT</a>) {
00245         *TargetResourceType = CmResourceTypePort;
00246     } <span class="keywordflow">else</span> {
00247         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(0 &amp;&amp; <span class="stringliteral">"Translation has returned an unknown address space"</span>);
00248     }
00249 
00250     <a class="code" href="../../d9/d8/arbiter_8h.html#a1">ARB_PRINT</a>(
00251         2,
00252         (<span class="stringliteral">"%s address 0x%I64x\n"</span>,
00253         *TargetResourceType == CmResourceTypeMemory ? <span class="stringliteral">"Memory"</span> : <span class="stringliteral">"I/O"</span>,
00254         TargetAddress-&gt;QuadPart
00255         ));
00256 
00257     <span class="keywordflow">return</span> STATUS_SUCCESS;
00258 
00259 }

</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:14 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

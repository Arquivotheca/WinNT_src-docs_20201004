<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: mm.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>mm.h</h1><a href="../../d2/d1/mm_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*-- BUILD Version: 0005    // Increment this if a change has global effects</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1989  Microsoft Corporation</span>
00004 <span class="comment"></span>
00005 <span class="comment">Module Name:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    mm.h</span>
00008 <span class="comment"></span>
00009 <span class="comment">Abstract:</span>
00010 <span class="comment"></span>
00011 <span class="comment">    This module contains the public data structures and procedure</span>
00012 <span class="comment">    prototypes for the memory management system.</span>
00013 <span class="comment"></span>
00014 <span class="comment">Author:</span>
00015 <span class="comment"></span>
00016 <span class="comment">    Lou Perazzoli (loup) 20-Mar-1989</span>
00017 <span class="comment"></span>
00018 <span class="comment">Revision History:</span>
00019 <span class="comment"></span>
00020 <span class="comment">--*/</span>
00021 
00022 <span class="preprocessor">#ifndef _MM_</span>
00023 <span class="preprocessor"></span><span class="preprocessor">#define _MM_</span>
00024 <span class="preprocessor"></span>
00025 <span class="comment">//</span>
00026 <span class="comment">// Virtual bias applied when the kernel image was loaded.</span>
00027 <span class="comment">//</span>
00028 
<a name="l00029"></a><a class="code" href="../../d2/d1/mm_8h.html#a126">00029</a> <span class="keyword">extern</span> ULONG_PTR <a class="code" href="../../d2/d1/mm_8h.html#a126">MmVirtualBias</a>;
00030 
<a name="l00031"></a><a class="code" href="../../d2/d1/mm_8h.html#a0">00031</a> <span class="preprocessor">#define MAX_PHYSICAL_MEMORY_FRAGMENTS 20</span>
00032 <span class="preprocessor"></span>
<a name="l00033"></a><a class="code" href="../../d5/d5/struct__PHYSICAL__MEMORY__RUN.html">00033</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d5/d5/struct__PHYSICAL__MEMORY__RUN.html">_PHYSICAL_MEMORY_RUN</a> {
<a name="l00034"></a><a class="code" href="../../d5/d5/struct__PHYSICAL__MEMORY__RUN.html#o0">00034</a>     PFN_NUMBER <a class="code" href="../../d5/d5/struct__PHYSICAL__MEMORY__RUN.html#o0">BasePage</a>;
<a name="l00035"></a><a class="code" href="../../d5/d5/struct__PHYSICAL__MEMORY__RUN.html#o1">00035</a>     PFN_NUMBER <a class="code" href="../../d5/d5/struct__PHYSICAL__MEMORY__RUN.html#o1">PageCount</a>;
00036 } <a class="code" href="../../d5/d5/struct__PHYSICAL__MEMORY__RUN.html">PHYSICAL_MEMORY_RUN</a>, *<a class="code" href="../../d5/d5/struct__PHYSICAL__MEMORY__RUN.html">PPHYSICAL_MEMORY_RUN</a>;
00037 
<a name="l00038"></a><a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html">00038</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html">_PHYSICAL_MEMORY_DESCRIPTOR</a> {
<a name="l00039"></a><a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html#o0">00039</a>     ULONG <a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html#o0">NumberOfRuns</a>;
<a name="l00040"></a><a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html#o1">00040</a>     PFN_NUMBER <a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html#o1">NumberOfPages</a>;
<a name="l00041"></a><a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html#o2">00041</a>     <a class="code" href="../../d5/d5/struct__PHYSICAL__MEMORY__RUN.html">PHYSICAL_MEMORY_RUN</a> <a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html#o2">Run</a>[1];
00042 } <a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html">PHYSICAL_MEMORY_DESCRIPTOR</a>, *<a class="code" href="../../d3/d5/struct__PHYSICAL__MEMORY__DESCRIPTOR.html">PPHYSICAL_MEMORY_DESCRIPTOR</a>;
00043 
00044 <span class="comment">//</span>
00045 <span class="comment">// Physical memory blocks.</span>
00046 <span class="comment">//</span>
00047 
<a name="l00048"></a><a class="code" href="../../d2/d1/mm_8h.html#a131">00048</a> <span class="keyword">extern</span> <a class="code" href="../../d2/d1/mm_8h.html#a130">PPHYSICAL_MEMORY_DESCRIPTOR</a> <a class="code" href="../../d2/d1/mm_8h.html#a131">MmPhysicalMemoryBlock</a>;
00049 
00050 <span class="comment">//</span>
00051 <span class="comment">// The allocation granularity is 64k.</span>
00052 <span class="comment">//</span>
00053 
<a name="l00054"></a><a class="code" href="../../d2/d1/mm_8h.html#a1">00054</a> <span class="preprocessor">#define MM_ALLOCATION_GRANULARITY ((ULONG)0x10000)</span>
00055 <span class="preprocessor"></span>
00056 <span class="comment">//</span>
00057 <span class="comment">// Maximum read ahead size for cache operations.</span>
00058 <span class="comment">//</span>
00059 
<a name="l00060"></a><a class="code" href="../../d2/d1/mm_8h.html#a2">00060</a> <span class="preprocessor">#define MM_MAXIMUM_READ_CLUSTER_SIZE (15)</span>
00061 <span class="preprocessor"></span>
00062 <span class="preprocessor">#if defined(_NTDRIVER_) || defined(_NTDDK_) || defined(_NTIFS_) || defined(_NTHAL_)</span>
00063 <span class="preprocessor"></span>
00064 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
00065 <span class="comment">//</span>
00066 <span class="comment">//  Indicates the system may do I/O to physical addresses above 4 GB.</span>
00067 <span class="comment">//</span>
00068 
00069 <span class="keyword">extern</span> PBOOLEAN <a class="code" href="../../d2/d1/mm_8h.html#a132">Mm64BitPhysicalAddress</a>;
00070 
00071 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
00072 
00073 <span class="preprocessor">#else</span>
00074 <span class="preprocessor"></span>
00075 <span class="comment">//</span>
00076 <span class="comment">//  Indicates the system may do I/O to physical addresses above 4 GB.</span>
00077 <span class="comment">//</span>
00078 
<a name="l00079"></a><a class="code" href="../../d2/d1/mm_8h.html#a132">00079</a> <span class="keyword">extern</span> BOOLEAN <a class="code" href="../../d2/d1/mm_8h.html#a132">Mm64BitPhysicalAddress</a>;
00080 
00081 <span class="preprocessor">#endif</span>
00082 <span class="preprocessor"></span>
00083 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
00084 
00085 <span class="comment">//</span>
00086 <span class="comment">// Define maximum disk transfer size to be used by MM and Cache Manager,</span>
00087 <span class="comment">// so that packet-oriented disk drivers can optimize their packet allocation</span>
00088 <span class="comment">// to this size.</span>
00089 <span class="comment">//</span>
00090 
<a name="l00091"></a><a class="code" href="../../d2/d1/mm_8h.html#a3">00091</a> <span class="preprocessor">#define MM_MAXIMUM_DISK_IO_SIZE          (0x10000)</span>
00092 <span class="preprocessor"></span>
00093 <span class="comment">//++</span>
00094 <span class="comment">//</span>
00095 <span class="comment">// ULONG_PTR</span>
00096 <span class="comment">// ROUND_TO_PAGES (</span>
00097 <span class="comment">//     IN ULONG_PTR Size</span>
00098 <span class="comment">//     )</span>
00099 <span class="comment">//</span>
00100 <span class="comment">// Routine Description:</span>
00101 <span class="comment">//</span>
00102 <span class="comment">//     The ROUND_TO_PAGES macro takes a size in bytes and rounds it up to a</span>
00103 <span class="comment">//     multiple of the page size.</span>
00104 <span class="comment">//</span>
00105 <span class="comment">//     NOTE: This macro fails for values 0xFFFFFFFF - (PAGE_SIZE - 1).</span>
00106 <span class="comment">//</span>
00107 <span class="comment">// Arguments:</span>
00108 <span class="comment">//</span>
00109 <span class="comment">//     Size - Size in bytes to round up to a page multiple.</span>
00110 <span class="comment">//</span>
00111 <span class="comment">// Return Value:</span>
00112 <span class="comment">//</span>
00113 <span class="comment">//     Returns the size rounded up to a multiple of the page size.</span>
00114 <span class="comment">//</span>
00115 <span class="comment">//--</span>
00116 
<a name="l00117"></a><a class="code" href="../../d2/d1/mm_8h.html#a4">00117</a> <span class="preprocessor">#define ROUND_TO_PAGES(Size)  (((ULONG_PTR)(Size) + PAGE_SIZE - 1) &amp; ~(PAGE_SIZE - 1))</span>
00118 <span class="preprocessor"></span>
00119 <span class="comment">//++</span>
00120 <span class="comment">//</span>
00121 <span class="comment">// ULONG</span>
00122 <span class="comment">// BYTES_TO_PAGES (</span>
00123 <span class="comment">//     IN ULONG Size</span>
00124 <span class="comment">//     )</span>
00125 <span class="comment">//</span>
00126 <span class="comment">// Routine Description:</span>
00127 <span class="comment">//</span>
00128 <span class="comment">//     The BYTES_TO_PAGES macro takes the size in bytes and calculates the</span>
00129 <span class="comment">//     number of pages required to contain the bytes.</span>
00130 <span class="comment">//</span>
00131 <span class="comment">// Arguments:</span>
00132 <span class="comment">//</span>
00133 <span class="comment">//     Size - Size in bytes.</span>
00134 <span class="comment">//</span>
00135 <span class="comment">// Return Value:</span>
00136 <span class="comment">//</span>
00137 <span class="comment">//     Returns the number of pages required to contain the specified size.</span>
00138 <span class="comment">//</span>
00139 <span class="comment">//--</span>
00140 
<a name="l00141"></a><a class="code" href="../../d2/d1/mm_8h.html#a5">00141</a> <span class="preprocessor">#define BYTES_TO_PAGES(Size)  ((ULONG)((ULONG_PTR)(Size) &gt;&gt; PAGE_SHIFT) + \</span>
00142 <span class="preprocessor">                               (((ULONG)(Size) &amp; (PAGE_SIZE - 1)) != 0))</span>
00143 <span class="preprocessor"></span>
00144 <span class="comment">//++</span>
00145 <span class="comment">//</span>
00146 <span class="comment">// ULONG</span>
00147 <span class="comment">// BYTE_OFFSET (</span>
00148 <span class="comment">//     IN PVOID Va</span>
00149 <span class="comment">//     )</span>
00150 <span class="comment">//</span>
00151 <span class="comment">// Routine Description:</span>
00152 <span class="comment">//</span>
00153 <span class="comment">//     The BYTE_OFFSET macro takes a virtual address and returns the byte offset</span>
00154 <span class="comment">//     of that address within the page.</span>
00155 <span class="comment">//</span>
00156 <span class="comment">// Arguments:</span>
00157 <span class="comment">//</span>
00158 <span class="comment">//     Va - Virtual address.</span>
00159 <span class="comment">//</span>
00160 <span class="comment">// Return Value:</span>
00161 <span class="comment">//</span>
00162 <span class="comment">//     Returns the byte offset portion of the virtual address.</span>
00163 <span class="comment">//</span>
00164 <span class="comment">//--</span>
00165 
<a name="l00166"></a><a class="code" href="../../d2/d1/mm_8h.html#a6">00166</a> <span class="preprocessor">#define BYTE_OFFSET(Va) ((ULONG)((LONG_PTR)(Va) &amp; (PAGE_SIZE - 1)))</span>
00167 <span class="preprocessor"></span>
00168 <span class="comment">//++</span>
00169 <span class="comment">//</span>
00170 <span class="comment">// PVOID</span>
00171 <span class="comment">// PAGE_ALIGN (</span>
00172 <span class="comment">//     IN PVOID Va</span>
00173 <span class="comment">//     )</span>
00174 <span class="comment">//</span>
00175 <span class="comment">// Routine Description:</span>
00176 <span class="comment">//</span>
00177 <span class="comment">//     The PAGE_ALIGN macro takes a virtual address and returns a page-aligned</span>
00178 <span class="comment">//     virtual address for that page.</span>
00179 <span class="comment">//</span>
00180 <span class="comment">// Arguments:</span>
00181 <span class="comment">//</span>
00182 <span class="comment">//     Va - Virtual address.</span>
00183 <span class="comment">//</span>
00184 <span class="comment">// Return Value:</span>
00185 <span class="comment">//</span>
00186 <span class="comment">//     Returns the page aligned virtual address.</span>
00187 <span class="comment">//</span>
00188 <span class="comment">//--</span>
00189 
<a name="l00190"></a><a class="code" href="../../d2/d1/mm_8h.html#a7">00190</a> <span class="preprocessor">#define PAGE_ALIGN(Va) ((PVOID)((ULONG_PTR)(Va) &amp; ~(PAGE_SIZE - 1)))</span>
00191 <span class="preprocessor"></span>
00192 <span class="comment">//++</span>
00193 <span class="comment">//</span>
00194 <span class="comment">// ULONG</span>
00195 <span class="comment">// ADDRESS_AND_SIZE_TO_SPAN_PAGES (</span>
00196 <span class="comment">//     IN PVOID Va,</span>
00197 <span class="comment">//     IN ULONG Size</span>
00198 <span class="comment">//     )</span>
00199 <span class="comment">//</span>
00200 <span class="comment">// Routine Description:</span>
00201 <span class="comment">//</span>
00202 <span class="comment">//     The ADDRESS_AND_SIZE_TO_SPAN_PAGES macro takes a virtual address and</span>
00203 <span class="comment">//     size and returns the number of pages spanned by the size.</span>
00204 <span class="comment">//</span>
00205 <span class="comment">// Arguments:</span>
00206 <span class="comment">//</span>
00207 <span class="comment">//     Va - Virtual address.</span>
00208 <span class="comment">//</span>
00209 <span class="comment">//     Size - Size in bytes.</span>
00210 <span class="comment">//</span>
00211 <span class="comment">// Return Value:</span>
00212 <span class="comment">//</span>
00213 <span class="comment">//     Returns the number of pages spanned by the size.</span>
00214 <span class="comment">//</span>
00215 <span class="comment">//--</span>
00216 
<a name="l00217"></a><a class="code" href="../../d2/d1/mm_8h.html#a8">00217</a> <span class="preprocessor">#define ADDRESS_AND_SIZE_TO_SPAN_PAGES(Va,Size) \</span>
00218 <span class="preprocessor">   (((((Size) - 1) &gt;&gt; PAGE_SHIFT) + \</span>
00219 <span class="preprocessor">   (((((ULONG)(Size-1)&amp;(PAGE_SIZE-1)) + (PtrToUlong(Va) &amp; (PAGE_SIZE -1)))) &gt;&gt; PAGE_SHIFT)) + 1L)</span>
00220 <span class="preprocessor"></span>
<a name="l00221"></a><a class="code" href="../../d2/d1/mm_8h.html#a9">00221</a> <span class="preprocessor">#define COMPUTE_PAGES_SPANNED(Va, Size) \</span>
00222 <span class="preprocessor">    ((ULONG)((((ULONG_PTR)(Va) &amp; (PAGE_SIZE -1)) + (Size) + (PAGE_SIZE - 1)) &gt;&gt; PAGE_SHIFT))</span>
00223 <span class="preprocessor"></span>
00224 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
00225 
00226 <span class="comment">//++</span>
00227 <span class="comment">//</span>
00228 <span class="comment">// BOOLEAN</span>
00229 <span class="comment">// IS_SYSTEM_ADDRESS</span>
00230 <span class="comment">//     IN PVOID Va,</span>
00231 <span class="comment">//     )</span>
00232 <span class="comment">//</span>
00233 <span class="comment">// Routine Description:</span>
00234 <span class="comment">//</span>
00235 <span class="comment">//     This macro takes a virtual address and returns TRUE if the virtual address</span>
00236 <span class="comment">//     is within system space, FALSE otherwise.</span>
00237 <span class="comment">//</span>
00238 <span class="comment">// Arguments:</span>
00239 <span class="comment">//</span>
00240 <span class="comment">//     Va - Virtual address.</span>
00241 <span class="comment">//</span>
00242 <span class="comment">// Return Value:</span>
00243 <span class="comment">//</span>
00244 <span class="comment">//     Returns TRUE is the address is in system space.</span>
00245 <span class="comment">//</span>
00246 <span class="comment">//--</span>
00247 
<a name="l00248"></a><a class="code" href="../../d2/d1/mm_8h.html#a10">00248</a> <span class="preprocessor">#define IS_SYSTEM_ADDRESS(VA) ((VA) &gt;= MM_SYSTEM_RANGE_START)</span>
00249 <span class="preprocessor"></span>
00250 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
00251 
00252 <span class="comment">//++</span>
00253 <span class="comment">// PPFN_NUMBER</span>
00254 <span class="comment">// MmGetMdlPfnArray (</span>
00255 <span class="comment">//     IN PMDL Mdl</span>
00256 <span class="comment">//     )</span>
00257 <span class="comment">//</span>
00258 <span class="comment">// Routine Description:</span>
00259 <span class="comment">//</span>
00260 <span class="comment">//     The MmGetMdlPfnArray routine returns the virtual address of the</span>
00261 <span class="comment">//     first element of the array of physical page numbers associated with</span>
00262 <span class="comment">//     the MDL.</span>
00263 <span class="comment">//</span>
00264 <span class="comment">// Arguments:</span>
00265 <span class="comment">//</span>
00266 <span class="comment">//     Mdl - Pointer to an MDL.</span>
00267 <span class="comment">//</span>
00268 <span class="comment">// Return Value:</span>
00269 <span class="comment">//</span>
00270 <span class="comment">//     Returns the virtual address of the first element of the array of</span>
00271 <span class="comment">//     physical page numbers associated with the MDL.</span>
00272 <span class="comment">//</span>
00273 <span class="comment">//--</span>
00274 
<a name="l00275"></a><a class="code" href="../../d2/d1/mm_8h.html#a11">00275</a> <span class="preprocessor">#define MmGetMdlPfnArray(Mdl) ((PPFN_NUMBER)(Mdl + 1))</span>
00276 <span class="preprocessor"></span>
00277 <span class="comment">//++</span>
00278 <span class="comment">//</span>
00279 <span class="comment">// PVOID</span>
00280 <span class="comment">// MmGetMdlVirtualAddress (</span>
00281 <span class="comment">//     IN PMDL Mdl</span>
00282 <span class="comment">//     )</span>
00283 <span class="comment">//</span>
00284 <span class="comment">// Routine Description:</span>
00285 <span class="comment">//</span>
00286 <span class="comment">//     The MmGetMdlVirtualAddress returns the virtual address of the buffer</span>
00287 <span class="comment">//     described by the Mdl.</span>
00288 <span class="comment">//</span>
00289 <span class="comment">// Arguments:</span>
00290 <span class="comment">//</span>
00291 <span class="comment">//     Mdl - Pointer to an MDL.</span>
00292 <span class="comment">//</span>
00293 <span class="comment">// Return Value:</span>
00294 <span class="comment">//</span>
00295 <span class="comment">//     Returns the virtual address of the buffer described by the Mdl</span>
00296 <span class="comment">//</span>
00297 <span class="comment">//--</span>
00298 
<a name="l00299"></a><a class="code" href="../../d2/d1/mm_8h.html#a12">00299</a> <span class="preprocessor">#define MmGetMdlVirtualAddress(Mdl)                                     \</span>
00300 <span class="preprocessor">    ((PVOID) ((PCHAR) ((Mdl)-&gt;StartVa) + (Mdl)-&gt;ByteOffset))</span>
00301 <span class="preprocessor"></span>
00302 <span class="comment">//++</span>
00303 <span class="comment">//</span>
00304 <span class="comment">// ULONG</span>
00305 <span class="comment">// MmGetMdlByteCount (</span>
00306 <span class="comment">//     IN PMDL Mdl</span>
00307 <span class="comment">//     )</span>
00308 <span class="comment">//</span>
00309 <span class="comment">// Routine Description:</span>
00310 <span class="comment">//</span>
00311 <span class="comment">//     The MmGetMdlByteCount returns the length in bytes of the buffer</span>
00312 <span class="comment">//     described by the Mdl.</span>
00313 <span class="comment">//</span>
00314 <span class="comment">// Arguments:</span>
00315 <span class="comment">//</span>
00316 <span class="comment">//     Mdl - Pointer to an MDL.</span>
00317 <span class="comment">//</span>
00318 <span class="comment">// Return Value:</span>
00319 <span class="comment">//</span>
00320 <span class="comment">//     Returns the byte count of the buffer described by the Mdl</span>
00321 <span class="comment">//</span>
00322 <span class="comment">//--</span>
00323 
<a name="l00324"></a><a class="code" href="../../d2/d1/mm_8h.html#a13">00324</a> <span class="preprocessor">#define MmGetMdlByteCount(Mdl)  ((Mdl)-&gt;ByteCount)</span>
00325 <span class="preprocessor"></span>
00326 <span class="comment">//++</span>
00327 <span class="comment">//</span>
00328 <span class="comment">// ULONG</span>
00329 <span class="comment">// MmGetMdlByteOffset (</span>
00330 <span class="comment">//     IN PMDL Mdl</span>
00331 <span class="comment">//     )</span>
00332 <span class="comment">//</span>
00333 <span class="comment">// Routine Description:</span>
00334 <span class="comment">//</span>
00335 <span class="comment">//     The MmGetMdlByteOffset returns the byte offset within the page</span>
00336 <span class="comment">//     of the buffer described by the Mdl.</span>
00337 <span class="comment">//</span>
00338 <span class="comment">// Arguments:</span>
00339 <span class="comment">//</span>
00340 <span class="comment">//     Mdl - Pointer to an MDL.</span>
00341 <span class="comment">//</span>
00342 <span class="comment">// Return Value:</span>
00343 <span class="comment">//</span>
00344 <span class="comment">//     Returns the byte offset within the page of the buffer described by the Mdl</span>
00345 <span class="comment">//</span>
00346 <span class="comment">//--</span>
00347 
<a name="l00348"></a><a class="code" href="../../d2/d1/mm_8h.html#a14">00348</a> <span class="preprocessor">#define MmGetMdlByteOffset(Mdl)  ((Mdl)-&gt;ByteOffset)</span>
00349 <span class="preprocessor"></span>
00350 <span class="comment">//++</span>
00351 <span class="comment">//</span>
00352 <span class="comment">// PVOID</span>
00353 <span class="comment">// MmGetMdlStartVa (</span>
00354 <span class="comment">//     IN PMDL Mdl</span>
00355 <span class="comment">//     )</span>
00356 <span class="comment">//</span>
00357 <span class="comment">// Routine Description:</span>
00358 <span class="comment">//</span>
00359 <span class="comment">//     The MmGetMdlBaseVa returns the virtual address of the buffer</span>
00360 <span class="comment">//     described by the Mdl rounded down to the nearest page.</span>
00361 <span class="comment">//</span>
00362 <span class="comment">// Arguments:</span>
00363 <span class="comment">//</span>
00364 <span class="comment">//     Mdl - Pointer to an MDL.</span>
00365 <span class="comment">//</span>
00366 <span class="comment">// Return Value:</span>
00367 <span class="comment">//</span>
00368 <span class="comment">//     Returns the returns the starting virtual address of the MDL.</span>
00369 <span class="comment">//</span>
00370 <span class="comment">//</span>
00371 <span class="comment">//--</span>
00372 
<a name="l00373"></a><a class="code" href="../../d2/d1/mm_8h.html#a15">00373</a> <span class="preprocessor">#define MmGetMdlBaseVa(Mdl)  ((Mdl)-&gt;StartVa)</span>
00374 <span class="preprocessor"></span>
00375 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
00376 
00377 <span class="comment">//</span>
00378 <span class="comment">// Section object type.</span>
00379 <span class="comment">//</span>
00380 
<a name="l00381"></a><a class="code" href="../../d2/d1/mm_8h.html#a133">00381</a> <span class="keyword">extern</span> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d2/d1/mm_8h.html#a133">MmSectionObjectType</a>;
00382 
00383 <span class="comment">//</span>
00384 <span class="comment">// Number of pages to read in a single I/O if possible.</span>
00385 <span class="comment">//</span>
00386 
<a name="l00387"></a><a class="code" href="../../d2/d1/mm_8h.html#a134">00387</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d2/d1/mm_8h.html#a134">MmReadClusterSize</a>;
00388 
00389 <span class="comment">//</span>
00390 <span class="comment">// Number of colors in system.</span>
00391 <span class="comment">//</span>
00392 
<a name="l00393"></a><a class="code" href="../../d2/d1/mm_8h.html#a135">00393</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d2/d1/mm_8h.html#a135">MmNumberOfColors</a>;
00394 
00395 <span class="comment">//</span>
00396 <span class="comment">// Number of physical pages.</span>
00397 <span class="comment">//</span>
00398 
<a name="l00399"></a><a class="code" href="../../d2/d1/mm_8h.html#a136">00399</a> <span class="keyword">extern</span> PFN_COUNT <a class="code" href="../../d2/d1/mm_8h.html#a136">MmNumberOfPhysicalPages</a>;
00400 
00401 
00402 <span class="comment">//</span>
00403 <span class="comment">// Size of system cache in pages.</span>
00404 <span class="comment">//</span>
00405 
<a name="l00406"></a><a class="code" href="../../d2/d1/mm_8h.html#a137">00406</a> <span class="keyword">extern</span> PFN_COUNT <a class="code" href="../../d2/d1/mm_8h.html#a137">MmSizeOfSystemCacheInPages</a>;
00407 
00408 <span class="comment">//</span>
00409 <span class="comment">// System cache working set.</span>
00410 <span class="comment">//</span>
00411 
<a name="l00412"></a><a class="code" href="../../d2/d1/mm_8h.html#a138">00412</a> <span class="keyword">extern</span> <a class="code" href="../../d3/d6/struct__MMSUPPORT.html">MMSUPPORT</a> <a class="code" href="../../d6/d8/sysinfo_8c.html#a21">MmSystemCacheWs</a>;
00413 
00414 <span class="comment">//</span>
00415 <span class="comment">// Working set manager event.</span>
00416 <span class="comment">//</span>
00417 
<a name="l00418"></a><a class="code" href="../../d2/d1/mm_8h.html#a139">00418</a> <span class="keyword">extern</span> <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d2/d1/mm_8h.html#a139">MmWorkingSetManagerEvent</a>;
00419 
00420 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
<a name="l00421"></a><a class="code" href="../../d2/d1/mm_8h.html#a343">00421</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d2/d1/mm_8h.html#a343">_MM_SYSTEM_SIZE</a> {
00422     <a class="code" href="../../d2/d1/mm_8h.html#a343a165">MmSmallSystem</a>,
00423     <a class="code" href="../../d2/d1/mm_8h.html#a343a166">MmMediumSystem</a>,
00424     <a class="code" href="../../d2/d1/mm_8h.html#a343a167">MmLargeSystem</a>
00425 } <a class="code" href="../../d2/d1/mm_8h.html#a140">MM_SYSTEMSIZE</a>;
00426 
00427 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00428 <a class="code" href="../../d2/d1/mm_8h.html#a140">MM_SYSTEMSIZE</a>
00429 <a class="code" href="../../d5/d1/mminit_8c.html#a57">MmQuerySystemSize</a>(
00430     VOID
00431     );
00432 
00433 <span class="comment">//  end_wdm</span>
00434 
00435 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00436 BOOLEAN
00437 <a class="code" href="../../d5/d1/mminit_8c.html#a58">MmIsThisAnNtAsSystem</a>(
00438     VOID
00439     );
00440 
00441 <span class="comment">//  begin_wdm</span>
00442 
<a name="l00443"></a><a class="code" href="../../d2/d1/mm_8h.html#a344">00443</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d2/d1/mm_8h.html#a344">_LOCK_OPERATION</a> {
00444     <a class="code" href="../../d2/d1/mm_8h.html#a344a168">IoReadAccess</a>,
00445     <a class="code" href="../../d2/d1/mm_8h.html#a344a169">IoWriteAccess</a>,
00446     <a class="code" href="../../d2/d1/mm_8h.html#a344a170">IoModifyAccess</a>
00447 } <a class="code" href="../../d2/d1/mm_8h.html#a141">LOCK_OPERATION</a>;
00448 
00449 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
00450 
00451 <span class="comment">//</span>
00452 <span class="comment">// NT product type.</span>
00453 <span class="comment">//</span>
00454 
<a name="l00455"></a><a class="code" href="../../d2/d1/mm_8h.html#a142">00455</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d8/d0/cmdat3_8c.html#a52">MmProductType</a>;
00456 
<a name="l00457"></a><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html">00457</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html">_MMINFO_COUNTERS</a> {
<a name="l00458"></a><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o0">00458</a>     ULONG <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o0">PageFaultCount</a>;
<a name="l00459"></a><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o1">00459</a>     ULONG <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o1">CopyOnWriteCount</a>;
<a name="l00460"></a><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o2">00460</a>     ULONG <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o2">TransitionCount</a>;
<a name="l00461"></a><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o3">00461</a>     ULONG <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o3">CacheTransitionCount</a>;
<a name="l00462"></a><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o4">00462</a>     ULONG <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o4">DemandZeroCount</a>;
<a name="l00463"></a><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o5">00463</a>     ULONG <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o5">PageReadCount</a>;
<a name="l00464"></a><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o6">00464</a>     ULONG <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o6">PageReadIoCount</a>;
<a name="l00465"></a><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o7">00465</a>     ULONG <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o7">CacheReadCount</a>;
<a name="l00466"></a><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o8">00466</a>     ULONG <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o8">CacheIoCount</a>;
<a name="l00467"></a><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o9">00467</a>     ULONG <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o9">DirtyPagesWriteCount</a>;
<a name="l00468"></a><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o10">00468</a>     ULONG <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o10">DirtyWriteIoCount</a>;
<a name="l00469"></a><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o11">00469</a>     ULONG <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o11">MappedPagesWriteCount</a>;
<a name="l00470"></a><a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o12">00470</a>     ULONG <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html#o12">MappedWriteIoCount</a>;
00471 } <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html">MMINFO_COUNTERS</a>;
00472 
<a name="l00473"></a><a class="code" href="../../d2/d1/mm_8h.html#a144">00473</a> <span class="keyword">typedef</span> <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html">MMINFO_COUNTERS</a> *<a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html">PMMINFO_COUNTERS</a>;
00474 
<a name="l00475"></a><a class="code" href="../../d2/d1/mm_8h.html#a145">00475</a> <span class="keyword">extern</span> <a class="code" href="../../d3/d2/struct__MMINFO__COUNTERS.html">MMINFO_COUNTERS</a> <a class="code" href="../../d2/d1/mm_8h.html#a145">MmInfoCounters</a>;
00476 
00477 
00478 
00479 <span class="comment">//</span>
00480 <span class="comment">// Memory management initialization routine (for both phases).</span>
00481 <span class="comment">//</span>
00482 
00483 BOOLEAN
00484 <a class="code" href="../../d5/d1/mminit_8c.html#a51">MmInitSystem</a> (
00485     IN ULONG Phase,
00486     IN <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock,
00487     IN PPHYSICAL_MEMORY_DESCRIPTOR PhysicalMemoryBlock
00488     );
00489 
00490 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00491 <a class="code" href="../../d5/d1/mminit_8c.html#a52">MmInitializeMemoryLimits</a> (
00492     IN <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock,
00493     IN PBOOLEAN IncludedType,
00494     OUT PPHYSICAL_MEMORY_DESCRIPTOR Memory
00495     );
00496 
00497 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00498 <a class="code" href="../../d5/d1/mminit_8c.html#a53">MmFreeLoaderBlock</a> (
00499     IN <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> LoaderBlock
00500     );
00501 
00502 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00503 <a class="code" href="../../d2/d1/mm_8h.html#a189">MmEnablePAT</a> (
00504     VOID
00505     );
00506 
00507 PVOID
00508 <a class="code" href="../../d5/d6/iosup_8c.html#a61">MmAllocateIndependentPages</a>(
00509     IN SIZE_T NumberOfBytes
00510     );
00511 
00512 BOOLEAN
00513 <a class="code" href="../../d5/d6/iosup_8c.html#a62">MmSetPageProtection</a>(
00514     IN PVOID VirtualAddress,
00515     IN SIZE_T NumberOfBytes,
00516     IN ULONG NewProtect
00517     );
00518 
00519 <span class="comment">//</span>
00520 <span class="comment">// Shutdown routine - flushes dirty pages, etc for system shutdown.</span>
00521 <span class="comment">//</span>
00522 
00523 BOOLEAN
00524 <a class="code" href="../../d1/d9/shutdown_8c.html#a3">MmShutdownSystem</a> (
00525     VOID
00526     );
00527 
00528 <span class="comment">//</span>
00529 <span class="comment">// Routines to deal with working set and commit enforcement.</span>
00530 <span class="comment">//</span>
00531 
00532 LOGICAL
00533 <a class="code" href="../../d4/d0/wslist_8c.html#a30">MmAssignProcessToJob</a>(
00534     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> Process
00535     );
00536 
00537 LOGICAL
00538 <a class="code" href="../../d4/d0/wslist_8c.html#a22">MmEnforceWorkingSetLimit</a>(
00539     IN <a class="code" href="../../d3/d6/struct__MMSUPPORT.html">PMMSUPPORT</a> WsInfo,
00540     IN LOGICAL Enable
00541     );
00542 
00543 <span class="comment">//</span>
00544 <span class="comment">// Routines to deal with session space.</span>
00545 <span class="comment">//</span>
00546 
00547 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00548 <a class="code" href="../../d3/d7/session_8c.html#a14">MmSessionCreate</a>(
00549     OUT PULONG SessionId
00550     );
00551 
00552 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00553 <a class="code" href="../../d3/d7/session_8c.html#a15">MmSessionDelete</a>(
00554     IN ULONG SessionId
00555     );
00556 
00557 <span class="keyword">typedef</span>
00558 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
<a name="l00559"></a><a class="code" href="../../d2/d1/mm_8h.html#a146">00559</a> (*PKWIN32_CALLOUT) (
00560     IN PVOID Arg
00561     );
00562 
00563 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00564 <a class="code" href="../../d2/d1/mm_8h.html#a197">MmDispatchWin32Callout</a>(
00565     IN PKWIN32_CALLOUT Function,
00566     IN PKWIN32_CALLOUT WorkerCallback OPTIONAL,
00567     IN PVOID Arg,
00568     IN PULONG SessionId OPTIONAL
00569     );
00570 
00571 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00572 <a class="code" href="../../d3/d7/session_8c.html#a12">MmSessionLeader</a>(
00573     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> Process
00574     );
00575 
00576 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00577 <a class="code" href="../../d3/d7/session_8c.html#a13">MmSessionSetUnloadAddress</a> (
00578     IN <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> pWin32KDevice
00579     );
00580 
00581 <span class="comment">//</span>
00582 <span class="comment">// Pool support routines to allocate complete pages, not for</span>
00583 <span class="comment">// general consumption, these are only used by the executive pool allocator.</span>
00584 <span class="comment">//</span>
00585 
00586 LOGICAL
00587 <a class="code" href="../../d1/d6/allocpag_8c.html#a52">MmResourcesAvailable</a> (
00588     IN POOL_TYPE PoolType,
00589     IN SIZE_T NumberOfBytes,
00590     IN EX_POOL_PRIORITY Priority
00591     );
00592 
00593 PVOID
00594 <a class="code" href="../../d1/d6/allocpag_8c.html#a54">MiAllocatePoolPages</a> (
00595     IN POOL_TYPE PoolType,
00596     IN SIZE_T SizeInBytes,
00597     IN ULONG IsLargeSessionAllocation
00598     );
00599 
00600 ULONG
00601 <a class="code" href="../../d1/d6/allocpag_8c.html#a55">MiFreePoolPages</a> (
00602     IN PVOID StartingAddress
00603     );
00604 
00605 PVOID
00606 <a class="code" href="../../d1/d6/allocpag_8c.html#a49">MiSessionPoolVector</a>(
00607     VOID
00608     );
00609 
00610 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00611 <a class="code" href="../../d1/d6/allocpag_8c.html#a50">MiSessionPoolAllocated</a>(
00612     IN PVOID VirtualAddress,
00613     IN SIZE_T NumberOfBytes,
00614     IN POOL_TYPE PoolType
00615     );
00616 
00617 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00618 <a class="code" href="../../d1/d6/allocpag_8c.html#a51">MiSessionPoolFreed</a>(
00619     IN PVOID VirtualAddress,
00620     IN SIZE_T NumberOfBytes,
00621     IN POOL_TYPE PoolType
00622     );
00623 
00624 <span class="comment">//</span>
00625 <span class="comment">// Routine for determining which pool a given address resides within.</span>
00626 <span class="comment">//</span>
00627 
00628 <a class="code" href="../../d5/d8/ex_8h.html#a96">POOL_TYPE</a>
00629 <a class="code" href="../../d1/d6/allocpag_8c.html#a48">MmDeterminePoolType</a> (
00630     IN PVOID VirtualAddress
00631     );
00632 
00633 LOGICAL
00634 <a class="code" href="../../d2/d1/mm_8h.html#a207">MmIsSystemAddressLocked</a>(
00635     IN PVOID VirtualAddress
00636     );
00637 
00638 <span class="comment">//</span>
00639 <span class="comment">// First level fault routine.</span>
00640 <span class="comment">//</span>
00641 
00642 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00643 <a class="code" href="../../d4/d1/mmfault_8c.html#a2">MmAccessFault</a> (
00644     IN BOOLEAN StoreInstruction,
00645     IN PVOID VirtualAddress,
00646     IN KPROCESSOR_MODE PreviousMode,
00647     IN PVOID TrapInformation
00648     );
00649 
00650 <span class="comment">//</span>
00651 <span class="comment">// Process Support Routines.</span>
00652 <span class="comment">//</span>
00653 
00654 BOOLEAN
00655 <a class="code" href="../../d4/d5/procsup_8c.html#a29">MmCreateProcessAddressSpace</a> (
00656     IN ULONG MinimumWorkingSetSize,
00657     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> NewProcess,
00658     OUT PULONG_PTR DirectoryTableBase
00659     );
00660 
00661 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00662 <a class="code" href="../../d4/d5/procsup_8c.html#a30">MmInitializeProcessAddressSpace</a> (
00663     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> ProcessToInitialize,
00664     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> ProcessToClone OPTIONAL,
00665     IN PVOID SectionToMap OPTIONAL,
00666     OUT PUNICODE_STRING * AuditName OPTIONAL
00667     );
00668 
00669 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00670 <a class="code" href="../../d4/d5/procsup_8c.html#a31">MmDeleteProcessAddressSpace</a> (
00671     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> Process
00672     );
00673 
00674 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00675 <a class="code" href="../../d4/d5/procsup_8c.html#a32">MmCleanProcessAddressSpace</a> (
00676     VOID
00677     );
00678 
00679 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00680 <a class="code" href="../../d2/d1/mm_8h.html#a213">MmCleanUserProcessAddressSpace</a> (
00681     VOID
00682     );
00683 
00684 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00685 <a class="code" href="../../d2/d1/mm_8h.html#a214">MmCleanVirtualAddressDescriptor</a> (
00686     VOID
00687     );
00688 
00689 PVOID
00690 <a class="code" href="../../d4/d5/procsup_8c.html#a33">MmCreateKernelStack</a> (
00691     BOOLEAN LargeStack
00692     );
00693 
00694 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00695 <a class="code" href="../../d4/d5/procsup_8c.html#a34">MmDeleteKernelStack</a> (
00696     IN PVOID PointerKernelStack,
00697     IN BOOLEAN LargeStack
00698     );
00699 
00700 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00701 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00702 <a class="code" href="../../d4/d5/procsup_8c.html#a35">MmGrowKernelStack</a> (
00703     IN PVOID CurrentStack
00704     );
00705 
00706 <span class="preprocessor">#if defined(_IA64_)</span>
00707 <span class="preprocessor"></span><a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00708 MmGrowKernelBackingStore (
00709     IN PVOID CurrentStack
00710     );
00711 <span class="preprocessor">#endif // defined(_IA64_)</span>
00712 <span class="preprocessor"></span>
00713 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00714 <a class="code" href="../../d4/d5/procsup_8c.html#a36">MmOutPageKernelStack</a> (
00715     IN <a class="code" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a> Thread
00716     );
00717 
00718 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00719 <a class="code" href="../../d4/d5/procsup_8c.html#a37">MmInPageKernelStack</a> (
00720     IN <a class="code" href="../../d1/d8/struct__KTHREAD.html">PKTHREAD</a> Thread
00721     );
00722 
00723 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00724 <a class="code" href="../../d4/d5/procsup_8c.html#a38">MmOutSwapProcess</a> (
00725     IN <a class="code" href="../../d5/d7/struct__KPROCESS.html">PKPROCESS</a> Process
00726     );
00727 
00728 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00729 <a class="code" href="../../d4/d5/procsup_8c.html#a39">MmInSwapProcess</a> (
00730     IN <a class="code" href="../../d5/d7/struct__KPROCESS.html">PKPROCESS</a> Process
00731     );
00732 
00733 PTEB
00734 <a class="code" href="../../d4/d5/procsup_8c.html#a40">MmCreateTeb</a> (
00735     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> TargetProcess,
00736     IN PINITIAL_TEB InitialTeb,
00737     IN PCLIENT_ID ClientId
00738     );
00739 
00740 PPEB
00741 <a class="code" href="../../d4/d5/procsup_8c.html#a41">MmCreatePeb</a> (
00742     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> TargetProcess,
00743     IN <a class="code" href="../../d2/d2/struct__INITIAL__PEB.html">PINITIAL_PEB</a> InitialPeb
00744     );
00745 
00746 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00747 <a class="code" href="../../d4/d5/procsup_8c.html#a42">MmDeleteTeb</a> (
00748     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> TargetProcess,
00749     IN PVOID TebBase
00750     );
00751 
00752 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00753 <a class="code" href="../../d4/d5/procsup_8c.html#a43">MmAllowWorkingSetExpansion</a> (
00754     VOID
00755     );
00756 
00757 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00758 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00759 <a class="code" href="../../d4/d0/wslist_8c.html#a31">MmAdjustWorkingSetSize</a> (
00760     IN SIZE_T WorkingSetMinimum,
00761     IN SIZE_T WorkingSetMaximum,
00762     IN ULONG SystemCache
00763     );
00764 
00765 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00766 <a class="code" href="../../d2/d1/mm_8h.html#a227">MmAdjustPageFileQuota</a> (
00767     IN ULONG NewPageFileQuota
00768     );
00769 
00770 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00771 <a class="code" href="../../d5/d0/wsmanage_8c.html#a41">MmWorkingSetManager</a> (
00772     VOID
00773     );
00774 
00775 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00776 <a class="code" href="../../d4/d5/procsup_8c.html#a45">MmSetMemoryPriorityProcess</a>(
00777     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> Process,
00778     IN UCHAR MemoryPriority
00779     );
00780 
00781 <span class="comment">//</span>
00782 <span class="comment">// Dynamic system loading support</span>
00783 <span class="comment">//</span>
00784 
00785 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00786 <a class="code" href="../../d8/d8/sysload_8c.html#a53">MmLoadSystemImage</a> (
00787     IN PUNICODE_STRING ImageFileName,
00788     IN PUNICODE_STRING NamePrefix OPTIONAL,
00789     IN PUNICODE_STRING LoadedBaseName OPTIONAL,
00790     IN BOOLEAN LoadInSessionSpace,
00791     OUT PVOID *Section,
00792     OUT PVOID *ImageBaseAddress
00793     );
00794 
00795 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00796 <a class="code" href="../../d8/d8/sysload_8c.html#a54">MmLoadAndLockSystemImage</a> (
00797     IN PUNICODE_STRING ImageFileName,
00798     IN PUNICODE_STRING NamePrefix OPTIONAL,
00799     IN PUNICODE_STRING LoadedBaseName OPTIONAL,
00800     OUT PVOID *Section,
00801     OUT PVOID *ImageBaseAddress
00802     );
00803 
00804 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00805 <a class="code" href="../../d8/d8/sysload_8c.html#a55">MmFreeDriverInitialization</a> (
00806     IN PVOID Section
00807     );
00808 
00809 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00810 <a class="code" href="../../d8/d8/sysload_8c.html#a59">MmUnloadSystemImage</a> (
00811     IN PVOID Section
00812     );
00813 
00814 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00815 <a class="code" href="../../d8/d8/sysload_8c.html#a65">MmMakeKernelResourceSectionWritable</a> (
00816     VOID
00817     );
00818 
00819 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00820 <a class="code" href="../../d9/d5/verifier_8c.html#a91">VerifierFreeTrackedPool</a>(
00821     IN PVOID VirtualAddress,
00822     IN SIZE_T ChargedBytes,
00823     IN LOGICAL CheckType,
00824     IN LOGICAL SpecialPool
00825     );
00826 
00827 <span class="comment">//</span>
00828 <span class="comment">// Triage support</span>
00829 <span class="comment">//</span>
00830 
00831 ULONG
00832 <a class="code" href="../../d2/d1/mm_8h.html#a236">MmSizeOfTriageInformation</a>(
00833     VOID
00834     );
00835 
00836 ULONG
00837 <a class="code" href="../../d2/d1/mm_8h.html#a237">MmSizeOfUnloadedDriverInformation</a>(
00838     VOID
00839     );
00840 
00841 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00842 <a class="code" href="../../d2/d1/mm_8h.html#a238">MmWriteTriageInformation</a>(
00843     IN PVOID
00844     );
00845 
00846 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00847 <a class="code" href="../../d2/d1/mm_8h.html#a239">MmWriteUnloadedDriverInformation</a>(
00848     IN PVOID
00849     );
00850 
00851 <span class="comment">//</span>
00852 <span class="comment">// Cache manager support</span>
00853 <span class="comment">//</span>
00854 
00855 <span class="preprocessor">#if defined(_NTDDK_) || defined(_NTIFS_)</span>
00856 <span class="preprocessor"></span>
00857 <span class="comment">// begin_ntifs</span>
00858 
00859 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00860 BOOLEAN
00861 <a class="code" href="../../d2/d1/mm_8h.html#a16">MmIsRecursiveIoFault</a>(
00862     VOID
00863     );
00864 
00865 <span class="comment">// end_ntifs</span>
00866 <span class="preprocessor">#else</span>
00867 <span class="preprocessor"></span>
00868 <span class="comment">//++</span>
00869 <span class="comment">//</span>
00870 <span class="comment">// BOOLEAN</span>
00871 <span class="comment">// MmIsRecursiveIoFault (</span>
00872 <span class="comment">//     VOID</span>
00873 <span class="comment">//     );</span>
00874 <span class="comment">//</span>
00875 <span class="comment">// Routine Description:</span>
00876 <span class="comment">//</span>
00877 <span class="comment">//</span>
00878 <span class="comment">// This macro examines the thread's page fault clustering information</span>
00879 <span class="comment">// and determines if the current page fault is occurring during an I/O</span>
00880 <span class="comment">// operation.</span>
00881 <span class="comment">//</span>
00882 <span class="comment">// Arguments:</span>
00883 <span class="comment">//</span>
00884 <span class="comment">//     None.</span>
00885 <span class="comment">//</span>
00886 <span class="comment">// Return Value:</span>
00887 <span class="comment">//</span>
00888 <span class="comment">//     Returns TRUE if the fault is occurring during an I/O operation,</span>
00889 <span class="comment">//     FALSE otherwise.</span>
00890 <span class="comment">//</span>
00891 <span class="comment">//--</span>
00892 
<a name="l00893"></a><a class="code" href="../../d2/d1/mm_8h.html#a16">00893</a> <span class="preprocessor">#define MmIsRecursiveIoFault() \</span>
00894 <span class="preprocessor">                 ((PsGetCurrentThread()-&gt;DisablePageFaultClustering) | \</span>
00895 <span class="preprocessor">                  (PsGetCurrentThread()-&gt;ForwardClusterOnly))</span>
00896 <span class="preprocessor"></span>
00897 <span class="preprocessor">#endif</span>
00898 <span class="preprocessor"></span>
00899 <span class="comment">//++</span>
00900 <span class="comment">//</span>
00901 <span class="comment">// VOID</span>
00902 <span class="comment">// MmDisablePageFaultClustering</span>
00903 <span class="comment">//     OUT PULONG SavedState</span>
00904 <span class="comment">//     );</span>
00905 <span class="comment">//</span>
00906 <span class="comment">// Routine Description:</span>
00907 <span class="comment">//</span>
00908 <span class="comment">//</span>
00909 <span class="comment">// This macro disables page fault clustering for the current thread.</span>
00910 <span class="comment">// Note, that this indicates that file system I/O is in progress</span>
00911 <span class="comment">// for that thread.</span>
00912 <span class="comment">//</span>
00913 <span class="comment">// Arguments:</span>
00914 <span class="comment">//</span>
00915 <span class="comment">//     SavedState - returns previous state of page fault clustering which</span>
00916 <span class="comment">//                  is guaranteed to be nonzero</span>
00917 <span class="comment">//</span>
00918 <span class="comment">// Return Value:</span>
00919 <span class="comment">//</span>
00920 <span class="comment">//     None.</span>
00921 <span class="comment">//</span>
00922 <span class="comment">//--</span>
00923 
<a name="l00924"></a><a class="code" href="../../d2/d1/mm_8h.html#a17">00924</a> <span class="preprocessor">#define MmDisablePageFaultClustering(SavedState) {                                          \</span>
00925 <span class="preprocessor">                *(SavedState) = 2 + (ULONG)PsGetCurrentThread()-&gt;DisablePageFaultClustering;\</span>
00926 <span class="preprocessor">                PsGetCurrentThread()-&gt;DisablePageFaultClustering = TRUE; }</span>
00927 <span class="preprocessor"></span>
00928 
00929 <span class="comment">//++</span>
00930 <span class="comment">//</span>
00931 <span class="comment">// VOID</span>
00932 <span class="comment">// MmEnablePageFaultClustering</span>
00933 <span class="comment">//     IN ULONG SavedState</span>
00934 <span class="comment">//     );</span>
00935 <span class="comment">//</span>
00936 <span class="comment">// Routine Description:</span>
00937 <span class="comment">//</span>
00938 <span class="comment">//</span>
00939 <span class="comment">// This macro enables page fault clustering for the current thread.</span>
00940 <span class="comment">// Note, that this indicates that no file system I/O is in progress for</span>
00941 <span class="comment">// that thread.</span>
00942 <span class="comment">//</span>
00943 <span class="comment">// Arguments:</span>
00944 <span class="comment">//</span>
00945 <span class="comment">//     SavedState - supplies previous state of page fault clustering</span>
00946 <span class="comment">//</span>
00947 <span class="comment">// Return Value:</span>
00948 <span class="comment">//</span>
00949 <span class="comment">//     None.</span>
00950 <span class="comment">//</span>
00951 <span class="comment">//--</span>
00952 
<a name="l00953"></a><a class="code" href="../../d2/d1/mm_8h.html#a18">00953</a> <span class="preprocessor">#define MmEnablePageFaultClustering(SavedState) {                                               \</span>
00954 <span class="preprocessor">                PsGetCurrentThread()-&gt;DisablePageFaultClustering = (BOOLEAN)(SavedState - 2); }</span>
00955 <span class="preprocessor"></span>
00956 <span class="comment">//++</span>
00957 <span class="comment">//</span>
00958 <span class="comment">// VOID</span>
00959 <span class="comment">// MmSavePageFaultReadAhead</span>
00960 <span class="comment">//     IN PETHREAD Thread,</span>
00961 <span class="comment">//     OUT PULONG SavedState</span>
00962 <span class="comment">//     );</span>
00963 <span class="comment">//</span>
00964 <span class="comment">// Routine Description:</span>
00965 <span class="comment">//</span>
00966 <span class="comment">//</span>
00967 <span class="comment">// This macro saves the page fault read ahead value for the specified</span>
00968 <span class="comment">// thread.</span>
00969 <span class="comment">//</span>
00970 <span class="comment">// Arguments:</span>
00971 <span class="comment">//</span>
00972 <span class="comment">//     Thread - Supplies a pointer to the current thread.</span>
00973 <span class="comment">//</span>
00974 <span class="comment">//     SavedState - returns previous state of page fault read ahead</span>
00975 <span class="comment">//</span>
00976 <span class="comment">// Return Value:</span>
00977 <span class="comment">//</span>
00978 <span class="comment">//     None.</span>
00979 <span class="comment">//</span>
00980 <span class="comment">//--</span>
00981 
00982 
<a name="l00983"></a><a class="code" href="../../d2/d1/mm_8h.html#a19">00983</a> <span class="preprocessor">#define MmSavePageFaultReadAhead(Thread,SavedState) {               \</span>
00984 <span class="preprocessor">                *(SavedState) = (Thread)-&gt;ReadClusterSize * 2 +     \</span>
00985 <span class="preprocessor">                                (Thread)-&gt;ForwardClusterOnly; }</span>
00986 <span class="preprocessor"></span>
00987 <span class="comment">//++</span>
00988 <span class="comment">//</span>
00989 <span class="comment">// VOID</span>
00990 <span class="comment">// MmSetPageFaultReadAhead</span>
00991 <span class="comment">//     IN PETHREAD Thread,</span>
00992 <span class="comment">//     IN ULONG ReadAhead</span>
00993 <span class="comment">//     );</span>
00994 <span class="comment">//</span>
00995 <span class="comment">// Routine Description:</span>
00996 <span class="comment">//</span>
00997 <span class="comment">//</span>
00998 <span class="comment">// This macro sets the page fault read ahead value for the specified</span>
00999 <span class="comment">// thread, and indicates that file system I/O is in progress for that</span>
01000 <span class="comment">// thread.</span>
01001 <span class="comment">//</span>
01002 <span class="comment">// Arguments:</span>
01003 <span class="comment">//</span>
01004 <span class="comment">//     Thread - Supplies a pointer to the current thread.</span>
01005 <span class="comment">//</span>
01006 <span class="comment">//     ReadAhead - Supplies the number of pages to read in addition to</span>
01007 <span class="comment">//                 the page the fault is taken on.  A value of 0</span>
01008 <span class="comment">//                 reads only the faulting page, a value of 1 reads in</span>
01009 <span class="comment">//                 the faulting page and the following page, etc.</span>
01010 <span class="comment">//</span>
01011 <span class="comment">// Return Value:</span>
01012 <span class="comment">//</span>
01013 <span class="comment">//     None.</span>
01014 <span class="comment">//</span>
01015 <span class="comment">//--</span>
01016 
01017 
<a name="l01018"></a><a class="code" href="../../d2/d1/mm_8h.html#a20">01018</a> <span class="preprocessor">#define MmSetPageFaultReadAhead(Thread,ReadAhead) {                          \</span>
01019 <span class="preprocessor">                (Thread)-&gt;ForwardClusterOnly = TRUE;                         \</span>
01020 <span class="preprocessor">                if ((ReadAhead) &gt; MM_MAXIMUM_READ_CLUSTER_SIZE) {            \</span>
01021 <span class="preprocessor">                    (Thread)-&gt;ReadClusterSize = MM_MAXIMUM_READ_CLUSTER_SIZE;\</span>
01022 <span class="preprocessor">                } else {                                                     \</span>
01023 <span class="preprocessor">                    (Thread)-&gt;ReadClusterSize = (ReadAhead);                 \</span>
01024 <span class="preprocessor">                } }</span>
01025 <span class="preprocessor"></span>
01026 <span class="comment">//++</span>
01027 <span class="comment">//</span>
01028 <span class="comment">// VOID</span>
01029 <span class="comment">// MmResetPageFaultReadAhead</span>
01030 <span class="comment">//     IN PETHREAD Thread,</span>
01031 <span class="comment">//     IN ULONG SavedState</span>
01032 <span class="comment">//     );</span>
01033 <span class="comment">//</span>
01034 <span class="comment">// Routine Description:</span>
01035 <span class="comment">//</span>
01036 <span class="comment">//</span>
01037 <span class="comment">// This macro resets the default page fault read ahead value for the specified</span>
01038 <span class="comment">// thread, and indicates that file system I/O is not in progress for that</span>
01039 <span class="comment">// thread.</span>
01040 <span class="comment">//</span>
01041 <span class="comment">// Arguments:</span>
01042 <span class="comment">//</span>
01043 <span class="comment">//     Thread - Supplies a pointer to the current thread.</span>
01044 <span class="comment">//</span>
01045 <span class="comment">//     SavedState - supplies previous state of page fault read ahead</span>
01046 <span class="comment">//</span>
01047 <span class="comment">// Return Value:</span>
01048 <span class="comment">//</span>
01049 <span class="comment">//     None.</span>
01050 <span class="comment">//</span>
01051 <span class="comment">//--</span>
01052 
<a name="l01053"></a><a class="code" href="../../d2/d1/mm_8h.html#a21">01053</a> <span class="preprocessor">#define MmResetPageFaultReadAhead(Thread, SavedState) {                     \</span>
01054 <span class="preprocessor">                (Thread)-&gt;ForwardClusterOnly = (BOOLEAN)((SavedState) &amp; 1); \</span>
01055 <span class="preprocessor">                (Thread)-&gt;ReadClusterSize = (SavedState) / 2; }</span>
01056 <span class="preprocessor"></span>
01057 <span class="comment">//</span>
01058 <span class="comment">// The order of this list is important, the zeroed, free and standby</span>
01059 <span class="comment">// must occur before the modified or bad so comparisons can be</span>
01060 <span class="comment">// made when pages are added to a list.</span>
01061 <span class="comment">//</span>
01062 <span class="comment">// NOTE: This field is limited to 8 elements.</span>
01063 <span class="comment">//</span>
01064 
<a name="l01065"></a><a class="code" href="../../d2/d1/mm_8h.html#a22">01065</a> <span class="preprocessor">#define NUMBER_OF_PAGE_LISTS 8</span>
01066 <span class="preprocessor"></span>
<a name="l01067"></a><a class="code" href="../../d2/d1/mm_8h.html#a345">01067</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d2/d1/mm_8h.html#a345">_MMLISTS</a> {
01068     <a class="code" href="../../d2/d1/mm_8h.html#a345a171">ZeroedPageList</a>,
01069     <a class="code" href="../../d2/d1/mm_8h.html#a345a172">FreePageList</a>,
01070     <a class="code" href="../../d2/d1/mm_8h.html#a345a173">StandbyPageList</a>,  <span class="comment">//this list and before make up available pages.</span>
01071     <a class="code" href="../../d2/d1/mm_8h.html#a345a174">ModifiedPageList</a>,
01072     <a class="code" href="../../d2/d1/mm_8h.html#a345a175">ModifiedNoWritePageList</a>,
01073     <a class="code" href="../../d2/d1/mm_8h.html#a345a176">BadPageList</a>,
01074     <a class="code" href="../../d2/d1/mm_8h.html#a345a177">ActiveAndValid</a>,
01075     <a class="code" href="../../d2/d1/mm_8h.html#a345a178">TransitionPage</a>
01076 } <a class="code" href="../../d2/d1/mm_8h.html#a147">MMLISTS</a>;
01077 
<a name="l01078"></a><a class="code" href="../../d0/d4/struct__MMPFNLIST.html">01078</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d0/d4/struct__MMPFNLIST.html">_MMPFNLIST</a> {
<a name="l01079"></a><a class="code" href="../../d0/d4/struct__MMPFNLIST.html#o0">01079</a>     PFN_NUMBER <a class="code" href="../../d0/d4/struct__MMPFNLIST.html#o0">Total</a>;
<a name="l01080"></a><a class="code" href="../../d0/d4/struct__MMPFNLIST.html#o1">01080</a>     <a class="code" href="../../d2/d1/mm_8h.html#a147">MMLISTS</a> <a class="code" href="../../d0/d4/struct__MMPFNLIST.html#o1">ListName</a>;
<a name="l01081"></a><a class="code" href="../../d0/d4/struct__MMPFNLIST.html#o2">01081</a>     PFN_NUMBER <a class="code" href="../../d0/d4/struct__MMPFNLIST.html#o2">Flink</a>;
<a name="l01082"></a><a class="code" href="../../d0/d4/struct__MMPFNLIST.html#o3">01082</a>     PFN_NUMBER <a class="code" href="../../d0/d4/struct__MMPFNLIST.html#o3">Blink</a>;
01083 } <a class="code" href="../../d0/d4/struct__MMPFNLIST.html">MMPFNLIST</a>;
01084 
<a name="l01085"></a><a class="code" href="../../d2/d1/mm_8h.html#a149">01085</a> <span class="keyword">typedef</span> <a class="code" href="../../d0/d4/struct__MMPFNLIST.html">MMPFNLIST</a> *<a class="code" href="../../d0/d4/struct__MMPFNLIST.html">PMMPFNLIST</a>;
01086 
<a name="l01087"></a><a class="code" href="../../d2/d1/mm_8h.html#a150">01087</a> <span class="keyword">extern</span> <a class="code" href="../../d0/d4/struct__MMPFNLIST.html">MMPFNLIST</a> <a class="code" href="../../d2/d1/mm_8h.html#a150">MmModifiedPageListHead</a>;
01088 
<a name="l01089"></a><a class="code" href="../../d2/d1/mm_8h.html#a151">01089</a> <span class="keyword">extern</span> PFN_NUMBER <a class="code" href="../../d2/d1/mm_8h.html#a151">MmThrottleTop</a>;
<a name="l01090"></a><a class="code" href="../../d2/d1/mm_8h.html#a152">01090</a> <span class="keyword">extern</span> PFN_NUMBER <a class="code" href="../../d2/d1/mm_8h.html#a152">MmThrottleBottom</a>;
01091 
01092 <span class="comment">//++</span>
01093 <span class="comment">//</span>
01094 <span class="comment">// BOOLEAN</span>
01095 <span class="comment">// MmEnoughMemoryForWrite (</span>
01096 <span class="comment">//     VOID</span>
01097 <span class="comment">//     );</span>
01098 <span class="comment">//</span>
01099 <span class="comment">// Routine Description:</span>
01100 <span class="comment">//</span>
01101 <span class="comment">//</span>
01102 <span class="comment">// This macro checks the modified pages and available pages to determine</span>
01103 <span class="comment">// to allow the cache manager to throttle write operations.</span>
01104 <span class="comment">//</span>
01105 <span class="comment">// For NTAS:</span>
01106 <span class="comment">// Writes are blocked if there are less than 127 available pages OR</span>
01107 <span class="comment">// there are more than 1000 modified pages AND less than 450 available pages.</span>
01108 <span class="comment">//</span>
01109 <span class="comment">// For DeskTop:</span>
01110 <span class="comment">// Writes are blocked if there are less than 30 available pages OR</span>
01111 <span class="comment">// there are more than 1000 modified pages AND less than 250 available pages.</span>
01112 <span class="comment">//</span>
01113 <span class="comment">// Arguments:</span>
01114 <span class="comment">//</span>
01115 <span class="comment">//     None.</span>
01116 <span class="comment">//</span>
01117 <span class="comment">// Return Value:</span>
01118 <span class="comment">//</span>
01119 <span class="comment">//     TRUE if ample memory exists and the write should proceed.</span>
01120 <span class="comment">//</span>
01121 <span class="comment">//--</span>
01122 
<a name="l01123"></a><a class="code" href="../../d2/d1/mm_8h.html#a23">01123</a> <span class="preprocessor">#define MmEnoughMemoryForWrite()                         \</span>
01124 <span class="preprocessor">            ((MmAvailablePages &gt; MmThrottleTop)          \</span>
01125 <span class="preprocessor">                        ||                               \</span>
01126 <span class="preprocessor">             (((MmModifiedPageListHead.Total &lt; 1000)) &amp;&amp; \</span>
01127 <span class="preprocessor">               (MmAvailablePages &gt; MmThrottleBottom)))</span>
01128 <span class="preprocessor"></span>
01129 
01130 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01131 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01132 <a class="code" href="../../d0/d8/creasect_8c.html#a20">MmCreateSection</a> (
01133     OUT PVOID *SectionObject,
01134     IN ACCESS_MASK DesiredAccess,
01135     IN POBJECT_ATTRIBUTES ObjectAttributes OPTIONAL,
01136     IN PLARGE_INTEGER MaximumSize,
01137     IN ULONG SectionPageProtection,
01138     IN ULONG AllocationAttributes,
01139     IN HANDLE FileHandle OPTIONAL,
01140     IN <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> File OPTIONAL
01141     );
01142 
01143 
01144 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01145 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01146 <a class="code" href="../../d3/d5/mapview_8c.html#a21">MmMapViewOfSection</a>(
01147     IN PVOID SectionToMap,
01148     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> Process,
01149     IN OUT PVOID *CapturedBase,
01150     IN ULONG_PTR ZeroBits,
01151     IN SIZE_T CommitSize,
01152     IN OUT PLARGE_INTEGER SectionOffset,
01153     IN OUT PSIZE_T CapturedViewSize,
01154     IN SECTION_INHERIT InheritDisposition,
01155     IN ULONG AllocationType,
01156     IN ULONG Protect
01157     );
01158 
01159 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01160 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01161 <a class="code" href="../../d4/d9/umapview_8c.html#a1">MmUnmapViewOfSection</a>(
01162     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> Process,
01163     IN PVOID BaseAddress
01164      );
01165 
01166 <span class="comment">// begin_ntifs</span>
01167 
01168 BOOLEAN
01169 <a class="code" href="../../d5/d5/sectsup_8c.html#a21">MmForceSectionClosed</a> (
01170     IN <a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html">PSECTION_OBJECT_POINTERS</a> SectionObjectPointer,
01171     IN BOOLEAN DelayClose
01172     );
01173 
01174 <span class="comment">// end_ntifs</span>
01175 
01176 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01177 <a class="code" href="../../d5/d5/sectsup_8c.html#a23">MmGetFileNameForSection</a> (
01178     IN HANDLE Section,
01179     OUT PSTRING FileName
01180     );
01181 
01182 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01183 <a class="code" href="../../d9/d5/verifier_8c.html#a113">MmAddVerifierThunks</a> (
01184     IN PVOID ThunkBuffer,
01185     IN ULONG ThunkBufferSize
01186     );
01187 
01188 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01189 <a class="code" href="../../d9/d5/verifier_8c.html#a115">MmSetVerifierInformation</a> (
01190     IN OUT PVOID SystemInformation,
01191     IN ULONG SystemInformationLength
01192     );
01193 
01194 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01195 <a class="code" href="../../d9/d5/verifier_8c.html#a114">MmGetVerifierInformation</a>(
01196     OUT PVOID SystemInformation,
01197     IN ULONG SystemInformationLength,
01198     OUT PULONG Length
01199     );
01200 
01201 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01202 <a class="code" href="../../d6/d3/modwrite_8c.html#a55">MmGetPageFileInformation</a>(
01203     OUT PVOID SystemInformation,
01204     IN ULONG SystemInformationLength,
01205     OUT PULONG Length
01206     );
01207 
01208 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01209 <a class="code" href="../../d8/d0/extsect_8c.html#a1">MmExtendSection</a> (
01210     IN PVOID SectionToExtend,
01211     IN OUT PLARGE_INTEGER NewSectionSize,
01212     IN ULONG IgnoreFileSizeChecking
01213     );
01214 
01215 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01216 <a class="code" href="../../d6/d5/flushsec_8c.html#a7">MmFlushVirtualMemory</a> (
01217     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> Process,
01218     IN OUT PVOID *BaseAddress,
01219     IN OUT PSIZE_T RegionSize,
01220     OUT PIO_STATUS_BLOCK IoStatus
01221     );
01222 
01223 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01224 <a class="code" href="../../d1/d5/mapcache_8c.html#a9">MmMapViewInSystemCache</a> (
01225     IN PVOID SectionToMap,
01226     OUT PVOID *CapturedBase,
01227     IN OUT PLARGE_INTEGER SectionOffset,
01228     IN OUT PULONG CapturedViewSize
01229     );
01230 
01231 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01232 <a class="code" href="../../d1/d5/mapcache_8c.html#a11">MmUnmapViewInSystemCache</a> (
01233     IN PVOID BaseAddress,
01234     IN PVOID SectionToUnmap,
01235     IN ULONG AddToFront
01236     );
01237 
01238 BOOLEAN
01239 <a class="code" href="../../d6/d5/flushsec_8c.html#a12">MmPurgeSection</a> (
01240     IN <a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html">PSECTION_OBJECT_POINTERS</a> SectionObjectPointer,
01241     IN PLARGE_INTEGER Offset OPTIONAL,
01242     IN SIZE_T RegionSize,
01243     IN ULONG IgnoreCacheViews
01244     );
01245 
01246 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01247 <a class="code" href="../../d6/d5/flushsec_8c.html#a8">MmFlushSection</a> (
01248     IN <a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html">PSECTION_OBJECT_POINTERS</a> SectionObjectPointer,
01249     IN PLARGE_INTEGER Offset OPTIONAL,
01250     IN SIZE_T RegionSize,
01251     OUT PIO_STATUS_BLOCK IoStatus,
01252     IN ULONG AcquireFile
01253     );
01254 
01255 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01256 <a class="code" href="../../d6/d3/modwrite_8c.html#a44">MmGetCrashDumpInformation</a> (
01257     IN PSYSTEM_CRASH_DUMP_INFORMATION CrashInfo
01258     );
01259 
01260 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01261 <a class="code" href="../../d6/d3/modwrite_8c.html#a45">MmGetCrashDumpStateInformation</a> (
01262     IN PSYSTEM_CRASH_STATE_INFORMATION CrashInfo
01263     );
01264 
01265 <span class="comment">// begin_ntifs</span>
01266 
<a name="l01267"></a><a class="code" href="../../d2/d1/mm_8h.html#a346">01267</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d2/d1/mm_8h.html#a346">_MMFLUSH_TYPE</a> {
01268     <a class="code" href="../../d2/d1/mm_8h.html#a346a179">MmFlushForDelete</a>,
01269     <a class="code" href="../../d2/d1/mm_8h.html#a346a180">MmFlushForWrite</a>
01270 } <a class="code" href="../../d2/d1/mm_8h.html#a153">MMFLUSH_TYPE</a>;
01271 
01272 
01273 BOOLEAN
01274 <a class="code" href="../../d6/d5/flushsec_8c.html#a13">MmFlushImageSection</a> (
01275     IN <a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html">PSECTION_OBJECT_POINTERS</a> SectionObjectPointer,
01276     IN MMFLUSH_TYPE FlushType
01277     );
01278 
01279 BOOLEAN
01280 <a class="code" href="../../d5/d5/sectsup_8c.html#a30">MmCanFileBeTruncated</a> (
01281     IN <a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html">PSECTION_OBJECT_POINTERS</a> SectionPointer,
01282     IN PLARGE_INTEGER NewFileSize
01283     );
01284 
01285 
01286 <span class="comment">// end_ntifs</span>
01287 
01288 BOOLEAN
01289 <a class="code" href="../../d6/d3/modwrite_8c.html#a54">MmDisableModifiedWriteOfSection</a> (
01290     IN <a class="code" href="../../d7/d0/struct__SECTION__OBJECT__POINTERS.html">PSECTION_OBJECT_POINTERS</a> SectionObjectPointer
01291     );
01292 
01293 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01294 <a class="code" href="../../d2/d1/mm_8h.html#a260">MmPurgeWorkingSet</a> (
01295      IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> Process,
01296      IN PVOID BaseAddress,
01297      IN SIZE_T RegionSize
01298      );
01299 
01300 BOOLEAN                                     <span class="comment">// ntifs</span>
01301 <a class="code" href="../../d5/d6/iosup_8c.html#a74">MmSetAddressRangeModified</a> (                 <span class="comment">// ntifs</span>
01302     IN PVOID Address,                       <span class="comment">// ntifs</span>
01303     IN SIZE_T Length                        <span class="comment">// ntifs</span>
01304     );                                      <span class="comment">// ntifs</span>
01305 
01306 BOOLEAN
01307 <a class="code" href="../../d1/d5/mapcache_8c.html#a13">MmCheckCachedPageState</a> (
01308     IN PVOID Address,
01309     IN BOOLEAN SetToZero
01310     );
01311 
01312 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01313 <a class="code" href="../../d1/d5/mapcache_8c.html#a14">MmCopyToCachedPage</a> (
01314     IN PVOID Address,
01315     IN PVOID UserBuffer,
01316     IN ULONG Offset,
01317     IN SIZE_T CountInBytes,
01318     IN BOOLEAN DontZero
01319     );
01320 
01321 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01322 <a class="code" href="../../d1/d5/mapcache_8c.html#a15">MmUnlockCachedPage</a> (
01323     IN PVOID AddressInCache
01324     );
01325 
01326 PVOID
01327 <a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a0">MmDbgReadCheck</a> (
01328     IN PVOID VirtualAddress
01329     );
01330 
01331 PVOID
01332 <a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a1">MmDbgWriteCheck</a> (
01333     IN PVOID VirtualAddress,
01334     IN PHARDWARE_PTE Opaque
01335     );
01336 
01337 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01338 <a class="code" href="../../d2/d6/ia64_2debugsup_8c.html#a2">MmDbgReleaseAddress</a> (
01339     IN PVOID VirtualAddress,
01340     IN PHARDWARE_PTE Opaque
01341     );
01342 
01343 PVOID64
01344 <a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a2">MmDbgReadCheck64</a> (
01345     IN PVOID64 VirtualAddress
01346     );
01347 
01348 PVOID64
01349 <a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a3">MmDbgWriteCheck64</a> (
01350     IN PVOID64 VirtualAddress
01351     );
01352 
01353 PVOID64
01354 <a class="code" href="../../d2/d6/ia64_2debugsup_8c.html#a3">MmDbgTranslatePhysicalAddress64</a> (
01355     IN PHYSICAL_ADDRESS PhysicalAddress
01356     );
01357 
01358 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01359 <a class="code" href="../../d0/d2/mmsup_8c.html#a18">MmHibernateInformation</a> (
01360     IN PVOID MemoryMap,
01361     OUT PULONG_PTR HiberVa,
01362     OUT PPHYSICAL_ADDRESS HiberPte
01363     );
01364 
01365 <span class="comment">// begin_ntddk begin_ntifs begin_wdm</span>
01366 
01367 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01368 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01369 <a class="code" href="../../d5/d6/iosup_8c.html#a42">MmProbeAndLockProcessPages</a> (
01370     IN OUT <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MemoryDescriptorList,
01371     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> Process,
01372     IN KPROCESSOR_MODE AccessMode,
01373     IN LOCK_OPERATION Operation
01374     );
01375 
01376 
01377 <span class="comment">// begin_nthal</span>
01378 <span class="comment">//</span>
01379 <span class="comment">// I/O support routines.</span>
01380 <span class="comment">//</span>
01381 
01382 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01383 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01384 <a class="code" href="../../d5/d6/iosup_8c.html#a41">MmProbeAndLockPages</a> (
01385     IN OUT <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MemoryDescriptorList,
01386     IN KPROCESSOR_MODE AccessMode,
01387     IN LOCK_OPERATION Operation
01388     );
01389 
01390 
01391 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01392 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01393 <a class="code" href="../../d5/d6/iosup_8c.html#a45">MmUnlockPages</a> (
01394     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MemoryDescriptorList
01395     );
01396 
01397 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01398 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01399 <a class="code" href="../../d5/d6/iosup_8c.html#a46">MmBuildMdlForNonPagedPool</a> (
01400     IN OUT <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MemoryDescriptorList
01401     );
01402 
01403 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01404 PVOID
01405 <a class="code" href="../../d5/d6/iosup_8c.html#a49">MmMapLockedPages</a> (
01406     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MemoryDescriptorList,
01407     IN KPROCESSOR_MODE AccessMode
01408     );
01409 
01410 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01411 PVOID
01412 <a class="code" href="../../d8/d8/sysload_8c.html#a68">MmGetSystemRoutineAddress</a> (
01413     IN PUNICODE_STRING SystemRoutineName
01414     );
01415 
01416 <span class="comment">// end_wdm</span>
01417 
01418 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01419 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01420 <a class="code" href="../../d5/d6/iosup_8c.html#a65">MmMapUserAddressesToPage</a> (
01421     IN PVOID BaseAddress,
01422     IN SIZE_T NumberOfBytes,
01423     IN PVOID PageAddress
01424     );
01425 
01426 <span class="comment">// begin_wdm</span>
01427 
01428 <span class="comment">//</span>
01429 <span class="comment">// _MM_PAGE_PRIORITY_ provides a method for the system to handle requests</span>
01430 <span class="comment">// intelligently in low resource conditions.</span>
01431 <span class="comment">//</span>
01432 <span class="comment">// LowPagePriority should be used when it is acceptable to the driver for the</span>
01433 <span class="comment">// mapping request to fail if the system is low on resources.  An example of</span>
01434 <span class="comment">// this could be for a non-critical network connection where the driver can</span>
01435 <span class="comment">// handle the failure case when system resources are close to being depleted.</span>
01436 <span class="comment">//</span>
01437 <span class="comment">// NormalPagePriority should be used when it is acceptable to the driver for the</span>
01438 <span class="comment">// mapping request to fail if the system is very low on resources.  An example</span>
01439 <span class="comment">// of this could be for a non-critical local filesystem request.</span>
01440 <span class="comment">//</span>
01441 <span class="comment">// HighPagePriority should be used when it is unacceptable to the driver for the</span>
01442 <span class="comment">// mapping request to fail unless the system is completely out of resources.</span>
01443 <span class="comment">// An example of this would be the paging file path in a driver.</span>
01444 <span class="comment">//</span>
01445 
<a name="l01446"></a><a class="code" href="../../d2/d1/mm_8h.html#a347">01446</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="../../d2/d1/mm_8h.html#a347">_MM_PAGE_PRIORITY</a> {
01447     <a class="code" href="../../d2/d1/mm_8h.html#a347a181">LowPagePriority</a>,
01448     <a class="code" href="../../d2/d1/mm_8h.html#a347a182">NormalPagePriority</a> = 16,
01449     <a class="code" href="../../d2/d1/mm_8h.html#a347a183">HighPagePriority</a> = 32
01450 } <a class="code" href="../../d2/d1/mm_8h.html#a154">MM_PAGE_PRIORITY</a>;
01451 
01452 <span class="comment">//</span>
01453 <span class="comment">// Note: This function is not available in WDM 1.0</span>
01454 <span class="comment">//</span>
01455 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01456 PVOID
01457 <a class="code" href="../../d5/d6/iosup_8c.html#a50">MmMapLockedPagesSpecifyCache</a> (
01458      IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MemoryDescriptorList,
01459      IN KPROCESSOR_MODE AccessMode,
01460      IN MEMORY_CACHING_TYPE CacheType,
01461      IN PVOID BaseAddress,
01462      IN ULONG BugCheckOnFailure,
01463      IN MM_PAGE_PRIORITY Priority
01464      );
01465 
01466 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01467 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01468 <a class="code" href="../../d5/d6/iosup_8c.html#a56">MmUnmapLockedPages</a> (
01469     IN PVOID BaseAddress,
01470     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MemoryDescriptorList
01471     );
01472 
01473 <span class="comment">// end_wdm</span>
01474 
<a name="l01475"></a><a class="code" href="../../d4/d5/struct__PHYSICAL__MEMORY__RANGE.html">01475</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d4/d5/struct__PHYSICAL__MEMORY__RANGE.html">_PHYSICAL_MEMORY_RANGE</a> {
<a name="l01476"></a><a class="code" href="../../d4/d5/struct__PHYSICAL__MEMORY__RANGE.html#o0">01476</a>     PHYSICAL_ADDRESS <a class="code" href="../../d4/d5/struct__PHYSICAL__MEMORY__RANGE.html#o0">BaseAddress</a>;
<a name="l01477"></a><a class="code" href="../../d4/d5/struct__PHYSICAL__MEMORY__RANGE.html#o1">01477</a>     LARGE_INTEGER <a class="code" href="../../d4/d5/struct__PHYSICAL__MEMORY__RANGE.html#o1">NumberOfBytes</a>;
01478 } <a class="code" href="../../d4/d5/struct__PHYSICAL__MEMORY__RANGE.html">PHYSICAL_MEMORY_RANGE</a>, *<a class="code" href="../../d4/d5/struct__PHYSICAL__MEMORY__RANGE.html">PPHYSICAL_MEMORY_RANGE</a>;
01479 
01480 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01481 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01482 <a class="code" href="../../d9/d3/dynmem_8c.html#a4">MmAddPhysicalMemory</a> (
01483     IN PPHYSICAL_ADDRESS StartAddress,
01484     IN OUT PLARGE_INTEGER NumberOfBytes
01485     );
01486 
01487 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01488 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01489 <a class="code" href="../../d9/d3/dynmem_8c.html#a5">MmRemovePhysicalMemory</a> (
01490     IN PPHYSICAL_ADDRESS StartAddress,
01491     IN OUT PLARGE_INTEGER NumberOfBytes
01492     );
01493 
01494 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01495 <a class="code" href="../../d2/d1/mm_8h.html#a156">PPHYSICAL_MEMORY_RANGE</a>
01496 <a class="code" href="../../d9/d3/dynmem_8c.html#a6">MmGetPhysicalMemoryRanges</a> (
01497     VOID
01498     );
01499 
01500 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01501 <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a>
01502 <a class="code" href="../../d5/d6/iosup_8c.html#a63">MmAllocatePagesForMdl</a> (
01503     IN PHYSICAL_ADDRESS LowAddress,
01504     IN PHYSICAL_ADDRESS HighAddress,
01505     IN PHYSICAL_ADDRESS SkipBytes,
01506     IN SIZE_T TotalBytes
01507     );
01508 
01509 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01510 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01511 <a class="code" href="../../d5/d6/iosup_8c.html#a64">MmFreePagesFromMdl</a> (
01512     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MemoryDescriptorList
01513     );
01514 
01515 <span class="comment">// begin_wdm</span>
01516 
01517 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01518 PVOID
01519 <a class="code" href="../../d5/d6/iosup_8c.html#a57">MmMapIoSpace</a> (
01520     IN PHYSICAL_ADDRESS PhysicalAddress,
01521     IN SIZE_T NumberOfBytes,
01522     IN MEMORY_CACHING_TYPE CacheType
01523     );
01524 
01525 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01526 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01527 <a class="code" href="../../d5/d6/iosup_8c.html#a58">MmUnmapIoSpace</a> (
01528     IN PVOID BaseAddress,
01529     IN SIZE_T NumberOfBytes
01530     );
01531 
01532 <span class="comment">//  end_wdm end_ntddk end_ntifs</span>
01533 
01534 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01535 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01536 <a class="code" href="../../d5/d6/iosup_8c.html#a44">MmProbeAndLockSelectedPages</a> (
01537     IN OUT <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MemoryDescriptorList,
01538     IN PFILE_SEGMENT_ELEMENT SegmentArray,
01539     IN KPROCESSOR_MODE AccessMode,
01540     IN LOCK_OPERATION Operation
01541     );
01542 
01543 <span class="comment">//  begin_ntddk begin_ntifs</span>
01544 
01545 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01546 PVOID
01547 <a class="code" href="../../d5/d6/iosup_8c.html#a85">MmMapVideoDisplay</a> (
01548     IN PHYSICAL_ADDRESS PhysicalAddress,
01549     IN SIZE_T NumberOfBytes,
01550     IN MEMORY_CACHING_TYPE CacheType
01551      );
01552 
01553 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01554 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01555 <a class="code" href="../../d5/d6/iosup_8c.html#a86">MmUnmapVideoDisplay</a> (
01556      IN PVOID BaseAddress,
01557      IN SIZE_T NumberOfBytes
01558      );
01559 
01560 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01561 PHYSICAL_ADDRESS
01562 <a class="code" href="../../d5/d6/iosup_8c.html#a68">MmGetPhysicalAddress</a> (
01563     IN PVOID BaseAddress
01564     );
01565 
01566 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01567 PVOID
01568 <a class="code" href="../../d5/d6/iosup_8c.html#a69">MmGetVirtualForPhysical</a> (
01569     IN PHYSICAL_ADDRESS PhysicalAddress
01570     );
01571 
01572 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01573 PVOID
01574 <a class="code" href="../../d5/d6/iosup_8c.html#a60">MmAllocateContiguousMemory</a> (
01575     IN SIZE_T NumberOfBytes,
01576     IN PHYSICAL_ADDRESS HighestAcceptableAddress
01577     );
01578 
01579 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01580 PVOID
01581 <a class="code" href="../../d5/d6/iosup_8c.html#a59">MmAllocateContiguousMemorySpecifyCache</a> (
01582     IN SIZE_T NumberOfBytes,
01583     IN PHYSICAL_ADDRESS LowestAcceptableAddress,
01584     IN PHYSICAL_ADDRESS HighestAcceptableAddress,
01585     IN PHYSICAL_ADDRESS BoundaryAddressMultiple OPTIONAL,
01586     IN MEMORY_CACHING_TYPE CacheType
01587     );
01588 
01589 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01590 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01591 <a class="code" href="../../d5/d6/iosup_8c.html#a66">MmFreeContiguousMemory</a> (
01592     IN PVOID BaseAddress
01593     );
01594 
01595 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01596 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01597 <a class="code" href="../../d5/d6/iosup_8c.html#a67">MmFreeContiguousMemorySpecifyCache</a> (
01598     IN PVOID BaseAddress,
01599     IN SIZE_T NumberOfBytes,
01600     IN MEMORY_CACHING_TYPE CacheType
01601     );
01602 
01603 <span class="comment">// end_ntddk end_ntifs end_nthal</span>
01604 
01605 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01606 ULONG
01607 <a class="code" href="../../d5/d6/iosup_8c.html#a89">MmGatherMemoryForHibernate</a> (
01608     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> Mdl,
01609     IN BOOLEAN Wait
01610     );
01611 
01612 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01613 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01614 <a class="code" href="../../d5/d6/iosup_8c.html#a90">MmReturnMemoryForHibernate</a> (
01615     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> Mdl
01616     );
01617 
01618 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01619 <a class="code" href="../../d5/d6/iosup_8c.html#a83">MmReleaseDumpAddresses</a> (
01620     IN PFN_NUMBER Pages
01621     );
01622 
01623 <span class="comment">// begin_ntddk begin_ntifs begin_nthal</span>
01624 
01625 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01626 PVOID
01627 <a class="code" href="../../d5/d6/iosup_8c.html#a70">MmAllocateNonCachedMemory</a> (
01628     IN SIZE_T NumberOfBytes
01629     );
01630 
01631 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01632 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01633 <a class="code" href="../../d5/d6/iosup_8c.html#a71">MmFreeNonCachedMemory</a> (
01634     IN PVOID BaseAddress,
01635     IN SIZE_T NumberOfBytes
01636     );
01637 
01638 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01639 BOOLEAN
01640 <a class="code" href="../../d8/d2/pagfault_8c.html#a26">MmIsAddressValid</a> (
01641     IN PVOID VirtualAddress
01642     );
01643 
01644 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01645 BOOLEAN
01646 <a class="code" href="../../d0/d2/mmsup_8c.html#a17">MmIsNonPagedSystemAddressValid</a> (
01647     IN PVOID VirtualAddress
01648     );
01649 
01650 <span class="comment">//  begin_wdm</span>
01651 
01652 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01653 SIZE_T
01654 <a class="code" href="../../d5/d6/iosup_8c.html#a72">MmSizeOfMdl</a>(
01655     IN PVOID Base,
01656     IN SIZE_T Length
01657     );
01658 
01659 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01660 <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a>
01661 <a class="code" href="../../d5/d6/iosup_8c.html#a73">MmCreateMdl</a>(
01662     IN <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MemoryDescriptorList OPTIONAL,
01663     IN PVOID Base,
01664     IN SIZE_T Length
01665     );
01666 
01667 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01668 PVOID
01669 <a class="code" href="../../d5/d6/iosup_8c.html#a79">MmLockPagableDataSection</a>(
01670     IN PVOID AddressWithinSection
01671     );
01672 
01673 <span class="comment">//  end_wdm</span>
01674 
01675 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01676 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01677 <a class="code" href="../../d5/d6/iosup_8c.html#a76">MmLockPagableSectionByHandle</a> (
01678     IN PVOID ImageSectionHandle
01679     );
01680 
01681 <span class="comment">// end_ntddk end_ntifs</span>
01682 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01683 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01684 <a class="code" href="../../d5/d6/iosup_8c.html#a87">MmLockPagedPool</a> (
01685     IN PVOID Address,
01686     IN SIZE_T Size
01687     );
01688 
01689 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01690 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01691 <a class="code" href="../../d5/d6/iosup_8c.html#a88">MmUnlockPagedPool</a> (
01692     IN PVOID Address,
01693     IN SIZE_T Size
01694     );
01695 
01696 <span class="comment">// begin_wdm begin_ntddk begin_ntifs</span>
01697 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01698 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01699 <a class="code" href="../../d8/d8/sysload_8c.html#a57">MmResetDriverPaging</a> (
01700     IN PVOID AddressWithinSection
01701     );
01702 
01703 
01704 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01705 PVOID
01706 <a class="code" href="../../d8/d8/sysload_8c.html#a56">MmPageEntireDriver</a> (
01707     IN PVOID AddressWithinSection
01708     );
01709 
01710 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01711 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01712 <a class="code" href="../../d5/d6/iosup_8c.html#a81">MmUnlockPagableImageSection</a>(
01713     IN PVOID ImageSectionHandle
01714     );
01715 
01716 <span class="comment">// end_wdm</span>
01717 
01718 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01719 HANDLE
01720 <a class="code" href="../../d3/d5/mapview_8c.html#a33">MmSecureVirtualMemory</a> (
01721     IN PVOID Address,
01722     IN SIZE_T Size,
01723     IN ULONG ProbeMode
01724     );
01725 
01726 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01727 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01728 <a class="code" href="../../d3/d5/mapview_8c.html#a34">MmUnsecureVirtualMemory</a> (
01729     IN HANDLE SecureHandle
01730     );
01731 
01732 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01733 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01734 <a class="code" href="../../d3/d5/mapview_8c.html#a27">MmMapViewInSystemSpace</a> (
01735     IN PVOID Section,
01736     OUT PVOID *MappedBase,
01737     IN PSIZE_T ViewSize
01738     );
01739 
01740 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01741 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01742 <a class="code" href="../../d3/d5/mapview_8c.html#a29">MmUnmapViewInSystemSpace</a> (
01743     IN PVOID MappedBase
01744     );
01745 
01746 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01747 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01748 <a class="code" href="../../d3/d5/mapview_8c.html#a28">MmMapViewInSessionSpace</a> (
01749     IN PVOID Section,
01750     OUT PVOID *MappedBase,
01751     IN OUT PSIZE_T ViewSize
01752     );
01753 
01754 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01755 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01756 <a class="code" href="../../d3/d5/mapview_8c.html#a30">MmUnmapViewInSessionSpace</a> (
01757     IN PVOID MappedBase
01758     );
01759 
01760 <span class="comment">// begin_wdm</span>
01761 
01762 <span class="comment">//++</span>
01763 <span class="comment">//</span>
01764 <span class="comment">// VOID</span>
01765 <span class="comment">// MmInitializeMdl (</span>
01766 <span class="comment">//     IN PMDL MemoryDescriptorList,</span>
01767 <span class="comment">//     IN PVOID BaseVa,</span>
01768 <span class="comment">//     IN SIZE_T Length</span>
01769 <span class="comment">//     )</span>
01770 <span class="comment">//</span>
01771 <span class="comment">// Routine Description:</span>
01772 <span class="comment">//</span>
01773 <span class="comment">//     This routine initializes the header of a Memory Descriptor List (MDL).</span>
01774 <span class="comment">//</span>
01775 <span class="comment">// Arguments:</span>
01776 <span class="comment">//</span>
01777 <span class="comment">//     MemoryDescriptorList - Pointer to the MDL to initialize.</span>
01778 <span class="comment">//</span>
01779 <span class="comment">//     BaseVa - Base virtual address mapped by the MDL.</span>
01780 <span class="comment">//</span>
01781 <span class="comment">//     Length - Length, in bytes, of the buffer mapped by the MDL.</span>
01782 <span class="comment">//</span>
01783 <span class="comment">// Return Value:</span>
01784 <span class="comment">//</span>
01785 <span class="comment">//     None.</span>
01786 <span class="comment">//</span>
01787 <span class="comment">//--</span>
01788 
<a name="l01789"></a><a class="code" href="../../d2/d1/mm_8h.html#a24">01789</a> <span class="preprocessor">#define MmInitializeMdl(MemoryDescriptorList, BaseVa, Length) { \</span>
01790 <span class="preprocessor">    (MemoryDescriptorList)-&gt;Next = (PMDL) NULL; \</span>
01791 <span class="preprocessor">    (MemoryDescriptorList)-&gt;Size = (CSHORT)(sizeof(MDL) +  \</span>
01792 <span class="preprocessor">            (sizeof(PFN_NUMBER) * ADDRESS_AND_SIZE_TO_SPAN_PAGES((BaseVa), (Length)))); \</span>
01793 <span class="preprocessor">    (MemoryDescriptorList)-&gt;MdlFlags = 0; \</span>
01794 <span class="preprocessor">    (MemoryDescriptorList)-&gt;StartVa = (PVOID) PAGE_ALIGN((BaseVa)); \</span>
01795 <span class="preprocessor">    (MemoryDescriptorList)-&gt;ByteOffset = BYTE_OFFSET((BaseVa)); \</span>
01796 <span class="preprocessor">    (MemoryDescriptorList)-&gt;ByteCount = (ULONG)(Length); \</span>
01797 <span class="preprocessor">    }</span>
01798 <span class="preprocessor"></span>
01799 <span class="comment">//++</span>
01800 <span class="comment">//</span>
01801 <span class="comment">// PVOID</span>
01802 <span class="comment">// MmGetSystemAddressForMdlSafe (</span>
01803 <span class="comment">//     IN PMDL MDL,</span>
01804 <span class="comment">//     IN MM_PAGE_PRIORITY PRIORITY</span>
01805 <span class="comment">//     )</span>
01806 <span class="comment">//</span>
01807 <span class="comment">// Routine Description:</span>
01808 <span class="comment">//</span>
01809 <span class="comment">//     This routine returns the mapped address of an MDL. If the</span>
01810 <span class="comment">//     Mdl is not already mapped or a system address, it is mapped.</span>
01811 <span class="comment">//</span>
01812 <span class="comment">// Arguments:</span>
01813 <span class="comment">//</span>
01814 <span class="comment">//     MemoryDescriptorList - Pointer to the MDL to map.</span>
01815 <span class="comment">//</span>
01816 <span class="comment">//     Priority - Supplies an indication as to how important it is that this</span>
01817 <span class="comment">//                request succeed under low available PTE conditions.</span>
01818 <span class="comment">//</span>
01819 <span class="comment">// Return Value:</span>
01820 <span class="comment">//</span>
01821 <span class="comment">//     Returns the base address where the pages are mapped.  The base address</span>
01822 <span class="comment">//     has the same offset as the virtual address in the MDL.</span>
01823 <span class="comment">//</span>
01824 <span class="comment">//     Unlike MmGetSystemAddressForMdl, Safe guarantees that it will always</span>
01825 <span class="comment">//     return NULL on failure instead of bugchecking the system.</span>
01826 <span class="comment">//</span>
01827 <span class="comment">//     This macro is not usable by WDM 1.0 drivers as 1.0 did not include</span>
01828 <span class="comment">//     MmMapLockedPagesSpecifyCache.  The solution for WDM 1.0 drivers is to</span>
01829 <span class="comment">//     provide synchronization and set/reset the MDL_MAPPING_CAN_FAIL bit.</span>
01830 <span class="comment">//</span>
01831 <span class="comment">//--</span>
01832 
<a name="l01833"></a><a class="code" href="../../d2/d1/mm_8h.html#a25">01833</a> <span class="preprocessor">#define MmGetSystemAddressForMdlSafe(MDL, PRIORITY)                    \</span>
01834 <span class="preprocessor">     (((MDL)-&gt;MdlFlags &amp; (MDL_MAPPED_TO_SYSTEM_VA |                    \</span>
01835 <span class="preprocessor">                        MDL_SOURCE_IS_NONPAGED_POOL)) ?                \</span>
01836 <span class="preprocessor">                             ((MDL)-&gt;MappedSystemVa) :                 \</span>
01837 <span class="preprocessor">                             (MmMapLockedPagesSpecifyCache((MDL),      \</span>
01838 <span class="preprocessor">                                                           KernelMode, \</span>
01839 <span class="preprocessor">                                                           MmCached,   \</span>
01840 <span class="preprocessor">                                                           NULL,       \</span>
01841 <span class="preprocessor">                                                           FALSE,      \</span>
01842 <span class="preprocessor">                                                           (PRIORITY))))</span>
01843 <span class="preprocessor"></span>
01844 <span class="comment">//++</span>
01845 <span class="comment">//</span>
01846 <span class="comment">// PVOID</span>
01847 <span class="comment">// MmGetSystemAddressForMdl (</span>
01848 <span class="comment">//     IN PMDL MDL</span>
01849 <span class="comment">//     )</span>
01850 <span class="comment">//</span>
01851 <span class="comment">// Routine Description:</span>
01852 <span class="comment">//</span>
01853 <span class="comment">//     This routine returns the mapped address of an MDL, if the</span>
01854 <span class="comment">//     Mdl is not already mapped or a system address, it is mapped.</span>
01855 <span class="comment">//</span>
01856 <span class="comment">// Arguments:</span>
01857 <span class="comment">//</span>
01858 <span class="comment">//     MemoryDescriptorList - Pointer to the MDL to map.</span>
01859 <span class="comment">//</span>
01860 <span class="comment">// Return Value:</span>
01861 <span class="comment">//</span>
01862 <span class="comment">//     Returns the base address where the pages are mapped.  The base address</span>
01863 <span class="comment">//     has the same offset as the virtual address in the MDL.</span>
01864 <span class="comment">//</span>
01865 <span class="comment">//--</span>
01866 
01867 <span class="comment">//#define MmGetSystemAddressForMdl(MDL)</span>
01868 <span class="comment">//     (((MDL)-&gt;MdlFlags &amp; (MDL_MAPPED_TO_SYSTEM_VA)) ?</span>
01869 <span class="comment">//                             ((MDL)-&gt;MappedSystemVa) :</span>
01870 <span class="comment">//                ((((MDL)-&gt;MdlFlags &amp; (MDL_SOURCE_IS_NONPAGED_POOL)) ?</span>
01871 <span class="comment">//                      ((PVOID)((ULONG)(MDL)-&gt;StartVa | (MDL)-&gt;ByteOffset)) :</span>
01872 <span class="comment">//                            (MmMapLockedPages((MDL),KernelMode)))))</span>
01873 
<a name="l01874"></a><a class="code" href="../../d2/d1/mm_8h.html#a26">01874</a> <span class="preprocessor">#define MmGetSystemAddressForMdl(MDL)                                  \</span>
01875 <span class="preprocessor">     (((MDL)-&gt;MdlFlags &amp; (MDL_MAPPED_TO_SYSTEM_VA |                    \</span>
01876 <span class="preprocessor">                        MDL_SOURCE_IS_NONPAGED_POOL)) ?                \</span>
01877 <span class="preprocessor">                             ((MDL)-&gt;MappedSystemVa) :                 \</span>
01878 <span class="preprocessor">                             (MmMapLockedPages((MDL),KernelMode)))</span>
01879 <span class="preprocessor"></span>
01880 <span class="comment">//++</span>
01881 <span class="comment">//</span>
01882 <span class="comment">// VOID</span>
01883 <span class="comment">// MmPrepareMdlForReuse (</span>
01884 <span class="comment">//     IN PMDL MDL</span>
01885 <span class="comment">//     )</span>
01886 <span class="comment">//</span>
01887 <span class="comment">// Routine Description:</span>
01888 <span class="comment">//</span>
01889 <span class="comment">//     This routine will take all of the steps necessary to allow an MDL to be</span>
01890 <span class="comment">//     re-used.</span>
01891 <span class="comment">//</span>
01892 <span class="comment">// Arguments:</span>
01893 <span class="comment">//</span>
01894 <span class="comment">//     MemoryDescriptorList - Pointer to the MDL that will be re-used.</span>
01895 <span class="comment">//</span>
01896 <span class="comment">// Return Value:</span>
01897 <span class="comment">//</span>
01898 <span class="comment">//     None.</span>
01899 <span class="comment">//</span>
01900 <span class="comment">//--</span>
01901 
<a name="l01902"></a><a class="code" href="../../d2/d1/mm_8h.html#a27">01902</a> <span class="preprocessor">#define MmPrepareMdlForReuse(MDL)                                       \</span>
01903 <span class="preprocessor">    if (((MDL)-&gt;MdlFlags &amp; MDL_PARTIAL_HAS_BEEN_MAPPED) != 0) {         \</span>
01904 <span class="preprocessor">        ASSERT(((MDL)-&gt;MdlFlags &amp; MDL_PARTIAL) != 0);                   \</span>
01905 <span class="preprocessor">        MmUnmapLockedPages( (MDL)-&gt;MappedSystemVa, (MDL) );             \</span>
01906 <span class="preprocessor">    } else if (((MDL)-&gt;MdlFlags &amp; MDL_PARTIAL) == 0) {                  \</span>
01907 <span class="preprocessor">        ASSERT(((MDL)-&gt;MdlFlags &amp; MDL_MAPPED_TO_SYSTEM_VA) == 0);       \</span>
01908 <span class="preprocessor">    }</span>
01909 <span class="preprocessor"></span>
<a name="l01910"></a><a class="code" href="../../d2/d1/mm_8h.html#a157">01910</a> <span class="keyword">typedef</span> <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> (*<a class="code" href="../../d2/d1/mm_8h.html#a157">PMM_DLL_INITIALIZE</a>)(
01911     IN PUNICODE_STRING RegistryPath
01912     );
01913 
<a name="l01914"></a><a class="code" href="../../d2/d1/mm_8h.html#a158">01914</a> <span class="keyword">typedef</span> <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> (*<a class="code" href="../../d2/d1/mm_8h.html#a158">PMM_DLL_UNLOAD</a>)(
01915     <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01916     );
01917 
01918 
01919 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
01920 
01921 <span class="preprocessor">#if DBG || (i386 &amp;&amp; !FPO)</span>
01922 <span class="preprocessor"></span><span class="keyword">typedef</span> <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> (*PMM_SNAPSHOT_POOL_PAGE)(
01923     IN PVOID Address,
01924     IN ULONG <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>,
01925     IN PSYSTEM_POOL_INFORMATION PoolInformation,
01926     IN PSYSTEM_POOL_ENTRY *PoolEntryInfo,
01927     IN ULONG Length,
01928     IN OUT PULONG RequiredLength
01929     );
01930 
01931 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
01932 MmSnapShotPool(
01933     IN POOL_TYPE PoolType,
01934     IN PMM_SNAPSHOT_POOL_PAGE SnapShotPoolPage,
01935     IN PSYSTEM_POOL_INFORMATION PoolInformation,
01936     IN ULONG Length,
01937     IN OUT PULONG RequiredLength
01938     );
01939 <span class="preprocessor">#endif // DBG || (i386 &amp;&amp; !FPO)</span>
01940 <span class="preprocessor"></span>
01941 PVOID
01942 <a class="code" href="../../d1/d6/allocpag_8c.html#a60">MmAllocateSpecialPool</a> (
01943     IN SIZE_T NumberOfBytes,
01944     IN ULONG Tag,
01945     IN POOL_TYPE Type,
01946     IN ULONG SpecialPoolType
01947     );
01948 
01949 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
01950 <a class="code" href="../../d1/d6/allocpag_8c.html#a41">MmFreeSpecialPool</a> (
01951     IN PVOID P
01952     );
01953 
01954 LOGICAL
01955 <a class="code" href="../../d1/d6/allocpag_8c.html#a39">MmSetSpecialPool</a> (
01956     IN LOGICAL Enable
01957     );
01958 
01959 LOGICAL
01960 <a class="code" href="../../d1/d6/allocpag_8c.html#a67">MmProtectSpecialPool</a> (
01961     IN PVOID VirtualAddress,
01962     IN ULONG NewProtect
01963     );
01964 
01965 LOGICAL
01966 <a class="code" href="../../d1/d6/allocpag_8c.html#a66">MmIsSpecialPoolAddressFree</a> (
01967     IN PVOID VirtualAddress
01968     );
01969 
01970 SIZE_T
01971 <a class="code" href="../../d1/d6/allocpag_8c.html#a57">MmQuerySpecialPoolBlockSize</a> (
01972     IN PVOID P
01973     );
01974 
<a name="l01975"></a><a class="code" href="../../d2/d1/mm_8h.html#a159">01975</a> <span class="keyword">extern</span> ULONG <a class="code" href="../../d2/d1/mm_8h.html#a159">MmSpecialPoolTag</a>;
<a name="l01976"></a><a class="code" href="../../d2/d1/mm_8h.html#a160">01976</a> <span class="keyword">extern</span> PVOID <a class="code" href="../../d2/d1/mm_8h.html#a160">MmSpecialPoolStart</a>;
<a name="l01977"></a><a class="code" href="../../d2/d1/mm_8h.html#a161">01977</a> <span class="keyword">extern</span> PVOID <a class="code" href="../../d2/d1/mm_8h.html#a161">MmSpecialPoolEnd</a>;
01978 
01979 LOGICAL
01980 <a class="code" href="../../d1/d6/allocpag_8c.html#a65">MmIsHydraAddress</a> (
01981     IN PVOID VirtualAddress
01982     );
01983 
01984 PUNICODE_STRING
01985 <a class="code" href="../../d8/d8/sysload_8c.html#a58">MmLocateUnloadedDriver</a> (
01986     IN PVOID VirtualAddress
01987     );
01988 
01989 <span class="comment">// begin_ntddk</span>
01990 
01991 <span class="comment">//</span>
01992 <span class="comment">// Define an empty typedef for the _DRIVER_OBJECT structure so it may be</span>
01993 <span class="comment">// referenced by function types before it is actually defined.</span>
01994 <span class="comment">//</span>
01995 <span class="keyword">struct </span><a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">_DRIVER_OBJECT</a>;
01996 
01997 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
01998 LOGICAL
01999 <a class="code" href="../../d9/d5/verifier_8c.html#a112">MmIsDriverVerifying</a> (
02000     IN <span class="keyword">struct</span> <a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html">_DRIVER_OBJECT</a> *DriverObject
02001     );
02002 
02003 <span class="comment">// end_ntddk</span>
02004 
02005 LOGICAL
02006 <a class="code" href="../../d5/d0/wsmanage_8c.html#a48">MmTrimAllSystemPagableMemory</a> (
02007     IN LOGICAL PurgeTransition
02008     );
02009 
<a name="l02010"></a><a class="code" href="../../d2/d1/mm_8h.html#a28">02010</a> <span class="preprocessor">#define MMNONPAGED_QUOTA_INCREASE (64*1024)</span>
02011 <span class="preprocessor"></span>
<a name="l02012"></a><a class="code" href="../../d2/d1/mm_8h.html#a29">02012</a> <span class="preprocessor">#define MMPAGED_QUOTA_INCREASE (512*1024)</span>
02013 <span class="preprocessor"></span>
<a name="l02014"></a><a class="code" href="../../d2/d1/mm_8h.html#a30">02014</a> <span class="preprocessor">#define MMNONPAGED_QUOTA_CHECK (256*1024)</span>
02015 <span class="preprocessor"></span>
<a name="l02016"></a><a class="code" href="../../d2/d1/mm_8h.html#a31">02016</a> <span class="preprocessor">#define MMPAGED_QUOTA_CHECK (4*1024*1024)</span>
02017 <span class="preprocessor"></span>
02018 BOOLEAN
02019 <a class="code" href="../../d6/d1/mmquota_8c.html#a23">MmRaisePoolQuota</a>(
02020     IN POOL_TYPE PoolType,
02021     IN SIZE_T OldQuotaLimit,
02022     OUT PSIZE_T NewQuotaLimit
02023     );
02024 
02025 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02026 <a class="code" href="../../d6/d1/mmquota_8c.html#a24">MmReturnPoolQuota</a>(
02027     IN POOL_TYPE PoolType,
02028     IN SIZE_T ReturnedQuota
02029     );
02030 
02031 <span class="comment">//</span>
02032 <span class="comment">// Zero page thread routine.</span>
02033 <span class="comment">//</span>
02034 
02035 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02036 <a class="code" href="../../d7/d1/zeropage_8c.html#a3">MmZeroPageThread</a> (
02037     VOID
02038     );
02039 
02040 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02041 <a class="code" href="../../d9/d5/readwrt_8c.html#a11">MmCopyVirtualMemory</a>(
02042     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> FromProcess,
02043     IN PVOID FromAddress,
02044     IN <a class="code" href="../../d0/d4/struct__EPROCESS.html">PEPROCESS</a> ToProcess,
02045     OUT PVOID ToAddress,
02046     IN ULONG BufferSize,
02047     IN KPROCESSOR_MODE PreviousMode,
02048     OUT PULONG NumberOfBytesCopied
02049     );
02050 
02051 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02052 <a class="code" href="../../d5/d6/iosup_8c.html#a78">MmGetSectionRange</a>(
02053     IN PVOID AddressWithinSection,
02054     OUT PVOID *StartingSectionAddress,
02055     OUT PULONG SizeofSection
02056     );
02057 
02058 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02059 <a class="code" href="../../d5/d6/iosup_8c.html#a82">MmMapMemoryDumpMdl</a>(
02060     IN OUT <a class="code" href="../../d6/d7/struct__MDL.html">PMDL</a> MemoryDumpMdl
02061     );
02062 
02063 
02064 <span class="comment">// begin_ntminiport</span>
02065 
02066 <span class="comment">//</span>
02067 <span class="comment">// Graphics support routines.</span>
02068 <span class="comment">//</span>
02069 
02070 <span class="keyword">typedef</span>
02071 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l02072"></a><a class="code" href="../../d2/d1/mm_8h.html#a162">02072</a> (*PBANKED_SECTION_ROUTINE) (
02073     IN ULONG ReadBank,
02074     IN ULONG WriteBank,
02075     IN PVOID Context
02076     );
02077 
02078 <span class="comment">// end_ntminiport</span>
02079 
02080 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02081 <a class="code" href="../../d5/d6/iosup_8c.html#a84">MmSetBankedSection</a>(
02082     IN HANDLE ProcessHandle,
02083     IN PVOID VirtualAddress,
02084     IN ULONG BankLength,
02085     IN BOOLEAN ReadWriteBank,
02086     IN PBANKED_SECTION_ROUTINE BankRoutine,
02087     IN PVOID Context);
02088 
02089 
02090 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02091 BOOLEAN
02092 <a class="code" href="../../d2/d1/mm_8h.html#a336">MmIsSystemAddressAccessable</a> (
02093     IN PVOID VirtualAddress
02094     );
02095 
02096 BOOLEAN
02097 <a class="code" href="../../d8/d8/sysload_8c.html#a60">MmVerifyImageIsOkForMpUse</a>(
02098     IN PVOID BaseAddress
02099     );
02100 
02101 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02102 <a class="code" href="../../d6/d0/dmpaddr_8c.html#a0">MmMemoryUsage</a> (
02103     IN PVOID Buffer,
02104     IN ULONG Size,
02105     IN ULONG Type,
02106     OUT PULONG Length
02107     );
02108 
02109 <span class="keyword">typedef</span>
02110 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l02111"></a><a class="code" href="../../d2/d1/mm_8h.html#a163">02111</a> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a> *<a class="code" href="../../d2/d1/mm_8h.html#a163">PPAGE_FAULT_NOTIFY_ROUTINE</a>)(
02112     IN <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>,
02113     IN PVOID VirtualAddress,
02114     IN PVOID TrapInformation
02115     );
02116 
02117 <span class="keyword">typedef</span>
02118 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l02119"></a><a class="code" href="../../d2/d1/mm_8h.html#a164">02119</a> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a> *<a class="code" href="../../d2/d1/mm_8h.html#a164">PHARD_FAULT_NOTIFY_ROUTINE</a>)(
02120     IN HANDLE FileObject,
02121     IN PVOID VirtualAddress
02122     );
02123 
02124 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02125 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02126 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
02127 <a class="code" href="../../d5/d1/mminit_8c.html#a59">MmSetPageFaultNotifyRoutine</a>(
02128     IN PPAGE_FAULT_NOTIFY_ROUTINE NotifyRoutine
02129     );
02130 
02131 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
02132 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02133 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
02134 <a class="code" href="../../d5/d1/mminit_8c.html#a60">MmSetHardFaultNotifyRoutine</a>(
02135     IN PHARD_FAULT_NOTIFY_ROUTINE NotifyRoutine
02136     );
02137 
02138 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
02139 <a class="code" href="../../d8/d8/sysload_8c.html#a67">MmCallDllInitialize</a>(
02140     IN  PLDR_DATA_TABLE_ENTRY DataTableEntry
02141     );
02142 
02143 <span class="comment">// Crash dump only</span>
02144 <span class="comment">// Called to initialize the kernel memory to include in a summary dump</span>
02145 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
02146 <a class="code" href="../../d5/d6/iosup_8c.html#a91">MmSetKernelDumpRange</a>(
02147     IN PVOID DumpContext
02148     );
02149 
02150 <span class="preprocessor">#ifdef NTPERF</span>
02151 <span class="preprocessor"></span><span class="preprocessor">#include "perfinfokrn.h"</span>
02152 <span class="preprocessor">#else</span>
<a name="l02153"></a><a class="code" href="../../d2/d1/mm_8h.html#a32">02153</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_ADDPOOLPAGE(CheckType, PoolIndex, Addr, PoolDesc)</span>
<a name="l02154"></a><a class="code" href="../../d2/d1/mm_8h.html#a33">02154</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_ADDTOWS(PageFrame, Address, Pid)</span>
<a name="l02155"></a><a class="code" href="../../d2/d1/mm_8h.html#a34">02155</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_BIGPOOLALLOC(Type, PTag, NumBytes, Addr)</span>
02156 <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_CM_CHECKCELLTYPE(Map)</span>
<a name="l02157"></a><a class="code" href="../../d2/d1/mm_8h.html#a36">02157</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_CM_CHECKCELLTYPE(Map)</span>
<a name="l02158"></a><a class="code" href="../../d2/d1/mm_8h.html#a37">02158</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_CM_HIVECELL_REFERENCE_FLAT(Hive, pcell, Cell)</span>
<a name="l02159"></a><a class="code" href="../../d2/d1/mm_8h.html#a38">02159</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_CM_HIVECELL_REFERENCE_PAGED(Hive, pcell, Cell, Type, Map)</span>
<a name="l02160"></a><a class="code" href="../../d2/d1/mm_8h.html#a39">02160</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_CONVERT_TO_GUI_THREAD(EThread)</span>
<a name="l02161"></a><a class="code" href="../../d2/d1/mm_8h.html#a40">02161</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_DECREFCNT(PageFrame, Flag, Type)</span>
<a name="l02162"></a><a class="code" href="../../d2/d1/mm_8h.html#a41">02162</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_DELETE_STACK(PointerPte, NumberOfPtes)</span>
<a name="l02163"></a><a class="code" href="../../d2/d1/mm_8h.html#a42">02163</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_DISPATCHFAULT_DECL()</span>
<a name="l02164"></a><a class="code" href="../../d2/d1/mm_8h.html#a43">02164</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_DRIVER_COMPLETIONROUTINE_CALL(irp, irpsp)</span>
<a name="l02165"></a><a class="code" href="../../d2/d1/mm_8h.html#a44">02165</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_DRIVER_COMPLETIONROUTINE_RETURN(irp, irpsp)</span>
<a name="l02166"></a><a class="code" href="../../d2/d1/mm_8h.html#a45">02166</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_DRIVER_INIT(pdo)</span>
<a name="l02167"></a><a class="code" href="../../d2/d1/mm_8h.html#a46">02167</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_DRIVER_INIT_COMPLETE(pdo)</span>
<a name="l02168"></a><a class="code" href="../../d2/d1/mm_8h.html#a47">02168</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_DRIVER_MAJORFUNCTION_CALL(irp, irpsp, pdo)</span>
<a name="l02169"></a><a class="code" href="../../d2/d1/mm_8h.html#a48">02169</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_DRIVER_MAJORFUNCTION_RETURN(irp, irpsp, pdo)</span>
<a name="l02170"></a><a class="code" href="../../d2/d1/mm_8h.html#a49">02170</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_EXALLOCATEPOOLWITHTAG_DECL()</span>
<a name="l02171"></a><a class="code" href="../../d2/d1/mm_8h.html#a50">02171</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_EXFREEPOOLWITHTAG_DECL()</span>
<a name="l02172"></a><a class="code" href="../../d2/d1/mm_8h.html#a51">02172</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_FREEPOOL(Addr)</span>
<a name="l02173"></a><a class="code" href="../../d2/d1/mm_8h.html#a52">02173</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_FREEPOOLPAGE(CheckType, PoolIndex, Addr, PoolDesc)</span>
<a name="l02174"></a><a class="code" href="../../d2/d1/mm_8h.html#a53">02174</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_GET_PAGE_INFO(PointerPte)</span>
<a name="l02175"></a><a class="code" href="../../d2/d1/mm_8h.html#a54">02175</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_GET_PAGE_INFO_REPLACEMENT(PointerPte)</span>
<a name="l02176"></a><a class="code" href="../../d2/d1/mm_8h.html#a55">02176</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_GET_PAGE_INFO_WITH_DECL(PointerPte)</span>
<a name="l02177"></a><a class="code" href="../../d2/d1/mm_8h.html#a56">02177</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_GROW_STACK(EThread)</span>
<a name="l02178"></a><a class="code" href="../../d2/d1/mm_8h.html#a57">02178</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_HARDFAULT(Address, InpageSupport)</span>
<a name="l02179"></a><a class="code" href="../../d2/d1/mm_8h.html#a58">02179</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_HARDFAULT_INFO(ProtoPte)</span>
<a name="l02180"></a><a class="code" href="../../d2/d1/mm_8h.html#a59">02180</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_HARDFAULT_IOTIME()</span>
<a name="l02181"></a><a class="code" href="../../d2/d1/mm_8h.html#a60">02181</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_HIVECELL_REFERENCE_FLAT(Hive, pcell, Cell)</span>
<a name="l02182"></a><a class="code" href="../../d2/d1/mm_8h.html#a61">02182</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_HIVECELL_REFERENCE_PAGED(Hive, pcell, Cell, Type, Map)</span>
<a name="l02183"></a><a class="code" href="../../d2/d1/mm_8h.html#a62">02183</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_IMAGE_LOAD(LdrDataTableEntry)</span>
<a name="l02184"></a><a class="code" href="../../d2/d1/mm_8h.html#a63">02184</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_IMAGE_UNLOAD(Address)</span>
<a name="l02185"></a><a class="code" href="../../d2/d1/mm_8h.html#a64">02185</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_INIT_POOLRANGE(PoolStart, PoolPages)</span>
<a name="l02186"></a><a class="code" href="../../d2/d1/mm_8h.html#a65">02186</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_INIT_PERFMEMTABLE(LoaderBlock)</span>
<a name="l02187"></a><a class="code" href="../../d2/d1/mm_8h.html#a66">02187</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_INIT_TRACEFLAGS(OptionString, SpecificOption)</span>
<a name="l02188"></a><a class="code" href="../../d2/d1/mm_8h.html#a67">02188</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_INSERTINLIST(Page, ListHead)</span>
<a name="l02189"></a><a class="code" href="../../d2/d1/mm_8h.html#a68">02189</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_INSERT_FRONT_STANDBY(Page)</span>
<a name="l02190"></a><a class="code" href="../../d2/d1/mm_8h.html#a69">02190</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_LOG_MARK(PMARK)</span>
<a name="l02191"></a><a class="code" href="../../d2/d1/mm_8h.html#a70">02191</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_LOG_MARK_SPRINTF(PMARK, VARIABLE)</span>
<a name="l02192"></a><a class="code" href="../../d2/d1/mm_8h.html#a71">02192</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_LOG_WMI_TRACE_EVENT( PData, xLength)</span>
<a name="l02193"></a><a class="code" href="../../d2/d1/mm_8h.html#a72">02193</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_LOG_WMI_TRACE_KERNEL_EVENT(GroupType, PData, xLength, Thread)</span>
<a name="l02194"></a><a class="code" href="../../d2/d1/mm_8h.html#a73">02194</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_LOG_WMI_TRACE_LONG_EVENT(GroupType, PData, xCount, Thread)</span>
<a name="l02195"></a><a class="code" href="../../d2/d1/mm_8h.html#a74">02195</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_LOG_WS_REMOVAL(Type, WsInfo)</span>
<a name="l02196"></a><a class="code" href="../../d2/d1/mm_8h.html#a75">02196</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_LOG_WS_REPLACEMENT(WsInfo)</span>
<a name="l02197"></a><a class="code" href="../../d2/d1/mm_8h.html#a76">02197</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_MIH_DECL</span>
<a name="l02198"></a><a class="code" href="../../d2/d1/mm_8h.html#a77">02198</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_MMINIT_DECL</span>
<a name="l02199"></a><a class="code" href="../../d2/d1/mm_8h.html#a78">02199</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_MMINIT_START()</span>
<a name="l02200"></a><a class="code" href="../../d2/d1/mm_8h.html#a79">02200</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_MOD_PAGE_WRITER3()</span>
<a name="l02201"></a><a class="code" href="../../d2/d1/mm_8h.html#a80">02201</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_PAGE_INFO_DECL()</span>
<a name="l02202"></a><a class="code" href="../../d2/d1/mm_8h.html#a81">02202</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_PAGE_INFO_REPLACEMENT_DECL()</span>
<a name="l02203"></a><a class="code" href="../../d2/d1/mm_8h.html#a82">02203</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_POOLALLOC(Type, PTag, NumBytes)</span>
<a name="l02204"></a><a class="code" href="../../d2/d1/mm_8h.html#a83">02204</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_POOLALLOC_ADDR(Addr)</span>
<a name="l02205"></a><a class="code" href="../../d2/d1/mm_8h.html#a84">02205</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_POOL_ALLOC_COMMON(Type, PTag, NumBytes)</span>
<a name="l02206"></a><a class="code" href="../../d2/d1/mm_8h.html#a85">02206</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_PRIVATE_COPY_ON_WRITE(CopyFrom, PAGE_SIZE)</span>
<a name="l02207"></a><a class="code" href="../../d2/d1/mm_8h.html#a86">02207</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_PRIVATE_PAGE_DEMAND_ZERO(VirtualAddress)</span>
<a name="l02208"></a><a class="code" href="../../d2/d1/mm_8h.html#a87">02208</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_PROCESS_CREATE(EProcess)</span>
<a name="l02209"></a><a class="code" href="../../d2/d1/mm_8h.html#a88">02209</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_PROCESS_DELETE(EProcess)</span>
<a name="l02210"></a><a class="code" href="../../d2/d1/mm_8h.html#a89">02210</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_DELETE_PAGE(ppfn)</span>
<a name="l02211"></a><a class="code" href="../../d2/d1/mm_8h.html#a90">02211</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_REMOVEPAGE(PageIndex, LogType)</span>
<a name="l02212"></a><a class="code" href="../../d2/d1/mm_8h.html#a91">02212</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_SECTION_CREATE(ControlArea)</span>
<a name="l02213"></a><a class="code" href="../../d2/d1/mm_8h.html#a92">02213</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_SEGMENT_DELETE(FileName)</span>
<a name="l02214"></a><a class="code" href="../../d2/d1/mm_8h.html#a93">02214</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_SOFTFAULT(PageFrame, Address, Type)</span>
<a name="l02215"></a><a class="code" href="../../d2/d1/mm_8h.html#a94">02215</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_THREAD_CREATE(EThread, ITeb)</span>
<a name="l02216"></a><a class="code" href="../../d2/d1/mm_8h.html#a95">02216</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_THREAD_DELETE(EThread)</span>
<a name="l02217"></a><a class="code" href="../../d2/d1/mm_8h.html#a96">02217</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_UNLINKFREEPAGE(Index, Location)</span>
<a name="l02218"></a><a class="code" href="../../d2/d1/mm_8h.html#a97">02218</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_UNLINKPAGE(Index, Location)</span>
<a name="l02219"></a><a class="code" href="../../d2/d1/mm_8h.html#a98">02219</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_ACTUALTRIM(Trim)</span>
<a name="l02220"></a><a class="code" href="../../d2/d1/mm_8h.html#a99">02220</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_DECL()</span>
<a name="l02221"></a><a class="code" href="../../d2/d1/mm_8h.html#a100">02221</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_DUMPENTRIES()</span>
<a name="l02222"></a><a class="code" href="../../d2/d1/mm_8h.html#a101">02222</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_DUMPENTRIES_CLAIMS()</span>
<a name="l02223"></a><a class="code" href="../../d2/d1/mm_8h.html#a102">02223</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_DUMPENTRIES_FAULTS()</span>
<a name="l02224"></a><a class="code" href="../../d2/d1/mm_8h.html#a103">02224</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_DUMPWS(VmSupport, SampledAgeCounts)</span>
<a name="l02225"></a><a class="code" href="../../d2/d1/mm_8h.html#a104">02225</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_FINALACTION(TrimAction)</span>
<a name="l02226"></a><a class="code" href="../../d2/d1/mm_8h.html#a105">02226</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_GLOBAL_DECL</span>
<a name="l02227"></a><a class="code" href="../../d2/d1/mm_8h.html#a106">02227</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_LOGINFO_CLAIMS(TrimAction)</span>
<a name="l02228"></a><a class="code" href="../../d2/d1/mm_8h.html#a107">02228</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_LOGINFO_FAULTS(TrimAction)</span>
02229 <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_PROCESS_RESET(VmSupport)</span>
<a name="l02230"></a><a class="code" href="../../d2/d1/mm_8h.html#a109">02230</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_PROCESS_RESET(VmSupport)</span>
<a name="l02231"></a><a class="code" href="../../d2/d1/mm_8h.html#a110">02231</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_STARTLOG()</span>
<a name="l02232"></a><a class="code" href="../../d2/d1/mm_8h.html#a111">02232</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_STARTLOG_CLAIMS()</span>
<a name="l02233"></a><a class="code" href="../../d2/d1/mm_8h.html#a112">02233</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_STARTLOG_FAULTS()</span>
<a name="l02234"></a><a class="code" href="../../d2/d1/mm_8h.html#a113">02234</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_TOTRIM(Trim)</span>
<a name="l02235"></a><a class="code" href="../../d2/d1/mm_8h.html#a114">02235</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_TRIMACTION(TrimAction)</span>
<a name="l02236"></a><a class="code" href="../../d2/d1/mm_8h.html#a115">02236</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_TRIMEND_CLAIMS(Criteria)</span>
<a name="l02237"></a><a class="code" href="../../d2/d1/mm_8h.html#a116">02237</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_TRIMEND_FAULTS(Criteria)</span>
<a name="l02238"></a><a class="code" href="../../d2/d1/mm_8h.html#a117">02238</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_TRIMWS(Process, SessionSpace, VmSupport)</span>
02239 <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_TRIMWS_CLAIMINFO(VmSupport)</span>
<a name="l02240"></a><a class="code" href="../../d2/d1/mm_8h.html#a119">02240</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_TRIMWS_CLAIMINFO(VmSupport)</span>
<a name="l02241"></a><a class="code" href="../../d2/d1/mm_8h.html#a120">02241</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_WAITFORWRITER_CLAIMS()</span>
<a name="l02242"></a><a class="code" href="../../d2/d1/mm_8h.html#a121">02242</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_WAITFORWRITER_FAULTS()</span>
<a name="l02243"></a><a class="code" href="../../d2/d1/mm_8h.html#a122">02243</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_WILLTRIM(ReductionGoal, FreeGoal)</span>
<a name="l02244"></a><a class="code" href="../../d2/d1/mm_8h.html#a123">02244</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_WILLTRIM_CLAIMS(Criteria)</span>
<a name="l02245"></a><a class="code" href="../../d2/d1/mm_8h.html#a124">02245</a> <span class="preprocessor"></span><span class="preprocessor">#define PERFINFO_WSMANAGE_WILLTRIM_FAULTS(Criteria)</span>
02246 <span class="preprocessor"></span>
<a name="l02247"></a><a class="code" href="../../d2/d1/mm_8h.html#a125">02247</a> <span class="preprocessor">#define PERFINFO_DO_PAGEFAULT_CLUSTERING() 1</span>
02248 <span class="preprocessor"></span><span class="preprocessor">#endif // NTPERF</span>
02249 <span class="preprocessor"></span>
02250 <span class="preprocessor">#endif  // MM</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:50 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

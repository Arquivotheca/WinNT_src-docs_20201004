<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: parentinfo.cpp Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>parentinfo.cpp</h1><a href="../../d2/d3/parentinfo_8cpp.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">// ParentInfo.cpp: implementation of the CParentInfo class.</span>
00002 <span class="comment">//</span>
00004 <span class="comment"></span>
00005 <span class="preprocessor">#include "<a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html">pch.h</a>"</span>
00006 
00007 <span class="preprocessor">#include "ParentInfo.h"</span>
00008 <span class="preprocessor">#include "<a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html">debug.h</a>"</span>
00009 <span class="preprocessor">#include "<a class="code" href="../../d5/d5/persctl_8h.html">persctl.h</a>"</span>
00010 
00012 <span class="comment">// Construction/Destruction</span>
00014 <span class="comment"></span>
<a name="l00015"></a><a class="code" href="../../d4/d5/classCParentInfo.html#a5">00015</a> <a class="code" href="../../d4/d5/classCParentInfo.html#a5">CParentInfo::CParentInfo</a>()
00016 {
00017         SetRightBorder(0);
00018         SetLeftBorder(0);
00019         SetTopBorder(0);
00020         SetBottomBorder(0);
00021         <a class="code" href="../../d4/d5/classCParentInfo.html#r10">m_pTopEdge</a>=<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00022         <a class="code" href="../../d4/d5/classCParentInfo.html#r11">m_pBottomEdge</a>=<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00023         <a class="code" href="../../d4/d5/classCParentInfo.html#r8">m_pLeftEdge</a>=<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00024         <a class="code" href="../../d4/d5/classCParentInfo.html#r9">m_pRightEdge</a>=<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00025 }
00026 
<a name="l00029"></a><a class="code" href="../../d4/d5/classCParentInfo.html#a7">00029</a> <span class="keywordtype">void</span> <a class="code" href="../../d4/d5/classCParentInfo.html#a7">CParentInfo::Init</a>(HWND h)
00030 {
00031         <a class="code" href="../../d4/d5/classCParentInfo.html#r2">m_hWnd</a>=h;
00032         <a class="code" href="../../d4/d5/classCParentInfo.html#a14">DeterminSize</a>();
00033         SetRightBorder( <a class="code" href="../../d4/d5/classCParentInfo.html#a8">GetWidth</a>() );
00034         SetLeftBorder( <a class="code" href="../../d4/d5/classCParentInfo.html#a8">GetWidth</a>() );
00035         SetTopBorder( <a class="code" href="../../d4/d5/classCParentInfo.html#a9">GetHeight</a>() );
00036         SetBottomBorder( <a class="code" href="../../d4/d5/classCParentInfo.html#a9">GetHeight</a>() );
00037 }
00038 
<a name="l00041"></a><a class="code" href="../../d4/d5/classCParentInfo.html#a6">00041</a> <a class="code" href="../../d4/d5/classCParentInfo.html#a6">CParentInfo::~CParentInfo</a>()
00042 {
00043 
00044 }
00045 
00047 <span class="comment">//</span>
00048 <span class="comment">//</span>
00049 <span class="comment">// This is the size of the client area of the window</span>
00050 <span class="comment">// we don't have to take into account the frame and title bar when positioning</span>
00051 <span class="comment">// indside it.</span>
00052 <span class="comment">//</span>
<a name="l00054"></a><a class="code" href="../../d4/d5/classCParentInfo.html#a14">00054</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="../../d4/d5/classCParentInfo.html#a14">CParentInfo::DeterminSize</a>()
00055 {
00056         <a class="code" href="../../d3/d9/client_2wow_8c.html#a24">GetClientRect</a>( <a class="code" href="../../d4/d5/classCParentInfo.html#a15">GetWindow</a>(), &amp;<a class="code" href="../../d4/d5/classCParentInfo.html#r1">m_Size</a>);
00057         RECT r;
00058         <a class="code" href="../../d3/d9/client_2wow_8c.html#a26">GetWindowRect</a>( <a class="code" href="../../d4/d5/classCParentInfo.html#a15">GetWindow</a>(), &amp;r);
00059         <a class="code" href="../../d8/d3/structtagDIMENSION.html">DIMENSION</a> d;
00060         d.<a class="code" href="../../d8/d3/structtagDIMENSION.html#o0">Width</a>= r.right - r.left;
00061         d.<a class="code" href="../../d8/d3/structtagDIMENSION.html#o1">Height</a> = r.bottom - r.top;
00062         SetMinimumSize(d);
00063         <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"ParentDimensions : %d by %d \n"</span>,
00064                         <a class="code" href="../../d4/d5/classCParentInfo.html#a8">GetWidth</a>(),
00065                         <a class="code" href="../../d4/d5/classCParentInfo.html#a9">GetHeight</a>());
00066 }
00067 
00068 
00070 <span class="comment">//</span>
00071 <span class="comment">// Walks all the edges, finding one that is closest and thus re-usable.</span>
00072 <span class="comment">//</span>
<a name="l00074"></a><a class="code" href="../../d2/d3/parentinfo_8cpp.html#a0">00074</a> <span class="comment"></span><span class="preprocessor">#define ABS(x) (x&lt;0?-x:x)</span>
<a name="l00075"></a><a class="code" href="../../d4/d5/classCParentInfo.html#a20">00075</a> <span class="preprocessor"></span><a class="code" href="../../d6/d2/classCEdge.html">CEdge</a> * <a class="code" href="../../d4/d5/classCParentInfo.html#a20">CParentInfo::AddEdge</a>(<span class="keywordtype">int</span> Position, <span class="keywordtype">int</span> Axis, BOOL Flexible, <span class="keywordtype">int</span> Slop)
00076 {
00077         <span class="keywordtype">int</span> i=0;
00078         <a class="code" href="../../d6/d2/classCEdge.html">CEdge</a> * pEdge;
00079         <a class="code" href="../../d1/d3/classCGuide.html">CGuide</a> * pClosest=<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00080         <span class="keywordtype">int</span> closest=0xffff;
00081 
00082         <span class="comment">//</span>
00083         <span class="comment">// First see if the edge is what we wanted</span>
00084         <span class="comment">//</span>
00085         <span class="keywordflow">while</span>( pEdge=<a class="code" href="../../d4/d5/classCParentInfo.html#r7">m_Edges</a>.<a class="code" href="../../d7/d2/classCEdgeCache.html#a5">GetEdge</a>(i++) )
00086         {
00087                 <span class="keywordflow">if</span>(pEdge-&gt;<a class="code" href="../../d6/d2/classCEdge.html#a8">GetPosition</a>() == Position )
00088                 {
00089                         <span class="keywordflow">if</span>( pEdge-&gt;<a class="code" href="../../d6/d2/classCEdge.html#a7">GetAxis</a>() == Axis )
00090                         {
00091                                 <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"Guide REUSE:: %03d, %02d\n"</span>,Position, Axis);
00092                                 <span class="keywordflow">return</span> pEdge;
00093                         }
00094                 }
00095         }
00096 
00097         i=0;
00098         <span class="keywordflow">while</span> ( pEdge=<a class="code" href="../../d4/d5/classCParentInfo.html#r7">m_Edges</a>.<a class="code" href="../../d7/d2/classCEdgeCache.html#a5">GetEdge</a>(i++))
00099         {
00100                 <a class="code" href="../../d1/d3/classCGuide.html">CGuide</a> * pGuide=pEdge-&gt;<a class="code" href="../../d6/d2/classCEdge.html#a11">GetGuide</a>();
00101 
00102                 <span class="keywordflow">if</span>(pGuide-&gt;GetAxis() == Axis )
00103                 {
00104                         <span class="comment">// if( pEdge-&gt;GetFlexible() == Flexible )</span>
00105                         {
00106                                 <span class="keywordtype">int</span> distance=Position -pGuide-&gt;GetPosition() ;
00107                                 <span class="keywordflow">if</span>( <a class="code" href="../../d2/d3/parentinfo_8cpp.html#a0">ABS</a>(distance) &lt;= Slop )
00108                                 {
00109                                         <span class="keywordflow">if</span>( Slop == 0 )
00110                                                 <span class="keywordflow">return</span> pEdge;
00111 
00112                                         <span class="comment">//</span>
00113                                         <span class="comment">// Within the range, but is it the best?</span>
00114                                         <span class="comment">//</span>
00115                                         <span class="keywordflow">if</span>(closest==0xffff)
00116                                         {
00117                                                 closest=distance;
00118                                                 pClosest=pGuide;
00119                                         }
00120                                         
00121                                         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d3/parentinfo_8cpp.html#a0">ABS</a>(distance)&lt;=<a class="code" href="../../d2/d3/parentinfo_8cpp.html#a0">ABS</a>(closest) )
00122                                         {
00123                                                 pClosest=pGuide;
00124                                                 closest=distance;
00125                                         }
00126                                 }
00127                         }
00128                 }
00129         }
00130 
00131         <span class="keywordflow">if</span>(pClosest)
00132         {
00133                 <span class="comment">//</span>
00134                 <span class="comment">// Create a new edge with the same guide, different offset.</span>
00135                 <span class="comment">//</span>
00136                 closest = Position - pClosest-&gt;GetPosition();
00137                 <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"Guide CLOSE:: %03d, %02d, closest %d, actual pos %03d\n"</span>,pClosest-&gt;GetPosition(), pClosest-&gt;GetAxis(), closest, Position);
00138                 <span class="keywordflow">return</span> <a class="code" href="../../d4/d5/classCParentInfo.html#r7">m_Edges</a>.<a class="code" href="../../d7/d2/classCEdgeCache.html#a3">Create</a>( pClosest, closest);
00139         }
00140 
00141         <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"Guide NEW  :: %03d, %02d\n"</span>,Position, Axis);
00142         <span class="keywordflow">return</span> <a class="code" href="../../d4/d5/classCParentInfo.html#r7">m_Edges</a>.<a class="code" href="../../d7/d2/classCEdgeCache.html#a3">Create</a>(Position, Axis, Flexible, 0);
00143 }
00144 
00146 <span class="comment">//</span>
00147 <span class="comment">//</span>
<a name="l00149"></a><a class="code" href="../../d4/d5/classCParentInfo.html#a23">00149</a> <span class="comment"></span><a class="code" href="../../d6/d2/classCEdge.html">CEdge</a> &amp; <a class="code" href="../../d4/d5/classCParentInfo.html#a23">CParentInfo::FindCloseEdge</a>(<a class="code" href="../../d6/d2/classCEdge.html">CEdge</a> &amp; <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a33">Fixed</a>, <span class="keywordtype">int</span> Offset)
00150 {
00151         <span class="keywordtype">int</span> i=0;
00152         <a class="code" href="../../d6/d2/classCEdge.html">CEdge</a> * pEdge;
00153         <span class="keywordflow">while</span> ( pEdge=<a class="code" href="../../d4/d5/classCParentInfo.html#r7">m_Edges</a>.<a class="code" href="../../d7/d2/classCEdgeCache.html#a5">GetEdge</a>(i++) )
00154         {
00155                 <span class="keywordflow">if</span>(pEdge-&gt;<a class="code" href="../../d6/d2/classCEdge.html#a7">GetAxis</a>() == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a33">Fixed</a>.GetAxis() )
00156                 {
00157                         <span class="keywordtype">int</span> distance=<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a33">Fixed</a>.GetPosition() -pEdge-&gt;<a class="code" href="../../d6/d2/classCEdge.html#a8">GetPosition</a>() ;
00158                         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d3/parentinfo_8cpp.html#a0">ABS</a>(distance) &lt;= <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a> )
00159                         {
00160                                 <span class="keywordflow">return</span> *pEdge;
00161                         }
00162                 }
00163         }
00164         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a33">Fixed</a>;
00165 }
00166 
00168 <span class="comment">//</span>
00169 <span class="comment">//</span>
<a name="l00171"></a><a class="code" href="../../d4/d5/classCParentInfo.html#a21">00171</a> <span class="comment"></span><a class="code" href="../../d6/d2/classCEdge.html">CEdge</a> * <a class="code" href="../../d4/d5/classCParentInfo.html#a20">CParentInfo::AddEdge</a>(<a class="code" href="../../d1/d3/classCGuide.html">CGuide</a> * pGuide, <span class="keywordtype">int</span> Offset)
00172 {
00173         <span class="comment">// TRACE(L"Associating another edge %03d from 0x%08x\n", Offset , Edge);</span>
00174         <span class="keywordflow">return</span> <a class="code" href="../../d4/d5/classCParentInfo.html#r7">m_Edges</a>.<a class="code" href="../../d7/d2/classCEdgeCache.html#a3">Create</a>( pGuide, <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a>);
00175 }
00176 
00178 <span class="comment">//</span>
00179 <span class="comment">// BORDERS FOR THE DIALOG - (not for the components).</span>
00180 <span class="comment">// Buids some default guides for the borders.</span>
00181 <span class="comment">// the borders can move</span>
00182 <span class="comment">//</span>
<a name="l00184"></a><a class="code" href="../../d4/d5/classCParentInfo.html#a22">00184</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="../../d4/d5/classCParentInfo.html#a22">CParentInfo::ConstructBorders</a>()
00185 {
00186         <a class="code" href="../../d4/d5/classCParentInfo.html#r8">m_pLeftEdge</a>=<a class="code" href="../../d4/d5/classCParentInfo.html#a20">AddEdge</a>( GetLeftBorder(), <a class="code" href="../../d7/d4/edge_8h.html#a3">LEFT_AT</a>, <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> );
00187         <a class="code" href="../../d4/d5/classCParentInfo.html#r9">m_pRightEdge</a>=AddEdge( <a class="code" href="../../d4/d5/classCParentInfo.html#a8">GetWidth</a>() - GetRightBorder(), <a class="code" href="../../d7/d4/edge_8h.html#a4">RIGHT_AT</a>, <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> );
00188 
00189         <a class="code" href="../../d4/d5/classCParentInfo.html#r10">m_pTopEdge</a>=AddEdge(  GetTopBorder(), <a class="code" href="../../d7/d4/edge_8h.html#a5">TOP_AT</a>, <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> );
00190         <a class="code" href="../../d4/d5/classCParentInfo.html#r11">m_pBottomEdge</a>=AddEdge( <a class="code" href="../../d4/d5/classCParentInfo.html#a9">GetHeight</a>() - GetBottomBorder(), <a class="code" href="../../d7/d4/edge_8h.html#a6">BOTTOM_AT</a>, <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> );
00191 }
00192 
00194 <span class="comment">//</span>
00195 <span class="comment">// We know that the left and bottom edges move to follow the dialog</span>
00196 <span class="comment">//</span>
<a name="l00198"></a><a class="code" href="../../d4/d5/classCParentInfo.html#a4">00198</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="../../d4/d5/classCParentInfo.html#a4">CParentInfo::Resize</a>(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)
00199 {
00200         <a class="code" href="../../d4/d5/classCParentInfo.html#r9">m_pRightEdge</a>-&gt;<a class="code" href="../../d6/d2/classCEdge.html#a10">SetPosition</a>( width - GetRightBorder() );
00201         <a class="code" href="../../d4/d5/classCParentInfo.html#r11">m_pBottomEdge</a>-&gt;<a class="code" href="../../d6/d2/classCEdge.html#a10">SetPosition</a>( height - GetBottomBorder() );
00202 }
00203 
00204 
00206 <span class="comment">//</span>
00207 <span class="comment">// Walks all the edges building an array of the veritcal ones - not sorted</span>
00208 <span class="comment">//</span>
<a name="l00210"></a><a class="code" href="../../d4/d5/classCParentInfo.html#a3">00210</a> <span class="comment"></span><a class="code" href="../../d6/d2/classCEdge.html">CEdge</a> ** <a class="code" href="../../d4/d5/classCParentInfo.html#a3">CParentInfo::GetVerticalEdges</a>()
00211 {
00212         <span class="keywordtype">int</span> iCount=<a class="code" href="../../d4/d5/classCParentInfo.html#r7">m_Edges</a>.GetNumVert();
00213         <a class="code" href="../../d6/d2/classCEdge.html">CEdge</a> ** ppEdges= (<a class="code" href="../../d6/d2/classCEdge.html">CEdge</a>**)<span class="keyword">new</span> (<a class="code" href="../../d6/d2/classCEdge.html">CEdge</a>*[iCount]);
00214         <a class="code" href="../../d6/d2/classCEdge.html">CEdge</a> * pEdge;
00215         <span class="keywordtype">int</span> i=0,iDest=0;
00216         <span class="keywordflow">while</span>( pEdge = <a class="code" href="../../d4/d5/classCParentInfo.html#r7">m_Edges</a>.<a class="code" href="../../d7/d2/classCEdgeCache.html#a5">GetEdge</a>(i++) )
00217         {
00218                 <span class="keywordflow">if</span>(pEdge-&gt;<a class="code" href="../../d6/d2/classCEdge.html#a15">IsVertical</a>() )
00219                         ppEdges[iDest++] = pEdge;
00220 <span class="preprocessor">#ifdef _DEBUG</span>
00221 <span class="preprocessor"></span>                <span class="keywordflow">if</span>( iDest &gt; iCount )
00222                         <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"Vertical edge count is off %d vs %d\n"</span>, iDest, iCount);
00223 <span class="preprocessor">#endif</span>
00224 <span class="preprocessor"></span>        }
00225         <span class="keywordflow">return</span> ppEdges;
00226 }
00227 
00229 <span class="comment">//</span>
00230 <span class="comment">// Walks all the edges building an array of the horizontal ones - not sorted</span>
00231 <span class="comment">//</span>
00232 <span class="comment">//</span>
<a name="l00234"></a><a class="code" href="../../d4/d5/classCParentInfo.html#a2">00234</a> <span class="comment"></span><a class="code" href="../../d6/d2/classCEdge.html">CEdge</a> ** <a class="code" href="../../d4/d5/classCParentInfo.html#a2">CParentInfo::GetHorizontalEdges</a>()
00235 {
00236         <span class="keywordtype">int</span> iCount=<a class="code" href="../../d4/d5/classCParentInfo.html#r7">m_Edges</a>.GetNumHoriz();
00237         <a class="code" href="../../d6/d2/classCEdge.html">CEdge</a> ** ppEdges= <span class="keyword">new</span> <a class="code" href="../../d6/d2/classCEdge.html">CEdge</a> *[iCount];
00238         CEdge * pEdge;
00239         <span class="keywordtype">int</span> i=0,iDest=0;
00240         <span class="keywordflow">while</span>( pEdge = <a class="code" href="../../d4/d5/classCParentInfo.html#r7">m_Edges</a>.<a class="code" href="../../d7/d2/classCEdgeCache.html#a5">GetEdge</a>(i++) )
00241         {
00242                 <span class="keywordflow">if</span>(pEdge-&gt;<a class="code" href="../../d6/d2/classCEdge.html#a14">IsHorizontal</a>())
00243                         ppEdges[iDest++] = pEdge;
00244 <span class="preprocessor">#ifdef _DEBUG</span>
00245 <span class="preprocessor"></span>                <span class="keywordflow">if</span>( iDest &gt; iCount )
00246                         <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"Horiz edge count is off %d vs %d\n"</span>, iDest, iCount);
00247 <span class="preprocessor">#endif</span>
00248 <span class="preprocessor"></span>        }
00249         <span class="keywordflow">return</span> ppEdges;
00250 }
00251 
<a name="l00252"></a><a class="code" href="../../d4/d5/classCParentInfo.html#a1">00252</a> <span class="keywordtype">void</span> <a class="code" href="../../d4/d5/classCParentInfo.html#a1">CParentInfo::Annotate</a>(HDC hdc)
00253 {
00254         <span class="keywordtype">int</span> i=0;
00255         <a class="code" href="../../d6/d2/classCEdge.html">CEdge</a> * pEdge;
00256         <span class="keywordtype">int</span> iWidth=<a class="code" href="../../d4/d5/classCParentInfo.html#a8">GetWidth</a>();
00257         <span class="keywordtype">int</span> iHeight=<a class="code" href="../../d4/d5/classCParentInfo.html#a9">GetHeight</a>();
00258         HPEN hpen = CreatePen( PS_SOLID, 1, RGB( 0xff,0x00,0x00) );
00259         HGDIOBJ holdPen= SelectObject( hdc, hpen);
00260         <span class="keywordflow">while</span>( pEdge=<a class="code" href="../../d4/d5/classCParentInfo.html#r7">m_Edges</a>.<a class="code" href="../../d7/d2/classCEdgeCache.html#a5">GetEdge</a>(i++) )
00261         {
00262                 <span class="keywordflow">if</span>( pEdge-&gt;<a class="code" href="../../d6/d2/classCEdge.html#a14">IsHorizontal</a>() )
00263                 {
00264                         MoveToEx( hdc, 0, pEdge-&gt;<a class="code" href="../../d6/d2/classCEdge.html#a8">GetPosition</a>(), <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> );
00265                         LineTo( hdc, iWidth , pEdge-&gt;<a class="code" href="../../d6/d2/classCEdge.html#a8">GetPosition</a>() );
00266                 }
00267                 <span class="keywordflow">else</span>
00268                 {
00269                         MoveToEx( hdc, pEdge-&gt;<a class="code" href="../../d6/d2/classCEdge.html#a8">GetPosition</a>(), 0, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> );
00270                         LineTo( hdc, pEdge-&gt;<a class="code" href="../../d6/d2/classCEdge.html#a8">GetPosition</a>(), iHeight );
00271                 }
00272         }
00273         SelectObject(hdc, holdPen);
00274         DeleteObject(hpen);
00275 }
00276 
00278 <span class="comment">//</span>
00279 <span class="comment">// Walks all the controls, finds where the borders of the dialog are</span>
00280 <span class="comment">//</span>
<a name="l00282"></a><a class="code" href="../../d4/d5/classCParentInfo.html#a0">00282</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="../../d4/d5/classCParentInfo.html#a0">CParentInfo::DeterminBorders</a>(<a class="code" href="../../d0/d2/classCControlList.html">CControlList</a> * pControlList)
00283 {
00284         <a class="code" href="../../d3/d6/classCResizeControl.html">CResizeControl</a> * pC;
00285         <span class="keywordtype">int</span> i=0;
00286 
00287         <span class="comment">//</span>
00288         <span class="comment">// Now walk and see if we have any borders - this is a lame way to do it.</span>
00289         <span class="comment">//</span>
00290 <span class="preprocessor">#define BORDER(Edge)                    if( pC-&gt;Get##Edge##Gap() &lt; Get##Edge##Border() ) \</span>
00291 <span class="preprocessor">                        Set##Edge##Border(pC-&gt;Get##Edge##Gap());</span>
00292 <span class="preprocessor"></span>
00293         i=0;
00294         <span class="keywordflow">while</span>( pC=pControlList-&gt;<a class="code" href="../../d0/d2/classCControlList.html#a2">GetControl</a>(i++) )
00295         {
00296                 <span class="keywordflow">if</span>( pC-&gt;GetRightGap() &lt; GetRightBorder() )
00297                         SetRightBorder(pC-&gt;GetRightGap());
00298         }
00299         <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"Right border is %d\n"</span>, GetRightBorder() );
00300 
00301         i=0;
00302         <span class="keywordflow">while</span>( pC=pControlList-&gt;<a class="code" href="../../d0/d2/classCControlList.html#a2">GetControl</a>(i++) )
00303         {
00304                 <a class="code" href="../../d2/d3/parentinfo_8cpp.html#a1">BORDER</a>(Left);
00305         }
00306         <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"Left border is %d\n"</span>, GetLeftBorder() );
00307 
00308         i=0;
00309         <span class="keywordflow">while</span>( pC=pControlList-&gt;<a class="code" href="../../d0/d2/classCControlList.html#a2">GetControl</a>(i++) )
00310         {
00311                 <a class="code" href="../../d2/d3/parentinfo_8cpp.html#a1">BORDER</a>(Top);
00312         }
00313         <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"Top border is %d\n"</span>, GetTopBorder() );
00314 
00315         i=0;
00316         <span class="keywordflow">while</span>( pC=pControlList-&gt;<a class="code" href="../../d0/d2/classCControlList.html#a2">GetControl</a>(i++) )
00317         {
00318                 <a class="code" href="../../d2/d3/parentinfo_8cpp.html#a1">BORDER</a>(Bottom);
00319         }
00320         <a class="code" href="../../d7/d5/ntuser_2client_2nt6_2debug_8h.html#a0">TRACE</a>(<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"Bottom border is %d\n"</span>, GetBottomBorder() );
00321 
00322         <span class="comment">//</span>
00323         <span class="comment">// Now add these edges to the parent info.</span>
00324         <span class="comment">// or should the be add these guides to the parent info?</span>
00325         <span class="comment">//</span>
00326         <a class="code" href="../../d4/d5/classCParentInfo.html#a22">ConstructBorders</a>();
00327 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:41:08 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: rtmisc1.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>rtmisc1.c File Reference</h1><code>#include "<a class="el" href="../../d2/d1/cmp_8h-source.html">cmp.h</a>"</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>

<p>
<a href="../../d5/d1/rtmisc1_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d2/rtmisc1_8c.html#a0">TITLE_INDEX_1</a>&nbsp;&nbsp;&nbsp;122259</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d2/rtmisc1_8c.html#a1">TITLE_INDEX_2</a>&nbsp;&nbsp;&nbsp;120858</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d2/rtmisc1_8c.html#a2">TITLE_INDEX_3</a>&nbsp;&nbsp;&nbsp;120159</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d2/rtmisc1_8c.html#a3">TYPE_1</a>&nbsp;&nbsp;&nbsp;666</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d2/rtmisc1_8c.html#a4">TYPE_2</a>&nbsp;&nbsp;&nbsp;1066</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void __cdecl&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d2/rtmisc1_8c.html#a6">main</a> (int, char *)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d2/rtmisc1_8c.html#a7">NameClassAndTitle</a> (KEY_NODE_INFORMATION *NodeInformation, UNICODE_STRING ClassName, ULONG TitleIndex, UNICODE_STRING <a class="el" href="../../d8/d3/rtvbatcr_8c.html#a3">KeyName</a>, LARGE_INTEGER CompTime, BOOLEAN Strong, PUCHAR TestName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d2/rtmisc1_8c.html#a8">expectstring</a> (PWSTR expected, ULONG expectedlength, PWSTR actual, ULONG actuallength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d2/rtmisc1_8c.html#a9">expecttime</a> (LARGE_INTEGER ExpectTime, LARGE_INTEGER ActualTime)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d2/rtmisc1_8c.html#a5">failure</a> = 0</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="rtmisc1.c::TITLE_INDEX_1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TITLE_INDEX_1&nbsp;&nbsp;&nbsp;122259          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00064">64</a> of file <a class="el" href="../../d5/d1/rtmisc1_8c-source.html">rtmisc1.c</a>.
<p>
Referenced by <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00075">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="rtmisc1.c::TITLE_INDEX_2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TITLE_INDEX_2&nbsp;&nbsp;&nbsp;120858          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00065">65</a> of file <a class="el" href="../../d5/d1/rtmisc1_8c-source.html">rtmisc1.c</a>.
<p>
Referenced by <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00075">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="rtmisc1.c::TITLE_INDEX_3" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TITLE_INDEX_3&nbsp;&nbsp;&nbsp;120159          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00066">66</a> of file <a class="el" href="../../d5/d1/rtmisc1_8c-source.html">rtmisc1.c</a>.
<p>
Referenced by <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00075">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="rtmisc1.c::TYPE_1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TYPE_1&nbsp;&nbsp;&nbsp;666          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00067">67</a> of file <a class="el" href="../../d5/d1/rtmisc1_8c-source.html">rtmisc1.c</a>.
<p>
Referenced by <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00075">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="rtmisc1.c::TYPE_2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TYPE_2&nbsp;&nbsp;&nbsp;1066          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00068">68</a> of file <a class="el" href="../../d5/d1/rtmisc1_8c-source.html">rtmisc1.c</a>.
<p>
Referenced by <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00075">main()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a8" doxytag="rtmisc1.c::expectstring" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID expectstring           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>expected</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>expectedlength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>actual</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>actuallength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00823">823</a> of file <a class="el" href="../../d5/d1/rtmisc1_8c-source.html">rtmisc1.c</a>.
<p>
Referenced by <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00075">main()</a>, and <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00739">NameClassAndTitle()</a>.
<p>
<pre class="fragment"><div>00829 {
00830     ULONG   i;
00831 
00832     printf(<span class="stringliteral">"Expected Len %d Str = '"</span>, expectedlength);
00833     <span class="keywordflow">for</span> (i = 0; i &lt; expectedlength; i++) {
00834         printf(<span class="stringliteral">"%c"</span>, (UCHAR)(expected[i]));
00835     }
00836     printf(<span class="stringliteral">"'\n"</span>);
00837 
00838     printf(<span class="stringliteral">"Got Len %d Str = '"</span>, actuallength);
00839     <span class="keywordflow">for</span> (i = 0; i &lt; actuallength; i++) {
00840         printf(<span class="stringliteral">"%c"</span>, (UCHAR)(actual[i]));
00841     }
00842     printf(<span class="stringliteral">"'\n"</span>);
00843     <span class="keywordflow">return</span>;
00844 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="rtmisc1.c::expecttime" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID expecttime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LARGE_INTEGER&nbsp;</td>
          <td class="mdname" nowrap> <em>ExpectTime</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LARGE_INTEGER&nbsp;</td>
          <td class="mdname" nowrap> <em>ActualTime</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00812">812</a> of file <a class="el" href="../../d5/d1/rtmisc1_8c-source.html">rtmisc1.c</a>.
<p>
Referenced by <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00739">NameClassAndTitle()</a>.
<p>
<pre class="fragment"><div>00816 {
00817     printf(<span class="stringliteral">"Expected %08lx%08lx\n"</span>, ExpectTime.HighPart, ExpectTime.LowPart);
00818     printf(<span class="stringliteral">"Got      %08lx%08lx\n"</span>, ActualTime.HighPart, ActualTime.LowPart);
00819     <span class="keywordflow">return</span>;
00820 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="rtmisc1.c::main" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void __cdecl main           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="rtmisc1.c::NameClassAndTitle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID NameClassAndTitle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">KEY_NODE_INFORMATION *&nbsp;</td>
          <td class="mdname" nowrap> <em>NodeInformation</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>ClassName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>TitleIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>KeyName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LARGE_INTEGER&nbsp;</td>
          <td class="mdname" nowrap> <em>CompTime</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Strong</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>TestName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00739">739</a> of file <a class="el" href="../../d5/d1/rtmisc1_8c-source.html">rtmisc1.c</a>.
<p>
References <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00823">expectstring()</a>, <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00812">expecttime()</a>, <a class="el" href="../../d9/d9/rtbatcr_8c-source.html#l00056">failure</a>, and <a class="el" href="../../d9/d9/rtbatcr_8c-source.html#l00059">KeyName</a>.
<p>
Referenced by <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00075">main()</a>.
<p>
<pre class="fragment"><div>00748 {
00749     PWSTR   p;
00750 
00751     <span class="keywordflow">if</span> (Strong) {
00752 
00753         <span class="comment">//</span>
00754         <span class="comment">// require exact match</span>
00755         <span class="comment">//</span>
00756 
00757         <span class="keywordflow">if</span> ((CompTime.HighPart != NodeInformation-&gt;LastWriteTime.HighPart) ||
00758             (CompTime.LowPart != NodeInformation-&gt;LastWriteTime.LowPart))
00759         {
00760             printf(<span class="stringliteral">"%s Wrong time (a)\n"</span>, TestName);
00761             <a class="code" href="../../d4/d2/rtmisc1_8c.html#a9">expecttime</a>(CompTime, NodeInformation-&gt;LastWriteTime);
00762             <a class="code" href="../../d8/d0/rtbatcr_8c.html#a1">failure</a>++;
00763         }
00764 
00765 
00766     } <span class="keywordflow">else</span> {
00767 
00768         <span class="comment">//</span>
00769         <span class="comment">// &gt;= will do</span>
00770         <span class="comment">//</span>
00771 
00772         <span class="keywordflow">if</span> ( (CompTime.HighPart &gt; NodeInformation-&gt;LastWriteTime.HighPart) ||
00773              ((CompTime.HighPart == NodeInformation-&gt;LastWriteTime.HighPart) &amp;&amp;
00774               (CompTime.LowPart &gt; NodeInformation-&gt;LastWriteTime.LowPart)) )
00775         {
00776             printf(<span class="stringliteral">"%s Wrong time (b)\n"</span>, TestName);
00777             <a class="code" href="../../d4/d2/rtmisc1_8c.html#a9">expecttime</a>(CompTime, NodeInformation-&gt;LastWriteTime);
00778             <a class="code" href="../../d8/d0/rtbatcr_8c.html#a1">failure</a>++;
00779         }
00780     }
00781 
00782 
00783     p = (PWSTR)((PUCHAR)NodeInformation + NodeInformation-&gt;ClassOffset);
00784     <span class="keywordflow">if</span> ( (NodeInformation-&gt;ClassLength != ClassName.Length) ||
00785          (wcsncmp(ClassName.Buffer, p, (ClassName.Length/<span class="keyword">sizeof</span>(WCHAR))) != 0))
00786     {
00787         printf(<span class="stringliteral">"%s wrong class name\n"</span>, TestName);
00788         <a class="code" href="../../d8/d0/rtbatcr_8c.html#a1">failure</a>++;
00789     }
00790 
00791     <span class="keywordflow">if</span> (NodeInformation-&gt;TitleIndex != TitleIndex) {
00792         printf(<span class="stringliteral">"%s wrong title index\n"</span>, TestName);
00793         <a class="code" href="../../d8/d0/rtbatcr_8c.html#a1">failure</a>++;
00794     }
00795 
00796     p = (PWSTR)(&amp;(NodeInformation-&gt;Name[0]));
00797     <span class="keywordflow">if</span> ( (NodeInformation-&gt;NameLength != <a class="code" href="../../d8/d0/rtbatcr_8c.html#a3">KeyName</a>.Length) ||
00798          (wcsncmp(<a class="code" href="../../d8/d0/rtbatcr_8c.html#a3">KeyName</a>.Buffer, p, (<a class="code" href="../../d8/d0/rtbatcr_8c.html#a3">KeyName</a>.Length/<span class="keyword">sizeof</span>(WCHAR))) != 0))
00799     {
00800         printf(<span class="stringliteral">"%s wrong name\n"</span>, TestName);
00801         <a class="code" href="../../d4/d2/rtmisc1_8c.html#a8">expectstring</a>(
00802             <a class="code" href="../../d8/d0/rtbatcr_8c.html#a3">KeyName</a>.Buffer,
00803             (<a class="code" href="../../d8/d0/rtbatcr_8c.html#a3">KeyName</a>.Length/<span class="keyword">sizeof</span>(WCHAR)),
00804             (PWSTR)&amp;(NodeInformation-&gt;Name[0]),
00805             (NodeInformation-&gt;NameLength/<span class="keyword">sizeof</span>(WCHAR))
00806             );
00807         <a class="code" href="../../d8/d0/rtbatcr_8c.html#a1">failure</a>++;
00808     }
00809 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a5" doxytag="rtmisc1.c::failure" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG <a class="el" href="../../d8/d3/rtvbatcr_8c.html#a1">failure</a> = 0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d1/rtmisc1_8c-source.html#l00071">71</a> of file <a class="el" href="../../d5/d1/rtmisc1_8c-source.html">rtmisc1.c</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:30 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

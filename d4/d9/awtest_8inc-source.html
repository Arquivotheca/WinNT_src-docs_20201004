<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: awtest.inc Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>awtest.inc</h1><a href="../../d3/d0/awtest_8inc.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">// awtest.inc</span>
00002 
00003 <span class="preprocessor">#include "<a class="code" href="../../d2/d0/aw_8h.html">aw.h</a>"</span>
00004 
00005 ULONGLONG <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(msProfPeekMessage)(HDC hdc, ULONG Iter)
00006 {
00007 
00008     MSG <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
00009     <a class="code" href="../../d0/d2/usrbench_8h.html#a1">INIT_TIMER</a>;
00010 
00011     <a class="code" href="../../d0/d2/usrbench_8h.html#a2">START_TIMER</a>;
00012 
00013     <span class="keywordflow">while</span> (ix--)
00014     {
00015         <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(PeekMessage)(&amp;<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, 0, 0, PM_REMOVE);
00016     }
00017 
00018     <a class="code" href="../../d0/d2/usrbench_8h.html#a5">END_TIMER</a>;
00019 }
00020 
00021 ULONGLONG <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(msProfDispatchMessage)(HDC hdc, ULONG Iter)
00022 {
00023 
00024     HWND hwnd;
00025     MSG <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
00026     <a class="code" href="../../d0/d2/usrbench_8h.html#a1">INIT_TIMER</a>;
00027     <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(WNDCLASS) wc;
00028 
00029     wc.style            = 0;
00030     wc.lpfnWndProc      = CreateDestroyWndProc;
00031     wc.cbClsExtra       = 0;
00032     wc.cbWndExtra       = 0;
00033     wc.hInstance        = ghinst;
00034     wc.hIcon            = LoadIcon(ghinst, (LPSTR)IDUSERBENCH);
00035     wc.hCursor          = LoadCursor(NULL, IDC_ARROW);
00036     wc.hbrBackground    = (HBRUSH)(COLOR_APPWORKSPACE + 1);
00037     wc.lpszMenuName     = NULL;
00038     wc.lpszClassName    = L("CreateDestroyWindow");
00039 
00040     if (!AW(RegisterClass)(&amp;wc)) {
00041         MessageBox(<a class="code" href="../../d3/d9/client_2wow_8c.html#a13">GetParent</a>(ghwndMDIClient), <span class="stringliteral">"14RegisterClass call failed."</span>,
00042                 <span class="stringliteral">"ERROR!"</span>, MB_OK);
00043         <span class="keywordflow">return</span> (ULONGLONG)(0);
00044     }
00045 
00046     hwnd = <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(CreateWindow)(<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>(<span class="stringliteral">"CreateDestroyWindow"</span>), <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, WS_CHILD,
00047             CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,
00048             <a class="code" href="../../d1/d1/bench_8c.html#a21">ghwndMDIClient</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, <a class="code" href="../../d1/d1/bench_8c.html#a22">ghinst</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00049 
00050     <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.hwnd = hwnd;
00051     <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.message = WM_MOUSEMOVE;
00052     <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.wParam = 1;
00053     <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.lParam = 2;
00054     <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.time = 3;
00055     <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.pt.x = 4;
00056     <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>.pt.y = 5;
00057 
00058     <a class="code" href="../../d0/d2/usrbench_8h.html#a2">START_TIMER</a>;
00059 
00060     <span class="keywordflow">while</span> (ix--)
00061     {
00062         <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(DispatchMessage)(&amp;<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>);
00063     }
00064 
00065     <a class="code" href="../../d0/d2/usrbench_8h.html#a3">END_TIMER_NO_RETURN</a>;
00066 
00067     <a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html#a3">DestroyWindow</a>(hwnd);
00068     <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(UnregisterClass)(<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>(<span class="stringliteral">"CreateDestroyWindow"</span>), <a class="code" href="../../d1/d1/bench_8c.html#a22">ghinst</a>);
00069 
00070     <a class="code" href="../../d0/d2/usrbench_8h.html#a4">RETURN_STOP_TIME</a>;
00071 
00072 }
00073 
00074 ULONGLONG <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(msProfCharXXX)(HDC hDC, ULONG Iter,
00075                             <a class="code" href="../../d0/d5/perfuser_8c.html#a20">BOOL</a> (WINAPI *tester)(<a class="code" href="../../d2/d0/aw_8h.html#a1">IF</a>(<span class="keywordtype">char</span>,WCHAR)))
00076 {
00077     <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d2/d0/aw_8h.html#a1">IF</a>(<span class="keywordtype">char</span>,WCHAR) sample[] =
00078         L("The quick brown fox jumps over the lazy dog")
00079         L("0123456789")
00080         L("Jackdaws love my big sphinx of quartz");
00081     INIT_TIMER;
00082 
00083     START_TIMER;
00084     while (ix--) {
00085         <span class="keyword">const</span> <a class="code" href="../../d2/d0/aw_8h.html#a1">IF</a>(<span class="keywordtype">char</span>,WCHAR)* p = sample;
00086         <span class="keywordflow">while</span> (*p) {
00087             tester(*p++);
00088         }
00089     }
00090     <a class="code" href="../../d0/d2/usrbench_8h.html#a5">END_TIMER</a>;
00091 }
00092 
00093 
00094 ULONGLONG <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(msProfCharUpper)(HDC hDC, ULONG Iter)
00095 {
00096     <span class="keywordflow">return</span> <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(msProfCharXXX)(hDC, Iter, <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(IsCharUpper));
00097 }
00098 
00099 ULONGLONG <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(msProfCharLower)(HDC hDC, ULONG Iter)
00100 {
00101     <span class="keywordflow">return</span> <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(msProfCharXXX)(hDC, Iter, <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(IsCharLower));
00102 }
00103 
00104 ULONGLONG <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(msProfCharNext)(HDC hDC, ULONG Iter)
00105 {
00106     <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d2/d0/aw_8h.html#a1">IF</a>(<span class="keywordtype">char</span>,WCHAR) sample[] =
00107         L("The quick brown fox jumps over the lazy dog")
00108         L("0123456789")
00109         L("Jackdaws love my big sphinx of quartz");
00110     INIT_TIMER;
00111 
00112     START_TIMER;
00113     while (ix--) {
00114         <span class="keyword">const</span> <a class="code" href="../../d2/d0/aw_8h.html#a1">IF</a>(<span class="keywordtype">char</span>,WCHAR)* p = sample;
00115         <span class="keywordflow">while</span> (*p) {
00116             <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(CharNext)(p++);
00117         }
00118     }
00119     <a class="code" href="../../d0/d2/usrbench_8h.html#a5">END_TIMER</a>;
00120 }
00121 
00122 ULONGLONG <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(msProfGetMessage)(HDC hDC, ULONG Iter)
00123 {
00124     MSG <a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>;
00125     <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(WNDCLASS) wc;
00126     HWND hwnd;
00127     RECT rect;
00128     static const IF(<span class="keywordtype">char</span>, WCHAR)* className = L("GetMessageTest");
00129     INIT_TIMER;
00130 
00131     wc.style            = 0;
00132     wc.lpfnWndProc      = IF(CreateDestroyWndProc, CreateDestroyWndProcW);
00133     wc.cbClsExtra       = 0;
00134     wc.cbWndExtra       = 0;
00135     wc.hInstance        = ghinst;
00136     wc.hIcon            = LoadIcon(ghinst, (LPSTR)IDUSERBENCH);
00137     wc.hCursor          = LoadCursor(NULL, IDC_ARROW);
00138     wc.hbrBackground    = (HBRUSH)(COLOR_APPWORKSPACE + 1);
00139     wc.lpszMenuName     = NULL;
00140     wc.lpszClassName    = className;
00141 
00142     if (!AW(RegisterClass)(&amp;wc)) {
00143         MessageBox(<a class="code" href="../../d3/d9/client_2wow_8c.html#a13">GetParent</a>(ghwndMDIClient), <span class="stringliteral">"RegisterClass call failed."</span>,
00144                 <span class="stringliteral">"ERROR!"</span>, MB_OK);
00145         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00146     }
00147 
00148     hwnd = <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(CreateWindow)(className, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>,
00149         WS_OVERLAPPEDWINDOW,
00150         CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,
00151         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, <a class="code" href="../../d1/d1/bench_8c.html#a22">ghinst</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00152     <span class="keywordflow">if</span> (hwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00153         MessageBox(<a class="code" href="../../d3/d9/client_2wow_8c.html#a13">GetParent</a>(ghwndMDIClient), <span class="stringliteral">"CreateWindow call failed."</span>,
00154             <span class="stringliteral">"ERROR!"</span>, MB_OK);
00155             <span class="keywordflow">return</span> 0;
00156     }
00157 
00158     <a class="code" href="../../d0/d2/usrbench_8h.html#a2">START_TIMER</a>;
00159     <span class="keywordflow">while</span> (ix--) {
00160         <a class="code" href="../../d0/d2/usrbench_8h.html#a6">START_OVERHEAD</a>;
00161         <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(PostMessage)(hwnd, WM_MOUSEMOVE, 0, 0);
00162         <a class="code" href="../../d0/d2/usrbench_8h.html#a7">END_OVERHEAD</a>;
00163         <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(GetMessage)(&amp;<a class="code" href="../../d2/d1/userexts_8c.html#a129">msg</a>, hwnd, 0, 0);
00164     }
00165     <a class="code" href="../../d0/d2/usrbench_8h.html#a3">END_TIMER_NO_RETURN</a>;
00166 
00167     <a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html#a3">DestroyWindow</a>(hwnd);
00168     <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(UnregisterClass)(className, <a class="code" href="../../d1/d1/bench_8c.html#a22">ghinst</a>);
00169 
00170     <a class="code" href="../../d0/d2/usrbench_8h.html#a4">RETURN_STOP_TIME</a>;
00171 }
00172 
00173 ULONGLONG <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(msProfGetWindowTextLength)(HDC hdc, ULONG Iter)
00174 {
00175     <a class="code" href="../../d0/d2/usrbench_8h.html#a1">INIT_TIMER</a>;
00176     <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d2/d0/aw_8h.html#a1">IF</a>(CHAR, WCHAR)* className = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>(<span class="stringliteral">"GetWindowTextLengthTest"</span>);
00177     <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(WNDCLASS) wc;
00178     HWND hwnd;
00179 
00180     wc.style            = 0;
00181     wc.lpfnWndProc      = AW(DefWindowProc);
00182     wc.cbClsExtra       = 0;
00183     wc.cbWndExtra       = 0;
00184     wc.hInstance        = ghinst;
00185     wc.hIcon            = LoadIcon(ghinst, (LPSTR)IDUSERBENCH);
00186     wc.hCursor          = LoadCursor(NULL, IDC_ARROW);
00187     wc.hbrBackground    = (HBRUSH)(COLOR_APPWORKSPACE + 1);
00188     wc.lpszMenuName     = NULL;
00189     wc.lpszClassName    = className;
00190 
00191     if (!AW(RegisterClass)(&amp;wc)) {
00192         <a class="code" href="../../d1/d1/bench_8c.html#a33">DispErrorMsg</a>(<span class="stringliteral">"RegisterClass"</span>);
00193         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00194     }
00195 
00196     hwnd = <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(CreateWindow)(className, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>,
00197         WS_OVERLAPPEDWINDOW,
00198         CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,
00199         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, <a class="code" href="../../d1/d1/bench_8c.html#a22">ghinst</a>, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00200     <span class="keywordflow">if</span> (hwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00201         <a class="code" href="../../d1/d1/bench_8c.html#a33">DispErrorMsg</a>(<span class="stringliteral">"CreateWindow"</span>);
00202     }
00203 
00204     <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(SetWindowText)(hwnd, <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>(<span class="stringliteral">"The quick brown fox jumps over the lazy dog"</span>));
00205 
00206     <a class="code" href="../../d0/d2/usrbench_8h.html#a2">START_TIMER</a>;
00207 
00208     <span class="keywordflow">while</span> (ix--)
00209     {
00210         <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(GetWindowTextLength)(hwnd);
00211     }
00212 
00213     <a class="code" href="../../d0/d2/usrbench_8h.html#a3">END_TIMER_NO_RETURN</a>;
00214 
00215     <a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html#a3">DestroyWindow</a>(hwnd);
00216     <a class="code" href="../../d2/d0/aw_8h.html#a2">AW</a>(UnregisterClass)(className, <a class="code" href="../../d1/d1/bench_8c.html#a22">ghinst</a>);
00217 
00218     <a class="code" href="../../d0/d2/usrbench_8h.html#a4">RETURN_STOP_TIME</a>;
00219 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:39:17 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

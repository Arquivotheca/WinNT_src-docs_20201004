<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: arcinst.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>arcinst.h File Reference</h1><code>#include &lt;<a class="el" href="../../d0/d8/ntos_8h-source.html">ntos.h</a>&gt;</code><br>
<code>#include &lt;ntdddisk.h&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d2/d8/arc_8h-source.html">arc.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d3/d8/arccodes_8h-source.html">arccodes.h</a>&gt;</code><br>
<code>#include &lt;stdarg.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;ctype.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>

<p>
<a href="../../d5/d8/arcinst_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d8/struct__tagDISKGEOM.html">_tagDISKGEOM</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d9/struct__tagPARTITION.html">_tagPARTITION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d9/struct__tagREGION__DATA.html">_tagREGION_DATA</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">_tagREGION_DESCRIPTOR</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a0">ASCI_NUL</a>&nbsp;&nbsp;&nbsp;0x00</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a1">ASCI_BEL</a>&nbsp;&nbsp;&nbsp;0x07</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a2">ASCI_BS</a>&nbsp;&nbsp;&nbsp;0x08</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a3">ASCI_HT</a>&nbsp;&nbsp;&nbsp;0x09</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a4">ASCI_LF</a>&nbsp;&nbsp;&nbsp;0x0A</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a5">ASCI_VT</a>&nbsp;&nbsp;&nbsp;0x0B</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a6">ASCI_FF</a>&nbsp;&nbsp;&nbsp;0x0C</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a7">ASCI_CR</a>&nbsp;&nbsp;&nbsp;0x0D</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a8">ASCI_CSI</a>&nbsp;&nbsp;&nbsp;0x9B</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a9">ASCI_ESC</a>&nbsp;&nbsp;&nbsp;0x1B</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a10">ASCI_SYSRQ</a>&nbsp;&nbsp;&nbsp;0x80</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a11">EBADSYNTAX</a>&nbsp;&nbsp;&nbsp;EMAXIMUM</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a12">MAX_COMPONENTS</a>&nbsp;&nbsp;&nbsp;20</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a13">INVALID_TOKEN_TYPE</a>&nbsp;&nbsp;&nbsp;~0L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a14">INVALID_TOKEN_VALUE</a>&nbsp;&nbsp;&nbsp;~1L</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a15">AlClearScreen</a>()&nbsp;&nbsp;&nbsp;AlPrint("%c2J", ASCI_CSI)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a16">AlClearLine</a>()&nbsp;&nbsp;&nbsp;AlPrint("%c2K", ASCI_CSI)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a17">AlSetScreenColor</a>(FgColor, BgColor)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a18">AlSetScreenAttributes</a>(HighIntensity, Underscored, ReverseVideo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a19">AlSetPosition</a>(Row, Column)&nbsp;&nbsp;&nbsp;AlPrint("%c%d;%dH", ASCI_CSI, Row, Column)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(size)&nbsp;&nbsp;&nbsp;AlAllocateHeap(size)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a21">ReallocateMemory</a>(block, size)&nbsp;&nbsp;&nbsp;AlReallocateHeap(block,size)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(block)&nbsp;&nbsp;&nbsp;AlDeallocateHeap(block)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>&nbsp;&nbsp;&nbsp;ESUCCESS</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a24">RETURN_OUT_OF_MEMORY</a>&nbsp;&nbsp;&nbsp;return(ENOMEM)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a25">LOWPART</a>(x)&nbsp;&nbsp;&nbsp;((x).LowPart)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a26">ONE_MEG</a>&nbsp;&nbsp;&nbsp;(1024*1024)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a27">ENTRIES_PER_BOOTSECTOR</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a28">ASRT</a>(x)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a29">GetAllDiskRegions</a>(disk, regions, count)&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,TRUE,TRUE,TRUE,TRUE,regions,count)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a30">GetFreeDiskRegions</a>(disk, regions, count)&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,FALSE,TRUE,TRUE,TRUE,regions,count)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a31">GetUsedDiskRegions</a>(disk, regions, count)&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,TRUE,FALSE,TRUE,TRUE,regions,count)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a32">GetPrimaryDiskRegions</a>(disk, regions, count)&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,TRUE,TRUE,TRUE,FALSE,regions,count)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a33">GetLogicalDiskRegions</a>(disk, regions, count)&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,TRUE,TRUE,FALSE,TRUE,regions,count)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a34">GetUsedPrimaryDiskRegions</a>(disk, regions, count)&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,TRUE,FALSE,TRUE,FALSE,regions,count)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a35">GetUsedLogicalDiskRegions</a>(disk, regions, count)&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,TRUE,FALSE,FALSE,TRUE,regions,count)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a36">GetFreePrimaryDiskRegions</a>(disk, regions, count)&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,FALSE,TRUE,TRUE,FALSE,regions,count)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a37">GetFreeLogicalDiskRegions</a>(disk, regions, count)&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,FALSE,TRUE,FALSE,TRUE,regions,count)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a38">MAXIMUM_ENVIRONMENT_VALUE</a>&nbsp;&nbsp;&nbsp;256</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef enum <a class="el" href="../../d4/d9/arcinst_8h.html#a171">_ADAPTER_TYPES</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a39">ADAPTER_TYPES</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef enum <a class="el" href="../../d4/d9/arcinst_8h.html#a172">_CONTROLLER_TYPES</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a40">CONTROLLER_TYPES</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef enum <a class="el" href="../../d4/d9/arcinst_8h.html#a173">_PERIPHERAL_TYPES</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a41">PERIPHERAL_TYPES</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef enum <a class="el" href="../../d4/d9/arcinst_8h.html#a174">_TOKEN_TYPES</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a42">TOKEN_TYPES</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d6/d8/struct__tagDISKGEOM.html">_tagDISKGEOM</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a44">DISKGEOM</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d6/d8/struct__tagDISKGEOM.html">_tagDISKGEOM</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a45">PDISKGEOM</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d2/d9/struct__tagPARTITION.html">_tagPARTITION</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a46">PARTITION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d2/d9/struct__tagPARTITION.html">_tagPARTITION</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a47">PPARTITION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d9/struct__tagREGION__DATA.html">_tagREGION_DATA</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a48">REGION_DATA</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d9/struct__tagREGION__DATA.html">_tagREGION_DATA</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a49">PREGION_DATA</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">_tagREGION_DESCRIPTOR</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a50">REGION_DESCRIPTOR</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">_tagREGION_DESCRIPTOR</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a51">PREGION_DESCRIPTOR</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef enum <a class="el" href="../../d4/d9/arcinst_8h.html#a177">_BOOT_VARIABLES</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a52">BOOT_VARIABLE</a></td></tr>

<tr><td colspan=2><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a171">_ADAPTER_TYPES</a> { <a class="el" href="../../d4/d9/arcinst_8h.html#a171a54">AdapterEisa</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a171a55">AdapterScsi</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a171a56">AdapterMulti</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a171a57">AdapterMaximum</a>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a172">_CONTROLLER_TYPES</a> { <a class="el" href="../../d4/d9/arcinst_8h.html#a172a58">ControllerDisk</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a172a59">ControllerCdrom</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a172a60">ControllerMaximum</a>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a173">_PERIPHERAL_TYPES</a> { <a class="el" href="../../d4/d9/arcinst_8h.html#a173a61">PeripheralRigidDisk</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a173a62">PeripheralFloppyDisk</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a173a63">PeripheralMaximum</a>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a174">_TOKEN_TYPES</a> { <a class="el" href="../../d4/d9/arcinst_8h.html#a174a64">AdaptType</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a174a65">ControllerType</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a174a66">PeripheralType</a>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a175">REGION_TYPE</a> { <a class="el" href="../../d4/d9/arcinst_8h.html#a175a67">REGION_PRIMARY</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a175a68">REGION_EXTENDED</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom>{ <a class="el" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a> =  0, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a176a71">SYSID_EXTENDED</a> =  5, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a176a72">SYSID_BIGFAT</a> =  6, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a176a73">SYSID_IFS</a> =  7
 }</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a177">_BOOT_VARIABLES</a> { <br>
&nbsp;&nbsp;<a class="el" href="../../d4/d9/arcinst_8h.html#a177a74">LoadIdentifierVariable</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a177a75">SystemPartitionVariable</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a177a76">OsLoaderVariable</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a177a77">OsLoadPartitionVariable</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="../../d4/d9/arcinst_8h.html#a177a78">OsLoadFilenameVariable</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a177a79">OsLoadOptionsVariable</a>, 
<a class="el" href="../../d4/d9/arcinst_8h.html#a177a80">MaximumBootVariable</a>
<br>
 }</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a81">AlGetEnvVarComponents</a> (IN PCHAR EnvValue, OUT PCHAR **EnvVarComponents, OUT PULONG PNumComponents)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a82">AlFreeEnvVarComponents</a> (IN PCHAR *EnvVarComponents)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a83">AlFindNextMatchComponent</a> (IN PCHAR EnvValue, IN PCHAR MatchValue, IN ULONG StartComponent, OUT PULONG MatchComponent OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a84">AlAddSystemPartition</a> (IN PCHAR NewSystemPartition)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a85">AlMemoryInitialize</a> (ULONG StackPages, ULONG HeapPages)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PVOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a86">AlAllocateHeap</a> (IN ULONG <a class="el" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a0">Size</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PVOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a87">AlDeallocateHeap</a> (IN PVOID HeapAddress)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PVOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a88">AlReallocateHeap</a> (IN PVOID HeapAddress, IN ULONG NewSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a89">AlValidateHeap</a> (IN BOOLEAN DumpHeap)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a90">AlInitializeMenuPackage</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a91">AlNewMenu</a> (PVOID *MenuID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a> (PVOID MenuID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a93">AlAddMenuItem</a> (PVOID MenuID, PCHAR Text, ULONG AssociatedData, ULONG Attributes)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a94">AlAddMenuItems</a> (PVOID MenuID, PCHAR Text[], ULONG ItemCount)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a95">AlDisplayMenu</a> (PVOID MenuID, BOOLEAN PrintOnly, ULONG AssociatedDataOfDefaultChoice, ULONG *AssociatedDataOfChoice, ULONG Row, PCHAR MenuName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a96">AlGetMenuNumberItems</a> (PVOID MenuID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a97">AlGetMenuAssociatedData</a> (PVOID MenuID, ULONG <a class="el" href="../../d7/d0/exts_8h.html#a0">n</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a98">AlGetMenuSelection</a> (IN PCHAR <a class="el" href="../../d5/d6/ntcon_2conime_2globals_8h.html#a2">szTitle</a>, IN PCHAR *rgszSelections, IN ULONG crgsz, IN ULONG crow, IN ULONG irgszDefault, OUT PULONG pirgsz, OUT PCHAR *pszSelection)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a99">AlWaitKey</a> (PCHAR Prompt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a100">vAlStatusMsg</a> (IN ULONG Row, IN BOOLEAN Error, IN PCHAR FormatString, IN va_list ArgumentList)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a101">AlStatusMsg</a> (IN ULONG TopRow, IN ULONG BottomRow, IN BOOLEAN Error, IN PCHAR FormatString,...)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a102">AlStatusMsgNoWait</a> (IN ULONG TopRow, IN ULONG BottomRow, IN BOOLEAN Error, IN PCHAR FormatString,...)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a103">AlClearStatusArea</a> (IN ULONG TopRow, IN ULONG BottomRow)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a104">AlStrDup</a> (IN PCHAR szString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a105">AlCombinePaths</a> (IN PCHAR szPath1, IN PCHAR szPath2)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a106">AlFreeArray</a> (IN BOOLEAN fFreeArray, IN PCHAR *rgsz, IN ULONG csz)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a107">AlGetBase</a> (IN PCHAR szPath, OUT PCHAR *pszBase)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a108">AlGetNextArcNameToken</a> (IN PCHAR TokenString, OUT PCHAR OutputToken, OUT PULONG UnitNumber)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a109">AlMatchArcNameToken</a> (IN PCHAR TokenValue, IN <a class="el" href="../../d4/d9/arcinst_8h.html#a42">TOKEN_TYPES</a> TokenType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a110">FdiskInitialize</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a111">FdiskCleanUp</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a112">ConfigureSystemPartitions</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a113">ConfigureOSPartitions</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a> (PCHAR Format,...)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a115">AlGetString</a> (OUT PCHAR <a class="el" href="../../d0/d0/tdetach_8c.html#a0">String</a>, IN ULONG StringLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a116">SIZEMB</a> (IN LARGE_INTEGER ByteCount)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a117">FmtIsFatPartition</a> (IN ULONG PartitionId, IN ULONG SectorSize, OUT PBOOLEAN IsFatPartition)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a118">FmtIsFat</a> (IN PCHAR PartitionPath, OUT PBOOLEAN IsFatPartition)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a119">FmtFatFormat</a> (IN PCHAR PartitionPath, IN ULONG HiddenSectorCount)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a120">FmtQueryFatPartitionList</a> (OUT PCHAR **FatPartitionList, OUT PULONG ListLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a121">FmtFreeFatPartitionList</a> (IN OUT PCHAR *FatPartitionList, IN ULONG ListLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a122">LowOpenDisk</a> (IN PCHAR DevicePath, OUT PULONG DiskId)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a123">LowCloseDisk</a> (IN ULONG DiskId)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a124">LowGetDriveGeometry</a> (IN PCHAR DevicePath, OUT PULONG TotalSectorCount, OUT PULONG SectorSize, OUT PULONG SectorsPerTrack, OUT PULONG Heads)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a125">LowGetPartitionGeometry</a> (IN PCHAR PartitionPath, OUT PULONG TotalSectorCount, OUT PULONG SectorSize, OUT PULONG SectorsPerTrack, OUT PULONG Heads)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a126">LowReadSectors</a> (IN ULONG VolumeId, IN ULONG SectorSize, IN ULONG StartingSector, IN ULONG NumberOfSectors, OUT PVOID <a class="el" href="../../d8/d6/ttri_8c.html#a3">Buffer</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a127">LowWriteSectors</a> (IN ULONG VolumeId, IN ULONG SectorSize, IN ULONG StartingSector, IN ULONG NumberOfSectors, IN PVOID <a class="el" href="../../d8/d6/ttri_8c.html#a3">Buffer</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a128">LowQueryPathFromComponent</a> (IN <a class="el" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html">PCONFIGURATION_COMPONENT</a> Component, OUT PCHAR *Path)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a129">LowQueryComponentList</a> (IN <a class="el" href="../../d1/d9/arc_8h.html#a54">CONFIGURATION_CLASS</a> *ConfigClass OPTIONAL, IN <a class="el" href="../../d1/d9/arc_8h.html#a56">CONFIGURATION_TYPE</a> *ConfigType OPTIONAL, OUT <a class="el" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html">PCONFIGURATION_COMPONENT</a> **ComponentList, OUT PULONG ListLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a130">LowQueryPathList</a> (IN <a class="el" href="../../d1/d9/arc_8h.html#a54">CONFIGURATION_CLASS</a> *ConfigClass OPTIONAL, IN <a class="el" href="../../d1/d9/arc_8h.html#a56">CONFIGURATION_TYPE</a> *ConfigType OPTIONAL, OUT PCHAR **PathList, OUT PULONG ListLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a131">LowFreePathList</a> (IN PCHAR *PathList, IN ULONG ListLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a132">LowQueryFdiskPathList</a> (OUT PCHAR **PathList, OUT PULONG ListLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a133">LowFreeFdiskPathList</a> (IN OUT PCHAR *PathList, IN ULONG ListLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a134">LowGetDiskLayout</a> (IN PCHAR Path, OUT PDRIVE_LAYOUT_INFORMATION *DriveLayout)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a135">LowSetDiskLayout</a> (IN PCHAR Path, IN PDRIVE_LAYOUT_INFORMATION DriveLayout)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a136">GetDiskCount</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a137">GetDiskName</a> (ULONG Disk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a138">DiskSizeMB</a> (IN ULONG Disk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a139">GetDiskRegions</a> (IN ULONG Disk, IN BOOLEAN WantUsedRegions, IN BOOLEAN WantFreeRegions, IN BOOLEAN WantPrimaryRegions, IN BOOLEAN WantLogicalRegions, OUT <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> *Region, OUT ULONG *RegionCount)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a140">FreeRegionArray</a> (IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> Region, IN ULONG RegionCount)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a141">IsAnyCreationAllowed</a> (IN ULONG Disk, IN BOOLEAN AllowMultiplePrimaries, OUT PBOOLEAN AnyAllowed, OUT PBOOLEAN PrimaryAllowed, OUT PBOOLEAN ExtendedAllowed, OUT PBOOLEAN LogicalAllowed)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a142">IsCreationOfPrimaryAllowed</a> (IN ULONG Disk, IN BOOLEAN AllowMultiplePrimaries, OUT PBOOLEAN Allowed)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a143">IsCreationOfExtendedAllowed</a> (IN ULONG Disk, OUT PBOOLEAN Allowed)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a144">IsCreationOfLogicalAllowed</a> (IN ULONG Disk, OUT PBOOLEAN Allowed)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a145">DoesAnyPartitionExist</a> (IN ULONG Disk, OUT PBOOLEAN AnyExists, OUT PBOOLEAN PrimaryExists, OUT PBOOLEAN ExtendedExists, OUT PBOOLEAN LogicalExists)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a146">DoesAnyPrimaryExist</a> (IN ULONG Disk, OUT PBOOLEAN Exists)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a147">DoesExtendedExist</a> (IN ULONG Disk, OUT PBOOLEAN Exists)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a148">DoesAnyLogicalExist</a> (IN ULONG Disk, OUT PBOOLEAN Exists)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a149">IsExtended</a> (IN UCHAR SysID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a150">SetPartitionActiveFlag</a> (IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> Region, IN UCHAR value)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a151">CreatePartition</a> (IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> Region, IN ULONG CreationSizeMB, IN <a class="el" href="../../d4/d9/arcinst_8h.html#a175">REGION_TYPE</a> Type)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a152">CreatePartitionEx</a> (IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> Region, IN LARGE_INTEGER MinimumSize, IN ULONG CreationSizeMB, IN <a class="el" href="../../d4/d9/arcinst_8h.html#a175">REGION_TYPE</a> Type, IN UCHAR SysId)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a153">DeletePartition</a> (IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> Region)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a154">GetHiddenSectorCount</a> (ULONG Disk, ULONG Partition)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a155">SetSysID</a> (IN ULONG Disk, IN ULONG Partition, IN UCHAR SysID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a156">SetSysID2</a> (IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> Region, IN UCHAR SysID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a157">GetSysIDName</a> (UCHAR SysID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a158">CommitPartitionChanges</a> (IN ULONG Disk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a159">HavePartitionsBeenChanged</a> (IN ULONG Disk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a160">FdMarkDiskDirty</a> (IN ULONG Disk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a161">FdSetPersistentData</a> (IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> Region, IN ULONG Data)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a162">FdGetMinimumSizeMB</a> (IN ULONG Disk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a163">FdGetMaximumSizeMB</a> (IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> Region, IN <a class="el" href="../../d4/d9/arcinst_8h.html#a175">REGION_TYPE</a> CreationType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LARGE_INTEGER&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a164">FdGetExactSize</a> (IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> Region, IN BOOLEAN ForExtended)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LARGE_INTEGER&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a165">FdGetExactOffset</a> (IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> Region)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a166">FdCrosses1024Cylinder</a> (IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> Region, IN ULONG CreationSizeMB, IN <a class="el" href="../../d4/d9/arcinst_8h.html#a175">REGION_TYPE</a> RegionType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a167">FdGetDiskSignature</a> (IN ULONG Disk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a168">FdSetDiskSignature</a> (IN ULONG Disk, IN ULONG Signature)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a169">IsDiskOffLine</a> (IN ULONG Disk)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a170">JzDeleteVariableSegment</a> (PCHAR VariableName, ULONG Selection)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a43">MSGMARGIN</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/arcinst_8h.html#a53">BootString</a> []</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a16" doxytag="arcinst.h::AlClearLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AlClearLine          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;AlPrint("%c2K", ASCI_CSI)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00302">302</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01010">AlClearStatusArea()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="arcinst.h::AlClearScreen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AlClearScreen          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;AlPrint("%c2J", ASCI_CSI)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00299">299</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="arcinst.h::AllocateMemory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AllocateMemory          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">size&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;AlAllocateHeap(size)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00330">330</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00965">AddRegionEntry()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01541">AllocatePartitionStructure()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00183">FdiskInitialize()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00601">FmtFatFormat()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00042">FmtIsFatPartition()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00724">FmtQueryFatPartitionList()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00495">FmtVerifySectors()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00780">GetDiskRegions()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00595">LowQueryComponentList()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00486">LowQueryPathFromComponent()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00651">LowQueryPathList()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02886">WriteDriveLayout()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02823">ZapSector()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="arcinst.h::AlSetPosition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AlSetPosition          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Row,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>Column&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;AlPrint("%c%d;%dH", ASCI_CSI, Row, Column)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00321">321</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01010">AlClearStatusArea()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00885">MarkLine()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">vAlStatusMsg()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="arcinst.h::AlSetScreenAttributes" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AlSetScreenAttributes          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HighIntensity,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>Underscored,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ReverseVideo&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div><a class="code" href="../../d9/d6/almisc_8c.html#a41">AlPrint</a>(<span class="stringliteral">"%c0m"</span>, ASCI_CSI); \
    <span class="keywordflow">if</span> (HighIntensity) { \
    <a class="code" href="../../d9/d6/almisc_8c.html#a41">AlPrint</a>(<span class="stringliteral">"%c1m"</span>, ASCI_CSI); \
    } \
    <span class="keywordflow">if</span> (Underscored) { \
    <a class="code" href="../../d9/d6/almisc_8c.html#a41">AlPrint</a>(<span class="stringliteral">"%c4m"</span>, ASCI_CSI); \
    } \
    <span class="keywordflow">if</span> (ReverseVideo) { \
    <a class="code" href="../../d9/d6/almisc_8c.html#a41">AlPrint</a>(<span class="stringliteral">"%c7m"</span>, ASCI_CSI); \
    }
</div></pre>
<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00309">309</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00885">MarkLine()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">vAlStatusMsg()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="arcinst.h::AlSetScreenColor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AlSetScreenColor          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">FgColor,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BgColor&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div><a class="code" href="../../d9/d6/almisc_8c.html#a41">AlPrint</a>(<span class="stringliteral">"%c3%dm"</span>, ASCI_CSI, (UCHAR)FgColor); \
    <a class="code" href="../../d9/d6/almisc_8c.html#a41">AlPrint</a>(<span class="stringliteral">"%c4%dm"</span>, ASCI_CSI, (UCHAR)BgColor)
</div></pre>
<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00305">305</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">vAlStatusMsg()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="arcinst.h::ASCI_BEL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ASCI_BEL&nbsp;&nbsp;&nbsp;0x07          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00015">15</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="arcinst.h::ASCI_BS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ASCI_BS&nbsp;&nbsp;&nbsp;0x08          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00016">16</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="arcinst.h::ASCI_CR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ASCI_CR&nbsp;&nbsp;&nbsp;0x0D          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00021">21</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="arcinst.h::ASCI_CSI" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ASCI_CSI&nbsp;&nbsp;&nbsp;0x9B          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00022">22</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00902">GetChar()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="arcinst.h::ASCI_ESC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ASCI_ESC&nbsp;&nbsp;&nbsp;0x1B          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00023">23</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01508">AlGetString()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00074">Confirm()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="arcinst.h::ASCI_FF" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ASCI_FF&nbsp;&nbsp;&nbsp;0x0C          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00020">20</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="arcinst.h::ASCI_HT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ASCI_HT&nbsp;&nbsp;&nbsp;0x09          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00017">17</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="arcinst.h::ASCI_LF" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ASCI_LF&nbsp;&nbsp;&nbsp;0x0A          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00018">18</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="arcinst.h::ASCI_NUL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ASCI_NUL&nbsp;&nbsp;&nbsp;0x00          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00014">14</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="arcinst.h::ASCI_SYSRQ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ASCI_SYSRQ&nbsp;&nbsp;&nbsp;0x80          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00024">24</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="arcinst.h::ASCI_VT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ASCI_VT&nbsp;&nbsp;&nbsp;0x0B          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00019">19</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="arcinst.h::ASRT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ASRT          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00411">411</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03063">CommitPartitionChanges()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00549">CreatePartitionEx()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00721">DeletePartition()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00429">DetermineCreateSizeAndOffset()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02446">DoesAnyPrimaryExist()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02496">DoesExtendedExist()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03203">FdGetMaximumSizeMB()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03152">FdMarkDiskDirty()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01312">FindPartitionElement()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01425">GetHiddenSectorCount()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03121">HavePartitionsBeenChanged()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02272">IsCreationOfExtendedAllowed()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02333">IsCreationOfLogicalAllowed()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02198">IsCreationOfPrimaryAllowed()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l01076">LowSetDiskLayout()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01366">SetSysID()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02886">WriteDriveLayout()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="arcinst.h::EBADSYNTAX" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define EBADSYNTAX&nbsp;&nbsp;&nbsp;EMAXIMUM          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00029">29</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01244">AlGetBase()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="arcinst.h::ENTRIES_PER_BOOTSECTOR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ENTRIES_PER_BOOTSECTOR&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00346">346</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01708">InitializeLogicalVolumeList()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01801">InitializePrimaryPartitionList()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02272">IsCreationOfExtendedAllowed()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02198">IsCreationOfPrimaryAllowed()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l01076">LowSetDiskLayout()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02771">MakeBootRec()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02886">WriteDriveLayout()</a>, and <a class="el" href="../../d2/d5/low_8c-source.html#l01063">ZeroPartitionTable()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="arcinst.h::FreeMemory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FreeMemory          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">block&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;AlDeallocateHeap(block)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00332">332</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00258">FdiskCleanUp()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00601">FmtFatFormat()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00042">FmtIsFatPartition()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00724">FmtQueryFatPartitionList()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00495">FmtVerifySectors()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01473">FreeLinkedPartitionList()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01013">FreeRegionArray()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01882">InitializePartitionLists()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00721">LowFreePathList()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00651">LowQueryPathList()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01209">MergeFreePartitions()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02886">WriteDriveLayout()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02823">ZapSector()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="arcinst.h::GetAllDiskRegions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetAllDiskRegions          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">disk,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>regions,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>count&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,TRUE,TRUE,TRUE,TRUE,regions,count)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00596">596</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="arcinst.h::GetFreeDiskRegions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetFreeDiskRegions          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">disk,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>regions,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>count&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,FALSE,TRUE,TRUE,TRUE,regions,count)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00599">599</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="arcinst.h::GetFreeLogicalDiskRegions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetFreeLogicalDiskRegions          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">disk,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>regions,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>count&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,FALSE,TRUE,FALSE,TRUE,regions,count)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00620">620</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="arcinst.h::GetFreePrimaryDiskRegions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetFreePrimaryDiskRegions          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">disk,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>regions,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>count&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,FALSE,TRUE,TRUE,FALSE,regions,count)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00617">617</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="arcinst.h::GetLogicalDiskRegions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetLogicalDiskRegions          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">disk,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>regions,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>count&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,TRUE,TRUE,FALSE,TRUE,regions,count)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00608">608</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02333">IsCreationOfLogicalAllowed()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="arcinst.h::GetPrimaryDiskRegions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetPrimaryDiskRegions          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">disk,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>regions,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>count&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,TRUE,TRUE,TRUE,FALSE,regions,count)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00605">605</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02272">IsCreationOfExtendedAllowed()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02198">IsCreationOfPrimaryAllowed()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="arcinst.h::GetUsedDiskRegions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetUsedDiskRegions          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">disk,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>regions,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>count&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,TRUE,FALSE,TRUE,TRUE,regions,count)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00602">602</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="arcinst.h::GetUsedLogicalDiskRegions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetUsedLogicalDiskRegions          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">disk,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>regions,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>count&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,TRUE,FALSE,FALSE,TRUE,regions,count)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00614">614</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02546">DoesAnyLogicalExist()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="arcinst.h::GetUsedPrimaryDiskRegions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetUsedPrimaryDiskRegions          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">disk,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>regions,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>count&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;GetDiskRegions(disk,TRUE,FALSE,TRUE,FALSE,regions,count)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00611">611</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02446">DoesAnyPrimaryExist()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02496">DoesExtendedExist()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="arcinst.h::INVALID_TOKEN_TYPE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define INVALID_TOKEN_TYPE&nbsp;&nbsp;&nbsp;~0L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00248">248</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01391">AlMatchArcNamToken()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="arcinst.h::INVALID_TOKEN_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define INVALID_TOKEN_VALUE&nbsp;&nbsp;&nbsp;~1L          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00249">249</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01391">AlMatchArcNamToken()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="arcinst.h::LOWPART" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LOWPART          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((x).LowPart)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00337">337</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01425">GetHiddenSectorCount()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02823">ZapSector()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="arcinst.h::MAX_COMPONENTS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAX_COMPONENTS&nbsp;&nbsp;&nbsp;20          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00031">31</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00026">AlGetEnvVarComponents()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="arcinst.h::MAXIMUM_ENVIRONMENT_VALUE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAXIMUM_ENVIRONMENT_VALUE&nbsp;&nbsp;&nbsp;256          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00827">827</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00424">AlAddSystemPartition()</a>, <a class="el" href="../../d7/d7/jzcrap_8c-source.html#l00005">JzDeleteVariableSegment()</a>, and <a class="el" href="../../d6/d7/sysenv_8c-source.html#l00045">NtQuerySystemEnvironmentValue()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="arcinst.h::OK_STATUS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define OK_STATUS&nbsp;&nbsp;&nbsp;ESUCCESS          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00334">334</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00302">CheckIfDiskIsOffLine()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03063">CommitPartitionChanges()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00549">CreatePartitionEx()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00721">DeletePartition()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02546">DoesAnyLogicalExist()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02394">DoesAnyPartitionExist()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02446">DoesAnyPrimaryExist()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02496">DoesExtendedExist()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00183">FdiskInitialize()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00780">GetDiskRegions()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00342">GetGeometry()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00859">GetRegions()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01607">InitializeFreeSpace()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01708">InitializeLogicalVolumeList()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01882">InitializePartitionLists()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02141">IsAnyCreationAllowed()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02272">IsCreationOfExtendedAllowed()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02333">IsCreationOfLogicalAllowed()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02198">IsCreationOfPrimaryAllowed()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02886">WriteDriveLayout()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02823">ZapSector()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="arcinst.h::ONE_MEG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ONE_MEG&nbsp;&nbsp;&nbsp;(1024*1024)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00339">339</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00429">DetermineCreateSizeAndOffset()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01972">SIZEMB()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="arcinst.h::ReallocateMemory" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ReallocateMemory          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">block,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>size&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;AlReallocateHeap(block,size)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00331">331</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00965">AddRegionEntry()</a>, and <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00495">FmtVerifySectors()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="arcinst.h::RETURN_OUT_OF_MEMORY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define RETURN_OUT_OF_MEMORY&nbsp;&nbsp;&nbsp;return(ENOMEM)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00335">335</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00549">CreatePartitionEx()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00183">FdiskInitialize()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00859">GetRegions()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01607">InitializeFreeSpace()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01708">InitializeLogicalVolumeList()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01801">InitializePrimaryPartitionList()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02886">WriteDriveLayout()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02823">ZapSector()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a39" doxytag="arcinst.h::ADAPTER_TYPES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef enum <a class="el" href="../../d4/d9/arcinst_8h.html#a171">_ADAPTER_TYPES</a>  <a class="el" href="../../d4/d9/arcinst_8h.html#a39">ADAPTER_TYPES</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a52" doxytag="arcinst.h::BOOT_VARIABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef enum <a class="el" href="../../d4/d9/arcinst_8h.html#a177">_BOOT_VARIABLES</a>  <a class="el" href="../../d4/d9/arcinst_8h.html#a52">BOOT_VARIABLE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="arcinst.h::CONTROLLER_TYPES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef enum <a class="el" href="../../d4/d9/arcinst_8h.html#a172">_CONTROLLER_TYPES</a>  <a class="el" href="../../d4/d9/arcinst_8h.html#a40">CONTROLLER_TYPES</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="arcinst.h::DISKGEOM" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d6/d8/struct__tagDISKGEOM.html">_tagDISKGEOM</a>  <a class="el" href="../../d6/d8/struct__tagDISKGEOM.html">DISKGEOM</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="arcinst.h::PARTITION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d2/d9/struct__tagPARTITION.html">_tagPARTITION</a>  <a class="el" href="../../d2/d9/struct__tagPARTITION.html">PARTITION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d3/d5/allocsup_8c-source.html#l00367">UdfInitializePcb()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="arcinst.h::PDISKGEOM" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d6/d8/struct__tagDISKGEOM.html">_tagDISKGEOM</a>* <a class="el" href="../../d6/d8/struct__tagDISKGEOM.html">PDISKGEOM</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="arcinst.h::PERIPHERAL_TYPES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef enum <a class="el" href="../../d4/d9/arcinst_8h.html#a173">_PERIPHERAL_TYPES</a>  <a class="el" href="../../d4/d9/arcinst_8h.html#a41">PERIPHERAL_TYPES</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="arcinst.h::PPARTITION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d2/d9/struct__tagPARTITION.html">_tagPARTITION</a>* <a class="el" href="../../d2/d9/struct__tagPARTITION.html">PPARTITION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00183">FdiskInitialize()</a>, and <a class="el" href="../../d3/d5/allocsup_8c-source.html#l00309">UdfDeletePcb()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="arcinst.h::PREGION_DATA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d9/struct__tagREGION__DATA.html">_tagREGION_DATA</a>* <a class="el" href="../../d3/d9/struct__tagREGION__DATA.html">PREGION_DATA</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a51" doxytag="arcinst.h::PREGION_DESCRIPTOR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">_tagREGION_DESCRIPTOR</a>* <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="arcinst.h::REGION_DATA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d9/struct__tagREGION__DATA.html">_tagREGION_DATA</a>  <a class="el" href="../../d3/d9/struct__tagREGION__DATA.html">REGION_DATA</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a50" doxytag="arcinst.h::REGION_DESCRIPTOR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">_tagREGION_DESCRIPTOR</a>  <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">REGION_DESCRIPTOR</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="arcinst.h::TOKEN_TYPES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef enum <a class="el" href="../../d4/d9/arcinst_8h.html#a174">_TOKEN_TYPES</a>  <a class="el" href="../../d4/d9/arcinst_8h.html#a42">TOKEN_TYPES</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="a176" doxytag="arcinst.h::@0" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> anonymous enum          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="a176a70" doxytag="SYSID_UNUSED" ></a>SYSID_UNUSED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a176a71" doxytag="SYSID_EXTENDED" ></a>SYSID_EXTENDED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a176a72" doxytag="SYSID_BIGFAT" ></a>SYSID_BIGFAT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a176a73" doxytag="SYSID_IFS" ></a>SYSID_IFS</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00550">550</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
<pre class="fragment"><div>00550      {
00551         <a class="code" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>     = 0,
00552         <a class="code" href="../../d4/d9/arcinst_8h.html#a176a71">SYSID_EXTENDED</a>   = 5,
00553         <a class="code" href="../../d4/d9/arcinst_8h.html#a176a72">SYSID_BIGFAT</a>     = 6,
00554         <a class="code" href="../../d4/d9/arcinst_8h.html#a176a73">SYSID_IFS</a>        = 7
00555      };
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a171" doxytag="arcinst.h::_ADAPTER_TYPES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="../../d4/d9/arcinst_8h.html#a171">_ADAPTER_TYPES</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="a171a54" doxytag="AdapterEisa" ></a>AdapterEisa</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a171a55" doxytag="AdapterScsi" ></a>AdapterScsi</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a171a56" doxytag="AdapterMulti" ></a>AdapterMulti</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a171a57" doxytag="AdapterMaximum" ></a>AdapterMaximum</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00211">211</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
<pre class="fragment"><div>00211                             {
00212     <a class="code" href="../../d4/d9/arcinst_8h.html#a171a54">AdapterEisa</a>,
00213     <a class="code" href="../../d4/d9/arcinst_8h.html#a171a55">AdapterScsi</a>,
00214     <a class="code" href="../../d4/d9/arcinst_8h.html#a171a56">AdapterMulti</a>,
00215     <a class="code" href="../../d4/d9/arcinst_8h.html#a171a57">AdapterMaximum</a>
00216 } <a class="code" href="../../d4/d9/arcinst_8h.html#a39">ADAPTER_TYPES</a>;
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a177" doxytag="arcinst.h::_BOOT_VARIABLES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="../../d4/d9/arcinst_8h.html#a177">_BOOT_VARIABLES</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="a177a74" doxytag="LoadIdentifierVariable" ></a>LoadIdentifierVariable</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a177a75" doxytag="SystemPartitionVariable" ></a>SystemPartitionVariable</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a177a76" doxytag="OsLoaderVariable" ></a>OsLoaderVariable</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a177a77" doxytag="OsLoadPartitionVariable" ></a>OsLoadPartitionVariable</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a177a78" doxytag="OsLoadFilenameVariable" ></a>OsLoadFilenameVariable</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a177a79" doxytag="OsLoadOptionsVariable" ></a>OsLoadOptionsVariable</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a177a80" doxytag="MaximumBootVariable" ></a>MaximumBootVariable</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00809">809</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
<pre class="fragment"><div>00809                              {
00810     <a class="code" href="../../d4/d9/arcinst_8h.html#a177a74">LoadIdentifierVariable</a>,
00811     <a class="code" href="../../d4/d9/arcinst_8h.html#a177a75">SystemPartitionVariable</a>,
00812     <a class="code" href="../../d4/d9/arcinst_8h.html#a177a76">OsLoaderVariable</a>,
00813     <a class="code" href="../../d4/d9/arcinst_8h.html#a177a77">OsLoadPartitionVariable</a>,
00814     <a class="code" href="../../d4/d9/arcinst_8h.html#a177a78">OsLoadFilenameVariable</a>,
00815     <a class="code" href="../../d4/d9/arcinst_8h.html#a177a79">OsLoadOptionsVariable</a>,
00816     <a class="code" href="../../d4/d9/arcinst_8h.html#a177a80">MaximumBootVariable</a>
00817 } <a class="code" href="../../d4/d9/arcinst_8h.html#a52">BOOT_VARIABLE</a>;
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a172" doxytag="arcinst.h::_CONTROLLER_TYPES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="../../d4/d9/arcinst_8h.html#a172">_CONTROLLER_TYPES</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="a172a58" doxytag="ControllerDisk" ></a>ControllerDisk</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a172a59" doxytag="ControllerCdrom" ></a>ControllerCdrom</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a172a60" doxytag="ControllerMaximum" ></a>ControllerMaximum</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00221">221</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
<pre class="fragment"><div>00221                                {
00222     <a class="code" href="../../d4/d9/arcinst_8h.html#a172a58">ControllerDisk</a>,
00223     <a class="code" href="../../d4/d9/arcinst_8h.html#a172a59">ControllerCdrom</a>,
00224     <a class="code" href="../../d4/d9/arcinst_8h.html#a172a60">ControllerMaximum</a>
00225 } <a class="code" href="../../d4/d9/arcinst_8h.html#a40">CONTROLLER_TYPES</a>;
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a173" doxytag="arcinst.h::_PERIPHERAL_TYPES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="../../d4/d9/arcinst_8h.html#a173">_PERIPHERAL_TYPES</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="a173a61" doxytag="PeripheralRigidDisk" ></a>PeripheralRigidDisk</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a173a62" doxytag="PeripheralFloppyDisk" ></a>PeripheralFloppyDisk</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a173a63" doxytag="PeripheralMaximum" ></a>PeripheralMaximum</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00230">230</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
<pre class="fragment"><div>00230                                {
00231     <a class="code" href="../../d4/d9/arcinst_8h.html#a173a61">PeripheralRigidDisk</a>,
00232     <a class="code" href="../../d4/d9/arcinst_8h.html#a173a62">PeripheralFloppyDisk</a>,
00233     <a class="code" href="../../d4/d9/arcinst_8h.html#a173a63">PeripheralMaximum</a>
00234 } <a class="code" href="../../d4/d9/arcinst_8h.html#a41">PERIPHERAL_TYPES</a>;
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a174" doxytag="arcinst.h::_TOKEN_TYPES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="../../d4/d9/arcinst_8h.html#a174">_TOKEN_TYPES</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="a174a64" doxytag="AdaptType" ></a>AdaptType</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a174a65" doxytag="ControllerType" ></a>ControllerType</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a174a66" doxytag="PeripheralType" ></a>PeripheralType</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00239">239</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
<pre class="fragment"><div>00239                           {
00240     <a class="code" href="../../d4/d9/arcinst_8h.html#a174a64">AdaptType</a>,
00241     <a class="code" href="../../d4/d9/arcinst_8h.html#a174a65">ControllerType</a>,
00242     <a class="code" href="../../d4/d9/arcinst_8h.html#a174a66">PeripheralType</a>
00243 } <a class="code" href="../../d4/d9/arcinst_8h.html#a42">TOKEN_TYPES</a>;
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a175" doxytag="arcinst.h::REGION_TYPE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="../../d4/d9/arcinst_8h.html#a175">REGION_TYPE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="a175a67" doxytag="REGION_PRIMARY" ></a>REGION_PRIMARY</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a175a68" doxytag="REGION_EXTENDED" ></a>REGION_EXTENDED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a175a69" doxytag="REGION_LOGICAL" ></a>REGION_LOGICAL</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00545">545</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
<pre class="fragment"><div>00545              { <a class="code" href="../../d4/d9/arcinst_8h.html#a175a67">REGION_PRIMARY</a>,
00546                <a class="code" href="../../d4/d9/arcinst_8h.html#a175a68">REGION_EXTENDED</a>,
00547                <a class="code" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>
00548              } <a class="code" href="../../d4/d9/arcinst_8h.html#a175">REGION_TYPE</a>;
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a93" doxytag="arcinst.h::AlAddMenuItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlAddMenuItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>MenuID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Text</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>AssociatedData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Attributes</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00684">684</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01113">AlAllocateHeap()</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l01153">AlReallocateHeap()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00573">_tagMENUITEM::AssociatedData</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00577">_tagMENUCOOKIE::ItemCount</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00578">_tagMENUCOOKIE::Items</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d6/almisc_8c.html#a5">PMENUCOOKIE</a>, <a class="el" href="../../d9/d6/almisc_8c.html#a3">PMENUITEM</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00572">_tagMENUITEM::Text</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00720">AlAddMenuItems()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.
<p>
<pre class="fragment"><div>00690 {
00691     <a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a> Menu = MenuID;
00692     <a class="code" href="../../d1/d9/struct__tagMENUITEM.html">PMENUITEM</a>   p;
00693 
00694     DBG_UNREFERENCED_PARAMETER(Attributes);
00695 
00696     <span class="keywordflow">if</span>(!Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o0">ItemCount</a>) {
00697         <span class="keywordflow">if</span>((Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a> = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__tagMENUITEM.html">MENUITEM</a>))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00698             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00699         }
00700         Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o0">ItemCount</a> = 1;
00701         p = Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>;
00702     } <span class="keywordflow">else</span> {
00703         <span class="keywordflow">if</span>((p = <a class="code" href="../../d4/d6/memory_8c.html#a24">AlReallocateHeap</a>(Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>,<span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__tagMENUITEM.html">MENUITEM</a>)*(Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o0">ItemCount</a>+1))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00704             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00705         }
00706         Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a> = p;
00707         p = &amp;Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>[Menu-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o0">ItemCount</a>++];
00708     }
00709 
00710     <span class="keywordflow">if</span>((p-&gt;<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o0">Text</a> = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(Text)+1)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00711         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00712     }
00713     strcpy(p-&gt;<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o0">Text</a>,Text);
00714     p-&gt;<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o1">AssociatedData</a> = AssociatedData;
00715     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00716 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a94" doxytag="arcinst.h::AlAddMenuItems" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlAddMenuItems           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>MenuID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Text</em>[], </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ItemCount</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00720">720</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00684">AlAddMenuItem()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00629">AlGetMenuNumberItems()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01025">AlGetMenuSelection()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>, and <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>.
<p>
<pre class="fragment"><div>00725 {
00726     ULONG base,i;
00727 
00728     base = <a class="code" href="../../d4/d9/arcinst_8h.html#a96">AlGetMenuNumberItems</a>(MenuID);
00729 
00730     <span class="keywordflow">for</span>(i=0; i&lt;ItemCount; i++) {
00731     <span class="keywordflow">if</span>(!<a class="code" href="../../d4/d9/arcinst_8h.html#a93">AlAddMenuItem</a>(MenuID,Text[i],i+base,0)) {
00732             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00733         }
00734     }
00735     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00736 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a84" doxytag="arcinst.h::AlAddSystemPartition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> AlAddSystemPartition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>NewSystemPartition</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00424">424</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01574">ArcGetEnvironmentVariable</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01596">ArcSetEnvironmentVariable</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a2">E2BIG</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00827">MAXIMUM_ENVIRONMENT_VALUE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>.
<p>
<pre class="fragment"><div>00430                    :
00431 
00432     This routine adds a system partition to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> SystemPartition environment
00433     variable, and updates <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Osloader, OsloadPartition, OsloadFilename,
00434     and OsloadOptions variables.
00435 
00436 Arguments:
00437 
00438     SystemPartition - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> pathname of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> system
00439                       partition to add.
00440 
00441 Return Value:
00442 
00443     If <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> system partition was successfully added, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned,
00444     otherwise an error code <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
00445 
00446     BUGBUG - This program <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> simplistic and doesn'<a class="code" href="../../d4/d1/genmips_8c.html#a17">t</a> attempt to make sure all
00447     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> variables are consistent.  It also doesn'<a class="code" href="../../d4/d1/genmips_8c.html#a17">t</a> fail gracefully.
00448 
00449 --*/
00450 
00451 {
00452     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00453     PCHAR SystemPartition;
00454     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> TempValue[<a class="code" href="../../d4/d9/arcinst_8h.html#a38">MAXIMUM_ENVIRONMENT_VALUE</a>];
00455     <span class="comment">//PCHAR Osloader;</span>
00456     <span class="comment">//PCHAR OsloadPartition;</span>
00457     <span class="comment">//PCHAR OsloadFilename;</span>
00458     <span class="comment">//PCHAR OsloadOptions;</span>
00459 
00460     <span class="comment">//</span>
00461     <span class="comment">// Get the system partition environment variable.</span>
00462     <span class="comment">//</span>
00463 
00464     SystemPartition = <a class="code" href="../../d1/d9/arc_8h.html#a39">ArcGetEnvironmentVariable</a>(<span class="stringliteral">"SystemPartition"</span>);
00465 
00466     <span class="comment">//</span>
00467     <span class="comment">// If the variable doesn't exist, add it and exit.</span>
00468     <span class="comment">//</span>
00469 
00470     <span class="keywordflow">if</span> (SystemPartition == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00471         <span class="keywordflow">if</span>(<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(NewSystemPartition) &lt; <a class="code" href="../../d4/d9/arcinst_8h.html#a38">MAXIMUM_ENVIRONMENT_VALUE</a>) {
00472             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d9/arc_8h.html#a40">ArcSetEnvironmentVariable</a>(<span class="stringliteral">"SystemPartition"</span>,
00473                                                NewSystemPartition);
00474         } <span class="keywordflow">else</span> {
00475             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d2/d9/arccodes_8h.html#a24a2">E2BIG</a>;
00476         }
00477         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00478     }
00479 
00480     <span class="comment">//</span>
00481     <span class="comment">// If the variable exists, add the new partition to the end.</span>
00482     <span class="comment">//</span>
00483     <span class="keywordflow">if</span>(<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(SystemPartition)+<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(NewSystemPartition)+2 &gt; <a class="code" href="../../d4/d9/arcinst_8h.html#a38">MAXIMUM_ENVIRONMENT_VALUE</a>) {
00484         <span class="keywordflow">return</span>(<a class="code" href="../../d2/d9/arccodes_8h.html#a24a2">E2BIG</a>);
00485     }
00486 
00487     strcpy(TempValue, SystemPartition);
00488     strcat(TempValue, <span class="stringliteral">";"</span>);
00489     strcat(TempValue, NewSystemPartition);
00490     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d9/arc_8h.html#a40">ArcSetEnvironmentVariable</a>(<span class="stringliteral">"SystemPartition"</span>,
00491                                        TempValue);
00492 
00493     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00494         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00495     }
00496 
00497 <span class="preprocessor">#if 0</span>
00498 <span class="preprocessor"></span>    <span class="comment">//</span>
00499     <span class="comment">// Add semicolons to the end of each of the associated variables.</span>
00500     <span class="comment">// If they don't exist add them.</span>
00501     <span class="comment">//</span>
00502 
00503     <span class="comment">//</span>
00504     <span class="comment">// Get the Osloader environment variable and add a semicolon to the end.</span>
00505     <span class="comment">//</span>
00506 
00507     Osloader = <a class="code" href="../../d1/d9/arc_8h.html#a39">ArcGetEnvironmentVariable</a>(<span class="stringliteral">"Osloader"</span>);
00508     <span class="keywordflow">if</span> (Osloader == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00509         *TempValue = 0;
00510     } <span class="keywordflow">else</span> {
00511         strcpy(TempValue, Osloader);
00512     }
00513     strcat(TempValue, <span class="stringliteral">";"</span>);
00514     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d9/arc_8h.html#a40">ArcSetEnvironmentVariable</a>(<span class="stringliteral">"Osloader"</span>,TempValue);
00515 
00516     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00517         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00518     }
00519 
00520     <span class="comment">//</span>
00521     <span class="comment">// Get the OsloadPartition environment variable and add a semicolon to the end.</span>
00522     <span class="comment">//</span>
00523 
00524     OsloadPartition = <a class="code" href="../../d1/d9/arc_8h.html#a39">ArcGetEnvironmentVariable</a>(<span class="stringliteral">"OsloadPartition"</span>);
00525     <span class="keywordflow">if</span> (OsloadPartition == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00526         *TempValue = 0;
00527     } <span class="keywordflow">else</span> {
00528         strcpy(TempValue, OsloadPartition);
00529     }
00530     strcat(TempValue, <span class="stringliteral">";"</span>);
00531     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d9/arc_8h.html#a40">ArcSetEnvironmentVariable</a>(<span class="stringliteral">"OsloadPartition"</span>,TempValue);
00532 
00533     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00534         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00535     }
00536 
00537     <span class="comment">//</span>
00538     <span class="comment">// Get the OsloadFilename environment variable and add a semicolon to the end.</span>
00539     <span class="comment">//</span>
00540 
00541     OsloadFilename = <a class="code" href="../../d1/d9/arc_8h.html#a39">ArcGetEnvironmentVariable</a>(<span class="stringliteral">"OsloadFilename"</span>);
00542     <span class="keywordflow">if</span> (OsloadFilename == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00543         *TempValue = 0;
00544     } <span class="keywordflow">else</span> {
00545         strcpy(TempValue, OsloadFilename);
00546     }
00547     strcat(TempValue, <span class="stringliteral">";"</span>);
00548     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d9/arc_8h.html#a40">ArcSetEnvironmentVariable</a>(<span class="stringliteral">"OsloadFilename"</span>,TempValue);
00549 
00550     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00551         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00552     }
00553 
00554     <span class="comment">//</span>
00555     <span class="comment">// Get the OsloadOptions environment variable and add a semicolon to the end.</span>
00556     <span class="comment">//</span>
00557 
00558     OsloadOptions = <a class="code" href="../../d1/d9/arc_8h.html#a39">ArcGetEnvironmentVariable</a>(<span class="stringliteral">"OsloadOptions"</span>);
00559     <span class="keywordflow">if</span> (OsloadOptions == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00560         *TempValue = 0;
00561     } <span class="keywordflow">else</span> {
00562         strcpy(TempValue, OsloadOptions);
00563     }
00564     strcat(TempValue, <span class="stringliteral">";"</span>);
00565     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d9/arc_8h.html#a40">ArcSetEnvironmentVariable</a>(<span class="stringliteral">"OsloadOptions"</span>,TempValue);
00566 <span class="preprocessor">#endif</span>
00567 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00568 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a86" doxytag="arcinst.h::AlAllocateHeap" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PVOID AlAllocateHeap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Size</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d5/memory_8c-source.html#l01113">1113</a> of file <a class="el" href="../../d5/d5/memory_8c-source.html">memory.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l00365">AlRtAllocateHeap()</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l00115">HeapHandle</a>, and <a class="el" href="../../d9/d6/lh__open_2pi__mem_8h-source.html#l00017">Size</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00684">AlAddMenuItem()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01150">AlCombinePaths()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00026">AlGetEnvVarComponents()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00647">AlNewMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01113">AlStrDup()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00812">LowGetDiskLayout()</a>, and <a class="el" href="../../d2/d5/low_8c-source.html#l01076">LowSetDiskLayout()</a>.
<p>
<pre class="fragment"><div>01116 {
01117     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d6/memory_8c.html#a18">AlRtAllocateHeap</a>
01118          (
01119          <a class="code" href="../../d4/d6/memory_8c.html#a15">HeapHandle</a>,
01120          <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>
01121          ));
01122 
01123 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a103" doxytag="arcinst.h::AlClearStatusArea" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID AlClearStatusArea           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>TopRow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BottomRow</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01010">1010</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00302">AlClearLine</a>, and <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00321">AlSetPosition</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00974">AlStatusMsg()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00993">AlStatusMsgNoWait()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00074">Confirm()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00191">PrintError()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00093">PrintErrorMsg()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00111">PrintMsg()</a>.
<p>
<pre class="fragment"><div>01014 {
01015     ULONG i;
01016 
01017     <span class="keywordflow">for</span>(i=BottomRow; i&gt;=TopRow; --i) {
01018         <a class="code" href="../../d4/d9/arcinst_8h.html#a19">AlSetPosition</a>(i,0);
01019         <a class="code" href="../../d4/d9/arcinst_8h.html#a16">AlClearLine</a>();
01020     }
01021 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a105" doxytag="arcinst.h::AlCombinePaths" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR AlCombinePaths           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>szPath1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>szPath2</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01150">1150</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01113">AlAllocateHeap()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
<pre class="fragment"><div>01158                    :
01159 
01160     This routine combines to strings. It allocate a <span class="keyword">new</span> string
01161     to hold both strings.
01162 
01163 Arguments:
01164 
01165     pointer to combined <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a>. <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> <span class="keywordflow">if</span> failed to allocate.
01166 
01167 Return Value:
01168 
01169 
01170 --*/
01171 {
01172 
01173     PCHAR   szT;
01174 
01175     <span class="keywordflow">if</span> (szT = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(szPath1) + <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(szPath2) + 1)) {
01176 
01177         strcpy(szT, szPath1);
01178         strcat(szT, szPath2);
01179         <span class="keywordflow">return</span>( szT );
01180 
01181     } <span class="keywordflow">else</span> {
01182 
01183         <span class="keywordflow">return</span> ( <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> );
01184 
01185     }
01186 
01187 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a87" doxytag="arcinst.h::AlDeallocateHeap" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PVOID AlDeallocateHeap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PVOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>HeapAddress</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d5/memory_8c-source.html#l01134">1134</a> of file <a class="el" href="../../d5/d5/memory_8c-source.html">memory.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l00555">AlRtFreeHeap()</a>, and <a class="el" href="../../d5/d5/memory_8c-source.html#l00115">HeapHandle</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01190">AlFreeArray()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00209">AlFreeEnvVarComponents()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00664">AlFreeMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01244">AlGetBase()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00265">AlpFreeComponents()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00812">LowGetDiskLayout()</a>, and <a class="el" href="../../d2/d5/low_8c-source.html#l01076">LowSetDiskLayout()</a>.
<p>
<pre class="fragment"><div>01137 {
01138     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d6/memory_8c.html#a19">AlRtFreeHeap</a>
01139         (
01140         <a class="code" href="../../d4/d6/memory_8c.html#a15">HeapHandle</a>,
01141         HeapAddress
01142         ));
01143 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a95" doxytag="arcinst.h::AlDisplayMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlDisplayMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>MenuID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>PrintOnly</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>AssociatedDataOfDefaultChoice</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG *&nbsp;</td>
          <td class="mdname" nowrap> <em>AssociatedDataOfChoice</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Row</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>MenuName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00740">740</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d9/d6/almisc_8c.html#a5">PMENUCOOKIE</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01025">AlGetMenuSelection()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>, and <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>.
<p>
<pre class="fragment"><div>00748 {
00749     <span class="keywordflow">return</span>(<a class="code" href="../../d9/d6/almisc_8c.html#a18">CommonMenuDisplay</a>((<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a>)MenuID,
00750                              FALSE,
00751                              NULL,
00752                              ((<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a>)MenuID)-&gt;ItemCount,
00753                              PrintOnly,
00754                              AssociatedDataOfDefaultChoice,
00755                              AssociatedDataOfChoice,
00756                              MenuName,
00757                              Row
00758                             )
00759           );
00760 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a83" doxytag="arcinst.h::AlFindNextMatchComponent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlFindNextMatchComponent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>EnvValue</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>MatchValue</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>StartComponent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG MatchComponent&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00361">361</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00209">AlFreeEnvVarComponents()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00026">AlGetEnvVarComponents()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00303">AlpMatchComponent()</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00129">IsBootSelectionPartition()</a>.
<p>
<pre class="fragment"><div>00370                    :
00371 
00372     This routine compares each component of EnvValue, starting with
00373     StartComponent, until a match <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> found or there are no more components.
00374 
00375 Arguments:
00376 
00377     EnvValue - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> environment variable value.
00378 
00379     MatchValue - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> value to match.
00380 
00381     StartComponent - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> component number to start <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> match.
00382 
00383     MatchComponent - Supplies an optional pointer to a variable to receive
00384                      <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> component that matched.
00385 
00386 Return Value:
00387 
00388     If a match <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> found, <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned, otherwise <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
00389 
00390 --*/
00391 
00392 {
00393     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00394     PCHAR *EnvVarComponents;
00395     ULONG NumComponents;
00396     ULONG <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00397     BOOLEAN Match;
00398 
00399 
00400     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d4/d9/arcinst_8h.html#a81">AlGetEnvVarComponents</a>(EnvValue, &amp;EnvVarComponents, &amp;NumComponents);
00401 
00402     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00403         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00404     }
00405 
00406     Match = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00407     <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = StartComponent ; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; NumComponents ; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++ ) {
00408         <span class="keywordflow">if</span> (<a class="code" href="../../d9/d6/almisc_8c.html#a12">AlpMatchComponent</a>(EnvVarComponents[Index], MatchValue)) {
00409             Match = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00410             <span class="keywordflow">break</span>;
00411         }
00412     }
00413 
00414     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(MatchComponent)) {
00415         *MatchComponent = <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00416     }
00417 
00418     <a class="code" href="../../d4/d9/arcinst_8h.html#a82">AlFreeEnvVarComponents</a>(EnvVarComponents);
00419     <span class="keywordflow">return</span> Match;
00420 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a106" doxytag="arcinst.h::AlFreeArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID AlFreeArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>fFreeArray</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>rgsz</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>csz</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01190">1190</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01134">AlDeallocateHeap()</a>.
<p>
<pre class="fragment"><div>01198                    :
01199 
01200     This routine iterates through an array of pointers to strings freeing
01201     each string and finally <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> array itself.
01202 
01203 Arguments:
01204 
01205     fFreeArray - flag wither to free <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> array itself.
01206     rgsz - pointer to array of strings.
01207     csz - size of array.
01208 
01209 Return Value:
01210 
01211 
01212 --*/
01213 
01214 {
01215 
01216     ULONG   irgsz;
01217 
01218     <span class="keywordflow">if</span> (!csz) {
01219 
01220         <span class="keywordflow">return</span>;
01221 
01222     }
01223 
01224     <span class="keywordflow">for</span>( irgsz = 0; irgsz &lt; csz; irgsz++ ) {
01225 
01226         <span class="keywordflow">if</span> (rgsz[irgsz]) {
01227 
01228             <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(rgsz[irgsz]);
01229 
01230         } <span class="keywordflow">else</span> {
01231 
01232             <span class="keywordflow">break</span>;
01233 
01234         }
01235 
01236     }
01237     <span class="keywordflow">if</span> (fFreeArray) {
01238         <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>( rgsz );
01239     }
01240 
01241 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a82" doxytag="arcinst.h::AlFreeEnvVarComponents" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> AlFreeEnvVarComponents           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>EnvVarComponents</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00209">209</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01134">AlDeallocateHeap()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00265">AlpFreeComponents()</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00361">AlFindNextMatchComponent()</a>.
<p>
<pre class="fragment"><div>00214                    :
00215 
00216     This routine frees up all <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> components in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ptr array and frees
00217     up <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> storage <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ptr array itself too
00218 
00219 Arguments:
00220 
00221     EnvVarComponents: <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ptr to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> PCHAR * <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>
00222 
00223 Return Value:
00224 
00225     <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> <span class="keywordflow">if</span> freeing successful
00226     <a class="code" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a>   <span class="keywordflow">if</span> memory ptr invalid
00227 
00228 
00229 
00230 --*/
00231 
00232 
00233 {
00234     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00235 
00236     <span class="comment">//</span>
00237     <span class="comment">// if the pointer is NULL just return success</span>
00238     <span class="comment">//</span>
00239     <span class="keywordflow">if</span> (EnvVarComponents == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00240         <span class="keywordflow">return</span> (<a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>);
00241     }
00242 
00243     <span class="comment">//</span>
00244     <span class="comment">// free all the components first, if error in freeing return</span>
00245     <span class="comment">//</span>
00246     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d9/d6/almisc_8c.html#a11">AlpFreeComponents</a>(EnvVarComponents);
00247     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00248         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00249     }
00250 
00251     <span class="comment">//</span>
00252     <span class="comment">// free the component holder too</span>
00253     <span class="comment">//</span>
00254     <span class="keywordflow">if</span>( <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(EnvVarComponents) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00255         <span class="keywordflow">return</span> (<a class="code" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a>);
00256     }
00257     <span class="keywordflow">else</span> {
00258         <span class="keywordflow">return</span> (<a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>);
00259     }
00260 
00261 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a92" doxytag="arcinst.h::AlFreeMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID AlFreeMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>MenuID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00664">664</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01134">AlDeallocateHeap()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00577">_tagMENUCOOKIE::ItemCount</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00578">_tagMENUCOOKIE::Items</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d6/almisc_8c.html#a5">PMENUCOOKIE</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00572">_tagMENUITEM::Text</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01025">AlGetMenuSelection()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.
<p>
<pre class="fragment"><div>00667 {
00668     <a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a> p = MenuID;
00669     ULONG       i;
00670 
00671     <span class="keywordflow">for</span>(i=0; i&lt;p-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o0">ItemCount</a>; i++) {
00672         <span class="keywordflow">if</span>(p-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>[i].<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o0">Text</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00673             <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(p-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>[i].<a class="code" href="../../d1/d9/struct__tagMENUITEM.html#o0">Text</a>);
00674         }
00675     }
00676     <span class="keywordflow">if</span>(p-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>) {
00677         <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(p-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a>);
00678     }
00679     <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(p);
00680 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a107" doxytag="arcinst.h::AlGetBase" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> AlGetBase           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>szPath</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>pszBase</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01244">1244</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01134">AlDeallocateHeap()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01113">AlStrDup()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00029">EBADSYNTAX</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>01251                    :
01252 
01253 
01254     This routine strips <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> filename off a <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a>.
01255 
01256 Arguments:
01257 
01258     szPath - <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a> to strip.
01259 
01260 Return Value:
01261 
01262     pszBaseh - pointer to buffer holding <span class="keyword">new</span> base. (<span class="keyword">this</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a copy)
01263 
01264 --*/
01265 
01266 {
01267 
01268     PCHAR   szPathT;
01269 
01270     <span class="comment">//</span>
01271     <span class="comment">// Make local copy of szArcInstPath so we can alter it</span>
01272     <span class="comment">//</span>
01273     *pszBase = <a class="code" href="../../d4/d9/arcinst_8h.html#a104">AlStrDup</a>(szPath);
01274     <span class="keywordflow">if</span> ( *pszBase == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
01275 
01276         <span class="keywordflow">return</span>( <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a> );
01277     }
01278 
01279     <span class="comment">//</span>
01280     <span class="comment">// The start of the path part should be either a \ or a ) where</span>
01281     <span class="comment">// ) is the end of the arc name</span>
01282     <span class="comment">//</span>
01283     <span class="keywordflow">if</span> ((szPathT = strrchr(*pszBase,<span class="charliteral">'\\'</span>)) == 0) {
01284         <span class="keywordflow">if</span> ((szPathT = strrchr(*pszBase, <span class="charliteral">')'</span>)) == 0) {
01285 
01286             <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(*pszBase);
01287             <span class="keywordflow">return</span>( <a class="code" href="../../d4/d9/arcinst_8h.html#a11">EBADSYNTAX</a> );
01288         }
01289     }
01290 
01291 
01292     <span class="comment">//</span>
01293     <span class="comment">// Cut filename out</span>
01294     <span class="comment">//</span>
01295     <span class="comment">// szPath points to either ')' or '\' so need to move over that</span>
01296     <span class="comment">// onto actual name</span>
01297     <span class="comment">//</span>
01298     *(szPathT + 1) = 0;
01299     <span class="keywordflow">return</span>( <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> );
01300 
01301 
01302 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a81" doxytag="arcinst.h::AlGetEnvVarComponents" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> AlGetEnvVarComponents           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>EnvValue</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCHAR **&nbsp;</td>
          <td class="mdname" nowrap> <em>EnvVarComponents</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>PNumComponents</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00026">26</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01113">AlAllocateHeap()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00265">AlpFreeComponents()</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00031">MAX_COMPONENTS</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00361">AlFindNextMatchComponent()</a>.
<p>
<pre class="fragment"><div>00034                    :
00035 
00036     This routine takes an environment variable string and turns <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> into
00037     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> constituent value strings:
00038 
00039     Example EnvValue = <span class="stringliteral">"Value1;Value2;Value3"</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> turned into:
00040 
00041     <span class="stringliteral">"Value1"</span>, <span class="stringliteral">"Value2"</span>, <span class="stringliteral">"Value3"</span>
00042 
00043     The following are valid value strings:
00044 
00045     1. <span class="stringliteral">"     "</span>                                      :one null value <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> found
00046     2. <span class="stringliteral">";;;;    "</span>                                   :five null values are found
00047     3. <span class="stringliteral">" ;Value1    ;   Value2;Value3;;;;;;;   ;"</span>   :12 value strings are found,
00048                                                     :9 of which are null
00049 
00050     If an invalid component (contains embedded white space) <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> found in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00051     string then <span class="keyword">this</span> routine attempts to resynch to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> next value, no error
00052     <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned, and a <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> first part of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> invalid value <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00053     bad component.
00054 
00055     1.  <span class="stringliteral">"    Value1;Bad   Value2; Value3"</span>           : 2 value strings are found
00056 
00057     The value strings returned suppress all whitespace before and after <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00058     value.
00059 
00060 
00061 Arguments:
00062 
00063     EnvValue:  ptr to zero terminated environment value string
00064 
00065     EnvVarComponents: ptr to a PCHAR * variable to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer of
00066                       ptrs to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> constituent value strings.
00067 
00068     PNumComponents: ptr to a ULONG to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of value strings found
00069 
00070 Return Value:
00071 
00072     The function returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> following error codes:
00073          <a class="code" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a> <span class="keywordflow">if</span> EnvValue <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>
00074          <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a> <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> memory allocation fails
00075 
00076 
00077     The function returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> following success codes:
00078          <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>.
00079 
00080     When <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> function returns <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>:
00081          - *PNumComponent field gets <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of value strings found
00082          - <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> non zero <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> *EnvVarComponents field gets <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00083            ptr to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer containing ptrs to value strings
00084 
00085 --*/
00086 
00087 
00088 {
00089     PCHAR pchStart, pchEnd, pchNext;
00090     PCHAR pchComponents[<a class="code" href="../../d4/d9/arcinst_8h.html#a12">MAX_COMPONENTS</a> + 1];
00091     ULONG NumComponents, i;
00092     PCHAR pch;
00093     ULONG size;
00094 
00095     <span class="comment">//</span>
00096     <span class="comment">// Validate the EnvValue</span>
00097     <span class="comment">//</span>
00098     <span class="keywordflow">if</span> (EnvValue == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00099         <span class="keywordflow">return</span> (<a class="code" href="../../d2/d9/arccodes_8h.html#a24a3">EACCES</a>);
00100     }
00101 
00102     <span class="comment">//</span>
00103     <span class="comment">// Initialise the ptr array with nulls</span>
00104     <span class="comment">//</span>
00105     <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code" href="../../d4/d9/arcinst_8h.html#a12">MAX_COMPONENTS</a>+1); i++) {
00106         pchComponents[i] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00107     }
00108 
00109     <span class="comment">//</span>
00110     <span class="comment">// Initialise ptrs to search components</span>
00111     <span class="comment">//</span>
00112     pchStart      = EnvValue;
00113     NumComponents = 0;
00114 
00115 
00116     <span class="comment">//</span>
00117     <span class="comment">// search till either pchStart reaches the end or till max components</span>
00118     <span class="comment">// is reached, the below has been programmed from a dfsa.</span>
00119     <span class="comment">//</span>
00120     <span class="keywordflow">while</span> (*pchStart &amp;&amp; NumComponents &lt; <a class="code" href="../../d4/d9/arcinst_8h.html#a12">MAX_COMPONENTS</a>) {
00121 
00122         <span class="comment">//</span>
00123         <span class="comment">// STATE 1: find the beginning of next variable value</span>
00124         <span class="comment">//</span>
00125         <span class="keywordflow">while</span> (*pchStart!=0 &amp;&amp; isspace(*pchStart)) {
00126             pchStart++;
00127         }
00128 
00129 
00130         <span class="keywordflow">if</span> (*pchStart == 0) {
00131             <span class="keywordflow">break</span>;
00132         }
00133 
00134         <span class="comment">//</span>
00135         <span class="comment">// STATE 2: In the midst of a value</span>
00136         <span class="comment">//</span>
00137         pchEnd = pchStart;
00138         <span class="keywordflow">while</span> (*pchEnd!=0 &amp;&amp; !isspace(*pchEnd) &amp;&amp; *pchEnd!=<span class="charliteral">';'</span>) {
00139             pchEnd++;
00140         }
00141 
00142         <span class="comment">//</span>
00143         <span class="comment">// STATE 3: spit out the value found</span>
00144         <span class="comment">//</span>
00145 
00146         size = pchEnd - pchStart;
00147         <span class="keywordflow">if</span> ((pch = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(size+1)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00148             <a class="code" href="../../d9/d6/almisc_8c.html#a11">AlpFreeComponents</a>(pchComponents);
00149             <span class="keywordflow">return</span> (<a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>);
00150         }
00151         strncpy (pch, pchStart, size);
00152         pch[size]=0;
00153         pchComponents[NumComponents++]=pch;
00154 
00155         <span class="comment">//</span>
00156         <span class="comment">// STATE 4: variable value end has been reached, find the beginning</span>
00157         <span class="comment">// of the next value</span>
00158         <span class="comment">//</span>
00159         <span class="keywordflow">if</span> ((pchNext = strchr(pchEnd, <span class="charliteral">';'</span>)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00160             <span class="keywordflow">break</span>; <span class="comment">// out of the big while loop because we are done</span>
00161         }
00162 
00163         <span class="comment">//</span>
00164         <span class="comment">// Advance beyond the semicolon.</span>
00165         <span class="comment">//</span>
00166 
00167         pchNext++;
00168 
00169         <span class="comment">//</span>
00170         <span class="comment">// reinitialise to begin STATE 1</span>
00171         <span class="comment">//</span>
00172         pchStart = pchNext;
00173 
00174     } <span class="comment">// end while.</span>
00175 
00176     <span class="comment">//</span>
00177     <span class="comment">// Get memory to hold an environment pointer and return that</span>
00178     <span class="comment">//</span>
00179 
00180     <span class="keywordflow">if</span> ( NumComponents!=0 ) {
00181         PCHAR *pch;
00182 
00183         <span class="keywordflow">if</span> ((pch = (PCHAR *)<a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>((NumComponents+1)*<span class="keyword">sizeof</span>(PCHAR))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00184             <a class="code" href="../../d9/d6/almisc_8c.html#a11">AlpFreeComponents</a>(pchComponents);
00185             <span class="keywordflow">return</span> (<a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>);
00186         }
00187 
00188         <span class="comment">//</span>
00189         <span class="comment">// the last one is NULL because we initialised the array with NULLs</span>
00190         <span class="comment">//</span>
00191 
00192         <span class="keywordflow">for</span> ( i = 0; i &lt;= NumComponents; i++) {
00193             pch[i] = pchComponents[i];
00194         }
00195 
00196 
00197         *EnvVarComponents = pch;
00198     }
00199 
00200     <span class="comment">//</span>
00201     <span class="comment">// Update the number of elements field and return success</span>
00202     <span class="comment">//</span>
00203     *PNumComponents = NumComponents;
00204     <span class="keywordflow">return</span> (<a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>);
00205 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a97" doxytag="arcinst.h::AlGetMenuAssociatedData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG AlGetMenuAssociatedData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>MenuID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>n</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00638">638</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d8/d9/exts_8h-source.html#l00092">n</a>, and <a class="el" href="../../d9/d6/almisc_8c.html#a5">PMENUCOOKIE</a>.
<p>
<pre class="fragment"><div>00642 {
00643     <span class="keywordflow">return</span>(((<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a>)MenuID)-&gt;Items[<a class="code" href="../../d7/d0/exts_8h.html#a0">n</a>].AssociatedData);
00644 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a96" doxytag="arcinst.h::AlGetMenuNumberItems" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG AlGetMenuNumberItems           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>MenuID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00629">629</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d9/d6/almisc_8c.html#a5">PMENUCOOKIE</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00720">AlAddMenuItems()</a>.
<p>
<pre class="fragment"><div>00632 {
00633     <span class="keywordflow">return</span>(((<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a>)MenuID)-&gt;ItemCount);
00634 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a98" doxytag="arcinst.h::AlGetMenuSelection" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> AlGetMenuSelection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>szTitle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>rgszSelections</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>crgsz</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>crow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>irgszDefault</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>pirgsz</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>pszSelection</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01025">1025</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00720">AlAddMenuItems()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00740">AlDisplayMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00664">AlFreeMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00647">AlNewMenu()</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d6/d5/ntcon_2conime_2globals_8h-source.html#l00024">szTitle</a>.
<p>
<pre class="fragment"><div>01037                    :
01038 
01039     This routine takes an array of strings, turns them into a menu
01040     and gets a selection. If ESC hit then <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned with
01041     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> *pszSelection <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>.
01042 
01043     crgsz <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> assume to be 1 or greater.
01044 
01045 
01046 Arguments:
01047 
01048     <a class="code" href="../../d5/d6/ntcon_2conime_2globals_8h.html#a2">szTitle</a> - Pointer to menu title to pass to <a class="code" href="../../d9/d6/almisc_8c.html#a27">AlDisplayMenu</a>
01049     prgszSelection - pointer to an array of strings <span class="keywordflow">for</span> menu
01050     crgsz - count of strings
01051     irgszDefault - index in rgszSelection to use as <span class="keywordflow">default</span> selection
01052 
01053 Return Value:
01054 
01055     irgsz - index to selection
01056     pszSelection - pointer <span class="keywordtype">int</span> rgszSelection <span class="keywordflow">for</span> selection. Note that
01057                    <span class="keyword">this</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not a dup and should not be freed seperately
01058                    then rgszSelections.
01059 
01060     Note: <span class="keywordflow">if</span> <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> == <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> and pszSelection == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> then <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
01061           menu was successfully displayed but <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> user hit ESC to select
01062           nothing from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> menu.
01063 
01064 --*/
01065 
01066 
01067 {
01068 
01069     PVOID  hdMenuId;
01070 
01071     *pszSelection = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01072     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a91">AlNewMenu</a>(&amp;hdMenuId)) {
01073 
01074         <span class="keywordflow">return</span>( <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a> );
01075 
01076     }
01077 
01078     <span class="comment">//</span>
01079     <span class="comment">// BUGBUG for now 1 selection will also build a menu, in the</span>
01080     <span class="comment">// future once this is working we should just return that selection</span>
01081     <span class="comment">//</span>
01082 
01083     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a94">AlAddMenuItems</a>(hdMenuId, rgszSelections, crgsz)) {
01084 
01085         <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(hdMenuId);
01086         <span class="keywordflow">return</span>( <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a> );
01087 
01088     }
01089 
01090     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a95">AlDisplayMenu</a>(hdMenuId,
01091                        FALSE,
01092                        irgszDefault,
01093                        pirgsz,
01094                        crow,
01095                        szTitle)) {
01096 
01097         <span class="comment">//</span>
01098         <span class="comment">// User did not pick a system partition. return NULL</span>
01099         <span class="comment">// can caller should abort</span>
01100         <span class="comment">//</span>
01101         <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(hdMenuId);
01102         <span class="keywordflow">return</span>( <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> );
01103 
01104     }
01105 
01106     <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(hdMenuId);
01107     *pszSelection = rgszSelections[*pirgsz];
01108     <span class="keywordflow">return</span>( <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> );
01109 
01110 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a108" doxytag="arcinst.h::AlGetNextArcNameToken" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR AlGetNextArcNameToken           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>TokenString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>OutputToken</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>UnitNumber</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a115" doxytag="arcinst.h::AlGetString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlGetString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>String</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>StringLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01508">1508</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l00033">ARC_CONSOLE_INPUT</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00034">ARC_CONSOLE_OUTPUT</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01530">ArcRead</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01538">ArcWrite</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00023">ASCI_ESC</a>, <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, <a class="el" href="../../d4/d9/user32_8def-source.html#l00799">c</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00051">Count</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d8/talloc_8c-source.html#l00027">String</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00449">StringLength()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00934">AlWaitKey()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>.
<p>
<pre class="fragment"><div>01515                    :
01516 
01517     This routine reads a string from standardin until a
01518     carriage <span class="keywordflow">return</span> or escape <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> found or <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1158">StringLength</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> reached.
01519 
01520 Arguments:
01521 
01522     <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> - Supplies a pointer to where <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> string will be stored.
01523 
01524     <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1158">StringLength</a> - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d3/d8/udfprocs_8h.html#a4">Max</a> Length to read.
01525 
01526 Return Value:
01527 
01528     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> <span class="keywordflow">if</span> user pressed esc, <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> otherwise.
01529 
01530 --*/
01531 
01532 {
01533     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>    <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>;
01534     ULONG   <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
01535     PCHAR   <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>;
01536 
01537     <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> = <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>;
01538     <span class="keywordflow">while</span> (<a class="code" href="../../d1/d9/arc_8h.html#a33">ArcRead</a>(ARC_CONSOLE_INPUT,&amp;c,1,&amp;Count)==<a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
01539         <span class="keywordflow">if</span>(<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> == <a class="code" href="../../d4/d9/arcinst_8h.html#a9">ASCI_ESC</a>) {
01540             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01541         }
01542         <span class="keywordflow">if</span> ((<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>==<span class="charliteral">'\r'</span>) || (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>==<span class="charliteral">'\n'</span>) || ((ULONG)(<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>-<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1158">StringLength</a>)) {
01543             *<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>=<span class="charliteral">'\0'</span>;
01544             <a class="code" href="../../d1/d9/arc_8h.html#a35">ArcWrite</a>(ARC_CONSOLE_OUTPUT,<span class="stringliteral">"\r\n"</span>,2,&amp;Count);
01545             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01546         }
01547         <span class="comment">//</span>
01548         <span class="comment">// Check for backspace;</span>
01549         <span class="comment">//</span>
01550         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>==<span class="charliteral">'\b'</span>) {
01551             <span class="keywordflow">if</span> (((ULONG)<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> &gt; (ULONG)<a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>)) {
01552                 <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>--;
01553                 <a class="code" href="../../d1/d9/arc_8h.html#a35">ArcWrite</a>(ARC_CONSOLE_OUTPUT,<span class="stringliteral">"\b \b"</span>,3,&amp;Count);
01554             }
01555         } <span class="keywordflow">else</span> {
01556             <span class="comment">//</span>
01557             <span class="comment">// If it's a printable char store it and display it.</span>
01558             <span class="comment">//</span>
01559             <span class="keywordflow">if</span> (isprint(c)) {
01560                 *<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>++ = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>;
01561                 <a class="code" href="../../d1/d9/arc_8h.html#a35">ArcWrite</a>(ARC_CONSOLE_OUTPUT,&amp;c,1,&amp;Count);
01562             }
01563         }
01564     }
01565 }
}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a90" doxytag="arcinst.h::AlInitializeMenuPackage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlInitializeMenuPackage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00620">620</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>.
<p>
<pre class="fragment"><div>00623 {
00624     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00625 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a109" doxytag="arcinst.h::AlMatchArcNameToken" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG AlMatchArcNameToken           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>TokenValue</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d4/d9/arcinst_8h.html#a42">TOKEN_TYPES</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>TokenType</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a85" doxytag="arcinst.h::AlMemoryInitialize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> AlMemoryInitialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>StackPages</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>HeapPages</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d5/memory_8c-source.html#l00991">991</a> of file <a class="el" href="../../d5/d5/memory_8c-source.html">memory.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l00112">AlHeapFree</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l00113">AlHeapLimit</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l00119">AlRtCreateHeap()</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01500">ArcGetMemoryDescriptor</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00432">_MEMORY_DESCRIPTOR::BasePage</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l00107">HEAP_ZERO_EXTRA_MEMORY</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l00115">HeapHandle</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00591">KSEG0_BASE</a>, <a class="el" href="../../d1/d9/arc_8h.html#a316a230">MemoryFree</a>, <a class="el" href="../../d1/d9/arc_8h.html#a316a232">MemoryLoadedProgram</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00431">_MEMORY_DESCRIPTOR::MemoryType</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00600">PAGE_SHIFT</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00433">_MEMORY_DESCRIPTOR::PageCount</a>, and <a class="el" href="../../d1/d9/arc_8h.html#a74">PMEMORY_DESCRIPTOR</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>.
<p>
<pre class="fragment"><div>00998                    :
00999 
01000     This routine allocates stack space <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> OS loader, initializes
01001     heap storage, and initializes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> memory allocation list.
01002 
01003 Arguments:
01004 
01005     None.
01006 
01007 Return Value:
01008 
01009     <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> initialization <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> successful. Otherwise,
01010     <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> returned.
01011 
01012 --*/
01013 
01014 {
01015 
01016     <a class="code" href="../../d3/d8/struct__MEMORY__DESCRIPTOR.html">PMEMORY_DESCRIPTOR</a> FreeDescriptor;
01017     <a class="code" href="../../d3/d8/struct__MEMORY__DESCRIPTOR.html">PMEMORY_DESCRIPTOR</a> ProgramDescriptor;
01018 
01019     <span class="comment">//</span>
01020     <span class="comment">// Find the memory descriptor that describes the allocation for the OS</span>
01021     <span class="comment">// loader itself.</span>
01022     <span class="comment">//</span>
01023 
01024     ProgramDescriptor = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01025     <span class="keywordflow">while</span> ((ProgramDescriptor = <a class="code" href="../../d1/d9/arc_8h.html#a26">ArcGetMemoryDescriptor</a>(ProgramDescriptor)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01026         <span class="keywordflow">if</span> (ProgramDescriptor-&gt;<a class="code" href="../../d3/d8/struct__MEMORY__DESCRIPTOR.html#o0">MemoryType</a> == <a class="code" href="../../d1/d9/arc_8h.html#a316a232">MemoryLoadedProgram</a>) {
01027             <span class="keywordflow">break</span>;
01028         }
01029     }
01030 
01031     <span class="comment">//</span>
01032     <span class="comment">// If a loaded program memory descriptor was found, then it must be</span>
01033     <span class="comment">// for the OS loader since that is the only program that can be loaded.</span>
01034     <span class="comment">// If a loaded program memory descriptor was not found, then firmware</span>
01035     <span class="comment">// is not functioning properly and an unsuccessful status is returned.</span>
01036     <span class="comment">//</span>
01037 
01038     <span class="keywordflow">if</span> (ProgramDescriptor == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01039         <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>;
01040     }
01041 
01042     <span class="comment">//</span>
01043     <span class="comment">// Find the free memory descriptor that is just below the loaded</span>
01044     <span class="comment">// program in memory. There should be several megabytes of free</span>
01045     <span class="comment">// memory just preceeding the OS loader.</span>
01046     <span class="comment">//</span>
01047 
01048     FreeDescriptor = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01049     <span class="keywordflow">while</span> ((FreeDescriptor = <a class="code" href="../../d1/d9/arc_8h.html#a26">ArcGetMemoryDescriptor</a>(FreeDescriptor)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01050         <span class="keywordflow">if</span> ((FreeDescriptor-&gt;<a class="code" href="../../d3/d8/struct__MEMORY__DESCRIPTOR.html#o0">MemoryType</a> == <a class="code" href="../../d1/d9/arc_8h.html#a316a230">MemoryFree</a>) &amp;&amp;
01051             (FreeDescriptor-&gt;<a class="code" href="../../d3/d8/struct__MEMORY__DESCRIPTOR.html#o2">PageCount</a> &gt;= (StackPages+HeapPages))) {
01052             <span class="keywordflow">break</span>;
01053         }
01054     }
01055 
01056     <span class="comment">//</span>
01057     <span class="comment">// If a free memory descriptor was not found that describes the free</span>
01058     <span class="comment">// memory just below the OS loader, then firmware is not functioning</span>
01059     <span class="comment">// properly and an unsuccessful status is returned.</span>
01060     <span class="comment">//</span>
01061 
01062     <span class="keywordflow">if</span> (FreeDescriptor == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01063         <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>;
01064     }
01065 
01066     <span class="comment">//</span>
01067     <span class="comment">// Check to determine if enough free memory is available for the OS</span>
01068     <span class="comment">// loader stack and the heap area. If enough memory is not available,</span>
01069     <span class="comment">// then return an unsuccessful status.</span>
01070     <span class="comment">//</span>
01071 
01072     <span class="keywordflow">if</span> (FreeDescriptor-&gt;<a class="code" href="../../d3/d8/struct__MEMORY__DESCRIPTOR.html#o2">PageCount</a> &lt; (StackPages + HeapPages)) {
01073         <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>;
01074     }
01075 
01076     <span class="comment">//</span>
01077     <span class="comment">// Compute the address of the loader heap, initialize the heap</span>
01078     <span class="comment">// allocation variables, and zero the heap memory.</span>
01079     <span class="comment">//</span>
01080 
01081     <a class="code" href="../../d4/d6/memory_8c.html#a13">AlHeapFree</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a443">KSEG0_BASE</a> | ((ProgramDescriptor-&gt;<a class="code" href="../../d3/d8/struct__MEMORY__DESCRIPTOR.html#o1">BasePage</a> -
01082                 (StackPages + HeapPages)) &lt;&lt; <a class="code" href="../../d6/d7/halmips_8h.html#a447">PAGE_SHIFT</a>);
01083 
01084     <a class="code" href="../../d4/d6/memory_8c.html#a14">AlHeapLimit</a> = <a class="code" href="../../d4/d6/memory_8c.html#a13">AlHeapFree</a> + (HeapPages &lt;&lt; <a class="code" href="../../d6/d7/halmips_8h.html#a447">PAGE_SHIFT</a>);
01085 
01086     memset((PVOID)AlHeapFree, 0,HeapPages &lt;&lt; PAGE_SHIFT);
01087 
01088 
01089     <span class="comment">//</span>
01090     <span class="comment">// Changed to new heap allocater</span>
01091     <span class="comment">//</span>
01092 
01093     <span class="keywordflow">if</span> ((<a class="code" href="../../d4/d6/memory_8c.html#a15">HeapHandle</a> = <a class="code" href="../../d4/d6/memory_8c.html#a16">AlRtCreateHeap</a>
01094             (
01095             <a class="code" href="../../d4/d6/memory_8c.html#a4">HEAP_ZERO_EXTRA_MEMORY</a>,
01096             (PVOID)<a class="code" href="../../d4/d6/memory_8c.html#a13">AlHeapFree</a>,
01097             HeapPages &lt;&lt; <a class="code" href="../../d6/d7/halmips_8h.html#a447">PAGE_SHIFT</a>
01098             ))
01099             == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01100        <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>;
01101     <span class="keywordflow">else</span>
01102        <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>;
01103 
01104 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a91" doxytag="arcinst.h::AlNewMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlNewMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PVOID *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>MenuID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00647">647</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01113">AlAllocateHeap()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00577">_tagMENUCOOKIE::ItemCount</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00578">_tagMENUCOOKIE::Items</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d6/almisc_8c.html#a5">PMENUCOOKIE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01025">AlGetMenuSelection()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>, and <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>.
<p>
<pre class="fragment"><div>00650 {
00651     <a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">PMENUCOOKIE</a> p;
00652 
00653     <span class="keywordflow">if</span>(!(p = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html">MENUCOOKIE</a>)))) {
00654         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00655     }
00656     p-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o0">ItemCount</a> = 0;
00657     p-&gt;<a class="code" href="../../d0/d9/struct__tagMENUCOOKIE.html#o1">Items</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00658     *MenuID = p;
00659     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00660 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a114" doxytag="arcinst.h::AlPrint" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG AlPrint           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Format</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01483">1483</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l00034">ARC_CONSOLE_OUTPUT</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01538">ArcWrite</a>, <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, and <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00051">Count</a>.
<p>
Referenced by <a class="el" href="../../d5/d5/memory_8c-source.html#l00365">AlRtAllocateHeap()</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l00555">AlRtFreeHeap()</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l00807">AlRtReAllocateHeap()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00934">AlWaitKey()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00788">CommonMenuDisplay()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00074">Confirm()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00183">FdiskInitialize()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00495">FmtVerifySectors()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00885">MarkLine()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">vAlStatusMsg()</a>.
<p>
<pre class="fragment"><div>01488 {
01489 
01490     va_list arglist;
01491     UCHAR <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[256];
01492     ULONG <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
01493     ULONG Length;
01494 
01495     <span class="comment">//</span>
01496     <span class="comment">// Format the output into a buffer and then print it.</span>
01497     <span class="comment">//</span>
01498 
01499     va_start(arglist, Format);
01500     Length = vsprintf(Buffer, Format, arglist);
01501     <a class="code" href="../../d1/d9/arc_8h.html#a35">ArcWrite</a>( ARC_CONSOLE_OUTPUT, Buffer, Length, &amp;Count);
01502     va_end(arglist);
01503     <span class="keywordflow">return</span> 0;
01504 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a88" doxytag="arcinst.h::AlReallocateHeap" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PVOID AlReallocateHeap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>HeapAddress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>NewSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d5/memory_8c-source.html#l01153">1153</a> of file <a class="el" href="../../d5/d5/memory_8c-source.html">memory.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l00807">AlRtReAllocateHeap()</a>, and <a class="el" href="../../d5/d5/memory_8c-source.html#l00115">HeapHandle</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00684">AlAddMenuItem()</a>, and <a class="el" href="../../d2/d5/low_8c-source.html#l00812">LowGetDiskLayout()</a>.
<p>
<pre class="fragment"><div>01157 {
01158     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d6/memory_8c.html#a20">AlRtReAllocateHeap</a>
01159         (
01160         <a class="code" href="../../d4/d6/memory_8c.html#a15">HeapHandle</a>,
01161         HeapAddress,
01162         NewSize
01163         ));
01164 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a101" doxytag="arcinst.h::AlStatusMsg" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID AlStatusMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>TopRow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BottomRow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Error</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FormatString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00974">974</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l01010">AlClearStatusArea()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00934">AlWaitKey()</a>, <a class="el" href="../../d8/d9/ctlnpqos_8c-source.html#l00011">Error</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">vAlStatusMsg()</a>.
<p>
<pre class="fragment"><div>00981 {
00982     va_list ArgList;
00983 
00984     va_start(ArgList,FormatString);
00985     <a class="code" href="../../d4/d9/arcinst_8h.html#a100">vAlStatusMsg</a>(TopRow,Error,FormatString,ArgList);
00986 
00987     <a class="code" href="../../d4/d9/arcinst_8h.html#a99">AlWaitKey</a>(NULL);
00988     <a class="code" href="../../d4/d9/arcinst_8h.html#a103">AlClearStatusArea</a>(TopRow,BottomRow);
00989 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a102" doxytag="arcinst.h::AlStatusMsgNoWait" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID AlStatusMsgNoWait           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>TopRow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BottomRow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Error</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FormatString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00993">993</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l01010">AlClearStatusArea()</a>, <a class="el" href="../../d8/d9/ctlnpqos_8c-source.html#l00011">Error</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">vAlStatusMsg()</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>.
<p>
<pre class="fragment"><div>01000 {
01001     va_list ArgList;
01002 
01003     <a class="code" href="../../d4/d9/arcinst_8h.html#a103">AlClearStatusArea</a>(TopRow,BottomRow);
01004     va_start(ArgList,FormatString);
01005     <a class="code" href="../../d4/d9/arcinst_8h.html#a100">vAlStatusMsg</a>(TopRow,Error,FormatString,ArgList);
01006 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a104" doxytag="arcinst.h::AlStrDup" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR AlStrDup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>szString</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l01113">1113</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01113">AlAllocateHeap()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l01244">AlGetBase()</a>.
<p>
<pre class="fragment"><div>01120                    :
01121 
01122     This routine makes a copy of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> passed in string. I <span class="keywordflow">do</span> not use
01123     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> CRT strdup since <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> uses malloc.
01124 
01125 Arguments:
01126 
01127     szString - pointer of string to dup.
01128 
01129 Return Value:
01130 
01131     pointer to dup'd string. <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> <span class="keywordflow">if</span> could not allocate
01132 
01133 --*/
01134 {
01135 
01136     PCHAR   szT;
01137 
01138     <span class="keywordflow">if</span> (szT = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(szString) + 1)) {
01139 
01140         strcpy(szT, szString);
01141         <span class="keywordflow">return</span>(szT);
01142 
01143     }
01144     <span class="keywordflow">return</span>( <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> );
01145 
01146 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a89" doxytag="arcinst.h::AlValidateHeap" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN AlValidateHeap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN BOOLEAN&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>DumpHeap</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d5/memory_8c-source.html#l01174">1174</a> of file <a class="el" href="../../d5/d5/memory_8c-source.html">memory.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l00352">AlRtValidateHeap()</a>, and <a class="el" href="../../d5/d5/memory_8c-source.html#l00115">HeapHandle</a>.
<p>
<pre class="fragment"><div>01177 {
01178     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d6/memory_8c.html#a17">AlRtValidateHeap</a>
01179                 (
01180                 <a class="code" href="../../d4/d6/memory_8c.html#a15">HeapHandle</a>,
01181                 DumpHeap
01182                 ));
01183 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a99" doxytag="arcinst.h::AlWaitKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID AlWaitKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PCHAR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Prompt</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00934">934</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l01508">AlGetString()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01483">AlPrint()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00585">MSGMARGIN</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00974">AlStatusMsg()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00191">PrintError()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00093">PrintErrorMsg()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00111">PrintMsg()</a>.
<p>
<pre class="fragment"><div>00937 {
00938     <span class="keywordtype">char</span> buff[1];
00939 
00940     <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(MSGMARGIN);
00941     <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(Prompt ? Prompt : <span class="stringliteral">"Press any key to continue..."</span>);
00942     <a class="code" href="../../d4/d9/arcinst_8h.html#a115">AlGetString</a>(buff,0);
00943 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a158" doxytag="arcinst.h::CommitPartitionChanges" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> CommitPartitionChanges           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Disk</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03063">3063</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00411">ASRT</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00048">ChangesMade</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03121">HavePartitionsBeenChanged()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00037">LogicalVolumes</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00379">_tagPARTITION::Next</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00043">OffLine</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00334">OK_STATUS</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00384">_tagPARTITION::OriginalPartitionNumber</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00385">_tagPARTITION::PartitionNumber</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00037">PrimaryPartitions</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00387">_tagPARTITION::Update</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02886">WriteDriveLayout()</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.
<p>
<pre class="fragment"><div>03069                    :
03070 
03071     This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> entry point <span class="keywordflow">for</span> updating <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> on-disk partition
03072     structures of a disk.  The disk <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d3/d0/imm32_8def.html#a1">only</a> written to <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> partition
03073     structure has been changed by adding or deleting partitions.
03074 
03075 Arguments:
03076 
03077     Disk - index of disk whose on-disk partition structure <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be updated.
03078 
03079 Return Value:
03080 
03081     <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a> or error code.
03082 
03083 --*/
03084 
03085 {
03086     <a class="code" href="../../d2/d9/struct__tagPARTITION.html">PPARTITION</a>  p;
03087     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> status;
03088 
03089     <a class="code" href="../../d4/d9/arcinst_8h.html#a28">ASRT</a>(!OffLine[Disk]);
03090 
03091     <span class="keywordflow">if</span>(!<a class="code" href="../../d8/d1/fdengine_8c.html#a69">HavePartitionsBeenChanged</a>(Disk)) {
03092         <span class="keywordflow">return</span>(<a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>);
03093     }
03094 
03095     <span class="keywordflow">if</span>((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a67">WriteDriveLayout</a>(Disk)) != <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>) {
03096         <span class="keywordflow">return</span>(status);
03097     }
03098 
03099     <span class="comment">// BUGBUG for ARC and NT MIPS, update NVRAM vars so partitions are right.</span>
03100     <span class="comment">//        Do that here, before partition numbers are reassigned.</span>
03101 
03102     p = <a class="code" href="../../d8/d1/fdengine_8c.html#a5">PrimaryPartitions</a>[Disk];
03103     <span class="keywordflow">while</span>(p) {
03104         p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o8">Update</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03105         p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o5">OriginalPartitionNumber</a> = p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o6">PartitionNumber</a>;
03106         p = p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o0">Next</a>;
03107     }
03108     p = <a class="code" href="../../d8/d1/fdengine_8c.html#a6">LogicalVolumes</a>[Disk];
03109     <span class="keywordflow">while</span>(p) {
03110         p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o8">Update</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03111         p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o5">OriginalPartitionNumber</a> = p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o6">PartitionNumber</a>;
03112         p = p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o0">Next</a>;
03113     }
03114 
03115     <a class="code" href="../../d8/d1/fdengine_8c.html#a8">ChangesMade</a>[Disk] = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
03116     <span class="keywordflow">return</span>(<a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>);
03117 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a113" doxytag="arcinst.h::ConfigureOSPartitions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ConfigureOSPartitions           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a112" doxytag="arcinst.h::ConfigureSystemPartitions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ConfigureSystemPartitions           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">681</a> of file <a class="el" href="../../d8/d2/partit_8c-source.html">partit.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l00720">AlAddMenuItems()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00740">AlDisplayMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00664">AlFreeMenu()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00647">AlNewMenu()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02587">GetDiskCount()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00069">MENU_ROW</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00056">MsgNoMem</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00058">SysPartMenu</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00066">SYSPARTMENU_ADD</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00064">SYSPARTMENU_CREATE</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00065">SYSPARTMENU_DELETE</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00067">SYSPARTMENU_EXIT</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>.
<p>
<pre class="fragment"><div>00684 {
00685     ULONG Choice=0,DiskCount=<a class="code" href="../../d8/d1/fdengine_8c.html#a61">GetDiskCount</a>();
00686     PVOID MenuID;
00687 
00688     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a91">AlNewMenu</a>(&amp;MenuID)) {
00689         <a class="code" href="../../d7/d3/partit_8c.html#a2">MsgNoMem</a>();
00690         <span class="keywordflow">return</span>;
00691     }
00692 
00693     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9/arcinst_8h.html#a94">AlAddMenuItems</a>(MenuID,SysPartMenu,<span class="keyword">sizeof</span>(SysPartMenu)/<span class="keyword">sizeof</span>(PCHAR))) {
00694         <a class="code" href="../../d7/d3/partit_8c.html#a2">MsgNoMem</a>();
00695         <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(MenuID);
00696         <span class="keywordflow">return</span>;
00697     }
00698 
00699     <span class="keywordflow">while</span>(1) {
00700 
00701         <span class="keywordflow">if</span> ((!<a class="code" href="../../d4/d9/arcinst_8h.html#a95">AlDisplayMenu</a>(MenuID,FALSE,Choice,&amp;Choice,MENU_ROW,<span class="stringliteral">"Configure System Partitions"</span>))
00702             || (Choice == <a class="code" href="../../d7/d3/partit_8c.html#a6">SYSPARTMENU_EXIT</a>))
00703         {
00704             <span class="keywordflow">break</span>;
00705         }
00706 
00707         <span class="keywordflow">switch</span>(Choice) {
00708 
00709         <span class="keywordflow">case</span> <a class="code" href="../../d7/d3/partit_8c.html#a3">SYSPARTMENU_CREATE</a>:
00710             <span class="comment">// create system partition.</span>
00711             <a class="code" href="../../d7/d3/partit_8c.html#a34">DoSystemPartitionCreate</a>();
00712             <span class="keywordflow">break</span>;
00713 
00714         <span class="keywordflow">case</span> <a class="code" href="../../d7/d3/partit_8c.html#a4">SYSPARTMENU_DELETE</a>:
00715             <span class="comment">// delete partition</span>
00716             <a class="code" href="../../d7/d3/partit_8c.html#a33">DoPartitionDelete</a>();
00717             <span class="keywordflow">break</span>;
00718 
00719         <span class="keywordflow">case</span> <a class="code" href="../../d7/d3/partit_8c.html#a5">SYSPARTMENU_ADD</a>:
00720             <span class="comment">// make existing into a system partition</span>
00721             <a class="code" href="../../d7/d3/partit_8c.html#a35">DoMakePartitionSystemPartition</a>();
00722             <span class="keywordflow">break</span>;
00723         }
00724     }
00725 
00726     <a class="code" href="../../d4/d9/arcinst_8h.html#a92">AlFreeMenu</a>(MenuID);
00727 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a151" doxytag="arcinst.h::CreatePartition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> CreatePartition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Region</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>CreationSizeMB</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d4/d9/arcinst_8h.html#a175">REGION_TYPE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00698">698</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00549">CreatePartitionEx()</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a175a68">REGION_EXTENDED</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a176a72">SYSID_BIGFAT</a>, and <a class="el" href="../../d4/d9/arcinst_8h.html#a176a71">SYSID_EXTENDED</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>.
<p>
<pre class="fragment"><div>00703 {
00704     LARGE_INTEGER   LargeZero;
00705 
00706     LargeZero.QuadPart = 0;
00707     <span class="keywordflow">return</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a33">CreatePartitionEx</a>(Region,
00708                              LargeZero,
00709                              CreationSizeMB,
00710                              Type,
00711                              (UCHAR)((Type == REGION_EXTENDED) ? SYSID_EXTENDED
00712                                                                : SYSID_BIGFAT
00713                                     )
00714                             )
00715           );
00716 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a152" doxytag="arcinst.h::CreatePartitionEx" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> CreatePartitionEx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Region</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LARGE_INTEGER&nbsp;</td>
          <td class="mdname" nowrap> <em>MinimumSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>CreationSizeMB</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d4/d9/arcinst_8h.html#a175">REGION_TYPE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>SysId</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00549">549</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01051">AddPartitionToLinkedList()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01541">AllocatePartitionStructure()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00411">ASRT</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00048">ChangesMade</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00429">DetermineCreateSizeAndOffset()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00383">_tagPARTITION::Disk</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00382">_tagPARTITION::Length</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00037">LogicalVolumes</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01209">MergeFreePartitions()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00381">_tagPARTITION::Offset</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00334">OK_STATUS</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00394">_tagREGION_DATA::Partition</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00037">PrimaryPartitions</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00389">_tagPARTITION::Recognized</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a175a68">REGION_EXTENDED</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01257">RenumberPartitions()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00335">RETURN_OUT_OF_MEMORY</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00390">_tagPARTITION::SysID</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00387">_tagPARTITION::Update</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00698">CreatePartition()</a>.
<p>
<pre class="fragment"><div>00559                    :
00560 
00561     This routine creates a partition from a free region on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> disk.  The
00562     partition <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> always created at <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> beginning of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> free space, and any
00563     left over space at <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> end <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> kept on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> free space list.
00564 
00565 Arguments:
00566 
00567     Region  - a region descriptor returned by <a class="code" href="../../d8/d1/fdengine_8c.html#a36">GetDiskRegions</a>().  Must
00568               be an unused region.
00569 
00570     CreationSizeMB - size of partition to create, in MB.
00571 
00572     Type    - <a class="code" href="../../d4/d9/arcinst_8h.html#a175a67">REGION_PRIMARY</a>, <a class="code" href="../../d4/d9/arcinst_8h.html#a175a68">REGION_EXTENDED</a>, or <a class="code" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>, <span class="keywordflow">for</span>
00573               creating a primary partition, extended pasrtition, or
00574               logical volume, respectively.
00575 
00576     SysId - system <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a> byte to be assigned to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> partition
00577 
00578 Return Value:
00579 
00580     <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a> or error code.
00581 
00582 --*/
00583 
00584 {
00585     <a class="code" href="../../d2/d9/struct__tagPARTITION.html">PPARTITION</a>    p1,p2,p3;
00586     <a class="code" href="../../d3/d9/struct__tagREGION__DATA.html">PREGION_DATA</a>  CreateData = Region-&gt;Reserved;
00587     LARGE_INTEGER CreationStart,CreationSize,LeftOver;
00588     <a class="code" href="../../d2/d9/struct__tagPARTITION.html">PPARTITION</a>   *PartitionList;
00589 
00590     <a class="code" href="../../d4/d9/arcinst_8h.html#a28">ASRT</a>(Region-&gt;SysID == SYSID_UNUSED);
00591 
00592     <a class="code" href="../../d8/d1/fdengine_8c.html#a32">DetermineCreateSizeAndOffset</a>( Region,
00593                                   MinimumSize,
00594                                   CreationSizeMB,
00595                                   Type,
00596                                   &amp;CreationStart,
00597                                   &amp;CreationSize
00598                                 );
00599 
00600     <span class="comment">//</span>
00601     <span class="comment">// now we've got the start and size of the partition to be created.</span>
00602     <span class="comment">// If there's left-over at the beginning of the free space (after</span>
00603     <span class="comment">// alignment), make a new PARTITION structure.</span>
00604 
00605     p1 = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00606     LeftOver.QuadPart = (CreationStart.QuadPart - CreateData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o2">Offset</a>.QuadPart);
00607 
00608     <span class="keywordflow">if</span>(LeftOver.QuadPart &gt; 0) {
00609 
00610         p1 = <a class="code" href="../../d8/d1/fdengine_8c.html#a29">AllocatePartitionStructure</a>(Region-&gt;Disk,
00611                                         CreateData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o2">Offset</a>,
00612                                         LeftOver,
00613                                         SYSID_UNUSED,
00614                                         FALSE,
00615                                         FALSE,
00616                                         FALSE
00617                                        );
00618         <span class="keywordflow">if</span>(p1 == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00619             <a class="code" href="../../d4/d9/arcinst_8h.html#a24">RETURN_OUT_OF_MEMORY</a>;
00620         }
00621     }
00622 
00623     <span class="comment">// make a new partition structure for space being left free as</span>
00624     <span class="comment">// a result of this creation.</span>
00625 
00626     p2 = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00627     LeftOver.QuadPart = (CreateData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o2">Offset</a>.QuadPart + CreateData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o3">Length</a>.QuadPart) -
00628                         (CreationStart.QuadPart + CreationSize.QuadPart);
00629 
00630     <span class="keywordflow">if</span>(LeftOver.QuadPart != 0) {
00631 
00632         LARGE_INTEGER   TmpResult;
00633 
00634         TmpResult.QuadPart = CreationStart.QuadPart + CreationSize.QuadPart;
00635         p2 = <a class="code" href="../../d8/d1/fdengine_8c.html#a29">AllocatePartitionStructure</a>(Region-&gt;Disk,
00636                                         TmpResult,
00637                                         LeftOver,
00638                                         SYSID_UNUSED,
00639                                         FALSE,
00640                                         FALSE,
00641                                         FALSE
00642                                        );
00643         <span class="keywordflow">if</span>(p2 == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00644             <a class="code" href="../../d4/d9/arcinst_8h.html#a24">RETURN_OUT_OF_MEMORY</a>;
00645         }
00646     }
00647 
00648     <span class="comment">// adjust the free partition's fields.</span>
00649 
00650     CreateData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o2">Offset</a> = CreationStart;
00651     CreateData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o3">Length</a> = CreationSize;
00652     CreateData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o11">SysID</a>  = SysId;
00653     CreateData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o8">Update</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00654     CreateData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o10">Recognized</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00655 
00656     <span class="comment">// if we just created an extended partition, show the whole thing</span>
00657     <span class="comment">// as one free logical region.</span>
00658 
00659     <span class="keywordflow">if</span>(Type == <a class="code" href="../../d4/d9/arcinst_8h.html#a175a68">REGION_EXTENDED</a>) {
00660 
00661         <a class="code" href="../../d4/d9/arcinst_8h.html#a28">ASRT</a>(LogicalVolumes[Region-&gt;Disk] == NULL);
00662 
00663         p3 = <a class="code" href="../../d8/d1/fdengine_8c.html#a29">AllocatePartitionStructure</a>(Region-&gt;Disk,
00664                                         CreationStart,
00665                                         CreationSize,
00666                                         SYSID_UNUSED,
00667                                         FALSE,
00668                                         FALSE,
00669                                         FALSE
00670                                        );
00671         <span class="keywordflow">if</span>(p3 == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00672             <a class="code" href="../../d4/d9/arcinst_8h.html#a24">RETURN_OUT_OF_MEMORY</a>;
00673         }
00674         <a class="code" href="../../d8/d1/fdengine_8c.html#a39">AddPartitionToLinkedList</a>(&amp;LogicalVolumes[Region-&gt;Disk],p3);
00675     }
00676 
00677     PartitionList = (Type == <a class="code" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>)
00678                   ? &amp;<a class="code" href="../../d8/d1/fdengine_8c.html#a6">LogicalVolumes</a>[Region-&gt;Disk]
00679                   : &amp;<a class="code" href="../../d8/d1/fdengine_8c.html#a5">PrimaryPartitions</a>[Region-&gt;Disk];
00680 
00681     <span class="keywordflow">if</span>(p1) {
00682         <a class="code" href="../../d8/d1/fdengine_8c.html#a39">AddPartitionToLinkedList</a>(PartitionList,p1);
00683     }
00684     <span class="keywordflow">if</span>(p2) {
00685         <a class="code" href="../../d8/d1/fdengine_8c.html#a39">AddPartitionToLinkedList</a>(PartitionList,p2);
00686     }
00687 
00688     <a class="code" href="../../d8/d1/fdengine_8c.html#a25">MergeFreePartitions</a>(*PartitionList);
00689     <a class="code" href="../../d8/d1/fdengine_8c.html#a40">RenumberPartitions</a>(Region-&gt;Disk);
00690 
00691     <a class="code" href="../../d8/d1/fdengine_8c.html#a8">ChangesMade</a>[Region-&gt;Disk] = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00692 
00693     <span class="keywordflow">return</span>(<a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>);
00694 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a153" doxytag="arcinst.h::DeletePartition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> DeletePartition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Region</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00721">721</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00388">_tagPARTITION::Active</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00411">ASRT</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00048">ChangesMade</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00383">_tagPARTITION::Disk</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01473">FreeLinkedPartitionList()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02114">IsExtended()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01149">IsInLogicalList()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01179">IsInPartitionList()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00037">LogicalVolumes</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01209">MergeFreePartitions()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00334">OK_STATUS</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00384">_tagPARTITION::OriginalPartitionNumber</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00394">_tagREGION_DATA::Partition</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00037">PrimaryPartitions</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01257">RenumberPartitions()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00390">_tagPARTITION::SysID</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00387">_tagPARTITION::Update</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.
<p>
<pre class="fragment"><div>00727                    :
00728 
00729     This routine deletes a partition, returning its space to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00730     free space on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> disk.  If deleting <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> extended partition,
00731     all logical volumes within <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> are also deleted.
00732 
00733 Arguments:
00734 
00735     Region  - a region descriptor returned by <a class="code" href="../../d8/d1/fdengine_8c.html#a36">GetDiskRegions</a>().  Must
00736               be a used region.
00737 
00738 Return Value:
00739 
00740     <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a> or error code.
00741 
00742 --*/
00743 
00744 {
00745     <a class="code" href="../../d3/d9/struct__tagREGION__DATA.html">PREGION_DATA</a>  RegionData = Region-&gt;Reserved;
00746     <a class="code" href="../../d2/d9/struct__tagPARTITION.html">PPARTITION</a>   *PartitionList;
00747 
00748     <a class="code" href="../../d4/d9/arcinst_8h.html#a28">ASRT</a>(    <a class="code" href="../../d8/d1/fdengine_8c.html#a21">IsInPartitionList</a>(Region-&gt;Disk,RegionData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>)
00749           || <a class="code" href="../../d8/d1/fdengine_8c.html#a20">IsInLogicalList</a>  (Region-&gt;Disk,RegionData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>)
00750         );
00751 
00752     <span class="keywordflow">if</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a52">IsExtended</a>(Region-&gt;SysID)) {
00753 
00754         <a class="code" href="../../d4/d9/arcinst_8h.html#a28">ASRT</a>(<a class="code" href="../../d8/d1/fdengine_8c.html#a21">IsInPartitionList</a>(Region-&gt;Disk,RegionData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>));
00755 
00756         <span class="comment">// Deleting extended partition.  Also delete all logical volumes.</span>
00757 
00758         <a class="code" href="../../d8/d1/fdengine_8c.html#a45">FreeLinkedPartitionList</a>(&amp;LogicalVolumes[Region-&gt;Disk]);
00759     }
00760 
00761     RegionData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o11">SysID</a>  = <a class="code" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>;
00762     RegionData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o8">Update</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00763     RegionData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o9">Active</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00764     RegionData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o0">Partition</a>-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o5">OriginalPartitionNumber</a> = 0;
00765 
00766     PartitionList = (Region-&gt;RegionType == <a class="code" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>)
00767                   ? &amp;<a class="code" href="../../d8/d1/fdengine_8c.html#a6">LogicalVolumes</a>[Region-&gt;Disk]
00768                   : &amp;<a class="code" href="../../d8/d1/fdengine_8c.html#a5">PrimaryPartitions</a>[Region-&gt;Disk];
00769 
00770     <a class="code" href="../../d8/d1/fdengine_8c.html#a25">MergeFreePartitions</a>(*PartitionList);
00771     <a class="code" href="../../d8/d1/fdengine_8c.html#a40">RenumberPartitions</a>(Region-&gt;Disk);
00772 
00773     <a class="code" href="../../d8/d1/fdengine_8c.html#a8">ChangesMade</a>[Region-&gt;Disk] = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00774 
00775     <span class="keywordflow">return</span>(<a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>);
00776 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a138" doxytag="arcinst.h::DiskSizeMB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG DiskSizeMB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Disk</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02011">2011</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01940">DiskLengthBytes()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01972">SIZEMB()</a>.
<p>
<pre class="fragment"><div>02017                    :
02018 
02019     This routine determines <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> disk length in megabytes.  The returned
02020     value <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> rounded down after division by 1024*1024.
02021 
02022 Arguments:
02023 
02024     Disk - index of disk whose size <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> desired
02025 
02026 Return Value:
02027 
02028     <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a> of Disk.
02029 
02030 --*/
02031 
02032 {
02033     <span class="keywordflow">return</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a50">SIZEMB</a>(<a class="code" href="../../d8/d1/fdengine_8c.html#a28">DiskLengthBytes</a>(Disk)));
02034 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a148" doxytag="arcinst.h::DoesAnyLogicalExist" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> DoesAnyLogicalExist           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Disk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Exists</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a145" doxytag="arcinst.h::DoesAnyPartitionExist" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> DoesAnyPartitionExist           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Disk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>AnyExists</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>PrimaryExists</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>ExtendedExists</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>LogicalExists</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02394">2394</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02546">DoesAnyLogicalExist()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02446">DoesAnyPrimaryExist()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02496">DoesExtendedExist()</a>, and <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00334">OK_STATUS</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.
<p>
<pre class="fragment"><div>02404                    :
02405 
02406     This routine determines whether any partition exists on a given disk.
02407     This <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> based on three sub queries: whether there are any primary or
02408     extended partitions, or logical volumes on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> disk.
02409 
02410 Arguments:
02411 
02412     Disk            - index of disk to check
02413 
02414     AnyExists - returns whether any partitions exist on Disk
02415 
02416     PrimaryExists - returns whether any primary partitions exist on Disk
02417 
02418     ExtendedExists - returns whether there <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> an extended partition on Disk
02419 
02420     LogicalExists - returns whether any logical volumes exist on Disk
02421 
02422 Return Value:
02423 
02424     <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a> or error code
02425 
02426 --*/
02427 
02428 {
02429     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> status;
02430 
02431     <span class="keywordflow">if</span>((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a58">DoesAnyPrimaryExist</a>(Disk,PrimaryExists )) != <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>) {
02432         <span class="keywordflow">return</span>(status);
02433     }
02434     <span class="keywordflow">if</span>((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a59">DoesExtendedExist</a>  (Disk,ExtendedExists)) != <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>) {
02435         <span class="keywordflow">return</span>(status);
02436     }
02437     <span class="keywordflow">if</span>((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a60">DoesAnyLogicalExist</a>(Disk,LogicalExists )) != <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>) {
02438         <span class="keywordflow">return</span>(status);
02439     }
02440     *AnyExists = (BOOLEAN)(*PrimaryExists || *ExtendedExists || *LogicalExists);
02441     <span class="keywordflow">return</span>(<a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>);
02442 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a146" doxytag="arcinst.h::DoesAnyPrimaryExist" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> DoesAnyPrimaryExist           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Disk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Exists</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a147" doxytag="arcinst.h::DoesExtendedExist" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> DoesExtendedExist           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Disk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Exists</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a166" doxytag="arcinst.h::FdCrosses1024Cylinder" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN FdCrosses1024Cylinder           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Region</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>CreationSizeMB</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d4/d9/arcinst_8h.html#a175">REGION_TYPE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>RegionType</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03324">3324</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00358">_tagDISKGEOM::BytesPerCylinder</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00429">DetermineCreateSizeAndOffset()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00035">DiskGeometryArray</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00050">End</a>, <a class="el" href="../../d9/d6/lh__open_2pi__mem_8h-source.html#l00017">Size</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00049">Start</a>, and <a class="el" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>.
<p>
<pre class="fragment"><div>03332                    :
03333 
03334     Determine whether a used region corsses <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> 1024th cylinder, or whether
03335     a partition created within a free space will cross <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> 1024th cylinder.
03336 
03337 Arguments:
03338 
03339     Region - region describing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> partition to check.
03340 
03341     CreationSizeMB - <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Region <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <span class="keywordflow">for</span> a free space, <span class="keyword">this</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size of
03342         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> partition to be checked.
03343 
03344     RegionType - one of <a class="code" href="../../d4/d9/arcinst_8h.html#a175a67">REGION_PRIMARY</a>, <a class="code" href="../../d4/d9/arcinst_8h.html#a175a68">REGION_EXTENDED</a>, or <a class="code" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>
03345 
03346 Return Value:
03347 
03348     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> end cylinder &gt;= 1024.
03349 
03350 --*/
03351 
03352 {
03353     LARGE_INTEGER <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a>,<a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>,<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a>, LargeZero;
03354 
03355     <span class="keywordflow">if</span>(Region-&gt;SysID == <a class="code" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>) {
03356 
03357         <span class="comment">//</span>
03358         <span class="comment">// Determine the exact size and offset of the partition, according</span>
03359         <span class="comment">// to how CreatePartitionEx() will do it.</span>
03360         <span class="comment">//</span>
03361 
03362         LargeZero.QuadPart = 0;
03363         <a class="code" href="../../d8/d1/fdengine_8c.html#a32">DetermineCreateSizeAndOffset</a>( Region,
03364                                       LargeZero,
03365                                       CreationSizeMB,
03366                                       RegionType,
03367                                       &amp;Start,
03368                                       &amp;Size
03369                                     );
03370 
03371     } <span class="keywordflow">else</span> {
03372 
03373         <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a> = ((<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html">PREGION_DATA</a>)(Region-&gt;Reserved))-&gt;Partition-&gt;Offset;
03374         <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>  = ((<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html">PREGION_DATA</a>)(Region-&gt;Reserved))-&gt;Partition-&gt;Length;
03375     }
03376 
03377     <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a>.QuadPart = (<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a18">Start</a>.QuadPart + <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>.QuadPart) - 1;
03378 
03379     <span class="comment">//</span>
03380     <span class="comment">// End is the last byte in the partition.  Divide by the number of</span>
03381     <span class="comment">// bytes in a cylinder and see whether the result is &gt; 1023.</span>
03382     <span class="comment">//</span>
03383 
03384     <span class="keywordflow">return</span>( (<a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a>.QuadPart / <a class="code" href="../../d8/d1/fdengine_8c.html#a4">DiskGeometryArray</a>[Region-&gt;Disk].<a class="code" href="../../d6/d8/struct__tagDISKGEOM.html#o4">BytesPerCylinder</a>) &gt; 1023 );
03385 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a167" doxytag="arcinst.h::FdGetDiskSignature" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG FdGetDiskSignature           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Disk</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a165" doxytag="arcinst.h::FdGetExactOffset" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LARGE_INTEGER FdGetExactOffset           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Region</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03281">3281</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00359">_tagDISKGEOM::BytesPerTrack</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00035">DiskGeometryArray</a>, <a class="el" href="../../d5/d8/heapdbg_8c-source.html#l00033">Offset</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>, and <a class="el" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>.
<p>
<pre class="fragment"><div>03287                    :
03288 
03289     Determine where a given partition _actually_ starts, which may be
03290     different than where <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> appears because of EBR reserved tracks, etc.
03291 
03292     NOTE: This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not meant to operate on unused regions or
03293     extended partitions.  In these cases, <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> just returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> apparant offset.
03294 
03295 Arguments:
03296 
03297     Region - region describing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> partition to check.
03298 
03299 Return Value:
03300 
03301     Actual offset
03302 
03303 --*/
03304 
03305 {
03306     LARGE_INTEGER <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a> = ((<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html">PREGION_DATA</a>)(Region-&gt;Reserved))-&gt;Partition-&gt;Offset;
03307 
03308     <span class="keywordflow">if</span>((Region-&gt;SysID != <a class="code" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>) &amp;&amp; (Region-&gt;RegionType == <a class="code" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>)) {
03309 
03310         <span class="comment">//</span>
03311         <span class="comment">// The region is a logical volume.</span>
03312         <span class="comment">// Account for the reserved EBR track.</span>
03313         <span class="comment">//</span>
03314 
03315         <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a>.QuadPart = <a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a>.QuadPart +
03316                                  <a class="code" href="../../d8/d1/fdengine_8c.html#a4">DiskGeometryArray</a>[Region-&gt;Disk].<a class="code" href="../../d6/d8/struct__tagDISKGEOM.html#o5">BytesPerTrack</a>;
03317     }
03318 
03319     <span class="keywordflow">return</span>(<a class="code" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a>);
03320 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a164" doxytag="arcinst.h::FdGetExactSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LARGE_INTEGER FdGetExactSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Region</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>ForExtended</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03231">3231</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00395">_tagREGION_DATA::AlignedRegionOffset</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00396">_tagREGION_DATA::AlignedRegionSize</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00358">_tagDISKGEOM::BytesPerCylinder</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00359">_tagDISKGEOM::BytesPerTrack</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00035">DiskGeometryArray</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>, and <a class="el" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>.
<p>
<pre class="fragment"><div>03235 {
03236     <a class="code" href="../../d3/d9/struct__tagREGION__DATA.html">PREGION_DATA</a>  RegionData = Region-&gt;Reserved;
03237     LARGE_INTEGER LargeSize = RegionData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o2">AlignedRegionSize</a>;
03238     LARGE_INTEGER BytesPerTrack;
03239     LARGE_INTEGER BytesPerCylinder;
03240 
03241     BytesPerTrack.QuadPart = (<a class="code" href="../../d8/d1/fdengine_8c.html#a4">DiskGeometryArray</a>[Region-&gt;Disk].<a class="code" href="../../d6/d8/struct__tagDISKGEOM.html#o5">BytesPerTrack</a>);
03242     BytesPerCylinder.QuadPart = (<a class="code" href="../../d8/d1/fdengine_8c.html#a4">DiskGeometryArray</a>[Region-&gt;Disk].<a class="code" href="../../d6/d8/struct__tagDISKGEOM.html#o4">BytesPerCylinder</a>);
03243 
03244     <span class="keywordflow">if</span>(Region-&gt;RegionType == <a class="code" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>) {
03245 
03246         <span class="comment">//</span>
03247         <span class="comment">// The region is within the extended partition.  It doesn't matter</span>
03248         <span class="comment">// whether it's free space or used -- in either case, we need to</span>
03249         <span class="comment">// account for the reserved EBR track.</span>
03250         <span class="comment">//</span>
03251 
03252         LargeSize.QuadPart = LargeSize.QuadPart - BytesPerTrack.QuadPart;
03253 
03254     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(Region-&gt;SysID == <a class="code" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>) {
03255 
03256         <span class="comment">//</span>
03257         <span class="comment">// The region is unused space not inside the extended partition.</span>
03258         <span class="comment">// We must know whether the caller will put a primary or extended</span>
03259         <span class="comment">// partition there -- a primary partition can use all the space, but</span>
03260         <span class="comment">// a logical volume in the extended partition won't include the first</span>
03261         <span class="comment">// track.  If the free space starts at offset 0 on the disk, a special</span>
03262         <span class="comment">// calculation must be used to move the start of the partition to</span>
03263         <span class="comment">// skip a track for a primary or a cylinder and a track for an</span>
03264         <span class="comment">// extended+logical.</span>
03265         <span class="comment">//</span>
03266 
03267         <span class="keywordflow">if</span>((RegionData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o1">AlignedRegionOffset</a>.QuadPart == 0) || ForExtended) {
03268             LargeSize.QuadPart = LargeSize.QuadPart - BytesPerTrack.QuadPart;
03269         }
03270 
03271         <span class="keywordflow">if</span>((RegionData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o1">AlignedRegionOffset</a>.QuadPart == 0) &amp;&amp; ForExtended) {
03272             LargeSize.QuadPart = LargeSize.QuadPart - BytesPerCylinder.QuadPart;
03273         }
03274     }
03275 
03276     <span class="keywordflow">return</span>(LargeSize);
03277 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a163" doxytag="arcinst.h::FdGetMaximumSizeMB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG FdGetMaximumSizeMB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Region</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d4/d9/arcinst_8h.html#a175">REGION_TYPE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CreationType</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03203">3203</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00395">_tagREGION_DATA::AlignedRegionOffset</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00396">_tagREGION_DATA::AlignedRegionSize</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00411">ASRT</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00358">_tagDISKGEOM::BytesPerCylinder</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00359">_tagDISKGEOM::BytesPerTrack</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00035">DiskGeometryArray</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a175a68">REGION_EXTENDED</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a175a67">REGION_PRIMARY</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01972">SIZEMB()</a>, and <a class="el" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>.
<p>
<pre class="fragment"><div>03207 {
03208     <a class="code" href="../../d3/d9/struct__tagREGION__DATA.html">PREGION_DATA</a> CreateData = Region-&gt;Reserved;
03209     LARGE_INTEGER MaxSize = CreateData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o2">AlignedRegionSize</a>;
03210 
03211     <a class="code" href="../../d4/d9/arcinst_8h.html#a28">ASRT</a>(Region-&gt;SysID == SYSID_UNUSED);
03212 
03213     <span class="keywordflow">if</span>(CreateData-&gt;<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html#o1">AlignedRegionOffset</a>.QuadPart == 0) {
03214 
03215         ULONG Delta;
03216 
03217         <a class="code" href="../../d4/d9/arcinst_8h.html#a28">ASRT</a>((CreationType == REGION_EXTENDED) || (CreationType == REGION_PRIMARY))
03218 
03219         Delta = (CreationType == <a class="code" href="../../d4/d9/arcinst_8h.html#a175a68">REGION_EXTENDED</a>)
03220               ? <a class="code" href="../../d8/d1/fdengine_8c.html#a4">DiskGeometryArray</a>[Region-&gt;Disk].<a class="code" href="../../d6/d8/struct__tagDISKGEOM.html#o4">BytesPerCylinder</a>
03221               : <a class="code" href="../../d8/d1/fdengine_8c.html#a4">DiskGeometryArray</a>[Region-&gt;Disk].<a class="code" href="../../d6/d8/struct__tagDISKGEOM.html#o5">BytesPerTrack</a>;
03222 
03223         MaxSize.QuadPart = MaxSize.QuadPart - Delta;
03224     }
03225 
03226     <span class="keywordflow">return</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a50">SIZEMB</a>(MaxSize));
03227 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a162" doxytag="arcinst.h::FdGetMinimumSizeMB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG FdGetMinimumSizeMB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Disk</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03172">3172</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00358">_tagDISKGEOM::BytesPerCylinder</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00035">DiskGeometryArray</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01972">SIZEMB()</a>.
<p>
<pre class="fragment"><div>03178                    :
03179 
03180     Return <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d0/d4/mrcf_8c.html#a3">minimum</a> size <span class="keywordflow">for</span> a partition on a given disk.
03181 
03182     This <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> rounded size of one cylinder or 1, whichever <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> greater.
03183 
03184 Arguments:
03185 
03186     Region - region describing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> partition to check.
03187 
03188 Return Value:
03189 
03190     Actual offset
03191 
03192 --*/
03193 
03194 {
03195     LARGE_INTEGER   LargeInteger;
03196 
03197     LargeInteger.QuadPart = <a class="code" href="../../d8/d1/fdengine_8c.html#a4">DiskGeometryArray</a>[Disk].<a class="code" href="../../d6/d8/struct__tagDISKGEOM.html#o4">BytesPerCylinder</a>;
03198     <span class="keywordflow">return</span>(<a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(<a class="code" href="../../d8/d1/fdengine_8c.html#a50">SIZEMB</a>(LargeInteger),1));
03199 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a111" doxytag="arcinst.h::FdiskCleanUp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID FdiskCleanUp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00258">258</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00048">ChangesMade</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00030">CountOfDisks</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00035">DiskGeometryArray</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00031">DiskNames</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00332">FreeMemory</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01508">FreePartitionInfoLinkedLists()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00037">LogicalVolumes</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00786">LowFreeFdiskPathList()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00043">OffLine</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00037">PrimaryPartitions</a>.
<p>
<pre class="fragment"><div>00264                    :
00265 
00266     This routine deallocates storage used by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> partitioning engine.
00267 
00268 Arguments:
00269 
00270     None.
00271 
00272 Return Value:
00273 
00274     None.
00275 
00276 --*/
00277 
00278 {
00279     <a class="code" href="../../d1/d6/low_8c.html#a22">LowFreeFdiskPathList</a>(DiskNames,CountOfDisks);
00280 
00281     <span class="keywordflow">if</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a4">DiskGeometryArray</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00282         <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(DiskGeometryArray);
00283     }
00284     <span class="keywordflow">if</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a5">PrimaryPartitions</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00285         <a class="code" href="../../d8/d1/fdengine_8c.html#a46">FreePartitionInfoLinkedLists</a>(PrimaryPartitions);
00286         <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(PrimaryPartitions);
00287     }
00288     <span class="keywordflow">if</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a6">LogicalVolumes</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00289         <a class="code" href="../../d8/d1/fdengine_8c.html#a46">FreePartitionInfoLinkedLists</a>(LogicalVolumes);
00290         <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(LogicalVolumes);
00291     }
00292     <span class="keywordflow">if</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a8">ChangesMade</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00293         <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(ChangesMade);
00294     }
00295     <span class="keywordflow">if</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a7">OffLine</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00296         <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(OffLine);
00297     }
00298 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a110" doxytag="arcinst.h::FdiskInitialize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> FdiskInitialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00183">183</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00330">AllocateMemory</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l01483">AlPrint()</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00048">ChangesMade</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00302">CheckIfDiskIsOffLine()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00030">CountOfDisks</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00035">DiskGeometryArray</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00031">DiskNames</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a14">ENODEV</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00342">GetGeometry()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01882">InitializePartitionLists()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00037">LogicalVolumes</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00756">LowQueryFdiskPathList()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00043">OffLine</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00334">OK_STATUS</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a47">PPARTITION</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00037">PrimaryPartitions</a>, and <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00335">RETURN_OUT_OF_MEMORY</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00090">main()</a>.
<p>
<pre class="fragment"><div>00189                    :
00190 
00191     This routine initializes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> partitioning engine, including allocating
00192     arrays, determining attached disk devices, and reading their
00193     partition tables.
00194 
00195 Arguments:
00196 
00197     None.
00198 
00199 Return Value:
00200 
00201     <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a> or error code.
00202 
00203 --*/
00204 
00205 {
00206     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> status;
00207     ULONG        i;
00208 
00209 
00210     <span class="keywordflow">if</span>((status = <a class="code" href="../../d1/d6/low_8c.html#a21">LowQueryFdiskPathList</a>(&amp;DiskNames,&amp;CountOfDisks)) != <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>) {
00211         <span class="keywordflow">return</span>(status);
00212     }
00213 
00214 <span class="preprocessor">#if 0</span>
00215 <span class="preprocessor"></span><span class="preprocessor">#ifdef ARCDBG</span>
00216 <span class="preprocessor"></span>    <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(<span class="stringliteral">"Disk count = %u\r\n"</span>,CountOfDisks);
00217     <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="../../d8/d1/fdengine_8c.html#a2">CountOfDisks</a>; i++) {
00218         <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(<span class="stringliteral">"Disk %u: %s\r\n"</span>,i,DiskNames[i]);
00219     }
00220     WaitKey();
00221 <span class="preprocessor">#endif</span>
00222 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00223 <span class="preprocessor"></span>
00224     <a class="code" href="../../d8/d1/fdengine_8c.html#a4">DiskGeometryArray</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00225     <a class="code" href="../../d8/d1/fdengine_8c.html#a5">PrimaryPartitions</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00226     <a class="code" href="../../d8/d1/fdengine_8c.html#a6">LogicalVolumes</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00227 
00228     <span class="keywordflow">if</span>(((<a class="code" href="../../d8/d1/fdengine_8c.html#a4">DiskGeometryArray</a>      = <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(CountOfDisks * <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d8/struct__tagDISKGEOM.html">DISKGEOM</a>  ))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00229     || ((<a class="code" href="../../d8/d1/fdengine_8c.html#a8">ChangesMade</a>            = <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(CountOfDisks * <span class="keyword">sizeof</span>(BOOLEAN   ))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00230     || ((<a class="code" href="../../d8/d1/fdengine_8c.html#a5">PrimaryPartitions</a>      = <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(CountOfDisks * <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d9/struct__tagPARTITION.html">PPARTITION</a>))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00231     || ((<a class="code" href="../../d8/d1/fdengine_8c.html#a7">OffLine</a>                = <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(CountOfDisks * <span class="keyword">sizeof</span>(BOOLEAN   ))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00232     || ((<a class="code" href="../../d8/d1/fdengine_8c.html#a6">LogicalVolumes</a>         = <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(CountOfDisks * <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d9/struct__tagPARTITION.html">PPARTITION</a>))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>))
00233     {
00234         <a class="code" href="../../d4/d9/arcinst_8h.html#a24">RETURN_OUT_OF_MEMORY</a>;
00235     }
00236 
00237     <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="../../d8/d1/fdengine_8c.html#a2">CountOfDisks</a>; i++) {
00238         <a class="code" href="../../d8/d1/fdengine_8c.html#a5">PrimaryPartitions</a>[i] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00239         <a class="code" href="../../d8/d1/fdengine_8c.html#a6">LogicalVolumes</a>[i] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00240         <a class="code" href="../../d8/d1/fdengine_8c.html#a8">ChangesMade</a>[i] = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00241         <a class="code" href="../../d8/d1/fdengine_8c.html#a7">OffLine</a>[i] = <a class="code" href="../../d8/d1/fdengine_8c.html#a14">CheckIfDiskIsOffLine</a>(i);
00242         <span class="keywordflow">if</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a7">OffLine</a>[i]) {
00243             <span class="keywordflow">return</span>(<a class="code" href="../../d2/d9/arccodes_8h.html#a24a14">ENODEV</a>);
00244         }
00245     }
00246 
00247     <span class="keywordflow">if</span>(((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a13">GetGeometry</a>()             ) != <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>)
00248     || ((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a15">InitializePartitionLists</a>()) != <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>))
00249     {
00250         <span class="keywordflow">return</span>(status);
00251     }
00252 
00253     <span class="keywordflow">return</span>(<a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>);
00254 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a160" doxytag="arcinst.h::FdMarkDiskDirty" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID FdMarkDiskDirty           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Disk</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03152">3152</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00411">ASRT</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00048">ChangesMade</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00043">OffLine</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>03155 {
03156     <a class="code" href="../../d4/d9/arcinst_8h.html#a28">ASRT</a>(!OffLine[Disk]);
03157 
03158     <a class="code" href="../../d8/d1/fdengine_8c.html#a8">ChangesMade</a>[Disk] = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03159 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a168" doxytag="arcinst.h::FdSetDiskSignature" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID FdSetDiskSignature           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Disk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Signature</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a161" doxytag="arcinst.h::FdSetPersistentData" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID FdSetPersistentData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Region</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Data</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03162">3162</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
<pre class="fragment"><div>03166 {
03167     ((<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html">PREGION_DATA</a>)(Region-&gt;Reserved))-&gt;Partition-&gt;PersistentData = Data;
03168 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a119" doxytag="arcinst.h::FmtFatFormat" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> FmtFatFormat           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>PartitionPath</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>HiddenSectorCount</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00601">601</a> of file <a class="el" href="../../d2/d5/fmtexp_8c-source.html">fmtexp.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00330">AllocateMemory</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01514">ArcClose</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01504">ArcGetTime</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01526">ArcOpen</a>, <a class="el" href="../../d1/d9/arc_8h.html#a317a240">ArcOpenReadWrite</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00273">FmtFillFormatBuffer()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00495">FmtVerifySectors()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00332">FreeMemory</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00076">LowGetPartitionGeometry()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00281">LowWriteSectors()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>.
<p>
<pre class="fragment"><div>00607                    :
00608 
00609     This routine does a FAT <a class="code" href="../../d8/d0/rtbatcr_8c.html#a8">format</a> on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> given partition.
00610 
00611 Arguments:
00612 
00613     PartitionPath   - Supplies a <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a> to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> partition to <a class="code" href="../../d8/d0/rtbatcr_8c.html#a8">format</a>.
00614 
00615 Return Value:
00616 
00617     <a class="code" href="../../d4/d9/arcinst_8h.html#a125">LowGetPartitionGeometry</a>, <a class="code" href="../../d1/d9/arc_8h.html#a32">ArcOpen</a>,
00618     <a class="code" href="../../d1/d6/fmtexp_8c.html#a15">FmtVerifySectors</a>, <a class="code" href="../../d1/d6/fmtexp_8c.html#a14">FmtFillFormatBuffer</a>, <a class="code" href="../../d4/d9/arcinst_8h.html#a127">LowWriteSectors</a>,
00619     <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>
00620 
00621 --*/
00622 {
00623     ULONG           num_sectors;
00624     ULONG           sector_size;
00625     ULONG           sec_per_track;
00626     ULONG           heads;
00627     ULONG           hidden_sectors;
00628     PULONG          bad_sectors;
00629     ULONG           num_bad_sectors;
00630     PVOID           format_buffer;
00631     ULONG           max_sec_per_sa;
00632     ULONG           super_area_size;
00633     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>      r;
00634     ULONG           partition_id;
00635     ULONG           time_seed;
00636     PTIME_FIELDS    ptime_fields;
00637 
00638 
00639     r = <a class="code" href="../../d1/d6/low_8c.html#a12">LowGetPartitionGeometry</a>(PartitionPath, &amp;num_sectors,
00640                                 &amp;sector_size, &amp;sec_per_track, &amp;heads);
00641 
00642     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00643         <span class="keywordflow">return</span> r;
00644     }
00645 
00646     hidden_sectors = HiddenSectorCount;
00647 
00648     r = <a class="code" href="../../d1/d9/arc_8h.html#a32">ArcOpen</a>(PartitionPath, ArcOpenReadWrite, &amp;partition_id);
00649 
00650     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00651         <span class="keywordflow">return</span> r;
00652     }
00653 
00654     bad_sectors = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00655 
00656     r = <a class="code" href="../../d1/d6/fmtexp_8c.html#a15">FmtVerifySectors</a>(partition_id, num_sectors, sector_size,
00657                          &amp;bad_sectors, &amp;num_bad_sectors);
00658 
00659     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00660         <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>(partition_id);
00661         <span class="keywordflow">return</span> r;
00662     }
00663 
00664     max_sec_per_sa = 1 +
00665                      2*((2*65536 - 1)/sector_size + 1) +
00666                      ((512*32 - 1)/sector_size + 1);
00667 
00668     ptime_fields = <a class="code" href="../../d1/d9/arc_8h.html#a27">ArcGetTime</a>();
00669 
00670     time_seed = (ptime_fields-&gt;Year - 1970)*366*24*60*60 +
00671                 (ptime_fields-&gt;Month)*31*24*60*60 +
00672                 (ptime_fields-&gt;Day)*24*60*60 +
00673                 (ptime_fields-&gt;Hour)*60*60 +
00674                 (ptime_fields-&gt;Minute)*60 +
00675                 (ptime_fields-&gt;Second);
00676 
00677     <span class="keywordflow">if</span> (!(format_buffer = <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(max_sec_per_sa*sector_size))) {
00678 
00679         <span class="keywordflow">if</span> (bad_sectors) {
00680             <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(bad_sectors);
00681         }
00682         <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>(partition_id);
00683         <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>;
00684     }
00685 
00686     r = <a class="code" href="../../d1/d6/fmtexp_8c.html#a14">FmtFillFormatBuffer</a>(num_sectors,
00687                             sector_size,
00688                             sec_per_track,
00689                             heads,
00690                             hidden_sectors,
00691                             format_buffer,
00692                             max_sec_per_sa*sector_size,
00693                             &amp;super_area_size,
00694                             time_seed,
00695                             bad_sectors,
00696                             num_bad_sectors);
00697 
00698 
00699     <span class="keywordflow">if</span> (bad_sectors) {
00700         <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(bad_sectors);
00701     }
00702 
00703     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00704         <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>(partition_id);
00705         <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(format_buffer);
00706         <span class="keywordflow">return</span> r;
00707     }
00708 
00709     r = <a class="code" href="../../d1/d6/low_8c.html#a14">LowWriteSectors</a>(partition_id, sector_size, 0,
00710                         super_area_size/sector_size, format_buffer);
00711 
00712     <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(format_buffer);
00713 
00714     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00715         <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>(partition_id);
00716         <span class="keywordflow">return</span> r;
00717     }
00718 
00719     <span class="keywordflow">return</span> <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>(partition_id);
00720 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a121" doxytag="arcinst.h::FmtFreeFatPartitionList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> FmtFreeFatPartitionList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT PCHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>FatPartitionList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ListLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00919">919</a> of file <a class="el" href="../../d2/d5/fmtexp_8c-source.html">fmtexp.c</a>.
<p>
References <a class="el" href="../../d2/d5/low_8c-source.html#l00721">LowFreePathList()</a>.
<p>
<pre class="fragment"><div>00925                    :
00926 
00927     This routine frees up <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> heap space taken by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> FAT partition
00928     list.
00929 
00930 Arguments:
00931 
00932     FatPartitionList    - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer to free.
00933     ListLength          - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer length.
00934 
00935 Return Value:
00936 
00937     <a class="code" href="../../d4/d9/arcinst_8h.html#a131">LowFreePathList</a>
00938 
00939 --*/
00940 {
00941     <span class="keywordflow">return</span> <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(FatPartitionList, ListLength);
00942 }
}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a118" doxytag="arcinst.h::FmtIsFat" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> FmtIsFat           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>PartitionPath</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>IsFatPartition</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00093">93</a> of file <a class="el" href="../../d2/d5/fmtexp_8c-source.html">fmtexp.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01514">ArcClose</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01526">ArcOpen</a>, <a class="el" href="../../d1/d9/arc_8h.html#a317a238">ArcOpenReadOnly</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00042">FmtIsFatPartition()</a>, and <a class="el" href="../../d2/d5/low_8c-source.html#l00076">LowGetPartitionGeometry()</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, and <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00724">FmtQueryFatPartitionList()</a>.
<p>
<pre class="fragment"><div>00099                    :
00100 
00101     This routine computes whether or not <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> given partition <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a FAT
00102     partition.
00103 
00104 Arguments:
00105 
00106     PartitionPath   - Supplies a <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a> to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> partition.
00107     IsFatPartition  - Returns whether or not <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> partition <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> FAT.
00108 
00109 Return Value:
00110 
00111     <a class="code" href="../../d1/d9/arc_8h.html#a32">ArcOpen</a>, <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>, <a class="code" href="../../d4/d9/arcinst_8h.html#a125">LowGetPartitionGeometry</a>, <a class="code" href="../../d4/d9/arcinst_8h.html#a117">FmtIsFatPartition</a>
00112 
00113 --*/
00114 {
00115     ULONG       partition_id;
00116     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>  r;
00117     ULONG       total_sectors, sector_size, sec_per_track, heads;
00118 
00119     r = <a class="code" href="../../d1/d6/low_8c.html#a12">LowGetPartitionGeometry</a>(PartitionPath, &amp;total_sectors, &amp;sector_size,
00120                                 &amp;sec_per_track, &amp;heads);
00121 
00122     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00123         <span class="keywordflow">return</span> r;
00124     }
00125 
00126     r = <a class="code" href="../../d1/d9/arc_8h.html#a32">ArcOpen</a>(PartitionPath, ArcOpenReadOnly, &amp;partition_id);
00127 
00128     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00129         <span class="keywordflow">return</span> r;
00130     }
00131 
00132     r = <a class="code" href="../../d1/d6/fmtexp_8c.html#a9">FmtIsFatPartition</a>(partition_id, sector_size, IsFatPartition);
00133 
00134     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00135         <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>(partition_id);
00136         <span class="keywordflow">return</span> r;
00137     }
00138 
00139     <span class="keywordflow">return</span> <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>(partition_id);
00140 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a117" doxytag="arcinst.h::FmtIsFatPartition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> FmtIsFatPartition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>PartitionId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>SectorSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>IsFatPartition</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00042">42</a> of file <a class="el" href="../../d2/d5/fmtexp_8c-source.html">fmtexp.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00330">AllocateMemory</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00332">FreeMemory</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00212">LowReadSectors()</a>, and <a class="el" href="../../d4/d7/udfprocs_8h-source.html#l00230">SectorSize</a>.
<p>
Referenced by <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00093">FmtIsFat()</a>.
<p>
<pre class="fragment"><div>00049                    :
00050 
00051     This routine computes whether or not <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> given partition <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a FAT
00052     partition.
00053 
00054 Arguments:
00055 
00056     VolumeId        - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> volume to check.
00057     <a class="code" href="../../d3/d8/udfprocs_8h.html#a42">SectorSize</a>      - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of bytes per sector.
00058     IsFatPartition  - Returns whether or not <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> partition <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> FAT.
00059 
00060 Return Value:
00061 
00062     <a class="code" href="../../d4/d9/arcinst_8h.html#a126">LowReadSectors</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>
00063 
00064 --*/
00065 {
00066     PUCHAR      <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>;
00067     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>  r;
00068 
00069     <span class="keywordflow">if</span> (!(<a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a> = <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(SectorSize*2))) {
00070         <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>;
00071     }
00072 
00073     r = <a class="code" href="../../d1/d6/low_8c.html#a13">LowReadSectors</a>(PartitionId, SectorSize, 0, 2, Buffer);
00074 
00075     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00076         <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(Buffer);
00077         <span class="keywordflow">return</span> r;
00078     }
00079 
00080     *IsFatPartition = <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[510] == 0x55 &amp;&amp;
00081                       <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[511] == 0xAA &amp;&amp;
00082                       <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[0x10] != 0 &amp;&amp;
00083                       <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[0x15] == <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[<a class="code" href="../../d3/d8/udfprocs_8h.html#a42">SectorSize</a>] &amp;&amp;
00084                       <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[<a class="code" href="../../d3/d8/udfprocs_8h.html#a42">SectorSize</a> + 1] == 0xFF &amp;&amp;
00085                       <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[<a class="code" href="../../d3/d8/udfprocs_8h.html#a42">SectorSize</a> + 2] == 0xFF;
00086 
00087     <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(Buffer);
00088     <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>;
00089 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a120" doxytag="arcinst.h::FmtQueryFatPartitionList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> FmtQueryFatPartitionList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PCHAR **&nbsp;</td>
          <td class="mdname" nowrap> <em>FatPartitionList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ListLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00724">724</a> of file <a class="el" href="../../d2/d5/fmtexp_8c-source.html">fmtexp.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00330">AllocateMemory</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01514">ArcClose</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01526">ArcOpen</a>, <a class="el" href="../../d1/d9/arc_8h.html#a317a238">ArcOpenReadOnly</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d1/d9/arc_8h.html#a56">CONFIGURATION_TYPE</a>, <a class="el" href="../../d1/d9/arc_8h.html#a315a212">DiskPeripheral</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a9">EIO</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00093">FmtIsFat()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00332">FreeMemory</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00721">LowFreePathList()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00651">LowQueryPathList()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d9/heappage_8c.html#a68">sprintf()</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
<pre class="fragment"><div>00730                    :
00731 
00732     This routine browses <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> component tree <span class="keywordflow">for</span> all disk peripherals
00733     and <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> attempts to open partitions on all of them.  It add all
00734     FAT partitions to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> list and returns <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a>.
00735 
00736 Arguments:
00737 
00738     FatPartitionList    - Returns a list of FAT partitions.
00739     ListLength          - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> list.
00740 
00741 Return Value:
00742 
00743     <a class="code" href="../../d4/d9/arcinst_8h.html#a130">LowQueryPathList</a>, <a class="code" href="../../d1/d9/arc_8h.html#a32">ArcOpen</a>, <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>, <a class="code" href="../../d4/d9/arcinst_8h.html#a118">FmtIsFat</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a9">EIO</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>
00744 
00745 --*/
00746 {
00747     <a class="code" href="../../d1/d9/arc_8h.html#a56">CONFIGURATION_TYPE</a>          config_type;
00748     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>                  r;
00749     PCHAR*                      peripheral_list;
00750     ULONG                       peripheral_list_length;
00751     ULONG                       i, j;
00752     ULONG                       num_partitions;
00753     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>                        partition_buf[21];
00754     ULONG                       partition_id;
00755     PCHAR*                      fat_partition_list;
00756     ULONG                       fat_partition_list_length;
00757     BOOLEAN                     is_fat;
00758     PCHAR                       partition_name;
00759 
00760 
00761     <span class="comment">// First get a list of the all of the disk peripheral paths.</span>
00762 
00763     config_type = <a class="code" href="../../d1/d9/arc_8h.html#a315a212">DiskPeripheral</a>;
00764     r = <a class="code" href="../../d1/d6/low_8c.html#a19">LowQueryPathList</a>(NULL, &amp;config_type, &amp;peripheral_list,
00765                          &amp;peripheral_list_length);
00766 
00767     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00768         <span class="keywordflow">return</span> r;
00769     }
00770 
00771     <span class="comment">// Now we have a list of disk peripheral paths.</span>
00772 
00773 
00774 
00775     <span class="comment">// Next, count how many partitions there are.</span>
00776 
00777     num_partitions = 0;
00778     <span class="keywordflow">for</span> (i = 0; i &lt; peripheral_list_length; i++) {
00779 
00780         partition_name = <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(peripheral_list[i]) + 21);
00781 
00782         <span class="keywordflow">if</span> (!partition_name) {
00783             <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(peripheral_list, peripheral_list_length);
00784             <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>;
00785         }
00786 
00787         <span class="keywordflow">for</span> (j = 1; ; j++) {
00788 
00789             strcpy(partition_name, peripheral_list[i]);
00790             <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a>(partition_buf, <span class="stringliteral">"partition(%d)"</span>, j);
00791             strcat(partition_name, partition_buf);
00792 
00793             r = <a class="code" href="../../d1/d9/arc_8h.html#a32">ArcOpen</a>(partition_name, ArcOpenReadOnly, &amp;partition_id);
00794 
00795             <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00796                 <span class="keywordflow">break</span>;
00797             }
00798 
00799             num_partitions++;
00800 
00801             r = <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>(partition_id);
00802 
00803             <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00804                 <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(peripheral_list, peripheral_list_length);
00805                 <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(partition_name);
00806                 <span class="keywordflow">return</span> r;
00807             }
00808         }
00809 
00810         <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(partition_name);
00811     }
00812 
00813     <span class="comment">// 'num_partitions' indicates the number of partitions on the disk.</span>
00814 
00815 
00816     <span class="comment">// Allocate a buffer for the FAT partitions list.  There can be</span>
00817     <span class="comment">// no more FAT partitions then there are partitions.</span>
00818 
00819     fat_partition_list = (PCHAR*) <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(num_partitions*<span class="keyword">sizeof</span>(PCHAR));
00820 
00821     <span class="keywordflow">if</span> (!fat_partition_list) {
00822         <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(peripheral_list, peripheral_list_length);
00823         <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>;
00824     }
00825 
00826     <span class="keywordflow">for</span> (i = 0; i &lt; num_partitions; i++) {
00827         fat_partition_list[i] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00828     }
00829 
00830     fat_partition_list_length = 0;
00831 
00832     <span class="comment">// 'fat_partition_list_length' indicates the number of FAT partitions.</span>
00833 
00834 
00835 
00836     <span class="comment">// Now go through all of the peripherals trying all possible</span>
00837     <span class="comment">// partitions on each.  Test these to see if they are FAT and</span>
00838     <span class="comment">// put the FAT ones in 'fat_partitions_list'.</span>
00839 
00840     <span class="keywordflow">for</span> (i = 0; i &lt; peripheral_list_length; i++) {
00841 
00842         partition_name = <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(peripheral_list[i]) + 21);
00843 
00844         <span class="keywordflow">if</span> (!partition_name) {
00845             <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(peripheral_list, peripheral_list_length);
00846             <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(fat_partition_list, fat_partition_list_length);
00847             <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>;
00848         }
00849 
00850         <span class="keywordflow">for</span> (j = 1; ; j++) {
00851 
00852             strcpy(partition_name, peripheral_list[i]);
00853             <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a>(partition_buf, <span class="stringliteral">"partition(%d)"</span>, j);
00854             strcat(partition_name, partition_buf);
00855 
00856             r = <a class="code" href="../../d1/d9/arc_8h.html#a32">ArcOpen</a>(partition_name, ArcOpenReadOnly, &amp;partition_id);
00857 
00858             <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00859                 <span class="keywordflow">break</span>;
00860             }
00861 
00862             r = <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>(partition_id);
00863 
00864             <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00865                 <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(peripheral_list, peripheral_list_length);
00866                 <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(fat_partition_list, fat_partition_list_length);
00867                 <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(partition_name);
00868                 <span class="keywordflow">return</span> r;
00869             }
00870 
00871             r = <a class="code" href="../../d1/d6/fmtexp_8c.html#a10">FmtIsFat</a>(partition_name, &amp;is_fat);
00872 
00873             <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00874                 <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(peripheral_list, peripheral_list_length);
00875                 <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(fat_partition_list, fat_partition_list_length);
00876                 <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(partition_name);
00877                 <span class="keywordflow">return</span> r;
00878             }
00879 
00880             <span class="keywordflow">if</span> (is_fat) {
00881 
00882                 <span class="keywordflow">if</span> (fat_partition_list_length == num_partitions) {
00883                     <span class="comment">// This can't happen.</span>
00884                     <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(peripheral_list, peripheral_list_length);
00885                     <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(fat_partition_list, fat_partition_list_length);
00886                     <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(partition_name);
00887                     <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a9">EIO</a>;
00888                 }
00889 
00890                 fat_partition_list[fat_partition_list_length] =
00891                         <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(partition_name) + 1);
00892 
00893                 <span class="keywordflow">if</span> (!fat_partition_list[fat_partition_list_length]) {
00894                     <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(peripheral_list, peripheral_list_length);
00895                     <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(fat_partition_list, fat_partition_list_length);
00896                     <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(partition_name);
00897                     <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>;
00898                 }
00899 
00900                 strcpy(fat_partition_list[fat_partition_list_length], partition_name);
00901 
00902                 fat_partition_list_length++;
00903             }
00904         }
00905 
00906         <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(partition_name);
00907     }
00908 
00909     <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(peripheral_list, peripheral_list_length);
00910 
00911     *FatPartitionList = fat_partition_list;
00912     *ListLength = fat_partition_list_length;
00913 
00914     <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>;
00915 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a140" doxytag="arcinst.h::FreeRegionArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID FreeRegionArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Region</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>RegionCount</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01013">1013</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00332">FreeMemory</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02546">DoesAnyLogicalExist()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02446">DoesAnyPrimaryExist()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02496">DoesExtendedExist()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02272">IsCreationOfExtendedAllowed()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02333">IsCreationOfLogicalAllowed()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02198">IsCreationOfPrimaryAllowed()</a>.
<p>
<pre class="fragment"><div>01020                    :
01021 
01022     This routine frees a region array returned by <a class="code" href="../../d8/d1/fdengine_8c.html#a36">GetDiskRegions</a>().
01023 
01024 Arguments:
01025 
01026     Region          - pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> array of regions to be freed
01027 
01028     RegionCount     - number of items in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Region array
01029 
01030 Return Value:
01031 
01032     None.
01033 
01034 --*/
01035 
01036 {
01037     ULONG i;
01038 
01039     <span class="keywordflow">for</span>(i=0; i&lt;RegionCount; i++) {
01040 
01041         <span class="keywordflow">if</span>(Region[i].Reserved) {
01042             <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(Region[i].Reserved);
01043         }
01044     }
01045     <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(Region);
01046 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a136" doxytag="arcinst.h::GetDiskCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG GetDiskCount           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02587">2587</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00030">CountOfDisks</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00681">ConfigureSystemPartitions()</a>.
<p>
<pre class="fragment"><div>02593                    :
02594 
02595     This routine returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of attached partitionable disk
02596     devices.  The returned value <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> one greater than <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> maximum index
02597     allowed <span class="keywordflow">for</span> Disk parameters to partitioning engine <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a24">routines</a>.
02598 
02599 Arguments:
02600 
02601     None.
02602 
02603 Return Value:
02604 
02605     <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a> of disks.
02606 
02607 --*/
02608 
02609 {
02610     <span class="keywordflow">return</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a2">CountOfDisks</a>);
02611 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a137" doxytag="arcinst.h::GetDiskName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR GetDiskName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ULONG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Disk</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02615">2615</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00031">DiskNames</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00302">CheckIfDiskIsOffLine()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00149">ChooseDisk()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00129">IsBootSelectionPartition()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02823">ZapSector()</a>.
<p>
<pre class="fragment"><div>02621                    :
02622 
02623     This routine returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> system name <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> disk device whose
02624     index <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> given.
02625 
02626 Arguments:
02627 
02628     Disk - index of disk whose name <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> desired.
02629 
02630 Return Value:
02631 
02632     System name <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> disk device.  The caller must not attempt to
02633     free <span class="keyword">this</span> buffer or modify <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a>.
02634 
02635 --*/
02636 
02637 {
02638     <span class="keywordflow">return</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a3">DiskNames</a>[Disk]);
02639 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a139" doxytag="arcinst.h::GetDiskRegions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> GetDiskRegions           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Disk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>WantUsedRegions</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>WantFreeRegions</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>WantPrimaryRegions</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>WantLogicalRegions</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Region</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT ULONG *&nbsp;</td>
          <td class="mdname" nowrap> <em>RegionCount</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00780">780</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00330">AllocateMemory</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00859">GetRegions()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00037">LogicalVolumes</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00334">OK_STATUS</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00037">PrimaryPartitions</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a175a69">REGION_LOGICAL</a>, and <a class="el" href="../../d4/d9/arcinst_8h.html#a175a67">REGION_PRIMARY</a>.
<p>
<pre class="fragment"><div>00792                    :
00793 
00794     This routine returns an array of region descriptors to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> caller.
00795     <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> region desscriptor describes a space on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> disk, either used
00796     or free.  The caller can <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a58">control</a> which <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> of regions are returned.
00797 
00798     The caller must free <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> returned array via <a class="code" href="../../d8/d1/fdengine_8c.html#a38">FreeRegionArray</a>().
00799 
00800 Arguments:
00801 
00802     Disk            - index of disk whose regions are to be returned
00803 
00804     WantUsedRegions - whether to <span class="keywordflow">return</span> used disk regions
00805 
00806     WantFreeRegions - whether to <span class="keywordflow">return</span> free disk regions
00807 
00808     WantPrimaryRegions - whether to <span class="keywordflow">return</span> regions not in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00809                          extended partition
00810 
00811     WantLogicalRegions - whether to <span class="keywordflow">return</span> regions within <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00812                          extended partition
00813 
00814     Region          - where to put a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> array of regions
00815 
00816     RegionCount     - where to put <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of items in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> returned
00817                       Region array
00818 
00819 Return Value:
00820 
00821     <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a> or error code.
00822 
00823 --*/
00824 
00825 {
00826     *Region = <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(0);
00827     *RegionCount = 0;
00828 
00829     <span class="keywordflow">if</span>(WantPrimaryRegions) {
00830         <span class="keywordflow">return</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a16">GetRegions</a>(Disk,
00831                           PrimaryPartitions[Disk],
00832                           WantUsedRegions,
00833                           WantFreeRegions,
00834                           WantLogicalRegions,
00835                           Region,
00836                           RegionCount,
00837                           REGION_PRIMARY
00838                          )
00839               );
00840     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(WantLogicalRegions) {
00841         <span class="keywordflow">return</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a16">GetRegions</a>(Disk,
00842                           LogicalVolumes[Disk],
00843                           WantUsedRegions,
00844                           WantFreeRegions,
00845                           FALSE,
00846                           Region,
00847                           RegionCount,
00848                           REGION_LOGICAL
00849                          )
00850               );
00851     }
00852     <span class="keywordflow">return</span>(<a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>);
00853 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a154" doxytag="arcinst.h::GetHiddenSectorCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG GetHiddenSectorCount           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Disk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Partition</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a157" doxytag="arcinst.h::GetSysIDName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR GetSysIDName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UCHAR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>SysID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02719">2719</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02646">SysIDStrings</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.
<p>
<pre class="fragment"><div>02725                    :
02726 
02727     This routine returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> name <span class="keywordflow">for</span> a given system <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a>.
02728 
02729 Arguments:
02730 
02731     SysID - system <span class="keywordtype">id</span> in question
02732 
02733 Return Value:
02734 
02735     <a class="code" href="../../d8/d0/geninst_8c.html#a20">Name</a> of system <span class="keywordtype">id</span>.  The caller must not attempt to free or
02736     modify <span class="keyword">this</span> buffer.
02737 
02738 --*/
02739 
02740 {
02741     <span class="keywordflow">return</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a10">SysIDStrings</a>[SysID]);
02742 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a159" doxytag="arcinst.h::HavePartitionsBeenChanged" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN HavePartitionsBeenChanged           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Disk</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03121">3121</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00411">ASRT</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00048">ChangesMade</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00043">OffLine</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03063">CommitPartitionChanges()</a>.
<p>
<pre class="fragment"><div>03127                    :
03128 
03129     This routine returns <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> given disk's partition structures
03130     have been modified by adding or deleting partitions, since <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
03131     on-disk structures were last written by a call to <a class="code" href="../../d4/d9/arcinst_8h.html#a158">CommitPartitionChanges</a>
03132     (or first read).
03133 
03134 Arguments:
03135 
03136     Disk - index of disk to check
03137 
03138 Return Value:
03139 
03140     <span class="keyword">true</span> <span class="keywordflow">if</span> Disk's partition structure has changed.
03141 
03142 --*/
03143 
03144 {
03145     <span class="keywordflow">if</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a7">OffLine</a>[Disk]) {
03146         <a class="code" href="../../d4/d9/arcinst_8h.html#a28">ASRT</a>(!ChangesMade[Disk]);
03147     }
03148     <span class="keywordflow">return</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a8">ChangesMade</a>[Disk]);
03149 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a141" doxytag="arcinst.h::IsAnyCreationAllowed" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> IsAnyCreationAllowed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Disk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowMultiplePrimaries</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>AnyAllowed</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>PrimaryAllowed</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>ExtendedAllowed</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>LogicalAllowed</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02141">2141</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02272">IsCreationOfExtendedAllowed()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02333">IsCreationOfLogicalAllowed()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02198">IsCreationOfPrimaryAllowed()</a>, and <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00334">OK_STATUS</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>.
<p>
<pre class="fragment"><div>02152                    :
02153 
02154     This routine determines whether any partition may be created on a
02155     given disk, based on three sub-queries -- whether creation <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> allowed
02156     of a primary partition, an extended partition, or a logical volume.
02157 
02158 Arguments:
02159 
02160     Disk            - index of disk to check
02161 
02162     AllowMultiplePrimaries - whether to allow multiple primary partitions
02163 
02164     AnyAllowed - returns whether any creation <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> allowed
02165 
02166     PrimaryAllowed - returns whether creation of a primary partition
02167                      <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> allowed
02168 
02169     ExtendedAllowed - returns whether creation of an extended partition
02170                       <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> allowed
02171 
02172     Logical Allowed - returns whether creation of a logical volume <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> allowed.
02173 
02174 Return Value:
02175 
02176     <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a> or error code
02177 
02178 --*/
02179 
02180 {
02181     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> status;
02182 
02183     <span class="keywordflow">if</span>((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a54">IsCreationOfPrimaryAllowed</a>(Disk,AllowMultiplePrimaries,PrimaryAllowed)) != <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>) {
02184         <span class="keywordflow">return</span>(status);
02185     }
02186     <span class="keywordflow">if</span>((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a55">IsCreationOfExtendedAllowed</a>(Disk,ExtendedAllowed)) != <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>) {
02187         <span class="keywordflow">return</span>(status);
02188     }
02189     <span class="keywordflow">if</span>((status = <a class="code" href="../../d8/d1/fdengine_8c.html#a56">IsCreationOfLogicalAllowed</a>(Disk,LogicalAllowed)) != <a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>) {
02190         <span class="keywordflow">return</span>(status);
02191     }
02192     *AnyAllowed = (BOOLEAN)(*PrimaryAllowed || *ExtendedAllowed || *LogicalAllowed);
02193     <span class="keywordflow">return</span>(<a class="code" href="../../d4/d9/arcinst_8h.html#a23">OK_STATUS</a>);
02194 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a143" doxytag="arcinst.h::IsCreationOfExtendedAllowed" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> IsCreationOfExtendedAllowed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Disk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Allowed</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a144" doxytag="arcinst.h::IsCreationOfLogicalAllowed" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> IsCreationOfLogicalAllowed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Disk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Allowed</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a142" doxytag="arcinst.h::IsCreationOfPrimaryAllowed" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> IsCreationOfPrimaryAllowed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Disk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowMultiplePrimaries</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Allowed</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a169" doxytag="arcinst.h::IsDiskOffLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN IsDiskOffLine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Disk</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03389">3389</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00043">OffLine</a>.
<p>
<pre class="fragment"><div>03392 {
03393     <span class="keywordflow">return</span>(<a class="code" href="../../d8/d1/fdengine_8c.html#a7">OffLine</a>[Disk]);
03394 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a149" doxytag="arcinst.h::IsExtended" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN IsExtended           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN UCHAR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>SysID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02114">2114</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d4/d9/arcinst_8h.html#a176a71">SYSID_EXTENDED</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00721">DeletePartition()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02446">DoesAnyPrimaryExist()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02496">DoesExtendedExist()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01312">FindPartitionElement()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00859">GetRegions()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01708">InitializeLogicalVolumeList()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01801">InitializePrimaryPartitionList()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02272">IsCreationOfExtendedAllowed()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02198">IsCreationOfPrimaryAllowed()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01257">RenumberPartitions()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02886">WriteDriveLayout()</a>.
<p>
<pre class="fragment"><div>02120                    :
02121 
02122     This routine determines whether a given system <span class="keywordtype">id</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <span class="keywordflow">for</span> an
02123     extended <a class="code" href="../../d4/d4/iafptrap_8c.html#a9">type</a> (ie, link) entry.
02124 
02125 Arguments:
02126 
02127     SysID - system <span class="keywordtype">id</span> to be tested.
02128 
02129 Return Value:
02130 
02131     true/false based on whether SysID is for an extended type.
02132 
02133 --*/
02134 
02135 {
02136     <span class="keywordflow">return</span>((BOOLEAN)(SysID == <a class="code" href="../../d4/d9/arcinst_8h.html#a176a71">SYSID_EXTENDED</a>));
02137 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a170" doxytag="arcinst.h::JzDeleteVariableSegment" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID JzDeleteVariableSegment           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>VariableName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Selection</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d7/jzcrap_8c-source.html#l00005">5</a> of file <a class="el" href="../../d7/d7/jzcrap_8c-source.html">jzcrap.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l01574">ArcGetEnvironmentVariable</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01596">ArcSetEnvironmentVariable</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00051">Count</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00827">MAXIMUM_ENVIRONMENT_VALUE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.
<p>
<pre class="fragment"><div>00009 {
00010     PCHAR Variable;
00011     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> VariableValue[<a class="code" href="../../d4/d9/arcinst_8h.html#a38">MAXIMUM_ENVIRONMENT_VALUE</a>];
00012     ULONG <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00013     ULONG <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
00014     BOOLEAN FirstSegment;
00015 
00016     <span class="keywordflow">if</span> ((Variable = <a class="code" href="../../d1/d9/arc_8h.html#a39">ArcGetEnvironmentVariable</a>(VariableName)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00017         <span class="keywordflow">return</span>;
00018     }
00019 
00020     FirstSegment = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00021     <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = 0;
00022     *VariableValue = 0;
00023     <span class="keywordflow">while</span> (strchr(Variable,<span class="charliteral">';'</span>) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00024         <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a> = strchr(Variable,<span class="charliteral">';'</span>) - Variable;
00025         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> != Selection) {
00026             <span class="keywordflow">if</span> (!FirstSegment) {
00027                 strcat(VariableValue,<span class="stringliteral">";"</span>);
00028             }
00029             strncat(VariableValue, Variable, Count);
00030             FirstSegment = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00031         }
00032         Variable += <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a> + 1;
00033         <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++;
00034     }
00035 
00036     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> != Selection) {
00037         <span class="keywordflow">if</span> (!FirstSegment) {
00038             strcat(VariableValue,<span class="stringliteral">";"</span>);
00039         }
00040         strcat(VariableValue,Variable);
00041     }
00042 
00043     <a class="code" href="../../d1/d9/arc_8h.html#a40">ArcSetEnvironmentVariable</a>(VariableName, VariableValue);
00044     <span class="keywordflow">return</span>;
00045 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a123" doxytag="arcinst.h::LowCloseDisk" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> LowCloseDisk           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>DiskId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/low_8c-source.html#l00036">36</a> of file <a class="el" href="../../d2/d5/low_8c-source.html">low.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l01514">ArcClose</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00302">CheckIfDiskIsOffLine()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00812">LowGetDiskLayout()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l01076">LowSetDiskLayout()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02823">ZapSector()</a>.
<p>
<pre class="fragment"><div>00041                    :
00042 
00043     This routine closes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> supplied device.
00044 
00045 Arguments:
00046 
00047     DiskId      - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> disk <span class="keywordtype">id</span>.
00048 
00049 Return Value:
00050 
00051     <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>
00052 
00053 --*/
00054 {
00055     <span class="keywordflow">return</span> <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>(DiskId);
00056 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a133" doxytag="arcinst.h::LowFreeFdiskPathList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> LowFreeFdiskPathList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN OUT PCHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>PathList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ListLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/low_8c-source.html#l00786">786</a> of file <a class="el" href="../../d2/d5/low_8c-source.html">low.c</a>.
<p>
References <a class="el" href="../../d2/d5/low_8c-source.html#l00721">LowFreePathList()</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00258">FdiskCleanUp()</a>.
<p>
<pre class="fragment"><div>00792                    :
00793 
00794     This routine frees up <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> space taken by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a> lists.
00795 
00796 Arguments:
00797 
00798     PathList    - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> paths.
00799     ListLength  - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of paths.
00800 
00801 Return Value:
00802 
00803     <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>
00804 
00805 --*/
00806 {
00807     <span class="keywordflow">return</span> <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(PathList, ListLength);
00808 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a131" doxytag="arcinst.h::LowFreePathList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> LowFreePathList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>PathList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ListLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/low_8c-source.html#l00721">721</a> of file <a class="el" href="../../d2/d5/low_8c-source.html">low.c</a>.
<p>
References <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, and <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00332">FreeMemory</a>.
<p>
Referenced by <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00919">FmtFreeFatPartitionList()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00724">FmtQueryFatPartitionList()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00786">LowFreeFdiskPathList()</a>, and <a class="el" href="../../d2/d5/low_8c-source.html#l00651">LowQueryPathList()</a>.
<p>
<pre class="fragment"><div>00727                    :
00728 
00729     This routine frees up <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> space taken by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a> lists.
00730 
00731 Arguments:
00732 
00733     PathList    - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> paths.
00734     ListLength  - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of paths.
00735 
00736 Return Value:
00737 
00738     <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>
00739 
00740 --*/
00741 {
00742     ULONG i;
00743 
00744     <span class="keywordflow">for</span> (i = 0; i &lt; ListLength; i++) {
00745         <span class="keywordflow">if</span> (PathList[i]) {
00746             <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(PathList[i]);
00747         }
00748     }
00749     <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(PathList);
00750 
00751     <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>;
00752 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a134" doxytag="arcinst.h::LowGetDiskLayout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> LowGetDiskLayout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Path</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PDRIVE_LAYOUT_INFORMATION *&nbsp;</td>
          <td class="mdname" nowrap> <em>DriveLayout</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/low_8c-source.html#l00812">812</a> of file <a class="el" href="../../d2/d5/low_8c-source.html">low.c</a>.
<p>
References <a class="el" href="../../d3/d6/hal_8h-source.html#l00122">_PARTITION_DESCRIPTOR::ActiveFlag</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l01113">AlAllocateHeap()</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l01134">AlDeallocateHeap()</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l01153">AlReallocateHeap()</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d3/d6/hal_8h-source.html#l00157">BOOT_RECORD_SIGNATURE</a>, <a class="el" href="../../d3/d6/hal_8h-source.html#l00151">BOOT_SIGNATURE_OFFSET</a>, <a class="el" href="../../d1/d1/config_2test_2init386_8c-source.html#l00027">dummy()</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d9/cmdat2_8c-source.html#l00091">Handle</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00036">LowCloseDisk()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00059">LowGetDriveGeometry()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00006">LowOpenDisk()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00212">LowReadSectors()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d6/hal_8h-source.html#l00144">NUM_PARTITION_TABLE_ENTRIES</a>, <a class="el" href="../../d3/d6/hal_8h-source.html#l00150">PARTITION_TABLE_OFFSET</a>, <a class="el" href="../../d3/d6/hal_8h-source.html#l00126">_PARTITION_DESCRIPTOR::PartitionType</a>, <a class="el" href="../../d1/d6/low_8c.html#a2">PLENGTH</a>, <a class="el" href="../../d1/d6/low_8c.html#a1">PSTART</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a176a71">SYSID_EXTENDED</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01882">InitializePartitionLists()</a>.
<p>
<pre class="fragment"><div>00816 {
00817     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>                status;
00818     ULONG                     <a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a>;
00819     ULONG                     i,ExtendedStart,BootSector,Entry;
00820     ULONG                     <a class="code" href="../../d0/d2/config_2test_2init386_8c.html#a0">dummy</a>,bps;
00821     BOOLEAN                   Link,mbr;
00822     PDRIVE_LAYOUT_INFORMATION DriveInfo;
00823     PPARTITION_INFORMATION    p;
00824     PCHAR                     SectorBuffer;
00825     <a class="code" href="../../d5/d8/struct__PARTITION__DESCRIPTOR.html">PPARTITION_DESCRIPTOR</a>     ptable;
00826 
00827 
00828 <span class="preprocessor">#define PSTART(p)  (                                \</span>
00829 <span class="preprocessor">        (ULONG) ((p)-&gt;StartingSectorLsb0) +           \</span>
00830 <span class="preprocessor">        (ULONG) ((p)-&gt;StartingSectorLsb1 &lt;&lt; 8) +      \</span>
00831 <span class="preprocessor">        (ULONG) ((p)-&gt;StartingSectorMsb0 &lt;&lt; 16) +     \</span>
00832 <span class="preprocessor">        (ULONG) ((p)-&gt;StartingSectorMsb1 &lt;&lt; 24) )</span>
00833 <span class="preprocessor"></span>
00834 <span class="preprocessor">#define PLENGTH(p)   (                              \</span>
00835 <span class="preprocessor">        (ULONG) ((p)-&gt;PartitionLengthLsb0) +          \</span>
00836 <span class="preprocessor">        (ULONG) ((p)-&gt;PartitionLengthLsb1 &lt;&lt; 8) +     \</span>
00837 <span class="preprocessor">        (ULONG) ((p)-&gt;PartitionLengthMsb0 &lt;&lt; 16) +    \</span>
00838 <span class="preprocessor">        (ULONG) ((p)-&gt;PartitionLengthMsb1 &lt;&lt; 24) )</span>
00839 <span class="preprocessor"></span>
00840 
00841 
00842     <span class="keywordflow">if</span>((DriveInfo = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(<span class="keyword">sizeof</span>(DRIVE_LAYOUT_INFORMATION) + (500*<span class="keyword">sizeof</span>(PARTITION_INFORMATION)))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00843         <span class="keywordflow">return</span>(<a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>);
00844     }
00845     p = &amp;DriveInfo-&gt;PartitionEntry[0];
00846 
00847     <span class="keywordflow">if</span>((status = <a class="code" href="../../d1/d6/low_8c.html#a11">LowGetDriveGeometry</a>(Path,&amp;dummy,&amp;bps,&amp;dummy,&amp;dummy)) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00848         <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(DriveInfo);
00849         <span class="keywordflow">return</span>(status);
00850     }
00851 
00852     <span class="keywordflow">if</span>((SectorBuffer = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(bps)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00853         <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(DriveInfo);
00854         <span class="keywordflow">return</span>(<a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>);
00855     }
00856 
00857     ptable = (<a class="code" href="../../d5/d8/struct__PARTITION__DESCRIPTOR.html">PPARTITION_DESCRIPTOR</a>)(SectorBuffer + (2*<a class="code" href="../../d2/d7/hal_8h.html#a10">PARTITION_TABLE_OFFSET</a>));
00858 
00859     <span class="keywordflow">if</span>((status = <a class="code" href="../../d1/d6/low_8c.html#a9">LowOpenDisk</a>(Path,&amp;Handle)) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00860         <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(SectorBuffer);
00861         <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(DriveInfo);
00862         <span class="keywordflow">return</span>(status);
00863     }
00864 
00865     mbr = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00866     Entry = 0;
00867     BootSector = 0;
00868     ExtendedStart = 0;
00869     status = <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>;
00870 
00871     <span class="keywordflow">do</span> {
00872 
00873         <span class="keywordflow">if</span>((status = <a class="code" href="../../d1/d6/low_8c.html#a13">LowReadSectors</a>(Handle,bps,BootSector,1,SectorBuffer)) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00874             <span class="keywordflow">break</span>;
00875         }
00876 
00877         <span class="comment">// This is to catch the case where there is no MBR yet.</span>
00878 
00879         <span class="keywordflow">if</span>(((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)SectorBuffer)[<a class="code" href="../../d2/d7/hal_8h.html#a11">BOOT_SIGNATURE_OFFSET</a>] != <a class="code" href="../../d2/d7/hal_8h.html#a12">BOOT_RECORD_SIGNATURE</a>) {
00880             <span class="keywordflow">break</span>;
00881         }
00882 
00883         Link = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00884 
00885         <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="../../d2/d7/hal_8h.html#a9">NUM_PARTITION_TABLE_ENTRIES</a>; i++) {
00886 
00887             <span class="keywordflow">if</span>(ptable[i].<a class="code" href="../../d5/d8/struct__PARTITION__DESCRIPTOR.html#o4">PartitionType</a> == <a class="code" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>) {
00888 
00889                 <span class="comment">// set as unused.</span>
00890 
00891                 p[Entry].PartitionType    = <a class="code" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>;
00892                 p[Entry].BootIndicator    = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00893                 p[Entry].RewritePartition = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00894                 p[Entry].PartitionLength.QuadPart  = 0;
00895                 p[Entry].HiddenSectors    = 0;
00896                 p[Entry].StartingOffset.QuadPart   = 0;
00897                 p[Entry].RecognizedPartition = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00898 
00899             } <span class="keywordflow">else</span> {
00900 
00901                 LARGE_INTEGER   Result1, Result2;
00902 
00903                 p[Entry].PartitionType    = ptable[i].<a class="code" href="../../d5/d8/struct__PARTITION__DESCRIPTOR.html#o4">PartitionType</a>;
00904                 p[Entry].BootIndicator    = ptable[i].<a class="code" href="../../d5/d8/struct__PARTITION__DESCRIPTOR.html#o0">ActiveFlag</a>;
00905                 p[Entry].RewritePartition = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00906                 p[Entry].PartitionLength.QuadPart  = UInt32x32To64(<a class="code" href="../../d1/d6/low_8c.html#a2">PLENGTH</a>(ptable + i),bps);
00907 
00908                 <span class="comment">// BUGBUG (tedm) the following are not correct for link</span>
00909                 <span class="comment">//               entries in the extended partition.</span>
00910                 <span class="comment">//               But fdisk does not use these values in</span>
00911                 <span class="comment">//               this case so blow it off.  As of</span>
00912                 <span class="comment">//               11/13/91, IoReadPartitionTable has the</span>
00913                 <span class="comment">//               same bug.</span>
00914 
00915                 p[Entry].HiddenSectors    = <a class="code" href="../../d1/d6/low_8c.html#a1">PSTART</a>(ptable + i);
00916                 Result1.QuadPart = UInt32x32To64(<a class="code" href="../../d1/d6/low_8c.html#a1">PSTART</a>(ptable + i),bps);
00917                 Result2.QuadPart = UInt32x32To64(BootSector,bps);
00918                 p[Entry].StartingOffset.QuadPart = Result1.QuadPart + Result2.QuadPart;
00919 
00920                 p[Entry].RecognizedPartition = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;     <span class="comment">// BUGBUG this is broken</span>
00921 
00922                 <span class="keywordflow">if</span>(p[Entry].PartitionType == <a class="code" href="../../d4/d9/arcinst_8h.html#a176a71">SYSID_EXTENDED</a>) {
00923 
00924                     Link = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00925 
00926                     <span class="keywordflow">if</span>(mbr) {
00927                         mbr = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00928                         BootSector = <a class="code" href="../../d1/d6/low_8c.html#a1">PSTART</a>(ptable + i);
00929                         ExtendedStart = BootSector;
00930                     } <span class="keywordflow">else</span> {
00931                         BootSector = ExtendedStart + <a class="code" href="../../d1/d6/low_8c.html#a1">PSTART</a>(ptable + i);
00932                     }
00933                 }
00934             }
00935             Entry++;
00936         }
00937     } <span class="keywordflow">while</span>(Link);
00938 
00939     <a class="code" href="../../d1/d6/low_8c.html#a10">LowCloseDisk</a>(Handle);
00940 
00941     <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(SectorBuffer);
00942 
00943     <span class="keywordflow">if</span>(status != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00944 
00945         <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(DriveInfo);
00946         <span class="keywordflow">return</span>(status);
00947     }
00948 
00949     <span class="comment">// reallocate DriveInfo, set PartitionCount field.</span>
00950     <span class="comment">// DriveInfo is shrinking.</span>
00951 
00952     DriveInfo = <a class="code" href="../../d4/d6/memory_8c.html#a24">AlReallocateHeap</a>(DriveInfo,
00953                                    <span class="keyword">sizeof</span>(DRIVE_LAYOUT_INFORMATION)
00954                                  + ((Entry - 1) * <span class="keyword">sizeof</span>(PARTITION_INFORMATION))
00955                                 );
00956 
00957     DriveInfo-&gt;PartitionCount = Entry;
00958 
00959     *DriveLayout = DriveInfo;
00960 
00961     <span class="keywordflow">return</span>(<a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>);
00962 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a124" doxytag="arcinst.h::LowGetDriveGeometry" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> LowGetDriveGeometry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>DevicePath</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>TotalSectorCount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>SectorSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>SectorsPerTrack</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Heads</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/low_8c-source.html#l00059">59</a> of file <a class="el" href="../../d2/d5/low_8c-source.html">low.c</a>.
<p>
References <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00076">LowGetPartitionGeometry()</a>, <a class="el" href="../../d4/d7/udfprocs_8h-source.html#l00230">SectorSize</a>, and <a class="el" href="../../d6/d9/heappage_8c.html#a68">sprintf()</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00342">GetGeometry()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00812">LowGetDiskLayout()</a>, and <a class="el" href="../../d2/d5/low_8c-source.html#l01076">LowSetDiskLayout()</a>.
<p>
<pre class="fragment"><div>00066 {
00067     <span class="keywordtype">char</span> <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>[256];
00068 
00069     <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a>(Buffer,<span class="stringliteral">"%spartition(0)"</span>,DevicePath);
00070     <span class="keywordflow">return</span>(<a class="code" href="../../d1/d6/low_8c.html#a12">LowGetPartitionGeometry</a>(Buffer,TotalSectorCount,SectorSize,SectorsPerTrack,Heads));
00071 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a125" doxytag="arcinst.h::LowGetPartitionGeometry" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> LowGetPartitionGeometry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>PartitionPath</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>TotalSectorCount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>SectorSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>SectorsPerTrack</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Heads</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/low_8c-source.html#l00076">76</a> of file <a class="el" href="../../d2/d5/low_8c-source.html">low.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01514">ArcClose</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01486">ArcGetComponent</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01490">ArcGetConfigurationData</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01542">ArcGetFileInformation</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01526">ArcOpen</a>, <a class="el" href="../../d1/d9/arc_8h.html#a317a238">ArcOpenReadOnly</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00286">_CONFIGURATION_COMPONENT::ConfigurationDataLength</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a2">E2BIG</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a8">EINVAL</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00547">_FILE_INFORMATION::EndingAddress</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d1/d9/arc_8h.html#a79">FILE_INFORMATION</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d7/udfprocs_8h-source.html#l00230">SectorSize</a>, and <a class="el" href="../../d2/d8/arc_8h-source.html#l00546">_FILE_INFORMATION::StartingAddress</a>.
<p>
Referenced by <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00601">FmtFatFormat()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00093">FmtIsFat()</a>, and <a class="el" href="../../d2/d5/low_8c-source.html#l00059">LowGetDriveGeometry()</a>.
<p>
<pre class="fragment"><div>00085                    :
00086 
00087     This routine computes <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> drive geometry <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> given partition or
00088     physical disk.
00089 
00090 Arguments:
00091 
00092     PartitionPath   - Supplies a <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a> to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> partition or physical disk.
00093     NumberOfSectors - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of sectors.
00094     <a class="code" href="../../d3/d8/udfprocs_8h.html#a42">SectorSize</a>      - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> sector size.
00095     SectorsPerTrack - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of sectors per track.
00096     Heads           - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of heads.
00097 
00098 Return Value:
00099 
00100     <a class="code" href="../../d1/d9/arc_8h.html#a32">ArcOpen</a>, <a class="code" href="../../d1/d9/arc_8h.html#a36">ArcGetFileInformation</a>, <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a2">E2BIG</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>
00101 
00102 --*/
00103 {
00104     <a class="code" href="../../d6/d1/struct__FILE__INFORMATION.html">FILE_INFORMATION</a>    file_info;
00105     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>          r;
00106     ULONG               fileid;
00107     LARGE_INTEGER       l;
00108     CM_DISK_GEOMETRY_DEVICE_DATA    *DiskGeometry;
00109     <a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html">CONFIGURATION_COMPONENT</a>         *DiskComponent;
00110     CM_PARTIAL_RESOURCE_LIST        *DiskConfiguration;
00111     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>                            DataBuffer[<span class="keyword">sizeof</span>(CM_PARTIAL_RESOURCE_LIST) +
00112                                                <span class="keyword">sizeof</span>(CM_DISK_GEOMETRY_DEVICE_DATA)];
00113     CM_PARTIAL_RESOURCE_DESCRIPTOR  *DiskData;
00114 
00115     <span class="comment">// Always assume 512 bytes per sector.</span>
00116 
00117     *<a class="code" href="../../d3/d8/udfprocs_8h.html#a42">SectorSize</a>      = 512;
00118 
00119     <span class="comment">// Assume the SCSI default values for number of heads and sectors per track</span>
00120 
00121     *SectorsPerTrack = 32;
00122     *Heads           = 64;
00123 
00124     <span class="comment">// See if there is device specific data describing the geometry of</span>
00125     <span class="comment">// the drive.  If there is none, then just use the default SCSI</span>
00126     <span class="comment">// values.</span>
00127 
00128     DiskComponent = <a class="code" href="../../d1/d9/arc_8h.html#a22">ArcGetComponent</a>(PartitionPath);
00129 
00130     <span class="keywordflow">if</span> (DiskComponent == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00131         <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a8">EINVAL</a>;
00132     }
00133 
00134     <span class="comment">//</span>
00135     <span class="comment">// See if the ConfigurationDataLength is correct</span>
00136     <span class="comment">// It should contain one DeviceSpecific resource descriptor</span>
00137     <span class="comment">//</span>
00138 
00139     <span class="keywordflow">if</span> (DiskComponent-&gt;<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html#o7">ConfigurationDataLength</a> == <span class="keyword">sizeof</span>(CM_PARTIAL_RESOURCE_LIST) +
00140                                                   <span class="keyword">sizeof</span>(CM_DISK_GEOMETRY_DEVICE_DATA)  ) {
00141 
00142         DiskConfiguration = (CM_PARTIAL_RESOURCE_LIST *)DataBuffer;
00143 
00144         r = <a class="code" href="../../d1/d9/arc_8h.html#a23">ArcGetConfigurationData</a>(DiskConfiguration,DiskComponent);
00145 
00146         <span class="keywordflow">if</span> (r == <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00147 
00148             <span class="comment">//</span>
00149             <span class="comment">// See if the Configuration Data has ARC version 1.3 or greater</span>
00150             <span class="comment">//</span>
00151 
00152             <span class="keywordflow">if</span>  ( (DiskConfiguration-&gt;Version == 1 &amp;&amp; DiskConfiguration-&gt;Revision &gt;=3 ) ||
00153                   (DiskConfiguration-&gt;Version &gt;  1)                                        ) {
00154 
00155                 DiskData = &amp;(DiskConfiguration-&gt;PartialDescriptors[DiskConfiguration-&gt;Count-1]);
00156 
00157                 <span class="keywordflow">if</span> (DiskData-&gt;Type == CmResourceTypeDeviceSpecific) {
00158 
00159                     <span class="keywordflow">if</span> (DiskData-&gt;u.DeviceSpecificData.DataSize == <span class="keyword">sizeof</span>(CM_DISK_GEOMETRY_DEVICE_DATA)) {
00160                         DiskGeometry     = (CM_DISK_GEOMETRY_DEVICE_DATA *)
00161                                            &amp;(DiskConfiguration-&gt;PartialDescriptors[DiskConfiguration-&gt;Count]);
00162                         *SectorsPerTrack = DiskGeometry-&gt;SectorsPerTrack;
00163                         *Heads           = DiskGeometry-&gt;NumberOfHeads;
00164                         *<a class="code" href="../../d3/d8/udfprocs_8h.html#a42">SectorSize</a>      = DiskGeometry-&gt;BytesPerSector;
00165                     }
00166                 }
00167             }
00168         }
00169     }
00170 
00171 <span class="comment">//    PrintError("SectorSize = %08x",*SectorSize);</span>
00172 <span class="comment">//    PrintError("SectorsPerTrack = %08x",*SectorsPerTrack);</span>
00173 <span class="comment">//    PrintError("Heads = %08x",*Heads);</span>
00174 
00175     r = <a class="code" href="../../d1/d9/arc_8h.html#a32">ArcOpen</a>(PartitionPath, ArcOpenReadOnly, &amp;fileid);
00176 
00177     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00178         <span class="keywordflow">return</span> r;
00179     }
00180 
00181     r = <a class="code" href="../../d1/d9/arc_8h.html#a36">ArcGetFileInformation</a>(fileid, &amp;file_info);
00182 
00183     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00184         <span class="keywordflow">return</span> r;
00185     }
00186 
00187     r = <a class="code" href="../../d1/d9/arc_8h.html#a29">ArcClose</a>(fileid);
00188 
00189     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00190         <span class="keywordflow">return</span> r;
00191     }
00192 
00193     l.QuadPart = file_info.<a class="code" href="../../d6/d1/struct__FILE__INFORMATION.html#o1">EndingAddress</a>.QuadPart -
00194                  file_info.<a class="code" href="../../d6/d1/struct__FILE__INFORMATION.html#o0">StartingAddress</a>.QuadPart;
00195 
00196     l.QuadPart = ((ULONGLONG)l.QuadPart) / ((ULONGLONG)(*SectorSize));
00197 
00198     <span class="keywordflow">if</span> (l.HighPart) {
00199         <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a2">E2BIG</a>;
00200     }
00201 
00202     *TotalSectorCount = l.LowPart;
00203 
00204     <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>;
00205 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a122" doxytag="arcinst.h::LowOpenDisk" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> LowOpenDisk           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>DevicePath</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>DiskId</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/low_8c-source.html#l00006">6</a> of file <a class="el" href="../../d2/d5/low_8c-source.html">low.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l01526">ArcOpen</a>, <a class="el" href="../../d1/d9/arc_8h.html#a317a240">ArcOpenReadWrite</a>, and <a class="el" href="../../d6/d9/heappage_8c.html#a68">sprintf()</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00302">CheckIfDiskIsOffLine()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00812">LowGetDiskLayout()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l01076">LowSetDiskLayout()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02823">ZapSector()</a>.
<p>
<pre class="fragment"><div>00012                    :
00013 
00014     This routine opens <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> supplied device <span class="keywordflow">for</span> DASD access.
00015 
00016 Arguments:
00017 
00018     DevicePath  - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a> to be opened.
00019     DiskId      - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> disk <span class="keywordtype">id</span>.
00020 
00021 Return Value:
00022 
00023     <a class="code" href="../../d1/d9/arc_8h.html#a32">ArcOpen</a>
00024 
00025 --*/
00026 {
00027    <span class="keywordtype">char</span> buffer[256];
00028 
00029    <a class="code" href="../../d6/d9/heappage_8c.html#a68">sprintf</a>(buffer,<span class="stringliteral">"%spartition(0)"</span>,DevicePath);
00030 
00031    <span class="keywordflow">return</span> <a class="code" href="../../d1/d9/arc_8h.html#a32">ArcOpen</a>(buffer, ArcOpenReadWrite, DiskId);
00032 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a129" doxytag="arcinst.h::LowQueryComponentList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> LowQueryComponentList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d1/d9/arc_8h.html#a54">CONFIGURATION_CLASS</a> *ConfigClass&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d1/d9/arc_8h.html#a56">CONFIGURATION_TYPE</a> *ConfigType&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html">PCONFIGURATION_COMPONENT</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>ComponentList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ListLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/low_8c-source.html#l00595">595</a> of file <a class="el" href="../../d2/d5/low_8c-source.html">low.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00330">AllocateMemory</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00528">LowTraverseChildren()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d2/d5/low_8c-source.html#l00651">LowQueryPathList()</a>.
<p>
<pre class="fragment"><div>00603                    :
00604 
00605     This routine returns an array of components whose <span class="keyword">class </span>and
00606     <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> match <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ones given.  (Since each parameter <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> optional,
00607     you can do <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a>-<a class="code" href="../../d3/d0/imm32_8def.html#a1">only</a> and class-<a class="code" href="../../d3/d0/imm32_8def.html#a1">only</a> searches.)
00608 
00609     The array <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> allocated on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> heap and contains pointers to
00610     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> actual components (NOT copies).
00611 
00612 Arguments:
00613 
00614     ConfigClass     - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> configuation class to search for.
00615     ConfigType      - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> configuration <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> to search for.
00616     ComponentList   - Returns a list of pointers to components whose
00617                         class and <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> match 'ConfigClass' and
00618                         'ConfigType'.
00619     ListLength      - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of components in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> list.
00620 
00621 Return Value:
00622 
00623     <a class="code" href="../../d1/d6/low_8c.html#a17">LowTraverseChildren</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>
00624 
00625 --*/
00626 {
00627     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>  r;
00628 
00629     *ListLength = 0;
00630 
00631     r = <a class="code" href="../../d1/d6/low_8c.html#a17">LowTraverseChildren</a>(NULL, ConfigClass, ConfigType, NULL, ListLength);
00632 
00633     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00634         <span class="keywordflow">return</span> r;
00635     }
00636 
00637     <span class="keywordflow">if</span> (!(*ComponentList = (<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html">PCONFIGURATION_COMPONENT</a>*) <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(
00638             (*ListLength)*<span class="keyword">sizeof</span>(<a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html">PCONFIGURATION_COMPONENT</a>)))) {
00639 
00640         <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>;
00641     }
00642 
00643     *ListLength = 0;
00644 
00645     <span class="keywordflow">return</span> <a class="code" href="../../d1/d6/low_8c.html#a17">LowTraverseChildren</a>(NULL, ConfigClass, ConfigType,
00646                                *ComponentList, ListLength);
00647 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a132" doxytag="arcinst.h::LowQueryFdiskPathList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> LowQueryFdiskPathList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PCHAR **&nbsp;</td>
          <td class="mdname" nowrap> <em>PathList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ListLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/low_8c-source.html#l00756">756</a> of file <a class="el" href="../../d2/d5/low_8c-source.html">low.c</a>.
<p>
References <a class="el" href="../../d1/d9/arc_8h.html#a56">CONFIGURATION_TYPE</a>, <a class="el" href="../../d1/d9/arc_8h.html#a315a212">DiskPeripheral</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00651">LowQueryPathList()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00183">FdiskInitialize()</a>.
<p>
<pre class="fragment"><div>00762                    :
00763 
00764     This routine returns a list of paths to all <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> devices of interest
00765     to FDISK.
00766 
00767 Arguments:
00768 
00769     PathList    - Returns a list of paths.
00770     ListLength  - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> list.
00771 
00772 Return Value:
00773 
00774     <a class="code" href="../../d4/d9/arcinst_8h.html#a129">LowQueryComponentList</a>, <a class="code" href="../../d4/d9/arcinst_8h.html#a128">LowQueryPathFromComponent</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>
00775 
00776 --*/
00777 {
00778     <a class="code" href="../../d1/d9/arc_8h.html#a56">CONFIGURATION_TYPE</a>  config_type;
00779 
00780     config_type = <a class="code" href="../../d1/d9/arc_8h.html#a315a212">DiskPeripheral</a>;
00781     <span class="keywordflow">return</span> <a class="code" href="../../d1/d6/low_8c.html#a19">LowQueryPathList</a>(NULL, &amp;config_type, PathList, ListLength);
00782 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a128" doxytag="arcinst.h::LowQueryPathFromComponent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> LowQueryPathFromComponent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html">PCONFIGURATION_COMPONENT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Component</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>Path</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/low_8c-source.html#l00486">486</a> of file <a class="el" href="../../d2/d5/low_8c-source.html">low.c</a>.
<p>
References <a class="el" href="../../d2/d5/low_8c-source.html#l00422">AlGetPathnameFromComponent()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00330">AllocateMemory</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d4/d2/dumpuser_8c-source.html#l00045">path</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
Referenced by <a class="el" href="../../d2/d5/low_8c-source.html#l00651">LowQueryPathList()</a>.
<p>
<pre class="fragment"><div>00492                    :
00493 
00494     This routine computes a <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a> from a component.  The resulting
00495     <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> allocated on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> heap.
00496 
00497 Arguments:
00498 
00499     Component   - Supplies a component.
00500     Path        - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a> corresponding to that component.
00501 
00502 Return Value:
00503 
00504     <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>
00505 
00506 --*/
00507 {
00508     PCHAR   p;
00509     PCHAR   <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a>;
00510 
00511     p = <a class="code" href="../../d1/d6/low_8c.html#a15">AlGetPathnameFromComponent</a>(Component);
00512 
00513     <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a> = <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(p) + 1);
00514 
00515     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a>) {
00516         <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>;
00517     }
00518 
00519     strcpy(path, p);
00520 
00521     *Path = <a class="code" href="../../d3/d3/dumpuser_8c.html#a14">path</a>;
00522 
00523     <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>;
00524 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a130" doxytag="arcinst.h::LowQueryPathList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> LowQueryPathList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d1/d9/arc_8h.html#a54">CONFIGURATION_CLASS</a> *ConfigClass&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d1/d9/arc_8h.html#a56">CONFIGURATION_TYPE</a> *ConfigType&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCHAR **&nbsp;</td>
          <td class="mdname" nowrap> <em>PathList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ListLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/low_8c-source.html#l00651">651</a> of file <a class="el" href="../../d2/d5/low_8c-source.html">low.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00330">AllocateMemory</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00332">FreeMemory</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00721">LowFreePathList()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00595">LowQueryComponentList()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00486">LowQueryPathFromComponent()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00724">FmtQueryFatPartitionList()</a>, and <a class="el" href="../../d2/d5/low_8c-source.html#l00756">LowQueryFdiskPathList()</a>.
<p>
<pre class="fragment"><div>00659                    :
00660 
00661     This routine returns a list of paths to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> components that are
00662     of <span class="keyword">class </span>ConfigClass and of <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> ConfigType.
00663 
00664 Arguments:
00665 
00666     ConfigClass     - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> configuation class to search for.
00667     ConfigType      - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> configuration <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> to search for.
00668     PathList        - Returns a list of paths to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> components.
00669     ListLength      - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of components in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> list.
00670 
00671 Return Value:
00672 
00673     <a class="code" href="../../d4/d9/arcinst_8h.html#a129">LowQueryComponentList</a>, <a class="code" href="../../d4/d9/arcinst_8h.html#a128">LowQueryPathFromComponent</a>
00674 
00675 --*/
00676 {
00677     <a class="code" href="../../d4/d8/struct__CONFIGURATION__COMPONENT.html">PCONFIGURATION_COMPONENT</a>*   component_list;
00678     ULONG                       list_length;
00679     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>                  r;
00680     ULONG                       i;
00681     PCHAR*                      path_list;
00682 
00683     r = <a class="code" href="../../d1/d6/low_8c.html#a18">LowQueryComponentList</a>(ConfigClass, ConfigType,
00684                               &amp;component_list, &amp;list_length);
00685 
00686     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00687         <span class="keywordflow">return</span> r;
00688     }
00689 
00690     <span class="keywordflow">if</span> (!(path_list = (PCHAR*) <a class="code" href="../../d4/d9/arcinst_8h.html#a20">AllocateMemory</a>(list_length*<span class="keyword">sizeof</span>(PCHAR)))) {
00691         <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(component_list);
00692         <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>;
00693     }
00694 
00695 
00696     <span class="keywordflow">for</span> (i = 0; i &lt; list_length; i++) {
00697         path_list[i] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00698     }
00699 
00700     <span class="keywordflow">for</span> (i = 0; i &lt; list_length; i++) {
00701 
00702         r = <a class="code" href="../../d1/d6/low_8c.html#a16">LowQueryPathFromComponent</a>(component_list[i], &amp;path_list[i]);
00703 
00704         <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00705             <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(component_list);
00706             <a class="code" href="../../d1/d6/low_8c.html#a20">LowFreePathList</a>(path_list, list_length);
00707             <span class="keywordflow">return</span> r;
00708         }
00709     }
00710 
00711     <a class="code" href="../../d4/d9/arcinst_8h.html#a22">FreeMemory</a>(component_list);
00712 
00713     *PathList = path_list;
00714     *ListLength = list_length;
00715 
00716     <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>;
00717 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a126" doxytag="arcinst.h::LowReadSectors" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> LowReadSectors           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>VolumeId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>SectorSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>StartingSector</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>NumberOfSectors</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>Buffer</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/low_8c-source.html#l00212">212</a> of file <a class="el" href="../../d2/d5/low_8c-source.html">low.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01530">ArcRead</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01534">ArcSeek</a>, <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, <a class="el" href="../../d4/d9/user32_8def-source.html#l00799">c</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a9">EIO</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00208">MAX_TRANSFER</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d4/d7/udfprocs_8h-source.html#l00230">SectorSize</a>, and <a class="el" href="../../d1/d9/arc_8h.html#a318a248">SeekAbsolute</a>.
<p>
Referenced by <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00042">FmtIsFatPartition()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00495">FmtVerifySectors()</a>, and <a class="el" href="../../d2/d5/low_8c-source.html#l00812">LowGetDiskLayout()</a>.
<p>
<pre class="fragment"><div>00221                    :
00222 
00223     This routine reads 'NumberOfSectors' sectors starting at sector
00224     'StartingSector' on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> volume with <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a> 'VolumeId'.
00225 
00226 Arguments:
00227 
00228     VolumeId        - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a> <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> volume.
00229     <a class="code" href="../../d3/d8/udfprocs_8h.html#a42">SectorSize</a>      - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of bytes per sector.
00230     StartingSector  - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> starting sector <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> read.
00231     NumberOfSectors - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of sectors to read.
00232     <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>          - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> read in sectors.
00233 
00234 Return Value:
00235 
00236     <a class="code" href="../../d1/d9/arc_8h.html#a34">ArcSeek</a>, <a class="code" href="../../d1/d9/arc_8h.html#a33">ArcRead</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a9">EIO</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>
00237 
00238 --*/
00239 {
00240     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>    r;
00241     ULONG         <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>;
00242     LARGE_INTEGER l;
00243     ULONG         i;
00244     ULONG         transfer;
00245     PCHAR         buf;
00246     ULONG         total;
00247 
00248 
00249     l.QuadPart = UInt32x32To64(StartingSector,SectorSize);
00250 
00251     buf = (PCHAR) <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>;
00252 
00253     r = <a class="code" href="../../d1/d9/arc_8h.html#a34">ArcSeek</a>(VolumeId, &amp;l, SeekAbsolute);
00254 
00255     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00256         <span class="keywordflow">return</span> r;
00257     }
00258 
00259     total = <a class="code" href="../../d3/d8/udfprocs_8h.html#a42">SectorSize</a>*NumberOfSectors;
00260 
00261     <span class="keywordflow">for</span> (i = 0; i &lt; total; i += <a class="code" href="../../d1/d6/low_8c.html#a0">MAX_TRANSFER</a>) {
00262 
00263         transfer = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(MAX_TRANSFER, total - i);
00264 
00265         r = <a class="code" href="../../d1/d9/arc_8h.html#a33">ArcRead</a>(VolumeId, &amp;buf[i], transfer, &amp;c);
00266 
00267         <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00268             <span class="keywordflow">return</span> r;
00269         }
00270 
00271         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> != transfer) {
00272             <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a9">EIO</a>;
00273         }
00274     }
00275 
00276     <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>;
00277 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a135" doxytag="arcinst.h::LowSetDiskLayout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> LowSetDiskLayout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>Path</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PDRIVE_LAYOUT_INFORMATION&nbsp;</td>
          <td class="mdname" nowrap> <em>DriveLayout</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/low_8c-source.html#l01076">1076</a> of file <a class="el" href="../../d2/d5/low_8c-source.html">low.c</a>.
<p>
References <a class="el" href="../../d5/d5/memory_8c-source.html#l01113">AlAllocateHeap()</a>, <a class="el" href="../../d5/d5/memory_8c-source.html#l01134">AlDeallocateHeap()</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00411">ASRT</a>, <a class="el" href="../../d3/d6/hal_8h-source.html#l00157">BOOT_RECORD_SIGNATURE</a>, <a class="el" href="../../d3/d6/hal_8h-source.html#l00151">BOOT_SIGNATURE_OFFSET</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00980">CalculateCHSVals()</a>, <a class="el" href="../../d1/d1/config_2test_2init386_8c-source.html#l00027">dummy()</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00346">ENTRIES_PER_BOOTSECTOR</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d9/cmdat2_8c-source.html#l00091">Handle</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00036">LowCloseDisk()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00059">LowGetDriveGeometry()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00006">LowOpenDisk()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00281">LowWriteSectors()</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d6/hal_8h-source.html#l00150">PARTITION_TABLE_OFFSET</a>, <a class="el" href="../../d3/d6/hal_8h-source.html#l00126">_PARTITION_DESCRIPTOR::PartitionType</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, <a class="el" href="../../d1/d6/low_8c.html#a4">SECCNT</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l01005">SetPartitionTableEntry()</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a176a71">SYSID_EXTENDED</a>, <a class="el" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l01063">ZeroPartitionTable()</a>, and <a class="el" href="../../d2/d5/low_8c-source.html#l01060">ZeroPartitionTableEntry</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02886">WriteDriveLayout()</a>.
<p>
<pre class="fragment"><div>01080 {
01081     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>             status;
01082     ULONG                   <a class="code" href="../../d0/d2/config_2test_2init386_8c.html#a0">dummy</a>,bps,spt,h;
01083     PCHAR                   SectorBuffer;
01084     ULONG                   <a class="code" href="../../d7/d0/cmdat2_8c.html#a19">Handle</a>;
01085     <a class="code" href="../../d5/d8/struct__PARTITION__DESCRIPTOR.html">PPARTITION_DESCRIPTOR</a>   PartitionTable;
01086     PPARTITION_INFORMATION  p;
01087     BOOLEAN                 mbr = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>,Update;
01088     ULONG                   BootSector = 0,ExtendedPartitionStart = 0,
01089                             NextBootSector;
01090     ULONG                   i,j,UsedCount;
01091     <a class="code" href="../../d4/d8/struct__tagCHS.html">CHS</a>                     chs;
01092 
01093 
01094 <span class="preprocessor">#define SECCNT(l) ((ULONG)(((ULONGLONG)l.QuadPart)/((ULONGLONG)bps)))</span>
01095 <span class="preprocessor"></span>
01096 
01097     <a class="code" href="../../d4/d9/arcinst_8h.html#a28">ASRT</a>(DriveLayout-&gt;PartitionCount);
01098 
01099     <span class="keywordflow">if</span>((status = <a class="code" href="../../d1/d6/low_8c.html#a11">LowGetDriveGeometry</a>(Path,&amp;dummy,&amp;bps,&amp;spt,&amp;h)) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
01100         <span class="keywordflow">return</span>(status);
01101     }
01102 
01103     <span class="comment">// allocate a buffer for sector I/O</span>
01104 
01105     <span class="keywordflow">if</span>((SectorBuffer = <a class="code" href="../../d4/d6/memory_8c.html#a22">AlAllocateHeap</a>(bps)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01106         <span class="keywordflow">return</span>(<a class="code" href="../../d2/d9/arccodes_8h.html#a24a17">ENOMEM</a>);
01107     }
01108 
01109     <span class="comment">//</span>
01110     <span class="comment">// Use x86 bootcode as a template so the disk will boot an x86</span>
01111     <span class="comment">// if it is moved to disk0 on an x86 machine.</span>
01112     <span class="comment">//</span>
01113     RtlMoveMemory(SectorBuffer,x86BootCode,<a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(X86BOOTCODE_SIZE,bps));
01114 
01115     ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)SectorBuffer)[<a class="code" href="../../d2/d7/hal_8h.html#a11">BOOT_SIGNATURE_OFFSET</a>] = <a class="code" href="../../d2/d7/hal_8h.html#a12">BOOT_RECORD_SIGNATURE</a>;
01116     PartitionTable = (<a class="code" href="../../d5/d8/struct__PARTITION__DESCRIPTOR.html">PPARTITION_DESCRIPTOR</a>)(&amp;(((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)SectorBuffer)[<a class="code" href="../../d2/d7/hal_8h.html#a10">PARTITION_TABLE_OFFSET</a>]));
01117 
01118     <span class="keywordflow">if</span>((status = <a class="code" href="../../d1/d6/low_8c.html#a9">LowOpenDisk</a>(Path,&amp;Handle)) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
01119         <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(SectorBuffer);
01120         <span class="keywordflow">return</span>(status);
01121     }
01122 
01123     <a class="code" href="../../d4/d9/arcinst_8h.html#a28">ASRT</a>(!(DriveLayout-&gt;PartitionCount % ENTRIES_PER_BOOTSECTOR));
01124     <span class="keywordflow">for</span>(i=0; i&lt;DriveLayout-&gt;PartitionCount; i+=<a class="code" href="../../d4/d9/arcinst_8h.html#a27">ENTRIES_PER_BOOTSECTOR</a>) {
01125 
01126         Update = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01127         UsedCount = 0;
01128 
01129         <a class="code" href="../../d1/d6/low_8c.html#a26">ZeroPartitionTable</a>(PartitionTable);
01130 
01131         <span class="keywordflow">for</span>(j=0; j&lt;<a class="code" href="../../d4/d9/arcinst_8h.html#a27">ENTRIES_PER_BOOTSECTOR</a>; j++) {
01132 
01133             p = &amp;DriveLayout-&gt;PartitionEntry[i+j];
01134 
01135             <span class="keywordflow">switch</span>(p-&gt;PartitionType) {
01136             <span class="keywordflow">case</span> <a class="code" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>:
01137                 <a class="code" href="../../d1/d6/low_8c.html#a3">ZeroPartitionTableEntry</a>(PartitionTable+j);
01138                 <span class="keywordflow">break</span>;
01139 
01140             <span class="keywordflow">case</span> <a class="code" href="../../d4/d9/arcinst_8h.html#a176a71">SYSID_EXTENDED</a>:
01141                 NextBootSector = <a class="code" href="../../d1/d6/low_8c.html#a4">SECCNT</a>(p-&gt;StartingOffset);
01142                 <a class="code" href="../../d1/d6/low_8c.html#a24">CalculateCHSVals</a>(NextBootSector,<a class="code" href="../../d1/d6/low_8c.html#a4">SECCNT</a>(p-&gt;PartitionLength),spt,h,&amp;chs);
01143                 <a class="code" href="../../d1/d6/low_8c.html#a25">SetPartitionTableEntry</a>(PartitionTable+j,
01144                                        p-&gt;BootIndicator,
01145                                        SYSID_EXTENDED,
01146                                        <a class="code" href="../../d1/d6/low_8c.html#a4">SECCNT</a>(p-&gt;StartingOffset) - ExtendedPartitionStart,
01147                                        <a class="code" href="../../d1/d6/low_8c.html#a4">SECCNT</a>(p-&gt;PartitionLength),
01148                                        &amp;chs
01149                                       );
01150                 <span class="keywordflow">if</span>(mbr) {
01151                     mbr = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01152                     ExtendedPartitionStart = NextBootSector;
01153                 }
01154                 <span class="keywordflow">break</span>;
01155 
01156             <span class="keywordflow">default</span>:
01157                 <a class="code" href="../../d1/d6/low_8c.html#a24">CalculateCHSVals</a>(<a class="code" href="../../d1/d6/low_8c.html#a4">SECCNT</a>(p-&gt;StartingOffset),<a class="code" href="../../d1/d6/low_8c.html#a4">SECCNT</a>(p-&gt;PartitionLength),spt,h,&amp;chs);
01158                 <a class="code" href="../../d1/d6/low_8c.html#a25">SetPartitionTableEntry</a>(PartitionTable+j,
01159                                        p-&gt;BootIndicator,
01160                                        p-&gt;PartitionType,
01161                                        <a class="code" href="../../d1/d6/low_8c.html#a4">SECCNT</a>(p-&gt;StartingOffset) - BootSector,
01162                                        <a class="code" href="../../d1/d6/low_8c.html#a4">SECCNT</a>(p-&gt;PartitionLength),
01163                                        &amp;chs
01164                                       );
01165                 <span class="keywordflow">break</span>;
01166             }
01167             Update = Update || p-&gt;RewritePartition;
01168 
01169             <span class="keywordflow">if</span>(p-&gt;PartitionType != <a class="code" href="../../d4/d9/arcinst_8h.html#a176a70">SYSID_UNUSED</a>) {
01170                 UsedCount++;
01171             }
01172         }
01173         <span class="keywordflow">if</span>(Update || !UsedCount) {
01174             <span class="keywordflow">if</span>((status = <a class="code" href="../../d1/d6/low_8c.html#a14">LowWriteSectors</a>(Handle,bps,BootSector,1,SectorBuffer)) != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
01175                 <a class="code" href="../../d1/d6/low_8c.html#a10">LowCloseDisk</a>(Handle);
01176                 <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(SectorBuffer);
01177                 <span class="keywordflow">return</span>(status);
01178             }
01179         }
01180         BootSector = NextBootSector;
01181     }
01182 
01183     <a class="code" href="../../d1/d6/low_8c.html#a10">LowCloseDisk</a>(Handle);
01184     <a class="code" href="../../d4/d6/memory_8c.html#a23">AlDeallocateHeap</a>(SectorBuffer);
01185     <span class="keywordflow">return</span>(<a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>);
01186 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a127" doxytag="arcinst.h::LowWriteSectors" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a> LowWriteSectors           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>VolumeId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>SectorSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>StartingSector</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>NumberOfSectors</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>Buffer</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d5/low_8c-source.html#l00281">281</a> of file <a class="el" href="../../d2/d5/low_8c-source.html">low.c</a>.
<p>
References <a class="el" href="../../d2/d8/arc_8h-source.html#l00040">ARC_STATUS</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01534">ArcSeek</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01538">ArcWrite</a>, <a class="el" href="../../d7/d1/rtqkey_8c-source.html#l00042">Buffer</a>, <a class="el" href="../../d4/d9/user32_8def-source.html#l00799">c</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a9">EIO</a>, <a class="el" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l00208">MAX_TRANSFER</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d4/d7/udfprocs_8h-source.html#l00230">SectorSize</a>, and <a class="el" href="../../d1/d9/arc_8h.html#a318a248">SeekAbsolute</a>.
<p>
Referenced by <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00601">FmtFatFormat()</a>, <a class="el" href="../../d2/d5/low_8c-source.html#l01076">LowSetDiskLayout()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02823">ZapSector()</a>.
<p>
<pre class="fragment"><div>00290                    :
00291 
00292     This routine write 'NumberOfSectors' sectors starting at sector
00293     'StartingSector' on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> volume with <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a> 'VolumeId'.
00294 
00295 Arguments:
00296 
00297     VolumeId        - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a> <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> volume.
00298     <a class="code" href="../../d3/d8/udfprocs_8h.html#a42">SectorSize</a>      - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of bytes per sector.
00299     StartingSector  - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> starting sector <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> write.
00300     NumberOfSectors - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of sectors to write.
00301     <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>          - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> sectors to write.
00302 
00303 Return Value:
00304 
00305     <a class="code" href="../../d1/d9/arc_8h.html#a34">ArcSeek</a>, <a class="code" href="../../d1/d9/arc_8h.html#a35">ArcWrite</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a9">EIO</a>, <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>
00306 
00307 --*/
00308 {
00309     <a class="code" href="../../d1/d9/arc_8h.html#a44">ARC_STATUS</a>    r;
00310     ULONG         <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a>;
00311     LARGE_INTEGER l;
00312     ULONG         i;
00313     ULONG         transfer;
00314     PCHAR         buf;
00315     ULONG         total;
00316 
00317     l.QuadPart = UInt32x32To64(StartingSector,SectorSize);
00318 
00319     buf = (PCHAR) <a class="code" href="../../d6/d2/rtqkey_8c.html#a3">Buffer</a>;
00320 
00321     r = <a class="code" href="../../d1/d9/arc_8h.html#a34">ArcSeek</a>(VolumeId, &amp;l, SeekAbsolute);
00322 
00323     <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00324         <span class="keywordflow">return</span> r;
00325     }
00326 
00327     total = <a class="code" href="../../d3/d8/udfprocs_8h.html#a42">SectorSize</a>*NumberOfSectors;
00328 
00329     <span class="keywordflow">for</span> (i = 0; i &lt; total; i += <a class="code" href="../../d1/d6/low_8c.html#a0">MAX_TRANSFER</a>) {
00330 
00331         transfer = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(MAX_TRANSFER, total - i);
00332 
00333         r = <a class="code" href="../../d1/d9/arc_8h.html#a35">ArcWrite</a>(VolumeId, &amp;buf[i], transfer, &amp;c);
00334 
00335         <span class="keywordflow">if</span> (r != <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>) {
00336             <span class="keywordflow">return</span> r;
00337         }
00338 
00339         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a35">c</a> != transfer) {
00340             <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a9">EIO</a>;
00341         }
00342     }
00343 
00344     <span class="keywordflow">return</span> <a class="code" href="../../d2/d9/arccodes_8h.html#a24a1">ESUCCESS</a>;
00345 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a150" doxytag="arcinst.h::SetPartitionActiveFlag" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID SetPartitionActiveFlag           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Region</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a155" doxytag="arcinst.h::SetSysID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID SetSysID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Disk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Partition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>SysID</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01366">1366</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00411">ASRT</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00055">CHANGED_DONT_ZAP</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00048">ChangesMade</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00383">_tagPARTITION::Disk</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01312">FindPartitionElement()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00390">_tagPARTITION::SysID</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00387">_tagPARTITION::Update</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00573">DoMakePartitionSystemPartition()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00542">DoSystemPartitionCreate()</a>.
<p>
<pre class="fragment"><div>01374                    :
01375 
01376     This routine sets <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> system <span class="keywordtype">id</span> of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> given partition
01377     on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> given disk.
01378 
01379 Arguments:
01380 
01381     Disk - index of relevent disk
01382 
01383     Partition - partition number of relevent partition
01384 
01385     SysID - <span class="keyword">new</span> system <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a> <span class="keywordflow">for</span> Partition on Disk
01386 
01387 Return Value:
01388 
01389     None.
01390 
01391 --*/
01392 
01393 {
01394     <a class="code" href="../../d2/d9/struct__tagPARTITION.html">PPARTITION</a> p = <a class="code" href="../../d8/d1/fdengine_8c.html#a41">FindPartitionElement</a>(Disk,Partition);
01395 
01396     <a class="code" href="../../d4/d9/arcinst_8h.html#a28">ASRT</a>(p);
01397 
01398     <span class="keywordflow">if</span>(p) {
01399         p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o11">SysID</a> = SysID;
01400         <span class="keywordflow">if</span>(!p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o8">Update</a>) {
01401             p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o8">Update</a> = <a class="code" href="../../d8/d1/fdengine_8c.html#a1">CHANGED_DONT_ZAP</a>;
01402         }
01403         <a class="code" href="../../d8/d1/fdengine_8c.html#a8">ChangesMade</a>[p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o4">Disk</a>] = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01404     }
01405 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a156" doxytag="arcinst.h::SetSysID2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID SetSysID2           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d9/struct__tagREGION__DESCRIPTOR.html">PREGION_DESCRIPTOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Region</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>SysID</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01409">1409</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00055">CHANGED_DONT_ZAP</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00048">ChangesMade</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00383">_tagPARTITION::Disk</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00390">_tagPARTITION::SysID</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00387">_tagPARTITION::Update</a>.
<p>
<pre class="fragment"><div>01413 {
01414     <a class="code" href="../../d2/d9/struct__tagPARTITION.html">PPARTITION</a> p = ((<a class="code" href="../../d3/d9/struct__tagREGION__DATA.html">PREGION_DATA</a>)(Region-&gt;Reserved))-&gt;Partition;
01415 
01416     p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o11">SysID</a> = SysID;
01417     <span class="keywordflow">if</span>(!p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o8">Update</a>) {
01418         p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o8">Update</a> = <a class="code" href="../../d8/d1/fdengine_8c.html#a1">CHANGED_DONT_ZAP</a>;
01419     }
01420     <a class="code" href="../../d8/d1/fdengine_8c.html#a8">ChangesMade</a>[p-&gt;<a class="code" href="../../d2/d9/struct__tagPARTITION.html#o4">Disk</a>] = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01421 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a116" doxytag="arcinst.h::SIZEMB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG SIZEMB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN LARGE_INTEGER&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ByteCount</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d0/fdengine_8c-source.html#l01972">1972</a> of file <a class="el" href="../../d9/d0/fdengine_8c-source.html">fdengine.c</a>.
<p>
References <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00339">ONE_MEG</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/fdengine_8c-source.html#l02011">DiskSizeMB()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03203">FdGetMaximumSizeMB()</a>, <a class="el" href="../../d9/d0/fdengine_8c-source.html#l03172">FdGetMinimumSizeMB()</a>, and <a class="el" href="../../d9/d0/fdengine_8c-source.html#l00859">GetRegions()</a>.
<p>
<pre class="fragment"><div>01978                    :
01979 
01980     Calculate <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size in megabytes of a given byte count. The value <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
01981     properly rounded (ie, not merely truncated).
01982 
01983     This function replaces a macro of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> same name that was truncating
01984     instead of rounding.
01985 
01986 Arguments:
01987 
01988     ByteCount - supplies number of bytes
01989 
01990 Return Value:
01991 
01992     <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a> in MB equivalent to ByteCount.
01993 
01994 --*/
01995 
01996 {
01997     ULONG Remainder;
01998     ULONG SizeMB;
01999 
02000     SizeMB = (ULONG)((ULONGLONG)ByteCount.QuadPart / (ULONGLONG)<a class="code" href="../../d4/d9/arcinst_8h.html#a26">ONE_MEG</a>);
02001     Remainder = (ULONG)((ULONGLONG)ByteCount.QuadPart % (ULONGLONG)<a class="code" href="../../d4/d9/arcinst_8h.html#a26">ONE_MEG</a>);
02002 
02003     <span class="keywordflow">if</span>(Remainder &gt;= <a class="code" href="../../d4/d9/arcinst_8h.html#a26">ONE_MEG</a>/2) {
02004         SizeMB++;
02005     }
02006 
02007     <span class="keywordflow">return</span>(SizeMB);
02008 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a100" doxytag="arcinst.h::vAlStatusMsg" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID vAlStatusMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Row</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Error</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FormatString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN va_list&nbsp;</td>
          <td class="mdname" nowrap> <em>ArgumentList</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">947</a> of file <a class="el" href="../../d0/d6/almisc_8c-source.html">almisc.c</a>.
<p>
References <a class="el" href="../../d0/d6/almisc_8c-source.html#l01483">AlPrint()</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00321">AlSetPosition</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00309">AlSetScreenAttributes</a>, <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00305">AlSetScreenColor</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l00034">ARC_CONSOLE_OUTPUT</a>, <a class="el" href="../../d2/d8/arc_8h-source.html#l01538">ArcWrite</a>, <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00051">Count</a>, <a class="el" href="../../d8/d9/ctlnpqos_8c-source.html#l00011">Error</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00585">MSGMARGIN</a>, and <a class="el" href="../../d8/d0/genuedef_8c-source.html#l00007">text</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00974">AlStatusMsg()</a>, <a class="el" href="../../d0/d6/almisc_8c-source.html#l00993">AlStatusMsgNoWait()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00191">PrintError()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00093">PrintErrorMsg()</a>, and <a class="el" href="../../d8/d2/partit_8c-source.html#l00111">PrintMsg()</a>.
<p>
<pre class="fragment"><div>00953 {
00954     <span class="keywordtype">char</span>  <a class="code" href="../../d7/d1/genuedef_8c.html#a5">text</a>[256];
00955     ULONG Length,<a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
00956 
00957     <a class="code" href="../../d4/d9/arcinst_8h.html#a19">AlSetPosition</a>(Row,0);
00958     <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(MSGMARGIN);
00959     Length = vsprintf(text,FormatString,ArgumentList);
00960     <span class="keywordflow">if</span>(<a class="code" href="../../d7/d0/ctlnpqos_8c.html#a1">Error</a>) {
00961         <a class="code" href="../../d4/d9/arcinst_8h.html#a17">AlSetScreenColor</a>(1,4);         <span class="comment">// red on blue</span>
00962     } <span class="keywordflow">else</span> {
00963         <a class="code" href="../../d4/d9/arcinst_8h.html#a17">AlSetScreenColor</a>(3,4);         <span class="comment">// yellow on blue</span>
00964     }
00965     <a class="code" href="../../d4/d9/arcinst_8h.html#a18">AlSetScreenAttributes</a>(1,0,0);      <span class="comment">// hi intensity</span>
00966     <a class="code" href="../../d1/d9/arc_8h.html#a35">ArcWrite</a>(ARC_CONSOLE_OUTPUT,text,Length,&amp;Count);
00967     <a class="code" href="../../d4/d9/arcinst_8h.html#a114">AlPrint</a>(<span class="stringliteral">"\r\n"</span>);
00968     <a class="code" href="../../d4/d9/arcinst_8h.html#a17">AlSetScreenColor</a>(7,4);             <span class="comment">// white on blue</span>
00969     <a class="code" href="../../d4/d9/arcinst_8h.html#a18">AlSetScreenAttributes</a>(1,0,0);      <span class="comment">// hi intensity</span>
00970 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a53" doxytag="arcinst.h::BootString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PCHAR <a class="el" href="../../d6/d8/jzcrap_8c.html#a0">BootString</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00819">819</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/partit_8c-source.html#l00409">DoPartitionDelete()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="arcinst.h::MSGMARGIN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="../../d4/d9/arcinst_8h.html#a43">MSGMARGIN</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d8/arcinst_8h-source.html#l00297">297</a> of file <a class="el" href="../../d5/d8/arcinst_8h-source.html">arcinst.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/almisc_8c-source.html#l00934">AlWaitKey()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00074">Confirm()</a>, <a class="el" href="../../d8/d2/partit_8c-source.html#l00224">DoPartitionCreate()</a>, <a class="el" href="../../d2/d5/fmtexp_8c-source.html#l00495">FmtVerifySectors()</a>, and <a class="el" href="../../d0/d6/almisc_8c-source.html#l00947">vAlStatusMsg()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:42:55 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

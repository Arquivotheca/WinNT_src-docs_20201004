<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: aug98/test/ps2color.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>ps2color.h File Reference</h1>
<p>
<a href="../../d5/d8/aug98_2test_2ps2color_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/aug98_2test_2ps2color_8h.html#a0">GetPS2ColorRenderingDictionary</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/aug98_2test_2ps2color_8h.html#a1">GetPS2ColorSpaceArray</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InputIntent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBuffer, LPDWORD lpcbSize, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL EXTERN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d9/aug98_2test_2ps2color_8h.html#a2">GetPS2ColorRenderingIntent</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a0" doxytag="aug98/test/ps2color.h::GetPS2ColorRenderingDictionary" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2ColorRenderingDictionary           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html#l01044">1044</a> of file <a class="el" href="../../d7/d1/aug98_2dll32_2getcrd_8c-source.html">aug98/dll32/getcrd.c</a>.
<p>
<pre class="fragment"><div>01050 {
01051     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01052     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> Ret, <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
01053     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> icSigPs2CRDx, icSigBToAx;
01054 
01055     <span class="keywordflow">if</span> (!cp)
01056         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01057 
01058     <span class="keywordflow">if</span> ((lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) || (*lpcbSize == 0))
01059     {
01060         lpMem = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01061         *lpcbSize = 0;
01062     }
01063     Ret = 0;
01064     <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a> = (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) * lpcbSize;
01065 
01066     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01067     {
01068         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>:
01069             icSigPs2CRDx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a46">icSigPs2CRD0Tag</a>;
01070             icSigBToAx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a23">icSigBToA0Tag</a>;
01071             <span class="keywordflow">break</span>;
01072 
01073         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>:
01074             icSigPs2CRDx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a47">icSigPs2CRD1Tag</a>;
01075             icSigBToAx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a24">icSigBToA1Tag</a>;
01076             <span class="keywordflow">break</span>;
01077 
01078         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>:
01079             icSigPs2CRDx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a48">icSigPs2CRD2Tag</a>;
01080             icSigBToAx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a25">icSigBToA2Tag</a>;
01081             <span class="keywordflow">break</span>;
01082 
01083         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>:
01084             icSigPs2CRDx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a49">icSigPs2CRD3Tag</a>;
01085             icSigBToAx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a24">icSigBToA1Tag</a>;
01086             <span class="keywordflow">break</span>;
01087 
01088         <span class="keywordflow">default</span>:
01089             *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) Ret;
01090             <span class="keywordflow">return</span> (Ret &gt; 0);
01091     }
01092 
01093     <span class="keywordflow">if</span> (
01094         (<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigPs2CRDx) &amp;&amp;
01095          <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigPs2CRDx, (LPSINT) &amp; Index) &amp;&amp;
01096          <a class="code" href="../../d2/d9/ps2_8c.html#a193">GetCPElementDataSize</a> (cp, Index, (LPSINT) &amp; Ret) &amp;&amp;
01097          ((<a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a> == 0) ||
01098           <a class="code" href="../../d2/d9/ps2_8c.html#a196">GetCPElementData</a> (cp, Index, lpMem, Size)) &amp;&amp;
01099          (Ret = <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a55">Convert2Ascii</a> (cp, Index, lpMem, Size, Ret, AllowBinary))
01100         ) ||
01101         (<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigBToAx) &amp;&amp;
01102          <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigBToAx, (LPSINT) &amp; Index) &amp;&amp;
01103          (Ret = <a class="code" href="../../d2/d9/ps2_8c.html#a188">CreateLutCRD</a> (cp, Index, lpMem, Intent, AllowBinary))
01104         ) || 
01105         <span class="comment">// SRGB98 Support Windows 98 sRGB icc profile.</span>
01106         <span class="comment">// Create CRD from TRC and Colorant Tags.</span>
01107         (<a class="code" href="../../d2/d9/ps2_8c.html#a190">DoesTRCAndColorantTagExist</a> (cp) &amp;&amp;
01108          (Ret = <a class="code" href="../../d2/d9/ps2_8c.html#a234">CreateMatrixCRD</a> (cp, lpMem, Intent, AllowBinary))
01109         ) ||
01110         (<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigGrayTRCTag) &amp;&amp;
01111          <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigGrayTRCTag, (LPSINT) &amp; Index) &amp;&amp;
01112          (Ret = <a class="code" href="../../d2/d9/ps2_8c.html#a187">CreateMonoCRD</a> (cp, Index, lpMem, Intent))
01113         )
01114        )
01115     {
01116     }
01117 
01118     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) Ret;
01119     <span class="keywordflow">return</span> (Ret &gt; 0);
01120 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="aug98/test/ps2color.h::GetPS2ColorRenderingIntent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL EXTERN GetPS2ColorRenderingIntent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html#l00938">938</a> of file <a class="el" href="../../d9/d7/aug98_2dll32_2csprof_8c-source.html">aug98/dll32/csprof.c</a>.
<p>
<pre class="fragment"><div>00940 {
00941     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>       <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00942     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>       <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
00943         
00944     <span class="keywordflow">if</span> (!cp)
00945         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00946 
00947     <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a> = (<a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a>) *lpcbSize;
00948     <span class="keywordflow">if</span>( ( lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) || ( <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a> == 0 ) )
00949     {
00950         lpMem = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00951         <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a> = 0;
00952         *lpcbSize = 0;
00953     }
00954         
00955     <span class="keywordflow">switch</span>(<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
00956     {
00957         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>:
00958         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a>(cp, icSigPs2Intent0Tag) &amp;&amp;
00959             <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a>(cp, icSigPs2Intent0Tag, (LPSINT) &amp;Index) &amp;&amp;
00960             <a class="code" href="../../d2/d9/ps2_8c.html#a193">GetCPElementDataSize</a>(cp, Index, (LPSINT) &amp;Size) &amp;&amp;
00961             ( ( lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) ||
00962                 <a class="code" href="../../d2/d9/ps2_8c.html#a196">GetCPElementData</a>(cp, Index, lpMem, Size) ) )
00963         {
00964         }
00965         <span class="keywordflow">break</span>;
00966         
00967         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>:
00968         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a>(cp, icSigPs2Intent1Tag) &amp;&amp;
00969             <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a>(cp, icSigPs2Intent1Tag, (LPSINT) &amp;Index) &amp;&amp;
00970             <a class="code" href="../../d2/d9/ps2_8c.html#a193">GetCPElementDataSize</a>(cp, Index, (LPSINT) &amp;Size) &amp;&amp;
00971             ( ( lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) ||
00972                 <a class="code" href="../../d2/d9/ps2_8c.html#a196">GetCPElementData</a>(cp, Index, lpMem, Size) ) )
00973         {
00974         }
00975         <span class="keywordflow">break</span>;
00976     
00977         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>:
00978         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a>(cp, icSigPs2Intent2Tag) &amp;&amp;
00979             <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a>(cp, icSigPs2Intent2Tag, (LPSINT) &amp;Index) &amp;&amp;
00980             <a class="code" href="../../d2/d9/ps2_8c.html#a193">GetCPElementDataSize</a>(cp, Index, (LPSINT) &amp;Size) &amp;&amp;
00981             ( ( lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) ||
00982                 <a class="code" href="../../d2/d9/ps2_8c.html#a196">GetCPElementData</a>(cp, Index, lpMem, Size ) )
00983           )
00984         {
00985         }
00986         <span class="keywordflow">break</span>;
00987         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>:
00988         <span class="keywordflow">if</span>( <a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a>(cp, icSigPs2Intent3Tag) &amp;&amp;
00989             <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a>(cp, icSigPs2Intent3Tag, (LPSINT) &amp;Index) &amp;&amp;
00990             <a class="code" href="../../d2/d9/ps2_8c.html#a193">GetCPElementDataSize</a>(cp, Index, (LPSINT) &amp;Size) &amp;&amp;
00991             ( ( lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) ||
00992                 <a class="code" href="../../d2/d9/ps2_8c.html#a196">GetCPElementData</a>(cp, Index, lpMem, Size) ) )
00993         {
00994         }
00995         <span class="keywordflow">break</span>;
00996         <span class="keywordflow">default</span>:
00997             <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a> = 0 ;
00998         <span class="keywordflow">break</span>;
00999     }
01000         
01001     <span class="keywordflow">if</span> (<a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a> != 0)
01002     {
01003         <span class="keywordflow">if</span> (lpMem)
01004         {
01005             lpMem[<a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>] = <span class="charliteral">'\0'</span>;
01006         }
01007         <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a> ++;
01008         *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) <a class="code" href="../../d8/d7/lh__open_2pi__mem_8h.html#a0">Size</a>;
01009         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01010     }
01011     <span class="keywordflow">else</span>
01012     {
01013         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01014     }
01015 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="aug98/test/ps2color.h::GetPS2ColorSpaceArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2ColorSpaceArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l01579">1579</a> of file <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html">aug98/dll32/getcsa.c</a>.
<p>
<pre class="fragment"><div>01586 {
01587     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> ColorSpace, <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
01588     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01589     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwSaveSize;
01590     <span class="keywordflow">if</span> (!cp)
01591         <span class="keywordflow">return</span> Success;
01592 
01593     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; ColorSpace) ||
01594         !<a class="code" href="../../d2/d9/ps2_8c.html#a42">GetCPRenderIntent</a> (cp, (LPCSIG) &amp; Intent))
01595     {
01596         <span class="keywordflow">return</span> Success;
01597     }
01598     dwSaveSize = *lpcbSize;
01599     <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a146">icUseRenderingIntent</a>)
01600         InputIntent = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
01601 
01602  <span class="comment">// Get ColorSpace from Profile.</span>
01603     <span class="keywordflow">if</span> ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>) InputIntent == <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01604     {
01605         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a182">GetCSAFromProfile</a> (cp, lpBuffer, lpcbSize,
01606                                      InpDrvClrSp, ColorSpace, AllowBinary);
01607     }
01608     <span class="keywordflow">if</span> (!Success)
01609     {
01610         <span class="keywordflow">switch</span> (ColorSpace)
01611         {
01612             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>:
01613                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01614                                                  InpDrvClrSp, (CSIG) InputIntent, 
01615                                                  TYPE_CIEBASEDDEF, AllowBinary);
01616                 <span class="keywordflow">if</span> (Success)
01617                 {                       <span class="comment">// Create CieBasedABC or DeviceRGB</span>
01618                                         <span class="comment">// for the printer</span>
01619                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01620                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01621                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01622                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01623                     <span class="keywordflow">if</span> (lpBuffer)
01624                     {
01625                         lpNewBuffer = lpBuffer + *lpcbSize;
01626                         lpOldBuffer = lpNewBuffer;
01627                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01628                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01629                     } <span class="keywordflow">else</span>
01630                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01631 
01632                     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a184">GetPS2CSA_ABC</a> (cp, lpNewBuffer, &amp;cbNewSize,
01633                                         (CSIG)InputIntent, InpDrvClrSp, 
01634                                         AllowBinary, 1))   <span class="comment">// create a backup CSA</span>
01635                         <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a7">GetDeviceRGB</a> (lpNewBuffer, &amp;cbNewSize, InpDrvClrSp, 1);
01636 
01637                     <span class="keywordflow">if</span> (lpBuffer)
01638                     {
01639                         lpNewBuffer += cbNewSize;
01640                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01641                     } <span class="keywordflow">else</span>
01642                         *lpcbSize += cbNewSize;
01643 
01644                 }
01645                 <span class="keywordflow">if</span> (!Success)
01646                 {                           <span class="comment">// Create CieBasedABC</span>
01647                     Success = <a class="code" href="../../d2/d9/ps2_8c.html#a184">GetPS2CSA_ABC</a> (cp, lpBuffer, lpcbSize,
01648                                          (CSIG)InputIntent, InpDrvClrSp, 
01649                                          AllowBinary, 0);
01650                 }
01651                 <span class="keywordflow">if</span> (!Success)
01652                 {                           <span class="comment">// Create DeviceRGB</span>
01653                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a7">GetDeviceRGB</a> (lpBuffer, lpcbSize, InpDrvClrSp, 0);
01654                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01655                 }
01656                 <span class="keywordflow">break</span>;
01657             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>:
01658                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01659                                                  InpDrvClrSp, (CSIG) InputIntent, 
01660                                                  TYPE_CIEBASEDDEFG, AllowBinary);
01661                 <span class="keywordflow">if</span> (Success)
01662                 {                       <span class="comment">// Create DeviceCMYK for the printer</span>
01663                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01664                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01665                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01666                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01667                     <span class="keywordflow">if</span> (lpBuffer)
01668                     {
01669                         lpNewBuffer = lpBuffer + *lpcbSize;
01670                         lpOldBuffer = lpNewBuffer;
01671                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01672                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, NotSupportDEFG_S);
01673                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01674                     } <span class="keywordflow">else</span>
01675                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01676 
01677                     <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a8">GetDeviceCMYK</a> (lpNewBuffer, &amp;cbNewSize, InpDrvClrSp);
01678 
01679                     <span class="keywordflow">if</span> (lpBuffer)
01680                     {
01681                         lpNewBuffer += cbNewSize;
01682                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, SupportDEFG_E);
01683                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01684                     } <span class="keywordflow">else</span>
01685                         *lpcbSize += cbNewSize;
01686                 }
01687                 <span class="keywordflow">if</span> (!Success)
01688                 {                           <span class="comment">// Create DeviceCMYK</span>
01689                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a8">GetDeviceCMYK</a> (lpBuffer, lpcbSize, InpDrvClrSp);
01690                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01691                 }
01692                 <span class="keywordflow">break</span>;
01693             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>:
01694                 Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a19">GetPS2CSA_MONO</a> (cp, lpBuffer, lpcbSize, InpDrvClrSp, 
01695                                           (CSIG)InputIntent, AllowBinary);
01696                 <span class="keywordflow">if</span> (!Success)
01697                 {                           <span class="comment">// Create DeviceGray</span>
01698                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a9">GetDeviceGray</a> (lpBuffer, lpcbSize, InpDrvClrSp);
01699                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01700                 }
01701                 <span class="keywordflow">break</span>;
01702             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>:
01703                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01704                                                  InpDrvClrSp, (CSIG) InputIntent, 
01705                                                  TYPE_CIEBASEDDEF, AllowBinary);
01706                 <span class="keywordflow">if</span> (Success)
01707                 {                       <span class="comment">// Create CieBasedABC or DeviceRGB</span>
01708                                         <span class="comment">// for the printer</span>
01709                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01710                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01711                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01712                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01713                     <span class="keywordflow">if</span> (lpBuffer)
01714                     {
01715                         lpNewBuffer = lpBuffer + *lpcbSize;
01716                         lpOldBuffer = lpNewBuffer;
01717                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01718                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, NotSupportDEFG_S);
01719                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01720                     } <span class="keywordflow">else</span>
01721                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01722 
01723                     <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a3">GetPS2CSA_ABC_LAB</a> (cp, lpNewBuffer, &amp;cbNewSize,
01724                                         (CSIG)InputIntent, InpDrvClrSp, AllowBinary);
01725 
01726                     <span class="keywordflow">if</span> (lpBuffer)
01727                     {
01728                         lpNewBuffer += cbNewSize;
01729                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, SupportDEFG_E);
01730                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01731                     } <span class="keywordflow">else</span>
01732                         *lpcbSize += cbNewSize;
01733                 }
01734                 <span class="keywordflow">if</span> (!Success)
01735                 {                           <span class="comment">// Create CieBasedABC</span>
01736                     Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a3">GetPS2CSA_ABC_LAB</a> (cp, lpBuffer, lpcbSize,
01737                                          (CSIG)InputIntent, InpDrvClrSp, AllowBinary);
01738                 }
01739                 <span class="keywordflow">break</span>;
01740 
01741             <span class="keywordflow">default</span>:
01742                 <span class="keywordflow">break</span>;
01743         }
01744     }
01745     <span class="keywordflow">return</span> Success;
01746 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:22 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

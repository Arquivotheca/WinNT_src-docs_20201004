<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: conimep.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>conimep.h File Reference</h1>
<p>
<a href="../../d5/d4/conimep_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/struct__HKL__TABLE.html">_HKL_TABLE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">_CONSOLE_TABLE</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a0">WINDOWMENU</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a1">ID_CONSOLEIME_ICON</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a2">MM_ABOUT</a>&nbsp;&nbsp;&nbsp;8001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a3">MM_EXIT</a>&nbsp;&nbsp;&nbsp;8002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a4">MM_ACCESS_VIOLATION</a>&nbsp;&nbsp;&nbsp;8003</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a5">errTitle</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a6">IDS_MENUNAME</a>&nbsp;&nbsp;&nbsp;12</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a7">IDS_APPNAME</a>&nbsp;&nbsp;&nbsp;13</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a8">IDS_CLASSNAME</a>&nbsp;&nbsp;&nbsp;14</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a9">IDS_TITLE</a>&nbsp;&nbsp;&nbsp;15</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a10">IDS_LAST</a>&nbsp;&nbsp;&nbsp;15</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a11">DBGPRINT</a>(_params_)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a12">CONSOLE_INITIAL_TABLE</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a13">CONSOLE_CONSOLE_TABLE_INCREMENT</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a14">HKL_INITIAL_TABLE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a15">HKL_TABLE_INCREMENT</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a16">CVMAX</a>&nbsp;&nbsp;&nbsp;2048</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a17">NUMMAX</a>&nbsp;&nbsp;&nbsp;100</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a18">CMAX</a>&nbsp;&nbsp;&nbsp;160</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a19">MAXROW</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a20">MAXCOL</a>&nbsp;&nbsp;&nbsp;80</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a21">FIRSTROW</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a22">FIRSTCOL</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a23">LASTROW</a>&nbsp;&nbsp;&nbsp;(MAXROW-1)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a24">LASTCOL</a>&nbsp;&nbsp;&nbsp;(MAXCOL-1)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a25">TABSTOP</a>&nbsp;&nbsp;&nbsp;8</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a26">MAX_LISTCAND</a>&nbsp;&nbsp;&nbsp;32</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a27">MAX_CHARS_PER_LINE</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a28">MAX_COMP_STRING_LEN</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a29">DEFAULT_CAND_NUM_PER_PAGE</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a30">X_INDENT</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a31">Y_INDENT</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a33">DEFAULTCANDTABLE</a>&nbsp;&nbsp;&nbsp;100</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a34">DISPCHANGELIMIT</a>&nbsp;&nbsp;&nbsp;188</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a35">CODEDISPLEN</a>&nbsp;&nbsp;&nbsp;7</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a36">DEFAULT_TEMP_WIDTH</a>&nbsp;&nbsp;&nbsp;80</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a37">KEY_TOGGLED</a>&nbsp;&nbsp;&nbsp;0x01</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a38">MaxBufSize</a>&nbsp;&nbsp;&nbsp;256</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a39">KBDLAYOUT</a>&nbsp;&nbsp;&nbsp;TEXT("SYSTEM\\CurrentControlSet\\Control\\Keyboard Layouts")</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a40">KBDLAYOUTTEXT</a>&nbsp;&nbsp;&nbsp;TEXT("layout <a class="el" href="../../d7/d1/genuedef_8c.html#a5">text</a>")</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a41">KBDSEPALATER</a>&nbsp;&nbsp;&nbsp;TEXT("\\")</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a42">LANG_ID_TAIWAN</a>&nbsp;&nbsp;&nbsp;MAKELANGID(LANG_CHINESE,SUBLANG_CHINESE_TRADITIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a43">LANG_ID_JAPAN</a>&nbsp;&nbsp;&nbsp;MAKELANGID(LANG_JAPANESE,SUBLANG_DEFAULT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a44">LANG_ID_KOREA</a>&nbsp;&nbsp;&nbsp;MAKELANGID(LANG_KOREAN,SUBLANG_DEFAULT)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a45">LANG_ID_PRC</a>&nbsp;&nbsp;&nbsp;MAKELANGID(LANG_CHINESE,SUBLANG_CHINESE_SIMPLIFIED)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a46">IPHK_HOTKEY</a>&nbsp;&nbsp;&nbsp;0x0001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a47">IPHK_PROCESSBYIME</a>&nbsp;&nbsp;&nbsp;0x0002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a48">IPHK_CHECKCTRL</a>&nbsp;&nbsp;&nbsp;0x0004</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a49">IS_IME_KBDLAYOUT</a>(hkl)&nbsp;&nbsp;&nbsp;((HIWORD(HandleToUlong(hkl)) &amp; 0xf000) == 0xe000)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a50">HKL_TO_LANGID</a>(hkl)&nbsp;&nbsp;&nbsp;(LOWORD(HandleToUlong(hkl)))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a51">UNICODE_BACKSPACE</a>&nbsp;&nbsp;&nbsp;((WCHAR)0x08)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a52">UNICODE_BACKSPACE2</a>&nbsp;&nbsp;&nbsp;((WCHAR)0x25d8)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a53">UNICODE_CARRIAGERETURN</a>&nbsp;&nbsp;&nbsp;((WCHAR)0x0d)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a54">UNICODE_LINEFEED</a>&nbsp;&nbsp;&nbsp;((WCHAR)0x0a)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a55">UNICODE_BELL</a>&nbsp;&nbsp;&nbsp;((WCHAR)0x07)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a56">UNICODE_TAB</a>&nbsp;&nbsp;&nbsp;((WCHAR)0x09)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a57">UNICODE_SPACE</a>&nbsp;&nbsp;&nbsp;((WCHAR)0x20)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a58">UNICODE_ZERO</a>&nbsp;&nbsp;&nbsp;((WCHAR)'0')</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a59">UNICODE_SLASH</a>&nbsp;&nbsp;&nbsp;((WCHAR)'/')</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a60">UNICODE_COLON</a>&nbsp;&nbsp;&nbsp;((WCHAR)':')</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a61">UNICODE_LEFT</a>&nbsp;&nbsp;&nbsp;((WCHAR)'[')</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a62">UNICODE_RIGHT</a>&nbsp;&nbsp;&nbsp;((WCHAR)']')</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a63">UNICODE_HEXBASE</a>&nbsp;&nbsp;&nbsp;((WCHAR)'7')</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a64">JAPAN_CODEPAGE</a>&nbsp;&nbsp;&nbsp;932</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a65">PRC_CODEPAGE</a>&nbsp;&nbsp;&nbsp;936</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a66">KOREA_CODEPAGE</a>&nbsp;&nbsp;&nbsp;949</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a67">TAIWAN_CODEPAGE</a>&nbsp;&nbsp;&nbsp;950</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a68">PRCCOMPWIDTH</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a69">MODEDISP_NONE</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a70">MODEDISP_PLAURAL</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a71">MODEDISP_SINGLE</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a72">MODEDISP_AUTO</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a73">MODEDISP_PHRASE</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a74">IMECModeRomanLen</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a75">IMECModeKanaLen</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a76">IMECModeAHANLen</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a77">IMECModeAZENLen</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a78">IMECModeHHANLen</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a79">IMECModeHZENLen</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a80">IMECModeKHANLen</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a81">IMECModeKZENLen</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a82">IMECModeFullShapeLen</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a83">IMECModeHalfShapeLen</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a84">IMECModeKeyboardLen</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a85">IMECModeSymbolLen</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a86">IMECGuideLen</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a87">IMECNameLength</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d8/struct__HKL__TABLE.html">_HKL_TABLE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a88">HKL_TABLE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d8/struct__HKL__TABLE.html">_HKL_TABLE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a89">LPHKL_TABLE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">_CONSOLE_TABLE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a90">CONSOLE_TABLE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">_CONSOLE_TABLE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a91">PCONSOLE_TABLE</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a92">ImmCallImeConsoleIME</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, UINT Message, WPARAM wParam, LPARAM lParam, <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> puVKey)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a93">ImmTranslateMessage</a> (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a94">ImmSetActiveContextConsoleIME</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, BOOL fFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a95">InitConsoleIME</a> (HINSTANCE hInstance)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT FAR PASCAL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a96">WndProc</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, UINT Message, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a97">ExitList</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a98">InsertConsole</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HANDLE hConsole, HWND hWndConsole)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a99">GrowConsoleTable</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a> (HANDLE hConsole)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a101">RemoveConsole</a> (HWND hwnd, HANDLE hConsole)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a102">RemoveConsoleWorker</a> (HWND hwnd, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a103">InsertNewConsole</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HANDLE hConsole, HWND hWndConsole)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a104">ConsoleSetFocus</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HANDLE hConsole, HKL hKL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a105">ConsoleKillFocus</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HANDLE hConsole)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a106">ConsoleScreenBufferSize</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HANDLE hConsolewParam, COORD ScreenBufferSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a107">ConImeInputLangchangeRequest</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HANDLE hConsole, HKL hkl, int Direction)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a108">ConImeInputLangchange</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HANDLE hConsole, HKL hkl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a> (HWND hWndConsoleIME, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a110">InputLangchange</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CharSet, HKL hkl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a111">Create</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a112">ImeUIStartComposition</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a113">ImeUIEndComposition</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a114">ImeUIComposition</a> (HWND hwnd, WPARAM wParam, LPARAM CompFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a115">DisplayCompString</a> (HWND hwnd, int Length, PWCHAR CharBuf, PUCHAR AttrBuf)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a116">DisplayResultString</a> (HWND hwnd, LPWSTR lpStr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a117">ImeUINotify</a> (HWND hwnd, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a118">IsUnicodeFullWidth</a> (IN WCHAR wch)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a119">ImeUIOpenStatusWindow</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a120">ImeUIChangeCandidate</a> (HWND hwnd, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a121">ImeUISetOpenStatus</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a122">ImeUISetConversionMode</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a123">ImeUIGuideLine</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a124">GetNLSMode</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HANDLE hConsole)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a125">SetNLSMode</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HANDLE hConsole, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fdwConversion)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a126">CopyDataProcess</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, PCOPYDATASTRUCT CopyData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a127">ImeSysPropertyWindow</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a128">ImeOpenClose</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, BOOL fFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a129">VirtualKeyHandler</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, UINT wParam, UINT lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a130">CharHandlerFromConsole</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, UINT Message, ULONG wParam, ULONG lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a131">CharHandlerToConsole</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, UINT Message, ULONG wParam, ULONG lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a132">IsDBCSTrailByte</a> (char *base, char *p)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a133">ConsoleCodepageChange</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HANDLE hConsole, BOOL Output, WORD CodePage)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a134">ConimeHotkey</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HANDLE hConsole, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> HotkeyID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a135">GetIMEName</a> (<a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a136">GetOpenStatusByCodepage</a> (HIMC hIMC, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a137">ImeUIMakeInfoString</a> (<a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a138">MakeInfoStringJapan</a> (<a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a139">MakeInfoStringTaiwan</a> (<a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a140">MakeStatusStrTaiwan1</a> (<a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ModeInfoPtr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a141">MakeStatusStrTaiwan2</a> (<a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ModeInfoPtr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a142">IncludeCompositionT</a> (<a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ModeInfoPtr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a143">IncludeCandidateT</a> (<a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ModeInfoPtr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a144">DispLenStructedUnicode</a> (PCHAR_INFO lpString, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> SrcLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a145">MakeInfoStringPRC</a> (<a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a146">MakeStatusStrPRC1</a> (<a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ModeInfoPtr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a147">MakeStatusStrPRC2</a> (<a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ModeInfoPtr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a148">IncludeCompositionP</a> (<a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ModeInfoPtr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a149">IncludeCandidateP</a> (<a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ModeInfoPtr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a150">MakeInfoStringKorea</a> (<a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a151">ImeUIOpenCandidate</a> (HWND hwnd, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> lParam, BOOL OpenFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a152">OpenCandidateJapan</a> (HWND hwnd, HIMC hIMC, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CandList, BOOL OpenFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a153">OpenCandidateTaiwan</a> (HWND hwnd, HIMC hIMC, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CandList, BOOL OpenFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a154">OpenCandidatePRC</a> (HWND hwnd, HIMC hIMC, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CandList, BOOL OpenFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a155">OpenCandidateKorea</a> (HWND hwnd, HIMC hIMC, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CandList, BOOL OpenFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a156">DispLenUnicode</a> (LPWSTR lpString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a157">GetSystemLineJ</a> (LPCANDIDATELIST lpCandList, LPWSTR <a class="el" href="../../d0/d0/tdetach_8c.html#a0">String</a>, LPSTR Attr, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwLength, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CountDispWidth, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> FocusedConsole, BOOL EnableCodePoint)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a158">GetSystemLineT</a> (LPCANDIDATELIST lpCandList, LPWSTR <a class="el" href="../../d0/d0/tdetach_8c.html#a0">String</a>, LPSTR Attr, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwLength, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CountDispWidth, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> FocusedConsole)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a159">GetSystemLineP</a> (LPCANDIDATELIST lpCandList, LPWSTR <a class="el" href="../../d0/d0/tdetach_8c.html#a0">String</a>, LPSTR Attr, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwLength, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CountDispWidth, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> FocusedConsole)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a160">NumString</a> (LPWSTR StrToWrite, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> NumToDisp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CountDispWidth)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a161">ImeUICloseCandidate</a> (HWND hwnd, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a162">CloseCandidateJapan</a> (HWND hwnd, HIMC hIMC, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CandList)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a163">CloseCandidateTaiwan</a> (HWND hwnd, HIMC hIMC, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CandList)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a164">CloseCandidatePRC</a> (HWND hwnd, HIMC hIMC, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CandList)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a165">CloseCandidateKorea</a> (HWND hwnd, HIMC hIMC, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CandList)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a166">GetCompositionStr</a> (HWND hwnd, LPARAM CompFlag, WPARAM CompChar)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a167">GetCompStrJapan</a> (HWND hwnd, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, LPARAM CompFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a168">GetCompStrTaiwan</a> (HWND hwnd, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, LPARAM CompFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a169">GetCompStrPRC</a> (HWND hwnd, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, LPARAM CompFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a170">GetCompStrKorea</a> (HWND hwnd, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl, LPARAM CompFlag, WPARAM CompChar)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a171">ReDisplayCompositionStr</a> (HWND hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a172">ReDisplayCompStrJapan</a> (HWND hwnd, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a173">ReDisplayCompStrTaiwan</a> (HWND hwnd, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a174">ReDisplayCompStrPRC</a> (HWND hwnd, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/conimep_8h.html#a175">ReDisplayCompStrKorea</a> (HWND hwnd, <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a18" doxytag="conimep.h::CMAX" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CMAX&nbsp;&nbsp;&nbsp;160          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00053">53</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="conimep.h::CODEDISPLEN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CODEDISPLEN&nbsp;&nbsp;&nbsp;7          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00070">70</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00080">OpenCandidateJapan()</a>, and <a class="el" href="../../d8/d6/country2_8c-source.html#l00606">OpenCandidateKorea()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="conimep.h::CONSOLE_CONSOLE_TABLE_INCREMENT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CONSOLE_CONSOLE_TABLE_INCREMENT&nbsp;&nbsp;&nbsp;5          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00047">47</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00742">GrowConsoleTable()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="conimep.h::CONSOLE_INITIAL_TABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CONSOLE_INITIAL_TABLE&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00046">46</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00109">InitConsoleIME()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="conimep.h::CVMAX" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CVMAX&nbsp;&nbsp;&nbsp;2048          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00051">51</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00109">InitConsoleIME()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="conimep.h::DBGPRINT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DBGPRINT          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">_params_&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00043">43</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="conimep.h::DEFAULT_CAND_NUM_PER_PAGE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DEFAULT_CAND_NUM_PER_PAGE&nbsp;&nbsp;&nbsp;5          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00064">64</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="conimep.h::DEFAULT_TEMP_WIDTH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DEFAULT_TEMP_WIDTH&nbsp;&nbsp;&nbsp;80          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00071">71</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00664">InsertConsole()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="conimep.h::DEFAULTCANDTABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DEFAULTCANDTABLE&nbsp;&nbsp;&nbsp;100          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00068">68</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00080">OpenCandidateJapan()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00606">OpenCandidateKorea()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00433">OpenCandidatePRC()</a>, and <a class="el" href="../../d8/d6/country2_8c-source.html#l00264">OpenCandidateTaiwan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="conimep.h::DELIMITERWIDTH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DELIMITERWIDTH&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00067">67</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00805">GetSystemLineJ()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01071">GetSystemLineP()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00962">GetSystemLineT()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00080">OpenCandidateJapan()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00606">OpenCandidateKorea()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00433">OpenCandidatePRC()</a>, and <a class="el" href="../../d8/d6/country2_8c-source.html#l00264">OpenCandidateTaiwan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="conimep.h::DISPCHANGELIMIT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DISPCHANGELIMIT&nbsp;&nbsp;&nbsp;188          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00069">69</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="conimep.h::errTitle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define errTitle&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00029">29</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="conimep.h::FIRSTCOL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FIRSTCOL&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00057">57</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/consubs_8c-source.html#l00160">ImeUIComposition()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00108">ImeUIEndComposition()</a>, and <a class="el" href="../../d1/d5/consubs_8c-source.html#l00067">ImeUIStartComposition()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="conimep.h::FIRSTROW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FIRSTROW&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00056">56</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="conimep.h::HKL_INITIAL_TABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HKL_INITIAL_TABLE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00048">48</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00664">InsertConsole()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="conimep.h::HKL_TABLE_INCREMENT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HKL_TABLE_INCREMENT&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00049">49</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01094">ConImeInputLangchange()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a50" doxytag="conimep.h::HKL_TO_LANGID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HKL_TO_LANGID          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hkl&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(LOWORD(HandleToUlong(hkl)))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00150">150</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01000">ConImeInputLangchangeRequest()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00436">GetImeModeSaver()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00159">GetOpenStatusByCodepage()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01204">ImeUICloseCandidate()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00183">ImeUIMakeInfoString()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00024">ImeUIOpenCandidate()</a>, and <a class="el" href="../../d9/d6/country3_8c-source.html#l00928">ReDisplayCompositionStr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="conimep.h::ID_CONSOLEIME_ICON" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ID_CONSOLEIME_ICON&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00018">18</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00109">InitConsoleIME()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="conimep.h::IDS_APPNAME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDS_APPNAME&nbsp;&nbsp;&nbsp;13          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00031">31</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00109">InitConsoleIME()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="conimep.h::IDS_CLASSNAME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDS_CLASSNAME&nbsp;&nbsp;&nbsp;14          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00032">32</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00109">InitConsoleIME()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="conimep.h::IDS_LAST" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDS_LAST&nbsp;&nbsp;&nbsp;15          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00035">35</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="conimep.h::IDS_MENUNAME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDS_MENUNAME&nbsp;&nbsp;&nbsp;12          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00030">30</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00109">InitConsoleIME()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="conimep.h::IDS_TITLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IDS_TITLE&nbsp;&nbsp;&nbsp;15          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00033">33</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00109">InitConsoleIME()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a86" doxytag="conimep.h::IMECGuideLen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECGuideLen&nbsp;&nbsp;&nbsp;5          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00217">217</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00081">GetIMEName()</a>, and <a class="el" href="../../d7/d6/country_8c-source.html#l00328">MakeStatusStrTaiwan1()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a76" doxytag="conimep.h::IMECModeAHANLen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECModeAHANLen&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00205">205</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00209">MakeInfoStringJapan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a77" doxytag="conimep.h::IMECModeAZENLen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECModeAZENLen&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00206">206</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00209">MakeInfoStringJapan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a82" doxytag="conimep.h::IMECModeFullShapeLen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECModeFullShapeLen&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00213">213</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00555">MakeStatusStrPRC1()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00328">MakeStatusStrTaiwan1()</a>, and <a class="el" href="../../d8/d6/country2_8c-source.html#l00264">OpenCandidateTaiwan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a83" doxytag="conimep.h::IMECModeHalfShapeLen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECModeHalfShapeLen&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00214">214</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00555">MakeStatusStrPRC1()</a>, and <a class="el" href="../../d7/d6/country_8c-source.html#l00328">MakeStatusStrTaiwan1()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a78" doxytag="conimep.h::IMECModeHHANLen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECModeHHANLen&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00207">207</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00209">MakeInfoStringJapan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a79" doxytag="conimep.h::IMECModeHZENLen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECModeHZENLen&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00208">208</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00209">MakeInfoStringJapan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a75" doxytag="conimep.h::IMECModeKanaLen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECModeKanaLen&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00204">204</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00209">MakeInfoStringJapan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a84" doxytag="conimep.h::IMECModeKeyboardLen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECModeKeyboardLen&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00215">215</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00608">MakeStatusStrPRC2()</a>, and <a class="el" href="../../d7/d6/country_8c-source.html#l00388">MakeStatusStrTaiwan2()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a80" doxytag="conimep.h::IMECModeKHANLen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECModeKHANLen&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00209">209</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00209">MakeInfoStringJapan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a81" doxytag="conimep.h::IMECModeKZENLen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECModeKZENLen&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00210">210</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00209">MakeInfoStringJapan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a74" doxytag="conimep.h::IMECModeRomanLen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECModeRomanLen&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00203">203</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00209">MakeInfoStringJapan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a85" doxytag="conimep.h::IMECModeSymbolLen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECModeSymbolLen&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00216">216</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00608">MakeStatusStrPRC2()</a>, and <a class="el" href="../../d7/d6/country_8c-source.html#l00388">MakeStatusStrTaiwan2()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a87" doxytag="conimep.h::IMECNameLength" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECNameLength&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00218">218</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00328">MakeStatusStrTaiwan1()</a>, and <a class="el" href="../../d8/d6/country2_8c-source.html#l00264">OpenCandidateTaiwan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="conimep.h::IPHK_CHECKCTRL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IPHK_CHECKCTRL&nbsp;&nbsp;&nbsp;0x0004          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00147">147</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d9/imefull_8c-source.html#l00208">CharHandlerFromConsole()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="conimep.h::IPHK_HOTKEY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IPHK_HOTKEY&nbsp;&nbsp;&nbsp;0x0001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00145">145</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d9/imefull_8c-source.html#l00208">CharHandlerFromConsole()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l01286">xxxImmProcessKey()</a>, and <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l03305">xxxScanSysQueue()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="conimep.h::IPHK_PROCESSBYIME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IPHK_PROCESSBYIME&nbsp;&nbsp;&nbsp;0x0002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00146">146</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d9/imefull_8c-source.html#l00208">CharHandlerFromConsole()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, and <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l03305">xxxScanSysQueue()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="conimep.h::IS_IME_KBDLAYOUT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IS_IME_KBDLAYOUT          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hkl&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((HIWORD(HandleToUlong(hkl)) &amp; 0xf000) == 0xe000)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00149">149</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/client_8c-source.html#l04516">CheckValidLayoutName()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01094">ConImeInputLangchange()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01000">ConImeInputLangchangeRequest()</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l04700">ConsoleWindowProc()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00327">FindOrLoadImeDpi()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02091">GetRemoteKeyboardLayout()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01983">GetServerIMEKeyboardLayout()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00416">ImmFreeLayout()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00876">ImmGetImeInfoEx()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00346">ImmLoadIME()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l13037">NtUserSetThreadLayoutHandles()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04019">OpenKeyboardLayoutFile()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00749">xxxImmActivateAndUnloadThreadsLayout()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l01118">xxxImmLoadLayout()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l01070">xxxImmUnloadLayout()</a>, <a class="el" href="../../d6/d7/ntimm_8c-source.html#l00961">xxxImmUnloadThreadsLayout()</a>, <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l01203">xxxInternalActivateKeyboardLayout()</a>, and <a class="el" href="../../d7/d1/kbdlyout_8c-source.html#l00654">xxxLoadKeyboardLayoutEx()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a64" doxytag="conimep.h::JAPAN_CODEPAGE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define JAPAN_CODEPAGE&nbsp;&nbsp;&nbsp;932          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00189">189</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01000">ConImeInputLangchangeRequest()</a>, and <a class="el" href="../../d9/d6/country3_8c-source.html#l00032">GetCompositionStr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="conimep.h::KBDLAYOUT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KBDLAYOUT&nbsp;&nbsp;&nbsp;TEXT("SYSTEM\\CurrentControlSet\\Control\\Keyboard Layouts")          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00076">76</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00081">GetIMEName()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="conimep.h::KBDLAYOUTTEXT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KBDLAYOUTTEXT&nbsp;&nbsp;&nbsp;TEXT("layout <a class="el" href="../../d7/d1/genuedef_8c.html#a5">text</a>")          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00077">77</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00081">GetIMEName()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="conimep.h::KBDSEPALATER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KBDSEPALATER&nbsp;&nbsp;&nbsp;TEXT("\\")          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00078">78</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00081">GetIMEName()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="conimep.h::KEY_TOGGLED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KEY_TOGGLED&nbsp;&nbsp;&nbsp;0x01          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00073">73</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d2/ntcon_2server_2input_8c-source.html#l02179">GetControlKeyState()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a66" doxytag="conimep.h::KOREA_CODEPAGE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define KOREA_CODEPAGE&nbsp;&nbsp;&nbsp;949          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00191">191</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01000">ConImeInputLangchangeRequest()</a>, and <a class="el" href="../../d9/d6/country3_8c-source.html#l00032">GetCompositionStr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="conimep.h::LANG_ID_JAPAN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LANG_ID_JAPAN&nbsp;&nbsp;&nbsp;MAKELANGID(LANG_JAPANESE,SUBLANG_DEFAULT)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00081">81</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01000">ConImeInputLangchangeRequest()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00159">GetOpenStatusByCodepage()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01204">ImeUICloseCandidate()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00183">ImeUIMakeInfoString()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00024">ImeUIOpenCandidate()</a>, and <a class="el" href="../../d9/d6/country3_8c-source.html#l00928">ReDisplayCompositionStr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="conimep.h::LANG_ID_KOREA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LANG_ID_KOREA&nbsp;&nbsp;&nbsp;MAKELANGID(LANG_KOREAN,SUBLANG_DEFAULT)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00082">82</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01000">ConImeInputLangchangeRequest()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00159">GetOpenStatusByCodepage()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01204">ImeUICloseCandidate()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00183">ImeUIMakeInfoString()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00024">ImeUIOpenCandidate()</a>, and <a class="el" href="../../d9/d6/country3_8c-source.html#l00928">ReDisplayCompositionStr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="conimep.h::LANG_ID_PRC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LANG_ID_PRC&nbsp;&nbsp;&nbsp;MAKELANGID(LANG_CHINESE,SUBLANG_CHINESE_SIMPLIFIED)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00083">83</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01000">ConImeInputLangchangeRequest()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00159">GetOpenStatusByCodepage()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01204">ImeUICloseCandidate()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00183">ImeUIMakeInfoString()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00024">ImeUIOpenCandidate()</a>, and <a class="el" href="../../d9/d6/country3_8c-source.html#l00928">ReDisplayCompositionStr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="conimep.h::LANG_ID_TAIWAN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LANG_ID_TAIWAN&nbsp;&nbsp;&nbsp;MAKELANGID(LANG_CHINESE,SUBLANG_CHINESE_TRADITIONAL)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00080">80</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01000">ConImeInputLangchangeRequest()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00159">GetOpenStatusByCodepage()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01204">ImeUICloseCandidate()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00183">ImeUIMakeInfoString()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00024">ImeUIOpenCandidate()</a>, and <a class="el" href="../../d9/d6/country3_8c-source.html#l00928">ReDisplayCompositionStr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="conimep.h::LASTCOL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LASTCOL&nbsp;&nbsp;&nbsp;(MAXCOL-1)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00059">59</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="conimep.h::LASTROW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LASTROW&nbsp;&nbsp;&nbsp;(MAXROW-1)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00058">58</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="conimep.h::MAX_CHARS_PER_LINE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAX_CHARS_PER_LINE&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00062">62</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="conimep.h::MAX_COMP_STRING_LEN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAX_COMP_STRING_LEN&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00063">63</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="conimep.h::MAX_LISTCAND" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAX_LISTCAND&nbsp;&nbsp;&nbsp;32          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00061">61</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l01253">CloseCandidateJapan()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01367">CloseCandidateKorea()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01326">CloseCandidatePRC()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01285">CloseCandidateTaiwan()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00611">ExitList()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00080">OpenCandidateJapan()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00606">OpenCandidateKorea()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00433">OpenCandidatePRC()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00264">OpenCandidateTaiwan()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00824">RemoveConsoleWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="conimep.h::MaxBufSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MaxBufSize&nbsp;&nbsp;&nbsp;256          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00075">75</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00081">GetIMEName()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="conimep.h::MAXCOL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAXCOL&nbsp;&nbsp;&nbsp;80          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00055">55</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/consubs_8c-source.html#l00160">ImeUIComposition()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00108">ImeUIEndComposition()</a>, and <a class="el" href="../../d1/d5/consubs_8c-source.html#l00067">ImeUIStartComposition()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="conimep.h::MAXROW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MAXROW&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00054">54</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="conimep.h::MM_ABOUT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MM_ABOUT&nbsp;&nbsp;&nbsp;8001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00023">23</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="conimep.h::MM_ACCESS_VIOLATION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MM_ACCESS_VIOLATION&nbsp;&nbsp;&nbsp;8003          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00025">25</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="conimep.h::MM_EXIT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MM_EXIT&nbsp;&nbsp;&nbsp;8002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00024">24</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a72" doxytag="conimep.h::MODEDISP_AUTO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MODEDISP_AUTO&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00199">199</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00209">MakeInfoStringJapan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a69" doxytag="conimep.h::MODEDISP_NONE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MODEDISP_NONE&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00196">196</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00209">MakeInfoStringJapan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a73" doxytag="conimep.h::MODEDISP_PHRASE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MODEDISP_PHRASE&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00200">200</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00209">MakeInfoStringJapan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a70" doxytag="conimep.h::MODEDISP_PLAURAL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MODEDISP_PLAURAL&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00197">197</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00209">MakeInfoStringJapan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a71" doxytag="conimep.h::MODEDISP_SINGLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MODEDISP_SINGLE&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00198">198</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00209">MakeInfoStringJapan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="conimep.h::NUMMAX" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NUMMAX&nbsp;&nbsp;&nbsp;100          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00052">52</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a65" doxytag="conimep.h::PRC_CODEPAGE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define PRC_CODEPAGE&nbsp;&nbsp;&nbsp;936          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00190">190</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01000">ConImeInputLangchangeRequest()</a>, and <a class="el" href="../../d9/d6/country3_8c-source.html#l00032">GetCompositionStr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a68" doxytag="conimep.h::PRCCOMPWIDTH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define PRCCOMPWIDTH&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00194">194</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00692">IncludeCandidateP()</a>, and <a class="el" href="../../d8/d6/country2_8c-source.html#l00433">OpenCandidatePRC()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="conimep.h::TABSTOP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TABSTOP&nbsp;&nbsp;&nbsp;8          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00060">60</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d1/rtl_2drawtext_8c-source.html#l01090">DT_InitDrawTextInfo()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a67" doxytag="conimep.h::TAIWAN_CODEPAGE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TAIWAN_CODEPAGE&nbsp;&nbsp;&nbsp;950          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00192">192</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01000">ConImeInputLangchangeRequest()</a>, and <a class="el" href="../../d9/d6/country3_8c-source.html#l00032">GetCompositionStr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a51" doxytag="conimep.h::UNICODE_BACKSPACE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNICODE_BACKSPACE&nbsp;&nbsp;&nbsp;((WCHAR)0x08)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00175">175</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/server_2cmdline_8c-source.html#l02793">ProcessCommandNumberInput()</a>, <a class="el" href="../../d1/d6/server_2stream_8c-source.html#l00876">ProcessCookedReadInput()</a>, and <a class="el" href="../../d1/d2/__stream_8h-source.html#l00203">WWSB_WriteChars()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a52" doxytag="conimep.h::UNICODE_BACKSPACE2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNICODE_BACKSPACE2&nbsp;&nbsp;&nbsp;((WCHAR)0x25d8)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00176">176</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d6/server_2stream_8c-source.html#l00876">ProcessCookedReadInput()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a55" doxytag="conimep.h::UNICODE_BELL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNICODE_BELL&nbsp;&nbsp;&nbsp;((WCHAR)0x07)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00179">179</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d2/__stream_8h-source.html#l00203">WWSB_WriteChars()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a53" doxytag="conimep.h::UNICODE_CARRIAGERETURN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNICODE_CARRIAGERETURN&nbsp;&nbsp;&nbsp;((WCHAR)0x0d)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00177">177</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d6/server_2stream_8c-source.html#l01237">CookedRead()</a>, <a class="el" href="../../d8/d7/ntcon_2server_2clipbrd_8c-source.html#l00835">DoStringPaste()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, <a class="el" href="../../d4/d0/server_2cmdline_8c-source.html#l01105">MatchandCopyAlias()</a>, <a class="el" href="../../d4/d0/server_2cmdline_8c-source.html#l02287">ProcessCommandListInput()</a>, <a class="el" href="../../d4/d0/server_2cmdline_8c-source.html#l02793">ProcessCommandNumberInput()</a>, <a class="el" href="../../d1/d6/server_2stream_8c-source.html#l00876">ProcessCookedReadInput()</a>, <a class="el" href="../../d8/d7/ntcon_2server_2clipbrd_8c-source.html#l00452">StoreSelection()</a>, <a class="el" href="../../d1/d2/__stream_8h-source.html#l01020">WWSB_DoSrvWriteConsole()</a>, and <a class="el" href="../../d1/d2/__stream_8h-source.html#l00203">WWSB_WriteChars()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a60" doxytag="conimep.h::UNICODE_COLON" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNICODE_COLON&nbsp;&nbsp;&nbsp;((WCHAR)':')          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00184">184</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00805">GetSystemLineJ()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01071">GetSystemLineP()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00962">GetSystemLineT()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00692">IncludeCandidateP()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00555">MakeStatusStrPRC1()</a>, and <a class="el" href="../../d7/d6/country_8c-source.html#l00328">MakeStatusStrTaiwan1()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a63" doxytag="conimep.h::UNICODE_HEXBASE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNICODE_HEXBASE&nbsp;&nbsp;&nbsp;((WCHAR)'7')          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00187">187</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00805">GetSystemLineJ()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a61" doxytag="conimep.h::UNICODE_LEFT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNICODE_LEFT&nbsp;&nbsp;&nbsp;((WCHAR)'[')          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00185">185</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00805">GetSystemLineJ()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a54" doxytag="conimep.h::UNICODE_LINEFEED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNICODE_LINEFEED&nbsp;&nbsp;&nbsp;((WCHAR)0x0a)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00178">178</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d6/server_2stream_8c-source.html#l01237">CookedRead()</a>, <a class="el" href="../../d8/d7/ntcon_2server_2clipbrd_8c-source.html#l00835">DoStringPaste()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02059">ECInsertText()</a>, <a class="el" href="../../d4/d0/server_2cmdline_8c-source.html#l01105">MatchandCopyAlias()</a>, <a class="el" href="../../d4/d0/server_2cmdline_8c-source.html#l02287">ProcessCommandListInput()</a>, <a class="el" href="../../d1/d6/server_2stream_8c-source.html#l00876">ProcessCookedReadInput()</a>, <a class="el" href="../../d1/d6/server_2stream_8c-source.html#l01778">ReadChars()</a>, <a class="el" href="../../d8/d7/ntcon_2server_2clipbrd_8c-source.html#l00452">StoreSelection()</a>, <a class="el" href="../../d1/d2/__stream_8h-source.html#l01020">WWSB_DoSrvWriteConsole()</a>, and <a class="el" href="../../d1/d2/__stream_8h-source.html#l00203">WWSB_WriteChars()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a62" doxytag="conimep.h::UNICODE_RIGHT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNICODE_RIGHT&nbsp;&nbsp;&nbsp;((WCHAR)']')          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00186">186</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00805">GetSystemLineJ()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a59" doxytag="conimep.h::UNICODE_SLASH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNICODE_SLASH&nbsp;&nbsp;&nbsp;((WCHAR)'/')          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00183">183</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00805">GetSystemLineJ()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01071">GetSystemLineP()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00962">GetSystemLineT()</a>, and <a class="el" href="../../d8/d6/country2_8c-source.html#l01182">NumString()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a57" doxytag="conimep.h::UNICODE_SPACE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNICODE_SPACE&nbsp;&nbsp;&nbsp;((WCHAR)0x20)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00181">181</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a56" doxytag="conimep.h::UNICODE_TAB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNICODE_TAB&nbsp;&nbsp;&nbsp;((WCHAR)0x09)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00180">180</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a58" doxytag="conimep.h::UNICODE_ZERO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UNICODE_ZERO&nbsp;&nbsp;&nbsp;((WCHAR)'0')          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00182">182</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00805">GetSystemLineJ()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01071">GetSystemLineP()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00962">GetSystemLineT()</a>, and <a class="el" href="../../d8/d6/country2_8c-source.html#l01182">NumString()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="conimep.h::WINDOWMENU" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define WINDOWMENU&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00017">17</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="conimep.h::X_INDENT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define X_INDENT&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00065">65</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="conimep.h::Y_INDENT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define Y_INDENT&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/conimep_8h-source.html#l00066">66</a> of file <a class="el" href="../../d5/d4/conimep_8h-source.html">conimep.h</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a90" doxytag="conimep.h::CONSOLE_TABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">_CONSOLE_TABLE</a>  <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">CONSOLE_TABLE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00664">InsertConsole()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a88" doxytag="conimep.h::HKL_TABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d8/struct__HKL__TABLE.html">_HKL_TABLE</a>  <a class="el" href="../../d0/d8/struct__HKL__TABLE.html">HKL_TABLE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01094">ConImeInputLangchange()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00664">InsertConsole()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a89" doxytag="conimep.h::LPHKL_TABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d8/struct__HKL__TABLE.html">_HKL_TABLE</a> * <a class="el" href="../../d0/d8/struct__HKL__TABLE.html">LPHKL_TABLE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a91" doxytag="conimep.h::PCONSOLE_TABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">_CONSOLE_TABLE</a> * <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00742">GrowConsoleTable()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00109">InitConsoleIME()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a130" doxytag="conimep.h::CharHandlerFromConsole" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CharHandlerFromConsole           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>Message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d9/imefull_8c-source.html#l00208">208</a> of file <a class="el" href="../../d1/d9/imefull_8c-source.html">imefull.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d9/imefull_8c-source.html#l00281">CharHandlerToConsole()</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00083">CONIME_KEYDATA</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00034">ImmCallImeConsoleIME()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">ImmTranslateMessage()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00147">IPHK_CHECKCTRL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00145">IPHK_HOTKEY</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00146">IPHK_PROCESSBYIME</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00209 {
00210     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> TmpMessage ;
00211     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwImmRet ;
00212     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uVKey ;
00213     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> wParamSave ;
00214 
00215     <span class="keywordflow">if</span> (HIWORD(wParam) == 0){
00216         wParamSave = wParam ;
00217     }
00218     <span class="keywordflow">else</span> {
00219         <span class="keywordflow">if</span> (Message == WM_KEYDOWN   +<a class="code" href="../../d3/d5/conime_8h.html#a23">CONIME_KEYDATA</a> || Message == WM_KEYUP   +<a class="code" href="../../d3/d5/conime_8h.html#a23">CONIME_KEYDATA</a> ||
00220             Message == WM_SYSKEYDOWN+<a class="code" href="../../d3/d5/conime_8h.html#a23">CONIME_KEYDATA</a> || Message == WM_SYSKEYUP+<a class="code" href="../../d3/d5/conime_8h.html#a23">CONIME_KEYDATA</a>){
00221             wParamSave = 0 ;
00222         }
00223         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(HIWORD(wParam) &gt; 0x00ff){
00224             WCHAR WideChar ;
00225             UCHAR MultiChar ;
00226             WideChar = HIWORD(wParam) ;
00227             WideCharToMultiByte(CP_OEMCP, 0, &amp;WideChar, 1, &amp;MultiChar, 1, NULL, NULL) ;
00228             wParamSave = MultiChar ;
00229         }
00230         <span class="keywordflow">else</span> {
00231             wParamSave = HIWORD(wParam) ;
00232         }
00233     }
00234 
00235     <span class="keywordflow">if</span> (HIWORD(lParam) &amp; KF_UP) <span class="comment">// KEY_TRANSITION_UP</span>
00236         TmpMessage = WM_KEYUP ;
00237     <span class="keywordflow">else</span>
00238         TmpMessage = WM_KEYDOWN ;
00239 
00240 
00241     <span class="comment">// Return Value of ClientImmProcessKeyConsoleIME</span>
00242     <span class="comment">// IPHK_HOTKEY          1   - the vkey is IME hotkey</span>
00243     <span class="comment">// IPHK_PROCESSBYIME    2   - the vkey is the one that the IME is waiting for</span>
00244     <span class="comment">// IPHK_CHECKCTRL       4   - not used by NT IME</span>
00245     dwImmRet = <a class="code" href="../../d1/d5/ntuser_2imm_2conime_8c.html#a3">ImmCallImeConsoleIME</a>(hWnd, TmpMessage, wParam, lParam, &amp;uVKey) ;
00246 
00247     <span class="keywordflow">if</span> ( dwImmRet &amp; <a class="code" href="../../d4/d5/conimep_8h.html#a46">IPHK_HOTKEY</a> ) {
00248     <span class="comment">//</span>
00249     <span class="comment">// if this vkey is the IME hotkey, we won't pass</span>
00250     <span class="comment">// it to application or hook procedure.</span>
00251     <span class="comment">// This is what Win95 does. [takaok]</span>
00252     <span class="comment">//</span>
00253        <span class="keywordflow">return</span> ;
00254     }
00255     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwImmRet &amp; <a class="code" href="../../d4/d5/conimep_8h.html#a47">IPHK_PROCESSBYIME</a>) {
00256         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> ;
00257 
00258 <span class="comment">//3.51</span>
00259 <span class="comment">//      uVKey = (wParamSave&lt;&lt;8) | uVKey ;</span>
00260 <span class="comment">//      Status = ClientImmTranslateMessageMain( hWnd,uVKey,lParam);</span>
00261 
00262         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d9/d0/immuser_8h.html#a49">ImmTranslateMessage</a>(hWnd, TmpMessage, wParam, lParam);
00263 
00264 
00265     }
00266     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwImmRet &amp; <a class="code" href="../../d4/d5/conimep_8h.html#a48">IPHK_CHECKCTRL</a>) {
00267         <a class="code" href="../../d0/d0/imefull_8c.html#a2">CharHandlerToConsole</a>( hWnd, Message-CONIME_KEYDATA, wParamSave, lParam);
00268     }
00269     <span class="keywordflow">else</span>
00270     {
00271         <span class="keywordflow">if</span> ((Message == WM_CHAR   +<a class="code" href="../../d3/d5/conime_8h.html#a23">CONIME_KEYDATA</a>)||
00272             (Message == WM_SYSCHAR+<a class="code" href="../../d3/d5/conime_8h.html#a23">CONIME_KEYDATA</a>)) {
00273             <a class="code" href="../../d0/d0/imefull_8c.html#a2">CharHandlerToConsole</a>( hWnd, Message-CONIME_KEYDATA, wParamSave, lParam);
00274         }
00275         <span class="keywordflow">else</span>
00276             <a class="code" href="../../d0/d0/imefull_8c.html#a2">CharHandlerToConsole</a>( hWnd, Message-CONIME_KEYDATA, wParam, lParam);
00277     }
00278 
00279 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a131" doxytag="conimep.h::CharHandlerToConsole" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CharHandlerToConsole           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>Message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d9/imefull_8c-source.html#l00281">281</a> of file <a class="el" href="../../d1/d9/imefull_8c-source.html">imefull.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00083">CONIME_KEYDATA</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>, <a class="el" href="../../d4/d5/conimep_8h.html#a129">VirtualKeyHandler()</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d1/d9/imefull_8c-source.html#l00208">CharHandlerFromConsole()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00282 {
00283     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00284     WORD  ch ;
00285     <span class="keywordtype">int</span>   NumByte = 0 ;
00286 
00287     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
00288     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00289         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00290         <span class="keywordflow">return</span>;
00291     }
00292 
00293     <span class="keywordflow">if</span> (HIWORD(lParam) &amp; KF_UP ) {
00294         <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00295                      Message+CONIME_KEYDATA,
00296                      wParam,
00297                      lParam) ;
00298         <span class="keywordflow">return</span> ;
00299     }
00300 
00301     ch = LOWORD(wParam) ;
00302     <span class="keywordflow">if</span> ((ch &lt; <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>) ||
00303         ((ch &gt;= <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>) &amp;&amp;
00304         ((Message == WM_KEYDOWN) || (Message == WM_SYSKEYDOWN) ))) {
00305 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00306 <span class="preprocessor"></span>        <a class="code" href="../../d4/d5/conimep_8h.html#a129">VirtualKeyHandler</a>( hWnd, wParam ,lParam) ;
00307 <span class="preprocessor">#endif</span>
00308 <span class="preprocessor"></span>        <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00309                      Message+CONIME_KEYDATA,
00310                      wParam,
00311                      lParam) ;
00312         <span class="keywordflow">return</span> ;
00313     }
00314 
00315 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00316 <span class="preprocessor"></span>    StoreChar( hWnd, ch, 0);
00317 <span class="preprocessor">#endif</span>
00318 <span class="preprocessor"></span>
00319     <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00320                  Message+CONIME_KEYDATA,
00321                  wParam,          <span class="comment">//*Dest,</span>
00322                  lParam) ;
00323 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a162" doxytag="conimep.h::CloseCandidateJapan" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CloseCandidateJapan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CandList</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l01253">1253</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d5/d4/conimep_8h-source.html#l00123">_CONSOLE_TABLE::CandListMemAllocSize</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00061">CI_CONIMECANDINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00120">_CONSOLE_TABLE::lpCandListMem</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00061">MAX_LISTCAND</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l01204">ImeUICloseCandidate()</a>.
<p>
<pre class="fragment"><div>01259 {
01260     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex;
01261     COPYDATASTRUCT CopyData;
01262 
01263     <span class="keywordflow">for</span> (dwIndex = 0; dwIndex &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a26">MAX_LISTCAND</a> ; dwIndex ++ ) {
01264         <span class="keywordflow">if</span> ( CandList &amp; ( 1 &lt;&lt; dwIndex ) ) {
01265             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
01266                  LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex]);
01267                  ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01268                  ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] = 0;
01269             }
01270         }
01271     }
01272 
01273     CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a7">CI_CONIMECANDINFO</a>;
01274     CopyData.cbData = 0;
01275     CopyData.lpData = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01276     <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
01277                            (WPARAM)hwnd,
01278                            (LPARAM)&amp;CopyData
01279                           );
01280 
01281     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01282 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a165" doxytag="conimep.h::CloseCandidateKorea" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CloseCandidateKorea           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CandList</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l01367">1367</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d5/d4/conimep_8h-source.html#l00123">_CONSOLE_TABLE::CandListMemAllocSize</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00061">CI_CONIMECANDINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00120">_CONSOLE_TABLE::lpCandListMem</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00061">MAX_LISTCAND</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l01204">ImeUICloseCandidate()</a>.
<p>
<pre class="fragment"><div>01373 {
01374     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex;
01375     COPYDATASTRUCT CopyData;
01376 
01377     <span class="keywordflow">for</span> (dwIndex = 0; dwIndex &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a26">MAX_LISTCAND</a> ; dwIndex ++ ) {
01378         <span class="keywordflow">if</span> ( CandList &amp; ( 1 &lt;&lt; dwIndex ) ) {
01379             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
01380                  LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex]);
01381                  ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01382                  ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] = 0;
01383             }
01384         }
01385     }
01386 
01387     CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a7">CI_CONIMECANDINFO</a>;
01388     CopyData.cbData = 0;
01389     CopyData.lpData = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01390     <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
01391                            (WPARAM)hwnd,
01392                            (LPARAM)&amp;CopyData
01393                           );
01394 
01395     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01396 
01397 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a164" doxytag="conimep.h::CloseCandidatePRC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CloseCandidatePRC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CandList</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l01326">1326</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d5/d4/conimep_8h-source.html#l00123">_CONSOLE_TABLE::CandListMemAllocSize</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00059">CI_CONIMEMODEINFO</a>, <a class="el" href="../../d3/d5/conime_8h.html#a42">CONIME_UIMODEINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00120">_CONSOLE_TABLE::lpCandListMem</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00525">MakeInfoStringPRC()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00061">MAX_LISTCAND</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l01204">ImeUICloseCandidate()</a>.
<p>
<pre class="fragment"><div>01332 {
01333     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex;
01334     COPYDATASTRUCT CopyData;
01335     <a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo;
01336     lpModeInfo = (<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>)LocalAlloc( LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) );
01337     <span class="keywordflow">if</span> ( lpModeInfo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01338         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01339     }
01340 
01341     <span class="keywordflow">for</span> (dwIndex = 0; dwIndex &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a26">MAX_LISTCAND</a> ; dwIndex ++ ) {
01342         <span class="keywordflow">if</span> ( CandList &amp; ( 1 &lt;&lt; dwIndex ) ) {
01343             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
01344                  LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex]);
01345                  ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01346                  ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] = 0;
01347             }
01348         }
01349     }
01350 
01351     CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a5">CI_CONIMEMODEINFO</a>;
01352     CopyData.cbData = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>);
01353     CopyData.lpData = lpModeInfo;
01354     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7/country_8c.html#a25">MakeInfoStringPRC</a>(ConTbl, lpModeInfo) ) {
01355         <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
01356                                (WPARAM)hwnd,
01357                                (LPARAM)&amp;CopyData
01358                              );
01359     }
01360 
01361     LocalFree( lpModeInfo );
01362     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01363 
01364 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a163" doxytag="conimep.h::CloseCandidateTaiwan" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CloseCandidateTaiwan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CandList</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l01285">1285</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d5/d4/conimep_8h-source.html#l00123">_CONSOLE_TABLE::CandListMemAllocSize</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00059">CI_CONIMEMODEINFO</a>, <a class="el" href="../../d3/d5/conime_8h.html#a42">CONIME_UIMODEINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00120">_CONSOLE_TABLE::lpCandListMem</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00298">MakeInfoStringTaiwan()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00061">MAX_LISTCAND</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l01204">ImeUICloseCandidate()</a>.
<p>
<pre class="fragment"><div>01291 {
01292     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex;
01293     COPYDATASTRUCT CopyData;
01294     <a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo;
01295     lpModeInfo = (<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>)LocalAlloc( LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) );
01296     <span class="keywordflow">if</span> ( lpModeInfo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01297         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01298     }
01299 
01300     <span class="keywordflow">for</span> (dwIndex = 0; dwIndex &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a26">MAX_LISTCAND</a> ; dwIndex ++ ) {
01301         <span class="keywordflow">if</span> ( CandList &amp; ( 1 &lt;&lt; dwIndex ) ) {
01302             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
01303                  LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex]);
01304                  ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01305                  ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] = 0;
01306             }
01307         }
01308     }
01309 
01310     CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a5">CI_CONIMEMODEINFO</a>;
01311     CopyData.cbData = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>);
01312     CopyData.lpData = lpModeInfo;
01313     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7/country_8c.html#a19">MakeInfoStringTaiwan</a>(ConTbl, lpModeInfo) ) {
01314         <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
01315                                (WPARAM)hwnd,
01316                                (LPARAM)&amp;CopyData
01317                              );
01318     }
01319 
01320     LocalFree( lpModeInfo );
01321     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01322 
01323 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a134" doxytag="conimep.h::ConimeHotkey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ConimeHotkey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsole</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>HotkeyID</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00063">63</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, and <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00057">ImmSimulateHotKey()</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00068 {
00069 <span class="comment">//    PCONSOLE_TABLE ConTbl;</span>
00070 <span class="comment">//</span>
00071 <span class="comment">//    ConTbl = SearchConsole(hConsole);</span>
00072 <span class="comment">//    if (ConTbl == NULL) {</span>
00073 <span class="comment">//        DBGPRINT(("CONIME: Error! Cannot found registed Console\n"));</span>
00074 <span class="comment">//        return FALSE;</span>
00075 <span class="comment">//    }</span>
00076 
00077     <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a9">ImmSimulateHotKey</a>(hWnd,(DWORD)HotkeyID);
00078 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a108" doxytag="conimep.h::ConImeInputLangchange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ConImeInputLangchange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsole</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01094">1094</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d4/d9/user32_8def-source.html#l00369">ActivateKeyboardLayout</a>, <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00059">CI_CONIMEMODEINFO</a>, <a class="el" href="../../d3/d5/conime_8h.html#a42">CONIME_UIMODEINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00104">_CONSOLE_TABLE::dwConversion</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00087">_HKL_TABLE::dwConversion</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00103">_CONSOLE_TABLE::fOpen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00081">GetIMEName()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00086">_HKL_TABLE::hkl</a>, <a class="el" href="../../d4/d5/conimep_8h.html#a88">HKL_TABLE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00049">HKL_TABLE_INCREMENT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00100">_CONSOLE_TABLE::hklActive</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00135">_CONSOLE_TABLE::hklListMax</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00103">IME_CMODE_OPEN</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00183">ImeUIMakeInfoString()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00406">ImeUIOpenStatusWindow()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00202">ImmGetProperty()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00129">_CONSOLE_TABLE::ImmGetProperty</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00149">IS_IME_KBDLAYOUT</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d3/d5/conime_8h.html#a43">LPCONIME_UIMODEINFO</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00136">_CONSOLE_TABLE::lphklList</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00049">_CONIME_UIMODEINFO::ModeStringLen</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00050">_CONIME_UIMODEINFO::Position</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00670">SetNLSMode()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d4/d4/conime_8h-source.html#l00046">VIEW_RIGHT</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>01099 {
01100     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
01101     <a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo;
01102     COPYDATASTRUCT CopyData;
01103     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> counter ;
01104     <a class="code" href="../../d0/d8/struct__HKL__TABLE.html">LPHKL_TABLE</a> lphklListNew ;
01105 
01106     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(hConsole);
01107     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01108         <span class="comment">// cannot find specified console.</span>
01109         <span class="comment">// It might be last console lost focus.</span>
01110         <span class="comment">// try Last Console.</span>
01111         ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
01112         <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01113             <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
01114             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01115         }
01116     }
01117 
01118     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01119         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01120     }
01121 
01122     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d5/conimep_8h.html#a49">IS_IME_KBDLAYOUT</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>)) {
01123         <span class="keywordflow">for</span> (counter = 0 ; counter &lt; ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o29">hklListMax</a> ;counter ++) 
01124         {
01125             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a>[counter].<a class="code" href="../../d0/d8/struct__HKL__TABLE.html#o0">hkl</a> == 0 || ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a>[counter].<a class="code" href="../../d0/d8/struct__HKL__TABLE.html#o0">hkl</a> == ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>) {
01126                 <span class="keywordflow">break</span>;
01127             }
01128         }
01129 
01130         <span class="keywordflow">if</span> (counter &gt;= ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o29">hklListMax</a>)
01131         {
01132             <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(counter == ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o29">hklListMax</a>);
01133             <span class="comment">// reallocation</span>
01134             lphklListNew = LocalAlloc(LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/struct__HKL__TABLE.html">HKL_TABLE</a>) * (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o29">hklListMax</a> + HKL_TABLE_INCREMENT) ) ;
01135             <span class="keywordflow">if</span> (lphklListNew != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01136             {
01137                 CopyMemory(lphklListNew , ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a> , <span class="keyword">sizeof</span>(HKL_TABLE) * ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o29">hklListMax</a>) ;
01138                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o29">hklListMax</a> += <a class="code" href="../../d4/d5/conimep_8h.html#a15">HKL_TABLE_INCREMENT</a> ;
01139                 LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a>);
01140                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a> = lphklListNew;
01141             }
01142             <span class="keywordflow">else</span> {
01143                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> ;
01144             }
01145         }
01146         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a> != NULL);
01147         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a>[counter].<a class="code" href="../../d0/d8/struct__HKL__TABLE.html#o0">hkl</a> = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>;
01148         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a>[counter].<a class="code" href="../../d0/d8/struct__HKL__TABLE.html#o1">dwConversion</a> = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a> | (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o6">fOpen</a> ? <a class="code" href="../../d3/d5/conime_8h.html#a29">IME_CMODE_OPEN</a> : 0)  ;
01149     }
01150 
01151     <a class="code" href="../../d3/d0/user32_8def.html#a45">ActivateKeyboardLayout</a>(hkl, 0);
01152     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a> = hkl;
01153     <a class="code" href="../../d6/d7/country_8c.html#a15">GetIMEName</a>( ConTbl );
01154     <a class="code" href="../../d0/d6/consubs_8c.html#a6">ImeUIOpenStatusWindow</a>(hWnd);
01155     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o26">ImmGetProperty</a> = <a class="code" href="../../d4/d1/layout_8c.html#a17">ImmGetProperty</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a> , IGP_PROPERTY);
01156 
01157     lpModeInfo = (<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>)LocalAlloc( LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) ) ;
01158     <span class="keywordflow">if</span> ( lpModeInfo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01159         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01160     }
01161     CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a5">CI_CONIMEMODEINFO</a> ;
01162     CopyData.cbData = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) ;
01163     CopyData.lpData = lpModeInfo ;
01164 
01165     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d5/conimep_8h.html#a49">IS_IME_KBDLAYOUT</a>(hkl)) {
01166 
01167         <span class="keywordflow">for</span> (counter=0; counter &lt; ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o29">hklListMax</a> ; counter++)
01168         {
01169             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a>[counter].<a class="code" href="../../d0/d8/struct__HKL__TABLE.html#o0">hkl</a> == hkl)
01170             {
01171                 <a class="code" href="../../d0/d6/consubs_8c.html#a12">SetNLSMode</a>(hWnd, hConsole,ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a>[counter].<a class="code" href="../../d0/d8/struct__HKL__TABLE.html#o1">dwConversion</a> ) ;
01172                 <a class="code" href="../../d0/d6/consubs_8c.html#a6">ImeUIOpenStatusWindow</a>(hWnd) ;
01173                 <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7/country_8c.html#a17">ImeUIMakeInfoString</a>(ConTbl,
01174                                         lpModeInfo))
01175                 {
01176                     <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
01177                                            (WPARAM)hWnd,
01178                                            (LPARAM)&amp;CopyData
01179                                          ) ;
01180                 }
01181             }
01182         }
01183     }
01184     <span class="keywordflow">else</span>
01185     {
01186 
01187         <a class="code" href="../../d0/d6/consubs_8c.html#a12">SetNLSMode</a>(hWnd, hConsole,ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a> &amp; ~IME_CMODE_OPEN ) ;
01188         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o0">ModeStringLen</a> = 0 ;
01189         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o1">Position</a> = <a class="code" href="../../d3/d5/conime_8h.html#a2">VIEW_RIGHT</a> ;
01190         <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
01191                                (WPARAM)hWnd,
01192                                (LPARAM)&amp;CopyData
01193                               ) ;
01194     }
01195 
01196     LocalFree( lpModeInfo );
01197 
01198     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01199 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a107" doxytag="conimep.h::ConImeInputLangchangeRequest" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ConImeInputLangchangeRequest           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsole</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Direction</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01000">1000</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00095">CM_CONIME_KL_ACTIVATE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00088">CONIME_DIRECT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00107">_CONSOLE_TABLE::ConsoleOutputCP</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00150">HKL_TO_LANGID</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00100">_CONSOLE_TABLE::hklActive</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00149">IS_IME_KBDLAYOUT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00189">JAPAN_CODEPAGE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00191">KOREA_CODEPAGE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00081">LANG_ID_JAPAN</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00082">LANG_ID_KOREA</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00083">LANG_ID_PRC</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00080">LANG_ID_TAIWAN</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00190">PRC_CODEPAGE</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00192">TAIWAN_CODEPAGE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>01006 {
01007     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
01008     <span class="keywordtype">int</span> nLayouts;
01009     LPHKL lphkl;
01010     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> RequiredLID = 0;
01011     <span class="keywordtype">int</span> StartPos;
01012     <span class="keywordtype">int</span> CurrentHklPos;
01013     <span class="keywordtype">int</span> i;
01014 
01015     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(hConsole);
01016     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01017         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: cannot find registered Console\n"</span>));
01018         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01019     }
01020 
01021     <span class="keywordflow">switch</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o10">ConsoleOutputCP</a>) {
01022         <span class="keywordflow">case</span> <a class="code" href="../../d4/d5/conimep_8h.html#a64">JAPAN_CODEPAGE</a>:
01023             RequiredLID = <a class="code" href="../../d4/d5/conimep_8h.html#a43">LANG_ID_JAPAN</a>;
01024             <span class="keywordflow">break</span>;
01025         <span class="keywordflow">case</span> <a class="code" href="../../d4/d5/conimep_8h.html#a65">PRC_CODEPAGE</a>:
01026             RequiredLID = <a class="code" href="../../d4/d5/conimep_8h.html#a45">LANG_ID_PRC</a>;
01027             <span class="keywordflow">break</span>;
01028         <span class="keywordflow">case</span> <a class="code" href="../../d4/d5/conimep_8h.html#a66">KOREA_CODEPAGE</a>:
01029             RequiredLID = <a class="code" href="../../d4/d5/conimep_8h.html#a44">LANG_ID_KOREA</a>;
01030             <span class="keywordflow">break</span>;
01031         <span class="keywordflow">case</span> <a class="code" href="../../d4/d5/conimep_8h.html#a67">TAIWAN_CODEPAGE</a>:
01032             RequiredLID = <a class="code" href="../../d4/d5/conimep_8h.html#a42">LANG_ID_TAIWAN</a>;
01033             <span class="keywordflow">break</span>;
01034         <span class="keywordflow">default</span>:
01035             <span class="keywordflow">break</span>;
01036     }
01037 
01038     <span class="keywordflow">if</span> ( !<a class="code" href="../../d4/d5/conimep_8h.html#a49">IS_IME_KBDLAYOUT</a>(hkl) ||
01039         ( <a class="code" href="../../d4/d5/conimep_8h.html#a50">HKL_TO_LANGID</a>(hkl) == RequiredLID)) {
01040         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01041     }
01042     <span class="keywordflow">if</span> (Direction == <a class="code" href="../../d3/d5/conime_8h.html#a24">CONIME_DIRECT</a>) {
01043         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01044     }
01045 
01046     nLayouts = GetKeyboardLayoutList(0, NULL);
01047     <span class="keywordflow">if</span> (nLayouts == 0) {
01048         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01049     }
01050     lphkl = LocalAlloc(LPTR, nLayouts * <span class="keyword">sizeof</span>(HKL));
01051     <span class="keywordflow">if</span> (lphkl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01052         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01053     }
01054     GetKeyboardLayoutList(nLayouts, lphkl);
01055 
01056     <span class="keywordflow">for</span> (CurrentHklPos = 0; CurrentHklPos &lt; nLayouts; CurrentHklPos++) {
01057         <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a> == lphkl[CurrentHklPos] ) {
01058             <span class="keywordflow">break</span>;
01059         }
01060     }
01061     <span class="keywordflow">if</span> (CurrentHklPos &gt;= nLayouts) {
01062         LocalFree(lphkl);
01063         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01064     }
01065 
01066     StartPos = CurrentHklPos;
01067 
01068     <span class="keywordflow">for</span> (i = 0; i &lt; nLayouts; i++) {
01069         StartPos+=Direction;
01070         <span class="keywordflow">if</span> (StartPos &lt; 0) {
01071             StartPos = nLayouts-1;
01072         }
01073         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (StartPos &gt;= nLayouts) {
01074             StartPos = 0;
01075         }
01076         
01077         <span class="keywordflow">if</span> ((( HandleToUlong(lphkl[StartPos]) &amp; 0xf0000000) == 0x00000000) ||
01078             (( HandleToUlong(lphkl[StartPos]) &amp; 0x0000ffff) == RequiredLID)) {
01079             <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
01080                          CM_CONIME_KL_ACTIVATE,
01081                           HandleToUlong(lphkl[StartPos]),
01082                          0);
01083             LocalFree(lphkl);
01084             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01085         }
01086     }
01087 
01088     LocalFree(lphkl);
01089     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01090 
01091 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a133" doxytag="conimep.h::ConsoleCodepageChange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ConsoleCodepageChange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsole</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>Output</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>CodePage</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00720">720</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d5/d4/conimep_8h-source.html#l00106">_CONSOLE_TABLE::ConsoleCP</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00107">_CONSOLE_TABLE::ConsoleOutputCP</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00726 {
00727     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00728 
00729     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(hConsole);
00730     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00731         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00732         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00733     }
00734 
00735     <span class="keywordflow">if</span> (Output)
00736     {
00737         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o10">ConsoleOutputCP</a> = CodePage ;
00738     }
00739     <span class="keywordflow">else</span>
00740     {
00741         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o9">ConsoleCP</a> = CodePage ;
00742     }
00743     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>) ;
00744 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a109" doxytag="conimep.h::ConsoleImeSendMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT ConsoleImeSendMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWndConsoleIME</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">1227</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00097">CONIME_SENDMSG_TIMEOUT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00697">SendMessageTimeout()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l01253">CloseCandidateJapan()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01367">CloseCandidateKorea()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01326">CloseCandidatePRC()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01285">CloseCandidateTaiwan()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01094">ConImeInputLangchange()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00070">GetCompStrJapan()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00700">GetCompStrKorea()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00486">GetCompStrPRC()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00272">GetCompStrTaiwan()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00747">ImeSysPropertyWindow()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00576">ImeUIGuideLine()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00406">ImeUIOpenStatusWindow()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00522">ImeUISetConversionMode()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00468">ImeUISetOpenStatus()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00080">OpenCandidateJapan()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00606">OpenCandidateKorea()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00433">OpenCandidatePRC()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00264">OpenCandidateTaiwan()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00964">ReDisplayCompStrJapan()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l01042">ReDisplayCompStrKorea()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l01013">ReDisplayCompStrPRC()</a>, and <a class="el" href="../../d9/d6/country3_8c-source.html#l00983">ReDisplayCompStrTaiwan()</a>.
<p>
<pre class="fragment"><div>01232 {
01233     LRESULT lResult;
01234     LRESULT fNoTimeout;
01235 
01236     <span class="keywordflow">if</span> (hWndConsoleIME == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01237     {
01238         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01239     }
01240 
01241     fNoTimeout = <a class="code" href="../../d5/d9/cltxt_8h.html#a17">SendMessageTimeout</a>(hWndConsoleIME,
01242                                     WM_COPYDATA,
01243                                     wParam,
01244                                     lParam,
01245                                     SMTO_ABORTIFHUNG | SMTO_NORMAL,
01246                                     CONIME_SENDMSG_TIMEOUT,
01247                                     &amp;lResult);
01248 
01249     <span class="keywordflow">if</span> (fNoTimeout)
01250     {
01251         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01252     }
01253 
01254 
01255     <span class="comment">/*</span>
01256 <span class="comment">     * ConsoleImeMessagePump give up SendMessage to conime.</span>
01257 <span class="comment">     * CONIME is hung up.</span>
01258 <span class="comment">     * probably, consrv also hung up.</span>
01259 <span class="comment">     */</span>
01260     KdPrint((<span class="stringliteral">"ConsoleImeSendMessage: CONIME_SENDMSG_COUNT is hung up\n"</span>));
01261 
01262     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01263 
01264 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a105" doxytag="conimep.h::ConsoleKillFocus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ConsoleKillFocus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsole</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00950">950</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00037">gfDoNotKillFocus</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00027">ghDefaultIMC</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00086">ImmAssociateContext()</a>, <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00188">ImmSetActiveContextConsoleIME()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00954 {
00955     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00956 
00957     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(hConsole);
00958     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00959         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00960         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00961     }
00962 
00963     <span class="keywordflow">if</span> ( <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a8">gfDoNotKillFocus</a> ){
00964         <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a8">gfDoNotKillFocus</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00965     }
00966     <span class="keywordflow">else</span>{
00967 <span class="comment">//v-hirshi Jun.13.1996 #if defined(LATER_DBCS)  // kazum</span>
00968         <a class="code" href="../../d1/d5/ntuser_2imm_2conime_8c.html#a4">ImmSetActiveContextConsoleIME</a>(hWnd, FALSE);
00969 <span class="comment">//v-hirshi Jun.13.1996 #endif</span>
00970         <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a3">ImmAssociateContext</a>(hWnd, ghDefaultIMC);
00971     }
00972 
00973 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00974 <span class="preprocessor"></span>    DisplayInformation(hWnd, hConsole);
00975 <span class="preprocessor">#endif</span>
00976 <span class="preprocessor"></span>
00977     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00978 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a106" doxytag="conimep.h::ConsoleScreenBufferSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ConsoleScreenBufferSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsolewParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>ScreenBufferSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00981">981</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00096">_CONSOLE_TABLE::ScreenBufferSize</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00986 {
00987     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00988 
00989     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(hConsole);
00990     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00991         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00992         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00993     }
00994 
00995     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o2">ScreenBufferSize</a> = ScreenBufferSize;
00996     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00997 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a104" doxytag="conimep.h::ConsoleSetFocus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ConsoleSetFocus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsole</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00903">903</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d4/d9/user32_8def-source.html#l00369">ActivateKeyboardLayout</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00081">GetIMEName()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00037">gfDoNotKillFocus</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00101">_CONSOLE_TABLE::hIMC_Current</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00100">_CONSOLE_TABLE::hklActive</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00468">ImeUISetOpenStatus()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00086">ImmAssociateContext()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00202">ImmGetProperty()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00129">_CONSOLE_TABLE::ImmGetProperty</a>, <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00188">ImmSetActiveContextConsoleIME()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00114">_CONSOLE_TABLE::lpCompStrMem</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00928">ReDisplayCompositionStr()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00908 {
00909     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00910     HKL OldhKL;
00911 
00912     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(hConsole);
00913     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00914         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00915         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00916     }
00917 
00918     <span class="keywordflow">if</span> ( <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a8">gfDoNotKillFocus</a> ){
00919         <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a8">gfDoNotKillFocus</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00920     }
00921 
00922     OldhKL = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a> ;
00923     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a> = hKL;
00924     <a class="code" href="../../d3/d0/user32_8def.html#a45">ActivateKeyboardLayout</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>, 0);
00925     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a3">ImmAssociateContext</a>(hWnd, ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o4">hIMC_Current</a>);
00926 
00927     <span class="keywordflow">if</span> (OldhKL == 0) {
00928         <a class="code" href="../../d6/d7/country_8c.html#a15">GetIMEName</a>( ConTbl );
00929         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o26">ImmGetProperty</a> = <a class="code" href="../../d4/d1/layout_8c.html#a17">ImmGetProperty</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a> , IGP_PROPERTY);
00930     }
00931 
00932 <span class="comment">//v-hirshi Jun.13.1996 #if defined(LATER_DBCS)  // kazum</span>
00933     <a class="code" href="../../d1/d5/ntuser_2imm_2conime_8c.html#a4">ImmSetActiveContextConsoleIME</a>(hWnd, TRUE);
00934 <span class="comment">//v-hirshi Jun.13.1996 #endif</span>
00935 
00936     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a3">LastConsole</a> = hConsole;
00937 
00938 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00939 <span class="preprocessor"></span>    DisplayInformation(hWnd, hConsole);
00940 <span class="preprocessor">#endif</span>
00941 <span class="preprocessor"></span>
00942     <a class="code" href="../../d0/d6/consubs_8c.html#a8">ImeUISetOpenStatus</a>( hWnd );
00943     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00944         <a class="code" href="../../d8/d7/country3_8c.html#a5">ReDisplayCompositionStr</a>( hWnd );
00945 
00946     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00947 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a126" doxytag="conimep.h::CopyDataProcess" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CopyDataProcess           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PCOPYDATASTRUCT&nbsp;</td>
          <td class="mdname" nowrap> <em>CopyData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a111" doxytag="conimep.h::Create" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> Create           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hWnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00023">23</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d4/d3/w32_2ntuser_2client_2nt6_2pch_8h-source.html#l00021">GetDC</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00401">GetSystemMetrics()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00027">ghDefaultIMC</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01052">ReleaseDC()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d9/d9/geninst_8c-source.html#l01264">CmpOpenRegKey()</a>, <a class="el" href="../../d3/d3/ex_2callback_8c-source.html#l00222">ExCreateCallback()</a>, <a class="el" href="../../d0/d1/pnpsubs_8c-source.html#l00546">IopAppendStringToValueKey()</a>, <a class="el" href="../../d0/d1/pnpsubs_8c-source.html#l01712">IopOpenCurrentHwProfileDeviceInstanceKey()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l04741">IopOpenOrCreateDeviceInterfaceSubKeys()</a>, <a class="el" href="../../d3/d3/internal_8c-source.html#l05325">IopOpenRegistryKey()</a>, <a class="el" href="../../d1/d1/pri__bld_2pnpsubs_8c-source.html#l01140">IopOpenRegistryKeyPersist()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00024 {
00025     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a4">ghDefaultIMC</a> = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>(hWnd) ;
00026 
00027 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00028 <span class="preprocessor"></span>    {
00029         <span class="comment">//</span>
00030         <span class="comment">// Select fixed pitch system font and get its text metrics</span>
00031         <span class="comment">//</span>
00032 
00033         HDC hdc;
00034         TEXTMETRIC tm;
00035         WORD       patern = 0xA4A4;
00036         SIZE       size;
00037         HFONT hfntFixed;                      <span class="comment">// fixed-pitch font</span>
00038         HFONT hfntOld;                        <span class="comment">// default font holder</span>
00039 
00040         hdc = <a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html#a1">GetDC</a>( hWnd );
00041         hfntFixed = GetStockObject( SYSTEM_FIXED_FONT );
00042         hfntOld = SelectObject( hdc, hfntFixed );
00043         GetTextMetrics( hdc, &amp;tm );
00044 
00045         GetTextExtentPoint32( hdc, (LPWSTR)&amp;patern, <span class="keyword">sizeof</span>(WORD), (LPSIZE) &amp;size );
00046         cxMetrics = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>) size.cx / 2;
00047         cyMetrics = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>) size.cy;
00048         <a class="code" href="../../d3/d8/client_8c.html#a45">ReleaseDC</a>( hWnd, hdc );
00049 
00050         xPos = 0 ;
00051         CaretWidth = <a class="code" href="../../d3/d9/client_2wow_8c.html#a16">GetSystemMetrics</a>( SM_CXBORDER );
00052     }
00053 <span class="preprocessor">#endif</span>
00054 <span class="preprocessor"></span>
00055     <span class="keywordflow">return</span> 0;
00056 
00057 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a115" doxytag="conimep.h::DisplayCompString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DisplayCompString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PWCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>CharBuf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>AttrBuf</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d6/country3_8c-source.html#l00070">GetCompStrJapan()</a>, and <a class="el" href="../../d9/d6/country3_8c-source.html#l00700">GetCompStrKorea()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a116" doxytag="conimep.h::DisplayResultString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DisplayResultString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpStr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d6/country3_8c-source.html#l00070">GetCompStrJapan()</a>, and <a class="el" href="../../d9/d6/country3_8c-source.html#l00700">GetCompStrKorea()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a144" doxytag="conimep.h::DispLenStructedUnicode" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> DispLenStructedUnicode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PCHAR_INFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SrcLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00507">507</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d1/d5/consubs_8c-source.html#l00312">IsUnicodeFullWidth()</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00608">MakeStatusStrPRC2()</a>, and <a class="el" href="../../d7/d6/country_8c-source.html#l00388">MakeStatusStrTaiwan2()</a>.
<p>
<pre class="fragment"><div>00511 {
00512     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00513     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Length;
00514 
00515     Length = 0;
00516 
00517     <span class="keywordflow">for</span> ( i = 0; i &lt; SrcLength; i++) {
00518         Length += <a class="code" href="../../d0/d6/consubs_8c.html#a5">IsUnicodeFullWidth</a>(lpString[i].Char.UnicodeChar) ? 2 : 1;
00519     }
00520     <span class="keywordflow">return</span> Length;
00521 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a156" doxytag="conimep.h::DispLenUnicode" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> DispLenUnicode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPWSTR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpString</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l00790">790</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d1/d5/consubs_8c-source.html#l00312">IsUnicodeFullWidth()</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00805">GetSystemLineJ()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01071">GetSystemLineP()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00962">GetSystemLineT()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00080">OpenCandidateJapan()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00606">OpenCandidateKorea()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00433">OpenCandidatePRC()</a>, and <a class="el" href="../../d8/d6/country2_8c-source.html#l00264">OpenCandidateTaiwan()</a>.
<p>
<pre class="fragment"><div>00792 {
00793     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00794     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Length;
00795 
00796     Length = 0;
00797 
00798     <span class="keywordflow">for</span> ( i = 0; lpString[i] != 0; i++) {
00799         Length += <a class="code" href="../../d0/d6/consubs_8c.html#a5">IsUnicodeFullWidth</a>(lpString[i]) ? 2 : 1;
00800     }
00801     <span class="keywordflow">return</span> Length;
00802 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a97" doxytag="conimep.h::ExitList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ExitList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hWnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00611">611</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d5/d4/conimep_8h-source.html#l00123">_CONSOLE_TABLE::CandListMemAllocSize</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00126">_CONSOLE_TABLE::CandSep</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00127">_CONSOLE_TABLE::CandSepAllocSize</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00029">ConsoleTable</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00040">dwConsoleThreadId</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00133">_CONSOLE_TABLE::Enable</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00027">ghDefaultIMC</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00094">_CONSOLE_TABLE::hConsole</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00102">_CONSOLE_TABLE::hIMC_Original</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00086">ImmAssociateContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00061">ImmDestroyContext()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00134">_CONSOLE_TABLE::LateRemove</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00033">LockConsoleTable</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00120">_CONSOLE_TABLE::lpCandListMem</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00114">_CONSOLE_TABLE::lpCompStrMem</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00061">MAX_LISTCAND</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00030">NumberOfConsoleTable</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00034">UnlockConsoleTable</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00614 {
00615     ULONG i ,j;
00616     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> FocusedConsole;
00617 
00618     <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME:ExitList Processing\n"</span>));
00619     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a3">ImmAssociateContext</a>(hWnd,ghDefaultIMC);
00620 
00621     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a0">LockConsoleTable</a>();
00622 
00623     <span class="keywordflow">for</span> (i = 1; i &lt; <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a6">NumberOfConsoleTable</a>; i++) {
00624         FocusedConsole = <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a5">ConsoleTable</a>[i];
00625         <span class="keywordflow">if</span> (FocusedConsole != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00626         {
00627             <span class="keywordflow">if</span> (FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o0">hConsole</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00628                 <span class="keywordflow">if</span> (FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o27">Enable</a>) {
00629                     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a2">ImmDestroyContext</a>(FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o5">hIMC_Original</a>);
00630                     <span class="keywordflow">if</span> ( FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00631                         LocalFree( FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> );
00632                         FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00633                     }
00634                     <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a26">MAX_LISTCAND</a>; j++){
00635                         <span class="keywordflow">if</span> (FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[j] != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00636                             LocalFree(FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[j]);
00637                             FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[j] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00638                             FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[j] = 0;
00639                         }
00640                     }
00641                     <span class="keywordflow">if</span> (FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00642                         LocalFree(FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>);
00643                         FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o24">CandSepAllocSize</a> = 0;
00644                     }
00645                     FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o27">Enable</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00646                 }
00647                 <span class="keywordflow">else</span>
00648                     FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o28">LateRemove</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00649             }
00650         }
00651     }
00652     LocalFree( ConsoleTable );
00653     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a1">UnlockConsoleTable</a>();
00654 
00655     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a9">dwConsoleThreadId</a>)
00656     {
00657         AttachThreadInput(GetCurrentThreadId(), dwConsoleThreadId, FALSE);
00658         UnregisterConsoleIME();
00659         <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a9">dwConsoleThreadId</a> = 0;
00660     }
00661 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a166" doxytag="conimep.h::GetCompositionStr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void GetCompositionStr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>CompFlag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>CompChar</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/country3_8c-source.html#l00032">32</a> of file <a class="el" href="../../d9/d6/country3_8c-source.html">country3.c</a>.
<p>
References <a class="el" href="../../d5/d4/conimep_8h-source.html#l00107">_CONSOLE_TABLE::ConsoleOutputCP</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00070">GetCompStrJapan()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00700">GetCompStrKorea()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00486">GetCompStrPRC()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00272">GetCompStrTaiwan()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00189">JAPAN_CODEPAGE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00191">KOREA_CODEPAGE</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00190">PRC_CODEPAGE</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d5/d4/conimep_8h-source.html#l00192">TAIWAN_CODEPAGE</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/consubs_8c-source.html#l00160">ImeUIComposition()</a>.
<p>
<pre class="fragment"><div>00037 {
00038     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00039 
00040     <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: GetCompositionStr\n"</span>));
00041 
00042     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
00043     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00044         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00045         <span class="keywordflow">return</span>;
00046     }
00047 
00048     <span class="keywordflow">switch</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o10">ConsoleOutputCP</a>)
00049     {
00050         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a64">JAPAN_CODEPAGE</a>:
00051             <a class="code" href="../../d8/d7/country3_8c.html#a1">GetCompStrJapan</a>(hwnd, ConTbl, CompFlag);
00052             <span class="keywordflow">break</span>;
00053         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a67">TAIWAN_CODEPAGE</a>:
00054             <a class="code" href="../../d8/d7/country3_8c.html#a2">GetCompStrTaiwan</a>(hwnd, ConTbl, CompFlag);
00055             <span class="keywordflow">break</span>;
00056         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a65">PRC_CODEPAGE</a>:
00057             <a class="code" href="../../d8/d7/country3_8c.html#a3">GetCompStrPRC</a>(hwnd, ConTbl, CompFlag);
00058             <span class="keywordflow">break</span>;
00059         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a66">KOREA_CODEPAGE</a>:
00060             <a class="code" href="../../d8/d7/country3_8c.html#a4">GetCompStrKorea</a>(hwnd, ConTbl, CompFlag, CompChar);
00061             <span class="keywordflow">break</span>;
00062         <span class="keywordflow">default</span>:
00063             <span class="keywordflow">break</span>;
00064     }
00065     <span class="keywordflow">return</span>;
00066 
00067 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a167" doxytag="conimep.h::GetCompStrJapan" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void GetCompStrJapan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>CompFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/country3_8c-source.html#l00070">70</a> of file <a class="el" href="../../d9/d6/country3_8c-source.html">country3.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00058">CI_CONIMECOMPOSITION</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00042">_CONIME_UICOMPMESSAGE::CompAttrColor</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00115">_CONSOLE_TABLE::CompAttrColor</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d4/d5/conimep_8h.html#a115">DisplayCompString()</a>, <a class="el" href="../../d4/d5/conimep_8h.html#a116">DisplayResultString()</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00036">_CONIME_UICOMPMESSAGE::dwCompAttrLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00037">_CONIME_UICOMPMESSAGE::dwCompAttrOffset</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00038">_CONIME_UICOMPMESSAGE::dwCompStrLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00039">_CONIME_UICOMPMESSAGE::dwCompStrOffset</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00040">_CONIME_UICOMPMESSAGE::dwResultStrLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00041">_CONIME_UICOMPMESSAGE::dwResultStrOffset</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00035">_CONIME_UICOMPMESSAGE::dwSize</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00292">ImmReleaseContext()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00114">_CONSOLE_TABLE::lpCompStrMem</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d9/d6/country3_8c-source.html#l00032">GetCompositionStr()</a>.
<p>
<pre class="fragment"><div>00075 {
00076     HIMC        hIMC;                   <span class="comment">// Input context handle.</span>
00077     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       dwBufLen;               <span class="comment">// Stogare for len. of composition str</span>
00078     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       dwBufLenAttr;
00079     COPYDATASTRUCT CopyData;
00080     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       SizeToAlloc;
00081     PWCHAR      TempBuf;
00082     PUCHAR      TempBufA;
00083     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       i;
00084     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       CursorPos;
00085     <a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">LPCONIME_UICOMPMESSAGE</a> lpCompStrMem;
00086 
00087     <span class="comment">//</span>
00088     <span class="comment">// If fail to get input context handle then do nothing.</span>
00089     <span class="comment">// Applications should call ImmGetContext API to get</span>
00090     <span class="comment">// input context handle.</span>
00091     <span class="comment">//</span>
00092     hIMC = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>( hwnd );
00093     <span class="keywordflow">if</span> ( hIMC == 0 )
00094          <span class="keywordflow">return</span>;
00095 
00096     <span class="keywordflow">if</span> (CompFlag &amp; GCS_COMPSTR)
00097     {
00098         <span class="comment">//</span>
00099         <span class="comment">// Determines how much memory space to store the composition string.</span>
00100         <span class="comment">// Applications should call ImmGetCompositionString with</span>
00101         <span class="comment">// GCS_COMPSTR flag on, buffer length zero, to get the bullfer</span>
00102         <span class="comment">// length.</span>
00103         <span class="comment">//</span>
00104         dwBufLen = ImmGetCompositionString( hIMC, GCS_COMPSTR, (<span class="keywordtype">void</span> FAR*)NULL, 0l );
00105         <span class="keywordflow">if</span> ( dwBufLen &lt; 0 ) {
00106             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00107             <span class="keywordflow">return</span>;
00108         }
00109         <span class="keywordflow">if</span> ( CompFlag &amp; GCS_COMPATTR )
00110         {
00111             <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"                           GCS_COMPATTR\n"</span>));
00112             dwBufLenAttr = ImmGetCompositionString( hIMC, GCS_COMPATTR,( <span class="keywordtype">void</span> FAR *)NULL, 0l );
00113             <span class="keywordflow">if</span> ( dwBufLenAttr &lt; 0 ) {
00114                 dwBufLenAttr = 0;
00115             }
00116         }
00117         <span class="keywordflow">else</span> {
00118             dwBufLenAttr = 0;
00119         }
00120     }
00121     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag &amp; GCS_RESULTSTR)
00122     {
00123         <span class="comment">//</span>
00124         <span class="comment">// Determines how much memory space to store the result string.</span>
00125         <span class="comment">// Applications should call ImmGetCompositionString with</span>
00126         <span class="comment">// GCS_RESULTSTR flag on, buffer length zero, to get the bullfer</span>
00127         <span class="comment">// length.</span>
00128         <span class="comment">//</span>
00129         dwBufLen = ImmGetCompositionString( hIMC, GCS_RESULTSTR, (<span class="keywordtype">void</span> FAR *)NULL, 0l );
00130         <span class="keywordflow">if</span> ( dwBufLen &lt; 0 ) {
00131             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00132             <span class="keywordflow">return</span>;
00133         }
00134         dwBufLenAttr = 0;
00135     }
00136     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag == 0)
00137     {
00138         dwBufLen = 0;
00139         dwBufLenAttr = 0;
00140     }
00141 
00142     SizeToAlloc = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)( <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) +
00143                           dwBufLen     + <span class="keyword">sizeof</span>(WCHAR) +
00144                           dwBufLenAttr + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)   );
00145 
00146     <span class="keywordflow">if</span> ( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
00147          SizeToAlloc &gt; ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a>
00148        )
00149     {
00150         LocalFree( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> );
00151         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00152     }
00153 
00154     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00155         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> = (<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">LPCONIME_UICOMPMESSAGE</a>)LocalAlloc(LPTR, SizeToAlloc );
00156         <span class="keywordflow">if</span> ( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00157             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00158             <span class="keywordflow">return</span>;
00159         }
00160         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a> = SizeToAlloc;
00161     }
00162 
00163     lpCompStrMem = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>;
00164     RtlZeroMemory(&amp;lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>,
00165                   lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a> - <span class="keyword">sizeof</span>(lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a>)
00166                  );
00167 
00168     TempBuf  = (PWCHAR)((PUCHAR)lpCompStrMem + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>));
00169     TempBufA = (PUCHAR)((PUCHAR)lpCompStrMem + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) +
00170                        dwBufLen +  <span class="keyword">sizeof</span>(WCHAR));
00171 
00172     CopyMemory(lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o7">CompAttrColor</a> , ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o15">CompAttrColor</a> , 8 * <span class="keyword">sizeof</span>(WCHAR));
00173 
00174     CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a4">CI_CONIMECOMPOSITION</a>;
00175     CopyData.cbData = lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a>;
00176     CopyData.lpData = lpCompStrMem;
00177 
00178     <span class="keywordflow">if</span> (CompFlag &amp; GCS_COMPSTR)
00179     {
00180         <span class="comment">//</span>
00181         <span class="comment">// Reads in the composition string.</span>
00182         <span class="comment">//</span>
00183         ImmGetCompositionString( hIMC, GCS_COMPSTR, TempBuf, dwBufLen );
00184 
00185         <span class="comment">//</span>
00186         <span class="comment">// Null terminated.</span>
00187         <span class="comment">//</span>
00188         TempBuf[ dwBufLen / <span class="keyword">sizeof</span>(WCHAR) ] = TEXT(<span class="charliteral">'\0'</span>);
00189 
00190         <span class="comment">//</span>
00191         <span class="comment">// If GCS_COMPATTR flag is on, then we need to take care of it.</span>
00192         <span class="comment">//</span>
00193         <span class="keywordflow">if</span> ( dwBufLenAttr != 0 )
00194         {
00195             ImmGetCompositionString( hIMC,
00196                                      GCS_COMPATTR,
00197                                      TempBufA,
00198                                      dwBufLenAttr );
00199             TempBufA[ dwBufLenAttr ] = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)0;
00200         }
00201 
00202         CursorPos = ImmGetCompositionString( hIMC, GCS_CURSORPOS, NULL, 0 );
00203         <span class="keywordflow">if</span> (CursorPos == 0)
00204             TempBufA[ CursorPos ]   |= (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)0x20;
00205         <span class="keywordflow">else</span>
00206             TempBufA[ CursorPos-1 ] |= (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)0x10;
00207 
00208 <span class="preprocessor">#ifdef DEBUG_INFO</span>
00209 <span class="preprocessor"></span>        <span class="comment">//</span>
00210         <span class="comment">// Display new composition chars.</span>
00211         <span class="comment">//</span>
00212         xPos = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)dwBufLen;
00213         xPosLast = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)dwBufLen;
00214 
00215         <a class="code" href="../../d4/d5/conimep_8h.html#a115">DisplayCompString</a>( hwnd, dwBufLen / <span class="keyword">sizeof</span>(WCHAR), TempBuf, TempBufA );
00216 <span class="preprocessor">#endif</span>
00217 <span class="preprocessor"></span>
00218         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a>      = dwBufLen;
00219         <span class="keywordflow">if</span> (lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a>)
00220             lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o4">dwCompStrOffset</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>);
00221 
00222         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>     = dwBufLenAttr;
00223         <span class="keywordflow">if</span> (lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>)
00224             lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o2">dwCompAttrOffset</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) + dwBufLen +  <span class="keyword">sizeof</span>(WCHAR);
00225     }
00226     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag &amp; GCS_RESULTSTR)
00227     {
00228         <span class="comment">//</span>
00229         <span class="comment">// Reads in the result string.</span>
00230         <span class="comment">//</span>
00231         ImmGetCompositionString( hIMC, GCS_RESULTSTR, TempBuf, dwBufLen );
00232 
00233         <span class="comment">//</span>
00234         <span class="comment">// Null terminated.</span>
00235         <span class="comment">//</span>
00236         TempBuf[ dwBufLen / <span class="keyword">sizeof</span>(WCHAR) ] = TEXT(<span class="charliteral">'\0'</span>);
00237 
00238 <span class="preprocessor">#ifdef DEBUG_INFO</span>
00239 <span class="preprocessor"></span>        <span class="comment">//</span>
00240         <span class="comment">// Displays the result string.</span>
00241         <span class="comment">//</span>
00242         <a class="code" href="../../d4/d5/conimep_8h.html#a116">DisplayResultString</a>( hwnd, TempBuf );
00243 <span class="preprocessor">#endif</span>
00244 <span class="preprocessor"></span>
00245         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o5">dwResultStrLen</a>    = dwBufLen;
00246         <span class="keywordflow">if</span> (lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o5">dwResultStrLen</a>)
00247             lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o6">dwResultStrOffset</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>);
00248     }
00249     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag == 0)
00250     {
00251         TempBuf[ dwBufLen / <span class="keyword">sizeof</span>(WCHAR) ] = TEXT(<span class="charliteral">'\0'</span>);
00252         TempBufA[ dwBufLenAttr ] = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)0;
00253         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o5">dwResultStrLen</a>    = dwBufLen;
00254         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a>      = dwBufLen;
00255         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>     = dwBufLenAttr;
00256     }
00257 
00258     <span class="comment">//</span>
00259     <span class="comment">// send character to Console</span>
00260     <span class="comment">//</span>
00261     <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00262                            (WPARAM)hwnd,
00263                            (LPARAM)&amp;CopyData
00264                           );
00265 
00266     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00267 
00268 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a170" doxytag="conimep.h::GetCompStrKorea" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void GetCompStrKorea           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>CompFlag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>CompChar</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/country3_8c-source.html#l00700">700</a> of file <a class="el" href="../../d9/d6/country3_8c-source.html">country3.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00058">CI_CONIMECOMPOSITION</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00042">_CONIME_UICOMPMESSAGE::CompAttrColor</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00115">_CONSOLE_TABLE::CompAttrColor</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d4/d5/conimep_8h.html#a115">DisplayCompString()</a>, <a class="el" href="../../d4/d5/conimep_8h.html#a116">DisplayResultString()</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00036">_CONIME_UICOMPMESSAGE::dwCompAttrLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00037">_CONIME_UICOMPMESSAGE::dwCompAttrOffset</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00038">_CONIME_UICOMPMESSAGE::dwCompStrLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00039">_CONIME_UICOMPMESSAGE::dwCompStrOffset</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00040">_CONIME_UICOMPMESSAGE::dwResultStrLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00041">_CONIME_UICOMPMESSAGE::dwResultStrOffset</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00035">_CONIME_UICOMPMESSAGE::dwSize</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00292">ImmReleaseContext()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00114">_CONSOLE_TABLE::lpCompStrMem</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d9/d6/country3_8c-source.html#l00032">GetCompositionStr()</a>.
<p>
<pre class="fragment"><div>00706 {
00707     HIMC        hIMC;                   <span class="comment">// Input context handle.</span>
00708     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       dwBufLen;               <span class="comment">// Stogare for len. of composition str</span>
00709     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       dwBufLenAttr;
00710     COPYDATASTRUCT CopyData;
00711     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       SizeToAlloc;
00712     PWCHAR      TempBuf;
00713     PUCHAR      TempBufA;
00714     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       i;
00715     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       CursorPos;
00716     <a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">LPCONIME_UICOMPMESSAGE</a> lpCompStrMem;
00717 
00718     <span class="comment">//</span>
00719     <span class="comment">// If fail to get input context handle then do nothing.</span>
00720     <span class="comment">// Applications should call ImmGetContext API to get</span>
00721     <span class="comment">// input context handle.</span>
00722     <span class="comment">//</span>
00723     hIMC = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>( hwnd );
00724     <span class="keywordflow">if</span> ( hIMC == 0 )
00725          <span class="keywordflow">return</span>;
00726 
00727 <span class="comment">//    if (CompFlag &amp; CS_INSERTCHAR)</span>
00728 <span class="comment">//    {</span>
00729 <span class="comment">//        dwBufLen = 1;</span>
00730 <span class="comment">//        dwBufLenAttr = 1;</span>
00731 <span class="comment">//    }</span>
00732 <span class="comment">//    else</span>
00733     <span class="keywordflow">if</span> (CompFlag &amp; GCS_COMPSTR)
00734     {
00735         <span class="comment">//</span>
00736         <span class="comment">// Determines how much memory space to store the composition string.</span>
00737         <span class="comment">// Applications should call ImmGetCompositionString with</span>
00738         <span class="comment">// GCS_COMPSTR flag on, buffer length zero, to get the bullfer</span>
00739         <span class="comment">// length.</span>
00740         <span class="comment">//</span>
00741         dwBufLen = ImmGetCompositionString( hIMC, GCS_COMPSTR, (<span class="keywordtype">void</span> FAR*)NULL, 0l );
00742         <span class="keywordflow">if</span> ( dwBufLen &lt; 0 ) {
00743             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00744             <span class="keywordflow">return</span>;
00745         }
00746         <span class="keywordflow">if</span> ( CompFlag &amp; GCS_COMPATTR )
00747         {
00748             <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"                           GCS_COMPATTR\n"</span>));
00749             dwBufLenAttr = ImmGetCompositionString( hIMC, GCS_COMPATTR,( <span class="keywordtype">void</span> FAR *)NULL, 0l );
00750             <span class="keywordflow">if</span> ( dwBufLenAttr &lt; 0 ) {
00751                 dwBufLenAttr = 0;
00752             }
00753         }
00754         <span class="keywordflow">else</span> {
00755             dwBufLenAttr = dwBufLen;
00756         }
00757     }
00758     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag &amp; GCS_RESULTSTR)
00759     {
00760         <span class="comment">//</span>
00761         <span class="comment">// Determines how much memory space to store the result string.</span>
00762         <span class="comment">// Applications should call ImmGetCompositionString with</span>
00763         <span class="comment">// GCS_RESULTSTR flag on, buffer length zero, to get the bullfer</span>
00764         <span class="comment">// length.</span>
00765         <span class="comment">//</span>
00766         dwBufLen = ImmGetCompositionString( hIMC, GCS_RESULTSTR, (<span class="keywordtype">void</span> FAR *)NULL, 0l );
00767         <span class="keywordflow">if</span> ( dwBufLen &lt; 0 ) {
00768             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00769             <span class="keywordflow">return</span>;
00770         }
00771         dwBufLenAttr = 0;
00772     }
00773     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag == 0)
00774     {
00775         dwBufLen = 0;
00776         dwBufLenAttr = 0;
00777     }
00778     <span class="keywordflow">else</span>
00779     {
00780         <span class="keywordflow">return</span>;
00781     }
00782 
00783     SizeToAlloc = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)( <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) +
00784                           dwBufLen     + <span class="keyword">sizeof</span>(WCHAR) +
00785                           dwBufLenAttr + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)   );
00786 
00787     <span class="keywordflow">if</span> ( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
00788          SizeToAlloc &gt; ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a>
00789        )
00790     {
00791         LocalFree( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> );
00792         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00793     }
00794 
00795     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00796         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> = (<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">LPCONIME_UICOMPMESSAGE</a>)LocalAlloc(LPTR, SizeToAlloc );
00797         <span class="keywordflow">if</span> ( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00798             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00799             <span class="keywordflow">return</span>;
00800         }
00801         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a> = SizeToAlloc;
00802     }
00803 
00804     lpCompStrMem = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>;
00805     RtlZeroMemory(&amp;lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>,
00806                   lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a> - <span class="keyword">sizeof</span>(lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a>)
00807                  );
00808 
00809     TempBuf  = (PWCHAR)((PUCHAR)lpCompStrMem + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>));
00810     TempBufA = (PUCHAR)((PUCHAR)lpCompStrMem + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) +
00811                        dwBufLen +  <span class="keyword">sizeof</span>(WCHAR));
00812 
00813     CopyMemory(lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o7">CompAttrColor</a> , ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o15">CompAttrColor</a> , 8 * <span class="keyword">sizeof</span>(WCHAR));
00814 
00815     CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a4">CI_CONIMECOMPOSITION</a>;
00816     CopyData.cbData = lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a>;
00817     CopyData.lpData = lpCompStrMem;
00818 
00819     <span class="keywordflow">if</span> (CompFlag &amp; CS_INSERTCHAR)
00820     {
00821         *TempBuf = (WORD)CompChar;
00822         TempBuf[ dwBufLen / <span class="keyword">sizeof</span>(WCHAR) ] = TEXT(<span class="charliteral">'\0'</span>);
00823         *TempBufA = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)ATTR_TARGET_CONVERTED;
00824         TempBufA[ dwBufLenAttr ] = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)0;
00825     }
00826     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag &amp; GCS_COMPSTR)
00827     {
00828         <span class="comment">//</span>
00829         <span class="comment">// Reads in the composition string.</span>
00830         <span class="comment">//</span>
00831         ImmGetCompositionString( hIMC, GCS_COMPSTR, TempBuf, dwBufLen );
00832 
00833         <span class="comment">//</span>
00834         <span class="comment">// Null terminated.</span>
00835         <span class="comment">//</span>
00836         TempBuf[ dwBufLen / <span class="keyword">sizeof</span>(WCHAR) ] = TEXT(<span class="charliteral">'\0'</span>);
00837 
00838         <span class="comment">//</span>
00839         <span class="comment">// If GCS_COMPATTR flag is on, then we need to take care of it.</span>
00840         <span class="comment">//</span>
00841         <span class="keywordflow">if</span> ( dwBufLenAttr != 0 )
00842         {
00843             <span class="keywordflow">if</span> ( CompFlag &amp; GCS_COMPATTR )
00844             {
00845                 ImmGetCompositionString( hIMC,
00846                                          GCS_COMPATTR,
00847                                          TempBufA,
00848                                          dwBufLenAttr );
00849                 TempBufA[ dwBufLenAttr ] = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)0;
00850             }
00851             <span class="keywordflow">else</span>
00852             {
00853                 <span class="keywordflow">for</span> (i = 0; i &lt;= dwBufLenAttr; i++)
00854                     TempBufA[ i ] = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)1;
00855             }
00856         }
00857 
00858 <span class="comment">// Korean  NT does not need IME cursor. v-hirshi</span>
00859 <span class="comment">//        CursorPos = ImmGetCompositionString( hIMC, GCS_CURSORPOS, NULL, 0 );</span>
00860 <span class="comment">//        if (CursorPos == 0)</span>
00861 <span class="comment">//            TempBufA[ CursorPos ]   |= (BYTE)0x20;</span>
00862 <span class="comment">//        else</span>
00863 <span class="comment">//            TempBufA[ CursorPos-1 ] |= (BYTE)0x10;</span>
00864 
00865 <span class="preprocessor">#ifdef DEBUG_INFO</span>
00866 <span class="preprocessor"></span>        <span class="comment">//</span>
00867         <span class="comment">// Display new composition chars.</span>
00868         <span class="comment">//</span>
00869         xPos = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)dwBufLen;
00870         xPosLast = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)dwBufLen;
00871 
00872         <a class="code" href="../../d4/d5/conimep_8h.html#a115">DisplayCompString</a>( hwnd, dwBufLen / <span class="keyword">sizeof</span>(WCHAR), TempBuf, TempBufA );
00873 <span class="preprocessor">#endif</span>
00874 <span class="preprocessor"></span>
00875         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a>      = dwBufLen;
00876         <span class="keywordflow">if</span> (lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a>)
00877             lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o4">dwCompStrOffset</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>);
00878 
00879         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>     = dwBufLenAttr;
00880         <span class="keywordflow">if</span> (lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>)
00881             lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o2">dwCompAttrOffset</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) + dwBufLen +  <span class="keyword">sizeof</span>(WCHAR);
00882     }
00883     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag &amp; GCS_RESULTSTR)
00884     {
00885         <span class="comment">//</span>
00886         <span class="comment">// Reads in the result string.</span>
00887         <span class="comment">//</span>
00888         ImmGetCompositionString( hIMC, GCS_RESULTSTR, TempBuf, dwBufLen );
00889 
00890         <span class="comment">//</span>
00891         <span class="comment">// Null terminated.</span>
00892         <span class="comment">//</span>
00893         TempBuf[ dwBufLen / <span class="keyword">sizeof</span>(WCHAR) ] = TEXT(<span class="charliteral">'\0'</span>);
00894 
00895 <span class="preprocessor">#ifdef DEBUG_INFO</span>
00896 <span class="preprocessor"></span>        <span class="comment">//</span>
00897         <span class="comment">// Displays the result string.</span>
00898         <span class="comment">//</span>
00899         <a class="code" href="../../d4/d5/conimep_8h.html#a116">DisplayResultString</a>( hwnd, TempBuf );
00900 <span class="preprocessor">#endif</span>
00901 <span class="preprocessor"></span>
00902         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o5">dwResultStrLen</a>    = dwBufLen;
00903         <span class="keywordflow">if</span> (lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o5">dwResultStrLen</a>)
00904             lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o6">dwResultStrOffset</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>);
00905     }
00906     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag == 0)
00907     {
00908         TempBuf[ dwBufLen / <span class="keyword">sizeof</span>(WCHAR) ] = TEXT(<span class="charliteral">'\0'</span>);
00909         TempBufA[ dwBufLenAttr ] = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)0;
00910         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o5">dwResultStrLen</a>    = dwBufLen;
00911         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a>      = dwBufLen;
00912         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>     = dwBufLenAttr;
00913     }
00914 
00915     <span class="comment">//</span>
00916     <span class="comment">// send character to Console</span>
00917     <span class="comment">//</span>
00918     <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00919                            (WPARAM)hwnd,
00920                            (LPARAM)&amp;CopyData
00921                           );
00922 
00923     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00924 
00925 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a169" doxytag="conimep.h::GetCompStrPRC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void GetCompStrPRC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>CompFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/country3_8c-source.html#l00486">486</a> of file <a class="el" href="../../d9/d6/country3_8c-source.html">country3.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00058">CI_CONIMECOMPOSITION</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00059">CI_CONIMEMODEINFO</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00042">_CONIME_UICOMPMESSAGE::CompAttrColor</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00115">_CONSOLE_TABLE::CompAttrColor</a>, <a class="el" href="../../d3/d5/conime_8h.html#a42">CONIME_UIMODEINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00036">_CONIME_UICOMPMESSAGE::dwCompAttrLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00037">_CONIME_UICOMPMESSAGE::dwCompAttrOffset</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00038">_CONIME_UICOMPMESSAGE::dwCompStrLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00039">_CONIME_UICOMPMESSAGE::dwCompStrOffset</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00040">_CONIME_UICOMPMESSAGE::dwResultStrLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00041">_CONIME_UICOMPMESSAGE::dwResultStrOffset</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00035">_CONIME_UICOMPMESSAGE::dwSize</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00292">ImmReleaseContext()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00114">_CONSOLE_TABLE::lpCompStrMem</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00525">MakeInfoStringPRC()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d9/d6/country3_8c-source.html#l00032">GetCompositionStr()</a>.
<p>
<pre class="fragment"><div>00491 {
00492     HIMC        hIMC;                   <span class="comment">// Input context handle.</span>
00493     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       dwBufLen;               <span class="comment">// Stogare for len. of composition str</span>
00494     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       dwBufLenAttr;
00495     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       SizeToAlloc;
00496     PWCHAR      TempBuf;
00497     PUCHAR      TempBufA;
00498     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       i;
00499     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       CursorPos;
00500     COPYDATASTRUCT CopyData;
00501     <a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo;
00502     <a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">LPCONIME_UICOMPMESSAGE</a> lpCompStrMem;
00503 
00504     <span class="comment">//</span>
00505     <span class="comment">// If fail to get input context handle then do nothing.</span>
00506     <span class="comment">// Applications should call ImmGetContext API to get</span>
00507     <span class="comment">// input context handle.</span>
00508     <span class="comment">//</span>
00509     hIMC = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>( hwnd );
00510     <span class="keywordflow">if</span> ( hIMC == 0 )
00511         <span class="keywordflow">return</span>;
00512 
00513     lpModeInfo = (<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>)LocalAlloc(LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) );
00514     <span class="keywordflow">if</span> ( lpModeInfo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00515         <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00516         <span class="keywordflow">return</span>;
00517     }
00518 
00519     <span class="keywordflow">if</span> (CompFlag &amp; GCS_COMPSTR)
00520     {
00521         <span class="comment">//</span>
00522         <span class="comment">// Determines how much memory space to store the composition string.</span>
00523         <span class="comment">// Applications should call ImmGetCompositionString with</span>
00524         <span class="comment">// GCS_COMPSTR flag on, buffer length zero, to get the bullfer</span>
00525         <span class="comment">// length.</span>
00526         <span class="comment">//</span>
00527         dwBufLen = ImmGetCompositionString( hIMC, GCS_COMPSTR, (<span class="keywordtype">void</span> FAR*)NULL, 0l );
00528         <span class="keywordflow">if</span> ( dwBufLen &lt; 0 ) {
00529             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00530             <span class="keywordflow">return</span>;
00531         }
00532         <span class="keywordflow">if</span> ( CompFlag &amp; GCS_COMPATTR )
00533         {
00534             <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"                           GCS_COMPATTR\n"</span>));
00535             dwBufLenAttr = ImmGetCompositionString( hIMC, GCS_COMPATTR,( <span class="keywordtype">void</span> FAR *)NULL, 0l );
00536             <span class="keywordflow">if</span> ( dwBufLenAttr &lt; 0 ) {
00537                 dwBufLenAttr = 0;
00538             }
00539         }
00540         <span class="keywordflow">else</span> {
00541             dwBufLenAttr = 0;
00542         }
00543     }
00544     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag &amp; GCS_RESULTSTR)
00545     {
00546         <span class="comment">//</span>
00547         <span class="comment">// Determines how much memory space to store the result string.</span>
00548         <span class="comment">// Applications should call ImmGetCompositionString with</span>
00549         <span class="comment">// GCS_RESULTSTR flag on, buffer length zero, to get the bullfer</span>
00550         <span class="comment">// length.</span>
00551         <span class="comment">//</span>
00552         dwBufLen = ImmGetCompositionString( hIMC, GCS_RESULTSTR, (<span class="keywordtype">void</span> FAR *)NULL, 0l );
00553         <span class="keywordflow">if</span> ( dwBufLen &lt; 0 ) {
00554             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00555             <span class="keywordflow">return</span>;
00556         }
00557         dwBufLenAttr = 0;
00558     }
00559     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag == 0)
00560     {
00561         dwBufLen = 0;
00562         dwBufLenAttr = 0;
00563     }
00564 
00565     SizeToAlloc = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)( <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) +
00566                           dwBufLen     + <span class="keyword">sizeof</span>(WCHAR) +
00567                           dwBufLenAttr + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)   );
00568 
00569     <span class="keywordflow">if</span> ( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
00570          SizeToAlloc &gt; ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a>
00571        )
00572     {
00573         LocalFree( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> );
00574         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00575     }
00576 
00577     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00578         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> = (<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">LPCONIME_UICOMPMESSAGE</a>)LocalAlloc(LPTR, SizeToAlloc );
00579         <span class="keywordflow">if</span> ( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00580             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00581             <span class="keywordflow">return</span>;
00582         }
00583         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a> = SizeToAlloc;
00584     }
00585 
00586     lpCompStrMem = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>;
00587     RtlZeroMemory(&amp;lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>,
00588                   lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a> - <span class="keyword">sizeof</span>(lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a>)
00589                  );
00590 
00591     TempBuf  = (PWCHAR)((PUCHAR)lpCompStrMem + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>));
00592     TempBufA = (PUCHAR)((PUCHAR)lpCompStrMem + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) +
00593                        dwBufLen +  <span class="keyword">sizeof</span>(WCHAR));
00594 
00595     CopyMemory(lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o7">CompAttrColor</a> , ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o15">CompAttrColor</a> , 8 * <span class="keyword">sizeof</span>(WCHAR));
00596 
00597     <span class="keywordflow">if</span> (CompFlag &amp; GCS_COMPSTR)
00598     {
00599         <span class="comment">//</span>
00600         <span class="comment">// Reads in the composition string.</span>
00601         <span class="comment">//</span>
00602         ImmGetCompositionString( hIMC, GCS_COMPSTR, TempBuf, dwBufLen );
00603 
00604         <span class="comment">//</span>
00605         <span class="comment">// Null terminated.</span>
00606         <span class="comment">//</span>
00607         TempBuf[ dwBufLen / <span class="keyword">sizeof</span>(WCHAR) ] = TEXT(<span class="charliteral">'\0'</span>);
00608 
00609         <span class="comment">//</span>
00610         <span class="comment">// If GCS_COMPATTR flag is on, then we need to take care of it.</span>
00611         <span class="comment">//</span>
00612         <span class="keywordflow">if</span> ( dwBufLenAttr != 0 )
00613         {
00614             ImmGetCompositionString( hIMC,
00615                                      GCS_COMPATTR,
00616                                      TempBufA,
00617                                      dwBufLenAttr );
00618             TempBufA[ dwBufLenAttr ] = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)0;
00619         }
00620 
00621         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a>      = dwBufLen;
00622         <span class="keywordflow">if</span> (lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a>)
00623             lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o4">dwCompStrOffset</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>);
00624 
00625         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>     = dwBufLenAttr;
00626         <span class="keywordflow">if</span> (lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>)
00627             lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o2">dwCompAttrOffset</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) + dwBufLen +  <span class="keyword">sizeof</span>(WCHAR);
00628         <span class="comment">//</span>
00629         <span class="comment">// Display character to Console</span>
00630         <span class="comment">//</span>
00631         CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a5">CI_CONIMEMODEINFO</a>;
00632         CopyData.cbData = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>);
00633         CopyData.lpData = lpModeInfo;
00634 
00635         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7/country_8c.html#a25">MakeInfoStringPRC</a>(ConTbl, lpModeInfo) ) {
00636             <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00637                                    (WPARAM)hwnd,
00638                                    (LPARAM)&amp;CopyData
00639                                  );
00640         }
00641     }
00642     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag &amp; GCS_RESULTSTR)
00643     {
00644         <span class="comment">//</span>
00645         <span class="comment">// Reads in the result string.</span>
00646         <span class="comment">//</span>
00647         ImmGetCompositionString( hIMC, GCS_RESULTSTR, TempBuf, dwBufLen );
00648 
00649         <span class="comment">//</span>
00650         <span class="comment">// Null terminated.</span>
00651         <span class="comment">//</span>
00652         TempBuf[ dwBufLen / <span class="keyword">sizeof</span>(WCHAR) ] = TEXT(<span class="charliteral">'\0'</span>);
00653 
00654         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o5">dwResultStrLen</a>    = dwBufLen;
00655         <span class="keywordflow">if</span> (lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o5">dwResultStrLen</a>)
00656             lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o6">dwResultStrOffset</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>);
00657         <span class="comment">//</span>
00658         <span class="comment">// send character to Console</span>
00659         <span class="comment">//</span>
00660         CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a4">CI_CONIMECOMPOSITION</a>;
00661         CopyData.cbData = lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a>;
00662         CopyData.lpData = lpCompStrMem;
00663         <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00664                                (WPARAM)hwnd,
00665                                (LPARAM)&amp;CopyData
00666                               );
00667 
00668     }
00669     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag == 0)
00670     {
00671         TempBuf[ dwBufLen / <span class="keyword">sizeof</span>(WCHAR) ] = TEXT(<span class="charliteral">'\0'</span>);
00672         TempBufA[ dwBufLenAttr ] = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)0;
00673         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o5">dwResultStrLen</a>    = dwBufLen;
00674         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a>      = dwBufLen;
00675         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>     = dwBufLenAttr;
00676         <span class="comment">//</span>
00677         <span class="comment">// Display character to Console</span>
00678         <span class="comment">//</span>
00679         CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a5">CI_CONIMEMODEINFO</a>;
00680         CopyData.cbData = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>);
00681         CopyData.lpData = lpModeInfo;
00682 
00683         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7/country_8c.html#a25">MakeInfoStringPRC</a>(ConTbl, lpModeInfo) ) {
00684             <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00685                                    (WPARAM)hwnd,
00686                                    (LPARAM)&amp;CopyData
00687                                  );
00688         }
00689     }
00690 
00691 
00692     LocalFree( lpModeInfo );
00693 
00694     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00695     <span class="keywordflow">return</span>;
00696 
00697 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a168" doxytag="conimep.h::GetCompStrTaiwan" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void GetCompStrTaiwan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>CompFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/country3_8c-source.html#l00272">272</a> of file <a class="el" href="../../d9/d6/country3_8c-source.html">country3.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00058">CI_CONIMECOMPOSITION</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00059">CI_CONIMEMODEINFO</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00042">_CONIME_UICOMPMESSAGE::CompAttrColor</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00115">_CONSOLE_TABLE::CompAttrColor</a>, <a class="el" href="../../d3/d5/conime_8h.html#a42">CONIME_UIMODEINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00036">_CONIME_UICOMPMESSAGE::dwCompAttrLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00037">_CONIME_UICOMPMESSAGE::dwCompAttrOffset</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00038">_CONIME_UICOMPMESSAGE::dwCompStrLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00039">_CONIME_UICOMPMESSAGE::dwCompStrOffset</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00040">_CONIME_UICOMPMESSAGE::dwResultStrLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00041">_CONIME_UICOMPMESSAGE::dwResultStrOffset</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00035">_CONIME_UICOMPMESSAGE::dwSize</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00292">ImmReleaseContext()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00114">_CONSOLE_TABLE::lpCompStrMem</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00298">MakeInfoStringTaiwan()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d9/d6/country3_8c-source.html#l00032">GetCompositionStr()</a>.
<p>
<pre class="fragment"><div>00277 {
00278     HIMC        hIMC;                   <span class="comment">// Input context handle.</span>
00279     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       dwBufLen;               <span class="comment">// Stogare for len. of composition str</span>
00280     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       dwBufLenAttr;
00281     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       SizeToAlloc;
00282     PWCHAR      TempBuf;
00283     PUCHAR      TempBufA;
00284     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       i;
00285     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       CursorPos;
00286     COPYDATASTRUCT CopyData;
00287     <a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo;
00288     <a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">LPCONIME_UICOMPMESSAGE</a> lpCompStrMem;
00289 
00290     <span class="comment">//</span>
00291     <span class="comment">// If fail to get input context handle then do nothing.</span>
00292     <span class="comment">// Applications should call ImmGetContext API to get</span>
00293     <span class="comment">// input context handle.</span>
00294     <span class="comment">//</span>
00295     hIMC = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>( hwnd );
00296     <span class="keywordflow">if</span> ( hIMC == 0 )
00297         <span class="keywordflow">return</span>;
00298 
00299     lpModeInfo = (<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>)LocalAlloc(LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) );
00300     <span class="keywordflow">if</span> ( lpModeInfo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00301         <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00302         <span class="keywordflow">return</span>;
00303     }
00304 
00305     <span class="keywordflow">if</span> (CompFlag &amp; GCS_COMPSTR)
00306     {
00307         <span class="comment">//</span>
00308         <span class="comment">// Determines how much memory space to store the composition string.</span>
00309         <span class="comment">// Applications should call ImmGetCompositionString with</span>
00310         <span class="comment">// GCS_COMPSTR flag on, buffer length zero, to get the bullfer</span>
00311         <span class="comment">// length.</span>
00312         <span class="comment">//</span>
00313         dwBufLen = ImmGetCompositionString( hIMC, GCS_COMPSTR, (<span class="keywordtype">void</span> FAR*)NULL, 0l );
00314         <span class="keywordflow">if</span> ( dwBufLen &lt; 0 ) {
00315             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00316             <span class="keywordflow">return</span>;
00317         }
00318         <span class="keywordflow">if</span> ( CompFlag &amp; GCS_COMPATTR )
00319         {
00320             <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"                           GCS_COMPATTR\n"</span>));
00321             dwBufLenAttr = ImmGetCompositionString( hIMC, GCS_COMPATTR,( <span class="keywordtype">void</span> FAR *)NULL, 0l );
00322             <span class="keywordflow">if</span> ( dwBufLenAttr &lt; 0 ) {
00323                 dwBufLenAttr = 0;
00324             }
00325         }
00326         <span class="keywordflow">else</span> {
00327             dwBufLenAttr = 0;
00328         }
00329     }
00330     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag &amp; GCS_RESULTSTR)
00331     {
00332         <span class="comment">//</span>
00333         <span class="comment">// Determines how much memory space to store the result string.</span>
00334         <span class="comment">// Applications should call ImmGetCompositionString with</span>
00335         <span class="comment">// GCS_RESULTSTR flag on, buffer length zero, to get the bullfer</span>
00336         <span class="comment">// length.</span>
00337         <span class="comment">//</span>
00338         dwBufLen = ImmGetCompositionString( hIMC, GCS_RESULTSTR, (<span class="keywordtype">void</span> FAR *)NULL, 0l );
00339         <span class="keywordflow">if</span> ( dwBufLen &lt; 0 ) {
00340             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00341             <span class="keywordflow">return</span>;
00342         }
00343         dwBufLenAttr = 0;
00344     }
00345     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag == 0)
00346     {
00347         dwBufLen = 0;
00348         dwBufLenAttr = 0;
00349     }
00350 
00351     SizeToAlloc = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)( <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) +
00352                           dwBufLen     + <span class="keyword">sizeof</span>(WCHAR) +
00353                           dwBufLenAttr + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)   );
00354 
00355     <span class="keywordflow">if</span> ( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
00356          SizeToAlloc &gt; ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a>
00357        )
00358     {
00359         LocalFree( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> );
00360         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00361     }
00362 
00363     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00364         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> = (<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">LPCONIME_UICOMPMESSAGE</a>)LocalAlloc(LPTR, SizeToAlloc );
00365         <span class="keywordflow">if</span> ( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00366             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00367             <span class="keywordflow">return</span>;
00368         }
00369         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a> = SizeToAlloc;
00370     }
00371 
00372     lpCompStrMem = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>;
00373     RtlZeroMemory(&amp;lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>,
00374                   lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a> - <span class="keyword">sizeof</span>(lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a>)
00375                  );
00376 
00377     TempBuf  = (PWCHAR)((PUCHAR)lpCompStrMem + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>));
00378     TempBufA = (PUCHAR)((PUCHAR)lpCompStrMem + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) +
00379                        dwBufLen +  <span class="keyword">sizeof</span>(WCHAR));
00380 
00381     CopyMemory(lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o7">CompAttrColor</a> , ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o15">CompAttrColor</a> , 8 * <span class="keyword">sizeof</span>(WCHAR));
00382 
00383     <span class="keywordflow">if</span> (CompFlag &amp; GCS_COMPSTR)
00384     {
00385         <span class="comment">//</span>
00386         <span class="comment">// Reads in the composition string.</span>
00387         <span class="comment">//</span>
00388         ImmGetCompositionString( hIMC, GCS_COMPSTR, TempBuf, dwBufLen );
00389 
00390         <span class="comment">//</span>
00391         <span class="comment">// Null terminated.</span>
00392         <span class="comment">//</span>
00393         TempBuf[ dwBufLen / <span class="keyword">sizeof</span>(WCHAR) ] = TEXT(<span class="charliteral">'\0'</span>);
00394 
00395         <span class="comment">//</span>
00396         <span class="comment">// If GCS_COMPATTR flag is on, then we need to take care of it.</span>
00397         <span class="comment">//</span>
00398         <span class="keywordflow">if</span> ( dwBufLenAttr != 0 )
00399         {
00400             ImmGetCompositionString( hIMC,
00401                                      GCS_COMPATTR,
00402                                      TempBufA,
00403                                      dwBufLenAttr );
00404             TempBufA[ dwBufLenAttr ] = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)0;
00405         }
00406 
00407         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a>      = dwBufLen;
00408         <span class="keywordflow">if</span> (lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a>)
00409             lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o4">dwCompStrOffset</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>);
00410 
00411         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>     = dwBufLenAttr;
00412         <span class="keywordflow">if</span> (lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>)
00413             lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o2">dwCompAttrOffset</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) + dwBufLen +  <span class="keyword">sizeof</span>(WCHAR);
00414         <span class="comment">//</span>
00415         <span class="comment">// Display character to Console</span>
00416         <span class="comment">//</span>
00417         CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a5">CI_CONIMEMODEINFO</a>;
00418         CopyData.cbData = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>);
00419         CopyData.lpData = lpModeInfo;
00420 
00421         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7/country_8c.html#a19">MakeInfoStringTaiwan</a>(ConTbl, lpModeInfo) ) {
00422             <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00423                                    (WPARAM)hwnd,
00424                                    (LPARAM)&amp;CopyData
00425                                  );
00426         }
00427     }
00428     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag &amp; GCS_RESULTSTR)
00429     {
00430         <span class="comment">//</span>
00431         <span class="comment">// Reads in the result string.</span>
00432         <span class="comment">//</span>
00433         ImmGetCompositionString( hIMC, GCS_RESULTSTR, TempBuf, dwBufLen );
00434 
00435         <span class="comment">//</span>
00436         <span class="comment">// Null terminated.</span>
00437         <span class="comment">//</span>
00438         TempBuf[ dwBufLen / <span class="keyword">sizeof</span>(WCHAR) ] = TEXT(<span class="charliteral">'\0'</span>);
00439 
00440         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o5">dwResultStrLen</a>    = dwBufLen;
00441         <span class="keywordflow">if</span> (lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o5">dwResultStrLen</a>)
00442             lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o6">dwResultStrOffset</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>);
00443         <span class="comment">//</span>
00444         <span class="comment">// send character to Console</span>
00445         <span class="comment">//</span>
00446         CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a4">CI_CONIMECOMPOSITION</a>;
00447         CopyData.cbData = lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a>;
00448         CopyData.lpData = lpCompStrMem;
00449         <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00450                                (WPARAM)hwnd,
00451                                (LPARAM)&amp;CopyData
00452                               );
00453 
00454     }
00455     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CompFlag == 0)
00456     {
00457         TempBuf[ dwBufLen / <span class="keyword">sizeof</span>(WCHAR) ] = TEXT(<span class="charliteral">'\0'</span>);
00458         TempBufA[ dwBufLenAttr ] = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)0;
00459         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o5">dwResultStrLen</a>    = dwBufLen;
00460         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a>      = dwBufLen;
00461         lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o1">dwCompAttrLen</a>     = dwBufLenAttr;
00462         <span class="comment">//</span>
00463         <span class="comment">// Display character to Console</span>
00464         <span class="comment">//</span>
00465         CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a5">CI_CONIMEMODEINFO</a>;
00466         CopyData.cbData = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>);
00467         CopyData.lpData = lpModeInfo;
00468 
00469         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7/country_8c.html#a19">MakeInfoStringTaiwan</a>(ConTbl, lpModeInfo) ) {
00470             <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00471                                    (WPARAM)hwnd,
00472                                    (LPARAM)&amp;CopyData
00473                                  );
00474         }
00475     }
00476 
00477 
00478     LocalFree( lpModeInfo );
00479 
00480     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00481     <span class="keywordflow">return</span>;
00482 
00483 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a135" doxytag="conimep.h::GetIMEName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetIMEName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ConTbl</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00081">81</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00306">GetKeyboardLayoutName()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00109">_CONSOLE_TABLE::GuideLine</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00101">_CONSOLE_TABLE::hIMC_Current</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00100">_CONSOLE_TABLE::hklActive</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00039">IMECGuide</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00217">IMECGuideLen</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00076">KBDLAYOUT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00077">KBDLAYOUTTEXT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00078">KBDSEPALATER</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00108">_CONSOLE_TABLE::LayoutName</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00075">MaxBufSize</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01094">ConImeInputLangchange()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00903">ConsoleSetFocus()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01202">InputLangchange()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00664">InsertConsole()</a>.
<p>
<pre class="fragment"><div>00084 {
00085     WCHAR buf[<a class="code" href="../../d4/d5/conimep_8h.html#a38">MaxBufSize</a>];
00086     WCHAR name[<a class="code" href="../../d4/d5/conimep_8h.html#a38">MaxBufSize</a>];
00087     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> bufsize = <a class="code" href="../../d4/d5/conimep_8h.html#a38">MaxBufSize</a>;
00088     LONG lResult;
00089     HKEY hkLayout;
00090     <span class="keywordtype">int</span> i;
00091 
00092     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o11">LayoutName</a>[0] = TEXT(<span class="charliteral">'\0'</span>);
00093     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o12">GuideLine</a>[0] = TEXT(<span class="charliteral">'\0'</span>);
00094 
00095     <span class="keywordflow">if</span> (ImmEscape(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>, ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o4">hIMC_Current</a>, IME_ESC_IME_NAME, (LPTSTR)&amp;name) == 0)
00096     {
00097         <span class="keywordflow">if</span> (!ImmGetIMEFileName(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>, (LPTSTR)&amp;name, MaxBufSize ) )
00098         {
00099             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8/ntcftxt_8h.html#a17">GetKeyboardLayoutName</a>((LPTSTR)&amp;name) ) 
00100             {
00101                 <span class="comment">/*</span>
00102 <span class="comment">                 * quick dirty ImmIsIME</span>
00103 <span class="comment">                 */</span>
00104                 <span class="keywordflow">if</span> (name[0] != TEXT(<span class="charliteral">'E'</span>) &amp;&amp;
00105                     name[0] != TEXT(<span class="charliteral">'e'</span>))
00106                 {
00107                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00108                 }
00109 
00110                 lstrcpy( buf, KBDLAYOUT );
00111                 lstrcat( buf, KBDSEPALATER );
00112                 lstrcat( buf, name );
00113                 lResult = RegOpenKeyEx(HKEY_LOCAL_MACHINE,
00114                                        (LPCTSTR)buf,
00115                                        0,
00116                                        KEY_QUERY_VALUE | KEY_ENUMERATE_SUB_KEYS,
00117                                        &amp;hkLayout );
00118                 <span class="keywordflow">if</span> ( lResult == ERROR_SUCCESS ) {
00119                     lResult = RegQueryValueEx( hkLayout,
00120                                                KBDLAYOUTTEXT,
00121                                                NULL,
00122                                                NULL,
00123                                                (LPBYTE)ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o11">LayoutName</a>,
00124                                                &amp;bufsize );
00125                     RegCloseKey( hkLayout );
00126                     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o11">LayoutName</a>[0] != TEXT(<span class="charliteral">'\0'</span>)) {
00127                         <span class="keywordflow">for</span> (i = 0; i &lt; 8; i ++){
00128                             <span class="keywordflow">if</span> ((ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o11">LayoutName</a>[0] == <a class="code" href="../../d6/d7/country_8c.html#a13">IMECGuide</a>[i][0]) &amp;&amp;
00129                                 (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o11">LayoutName</a>[1] == <a class="code" href="../../d6/d7/country_8c.html#a13">IMECGuide</a>[i][1]) ) {
00130                                 lstrcpyn(&amp;(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o12">GuideLine</a>[0]), &amp;(IMECGuide[i][2]), IMECGuideLen+1);
00131                                 <span class="keywordflow">break</span>;
00132                             }
00133                         }
00134                     }
00135                 }
00136                 <span class="keywordflow">else</span>{
00137                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00138                 }
00139             }
00140             <span class="keywordflow">else</span>
00141             {
00142                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00143             }
00144         }
00145         <span class="keywordflow">else</span>
00146         {
00147             lstrcpy( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o11">LayoutName</a>, name );
00148         }
00149     }
00150     <span class="keywordflow">else</span>
00151     {
00152         lstrcpy( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o11">LayoutName</a>, name);
00153     }
00154 
00155     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00156 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a124" doxytag="conimep.h::GetNLSMode" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> GetNLSMode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsole</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00640">640</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00104">_CONSOLE_TABLE::dwConversion</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00105">_CONSOLE_TABLE::dwSentence</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00103">_CONSOLE_TABLE::fOpen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00159">GetOpenStatusByCodepage()</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00104">IME_CMODE_DISABLE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00103">IME_CMODE_OPEN</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01368">ImmGetConversionStatus()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00292">ImmReleaseContext()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00644 {
00645     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00646     HIMC hIMC;
00647 
00648     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(hConsole);
00649     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00650         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00651         <span class="keywordflow">return</span> 0;
00652     }
00653 
00654     hIMC = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>( hWnd ) ;
00655     <span class="keywordflow">if</span> ( hIMC == (HIMC)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> )
00656         <span class="keywordflow">return</span> <a class="code" href="../../d3/d5/conime_8h.html#a30">IME_CMODE_DISABLE</a>;
00657 
00658     <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a29">ImmGetConversionStatus</a>(hIMC,
00659                            &amp;ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a>,
00660                            &amp;ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o8">dwSentence</a>);
00661     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o6">fOpen</a> = <a class="code" href="../../d6/d7/country_8c.html#a16">GetOpenStatusByCodepage</a>( hIMC, ConTbl ) ;
00662 
00663     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hWnd, hIMC );
00664 
00665 
00666     <span class="keywordflow">return</span> ((ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o6">fOpen</a> ? <a class="code" href="../../d3/d5/conime_8h.html#a29">IME_CMODE_OPEN</a> : 0) + ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a>);
00667 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a136" doxytag="conimep.h::GetOpenStatusByCodepage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetOpenStatusByCodepage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00159">159</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00150">HKL_TO_LANGID</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00100">_CONSOLE_TABLE::hklActive</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01494">ImmGetOpenStatus()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00468">ImmIsIME()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00081">LANG_ID_JAPAN</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00082">LANG_ID_KOREA</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00083">LANG_ID_PRC</a>, and <a class="el" href="../../d5/d4/conimep_8h-source.html#l00080">LANG_ID_TAIWAN</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/consubs_8c-source.html#l00640">GetNLSMode()</a>, and <a class="el" href="../../d1/d5/consubs_8c-source.html#l00468">ImeUISetOpenStatus()</a>.
<p>
<pre class="fragment"><div>00163 {
00164     <span class="keywordflow">switch</span> ( <a class="code" href="../../d4/d5/conimep_8h.html#a50">HKL_TO_LANGID</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>))
00165     {
00166         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a43">LANG_ID_JAPAN</a>:
00167             <span class="keywordflow">return</span> <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a31">ImmGetOpenStatus</a>(hIMC);
00168             <span class="keywordflow">break</span>;
00169         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a42">LANG_ID_TAIWAN</a>:
00170         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a45">LANG_ID_PRC</a>:
00171         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a44">LANG_ID_KOREA</a>:
00172             <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/ctxtinfo_8c.html#a31">ImmGetOpenStatus</a>(hIMC)) {
00173                 <span class="keywordflow">return</span> <a class="code" href="../../d4/d1/layout_8c.html#a20">ImmIsIME</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>);
00174             }
00175             <span class="keywordflow">break</span>;
00176         <span class="keywordflow">default</span>:
00177             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00178     }
00179     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00180 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a157" doxytag="conimep.h::GetSystemLineJ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> GetSystemLineJ           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCANDIDATELIST&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCandList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>String</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>Attr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CountDispWidth</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>FocusedConsole</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>EnableCodePoint</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l00805">805</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00125">_CONSOLE_TABLE::CandMax</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00126">_CONSOLE_TABLE::CandSep</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00067">DELIMITERWIDTH</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00790">DispLenUnicode()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00129">_CONSOLE_TABLE::ImmGetProperty</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00312">IsUnicodeFullWidth()</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01182">NumString()</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, <a class="el" href="../../d5/d8/talloc_8c-source.html#l00027">String</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00184">UNICODE_COLON</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00187">UNICODE_HEXBASE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00185">UNICODE_LEFT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00186">UNICODE_RIGHT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00183">UNICODE_SLASH</a>, <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00182">UNICODE_ZERO</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00080">OpenCandidateJapan()</a>, and <a class="el" href="../../d8/d6/country2_8c-source.html#l00606">OpenCandidateKorea()</a>.
<p>
<pre class="fragment"><div>00813 {
00814     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStrLen;
00815     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwDspLen;
00816     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00817     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00818     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> SepIndex;
00819     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> SelCount;
00820     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Length;
00821     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwWholeLen;
00822     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> lfBreak = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00823     LPWSTR StrToWrite;
00824     LPSTR AttrToSel;
00825     LPWSTR lpStr;
00826     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> MultiChar;
00827     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> TempMulti;
00828 
00829     <span class="keywordflow">if</span> ((lpCandList-&gt;dwSelection &gt; lpCandList-&gt;dwCount)||
00830         (lpCandList-&gt;dwSelection &lt; 0)) {
00831         lpCandList-&gt;dwSelection  = 0;
00832     }
00833 
00834     <span class="keywordflow">for</span> ( SepIndex = FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o22">CandMax</a>; SepIndex &gt; 0; SepIndex--) {
00835         <span class="keywordflow">if</span> (lpCandList-&gt;dwSelection &gt;= FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[SepIndex])
00836             <span class="keywordflow">break</span>;
00837     }
00838     <span class="keywordflow">if</span> (SepIndex == FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o22">CandMax</a>)
00839         SepIndex = 0;
00840 
00841     <span class="keywordflow">for</span> ( i = 0; i &lt; dwLength; i++) {
00842         Attr[i] = 0x0000;
00843     }
00844     StrToWrite = <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>;
00845     AttrToSel = Attr;
00846     dwWholeLen = 0;
00847 <span class="preprocessor">#if 1</span>
00848 <span class="preprocessor"></span>    <span class="comment">// HACK HACK ntbug #69699</span>
00849     <span class="comment">// MS-IME97 &amp; MS-IME97A does not return correct value for IME_PROP_CANDLIST_START_FROM_1.</span>
00850     <span class="comment">// These always return its starting from 0.</span>
00851     <span class="comment">// Currently there is not IME starting from 0. So we hack.</span>
00852     <span class="comment">// Actually IME should be fixed.</span>
00853     SelCount = 1;
00854 <span class="preprocessor">#else</span>
00855 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o26">ImmGetProperty</a> &amp; IME_PROP_CANDLIST_START_FROM_1)
00856         SelCount = 1;
00857     <span class="keywordflow">else</span>
00858         SelCount = 0;
00859 <span class="preprocessor">#endif</span>
00860 <span class="preprocessor"></span>
00861     <span class="keywordflow">if</span> (EnableCodePoint){
00862         lpStr = (LPWSTR)((LPSTR)lpCandList + lpCandList-&gt;dwOffset[lpCandList-&gt;dwSelection]);
00863         WideCharToMultiByte(CP_OEMCP, 0, lpStr, 1, (PBYTE)&amp;TempMulti, 2, NULL, NULL);
00864         *StrToWrite = <a class="code" href="../../d4/d5/conimep_8h.html#a61">UNICODE_LEFT</a>;
00865         StrToWrite++;
00866         MultiChar = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(<a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(TempMulti)| <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(TempMulti)&lt;&lt;8);
00867         <span class="keywordflow">for</span> (i = 0; i &lt; 4; i++) {
00868             j = (MultiChar &amp; 0xf000 ) &gt;&gt; 12;
00869             <span class="keywordflow">if</span> ( j &lt;= 9)
00870                 *StrToWrite = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(j + <a class="code" href="../../d4/d5/conimep_8h.html#a58">UNICODE_ZERO</a>);
00871             <span class="keywordflow">else</span>
00872                 *StrToWrite = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(j + <a class="code" href="../../d4/d5/conimep_8h.html#a63">UNICODE_HEXBASE</a>);
00873             StrToWrite++;
00874             MultiChar = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(MultiChar &lt;&lt; 4);
00875         }
00876         *StrToWrite = <a class="code" href="../../d4/d5/conimep_8h.html#a62">UNICODE_RIGHT</a>;
00877         StrToWrite++;
00878         *StrToWrite = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
00879         StrToWrite++;
00880         AttrToSel += CountDispWidth;
00881         dwWholeLen += CountDispWidth;
00882         CountDispWidth = 0;
00883     }
00884 
00885     <span class="keywordflow">for</span> (i = FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[SepIndex]; i &lt; FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[SepIndex+1]; i++) {
00886         <span class="comment">//</span>
00887         <span class="comment">// check each offset value is not over than buffer size.</span>
00888         <span class="comment">//</span>
00889         <span class="keywordflow">if</span> (lpCandList-&gt;dwOffset[i] &gt;= lpCandList-&gt;dwSize)
00890             <span class="keywordflow">break</span>;
00891 
00892         lpStr = (LPWSTR)((LPSTR)lpCandList + lpCandList-&gt;dwOffset[ i ]);
00893         dwStrLen = lstrlenW( lpStr );
00894         dwDspLen = <a class="code" href="../../d7/d7/country2_8c.html#a5">DispLenUnicode</a>( lpStr );
00895 
00896         <span class="keywordflow">if</span> ( dwWholeLen + dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>  &gt; dwLength - CountDispWidth ){
00897             Length = 0;
00898             lfBreak = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00899             <span class="keywordflow">for</span> (j = 0; j &lt; dwStrLen; j++ ){
00900                 Length += <a class="code" href="../../d0/d6/consubs_8c.html#a5">IsUnicodeFullWidth</a>(lpStr[j]) ? 2 : 1;
00901                 <span class="keywordflow">if</span> (dwWholeLen + Length &gt; dwLength - (CountDispWidth + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>)){
00902                     dwStrLen = j-1;
00903                     dwDspLen = Length - <a class="code" href="../../d0/d6/consubs_8c.html#a5">IsUnicodeFullWidth</a>(lpStr[j]) ? 2 : 1;
00904                     <span class="keywordflow">break</span>;
00905                 }
00906             }
00907         }
00908         <span class="keywordflow">if</span> ((dwWholeLen + dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a> + CountDispWidth ) &lt;= dwLength )      <span class="comment">// if minus value</span>
00909             dwWholeLen += (dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>);
00910         <span class="keywordflow">else</span> {
00911             <span class="keywordflow">break</span>;
00912         }
00913 
00914         <span class="keywordflow">if</span> (i == lpCandList-&gt;dwSelection) {
00915             <span class="keywordflow">for</span> (j = 0; j &lt; dwStrLen+2; j++)
00916                 *(AttrToSel+j) = 1;
00917         }
00918         *StrToWrite = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(SelCount + <a class="code" href="../../d4/d5/conimep_8h.html#a58">UNICODE_ZERO</a>);
00919         StrToWrite++;
00920         *StrToWrite = <a class="code" href="../../d4/d5/conimep_8h.html#a60">UNICODE_COLON</a>;
00921         StrToWrite++;
00922         CopyMemory(StrToWrite, lpStr, dwStrLen * <span class="keyword">sizeof</span>(WCHAR));
00923         StrToWrite += dwStrLen;
00924         *StrToWrite = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
00925         StrToWrite++;
00926         AttrToSel += dwStrLen+<a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;
00927         SelCount++;
00928         <span class="keywordflow">if</span> (lfBreak)
00929             <span class="keywordflow">break</span>;
00930     }
00931     *StrToWrite = 0;
00932     dwDspLen = <a class="code" href="../../d7/d7/country2_8c.html#a5">DispLenUnicode</a>( String );
00933     <span class="keywordflow">if</span> (dwDspLen &gt; (dwLength - CountDispWidth))
00934         <span class="keywordflow">return</span> SepIndex;
00935 
00936     <span class="keywordflow">if</span> (EnableCodePoint){
00937         <span class="keywordflow">for</span> (i = dwDspLen; i &lt; dwLength; i++) {
00938             *StrToWrite = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
00939             StrToWrite++;
00940         }
00941     }
00942     <span class="keywordflow">else</span> {
00943         <span class="keywordflow">for</span> (i = dwDspLen; i &lt; (dwLength - CountDispWidth); i++) {
00944             *StrToWrite = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
00945             StrToWrite++;
00946         }
00947 
00948         i = (CountDispWidth-1) / 2;
00949         <a class="code" href="../../d7/d7/country2_8c.html#a9">NumString</a>(StrToWrite,lpCandList-&gt;dwSelection+1,i);
00950         StrToWrite+=i;
00951         *StrToWrite = <a class="code" href="../../d4/d5/conimep_8h.html#a59">UNICODE_SLASH</a>;
00952         StrToWrite++;
00953         <a class="code" href="../../d7/d7/country2_8c.html#a9">NumString</a>(StrToWrite,lpCandList-&gt;dwCount, i);
00954         StrToWrite+=i;
00955     }
00956     *StrToWrite = 0;
00957 
00958     <span class="keywordflow">return</span> SepIndex;
00959 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a159" doxytag="conimep.h::GetSystemLineP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> GetSystemLineP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCANDIDATELIST&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCandList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>String</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>Attr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CountDispWidth</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>FocusedConsole</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l01071">1071</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00125">_CONSOLE_TABLE::CandMax</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00126">_CONSOLE_TABLE::CandSep</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00067">DELIMITERWIDTH</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00790">DispLenUnicode()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00129">_CONSOLE_TABLE::ImmGetProperty</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00312">IsUnicodeFullWidth()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01182">NumString()</a>, <a class="el" href="../../d5/d8/talloc_8c-source.html#l00027">String</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00184">UNICODE_COLON</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00183">UNICODE_SLASH</a>, <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00182">UNICODE_ZERO</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00433">OpenCandidatePRC()</a>.
<p>
<pre class="fragment"><div>01079 {
01080     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStrLen;
01081     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwDspLen;
01082     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
01083     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
01084     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> SepIndex;
01085     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> SelCount;
01086     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Length;
01087     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwWholeLen;
01088     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> lfBreak = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01089     LPWSTR StrToWrite;
01090     LPSTR AttrToSel;
01091     LPWSTR lpStr;
01092     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> MultiChar;
01093     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> TempMulti;
01094 
01095     <span class="keywordflow">if</span> ((lpCandList-&gt;dwSelection &gt; lpCandList-&gt;dwCount)||
01096         (lpCandList-&gt;dwSelection &lt; 0)) {
01097         lpCandList-&gt;dwSelection  = 0;
01098     }
01099 
01100     <span class="keywordflow">for</span> ( SepIndex = FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o22">CandMax</a>; SepIndex &gt; 0; SepIndex--) {
01101         <span class="keywordflow">if</span> (lpCandList-&gt;dwSelection &gt;= FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[SepIndex])
01102             <span class="keywordflow">break</span>;
01103     }
01104     <span class="keywordflow">if</span> (SepIndex == FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o22">CandMax</a>)
01105         SepIndex = 0;
01106 
01107     <span class="keywordflow">for</span> ( i = 0; i &lt; dwLength; i++) {
01108         Attr[i] = 0x0000;
01109     }
01110     StrToWrite = <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>;
01111     AttrToSel = Attr;
01112     dwWholeLen = 0;
01113     <span class="keywordflow">if</span> (FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o26">ImmGetProperty</a> &amp; IME_PROP_CANDLIST_START_FROM_1)
01114         SelCount = 1;
01115     <span class="keywordflow">else</span>
01116         SelCount = 0;
01117 
01118     <span class="keywordflow">for</span> (i = FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[SepIndex]; i &lt; FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[SepIndex+1]; i++) {
01119         lpStr = (LPWSTR)((LPSTR)lpCandList + lpCandList-&gt;dwOffset[ i ]);
01120         dwStrLen = lstrlenW( lpStr );
01121         dwDspLen = <a class="code" href="../../d7/d7/country2_8c.html#a5">DispLenUnicode</a>( lpStr );
01122 
01123         <span class="keywordflow">if</span> ( dwWholeLen + dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>  &gt; dwLength - CountDispWidth ){
01124             Length = 0;
01125             lfBreak = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01126             <span class="keywordflow">for</span> (j = 0; j &lt; dwStrLen; j++ ){
01127                 Length += <a class="code" href="../../d0/d6/consubs_8c.html#a5">IsUnicodeFullWidth</a>(lpStr[j]) ? 2 : 1;
01128                 <span class="keywordflow">if</span> (dwWholeLen + Length &gt; dwLength - (CountDispWidth + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>)){
01129                     dwStrLen = j-1;
01130                     dwDspLen = Length - <a class="code" href="../../d0/d6/consubs_8c.html#a5">IsUnicodeFullWidth</a>(lpStr[j]) ? 2 : 1;
01131                     <span class="keywordflow">break</span>;
01132                 }
01133             }
01134         }
01135         <span class="keywordflow">if</span> ((dwWholeLen + dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a> + CountDispWidth ) &lt;= dwLength )      <span class="comment">// if minus value</span>
01136             dwWholeLen += (dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>);
01137         <span class="keywordflow">else</span> {
01138             <span class="keywordflow">break</span>;
01139         }
01140 
01141         <span class="keywordflow">if</span> (i == lpCandList-&gt;dwSelection) {
01142             <span class="keywordflow">for</span> (j = 0; j &lt; dwStrLen+2; j++)
01143                 *(AttrToSel+j) = 1;
01144         }
01145         *StrToWrite = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(SelCount + <a class="code" href="../../d4/d5/conimep_8h.html#a58">UNICODE_ZERO</a>);
01146         StrToWrite++;
01147         *StrToWrite = <a class="code" href="../../d4/d5/conimep_8h.html#a60">UNICODE_COLON</a>;
01148         StrToWrite++;
01149         CopyMemory(StrToWrite, lpStr, dwStrLen * <span class="keyword">sizeof</span>(WCHAR));
01150         StrToWrite += dwStrLen;
01151         *StrToWrite = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
01152         StrToWrite++;
01153         AttrToSel += dwStrLen+<a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;
01154         SelCount++;
01155         <span class="keywordflow">if</span> (lfBreak)
01156             <span class="keywordflow">break</span>;
01157     }
01158     *StrToWrite = 0;
01159     dwDspLen = <a class="code" href="../../d7/d7/country2_8c.html#a5">DispLenUnicode</a>( String );
01160     <span class="keywordflow">if</span> (dwDspLen &gt; (dwLength - CountDispWidth))
01161         <span class="keywordflow">return</span> SepIndex;
01162 
01163 <span class="preprocessor">#if defined (CANDCOUNTPRC) //for wider candidate list space v-hirshi Oct.16.1996</span>
01164 <span class="preprocessor"></span>    *StrToWrite = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
01165     StrToWrite++;
01166 
01167     i = (CountDispWidth-1) / 2;
01168     <a class="code" href="../../d7/d7/country2_8c.html#a9">NumString</a>(StrToWrite,lpCandList-&gt;dwSelection+1,i);
01169     StrToWrite+=i;
01170     *StrToWrite = <a class="code" href="../../d4/d5/conimep_8h.html#a59">UNICODE_SLASH</a>;
01171     StrToWrite++;
01172     <a class="code" href="../../d7/d7/country2_8c.html#a9">NumString</a>(StrToWrite,lpCandList-&gt;dwCount, i);
01173     StrToWrite+=i;
01174 <span class="preprocessor">#endif</span>
01175 <span class="preprocessor"></span>
01176     *StrToWrite = 0;
01177 
01178     <span class="keywordflow">return</span> SepIndex;
01179 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a158" doxytag="conimep.h::GetSystemLineT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> GetSystemLineT           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCANDIDATELIST&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCandList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>String</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>Attr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CountDispWidth</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>FocusedConsole</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l00962">962</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00125">_CONSOLE_TABLE::CandMax</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00126">_CONSOLE_TABLE::CandSep</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00067">DELIMITERWIDTH</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00790">DispLenUnicode()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00129">_CONSOLE_TABLE::ImmGetProperty</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00312">IsUnicodeFullWidth()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01182">NumString()</a>, <a class="el" href="../../d5/d8/talloc_8c-source.html#l00027">String</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00184">UNICODE_COLON</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00183">UNICODE_SLASH</a>, <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00182">UNICODE_ZERO</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00264">OpenCandidateTaiwan()</a>.
<p>
<pre class="fragment"><div>00970 {
00971     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStrLen;
00972     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwDspLen;
00973     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00974     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00975     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> SepIndex;
00976     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> SelCount;
00977     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Length;
00978     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwWholeLen;
00979     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> lfBreak = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00980     LPWSTR StrToWrite;
00981     LPSTR AttrToSel;
00982     LPWSTR lpStr;
00983     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> MultiChar;
00984     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> TempMulti;
00985 
00986     <span class="keywordflow">if</span> ((lpCandList-&gt;dwSelection &gt; lpCandList-&gt;dwCount)||
00987         (lpCandList-&gt;dwSelection &lt; 0)) {
00988         lpCandList-&gt;dwSelection  = 0;
00989     }
00990 
00991     <span class="keywordflow">for</span> ( SepIndex = FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o22">CandMax</a>; SepIndex &gt; 0; SepIndex--) {
00992         <span class="keywordflow">if</span> (lpCandList-&gt;dwSelection &gt;= FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[SepIndex])
00993             <span class="keywordflow">break</span>;
00994     }
00995     <span class="keywordflow">if</span> (SepIndex == FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o22">CandMax</a>)
00996         SepIndex = 0;
00997 
00998     <span class="keywordflow">for</span> ( i = 0; i &lt; dwLength; i++) {
00999         Attr[i] = 0x0000;
01000     }
01001     StrToWrite = <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a>;
01002     AttrToSel = Attr;
01003     dwWholeLen = 0;
01004     <span class="keywordflow">if</span> (FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o26">ImmGetProperty</a> &amp; IME_PROP_CANDLIST_START_FROM_1)
01005         SelCount = 1;
01006     <span class="keywordflow">else</span>
01007         SelCount = 0;
01008 
01009 
01010     <span class="keywordflow">for</span> (i = FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[SepIndex]; i &lt; FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[SepIndex+1]; i++) {
01011         lpStr = (LPWSTR)((LPSTR)lpCandList + lpCandList-&gt;dwOffset[ i ]);
01012         dwStrLen = lstrlenW( lpStr );
01013         dwDspLen = <a class="code" href="../../d7/d7/country2_8c.html#a5">DispLenUnicode</a>( lpStr );
01014 
01015         <span class="keywordflow">if</span> ( dwWholeLen + dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>  &gt; dwLength - CountDispWidth ){
01016             Length = 0;
01017             lfBreak = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01018             <span class="keywordflow">for</span> (j = 0; j &lt; dwStrLen; j++ ){
01019                 Length += <a class="code" href="../../d0/d6/consubs_8c.html#a5">IsUnicodeFullWidth</a>(lpStr[j]) ? 2 : 1;
01020                 <span class="keywordflow">if</span> (dwWholeLen + Length &gt; dwLength - (CountDispWidth + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>)){
01021                     dwStrLen = j-1;
01022                     dwDspLen = Length - <a class="code" href="../../d0/d6/consubs_8c.html#a5">IsUnicodeFullWidth</a>(lpStr[j]) ? 2 : 1;
01023                     <span class="keywordflow">break</span>;
01024                 }
01025             }
01026         }
01027         <span class="keywordflow">if</span> ((dwWholeLen + dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a> + CountDispWidth ) &lt;= dwLength )      <span class="comment">// if minus value</span>
01028             dwWholeLen += (dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>);
01029         <span class="keywordflow">else</span> {
01030             <span class="keywordflow">break</span>;
01031         }
01032 
01033         <span class="keywordflow">if</span> (i == lpCandList-&gt;dwSelection) {
01034             <span class="keywordflow">for</span> (j = 0; j &lt; dwStrLen+2; j++)
01035                 *(AttrToSel+j) = 1;
01036         }
01037         *StrToWrite = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(SelCount + <a class="code" href="../../d4/d5/conimep_8h.html#a58">UNICODE_ZERO</a>);
01038         StrToWrite++;
01039         *StrToWrite = <a class="code" href="../../d4/d5/conimep_8h.html#a60">UNICODE_COLON</a>;
01040         StrToWrite++;
01041         CopyMemory(StrToWrite, lpStr, dwStrLen * <span class="keyword">sizeof</span>(WCHAR));
01042         StrToWrite += dwStrLen;
01043         *StrToWrite = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
01044         StrToWrite++;
01045         AttrToSel += dwStrLen+<a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;
01046         SelCount++;
01047         <span class="keywordflow">if</span> (lfBreak)
01048             <span class="keywordflow">break</span>;
01049     }
01050     *StrToWrite = 0;
01051     dwDspLen = <a class="code" href="../../d7/d7/country2_8c.html#a5">DispLenUnicode</a>( String );
01052     <span class="keywordflow">if</span> (dwDspLen &gt; (dwLength - CountDispWidth))
01053         <span class="keywordflow">return</span> SepIndex;
01054 
01055     *StrToWrite = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
01056     StrToWrite++;
01057 
01058     i = (CountDispWidth-1) / 2;
01059     <a class="code" href="../../d7/d7/country2_8c.html#a9">NumString</a>(StrToWrite,lpCandList-&gt;dwSelection+1,i);
01060     StrToWrite+=i;
01061     *StrToWrite = <a class="code" href="../../d4/d5/conimep_8h.html#a59">UNICODE_SLASH</a>;
01062     StrToWrite++;
01063     <a class="code" href="../../d7/d7/country2_8c.html#a9">NumString</a>(StrToWrite,lpCandList-&gt;dwCount, i);
01064     StrToWrite+=i;
01065     *StrToWrite = 0;
01066 
01067     <span class="keywordflow">return</span> SepIndex;
01068 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a99" doxytag="conimep.h::GrowConsoleTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GrowConsoleTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00742">742</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d5/d4/conimep_8h-source.html#l00047">CONSOLE_CONSOLE_TABLE_INCREMENT</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00029">ConsoleTable</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00030">NumberOfConsoleTable</a>, <a class="el" href="../../d4/d5/conimep_8h.html#a91">PCONSOLE_TABLE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00664">InsertConsole()</a>.
<p>
<pre class="fragment"><div>00745 {
00746     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> *NewTable;
00747     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> *OldTable;
00748     ULONG MaxConsoleTable;
00749 
00750     MaxConsoleTable = <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a6">NumberOfConsoleTable</a> + <a class="code" href="../../d4/d5/conimep_8h.html#a13">CONSOLE_CONSOLE_TABLE_INCREMENT</a>;
00751     NewTable = (<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> *)LocalAlloc(LPTR, MaxConsoleTable * <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>));
00752     <span class="keywordflow">if</span> (NewTable == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00753         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00754     }
00755     CopyMemory(NewTable, ConsoleTable, NumberOfConsoleTable * <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>));
00756 
00757     OldTable = <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a5">ConsoleTable</a>;
00758     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a5">ConsoleTable</a> = NewTable;
00759     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a6">NumberOfConsoleTable</a> = MaxConsoleTable;
00760 
00761     LocalFree(OldTable);
00762 
00763     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00764 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a128" doxytag="conimep.h::ImeOpenClose" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ImeOpenClose           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d9/imefull_8c-source.html#l00030">30</a> of file <a class="el" href="../../d1/d9/imefull_8c-source.html">imefull.c</a>.
<p>
References <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00292">ImmReleaseContext()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01525">ImmSetOpenStatus()</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
<pre class="fragment"><div>00031 {
00032     HIMC            hIMC;
00033 
00034     <span class="comment">//</span>
00035     <span class="comment">// If fFlag is true then open IME; otherwise close it.</span>
00036     <span class="comment">//</span>
00037 
00038     <span class="keywordflow">if</span> ( !( hIMC = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>( hWnd ) ) )
00039         <span class="keywordflow">return</span>;
00040 
00041     <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a32">ImmSetOpenStatus</a>( hIMC, fFlag );
00042 
00043     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hWnd, hIMC );
00044 
00045 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a127" doxytag="conimep.h::ImeSysPropertyWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImeSysPropertyWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00747">747</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00062">CI_CONIMEPROPERTYINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00752 {
00753     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00754     COPYDATASTRUCT CopyData;
00755 
00756     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
00757     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00758         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00759         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00760     }
00761 
00762     CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a8">CI_CONIMEPROPERTYINFO</a>;
00763     CopyData.cbData = <span class="keyword">sizeof</span>(WPARAM);
00764     CopyData.lpData = &amp;wParam;
00765 
00766     <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00767                            (WPARAM)hWnd,
00768                            (LPARAM)&amp;CopyData
00769                           );
00770 
00771     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00772 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a120" doxytag="conimep.h::ImeUIChangeCandidate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImeUIChangeCandidate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00458">458</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d8/d6/country2_8c-source.html#l00024">ImeUIOpenCandidate()</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/consubs_8c-source.html#l00261">ImeUINotify()</a>.
<p>
<pre class="fragment"><div>00462 {
00463     <span class="keywordflow">return</span> <a class="code" href="../../d7/d7/country2_8c.html#a0">ImeUIOpenCandidate</a>( hwnd, lParam, FALSE) ;
00464 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a161" doxytag="conimep.h::ImeUICloseCandidate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImeUICloseCandidate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l01204">1204</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d8/d6/country2_8c-source.html#l01253">CloseCandidateJapan()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01367">CloseCandidateKorea()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01326">CloseCandidatePRC()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01285">CloseCandidateTaiwan()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00119">_CONSOLE_TABLE::fInCandidate</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00150">HKL_TO_LANGID</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00100">_CONSOLE_TABLE::hklActive</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00292">ImmReleaseContext()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00081">LANG_ID_JAPAN</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00082">LANG_ID_KOREA</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00083">LANG_ID_PRC</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00080">LANG_ID_TAIWAN</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/consubs_8c-source.html#l00261">ImeUINotify()</a>.
<p>
<pre class="fragment"><div>01208 {
01209     HIMC  hIMC;
01210     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
01211 
01212     <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Get IMN_CLOSECANDIDATE Message\n"</span>));
01213 
01214     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
01215     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01216         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
01217         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01218     }
01219 
01220     hIMC = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>( hwnd );
01221     <span class="keywordflow">if</span> ( hIMC == 0 )
01222         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01223 
01224     <span class="comment">//</span>
01225     <span class="comment">// Reset fInCandidate variables.</span>
01226     <span class="comment">//</span>
01227     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o16">fInCandidate</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01228 
01229     <span class="keywordflow">switch</span> ( <a class="code" href="../../d4/d5/conimep_8h.html#a50">HKL_TO_LANGID</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>))
01230     {
01231         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a43">LANG_ID_JAPAN</a>:
01232             <a class="code" href="../../d7/d7/country2_8c.html#a11">CloseCandidateJapan</a>(hwnd, hIMC, ConTbl, CandList );
01233             <span class="keywordflow">break</span>;
01234         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a42">LANG_ID_TAIWAN</a>:
01235             <a class="code" href="../../d7/d7/country2_8c.html#a12">CloseCandidateTaiwan</a>(hwnd, hIMC, ConTbl, CandList );
01236             <span class="keywordflow">break</span>;
01237         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a45">LANG_ID_PRC</a>:
01238             <a class="code" href="../../d7/d7/country2_8c.html#a13">CloseCandidatePRC</a>(hwnd, hIMC, ConTbl, CandList );
01239             <span class="keywordflow">break</span>;
01240         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a44">LANG_ID_KOREA</a>:
01241             <a class="code" href="../../d7/d7/country2_8c.html#a14">CloseCandidateKorea</a>(hwnd, hIMC, ConTbl, CandList );
01242             <span class="keywordflow">break</span>;
01243         <span class="keywordflow">default</span>:
01244             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01245             <span class="keywordflow">break</span>;
01246     }
01247     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
01248 
01249     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01250 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a114" doxytag="conimep.h::ImeUIComposition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ImeUIComposition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>CompFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00160">160</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00057">FIRSTCOL</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00032">GetCompositionStr()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00055">MAXCOL</a>, and <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00161 {
00162 
00163     <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: WM_IME_COMPOSITION %08x %08x\n"</span>,CompChar,CompFlag));
00164 
00165 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00166 <span class="preprocessor"></span>    {
00167         <span class="keywordtype">int</span> i ;
00168         <span class="keywordflow">for</span> (i = <a class="code" href="../../d4/d5/conimep_8h.html#a22">FIRSTCOL</a> ; i &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a20">MAXCOL</a> ; i++) {
00169             ConvertLine[i] = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a> ;
00170             ConvertLineAtr[i] = 0 ;
00171         }
00172         xPos = <a class="code" href="../../d4/d5/conimep_8h.html#a22">FIRSTCOL</a>;
00173         xPosLast = <a class="code" href="../../d4/d5/conimep_8h.html#a22">FIRSTCOL</a>;
00174     }
00175 <span class="preprocessor">#endif</span>
00176 <span class="preprocessor"></span>
00177     <span class="keywordflow">if</span> ( CompFlag == 0 ) {
00178         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"                           None\n"</span>));
00179         <a class="code" href="../../d8/d7/country3_8c.html#a0">GetCompositionStr</a>( hwnd, CompFlag, CompChar);
00180     }
00181     <span class="keywordflow">if</span> ( CompFlag &amp; GCS_RESULTSTR ) {
00182         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"                           GCS_RESULTSTR\n"</span>));
00183         <a class="code" href="../../d8/d7/country3_8c.html#a0">GetCompositionStr</a>( hwnd, ( CompFlag &amp; GCS_RESULTSTR ), CompChar );
00184     }
00185     <span class="keywordflow">if</span> ( CompFlag &amp; GCS_COMPSTR ) {
00186         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"                           GCS_COMPSTR\n"</span>));
00187         <a class="code" href="../../d8/d7/country3_8c.html#a0">GetCompositionStr</a>( hwnd, ( CompFlag &amp; (GCS_COMPSTR|GCS_COMPATTR)), CompChar);
00188     }
00189     <span class="keywordflow">if</span> ( CompFlag &amp; CS_INSERTCHAR ) {
00190         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"                           CS_INSERTCHAR\n"</span>));
00191         <a class="code" href="../../d8/d7/country3_8c.html#a0">GetCompositionStr</a>( hwnd, ( CompFlag &amp; (CS_INSERTCHAR|GCS_COMPATTR)), CompChar);
00192     }
00193     <span class="keywordflow">if</span> ( CompFlag &amp; CS_NOMOVECARET ) {
00194         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"                           CS_NOMOVECARET\n"</span>));
00195         <a class="code" href="../../d8/d7/country3_8c.html#a0">GetCompositionStr</a>( hwnd, ( CompFlag &amp; (CS_NOMOVECARET|GCS_COMPATTR)), CompChar);
00196     }
00197 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a113" doxytag="conimep.h::ImeUIEndComposition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ImeUIEndComposition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00108">108</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00113">_CONSOLE_TABLE::fInComposition</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00057">FIRSTCOL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00114">_CONSOLE_TABLE::lpCompStrMem</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00055">MAXCOL</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00109 {
00110     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00111 
00112     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
00113     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00114         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00115         <span class="keywordflow">return</span>;
00116     }
00117 
00118     <span class="comment">//</span>
00119     <span class="comment">// Reset fInComposition variables.</span>
00120     <span class="comment">//</span>
00121     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o13">fInComposition</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00122 
00123     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>)
00124         LocalFree( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> );
00125     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ;
00126 
00127 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00128 <span class="preprocessor"></span>    {
00129         <span class="keywordtype">int</span> i ;
00130         <span class="comment">//</span>
00131         <span class="comment">// Reset the length of composition string to zero.</span>
00132         <span class="comment">//</span>
00133         <span class="keywordflow">for</span> (i = <a class="code" href="../../d4/d5/conimep_8h.html#a22">FIRSTCOL</a> ; i &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a20">MAXCOL</a> ; i++) {
00134             ConvertLine[i] = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a> ;
00135             ConvertLineAtr[i] = 0 ;
00136         }
00137     }
00138 <span class="preprocessor">#endif</span>
00139 <span class="preprocessor"></span><span class="preprocessor">#ifdef DEBUG_INFO</span>
00140 <span class="preprocessor"></span>    xPos = <a class="code" href="../../d4/d5/conimep_8h.html#a22">FIRSTCOL</a>;
00141     xPosLast = <a class="code" href="../../d4/d5/conimep_8h.html#a22">FIRSTCOL</a>;
00142     HideCaret( hwnd );
00143     DisplayConvInformation( hwnd ) ;
00144     ResetCaret( hwnd );
00145 <span class="preprocessor">#endif</span>
00146 <span class="preprocessor"></span>}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a123" doxytag="conimep.h::ImeUIGuideLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImeUIGuideLine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00576">576</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00060">CI_CONIMESYSINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00292">ImmReleaseContext()</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00031">_CONIME_UIMESSAGE::String</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/consubs_8c-source.html#l00261">ImeUINotify()</a>.
<p>
<pre class="fragment"><div>00579 {
00580     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00581     HIMC        hIMC ;                   <span class="comment">// Input context handle.</span>
00582     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       Level ;
00583     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> ;
00584     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       Length ;
00585     <a class="code" href="../../d0/d9/struct__CONIME__UIMESSAGE.html">LPCONIME_UIMESSAGE</a> GuideLine ;
00586     COPYDATASTRUCT CopyData ;
00587 
00588     <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Get IMN_GUIDELINE Message "</span>));
00589 
00590     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
00591     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00592         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00593         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00594     }
00595 
00596     hIMC = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>( hwnd ) ;
00597     <span class="keywordflow">if</span> ( hIMC == 0 )
00598         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00599 
00600     Level = ImmGetGuideLine(hIMC, GGL_LEVEL, NULL, 0) ;
00601     <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> = ImmGetGuideLine(hIMC, GGL_INDEX, NULL, 0) ;
00602     Length = ImmGetGuideLine(hIMC, GGL_STRING, NULL, 0) ;
00603     <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"Level=%d Index=%d Length=%d"</span>,Level,Index,Length));
00604     <span class="keywordflow">if</span> (Length == 0) {
00605         CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a6">CI_CONIMESYSINFO</a> ;
00606         CopyData.cbData = Length ;
00607         CopyData.lpData = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ;
00608 
00609         <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00610                                (WPARAM)hwnd,
00611                                (LPARAM)&amp;CopyData
00612                               ) ;
00613     }
00614     <span class="keywordflow">else</span>{
00615         GuideLine = (<a class="code" href="../../d0/d9/struct__CONIME__UIMESSAGE.html">LPCONIME_UIMESSAGE</a>)LocalAlloc(LPTR, Length + <span class="keyword">sizeof</span>(WCHAR)) ;
00616         <span class="keywordflow">if</span> (GuideLine == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00617             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00618             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00619         }
00620 
00621         CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a6">CI_CONIMESYSINFO</a> ;
00622         CopyData.cbData = Length + <span class="keyword">sizeof</span>(WCHAR) ;
00623         CopyData.lpData = GuideLine ;
00624         Length = ImmGetGuideLine(hIMC, GGL_STRING, GuideLine-&gt;<a class="code" href="../../d0/d9/struct__CONIME__UIMESSAGE.html#o0">String</a>, Length) ;
00625 
00626         <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00627                                (WPARAM)hwnd,
00628                                (LPARAM)&amp;CopyData
00629                               ) ;
00630 
00631         LocalFree( GuideLine ) ;
00632     }
00633     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00634     <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"\n"</span>));
00635 
00636     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> ;
00637 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a137" doxytag="conimep.h::ImeUIMakeInfoString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImeUIMakeInfoString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpModeInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00183">183</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00150">HKL_TO_LANGID</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00100">_CONSOLE_TABLE::hklActive</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00081">LANG_ID_JAPAN</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00082">LANG_ID_KOREA</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00083">LANG_ID_PRC</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00080">LANG_ID_TAIWAN</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00209">MakeInfoStringJapan()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00744">MakeInfoStringKorea()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00525">MakeInfoStringPRC()</a>, and <a class="el" href="../../d7/d6/country_8c-source.html#l00298">MakeInfoStringTaiwan()</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01094">ConImeInputLangchange()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00406">ImeUIOpenStatusWindow()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00522">ImeUISetConversionMode()</a>, and <a class="el" href="../../d1/d5/consubs_8c-source.html#l00468">ImeUISetOpenStatus()</a>.
<p>
<pre class="fragment"><div>00187 {
00188 
00189     <span class="keywordflow">switch</span> ( <a class="code" href="../../d4/d5/conimep_8h.html#a50">HKL_TO_LANGID</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>))
00190     {
00191         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a43">LANG_ID_JAPAN</a>:
00192             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/country_8c.html#a18">MakeInfoStringJapan</a>(ConTbl, lpModeInfo);
00193             <span class="keywordflow">break</span>;
00194         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a42">LANG_ID_TAIWAN</a>:
00195             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/country_8c.html#a19">MakeInfoStringTaiwan</a>(ConTbl, lpModeInfo);
00196             <span class="keywordflow">break</span>;
00197         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a45">LANG_ID_PRC</a>:
00198             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/country_8c.html#a25">MakeInfoStringPRC</a>(ConTbl, lpModeInfo);
00199             <span class="keywordflow">break</span>;
00200         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a44">LANG_ID_KOREA</a>:
00201             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/country_8c.html#a30">MakeInfoStringKorea</a>(ConTbl, lpModeInfo);
00202             <span class="keywordflow">break</span>;
00203         <span class="keywordflow">default</span>:
00204             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00205     }
00206 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a117" doxytag="conimep.h::ImeUINotify" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImeUINotify           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00261">261</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00458">ImeUIChangeCandidate()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01204">ImeUICloseCandidate()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00576">ImeUIGuideLine()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00024">ImeUIOpenCandidate()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00406">ImeUIOpenStatusWindow()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00522">ImeUISetConversionMode()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00468">ImeUISetOpenStatus()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00262 {
00263     <span class="keywordflow">switch</span> (wParam )
00264     {
00265         <span class="keywordflow">case</span> IMN_OPENSTATUSWINDOW:
00266             <a class="code" href="../../d0/d6/consubs_8c.html#a6">ImeUIOpenStatusWindow</a>(hwnd) ;
00267             <span class="keywordflow">break</span>;
00268         <span class="keywordflow">case</span> IMN_CHANGECANDIDATE:
00269             <a class="code" href="../../d0/d6/consubs_8c.html#a7">ImeUIChangeCandidate</a>( hwnd, (DWORD)lParam );
00270             <span class="keywordflow">break</span>;
00271         <span class="keywordflow">case</span> IMN_CLOSECANDIDATE:
00272             <a class="code" href="../../d7/d7/country2_8c.html#a10">ImeUICloseCandidate</a>( hwnd, (DWORD)lParam );
00273             <span class="keywordflow">break</span>;
00274         <span class="keywordflow">case</span> IMN_OPENCANDIDATE:
00275             <a class="code" href="../../d7/d7/country2_8c.html#a0">ImeUIOpenCandidate</a>( hwnd, (DWORD)lParam, TRUE);
00276             <span class="keywordflow">break</span>;
00277         <span class="keywordflow">case</span> IMN_SETCONVERSIONMODE:
00278             <a class="code" href="../../d0/d6/consubs_8c.html#a9">ImeUISetConversionMode</a>(hwnd) ;
00279             <span class="comment">// IMN_SETCONVERSIONMODE should be pass to DefWindowProc</span>
00280             <span class="comment">// becuase ImeNotifyHandler in User32 does notify to shell and keyboard.</span>
00281             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00282         <span class="keywordflow">case</span> IMN_SETOPENSTATUS:
00283             <a class="code" href="../../d0/d6/consubs_8c.html#a8">ImeUISetOpenStatus</a>( hwnd );
00284             <span class="comment">// IMN_SETOPENSTATUS should be pass to DefWindowProc</span>
00285             <span class="comment">// becuase ImeNotifyHandler in User32 does notify to shell and keyboard.</span>
00286             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00287         <span class="keywordflow">case</span> IMN_GUIDELINE:
00288             <a class="code" href="../../d0/d6/consubs_8c.html#a10">ImeUIGuideLine</a>(hwnd) ;
00289             <span class="keywordflow">break</span>;
00290         <span class="keywordflow">default</span>:
00291             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00292 
00293     }
00294     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00295 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a151" doxytag="conimep.h::ImeUIOpenCandidate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImeUIOpenCandidate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>OpenFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l00024">24</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00119">_CONSOLE_TABLE::fInCandidate</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00128">_CONSOLE_TABLE::fNestCandidate</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00150">HKL_TO_LANGID</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00100">_CONSOLE_TABLE::hklActive</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00292">ImmReleaseContext()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00081">LANG_ID_JAPAN</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00082">LANG_ID_KOREA</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00083">LANG_ID_PRC</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00080">LANG_ID_TAIWAN</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00080">OpenCandidateJapan()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00606">OpenCandidateKorea()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00433">OpenCandidatePRC()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00264">OpenCandidateTaiwan()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/consubs_8c-source.html#l00458">ImeUIChangeCandidate()</a>, and <a class="el" href="../../d1/d5/consubs_8c-source.html#l00261">ImeUINotify()</a>.
<p>
<pre class="fragment"><div>00029 {
00030     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00031     HIMC  hIMC;
00032 
00033     <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Get IMN_OPENCANDIDATE Message\n"</span>));
00034 
00035 
00036     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
00037 
00038     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o25">fNestCandidate</a>)
00039         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00040 
00041     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00042         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00043         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00044     }
00045 
00046     hIMC = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>( hwnd );
00047     <span class="keywordflow">if</span> ( hIMC == 0 )
00048         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00049 
00050     <span class="comment">//</span>
00051     <span class="comment">// Set fInCandidate variables.</span>
00052     <span class="comment">//</span>
00053     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o16">fInCandidate</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00054 
00055     <span class="keywordflow">switch</span> ( <a class="code" href="../../d4/d5/conimep_8h.html#a50">HKL_TO_LANGID</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>))
00056     {
00057         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a43">LANG_ID_JAPAN</a>:
00058             <a class="code" href="../../d7/d7/country2_8c.html#a1">OpenCandidateJapan</a>(hwnd, hIMC, ConTbl, CandList, OpenFlag );
00059             <span class="keywordflow">break</span>;
00060         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a42">LANG_ID_TAIWAN</a>:
00061             <a class="code" href="../../d7/d7/country2_8c.html#a2">OpenCandidateTaiwan</a>(hwnd, hIMC, ConTbl, CandList, OpenFlag );
00062             <span class="keywordflow">break</span>;
00063         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a45">LANG_ID_PRC</a>:
00064             <a class="code" href="../../d7/d7/country2_8c.html#a3">OpenCandidatePRC</a>(hwnd, hIMC, ConTbl, CandList, OpenFlag );
00065             <span class="keywordflow">break</span>;
00066         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a44">LANG_ID_KOREA</a>:
00067             <a class="code" href="../../d7/d7/country2_8c.html#a4">OpenCandidateKorea</a>(hwnd, hIMC, ConTbl, CandList, OpenFlag );
00068             <span class="keywordflow">break</span>;
00069         <span class="keywordflow">default</span>:
00070             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00071     }
00072 
00073     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00074 
00075     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00076 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a119" doxytag="conimep.h::ImeUIOpenStatusWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImeUIOpenStatusWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00406">406</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00059">CI_CONIMEMODEINFO</a>, <a class="el" href="../../d3/d5/conime_8h.html#a42">CONIME_UIMODEINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00104">_CONSOLE_TABLE::dwConversion</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00105">_CONSOLE_TABLE::dwSentence</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00183">ImeUIMakeInfoString()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01368">ImmGetConversionStatus()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00292">ImmReleaseContext()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01094">ConImeInputLangchange()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00261">ImeUINotify()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01202">InputLangchange()</a>.
<p>
<pre class="fragment"><div>00409 {
00410     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00411     HIMC        hIMC;                   <span class="comment">// Input context handle.</span>
00412     <a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo ;
00413     COPYDATASTRUCT CopyData ;
00414 
00415     <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Get IMN_OPENSTATUSWINDOW Message\n"</span>));
00416 
00417     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
00418     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00419         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00420         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00421     }
00422 
00423     hIMC = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>( hwnd ) ;
00424     <span class="keywordflow">if</span> ( hIMC == 0 )
00425         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00426 
00427     lpModeInfo = (<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>)LocalAlloc( LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) ) ;
00428     <span class="keywordflow">if</span> ( lpModeInfo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00429         <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00430         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00431     }
00432 
00433     <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a29">ImmGetConversionStatus</a>(hIMC,
00434                            (LPDWORD)&amp;ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a>,
00435                            (LPDWORD)&amp;ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o8">dwSentence</a>) ;
00436 
00437     CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a5">CI_CONIMEMODEINFO</a> ;
00438     CopyData.cbData = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) ;
00439     CopyData.lpData = lpModeInfo ;
00440     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7/country_8c.html#a17">ImeUIMakeInfoString</a>(ConTbl,
00441                             lpModeInfo))
00442     {
00443         <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00444                                (WPARAM)hwnd,
00445                                (LPARAM)&amp;CopyData
00446                               ) ;
00447     }
00448 
00449     LocalFree( lpModeInfo );
00450 
00451     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00452 
00453     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> ;
00454 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a122" doxytag="conimep.h::ImeUISetConversionMode" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImeUISetConversionMode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00522">522</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00059">CI_CONIMEMODEINFO</a>, <a class="el" href="../../d3/d5/conime_8h.html#a42">CONIME_UIMODEINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00104">_CONSOLE_TABLE::dwConversion</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00105">_CONSOLE_TABLE::dwSentence</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00183">ImeUIMakeInfoString()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01368">ImmGetConversionStatus()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00292">ImmReleaseContext()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/consubs_8c-source.html#l00261">ImeUINotify()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00525 {
00526     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00527     HIMC        hIMC;                   <span class="comment">// Input context handle.</span>
00528     <a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo ;
00529     COPYDATASTRUCT CopyData ;
00530     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> OldConversion ;
00531 
00532 
00533     <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Get IMN_SETCONVERSIONMODE Message\n"</span>));
00534 
00535     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
00536     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00537         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00538         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00539     }
00540 
00541     hIMC = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>( hwnd ) ;
00542     <span class="keywordflow">if</span> ( hIMC == 0 )
00543         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00544 
00545     lpModeInfo = (<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>)LocalAlloc(LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) ) ;
00546     <span class="keywordflow">if</span> ( lpModeInfo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00547         <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00548         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00549     }
00550 
00551     OldConversion = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a> ;
00552 
00553     <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a29">ImmGetConversionStatus</a>(hIMC,
00554                            (LPDWORD)&amp;ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a>,
00555                            (LPDWORD)&amp;ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o8">dwSentence</a>) ;
00556 
00557     CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a5">CI_CONIMEMODEINFO</a> ;
00558     CopyData.cbData = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) ;
00559     CopyData.lpData = lpModeInfo ;
00560     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7/country_8c.html#a17">ImeUIMakeInfoString</a>(ConTbl,
00561                             lpModeInfo))
00562     {
00563         <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00564                                (WPARAM)hwnd,
00565                                (LPARAM)&amp;CopyData
00566                              ) ;
00567     }
00568 
00569     LocalFree( lpModeInfo );
00570     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00571     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> ;
00572 
00573 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a121" doxytag="conimep.h::ImeUISetOpenStatus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImeUISetOpenStatus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00468">468</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00059">CI_CONIMEMODEINFO</a>, <a class="el" href="../../d3/d5/conime_8h.html#a42">CONIME_UIMODEINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00104">_CONSOLE_TABLE::dwConversion</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00105">_CONSOLE_TABLE::dwSentence</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00103">_CONSOLE_TABLE::fOpen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00159">GetOpenStatusByCodepage()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00183">ImeUIMakeInfoString()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01368">ImmGetConversionStatus()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00292">ImmReleaseContext()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00096">_CONSOLE_TABLE::ScreenBufferSize</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00903">ConsoleSetFocus()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00261">ImeUINotify()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00869">InsertNewConsole()</a>.
<p>
<pre class="fragment"><div>00471 {
00472     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00473     HIMC        hIMC;                   <span class="comment">// Input context handle.</span>
00474     <a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo ;
00475     COPYDATASTRUCT CopyData ;
00476 
00477     <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Get IMN_SETOPENSTATUS Message\n"</span>));
00478 
00479     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
00480     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00481         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00482         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00483     }
00484 
00485     hIMC = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>( hwnd ) ;
00486     <span class="keywordflow">if</span> ( hIMC == 0 )
00487         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00488 
00489     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o6">fOpen</a> = <a class="code" href="../../d6/d7/country_8c.html#a16">GetOpenStatusByCodepage</a>( hIMC, ConTbl ) ;
00490 
00491     <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a29">ImmGetConversionStatus</a>(hIMC,
00492                            (LPDWORD)&amp;ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a>,
00493                            (LPDWORD)&amp;ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o8">dwSentence</a>) ;
00494 
00495     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o2">ScreenBufferSize</a>.X != 0) {
00496 
00497         lpModeInfo = (<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>)LocalAlloc( LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>)) ;
00498         <span class="keywordflow">if</span> ( lpModeInfo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00499             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00500             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00501         }
00502 
00503         CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a5">CI_CONIMEMODEINFO</a> ;
00504         CopyData.cbData = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) ;
00505         CopyData.lpData = lpModeInfo ;
00506         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7/country_8c.html#a17">ImeUIMakeInfoString</a>(ConTbl,
00507                                 lpModeInfo))
00508         {
00509             <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00510                                    (WPARAM)hwnd,
00511                                    (LPARAM)&amp;CopyData
00512                                   ) ;
00513         }
00514         LocalFree( lpModeInfo );
00515     }
00516     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hwnd, hIMC );
00517 
00518     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> ;
00519 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a112" doxytag="conimep.h::ImeUIStartComposition" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ImeUIStartComposition           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00067">67</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00113">_CONSOLE_TABLE::fInComposition</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00057">FIRSTCOL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00055">MAXCOL</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00068 {
00069     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00070 
00071     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
00072     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00073         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00074         <span class="keywordflow">return</span>;
00075     }
00076 
00077     <span class="comment">//</span>
00078     <span class="comment">// Set fInComposition variables.</span>
00079     <span class="comment">//</span>
00080     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o13">fInComposition</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00081 
00082 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00083 <span class="preprocessor"></span>    {
00084         <span class="keywordtype">int</span> i ;
00085         <span class="keywordflow">for</span> (i = <a class="code" href="../../d4/d5/conimep_8h.html#a22">FIRSTCOL</a> ; i &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a20">MAXCOL</a> ; i++) {
00086             ConvertLine[i] = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a> ;
00087             ConvertLineAtr[i] = 0 ;
00088         }
00089     }
00090 <span class="preprocessor">#endif</span>
00091 <span class="preprocessor"></span><span class="preprocessor">#ifdef DEBUG_INFO</span>
00092 <span class="preprocessor"></span>    xPos = <a class="code" href="../../d4/d5/conimep_8h.html#a22">FIRSTCOL</a>;
00093     xPosLast = <a class="code" href="../../d4/d5/conimep_8h.html#a22">FIRSTCOL</a>;
00094     HideCaret( hwnd );
00095     DisplayConvInformation( hwnd ) ;
00096     ResetCaret( hwnd );
00097 <span class="preprocessor">#endif</span>
00098 <span class="preprocessor"></span>}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a92" doxytag="conimep.h::ImmCallImeConsoleIME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ImmCallImeConsoleIME           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>Message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>puVKey</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00034">34</a> of file <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html">ntuser/imm/conime.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04502">GetKeyboardLayout()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00251">GetWindowThreadProcessId()</a>, <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00015">GUI_VKEY_MASK</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00150">HMValidateHandle()</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00793">ImmLockImeDpi()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>, <a class="el" href="../../d9/d0/immuser_8h.html#a31">PIMEDPI</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00922">TYPE_INPUTCONTEXT</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d1/d9/imefull_8c-source.html#l00208">CharHandlerFromConsole()</a>.
<p>
<pre class="fragment"><div>00043                    :
00044 
00045         Called by Console IME to convert Character
00046         This routine copy from user\kernel\ntimm.c :: xxxImmProcessKey
00047         <span class="keywordflow">for</span> Console IME could not calls kernel function.
00048 
00049 Arguments:
00050 
00051 Return Value:
00052 --*/
00053 {
00054     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>          dwReturn ;
00055     <a class="code" href="../../d1/d7/structtagIMC.html">PIMC</a>           pImc ;
00056     HIMC           hImc ;
00057     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>           fDBERoman ;
00058     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>           pwnd ;
00059     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>        pImeDpi;
00060     HKL            hkl ;
00061 
00062     dwReturn = 0;
00063     pImc = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00064     fDBERoman = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00065 
00066     <span class="comment">//</span>
00067     <span class="comment">// we're interested in only keyboard messages.</span>
00068     <span class="comment">//</span>
00069     <span class="keywordflow">if</span> ( Message != WM_KEYDOWN    &amp;&amp;
00070          Message != WM_SYSKEYDOWN &amp;&amp;
00071          Message != WM_KEYUP      &amp;&amp;
00072          Message != WM_SYSKEYUP ) {
00073 
00074         <span class="keywordflow">return</span> dwReturn;
00075     }
00076 
00077     hkl = <a class="code" href="../../d3/d8/client_8c.html#a154">GetKeyboardLayout</a>( <a class="code" href="../../d3/d8/winmgrc_8c.html#a18">GetWindowThreadProcessId</a>(hWnd, NULL) );
00078     pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hWnd);
00079     <span class="keywordflow">if</span> ( pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00080         <span class="keywordflow">return</span> dwReturn;
00081     }
00082     hImc = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>(hWnd);
00083     <span class="keywordflow">if</span> ( hImc == <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a> ){
00084         <span class="keywordflow">return</span> dwReturn;
00085     }
00086 
00087     *puVKey = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wParam &amp; <a class="code" href="../../d1/d5/ntuser_2imm_2conime_8c.html#a0">GUI_VKEY_MASK</a>;
00088 
00089     <span class="comment">//</span>
00090     <span class="comment">// Check input context</span>
00091     <span class="comment">//</span>
00092     pImc = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a6">HMValidateHandle</a>((HANDLE)hImc, TYPE_INPUTCONTEXT);
00093     <span class="keywordflow">if</span> ( pImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00094         <span class="keywordflow">return</span> dwReturn;
00095     }
00096 
00097 <span class="preprocessor">#ifdef LATER</span>
00098 <span class="preprocessor"></span>    <span class="comment">//</span>
00099     <span class="comment">// If there is an easy way to check the input context open/close status</span>
00100     <span class="comment">// from the kernel side, IME_PROP_NO_KEYS_ON_CLOSE checking should be</span>
00101     <span class="comment">// done here in kernel side.  [ 3/10/96 takaok]</span>
00102     <span class="comment">//</span>
00103 
00104     <span class="comment">//</span>
00105     <span class="comment">// Check IME_PROP_NO_KEYS_ON_CLOSE bit</span>
00106     <span class="comment">//</span>
00107     <span class="comment">// if the current imc is not open and IME doesn't need</span>
00108     <span class="comment">// keys when being closed, we don't pass any keyboard</span>
00109     <span class="comment">// input to ime except hotkey and keys that change</span>
00110     <span class="comment">// the keyboard status.</span>
00111     <span class="comment">//</span>
00112     <span class="keywordflow">if</span> ( (piix-&gt;ImeInfo.fdwProperty &amp; IME_PROP_NO_KEYS_ON_CLOSE) &amp;&amp;
00113          (!pimc-&gt;fdwState &amp; IMC_OPEN)                            &amp;&amp;
00114          uVKey != VK_SHIFT                                       &amp;&amp;  <span class="comment">// 0x10</span>
00115          uVKey != VK_CONTROL                                     &amp;&amp;  <span class="comment">// 0x11</span>
00116          uVKey != VK_CAPITAL                                     &amp;&amp;  <span class="comment">// 0x14</span>
00117          uVKey != VK_KANA                                        &amp;&amp;  <span class="comment">// 0x15</span>
00118          uVKey != VK_NUMLOCK                                     &amp;&amp;  <span class="comment">// 0x90</span>
00119          uVKey != VK_SCROLL )                                        <span class="comment">// 0x91</span>
00120     {
00121       <span class="comment">// Check if Korea Hanja conversion mode</span>
00122       <span class="keywordflow">if</span>( !(pimc-&gt;fdwConvMode &amp; IME_CMODE_HANJACONVERT) ) {
00123           <span class="keywordflow">return</span> dwReturn;
00124       }
00125     }
00126 <span class="preprocessor">#endif</span>
00127 <span class="preprocessor"></span>
00128     <span class="comment">//</span>
00129     <span class="comment">// if the IME doesn't need key up messages, we don't call ime.</span>
00130     <span class="comment">//</span>
00131     pImeDpi = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>(hkl);
00132     <span class="keywordflow">if</span> ( pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00133         <span class="keywordflow">return</span> dwReturn;
00134     }
00135 
00136     <span class="keywordflow">if</span> ( lParam &amp; 0x80000000 &amp;&amp;          <span class="comment">// set if key up, clear if key down</span>
00137          pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_IGNORE_UPKEYS )
00138     {
00139         <span class="keywordflow">return</span> dwReturn;
00140     }
00141 
00142     <span class="comment">//</span>
00143     <span class="comment">// we don't want to handle sys keys since many functions for</span>
00144     <span class="comment">// acceelerators won't work without this</span>
00145     <span class="comment">//</span>
00146     fDBERoman = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)( (*puVKey == VK_DBE_ROMAN)            ||
00147                         (*puVKey == VK_DBE_NOROMAN)          ||
00148                         (*puVKey == VK_DBE_HIRAGANA)         ||
00149                         (*puVKey == VK_DBE_KATAKANA)         ||
00150                         (*puVKey == VK_DBE_CODEINPUT)        ||
00151                         (*puVKey == VK_DBE_NOCODEINPUT)      ||
00152                         (*puVKey == VK_DBE_IME_WORDREGISTER) ||
00153                         (*puVKey == VK_DBE_IME_DIALOG) );
00154 
00155     <span class="keywordflow">if</span> (Message == WM_SYSKEYDOWN || Message == WM_SYSKEYUP ) {
00156         <span class="comment">//</span>
00157         <span class="comment">// IME may be waiting for VK_MENU, VK_F10 or VK_DBE_xxx</span>
00158         <span class="comment">//</span>
00159         <span class="keywordflow">if</span> ( *puVKey != VK_MENU &amp;&amp; *puVKey != VK_F10 &amp;&amp; !fDBERoman ) {
00160             <span class="keywordflow">return</span> dwReturn;
00161         }
00162     }
00163 
00164     <span class="comment">//</span>
00165     <span class="comment">// check if the IME doesn't need ALT key</span>
00166     <span class="comment">//</span>
00167 
00168     <span class="keywordflow">if</span> ( !(pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_NEED_ALTKEY) ) {
00169         <span class="comment">//</span>
00170         <span class="comment">// IME doesn't need ALT key</span>
00171         <span class="comment">//</span>
00172         <span class="comment">// we don't pass the ALT and ALT+xxx except VK_DBE_xxx keys.</span>
00173         <span class="comment">//</span>
00174         <span class="keywordflow">if</span> ( ! fDBERoman &amp;&amp;
00175              (*puVKey == VK_MENU || (lParam &amp; 0x20000000))  <span class="comment">// KF_ALTDOWN</span>
00176            )
00177         {
00178             <span class="keywordflow">return</span> dwReturn;
00179         }
00180     }
00181 
00182 
00183     dwReturn = <a class="code" href="../../d9/d0/immuser_8h.html#a48">ImmProcessKey</a>(hWnd, hkl, *puVKey, lParam, IME_INVALID_HOTKEY ) ;
00184     <span class="keywordflow">return</span> dwReturn;
00185 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a94" doxytag="conimep.h::ImmSetActiveContextConsoleIME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImmSetActiveContextConsoleIME           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00188">188</a> of file <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html">ntuser/imm/conime.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, and <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00950">ConsoleKillFocus()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00903">ConsoleSetFocus()</a>, and <a class="el" href="../../d1/d5/consubs_8c-source.html#l00670">SetNLSMode()</a>.
<p>
<pre class="fragment"><div>00195                    :
00196 
00197     Set <span class="keyword">this</span> context as active one.
00198 
00199 Arguments:
00200 
00201     <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a>         - <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> get focus window
00202     fFlag        - get focus or kill focus
00203 
00204 Return Value:
00205 
00206 --*/
00207 
00208 {
00209     HIMC hImc;
00210 
00211     hImc = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>(hWnd) ;
00212     <span class="keywordflow">if</span> (hImc == <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a>) {
00213         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00214     }
00215     <span class="keywordflow">return</span>(<a class="code" href="../../d9/d0/immuser_8h.html#a36">ImmSetActiveContext</a>(hWnd, hImc, fFlag)) ;
00216 
00217 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a93" doxytag="conimep.h::ImmTranslateMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImmTranslateMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">196</a> of file <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html">ntuser/imm/input.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/fareast_8c-source.html#l00238">_InitializeImmEntryTable()</a>.
<p>
<pre class="fragment"><div>00201 {
00202     HIMC hImc;
00203     PINPUTCONTEXT pInputContext;
00204     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fReturn = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00205     HKL  hkl;
00206     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00207     <a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a> pbKeyState;
00208     PTRANSMSG pTransMsg;
00209     PTRANSMSGLIST pTransMsgList;
00210     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwSize;
00211     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uVKey;
00212     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> iNum;
00213 
00214     UNREFERENCED_PARAMETER(wParam);
00215 
00216     <span class="comment">//</span>
00217     <span class="comment">// we're interested in only those keyboard messages.</span>
00218     <span class="comment">//</span>
00219     <span class="keywordflow">switch</span> (message) {
00220     <span class="keywordflow">case</span> WM_KEYDOWN:
00221     <span class="keywordflow">case</span> WM_KEYUP:
00222     <span class="keywordflow">case</span> WM_SYSKEYDOWN:
00223     <span class="keywordflow">case</span> WM_SYSKEYUP:
00224         <span class="keywordflow">break</span>;
00225     <span class="keywordflow">default</span>:
00226         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00227     }
00228 
00229     <span class="comment">//</span>
00230     <span class="comment">// input context is necessary for further handling</span>
00231     <span class="comment">//</span>
00232     hImc = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>(hwnd);
00233     pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>(hImc);
00234     <span class="keywordflow">if</span> (pInputContext == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00235         <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>(hwnd, hImc);
00236         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00237     }
00238 
00239     <span class="comment">//</span>
00240     <span class="comment">// At first, handle VK_PROCESSKEY generated by IME.</span>
00241     <span class="comment">//</span>
00242     <span class="keywordflow">if</span> (!pInputContext-&gt;fChgMsg) {
00243 
00244         <span class="keywordflow">if</span> ((iNum=pInputContext-&gt;dwNumMsgBuf) != 0) {
00245 
00246             pTransMsg = (PTRANSMSG)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a17">ImmLockIMCC</a>(pInputContext-&gt;hMsgBuf);
00247             <span class="keywordflow">if</span> (pTransMsg != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00248                 <a class="code" href="../../d4/d3/ntuser_2imm_2input_8c.html#a4">ImmPostMessages</a>(hwnd, hImc, iNum, pTransMsg);
00249                 <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a>(pInputContext-&gt;hMsgBuf);
00250                 fReturn = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00251             }
00252 
00253             pInputContext-&gt;dwNumMsgBuf = 0;
00254         }
00255         <span class="keywordflow">goto</span> ExitITM;
00256     }
00257 
00258     pInputContext-&gt;fChgMsg = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00259 
00260     <span class="comment">//</span>
00261     <span class="comment">// retrieve the keyboard layout and IME entry points</span>
00262     <span class="comment">//</span>
00263     hkl = <a class="code" href="../../d3/d8/client_8c.html#a154">GetKeyboardLayout</a>( <a class="code" href="../../d3/d8/winmgrc_8c.html#a18">GetWindowThreadProcessId</a>(hwnd, NULL) );
00264     pImeDpi = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>(hkl);
00265     <span class="keywordflow">if</span> (pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00266         RIPMSG1(RIP_WARNING, <span class="stringliteral">"ImmTranslateMessage pImeDpi is NULL(hkl=%x)"</span>, hkl);
00267         <span class="keywordflow">goto</span> ExitITM;
00268     }
00269 
00270     pbKeyState = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, 256);
00271     <span class="keywordflow">if</span> ( pbKeyState == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00272         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmTranslateMessage out of memory"</span> );
00273         <span class="keywordflow">goto</span> ExitITM;
00274     }
00275 
00276     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d0/user32_8def.html#a46">GetKeyboardState</a>(pbKeyState)) {
00277         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmTranslateMessage GetKeyboardState() failed"</span> );
00278         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>( pbKeyState );
00279         <span class="keywordflow">goto</span> ExitITM;
00280     }
00281 
00282     <span class="comment">//</span>
00283     <span class="comment">// Translate the saved vkey into character code if needed</span>
00284     <span class="comment">//</span>
00285     uVKey = pInputContext-&gt;uSavedVKey;
00286 
00287     <span class="keywordflow">if</span> (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_KBD_CHAR_FIRST) {
00288 
00289         <span class="keywordflow">if</span> (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE) {
00290             WCHAR wcTemp;
00291 
00292             iNum = <a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a24">ToUnicode</a>(pInputContext-&gt;uSavedVKey, <span class="comment">// virtual-key code</span>
00293                              HIWORD(lParam),            <span class="comment">// scan code</span>
00294                              pbKeyState,                <span class="comment">// key-state array</span>
00295                              &amp;wcTemp,                   <span class="comment">// buffer for translated key</span>
00296                              1,                         <span class="comment">// size of buffer</span>
00297                              0);
00298             <span class="keywordflow">if</span> (iNum == 1) {
00299                 <span class="comment">//</span>
00300                 <span class="comment">// hi word            : unicode character code</span>
00301                 <span class="comment">// hi byte of lo word : zero</span>
00302                 <span class="comment">// lo byte of lo word : virtual key</span>
00303                 <span class="comment">//</span>
00304                 uVKey = (uVKey &amp; 0x00ff) | ((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wcTemp &lt;&lt; 16);
00305             }
00306 
00307         } <span class="keywordflow">else</span> {
00308             WORD wTemp = 0;
00309 
00310             iNum = <a class="code" href="../../d3/d8/client_8c.html#a47">ToAsciiEx</a>(pInputContext-&gt;uSavedVKey, <span class="comment">// virtual-key code</span>
00311                              HIWORD(lParam),            <span class="comment">// scan code</span>
00312                              pbKeyState,                <span class="comment">// key-state array</span>
00313                              &amp;wTemp,                    <span class="comment">// buffer for translated key</span>
00314                              0,                         <span class="comment">// active-menu flag</span>
00315                              hkl);
00316             <a class="code" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>(iNum &lt;= 2);
00317             <span class="keywordflow">if</span> (iNum &gt; 0) {
00318                 <span class="comment">//</span>
00319                 <span class="comment">// hi word            : should be zero</span>
00320                 <span class="comment">// hi byte of lo word : character code</span>
00321                 <span class="comment">// lo byte of lo word : virtual key</span>
00322                 <span class="comment">//</span>
00323                 uVKey = (uVKey &amp; 0x00FF) | ((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wTemp &lt;&lt; 8);
00324 
00325                 <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)uVKey == VK_PACKET) {
00326                     <span class="comment">//</span>
00327                     <span class="comment">// If ANSI IME is wide vkey aware, its ImeToAsciiEx will receive the uVKey</span>
00328                     <span class="comment">// as follows:</span>
00329                     <span class="comment">//</span>
00330                     <span class="comment">//  31            24 23                         16 15                8 7             0</span>
00331                     <span class="comment">// +----------------+-----------------------------+-------------------+---------------+</span>
00332                     <span class="comment">// | 24~31:reserved | 16~23:trailing byte(if any) | 8~15:leading byte | 0~7:VK_PACKET |</span>
00333                     <span class="comment">// +----------------+-----------------------------+-------------------+---------------+</span>
00334                     <span class="comment">//</span>
00335                     <a class="code" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>(pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_ACCEPT_WIDE_VKEY);
00336                 }
00337                 <span class="keywordflow">else</span> {
00338                     uVKey &amp;= 0xffff;
00339                 }
00340             }
00341         }
00342     }
00343 
00344     dwSize = FIELD_OFFSET(TRANSMSGLIST, TransMsg)
00345            + <a class="code" href="../../d4/d3/ntuser_2imm_2input_8c.html#a1">TRANSMSGCOUNT</a> * <span class="keyword">sizeof</span>(TRANSMSG);
00346 
00347     pTransMsgList = (PTRANSMSGLIST)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, dwSize);
00348 
00349     <span class="keywordflow">if</span> (pTransMsgList == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00350         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmTranslateMessage out of memory"</span> );
00351         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(pbKeyState);
00352         <span class="keywordflow">goto</span> ExitITM;
00353     }
00354 
00355     pTransMsgList-&gt;uMsgCount = <a class="code" href="../../d4/d3/ntuser_2imm_2input_8c.html#a1">TRANSMSGCOUNT</a>;
00356     iNum = (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o25">ImeToAsciiEx</a>)(uVKey,
00357                                         HIWORD(lParam),
00358                                         pbKeyState,
00359                                         pTransMsgList,
00360                                         0,
00361                                         hImc);
00362 
00363     <span class="keywordflow">if</span> (iNum &gt; <a class="code" href="../../d4/d3/ntuser_2imm_2input_8c.html#a1">TRANSMSGCOUNT</a>) {
00364 
00365         <span class="comment">//</span>
00366         <span class="comment">// The message buffer is not big enough. IME put messages</span>
00367         <span class="comment">// into hMsgBuf in the input context.</span>
00368         <span class="comment">//</span>
00369 
00370         pTransMsg = (PTRANSMSG)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a17">ImmLockIMCC</a>(pInputContext-&gt;hMsgBuf);
00371         <span class="keywordflow">if</span> (pTransMsg != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00372             <a class="code" href="../../d4/d3/ntuser_2imm_2input_8c.html#a4">ImmPostMessages</a>(hwnd, hImc, iNum, pTransMsg);
00373             <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a>(pInputContext-&gt;hMsgBuf);
00374         }
00375 
00376 <span class="preprocessor">#ifdef LATER</span>
00377 <span class="preprocessor"></span>        <span class="comment">// Shouldn't we need this ?</span>
00378         fReturn = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00379 <span class="preprocessor">#endif</span>
00380 <span class="preprocessor"></span>
00381     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iNum &gt; 0) {
00382         <a class="code" href="../../d4/d3/ntuser_2imm_2input_8c.html#a4">ImmPostMessages</a>(hwnd, hImc, iNum, &amp;pTransMsgList-&gt;TransMsg[0]);
00383         fReturn = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00384     }
00385 
00386     <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(pbKeyState);
00387     <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(pTransMsgList);
00388 
00389 ExitITM:
00390     <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00391     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
00392     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>(hwnd, hImc);
00393 
00394     <span class="keywordflow">return</span> fReturn;
00395 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a149" doxytag="conimep.h::IncludeCandidateP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> IncludeCandidateP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpModeInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ModeInfoPtr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00692">692</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00026">_CONIME_CANDMESSAGE::AttrOff</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00042">_CONIME_UICOMPMESSAGE::CompAttrColor</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00038">_CONIME_UICOMPMESSAGE::dwCompStrLen</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00312">IsUnicodeFullWidth()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00114">_CONSOLE_TABLE::lpCompStrMem</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00051">_CONIME_UIMODEINFO::ModeString</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00194">PRCCOMPWIDTH</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00027">_CONIME_CANDMESSAGE::String</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00121">_CONSOLE_TABLE::SystemLine</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00184">UNICODE_COLON</a>, and <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00525">MakeInfoStringPRC()</a>.
<p>
<pre class="fragment"><div>00697 {
00698     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00699     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00700     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> k;
00701     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> UnicodeLen;
00702     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwLength;
00703     PWCHAR      TempBuf;
00704     PUCHAR      TempBufA;
00705     <a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html">LPCONIME_CANDMESSAGE</a> SystemLine;
00706     <a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">LPCONIME_UICOMPMESSAGE</a> lpCompStrMem;
00707 
00708     i = ModeInfoPtr;
00709     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00710         <span class="keywordflow">return</span> i;
00711     }
00712     lpCompStrMem = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>;
00713     TempBuf  = (PWCHAR)((PUCHAR)lpCompStrMem + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>));
00714     TempBufA = (PUCHAR)((PUCHAR)lpCompStrMem + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) +
00715                        lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a> +  <span class="keyword">sizeof</span>(WCHAR));
00716 
00717     k = 0;
00718     UnicodeLen = 0;
00719     <span class="keywordflow">for</span> (j = 0; (k &lt; lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a> )&amp;&amp;(UnicodeLen &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a68">PRCCOMPWIDTH</a>); j++, k += <span class="keyword">sizeof</span>(WCHAR)) {
00720        lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = TempBuf[j];
00721        lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Attributes = lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o7">CompAttrColor</a>[TempBufA[j]];
00722        UnicodeLen += <a class="code" href="../../d0/d6/consubs_8c.html#a5">IsUnicodeFullWidth</a>(TempBuf[j]) ? 2 : 1;
00723     }
00724 
00725     <span class="keywordflow">for</span> ( j = UnicodeLen; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a68">PRCCOMPWIDTH</a>; j++) {
00726         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
00727     }
00728     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d4/d5/conimep_8h.html#a60">UNICODE_COLON</a>;
00729 
00730     SystemLine = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a>;
00731     dwLength = (SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o0">AttrOff</a> - <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) ) / <span class="keyword">sizeof</span>(WCHAR) ;
00732     TempBuf  = (PWCHAR)(SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o1">String</a>);
00733     TempBufA = (PUCHAR)((LPSTR)SystemLine + SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o0">AttrOff</a>);
00734 
00735     <span class="keywordflow">for</span> (j = 0; TempBuf[j] != 0; j++ ) {
00736        lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = TempBuf[j];
00737        lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Attributes = lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o7">CompAttrColor</a>[TempBufA[j]];
00738     }
00739 
00740     <span class="keywordflow">return</span> i;
00741 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a143" doxytag="conimep.h::IncludeCandidateT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> IncludeCandidateT           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpModeInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ModeInfoPtr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00474">474</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00026">_CONIME_CANDMESSAGE::AttrOff</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00042">_CONIME_UICOMPMESSAGE::CompAttrColor</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00114">_CONSOLE_TABLE::lpCompStrMem</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00051">_CONIME_UIMODEINFO::ModeString</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00027">_CONIME_CANDMESSAGE::String</a>, and <a class="el" href="../../d5/d4/conimep_8h-source.html#l00121">_CONSOLE_TABLE::SystemLine</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00298">MakeInfoStringTaiwan()</a>.
<p>
<pre class="fragment"><div>00479 {
00480     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00481     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00482     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwLength;
00483     PWCHAR      TempBuf;
00484     PUCHAR      TempBufA;
00485     <a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html">LPCONIME_CANDMESSAGE</a> SystemLine;
00486     <a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">LPCONIME_UICOMPMESSAGE</a> lpCompStrMem;
00487     lpCompStrMem = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>;
00488 
00489     i = ModeInfoPtr;
00490     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00491         <span class="keywordflow">return</span> i;
00492     }
00493     SystemLine = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a>;
00494     dwLength = (SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o0">AttrOff</a> - <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) ) / <span class="keyword">sizeof</span>(WCHAR) ;
00495     TempBuf  = (PWCHAR)(SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o1">String</a>);
00496     TempBufA = (PUCHAR)((LPSTR)SystemLine + SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o0">AttrOff</a>);
00497 
00498     <span class="keywordflow">for</span> (j = 0; TempBuf[j] != 0; j++ ) {
00499        lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = TempBuf[j];
00500        lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Attributes = lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o7">CompAttrColor</a>[TempBufA[j]];
00501     }
00502 
00503     <span class="keywordflow">return</span> i;
00504 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a148" doxytag="conimep.h::IncludeCompositionP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> IncludeCompositionP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpModeInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ModeInfoPtr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00661">661</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00042">_CONIME_UICOMPMESSAGE::CompAttrColor</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00038">_CONIME_UICOMPMESSAGE::dwCompStrLen</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00114">_CONSOLE_TABLE::lpCompStrMem</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00051">_CONIME_UIMODEINFO::ModeString</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00525">MakeInfoStringPRC()</a>.
<p>
<pre class="fragment"><div>00666 {
00667     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00668     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00669     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> k;
00670     PWCHAR      TempBuf;
00671     PUCHAR      TempBufA;
00672     <a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">LPCONIME_UICOMPMESSAGE</a> lpCompStrMem;
00673 
00674     i = ModeInfoPtr;
00675     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00676         <span class="keywordflow">return</span> i;
00677     }
00678     lpCompStrMem = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>;
00679     TempBuf  = (PWCHAR)((PUCHAR)lpCompStrMem + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>));
00680     TempBufA = (PUCHAR)((PUCHAR)lpCompStrMem + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) +
00681                        lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a> +  <span class="keyword">sizeof</span>(WCHAR));
00682 
00683     k = 0;
00684     <span class="keywordflow">for</span> (j = 0; k &lt; lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a>; j++, k += <span class="keyword">sizeof</span>(WCHAR)) {
00685        lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = TempBuf[j];
00686        lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Attributes = lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o7">CompAttrColor</a>[TempBufA[j]];
00687     }
00688     <span class="keywordflow">return</span> i;
00689 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a142" doxytag="conimep.h::IncludeCompositionT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> IncludeCompositionT           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpModeInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ModeInfoPtr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00443">443</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00042">_CONIME_UICOMPMESSAGE::CompAttrColor</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00038">_CONIME_UICOMPMESSAGE::dwCompStrLen</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00114">_CONSOLE_TABLE::lpCompStrMem</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00051">_CONIME_UIMODEINFO::ModeString</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00298">MakeInfoStringTaiwan()</a>.
<p>
<pre class="fragment"><div>00448 {
00449     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00450     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00451     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> k;
00452     PWCHAR      TempBuf;
00453     PUCHAR      TempBufA;
00454     <a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">LPCONIME_UICOMPMESSAGE</a> lpCompStrMem;
00455 
00456     i = ModeInfoPtr;
00457     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00458         <span class="keywordflow">return</span> i;
00459     }
00460     lpCompStrMem = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>;
00461     TempBuf  = (PWCHAR)((PUCHAR)lpCompStrMem + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>));
00462     TempBufA = (PUCHAR)((PUCHAR)lpCompStrMem + <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">CONIME_UICOMPMESSAGE</a>) +
00463                        lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a> +  <span class="keyword">sizeof</span>(WCHAR));
00464 
00465     k = 0;
00466     <span class="keywordflow">for</span> (j = 0; k &lt; lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o3">dwCompStrLen</a>; j++, k += <span class="keyword">sizeof</span>(WCHAR)) {
00467        lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = TempBuf[j];
00468        lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Attributes = lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o7">CompAttrColor</a>[TempBufA[j]];
00469     }
00470     <span class="keywordflow">return</span> i;
00471 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a95" doxytag="conimep.h::InitConsoleIME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL InitConsoleIME           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HINSTANCE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hInstance</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00109">109</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d5/d4/conimep_8h-source.html#l00046">CONSOLE_INITIAL_TABLE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00023">CONSOLEIME_EVENT</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00029">ConsoleTable</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00032">ConsoleTableLock</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00051">CVMAX</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d4/d3/w32_2ntuser_2client_2nt6_2pch_8h-source.html#l00039">DestroyWindow</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00040">dwConsoleThreadId</a>, <a class="el" href="../../d2/d9/tdisp_8c-source.html#l00009">ErrorExit()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00401">GetSystemMetrics()</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00018">ID_CONSOLEIME_ICON</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00031">IDS_APPNAME</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00032">IDS_CLASSNAME</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00030">IDS_MENUNAME</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00033">IDS_TITLE</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00030">NumberOfConsoleTable</a>, <a class="el" href="../../d4/d5/conimep_8h.html#a91">PCONSOLE_TABLE</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01415">RegisterClass</a>, <a class="el" href="../../d8/d7/dll_2resource_8c-source.html#l01210">RtlInitializeCriticalSection()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00848">SetWindowText()</a>, <a class="el" href="../../d4/d9/user32_8def-source.html#l00180">ShowWindow</a>, <a class="el" href="../../d6/d5/ntcon_2conime_2globals_8h-source.html#l00024">szTitle</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00970">UnregisterClass()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03608">UpdateWindow()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00062">WinMain()</a>.
<p>
<pre class="fragment"><div>00112 {
00113     HANDLE   hEvent;
00114     ATOM     atom;
00115     HWND     <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a>;
00116     WNDCLASS ConsoleIMEClass;
00117     <span class="keywordtype">int</span>      cxExecStart;
00118     <span class="keywordtype">int</span>      cyExecStart;
00119     WCHAR    szMenuName[16];                 <span class="comment">// The name of Menu</span>
00120     WCHAR    szClassName[16];                <span class="comment">// The class name of this application</span>
00121     WCHAR    <a class="code" href="../../d5/d6/ntcon_2conime_2globals_8h.html#a2">szTitle</a>[16];                    <span class="comment">// The title bar text</span>
00122 
00123 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00124 <span class="preprocessor"></span>    WCHAR    szAppName[16];                  <span class="comment">// The name of this application</span>
00125 
00126     LoadString(hInstance, IDS_TITLE,     szTitle,     <span class="keyword">sizeof</span>(szTitle));
00127 <span class="preprocessor">#else</span>
00128 <span class="preprocessor"></span>    <a class="code" href="../../d5/d6/ntcon_2conime_2globals_8h.html#a2">szTitle</a>[0] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00129 <span class="preprocessor">#endif</span>
00130 <span class="preprocessor"></span>
00131     <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Enter InitConsoleIMEl!\n"</span>));
00132 
00133     <a class="code" href="../../d7/d8/dll_2resource_8c.html#a24">RtlInitializeCriticalSection</a>(&amp;ConsoleTableLock);
00134 
00135     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a5">ConsoleTable</a> = (<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> *)LocalAlloc(LPTR, CONSOLE_INITIAL_TABLE * <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>));
00136     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a5">ConsoleTable</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00137         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00138     }
00139     RtlZeroMemory(ConsoleTable, CONSOLE_INITIAL_TABLE * <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>));
00140     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a6">NumberOfConsoleTable</a> = <a class="code" href="../../d4/d5/conimep_8h.html#a12">CONSOLE_INITIAL_TABLE</a>;
00141 
00142     <span class="comment">// Load the application name and description strings.</span>
00143     LoadString(hInstance, IDS_MENUNAME,  szMenuName,  <span class="keyword">sizeof</span>(szMenuName));
00144     LoadString(hInstance, IDS_CLASSNAME, szClassName, <span class="keyword">sizeof</span>(szClassName));
00145 
00146     hEvent = OpenEvent(EVENT_MODIFY_STATE,    <span class="comment">// Access flag</span>
00147                        FALSE,                 <span class="comment">// Inherit</span>
00148                        CONSOLEIME_EVENT);     <span class="comment">// Event object name</span>
00149     <span class="keywordflow">if</span> (hEvent == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00150     {
00151         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: OpenEvent failure! %d\n"</span>,GetLastError()));
00152         <span class="keywordflow">goto</span> <a class="code" href="../../d1/d0/tdisp_8c.html#a1">ErrorExit</a>;
00153     }
00154 
00155     <span class="comment">// Fill in window class structure with parameters that describe the</span>
00156     <span class="comment">// main window.</span>
00157 
00158     ConsoleIMEClass.style         = 0;                       <span class="comment">// Class style(s).</span>
00159     ConsoleIMEClass.lpfnWndProc   = <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a12">WndProc</a>;                 <span class="comment">// Window Procedure</span>
00160     ConsoleIMEClass.cbClsExtra    = 0;                       <span class="comment">// No per-class extra data.</span>
00161     ConsoleIMEClass.cbWndExtra    = 0;                       <span class="comment">// No per-window extra data.</span>
00162     ConsoleIMEClass.hInstance     = hInstance;               <span class="comment">// Owner of this class</span>
00163     ConsoleIMEClass.hIcon         = LoadIcon(hInstance, MAKEINTRESOURCE(ID_CONSOLEIME_ICON));
00164     ConsoleIMEClass.hCursor       = LoadCursor(NULL, IDC_ARROW); <span class="comment">// Cursor</span>
00165     ConsoleIMEClass.hbrBackground = GetStockObject(WHITE_BRUSH); <span class="comment">// Default color</span>
00166     ConsoleIMEClass.lpszMenuName  = szMenuName;              <span class="comment">// Menu name from .RC</span>
00167     ConsoleIMEClass.lpszClassName = szClassName;             <span class="comment">// Class Name</span>
00168 
00169     <span class="comment">// Register the window class and return FALSE if unsuccesful.</span>
00170 
00171     atom = <a class="code" href="../../d5/d9/cltxt_8h.html#a7">RegisterClass</a>(&amp;ConsoleIMEClass);
00172     <span class="keywordflow">if</span> (atom == 0)
00173     {
00174         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: RegisterClass failure! %d\n"</span>,GetLastError()));
00175         <span class="keywordflow">goto</span> <a class="code" href="../../d1/d0/tdisp_8c.html#a1">ErrorExit</a>;
00176     }
00177     <span class="keywordflow">else</span> {
00178         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: RegisterClass Successful!\n"</span>));
00179     }
00180 
00181     <span class="comment">// Guess size for now.</span>
00182     cxExecStart = <a class="code" href="../../d3/d9/client_2wow_8c.html#a16">GetSystemMetrics</a>(SM_CXSCREEN);
00183     cyExecStart = <a class="code" href="../../d3/d9/client_2wow_8c.html#a16">GetSystemMetrics</a>(SM_CYMENU);
00184 
00185     <span class="comment">// Create a main window for this application instance.</span>
00186     <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a> = CreateWindow(szClassName,                 <span class="comment">// See RegisterClass() call.</span>
00187                         szTitle,                     <span class="comment">// Text for window title bar.</span>
00188                         WS_OVERLAPPEDWINDOW,
00189                         cxExecStart - (cxExecStart / 3) ,
00190                         cyExecStart ,
00191                         cxExecStart / 3 ,
00192                         cyExecStart * 10 ,
00193                         NULL,                        <span class="comment">// Overlapped has no parent.</span>
00194                         NULL,                        <span class="comment">// Use the window class menu.</span>
00195                         hInstance,
00196                         (LPVOID)NULL);
00197 
00198     <span class="comment">// If window could not be created, return "failure"</span>
00199     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00200         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CreateWindow failured! %d\n"</span>,GetLastError()));
00201         <span class="keywordflow">goto</span> <a class="code" href="../../d1/d0/tdisp_8c.html#a1">ErrorExit</a>;
00202     }
00203     <span class="keywordflow">else</span>{
00204         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CreateWindow Successful!\n"</span>));
00205     }
00206 
00207     <span class="keywordflow">if</span> (! RegisterConsoleIME(hWnd, &amp;dwConsoleThreadId))
00208     {
00209         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: RegisterConsoleIME failured! %d\n"</span>,GetLastError()));
00210         <span class="keywordflow">goto</span> <a class="code" href="../../d1/d0/tdisp_8c.html#a1">ErrorExit</a>;
00211     }
00212 
00213     <span class="keywordflow">if</span> (! AttachThreadInput(GetCurrentThreadId(), dwConsoleThreadId, TRUE))
00214     {
00215         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: AttachThreadInput failured! %d\n"</span>,GetLastError()));
00216         <span class="keywordflow">goto</span> <a class="code" href="../../d1/d0/tdisp_8c.html#a1">ErrorExit</a>;
00217     }
00218 
00219     <span class="comment">/*</span>
00220 <span class="comment">     * dwConsoleThreadId is locked until event sets of hEvent</span>
00221 <span class="comment">     */</span>
00222     SetEvent(hEvent);
00223     CloseHandle(hEvent);
00224 
00225 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00226 <span class="preprocessor"></span>    LoadString(hInstance, IDS_APPNAME,   szAppName,   <span class="keyword">sizeof</span>(szAppName));
00227 
00228     <span class="comment">// Make the window visible; update its client area; and return "success"</span>
00229     <a class="code" href="../../d3/d0/user32_8def.html#a32">ShowWindow</a>(hWnd, SW_MINIMIZE); <span class="comment">// Show the window</span>
00230     <a class="code" href="../../d5/d9/cltxt_8h.html#a23">SetWindowText</a>(hWnd, szAppName);
00231     <a class="code" href="../../d3/d8/client_8c.html#a140">UpdateWindow</a>(hWnd);         <span class="comment">// Sends WM_PAINT message</span>
00232 
00233     {
00234         <span class="keywordtype">int</span> i;
00235 
00236         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a16">CVMAX</a>; i++) {
00237             ConvertLine[i] = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
00238             ConvertLineAtr[i] = 0;
00239         }
00240         xPos = 0;
00241         xPosLast = 0;
00242     }
00243 
00244 <span class="preprocessor">#endif</span>
00245 <span class="preprocessor"></span>
00246     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;                <span class="comment">// We succeeded...</span>
00247 
00248 <a class="code" href="../../d1/d0/tdisp_8c.html#a1">ErrorExit</a>:
00249     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a9">dwConsoleThreadId</a>)
00250         UnregisterConsoleIME();
00251     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a>)
00252         <a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html#a3">DestroyWindow</a>(hWnd);
00253     <span class="keywordflow">if</span> (atom)
00254         <a class="code" href="../../d0/d8/ntcftxt_8h.html#a30">UnregisterClass</a>(szClassName,hInstance);
00255     <span class="keywordflow">if</span> (hEvent)
00256     {
00257         SetEvent(hEvent);
00258         CloseHandle(hEvent);
00259     }
00260     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00261 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a110" doxytag="conimep.h::InputLangchange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL InputLangchange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CharSet</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hkl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01202">1202</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d4/d9/user32_8def-source.html#l00369">ActivateKeyboardLayout</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00081">GetIMEName()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00100">_CONSOLE_TABLE::hklActive</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00406">ImeUIOpenStatusWindow()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>01207 {
01208     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
01209 
01210     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
01211     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01212         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
01213         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01214     }
01215 
01216     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a> = hkl;
01217     <a class="code" href="../../d3/d0/user32_8def.html#a45">ActivateKeyboardLayout</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>, 0);
01218     <a class="code" href="../../d6/d7/country_8c.html#a15">GetIMEName</a>( ConTbl );
01219     <a class="code" href="../../d0/d6/consubs_8c.html#a6">ImeUIOpenStatusWindow</a>(hWnd);
01220     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01221 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a98" doxytag="conimep.h::InsertConsole" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL InsertConsole           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsole</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWndConsole</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00664">664</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d5/d4/conimep_8h-source.html#l00115">_CONSOLE_TABLE::CompAttrColor</a>, <a class="el" href="../../d4/d5/conimep_8h.html#a90">CONSOLE_TABLE</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00029">ConsoleTable</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00114">DEFAULT_COMP_ALREADY_CONVERTED</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00117">DEFAULT_COMP_CONVERSION</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00111">DEFAULT_COMP_ENTERED</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00124">DEFAULT_COMP_INPUT_ERROR</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00120">DEFAULT_COMP_YET_CONVERTED</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00071">DEFAULT_TEMP_WIDTH</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00133">_CONSOLE_TABLE::Enable</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00081">GetIMEName()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00742">GrowConsoleTable()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00094">_CONSOLE_TABLE::hConsole</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00101">_CONSOLE_TABLE::hIMC_Current</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00102">_CONSOLE_TABLE::hIMC_Original</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00048">HKL_INITIAL_TABLE</a>, <a class="el" href="../../d4/d5/conimep_8h.html#a88">HKL_TABLE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00135">_CONSOLE_TABLE::hklListMax</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00026">ImmCreateContext()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00134">_CONSOLE_TABLE::LateRemove</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00136">_CONSOLE_TABLE::lphklList</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00030">NumberOfConsoleTable</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00824">RemoveConsoleWorker()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00096">_CONSOLE_TABLE::ScreenBufferSize</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00869">InsertNewConsole()</a>.
<p>
<pre class="fragment"><div>00669 {
00670     ULONG i;
00671     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> FocusedConsole;
00672 
00673     i = 1;
00674 
00675     <span class="keywordflow">do</span> {
00676         <span class="keywordflow">for</span> (; i &lt; <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a6">NumberOfConsoleTable</a>; i++) {
00677             FocusedConsole = <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a5">ConsoleTable</a>[i];
00678 
00679             <span class="keywordflow">if</span> (FocusedConsole == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00680             {
00681                 FocusedConsole = LocalAlloc(LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">CONSOLE_TABLE</a>));
00682                 <span class="keywordflow">if</span> (FocusedConsole == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00683                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00684                 <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a5">ConsoleTable</a>[i] = FocusedConsole;
00685             }
00686 
00687             <span class="keywordflow">if</span> ((FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o0">hConsole</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp;
00688                 (FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o28">LateRemove</a>)&amp;&amp;
00689                 (FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o27">Enable</a>)) {
00690                 <a class="code" href="../../d4/d5/conimep_8h.html#a102">RemoveConsoleWorker</a>(hWnd, FocusedConsole);
00691             }
00692 
00693             <span class="keywordflow">if</span> (FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o0">hConsole</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00694                 RtlZeroMemory(FocusedConsole, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">CONSOLE_TABLE</a>));
00695                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a> = LocalAlloc(LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/struct__HKL__TABLE.html">HKL_TABLE</a>)*HKL_INITIAL_TABLE);
00696                 <span class="keywordflow">if</span> (FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00697                 {
00698                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00699                 }
00700                 RtlZeroMemory(FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8/struct__HKL__TABLE.html">HKL_TABLE</a>)*HKL_INITIAL_TABLE);
00701                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o29">hklListMax</a> = <a class="code" href="../../d4/d5/conimep_8h.html#a14">HKL_INITIAL_TABLE</a> ;
00702 
00703                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o4">hIMC_Current</a> = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a1">ImmCreateContext</a>();
00704                 <span class="keywordflow">if</span> (FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o4">hIMC_Current</a> == (HIMC)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00705                     LocalFree(FocusedConsole);
00706                     FocusedConsole = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00707                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00708                 }
00709 
00710                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o5">hIMC_Original</a> = FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o4">hIMC_Current</a>;
00711                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o0">hConsole</a>      = hConsole;
00712                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>       = hWndConsole;
00713 <span class="comment">//                FocusedConsole-&gt;hklActive     = NULL;</span>
00714                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o27">Enable</a>        = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00715 <span class="comment">//                FocusedConsole-&gt;LateRemove    = FALSE;</span>
00716 <span class="comment">//                FocusedConsole-&gt;fNestCandidate = FALSE;</span>
00717 <span class="comment">//                FocusedConsole-&gt;fInComposition = FALSE;</span>
00718 <span class="comment">//                FocusedConsole-&gt;fInCandidate = FALSE;</span>
00719                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o2">ScreenBufferSize</a>.X = <a class="code" href="../../d4/d5/conimep_8h.html#a36">DEFAULT_TEMP_WIDTH</a>;
00720 
00721                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o15">CompAttrColor</a>[0] = <a class="code" href="../../d3/d5/conime_8h.html#a31">DEFAULT_COMP_ENTERED</a>;
00722                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o15">CompAttrColor</a>[1] = <a class="code" href="../../d3/d5/conime_8h.html#a32">DEFAULT_COMP_ALREADY_CONVERTED</a>;
00723                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o15">CompAttrColor</a>[2] = <a class="code" href="../../d3/d5/conime_8h.html#a33">DEFAULT_COMP_CONVERSION</a>;
00724                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o15">CompAttrColor</a>[3] = <a class="code" href="../../d3/d5/conime_8h.html#a34">DEFAULT_COMP_YET_CONVERTED</a>;
00725                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o15">CompAttrColor</a>[4] = <a class="code" href="../../d3/d5/conime_8h.html#a35">DEFAULT_COMP_INPUT_ERROR</a>;
00726                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o15">CompAttrColor</a>[5] = <a class="code" href="../../d3/d5/conime_8h.html#a35">DEFAULT_COMP_INPUT_ERROR</a>;
00727                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o15">CompAttrColor</a>[6] = <a class="code" href="../../d3/d5/conime_8h.html#a35">DEFAULT_COMP_INPUT_ERROR</a>;
00728                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o15">CompAttrColor</a>[7] = <a class="code" href="../../d3/d5/conime_8h.html#a35">DEFAULT_COMP_INPUT_ERROR</a>;
00729 
00730                 <a class="code" href="../../d6/d7/country_8c.html#a15">GetIMEName</a>(FocusedConsole);
00731 
00732                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00733             }
00734         }
00735     } <span class="keywordflow">while</span> (<a class="code" href="../../d4/d5/conimep_8h.html#a99">GrowConsoleTable</a>());
00736 
00737     <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Cannot grow Console Table\n"</span>));
00738     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00739 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a103" doxytag="conimep.h::InsertNewConsole" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL InsertNewConsole           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsole</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWndConsole</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00869">869</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00468">ImeUISetOpenStatus()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00664">InsertConsole()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00033">LockConsoleTable</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00034">UnlockConsoleTable</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00874 {
00875     <span class="comment">// conime receive ime message from console before 1st console registered.</span>
00876     <span class="comment">// this will happen after restart conime when conime dead by bogus ime's AV or </span>
00877     <span class="comment">// other problem</span>
00878     <span class="comment">// so this fail safe code is  necessary to protect consrv.</span>
00879     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(hConsole) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00880         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00881     }
00882 
00883     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a0">LockConsoleTable</a>();
00884 
00885     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d5/conimep_8h.html#a98">InsertConsole</a>(hWnd, hConsole, hWndConsole)) {
00886         <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a1">UnlockConsoleTable</a>();
00887         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00888     }
00889 
00890 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00891 <span class="preprocessor"></span>    DisplayInformation(hWnd, hConsole);
00892 <span class="preprocessor">#endif</span>
00893 <span class="preprocessor"></span>
00894     <a class="code" href="../../d0/d6/consubs_8c.html#a8">ImeUISetOpenStatus</a>( hWndConsole );
00895 
00896     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a1">UnlockConsoleTable</a>();
00897 
00898     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00899 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a132" doxytag="conimep.h::IsDBCSTrailByte" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL IsDBCSTrailByte           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>base</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a118" doxytag="conimep.h::IsUnicodeFullWidth" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL IsUnicodeFullWidth           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN WCHAR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>wch</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00312">312</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d0/d6/nlsxlat_8c-source.html#l00839">RtlUnicodeToMultiByteSize()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00507">DispLenStructedUnicode()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00790">DispLenUnicode()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00805">GetSystemLineJ()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01071">GetSystemLineP()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00962">GetSystemLineT()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00692">IncludeCandidateP()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00555">MakeStatusStrPRC1()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00608">MakeStatusStrPRC2()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00328">MakeStatusStrTaiwan1()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00388">MakeStatusStrTaiwan2()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00315 {
00316     <span class="keywordflow">if</span> (0x20 &lt;= wch &amp;&amp; wch &lt;= 0x7e)
00317         <span class="comment">/* ASCII */</span>
00318         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00319     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0x3041 &lt;= wch &amp;&amp; wch &lt;= 0x3094)
00320         <span class="comment">/* Hiragana */</span>
00321         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00322     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0x30a1 &lt;= wch &amp;&amp; wch &lt;= 0x30f6)
00323         <span class="comment">/* Katakana */</span>
00324         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00325     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0x3105 &lt;= wch &amp;&amp; wch &lt;= 0x312c)
00326         <span class="comment">/* Bopomofo */</span>
00327         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00328     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0x3131 &lt;= wch &amp;&amp; wch &lt;= 0x318e)
00329         <span class="comment">/* Hangul Elements */</span>
00330         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00331     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0xac00 &lt;= wch &amp;&amp; wch &lt;= 0xd7a3)
00332         <span class="comment">/* Korean Hangul Syllables */</span>
00333         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00334     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0xff01 &lt;= wch &amp;&amp; wch &lt;= 0xff5e)
00335         <span class="comment">/* Fullwidth ASCII variants */</span>
00336         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00337     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0xff61 &lt;= wch &amp;&amp; wch &lt;= 0xff9f)
00338         <span class="comment">/* Halfwidth Katakana variants */</span>
00339         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00340     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (0xffa0 &lt;= wch &amp;&amp; wch &lt;= 0xffbe) ||
00341               (0xffc2 &lt;= wch &amp;&amp; wch &lt;= 0xffc7) ||
00342               (0xffca &lt;= wch &amp;&amp; wch &lt;= 0xffcf) ||
00343               (0xffd2 &lt;= wch &amp;&amp; wch &lt;= 0xffd7) ||
00344               (0xffda &lt;= wch &amp;&amp; wch &lt;= 0xffdc)   )
00345         <span class="comment">/* Halfwidth Hangule variants */</span>
00346         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00347     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0xffe0 &lt;= wch &amp;&amp; wch &lt;= 0xffe6)
00348         <span class="comment">/* Fullwidth symbol variants */</span>
00349         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00350     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0x4e00 &lt;= wch &amp;&amp; wch &lt;= 0x9fa5)
00351         <span class="comment">/* Han Ideographic */</span>
00352         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00353     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0xf900 &lt;= wch &amp;&amp; wch &lt;= 0xfa2d)
00354         <span class="comment">/* Han Ideographic Compatibility */</span>
00355         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00356     <span class="keywordflow">else</span>
00357     {
00358 <span class="preprocessor">#if 0</span>
00359 <span class="preprocessor"></span>        <span class="comment">/*</span>
00360 <span class="comment">         * Hack this block for I don't know FONT of Console Window.</span>
00361 <span class="comment">         *</span>
00362 <span class="comment">         * If you would like perfect result from IsUnicodeFullWidth routine,</span>
00363 <span class="comment">         * then you should enable this block and</span>
00364 <span class="comment">         * you should know FONT of Console Window.</span>
00365 <span class="comment">         */</span>
00366 
00367         <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> Width;
00368         TEXTMETRIC tmi;
00369 
00370         <span class="comment">/* Unknown character */</span>
00371 
00372         GetTextMetricsW(hDC, &amp;tmi);
00373         <span class="keywordflow">if</span> (IS_ANY_DBCS_CHARSET(tmi.tmCharSet))
00374             tmi.tmMaxCharWidth /= 2;
00375 
00376         GetCharWidth32(hDC, wch, wch, &amp;Width);
00377         <span class="keywordflow">if</span> (Width == tmi.tmMaxCharWidth)
00378             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00379         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Width == tmi.tmMaxCharWidth*2)
00380             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00381 <span class="preprocessor">#else</span>
00382 <span class="preprocessor"></span>        ULONG MultiByteSize;
00383 
00384         <a class="code" href="../../d9/d6/nlsxlat_8c.html#a36">RtlUnicodeToMultiByteSize</a>(&amp;MultiByteSize, &amp;wch, <span class="keyword">sizeof</span>(WCHAR));
00385         <span class="keywordflow">if</span> (MultiByteSize == 2)
00386             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> ;
00387         <span class="keywordflow">else</span>
00388             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> ;
00389 <span class="preprocessor">#endif</span>
00390 <span class="preprocessor"></span>    }
00391     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(FALSE);
00392     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00393 <span class="preprocessor">#if 0</span>
00394 <span class="preprocessor"></span>    ULONG MultiByteSize;
00395 
00396     <a class="code" href="../../d9/d6/nlsxlat_8c.html#a36">RtlUnicodeToMultiByteSize</a>(&amp;MultiByteSize, &amp;wch, <span class="keyword">sizeof</span>(WCHAR));
00397     <span class="keywordflow">if</span> (MultiByteSize == 2)
00398         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> ;
00399     <span class="keywordflow">else</span>
00400         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> ;
00401 <span class="preprocessor">#endif</span>
00402 <span class="preprocessor"></span>}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a138" doxytag="conimep.h::MakeInfoStringJapan" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MakeInfoStringJapan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpModeInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00209">209</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d5/d4/conimep_8h-source.html#l00104">_CONSOLE_TABLE::dwConversion</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00105">_CONSOLE_TABLE::dwSentence</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00103">_CONSOLE_TABLE::fOpen</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00506">GetKeyState()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00024">IMECMode</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00027">IMECModeAHAN</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00205">IMECModeAHANLen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00028">IMECModeAZEN</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00206">IMECModeAZENLen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00029">IMECModeHHAN</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00207">IMECModeHHANLen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00030">IMECModeHZEN</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00208">IMECModeHZENLen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00026">IMECModeKana</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00204">IMECModeKanaLen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00031">IMECModeKHAN</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00209">IMECModeKHANLen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00032">IMECModeKZEN</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00210">IMECModeKZENLen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00025">IMECModeRoman</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00203">IMECModeRomanLen</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00199">MODEDISP_AUTO</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00196">MODEDISP_NONE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00200">MODEDISP_PHRASE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00197">MODEDISP_PLAURAL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00198">MODEDISP_SINGLE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00051">_CONIME_UIMODEINFO::ModeString</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00049">_CONIME_UIMODEINFO::ModeStringLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00050">_CONIME_UIMODEINFO::Position</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d4/d4/conime_8h-source.html#l00046">VIEW_RIGHT</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00183">ImeUIMakeInfoString()</a>.
<p>
<pre class="fragment"><div>00213 {
00214     <span class="keywordtype">int</span> i , j;
00215     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwConversion;
00216     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwSentence;
00217 
00218     dwConversion = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a>;
00219     dwSentence = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o8">dwSentence</a>;
00220 
00221     i = j = 0;
00222     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o6">fOpen</a>){
00223         <span class="keywordflow">if</span> (dwConversion &amp; IME_CMODE_FULLSHAPE) {
00224             <span class="keywordflow">if</span> (dwConversion &amp; IME_CMODE_NATIVE) {
00225                 <span class="keywordflow">if</span> (dwConversion &amp; IME_CMODE_KATAKANA) {
00226                     <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a81">IMECModeKZENLen</a>; j++, i++)
00227                         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a8">IMECModeKZEN</a>[j];
00228                 }
00229                 <span class="keywordflow">else</span> {
00230                     <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a79">IMECModeHZENLen</a>; j++, i++)
00231                         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a6">IMECModeHZEN</a>[j];
00232                 }
00233             }
00234             <span class="keywordflow">else</span> {
00235                 <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a77">IMECModeAZENLen</a>; j++, i++)
00236                     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a4">IMECModeAZEN</a>[j];
00237             }
00238         }
00239         <span class="keywordflow">else</span> {
00240             <span class="keywordflow">if</span> (dwConversion &amp; IME_CMODE_NATIVE) {
00241                 <span class="keywordflow">if</span> (dwConversion &amp; IME_CMODE_KATAKANA) {
00242                     <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a80">IMECModeKHANLen</a>; j++, i++)
00243                         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a7">IMECModeKHAN</a>[j];
00244                 }
00245                 <span class="keywordflow">else</span> {
00246                     <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a78">IMECModeHHANLen</a>; j++, i++)
00247                         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a5">IMECModeHHAN</a>[j];
00248                 }
00249             }
00250             <span class="keywordflow">else</span> {
00251                 <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a76">IMECModeAHANLen</a>; j++, i++)
00252                     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a3">IMECModeAHAN</a>[j];
00253             }
00254         }
00255 
00256         <span class="keywordflow">if</span> (dwSentence &amp; IME_SMODE_NONE)
00257             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a0">IMECMode</a>[<a class="code" href="../../d4/d5/conimep_8h.html#a69">MODEDISP_NONE</a>];
00258         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwSentence &amp; IME_SMODE_PLAURALCLAUSE)
00259             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a0">IMECMode</a>[<a class="code" href="../../d4/d5/conimep_8h.html#a70">MODEDISP_PLAURAL</a>];
00260         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwSentence &amp; IME_SMODE_SINGLECONVERT)
00261             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a0">IMECMode</a>[<a class="code" href="../../d4/d5/conimep_8h.html#a71">MODEDISP_SINGLE</a>];
00262         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwSentence &amp; IME_SMODE_AUTOMATIC)
00263             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a0">IMECMode</a>[<a class="code" href="../../d4/d5/conimep_8h.html#a72">MODEDISP_AUTO</a>];
00264         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwSentence &amp; IME_SMODE_PHRASEPREDICT)
00265             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a0">IMECMode</a>[<a class="code" href="../../d4/d5/conimep_8h.html#a73">MODEDISP_PHRASE</a>];
00266         <span class="keywordflow">else</span> {
00267             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = 0x0020;
00268             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = 0x0020;
00269         }
00270         i++;
00271 
00272         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9/client_2ntstubs_8c.html#a16">GetKeyState</a>(VK_KANA) &amp; 1) {
00273             <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a75">IMECModeKanaLen</a>; j++, i++)
00274                 lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a2">IMECModeKana</a>[j];
00275         }
00276         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwConversion &amp; IME_CMODE_ROMAN) {
00277             <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a74">IMECModeRomanLen</a>; j++, i++)
00278                 lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a1">IMECModeRoman</a>[j];
00279         }
00280     }
00281     <span class="keywordflow">else</span> {
00282         <span class="comment">/*</span>
00283 <span class="comment">         * In this case, fOpen is 0 (==close).</span>
00284 <span class="comment">         * Should be fill mode text buffer in console.</span>
00285 <span class="comment">         * So, console can do fill up that pass to 0 length.</span>
00286 <span class="comment">         */</span>
00287         i = 0;
00288     }
00289     <span class="keywordflow">for</span> (j = 0; j &lt; i; j++ )
00290         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[j].Attributes = 0x0007;
00291     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o0">ModeStringLen</a> = i;
00292     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o1">Position</a> = <a class="code" href="../../d3/d5/conime_8h.html#a2">VIEW_RIGHT</a>;
00293     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00294 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a150" doxytag="conimep.h::MakeInfoStringKorea" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MakeInfoStringKorea           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpModeInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00744">744</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00051">_CONIME_UIMODEINFO::ModeString</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00049">_CONIME_UIMODEINFO::ModeStringLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00050">_CONIME_UIMODEINFO::Position</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>, and <a class="el" href="../../d4/d4/conime_8h-source.html#l00046">VIEW_RIGHT</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00183">ImeUIMakeInfoString()</a>.
<p>
<pre class="fragment"><div>00748 {
00749     <span class="keywordtype">int</span> i , j;
00750 
00751     i = 0;
00752     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
00753     <span class="keywordflow">for</span> (j = 0; j &lt; i; j++ )
00754         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[j].Attributes = 0x0007;
00755     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o0">ModeStringLen</a> = i;
00756     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o1">Position</a> = <a class="code" href="../../d3/d5/conime_8h.html#a2">VIEW_RIGHT</a>;
00757     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00758 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a145" doxytag="conimep.h::MakeInfoStringPRC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MakeInfoStringPRC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpModeInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00525">525</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00119">_CONSOLE_TABLE::fInCandidate</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00113">_CONSOLE_TABLE::fInComposition</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00100">_CONSOLE_TABLE::hklActive</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00468">ImmIsIME()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00692">IncludeCandidateP()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00661">IncludeCompositionP()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00555">MakeStatusStrPRC1()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00608">MakeStatusStrPRC2()</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00049">_CONIME_UIMODEINFO::ModeStringLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00050">_CONIME_UIMODEINFO::Position</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d4/d4/conime_8h-source.html#l00045">VIEW_LEFT</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l01326">CloseCandidatePRC()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00486">GetCompStrPRC()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00183">ImeUIMakeInfoString()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00433">OpenCandidatePRC()</a>, and <a class="el" href="../../d9/d6/country3_8c-source.html#l01013">ReDisplayCompStrPRC()</a>.
<p>
<pre class="fragment"><div>00529 {
00530     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00531     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ModeInfoPtr;
00532     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> LengthForDisp;
00533 
00534     ModeInfoPtr = 0;
00535 
00536     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/layout_8c.html#a20">ImmIsIME</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>) ){
00537         ModeInfoPtr = <a class="code" href="../../d6/d7/country_8c.html#a26">MakeStatusStrPRC1</a>(ConTbl, lpModeInfo, ModeInfoPtr);
00538         <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o13">fInComposition</a>) {
00539             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o16">fInCandidate</a>){
00540                 ModeInfoPtr = <a class="code" href="../../d6/d7/country_8c.html#a29">IncludeCandidateP</a>(ConTbl, lpModeInfo, ModeInfoPtr);
00541             }
00542             <span class="keywordflow">else</span>{
00543                 ModeInfoPtr = <a class="code" href="../../d6/d7/country_8c.html#a28">IncludeCompositionP</a>(ConTbl, lpModeInfo, ModeInfoPtr);
00544             }
00545         }
00546         ModeInfoPtr = <a class="code" href="../../d6/d7/country_8c.html#a27">MakeStatusStrPRC2</a>(ConTbl, lpModeInfo, ModeInfoPtr);
00547     }
00548 
00549     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o0">ModeStringLen</a> = ModeInfoPtr;
00550     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o1">Position</a> = <a class="code" href="../../d3/d5/conime_8h.html#a1">VIEW_LEFT</a>;
00551     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00552 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a139" doxytag="conimep.h::MakeInfoStringTaiwan" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MakeInfoStringTaiwan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpModeInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00298">298</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00119">_CONSOLE_TABLE::fInCandidate</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00113">_CONSOLE_TABLE::fInComposition</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00100">_CONSOLE_TABLE::hklActive</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00468">ImmIsIME()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00474">IncludeCandidateT()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00443">IncludeCompositionT()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00328">MakeStatusStrTaiwan1()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00388">MakeStatusStrTaiwan2()</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00049">_CONIME_UIMODEINFO::ModeStringLen</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00050">_CONIME_UIMODEINFO::Position</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d4/d4/conime_8h-source.html#l00045">VIEW_LEFT</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l01285">CloseCandidateTaiwan()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00272">GetCompStrTaiwan()</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00183">ImeUIMakeInfoString()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00264">OpenCandidateTaiwan()</a>, and <a class="el" href="../../d9/d6/country3_8c-source.html#l00983">ReDisplayCompStrTaiwan()</a>.
<p>
<pre class="fragment"><div>00302 {
00303     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00304     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ModeInfoPtr;
00305     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> LengthForDisp;
00306 
00307     ModeInfoPtr = 0;
00308 
00309     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/layout_8c.html#a20">ImmIsIME</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>) ){
00310         ModeInfoPtr = <a class="code" href="../../d6/d7/country_8c.html#a20">MakeStatusStrTaiwan1</a>(ConTbl, lpModeInfo, ModeInfoPtr);
00311         <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o13">fInComposition</a>) {
00312             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o16">fInCandidate</a>){
00313                 ModeInfoPtr = <a class="code" href="../../d6/d7/country_8c.html#a23">IncludeCandidateT</a>(ConTbl, lpModeInfo, ModeInfoPtr);
00314             }
00315             <span class="keywordflow">else</span>{
00316                 ModeInfoPtr = <a class="code" href="../../d6/d7/country_8c.html#a22">IncludeCompositionT</a>(ConTbl, lpModeInfo, ModeInfoPtr);
00317             }
00318         }
00319         ModeInfoPtr = <a class="code" href="../../d6/d7/country_8c.html#a21">MakeStatusStrTaiwan2</a>(ConTbl, lpModeInfo, ModeInfoPtr);
00320     }
00321 
00322     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o0">ModeStringLen</a> = ModeInfoPtr;
00323     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o1">Position</a> = <a class="code" href="../../d3/d5/conime_8h.html#a1">VIEW_LEFT</a>;
00324     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00325 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a146" doxytag="conimep.h::MakeStatusStrPRC1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> MakeStatusStrPRC1           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpModeInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ModeInfoPtr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00555">555</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d5/d4/conimep_8h-source.html#l00104">_CONSOLE_TABLE::dwConversion</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00035">IMECModeFullShape</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00213">IMECModeFullShapeLen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00036">IMECModeHalfShape</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00214">IMECModeHalfShapeLen</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00312">IsUnicodeFullWidth()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00108">_CONSOLE_TABLE::LayoutName</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00051">_CONIME_UIMODEINFO::ModeString</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00184">UNICODE_COLON</a>, and <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00525">MakeInfoStringPRC()</a>.
<p>
<pre class="fragment"><div>00560 {
00561     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00562     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00563     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwConversion;
00564     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Length;
00565 
00566     dwConversion = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a>;
00567 
00568     i = ModeInfoPtr;
00569     j = 0;
00570     Length = 0;
00571     <span class="keywordflow">while</span> (Length &lt; 9) {
00572         <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o11">LayoutName</a>[j] == 0 )
00573             <span class="keywordflow">break</span>;
00574         <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o11">LayoutName</a>[j] == 0x8f93)
00575             <span class="keywordflow">break</span>;
00576         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o11">LayoutName</a>[j];
00577         Length += <a class="code" href="../../d0/d6/consubs_8c.html#a5">IsUnicodeFullWidth</a>(lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar) ? 2 : 1;
00578         j++;
00579         i++;
00580     }
00581     <span class="keywordflow">if</span> (Length &lt; 9) {
00582         <span class="keywordflow">for</span> (j = Length; j &lt; 9; j++ ) {
00583             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
00584         }
00585     }
00586 
00587 
00588     <span class="keywordflow">if</span> (dwConversion &amp; IME_CMODE_FULLSHAPE) {
00589         <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a82">IMECModeFullShapeLen</a>; j++)
00590             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a9">IMECModeFullShape</a>[j];
00591     }
00592     <span class="keywordflow">else</span>{
00593         <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a83">IMECModeHalfShapeLen</a>; j++)
00594             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a10">IMECModeHalfShape</a>[j];
00595     }
00596 
00597 <span class="comment">// v-HirShi Oct.14.1996 delete it for get space</span>
00598 <span class="comment">//  lpModeInfo-&gt;ModeString[i++].Char.UnicodeChar = UNICODE_SPACE;</span>
00599 
00600     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d4/d5/conimep_8h.html#a60">UNICODE_COLON</a>;
00601 
00602     <span class="keywordflow">for</span> (j = 0; j &lt; i; j++ )
00603         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[j].Attributes = 0x0007;
00604     <span class="keywordflow">return</span> i;
00605 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a147" doxytag="conimep.h::MakeStatusStrPRC2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> MakeStatusStrPRC2           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpModeInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ModeInfoPtr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00608">608</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d7/d6/country_8c-source.html#l00507">DispLenStructedUnicode()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00104">_CONSOLE_TABLE::dwConversion</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00037">IMECModeKeyboard</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00215">IMECModeKeyboardLen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00038">IMECModeSymbol</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00216">IMECModeSymbolLen</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00312">IsUnicodeFullWidth()</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00047">MAXSTATUSCOL</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00051">_CONIME_UIMODEINFO::ModeString</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00096">_CONSOLE_TABLE::ScreenBufferSize</a>, and <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00525">MakeInfoStringPRC()</a>.
<p>
<pre class="fragment"><div>00613 {
00614     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> LengthOfStr;
00615     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> LengthForNum;
00616     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> LengthForNum2;
00617     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CountDispWidth;
00618     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> StatusWidth;
00619     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00620     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00621 
00622     i = ModeInfoPtr;
00623 
00624     StatusWidth = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o2">ScreenBufferSize</a>.X;
00625     <span class="keywordflow">if</span> (StatusWidth &gt; <a class="code" href="../../d3/d5/conime_8h.html#a3">MAXSTATUSCOL</a>) {
00626         StatusWidth = <a class="code" href="../../d3/d5/conime_8h.html#a3">MAXSTATUSCOL</a>;
00627     }
00628 <span class="preprocessor">#if defined (CANDCOUNTPRC) //for wider candidate list space v-hirshi Oct.16.1996</span>
00629 <span class="preprocessor"></span>    LengthOfStr = <a class="code" href="../../d6/d7/country_8c.html#a24">DispLenStructedUnicode</a>(lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>,ModeInfoPtr) + 1 + 4;
00630 <span class="preprocessor">#else</span>
00631 <span class="preprocessor"></span>    LengthOfStr = <a class="code" href="../../d6/d7/country_8c.html#a24">DispLenStructedUnicode</a>(lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>,ModeInfoPtr);
00632 <span class="preprocessor">#endif</span>
00633 <span class="preprocessor"></span>
00634     <span class="keywordflow">if</span> (LengthOfStr &gt; StatusWidth) {
00635         <span class="keywordflow">for</span> ( ; LengthOfStr &gt; StatusWidth; i-- ) {
00636             LengthOfStr -= (<a class="code" href="../../d0/d6/consubs_8c.html#a5">IsUnicodeFullWidth</a>(lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar) ? 2 : 1 );
00637         }
00638     }
00639     <span class="keywordflow">for</span> (j = 0; j &lt; (StatusWidth - LengthOfStr); j++) {
00640         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
00641     }
00642 <span class="preprocessor">#if defined (CANDCOUNTPRC) //for wider candidate list space v-hirshi Oct.16.1996</span>
00643 <span class="preprocessor"></span>    lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
00644 
00645     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a> &amp; IME_CMODE_SYMBOL) {
00646         <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a85">IMECModeSymbolLen</a>; j++)
00647             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a12">IMECModeSymbol</a>[j];
00648     }
00649     <span class="keywordflow">else</span>{
00650         <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a84">IMECModeKeyboardLen</a>; j++)
00651             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a11">IMECModeKeyboard</a>[j];
00652     }
00653 <span class="preprocessor">#endif</span>
00654 <span class="preprocessor"></span>
00655     <span class="keywordflow">for</span> (j = ModeInfoPtr; j &lt; i; j++ )
00656         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[j].Attributes = 0x0007;
00657     <span class="keywordflow">return</span> i;
00658 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a140" doxytag="conimep.h::MakeStatusStrTaiwan1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> MakeStatusStrTaiwan1           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpModeInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ModeInfoPtr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00328">328</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d5/d4/conimep_8h-source.html#l00104">_CONSOLE_TABLE::dwConversion</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00119">_CONSOLE_TABLE::fInCandidate</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00109">_CONSOLE_TABLE::GuideLine</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00039">IMECGuide</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00217">IMECGuideLen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00035">IMECModeFullShape</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00213">IMECModeFullShapeLen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00036">IMECModeHalfShape</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00214">IMECModeHalfShapeLen</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00218">IMECNameLength</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00312">IsUnicodeFullWidth()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00108">_CONSOLE_TABLE::LayoutName</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00051">_CONIME_UIMODEINFO::ModeString</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00184">UNICODE_COLON</a>, and <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00298">MakeInfoStringTaiwan()</a>.
<p>
<pre class="fragment"><div>00333 {
00334     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00335     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00336     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Length;
00337     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwConversion;
00338 
00339     dwConversion = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a>;
00340 
00341     i = ModeInfoPtr;
00342     j = 0;
00343     Length = 0;
00344     <span class="keywordflow">while</span> (Length &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a87">IMECNameLength</a> ) {
00345         <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o11">LayoutName</a>[j] == 0 )
00346             <span class="keywordflow">break</span>;
00347         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o11">LayoutName</a>[j];
00348         Length += <a class="code" href="../../d0/d6/consubs_8c.html#a5">IsUnicodeFullWidth</a>(lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar) ? 2 : 1;
00349         j++;
00350         i++;
00351     }
00352     <span class="keywordflow">if</span> (Length &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a87">IMECNameLength</a>+1) {
00353         <span class="keywordflow">for</span> (j = Length; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a87">IMECNameLength</a>+1; j++ ) {
00354             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
00355         }
00356     }
00357 
00358     <span class="keywordflow">if</span> (dwConversion &amp; IME_CMODE_FULLSHAPE) {
00359         <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a82">IMECModeFullShapeLen</a>; j++)
00360             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a9">IMECModeFullShape</a>[j];
00361     }
00362     <span class="keywordflow">else</span>{
00363         <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a83">IMECModeHalfShapeLen</a>; j++)
00364             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a10">IMECModeHalfShape</a>[j];
00365     }
00366 
00367     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
00368 
00369 <span class="preprocessor">#if defined (CANDCOUNTPRC) //for wider candidate list space Oct.16.1996</span>
00370 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o16">fInCandidate</a>){
00371         <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a86">IMECGuideLen</a>; j++ )
00372             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a13">IMECGuide</a>[8][2+j];
00373     }
00374     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o12">GuideLine</a>[0]){
00375         <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a86">IMECGuideLen</a>; j++ )
00376             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o12">GuideLine</a>[j];
00377     }
00378 <span class="preprocessor">#endif</span>
00379 <span class="preprocessor"></span>
00380     lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d4/d5/conimep_8h.html#a60">UNICODE_COLON</a>;
00381 
00382     <span class="keywordflow">for</span> (j = 0; j &lt; i; j++ )
00383         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[j].Attributes = 0x0007;
00384     <span class="keywordflow">return</span> i;
00385 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a141" doxytag="conimep.h::MakeStatusStrTaiwan2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> MakeStatusStrTaiwan2           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpModeInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ModeInfoPtr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/country_8c-source.html#l00388">388</a> of file <a class="el" href="../../d7/d6/country_8c-source.html">country.c</a>.
<p>
References <a class="el" href="../../d7/d6/country_8c-source.html#l00507">DispLenStructedUnicode()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00104">_CONSOLE_TABLE::dwConversion</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00037">IMECModeKeyboard</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00215">IMECModeKeyboardLen</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00038">IMECModeSymbol</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00216">IMECModeSymbolLen</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00312">IsUnicodeFullWidth()</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00047">MAXSTATUSCOL</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00051">_CONIME_UIMODEINFO::ModeString</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00096">_CONSOLE_TABLE::ScreenBufferSize</a>, and <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00298">MakeInfoStringTaiwan()</a>.
<p>
<pre class="fragment"><div>00393 {
00394     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> LengthOfStr;
00395     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> LengthForNum;
00396     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> LengthForNum2;
00397     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CountDispWidth;
00398     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> StatusWidth;
00399     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00400     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00401 
00402     i = ModeInfoPtr;
00403 
00404     StatusWidth = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o2">ScreenBufferSize</a>.X;
00405     <span class="keywordflow">if</span> (StatusWidth &gt; <a class="code" href="../../d3/d5/conime_8h.html#a3">MAXSTATUSCOL</a>) {
00406         StatusWidth = <a class="code" href="../../d3/d5/conime_8h.html#a3">MAXSTATUSCOL</a>;
00407     }
00408 <span class="preprocessor">#if defined (CANDCOUNTCHT) //for wider candidate list space v-hirshi Oct.16.1996</span>
00409 <span class="preprocessor"></span>    LengthOfStr = <a class="code" href="../../d6/d7/country_8c.html#a24">DispLenStructedUnicode</a>(lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>,ModeInfoPtr) + 1 + 4;
00410 <span class="preprocessor">#else</span>
00411 <span class="preprocessor"></span>    LengthOfStr = <a class="code" href="../../d6/d7/country_8c.html#a24">DispLenStructedUnicode</a>(lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>,ModeInfoPtr);
00412 <span class="preprocessor">#endif</span>
00413 <span class="preprocessor"></span>
00414     <span class="keywordflow">if</span> (LengthOfStr &gt; StatusWidth) {
00415         <span class="keywordflow">for</span> ( ; LengthOfStr &gt; StatusWidth; i-- ) {
00416             LengthOfStr -= (<a class="code" href="../../d0/d6/consubs_8c.html#a5">IsUnicodeFullWidth</a>(lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i].Char.UnicodeChar) ? 2 : 1 );
00417         }
00418     }
00419 
00420     <span class="keywordflow">for</span> (j = 0; j &lt; (StatusWidth - LengthOfStr); j++) {
00421         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
00422     }
00423 
00424 <span class="preprocessor">#if defined (CANDCOUNTCHT) //for wider candidate list space v-hirshi Oct.16.1996</span>
00425 <span class="preprocessor"></span>    lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
00426 
00427     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a> &amp; IME_CMODE_SYMBOL) {
00428         <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a85">IMECModeSymbolLen</a>; j++)
00429             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a12">IMECModeSymbol</a>[j];
00430     }
00431     <span class="keywordflow">else</span>{
00432         <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a84">IMECModeKeyboardLen</a>; j++)
00433             lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[i++].Char.UnicodeChar = <a class="code" href="../../d6/d7/country_8c.html#a11">IMECModeKeyboard</a>[j];
00434     }
00435 <span class="preprocessor">#endif</span>
00436 <span class="preprocessor"></span>
00437     <span class="keywordflow">for</span> (j = ModeInfoPtr; j &lt; i; j++ )
00438         lpModeInfo-&gt;<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html#o2">ModeString</a>[j].Attributes = 0x0007;
00439     <span class="keywordflow">return</span> i;
00440 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a160" doxytag="conimep.h::NumString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID NumString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>StrToWrite</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>NumToDisp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CountDispWidth</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l01182">1182</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00183">UNICODE_SLASH</a>, <a class="el" href="../../d0/d5/verifier_8c-source.html#l03111">UNICODE_SPACE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00182">UNICODE_ZERO</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00805">GetSystemLineJ()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01071">GetSystemLineP()</a>, and <a class="el" href="../../d8/d6/country2_8c-source.html#l00962">GetSystemLineT()</a>.
<p>
<pre class="fragment"><div>01186 {
01187     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
01188     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> k;
01189     k = 1;
01190     <span class="keywordflow">for</span> (i = 1; i &lt; CountDispWidth; i++)
01191         k *= 10;
01192     <span class="keywordflow">for</span> (i = k; i &gt; 0; i /= 10){
01193         k = (NumToDisp / i);
01194         *StrToWrite = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(k + <a class="code" href="../../d4/d5/conimep_8h.html#a58">UNICODE_ZERO</a>);
01195         <span class="keywordflow">if</span> ((*StrToWrite == <a class="code" href="../../d4/d5/conimep_8h.html#a58">UNICODE_ZERO</a>) &amp;&amp;
01196             ((*(StrToWrite-1) == <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>)||(*(StrToWrite-1) == <a class="code" href="../../d4/d5/conimep_8h.html#a59">UNICODE_SLASH</a>)) )
01197             *StrToWrite = <a class="code" href="../../d9/d5/verifier_8c.html#a6">UNICODE_SPACE</a>;
01198         StrToWrite++;
01199         NumToDisp -= (i*k);
01200     }
01201 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a152" doxytag="conimep.h::OpenCandidateJapan" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL OpenCandidateJapan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CandList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>OpenFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l00080">80</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00026">_CONIME_CANDMESSAGE::AttrOff</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00123">_CONSOLE_TABLE::CandListMemAllocSize</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00125">_CONSOLE_TABLE::CandMax</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00124">_CONSOLE_TABLE::CandOff</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00126">_CONSOLE_TABLE::CandSep</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00127">_CONSOLE_TABLE::CandSepAllocSize</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00061">CI_CONIMECANDINFO</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00070">CODEDISPLEN</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00068">DEFAULTCANDTABLE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00067">DELIMITERWIDTH</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00790">DispLenUnicode()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00128">_CONSOLE_TABLE::fNestCandidate</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00805">GetSystemLineJ()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01294">ImmNotifyIME()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00120">_CONSOLE_TABLE::lpCandListMem</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00061">MAX_LISTCAND</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00096">_CONSOLE_TABLE::ScreenBufferSize</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00027">_CONIME_CANDMESSAGE::String</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00121">_CONSOLE_TABLE::SystemLine</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00122">_CONSOLE_TABLE::SystemLineSize</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00024">ImeUIOpenCandidate()</a>.
<p>
<pre class="fragment"><div>00087 {
00088     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwLength;
00089     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex;
00090     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00091     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00092     LPWSTR lpStr;
00093     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwDspLen;
00094     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> width;
00095     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> StartIndex;
00096     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CountDispWidth;
00097     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> AllocLength;
00098     LPCANDIDATELIST lpCandList;
00099     <a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html">LPCONIME_CANDMESSAGE</a> SystemLine;
00100     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> SystemLineSize;
00101     COPYDATASTRUCT CopyData;
00102     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> EnableCodePoint;
00103 
00104     <span class="keywordflow">for</span> (dwIndex = 0; dwIndex &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a26">MAX_LISTCAND</a> ; dwIndex ++ ) {
00105         <span class="keywordflow">if</span> ( CandList &amp; ( 1 &lt;&lt; dwIndex ) ) {
00106             dwLength = ImmGetCandidateList(hIMC, dwIndex, NULL, 0);
00107             <span class="keywordflow">if</span> (dwLength == 0)
00108                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00109             <span class="keywordflow">if</span> ( (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] != dwLength ) &amp;&amp;
00110                  (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
00111                 LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex]);
00112                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] = 0;
00113                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00114             }
00115             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00116                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] = LocalAlloc(LPTR, dwLength);
00117                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00118                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00119                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] = dwLength;
00120             }
00121             lpCandList = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex];
00122             ImmGetCandidateList(hIMC, dwIndex, lpCandList, dwLength);
00123 
00124             <span class="comment">//</span>
00125             <span class="comment">// check each offset value is not over than buffer size.</span>
00126             <span class="comment">//</span>
00127             <span class="keywordflow">if</span> ((lpCandList-&gt;dwCount &gt; 1) &amp;&amp;
00128                 (lpCandList-&gt;dwSelection &gt;= dwLength ||
00129                  lpCandList-&gt;dwPageStart &gt;= dwLength ||
00130                  lpCandList-&gt;dwOffset[lpCandList-&gt;dwSelection] &gt;= dwLength ||
00131                  lpCandList-&gt;dwOffset[lpCandList-&gt;dwPageStart] &gt;= dwLength    )
00132                )
00133                 <span class="keywordflow">break</span>;
00134 
00135             dwLength = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o2">ScreenBufferSize</a>.X;
00136             dwLength = (dwLength &gt; 128) ? 128 : dwLength ;
00137             dwLength = ((dwLength &lt; 12) ? 12 : dwLength );
00138 
00139             j = (dwLength-7)/(<a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>+<span class="keyword">sizeof</span>(WCHAR));
00140             j = ((j &gt; 9)?9:j);
00141             j = lpCandList-&gt;dwCount / j + 10;
00142             AllocLength = (j &gt; <a class="code" href="../../d4/d5/conimep_8h.html#a33">DEFAULTCANDTABLE</a>) ? j : <a class="code" href="../../d4/d5/conimep_8h.html#a33">DEFAULTCANDTABLE</a>;
00143 
00144             <span class="keywordflow">if</span> (lpCandList-&gt;dwStyle == IME_CAND_CODE){
00145                 EnableCodePoint = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00146             }
00147             <span class="keywordflow">else</span>{
00148                 EnableCodePoint = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00149             }
00150 
00151             <span class="keywordflow">if</span> (EnableCodePoint){
00152                 CountDispWidth = <a class="code" href="../../d4/d5/conimep_8h.html#a35">CODEDISPLEN</a>;
00153             }
00154             <span class="keywordflow">else</span> {
00155                 <span class="keywordflow">for</span> (CountDispWidth = 0 ,j = 1; j &lt;= lpCandList-&gt;dwCount; CountDispWidth++)
00156                      j *= 10;
00157                 CountDispWidth *= 2;
00158                 CountDispWidth++;
00159             }
00160 
00161             <span class="keywordflow">if</span> ((ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o24">CandSepAllocSize</a> != <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)*AllocLength) &amp;&amp;
00162                 (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
00163                 LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>);
00164                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00165                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o24">CandSepAllocSize</a> = 0;
00166             }
00167             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00168                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>= LocalAlloc(LPTR, <span class="keyword">sizeof</span>(DWORD)*AllocLength);
00169                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00170                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00171                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o24">CandSepAllocSize</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)*AllocLength;
00172             }
00173 
00174             <span class="keywordflow">if</span> ( EnableCodePoint ){
00175                 j = 0;
00176                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j++] = 0;
00177                 <span class="keywordflow">if</span> (OpenFlag) {
00178                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o21">CandOff</a> = lpCandList-&gt;dwSelection % 9;
00179                 }
00180                 i = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o21">CandOff</a>;
00181                 <span class="keywordflow">for</span> (; i &lt; lpCandList-&gt;dwCount; i+= 9 ) {
00182                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j++] = i;
00183                 }
00184                 <span class="keywordflow">if</span> (i &gt; lpCandList-&gt;dwCount) {
00185                     i = lpCandList-&gt;dwCount;
00186                 }
00187             }
00188             <span class="keywordflow">else</span>{
00189                 j = 0;
00190                 <span class="keywordflow">if</span> (OpenFlag) {
00191                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o21">CandOff</a> = 0;
00192                 }
00193                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j++] = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o21">CandOff</a>;
00194                 lpStr = (LPWSTR)((LPSTR)lpCandList + lpCandList-&gt;dwOffset[ 0 ]);
00195                 dwDspLen = <a class="code" href="../../d7/d7/country2_8c.html#a5">DispLenUnicode</a>( lpStr );
00196                 width = dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;                  <span class="comment">// '1:xxxx 2:xxxx '</span>
00197                 <span class="keywordflow">for</span>( i = 1; i &lt; lpCandList-&gt;dwCount; i++ ) {
00198                     lpStr = (LPWSTR)((LPSTR)lpCandList + lpCandList-&gt;dwOffset[ i ]);
00199                     dwDspLen = <a class="code" href="../../d7/d7/country2_8c.html#a5">DispLenUnicode</a>( lpStr );
00200                     width += dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;
00201                     <span class="keywordflow">if</span> ((width &gt; dwLength-CountDispWidth) ||
00202                         ( i - ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j-1] &gt;= 9)){
00203                         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j++] = i;
00204                         width = dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;
00205                     }
00206                 }
00207             }
00208             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j] = i;
00209             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o22">CandMax</a> = j;
00210 
00211             SystemLineSize = (<span class="keyword">sizeof</span>(WCHAR)+<span class="keyword">sizeof</span>(UCHAR))*dwLength + <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>);
00212             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o19">SystemLineSize</a> &lt; SystemLineSize ){
00213                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>){
00214                     LocalFree( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> );
00215                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00216                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o19">SystemLineSize</a> = 0;
00217                 }
00218                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> = (<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html">LPCONIME_CANDMESSAGE</a>)LocalAlloc(LPTR, SystemLineSize );
00219                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00220                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00221                 }
00222                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o19">SystemLineSize</a> = SystemLineSize;
00223             }
00224             SystemLine = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a>;
00225 
00226             SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o0">AttrOff</a> = <span class="keyword">sizeof</span>(WCHAR) * dwLength + <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>);
00227 
00228             CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a7">CI_CONIMECANDINFO</a>;
00229             CopyData.cbData = (<span class="keyword">sizeof</span>(WCHAR)+<span class="keyword">sizeof</span>(UCHAR))*dwLength + <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>);
00230             CopyData.lpData = SystemLine;
00231             StartIndex = <a class="code" href="../../d7/d7/country2_8c.html#a6">GetSystemLineJ</a>( lpCandList,
00232                            SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o1">String</a>,
00233                            (LPSTR)SystemLine + SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o0">AttrOff</a>,
00234                            dwLength,
00235                            CountDispWidth,
00236                            ConTbl,
00237                            EnableCodePoint);
00238 
00239             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o25">fNestCandidate</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;    <span class="comment">// ImmNotyfyIME call back OpenCandidate Message</span>
00240                                         <span class="comment">// by same data.</span>
00241                                         <span class="comment">// so We ignore this mesage.</span>
00242             <a class="code" href="../../d6/d0/immime_8c.html#a22">ImmNotifyIME</a>(hIMC,
00243                          NI_SETCANDIDATE_PAGESTART,
00244                          dwIndex,
00245                          ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[StartIndex]);
00246 
00247             <a class="code" href="../../d6/d0/immime_8c.html#a22">ImmNotifyIME</a>(hIMC,
00248                          NI_SETCANDIDATE_PAGESIZE,
00249                          dwIndex,
00250                          ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[StartIndex+1] -
00251                          ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[StartIndex]);
00252             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o25">fNestCandidate</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00253 
00254             <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00255                                    (WPARAM)hwnd,
00256                                    (LPARAM)&amp;CopyData
00257                                   );
00258         }
00259     }
00260     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00261 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a155" doxytag="conimep.h::OpenCandidateKorea" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL OpenCandidateKorea           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CandList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>OpenFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l00606">606</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00026">_CONIME_CANDMESSAGE::AttrOff</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00123">_CONSOLE_TABLE::CandListMemAllocSize</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00125">_CONSOLE_TABLE::CandMax</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00124">_CONSOLE_TABLE::CandOff</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00126">_CONSOLE_TABLE::CandSep</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00127">_CONSOLE_TABLE::CandSepAllocSize</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00061">CI_CONIMECANDINFO</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00070">CODEDISPLEN</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00068">DEFAULTCANDTABLE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00067">DELIMITERWIDTH</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00790">DispLenUnicode()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00128">_CONSOLE_TABLE::fNestCandidate</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00805">GetSystemLineJ()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01294">ImmNotifyIME()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00120">_CONSOLE_TABLE::lpCandListMem</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00061">MAX_LISTCAND</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00096">_CONSOLE_TABLE::ScreenBufferSize</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00027">_CONIME_CANDMESSAGE::String</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00121">_CONSOLE_TABLE::SystemLine</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00122">_CONSOLE_TABLE::SystemLineSize</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00024">ImeUIOpenCandidate()</a>.
<p>
<pre class="fragment"><div>00613 {
00614     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwLength;
00615     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex;
00616     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00617     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00618     LPWSTR lpStr;
00619     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwDspLen;
00620     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> width;
00621     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> StartIndex;
00622     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CountDispWidth;
00623     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> AllocLength;
00624     LPCANDIDATELIST lpCandList;
00625     <a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html">LPCONIME_CANDMESSAGE</a> SystemLine;
00626     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> SystemLineSize;
00627     COPYDATASTRUCT CopyData;
00628     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> EnableCodePoint;
00629 
00630     <span class="keywordflow">for</span> (dwIndex = 0; dwIndex &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a26">MAX_LISTCAND</a> ; dwIndex ++ ) {
00631         <span class="keywordflow">if</span> ( CandList &amp; ( 1 &lt;&lt; dwIndex ) ) {
00632             dwLength = ImmGetCandidateList(hIMC, dwIndex, NULL, 0);
00633             <span class="keywordflow">if</span> (dwLength == 0)
00634                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00635             <span class="keywordflow">if</span> ( (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] != dwLength ) &amp;&amp;
00636                  (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
00637                 LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex]);
00638                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] = 0;
00639                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00640             }
00641             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00642                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] = LocalAlloc(LPTR, dwLength);
00643                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00644                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00645                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] = dwLength;
00646             }
00647             lpCandList = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex];
00648             ImmGetCandidateList(hIMC, dwIndex, lpCandList, dwLength);
00649 
00650             <span class="comment">//</span>
00651             <span class="comment">// check each offset value is not over than buffer size.</span>
00652             <span class="comment">//</span>
00653             <span class="keywordflow">if</span> ((lpCandList-&gt;dwCount &gt; 1) &amp;&amp;
00654                 (lpCandList-&gt;dwSelection &gt;= dwLength ||
00655                  lpCandList-&gt;dwPageStart &gt;= dwLength ||
00656                  lpCandList-&gt;dwOffset[lpCandList-&gt;dwSelection] &gt;= dwLength ||
00657                  lpCandList-&gt;dwOffset[lpCandList-&gt;dwPageStart] &gt;= dwLength    )
00658                )
00659                 <span class="keywordflow">break</span>;
00660 
00661             dwLength = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o2">ScreenBufferSize</a>.X;
00662             dwLength = (dwLength &gt; 128) ? 128 : dwLength ;
00663             dwLength = ((dwLength &lt; 12) ? 12 : dwLength );
00664 
00665             j = (dwLength-7)/(<a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>+<span class="keyword">sizeof</span>(WCHAR));
00666             j = ((j &gt; 9)?9:j);
00667             j = lpCandList-&gt;dwCount / j + 10;
00668             AllocLength = (j &gt; <a class="code" href="../../d4/d5/conimep_8h.html#a33">DEFAULTCANDTABLE</a>) ? j : <a class="code" href="../../d4/d5/conimep_8h.html#a33">DEFAULTCANDTABLE</a>;
00669 
00670             <span class="keywordflow">if</span> (lpCandList-&gt;dwStyle == IME_CAND_CODE){
00671                 EnableCodePoint = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00672             }
00673             <span class="keywordflow">else</span>{
00674                 EnableCodePoint = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00675             }
00676 
00677             <span class="keywordflow">if</span> (EnableCodePoint){
00678                 CountDispWidth = <a class="code" href="../../d4/d5/conimep_8h.html#a35">CODEDISPLEN</a>;
00679             }
00680             <span class="keywordflow">else</span> {
00681                 <span class="keywordflow">for</span> (CountDispWidth = 0 ,j = 1; j &lt;= lpCandList-&gt;dwCount; CountDispWidth++)
00682                      j *= 10;
00683                 CountDispWidth *= 2;
00684                 CountDispWidth++;
00685             }
00686 
00687             <span class="keywordflow">if</span> ((ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o24">CandSepAllocSize</a> != <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)*AllocLength) &amp;&amp;
00688                 (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
00689                 LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>);
00690                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00691                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o24">CandSepAllocSize</a> = 0;
00692             }
00693             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00694                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>= LocalAlloc(LPTR, <span class="keyword">sizeof</span>(DWORD)*AllocLength);
00695                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00696                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00697                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o24">CandSepAllocSize</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)*AllocLength;
00698             }
00699 
00700             <span class="keywordflow">if</span> ( EnableCodePoint ){
00701                 j = 0;
00702                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j++] = 0;
00703                 <span class="keywordflow">if</span> (OpenFlag) {
00704                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o21">CandOff</a> = lpCandList-&gt;dwSelection % 9;
00705                 }
00706                 i = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o21">CandOff</a>;
00707                 <span class="keywordflow">for</span> (; i &lt; lpCandList-&gt;dwCount; i+= 9 ) {
00708                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j++] = i;
00709                 }
00710                 <span class="keywordflow">if</span> (i &gt; lpCandList-&gt;dwCount) {
00711                     i = lpCandList-&gt;dwCount;
00712                 }
00713             }
00714             <span class="keywordflow">else</span>{
00715                 j = 0;
00716                 <span class="keywordflow">if</span> (OpenFlag) {
00717                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o21">CandOff</a> = 0;
00718                 }
00719                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j++] = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o21">CandOff</a>;
00720                 lpStr = (LPWSTR)((LPSTR)lpCandList + lpCandList-&gt;dwOffset[ 0 ]);
00721                 dwDspLen = <a class="code" href="../../d7/d7/country2_8c.html#a5">DispLenUnicode</a>( lpStr );
00722                 width = dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;                  <span class="comment">// '1:xxxx 2:xxxx '</span>
00723                 <span class="keywordflow">for</span>( i = 1; i &lt; lpCandList-&gt;dwCount; i++ ) {
00724                     lpStr = (LPWSTR)((LPSTR)lpCandList + lpCandList-&gt;dwOffset[ i ]);
00725                     dwDspLen = <a class="code" href="../../d7/d7/country2_8c.html#a5">DispLenUnicode</a>( lpStr );
00726                     width += dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;
00727                     <span class="keywordflow">if</span> ((width &gt; dwLength-CountDispWidth) ||
00728                         ( i - ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j-1] &gt;= 9)){
00729                         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j++] = i;
00730                         width = dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;
00731                     }
00732                 }
00733             }
00734             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j] = i;
00735             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o22">CandMax</a> = j;
00736 
00737             SystemLineSize = (<span class="keyword">sizeof</span>(WCHAR)+<span class="keyword">sizeof</span>(UCHAR))*dwLength + <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>);
00738             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o19">SystemLineSize</a> &lt; SystemLineSize ){
00739                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>){
00740                     LocalFree( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> );
00741                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00742                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o19">SystemLineSize</a> = 0;
00743                 }
00744                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> = (<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html">LPCONIME_CANDMESSAGE</a>)LocalAlloc(LPTR, SystemLineSize );
00745                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00746                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00747                 }
00748                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o19">SystemLineSize</a> = SystemLineSize;
00749             }
00750             SystemLine = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a>;
00751 
00752             SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o0">AttrOff</a> = <span class="keyword">sizeof</span>(WCHAR) * dwLength + <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>);
00753 
00754             CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a7">CI_CONIMECANDINFO</a>;
00755             CopyData.cbData = (<span class="keyword">sizeof</span>(WCHAR)+<span class="keyword">sizeof</span>(UCHAR))*dwLength + <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>);
00756             CopyData.lpData = SystemLine;
00757             StartIndex = <a class="code" href="../../d7/d7/country2_8c.html#a6">GetSystemLineJ</a>( lpCandList,
00758                            SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o1">String</a>,
00759                            (LPSTR)SystemLine + SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o0">AttrOff</a>,
00760                            dwLength,
00761                            CountDispWidth,
00762                            ConTbl,
00763                            EnableCodePoint);
00764 
00765             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o25">fNestCandidate</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;    <span class="comment">// ImmNotyfyIME call back OpenCandidate Message</span>
00766                                         <span class="comment">// by same data.</span>
00767                                         <span class="comment">// so We ignore this mesage.</span>
00768             <a class="code" href="../../d6/d0/immime_8c.html#a22">ImmNotifyIME</a>(hIMC,
00769                          NI_SETCANDIDATE_PAGESTART,
00770                          dwIndex,
00771                          ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[StartIndex]);
00772 
00773             <a class="code" href="../../d6/d0/immime_8c.html#a22">ImmNotifyIME</a>(hIMC,
00774                          NI_SETCANDIDATE_PAGESIZE,
00775                          dwIndex,
00776                          ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[StartIndex+1] -
00777                          ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[StartIndex]);
00778             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o25">fNestCandidate</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00779 
00780             <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00781                                    (WPARAM)hwnd,
00782                                    (LPARAM)&amp;CopyData
00783                                  );
00784         }
00785     }
00786     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00787 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a154" doxytag="conimep.h::OpenCandidatePRC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL OpenCandidatePRC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CandList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>OpenFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l00433">433</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00026">_CONIME_CANDMESSAGE::AttrOff</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00123">_CONSOLE_TABLE::CandListMemAllocSize</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00125">_CONSOLE_TABLE::CandMax</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00124">_CONSOLE_TABLE::CandOff</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00126">_CONSOLE_TABLE::CandSep</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00127">_CONSOLE_TABLE::CandSepAllocSize</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00059">CI_CONIMEMODEINFO</a>, <a class="el" href="../../d3/d5/conime_8h.html#a42">CONIME_UIMODEINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00068">DEFAULTCANDTABLE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00067">DELIMITERWIDTH</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00790">DispLenUnicode()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00128">_CONSOLE_TABLE::fNestCandidate</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01071">GetSystemLineP()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01294">ImmNotifyIME()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00120">_CONSOLE_TABLE::lpCandListMem</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00525">MakeInfoStringPRC()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00061">MAX_LISTCAND</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00194">PRCCOMPWIDTH</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00096">_CONSOLE_TABLE::ScreenBufferSize</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00027">_CONIME_CANDMESSAGE::String</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00121">_CONSOLE_TABLE::SystemLine</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00122">_CONSOLE_TABLE::SystemLineSize</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00024">ImeUIOpenCandidate()</a>.
<p>
<pre class="fragment"><div>00440 {
00441     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwLength;
00442     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex;
00443     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00444     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00445     LPWSTR lpStr;
00446     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwDspLen;
00447     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> width;
00448     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> StartIndex;
00449     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CountDispWidth;
00450     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> AllocLength;
00451     LPCANDIDATELIST lpCandList;
00452     <a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html">LPCONIME_CANDMESSAGE</a> SystemLine;
00453     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> SystemLineSize;
00454     COPYDATASTRUCT CopyData;
00455     <a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo;
00456 
00457     lpModeInfo = (<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>)LocalAlloc( LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) );
00458     <span class="keywordflow">if</span> ( lpModeInfo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00459         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00460     }
00461 
00462     <span class="keywordflow">for</span> (dwIndex = 0; dwIndex &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a26">MAX_LISTCAND</a> ; dwIndex ++ ) {
00463         <span class="keywordflow">if</span> ( CandList &amp; ( 1 &lt;&lt; dwIndex ) ) {
00464             dwLength = ImmGetCandidateList(hIMC, dwIndex, NULL, 0);
00465             <span class="keywordflow">if</span> (dwLength == 0)
00466                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00467             <span class="keywordflow">if</span> ( (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] != dwLength ) &amp;&amp;
00468                  (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
00469                 LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex]);
00470                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] = 0;
00471                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00472             }
00473             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00474                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] = LocalAlloc(LPTR, dwLength);
00475                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00476                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00477                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] = dwLength;
00478             }
00479             lpCandList = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex];
00480             ImmGetCandidateList(hIMC, dwIndex, lpCandList, dwLength);
00481 
00482             <span class="comment">//</span>
00483             <span class="comment">// check each offset value is not over than buffer size.</span>
00484             <span class="comment">//</span>
00485             <span class="keywordflow">if</span> ((lpCandList-&gt;dwCount &gt; 1) &amp;&amp;
00486                 (lpCandList-&gt;dwSelection &gt;= dwLength ||
00487                  lpCandList-&gt;dwPageStart &gt;= dwLength ||
00488                  lpCandList-&gt;dwOffset[lpCandList-&gt;dwSelection] &gt;= dwLength ||
00489                  lpCandList-&gt;dwOffset[lpCandList-&gt;dwPageStart] &gt;= dwLength    )
00490                )
00491                 <span class="keywordflow">break</span>;
00492 
00493             dwLength = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o2">ScreenBufferSize</a>.X;
00494             dwLength = (dwLength &gt; 128) ? 128 : dwLength ;
00495             dwLength = ((dwLength &lt; 12) ? 12 : dwLength );
00496 <span class="preprocessor">#if defined (CANDCOUNTPRC) //for wider candidate list space v-hirshi Oct.16.1996</span>
00497 <span class="preprocessor"></span>            dwLength -= (20 + <a class="code" href="../../d4/d5/conimep_8h.html#a68">PRCCOMPWIDTH</a>); <span class="comment">//(8+1+4+1+PRCCOMPWIDTH+1+...+5)</span>
00498 <span class="preprocessor">#else</span>
00499 <span class="preprocessor"></span>            dwLength -= (15 + <a class="code" href="../../d4/d5/conimep_8h.html#a68">PRCCOMPWIDTH</a>); <span class="comment">//(8+1+4+1+PRCCOMPWIDTH+1+...)</span>
00500 <span class="preprocessor">#endif</span>
00501 <span class="preprocessor"></span>
00502             j = (dwLength-7)/(<a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>+<span class="keyword">sizeof</span>(WCHAR));
00503             j = ((j &gt; 9)?9:j);
00504             j = lpCandList-&gt;dwCount / j + 10;
00505             AllocLength = (j &gt; <a class="code" href="../../d4/d5/conimep_8h.html#a33">DEFAULTCANDTABLE</a>) ? j : <a class="code" href="../../d4/d5/conimep_8h.html#a33">DEFAULTCANDTABLE</a>;
00506 
00507 <span class="preprocessor">#if defined (CANDCOUNTPRC) //for wider candidate list space v-hirshi Oct.16.1996</span>
00508 <span class="preprocessor"></span>            <span class="keywordflow">for</span> (CountDispWidth = 0 ,j = 1; j &lt;= lpCandList-&gt;dwCount; CountDispWidth++)
00509                  j *= 10;
00510             CountDispWidth *= 2;
00511             CountDispWidth++;
00512 <span class="preprocessor">#else</span>
00513 <span class="preprocessor"></span>            CountDispWidth = 0;
00514 <span class="preprocessor">#endif</span>
00515 <span class="preprocessor"></span>
00516             <span class="keywordflow">if</span> ((ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o24">CandSepAllocSize</a> != <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)*AllocLength) &amp;&amp;
00517                 (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
00518                 LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>);
00519                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00520                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o24">CandSepAllocSize</a> = 0;
00521             }
00522             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00523                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>= LocalAlloc(LPTR, <span class="keyword">sizeof</span>(DWORD)*AllocLength);
00524                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00525                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00526                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o24">CandSepAllocSize</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)*AllocLength;
00527             }
00528 
00529             j = 0;
00530             <span class="keywordflow">if</span> (OpenFlag) {
00531                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o21">CandOff</a> = 0;
00532             }
00533             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j++] = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o21">CandOff</a>;
00534             lpStr = (LPWSTR)((LPSTR)lpCandList + lpCandList-&gt;dwOffset[ 0 ]);
00535             dwDspLen = <a class="code" href="../../d7/d7/country2_8c.html#a5">DispLenUnicode</a>( lpStr );
00536             width = dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;                  <span class="comment">// '1:xxxx 2:xxxx '</span>
00537             <span class="keywordflow">for</span>( i = 1; i &lt; lpCandList-&gt;dwCount; i++ ) {
00538                 lpStr = (LPWSTR)((LPSTR)lpCandList + lpCandList-&gt;dwOffset[ i ]);
00539                 dwDspLen = <a class="code" href="../../d7/d7/country2_8c.html#a5">DispLenUnicode</a>( lpStr );
00540                 width += dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;
00541                 <span class="keywordflow">if</span> ((width &gt; dwLength-CountDispWidth) ||
00542                     ( i - ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j-1] &gt;= 9)){
00543                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j++] = i;
00544                     width = dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;
00545                 }
00546             }
00547             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j] = i;
00548             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o22">CandMax</a> = j;
00549 
00550             SystemLineSize = (<span class="keyword">sizeof</span>(WCHAR)+<span class="keyword">sizeof</span>(UCHAR))*dwLength + <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>);
00551             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o19">SystemLineSize</a> &lt; SystemLineSize ){
00552                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>){
00553                     LocalFree( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> );
00554                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00555                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o19">SystemLineSize</a> = 0;
00556                 }
00557                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> = (<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html">LPCONIME_CANDMESSAGE</a>)LocalAlloc(LPTR, SystemLineSize );
00558                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00559                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00560                 }
00561                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o19">SystemLineSize</a> = SystemLineSize;
00562             }
00563             SystemLine = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a>;
00564 
00565             SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o0">AttrOff</a> = <span class="keyword">sizeof</span>(WCHAR) * dwLength + <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>);
00566 
00567             StartIndex = <a class="code" href="../../d7/d7/country2_8c.html#a8">GetSystemLineP</a>( lpCandList,
00568                            SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o1">String</a>,
00569                            (LPSTR)SystemLine + SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o0">AttrOff</a>,
00570                            dwLength,
00571                            CountDispWidth,
00572                            ConTbl
00573                            );
00574 
00575             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o25">fNestCandidate</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;    <span class="comment">// ImmNotyfyIME call back OpenCandidate Message</span>
00576                                         <span class="comment">// by same data.</span>
00577                                         <span class="comment">// so We ignore this mesage.</span>
00578             <a class="code" href="../../d6/d0/immime_8c.html#a22">ImmNotifyIME</a>(hIMC,
00579                          NI_SETCANDIDATE_PAGESTART,
00580                          dwIndex,
00581                          ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[StartIndex]);
00582 
00583             <a class="code" href="../../d6/d0/immime_8c.html#a22">ImmNotifyIME</a>(hIMC,
00584                          NI_SETCANDIDATE_PAGESIZE,
00585                          dwIndex,
00586                          ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[StartIndex+1] -
00587                          ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[StartIndex]);
00588             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o25">fNestCandidate</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00589 
00590             CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a5">CI_CONIMEMODEINFO</a>;
00591             CopyData.cbData = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>);
00592             CopyData.lpData = lpModeInfo;
00593             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7/country_8c.html#a25">MakeInfoStringPRC</a>(ConTbl, lpModeInfo) ) {
00594                 <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00595                                        (WPARAM)hwnd,
00596                                        (LPARAM)&amp;CopyData
00597                                      );
00598             }
00599         }
00600     }
00601     LocalFree( lpModeInfo );
00602     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00603 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a153" doxytag="conimep.h::OpenCandidateTaiwan" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL OpenCandidateTaiwan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CandList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>OpenFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d6/country2_8c-source.html#l00264">264</a> of file <a class="el" href="../../d8/d6/country2_8c-source.html">country2.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00026">_CONIME_CANDMESSAGE::AttrOff</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00123">_CONSOLE_TABLE::CandListMemAllocSize</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00125">_CONSOLE_TABLE::CandMax</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00124">_CONSOLE_TABLE::CandOff</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00126">_CONSOLE_TABLE::CandSep</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00127">_CONSOLE_TABLE::CandSepAllocSize</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00059">CI_CONIMEMODEINFO</a>, <a class="el" href="../../d3/d5/conime_8h.html#a42">CONIME_UIMODEINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00068">DEFAULTCANDTABLE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00067">DELIMITERWIDTH</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00790">DispLenUnicode()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00128">_CONSOLE_TABLE::fNestCandidate</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00962">GetSystemLineT()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00213">IMECModeFullShapeLen</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00218">IMECNameLength</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01294">ImmNotifyIME()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00120">_CONSOLE_TABLE::lpCandListMem</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00298">MakeInfoStringTaiwan()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00061">MAX_LISTCAND</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00096">_CONSOLE_TABLE::ScreenBufferSize</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00027">_CONIME_CANDMESSAGE::String</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00121">_CONSOLE_TABLE::SystemLine</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00122">_CONSOLE_TABLE::SystemLineSize</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d6/country2_8c-source.html#l00024">ImeUIOpenCandidate()</a>.
<p>
<pre class="fragment"><div>00271 {
00272     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwLength;
00273     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex;
00274     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00275     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00276     LPWSTR lpStr;
00277     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwDspLen;
00278     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> width;
00279     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> StartIndex;
00280     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CountDispWidth;
00281     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> AllocLength;
00282     LPCANDIDATELIST lpCandList;
00283     <a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html">LPCONIME_CANDMESSAGE</a> SystemLine;
00284     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> SystemLineSize;
00285     COPYDATASTRUCT CopyData;
00286     <a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo;
00287 
00288     lpModeInfo = (<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>)LocalAlloc( LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) );
00289     <span class="keywordflow">if</span> ( lpModeInfo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00290         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00291     }
00292 
00293     <span class="keywordflow">for</span> (dwIndex = 0; dwIndex &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a26">MAX_LISTCAND</a> ; dwIndex ++ ) {
00294         <span class="keywordflow">if</span> ( CandList &amp; ( 1 &lt;&lt; dwIndex ) ) {
00295             dwLength = ImmGetCandidateList(hIMC, dwIndex, NULL, 0);
00296             <span class="keywordflow">if</span> (dwLength == 0)
00297                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00298             <span class="keywordflow">if</span> ( (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] != dwLength ) &amp;&amp;
00299                  (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
00300                 LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex]);
00301                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] = 0;
00302                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00303             }
00304             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00305                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] = LocalAlloc(LPTR, dwLength);
00306                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex] == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00307                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00308                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o20">CandListMemAllocSize</a>[dwIndex] = dwLength;
00309             }
00310             lpCandList = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[dwIndex];
00311             ImmGetCandidateList(hIMC, dwIndex, lpCandList, dwLength);
00312 
00313             <span class="comment">//</span>
00314             <span class="comment">// check each offset value is not over than buffer size.</span>
00315             <span class="comment">//</span>
00316             <span class="keywordflow">if</span> ((lpCandList-&gt;dwCount &gt; 1) &amp;&amp;
00317                 (lpCandList-&gt;dwSelection &gt;= dwLength ||
00318                  lpCandList-&gt;dwPageStart &gt;= dwLength ||
00319                  lpCandList-&gt;dwOffset[lpCandList-&gt;dwSelection] &gt;= dwLength ||
00320                  lpCandList-&gt;dwOffset[lpCandList-&gt;dwPageStart] &gt;= dwLength    )
00321                )
00322                 <span class="keywordflow">break</span>;
00323 
00324             dwLength = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o2">ScreenBufferSize</a>.X;
00325             dwLength = (dwLength &gt; 128) ? 128 : dwLength ;
00326             dwLength = ((dwLength &lt; 12) ? 12 : dwLength );
00327 <span class="preprocessor">#if defined (CANDCOUNTCHT) //for wider candidate list space v-hirshi Oct.16.1996</span>
00328 <span class="preprocessor"></span>            dwLength -= 28; <span class="comment">// 6+1+4+1+10+1+....+4+1</span>
00329 <span class="preprocessor">#else</span>
00330 <span class="preprocessor"></span>            dwLength -= <a class="code" href="../../d4/d5/conimep_8h.html#a87">IMECNameLength</a>+1+<a class="code" href="../../d4/d5/conimep_8h.html#a82">IMECModeFullShapeLen</a>*2+1; <span class="comment">// 4+1+2+1+....</span>
00331 <span class="preprocessor">#endif</span>
00332 <span class="preprocessor"></span>
00333             j = (dwLength-7)/(<a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>+<span class="keyword">sizeof</span>(WCHAR));
00334             j = ((j &gt; 9)?9:j);
00335             j = lpCandList-&gt;dwCount / j + 10;
00336             AllocLength = (j &gt; <a class="code" href="../../d4/d5/conimep_8h.html#a33">DEFAULTCANDTABLE</a>) ? j : <a class="code" href="../../d4/d5/conimep_8h.html#a33">DEFAULTCANDTABLE</a>;
00337 
00338             <span class="keywordflow">for</span> (CountDispWidth = 0 ,j = 1; j &lt;= lpCandList-&gt;dwCount; CountDispWidth++)
00339                  j *= 10;
00340             CountDispWidth *= 2;
00341             CountDispWidth++;
00342 
00343             <span class="keywordflow">if</span> ((ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o24">CandSepAllocSize</a> != <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)*AllocLength) &amp;&amp;
00344                 (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
00345                 LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>);
00346                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00347                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o24">CandSepAllocSize</a> = 0;
00348             }
00349             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00350                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>= LocalAlloc(LPTR, <span class="keyword">sizeof</span>(DWORD)*AllocLength);
00351                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00352                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00353                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o24">CandSepAllocSize</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)*AllocLength;
00354             }
00355 
00356             j = 0;
00357             <span class="keywordflow">if</span> (OpenFlag) {
00358                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o21">CandOff</a> = 0;
00359             }
00360             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j++] = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o21">CandOff</a>;
00361             lpStr = (LPWSTR)((LPSTR)lpCandList + lpCandList-&gt;dwOffset[ 0 ]);
00362             dwDspLen = <a class="code" href="../../d7/d7/country2_8c.html#a5">DispLenUnicode</a>( lpStr );
00363             width = dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;                  <span class="comment">// '1:xxxx 2:xxxx '</span>
00364             <span class="keywordflow">for</span>( i = 1; i &lt; lpCandList-&gt;dwCount; i++ ) {
00365                 lpStr = (LPWSTR)((LPSTR)lpCandList + lpCandList-&gt;dwOffset[ i ]);
00366                 dwDspLen = <a class="code" href="../../d7/d7/country2_8c.html#a5">DispLenUnicode</a>( lpStr );
00367                 width += dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;
00368                 <span class="keywordflow">if</span> ((width &gt; dwLength-CountDispWidth) ||
00369                     ( i - ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j-1] &gt;= 9)){
00370                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j++] = i;
00371                     width = dwDspLen + <a class="code" href="../../d4/d5/conimep_8h.html#a32">DELIMITERWIDTH</a>;
00372                 }
00373             }
00374             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[j] = i;
00375             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o22">CandMax</a> = j;
00376 
00377             SystemLineSize = (<span class="keyword">sizeof</span>(WCHAR)+<span class="keyword">sizeof</span>(UCHAR))*dwLength + <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>);
00378             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o19">SystemLineSize</a> &lt; SystemLineSize ){
00379                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>){
00380                     LocalFree( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> );
00381                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00382                     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o19">SystemLineSize</a> = 0;
00383                 }
00384                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> = (<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html">LPCONIME_CANDMESSAGE</a>)LocalAlloc(LPTR, SystemLineSize );
00385                 <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00386                     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00387                 }
00388                 ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o19">SystemLineSize</a> = SystemLineSize;
00389             }
00390             SystemLine = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o18">SystemLine</a>;
00391 
00392             SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o0">AttrOff</a> = <span class="keyword">sizeof</span>(WCHAR) * dwLength + <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>);
00393 
00394             StartIndex = <a class="code" href="../../d7/d7/country2_8c.html#a7">GetSystemLineT</a>( lpCandList,
00395                            SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o1">String</a>,
00396                            (LPSTR)SystemLine + SystemLine-&gt;<a class="code" href="../../d8/d8/struct__CONIME__CANDMESSAGE.html#o0">AttrOff</a>,
00397                            dwLength,
00398                            CountDispWidth,
00399                            ConTbl
00400                            );
00401 
00402             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o25">fNestCandidate</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;    <span class="comment">// ImmNotyfyIME call back OpenCandidate Message</span>
00403                                         <span class="comment">// by same data.</span>
00404                                         <span class="comment">// so We ignore this mesage.</span>
00405             <a class="code" href="../../d6/d0/immime_8c.html#a22">ImmNotifyIME</a>(hIMC,
00406                          NI_SETCANDIDATE_PAGESTART,
00407                          dwIndex,
00408                          ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[StartIndex]);
00409 
00410             <a class="code" href="../../d6/d0/immime_8c.html#a22">ImmNotifyIME</a>(hIMC,
00411                          NI_SETCANDIDATE_PAGESIZE,
00412                          dwIndex,
00413                          ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[StartIndex+1] -
00414                          ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>[StartIndex]);
00415             ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o25">fNestCandidate</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00416 
00417             CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a5">CI_CONIMEMODEINFO</a>;
00418             CopyData.cbData = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>);
00419             CopyData.lpData = lpModeInfo;
00420             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7/country_8c.html#a19">MakeInfoStringTaiwan</a>(ConTbl, lpModeInfo) ) {
00421                 <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00422                                        (WPARAM)hwnd,
00423                                        (LPARAM)&amp;CopyData
00424                                      );
00425             }
00426         }
00427     }
00428     LocalFree( lpModeInfo );
00429     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00430 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a171" doxytag="conimep.h::ReDisplayCompositionStr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ReDisplayCompositionStr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/country3_8c-source.html#l00928">928</a> of file <a class="el" href="../../d9/d6/country3_8c-source.html">country3.c</a>.
<p>
References <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00113">_CONSOLE_TABLE::fInComposition</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00150">HKL_TO_LANGID</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00100">_CONSOLE_TABLE::hklActive</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00081">LANG_ID_JAPAN</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00082">LANG_ID_KOREA</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00083">LANG_ID_PRC</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00080">LANG_ID_TAIWAN</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00964">ReDisplayCompStrJapan()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l01042">ReDisplayCompStrKorea()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l01013">ReDisplayCompStrPRC()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00983">ReDisplayCompStrTaiwan()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00903">ConsoleSetFocus()</a>.
<p>
<pre class="fragment"><div>00931 {
00932     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00933 
00934     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
00935     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00936         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00937         <span class="keywordflow">return</span>;
00938     }
00939 
00940     <span class="keywordflow">if</span> (! ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o13">fInComposition</a>)
00941        <span class="keywordflow">return</span>;
00942 
00943     <span class="keywordflow">switch</span> ( <a class="code" href="../../d4/d5/conimep_8h.html#a50">HKL_TO_LANGID</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a>))
00944     {
00945         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a43">LANG_ID_JAPAN</a>:
00946             <a class="code" href="../../d8/d7/country3_8c.html#a6">ReDisplayCompStrJapan</a>(hwnd, ConTbl);
00947             <span class="keywordflow">break</span>;
00948         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a42">LANG_ID_TAIWAN</a>:
00949             <a class="code" href="../../d8/d7/country3_8c.html#a7">ReDisplayCompStrTaiwan</a>(hwnd, ConTbl);
00950             <span class="keywordflow">break</span>;
00951         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a45">LANG_ID_PRC</a>:
00952             <a class="code" href="../../d8/d7/country3_8c.html#a8">ReDisplayCompStrPRC</a>(hwnd, ConTbl);
00953             <span class="keywordflow">break</span>;
00954         <span class="keywordflow">case</span>    <a class="code" href="../../d4/d5/conimep_8h.html#a44">LANG_ID_KOREA</a>:
00955             <a class="code" href="../../d8/d7/country3_8c.html#a9">ReDisplayCompStrKorea</a>(hwnd, ConTbl);
00956             <span class="keywordflow">break</span>;
00957         <span class="keywordflow">default</span>:
00958             <span class="keywordflow">break</span>;
00959     }
00960     <span class="keywordflow">return</span>;
00961 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a172" doxytag="conimep.h::ReDisplayCompStrJapan" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ReDisplayCompStrJapan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/country3_8c-source.html#l00964">964</a> of file <a class="el" href="../../d9/d6/country3_8c-source.html">country3.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00058">CI_CONIMECOMPOSITION</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00035">_CONIME_UICOMPMESSAGE::dwSize</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, and <a class="el" href="../../d5/d4/conimep_8h-source.html#l00114">_CONSOLE_TABLE::lpCompStrMem</a>.
<p>
Referenced by <a class="el" href="../../d9/d6/country3_8c-source.html#l00928">ReDisplayCompositionStr()</a>.
<p>
<pre class="fragment"><div>00968 {
00969     COPYDATASTRUCT CopyData;
00970     <a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">LPCONIME_UICOMPMESSAGE</a> lpCompStrMem;
00971 
00972     lpCompStrMem = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>;
00973     CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a4">CI_CONIMECOMPOSITION</a>;
00974     CopyData.cbData = lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a>;
00975     CopyData.lpData = lpCompStrMem;
00976     <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
00977                            (WPARAM)hwnd,
00978                            (LPARAM)&amp;CopyData
00979                           );
00980 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a175" doxytag="conimep.h::ReDisplayCompStrKorea" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ReDisplayCompStrKorea           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/country3_8c-source.html#l01042">1042</a> of file <a class="el" href="../../d9/d6/country3_8c-source.html">country3.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00058">CI_CONIMECOMPOSITION</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00035">_CONIME_UICOMPMESSAGE::dwSize</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, and <a class="el" href="../../d5/d4/conimep_8h-source.html#l00114">_CONSOLE_TABLE::lpCompStrMem</a>.
<p>
Referenced by <a class="el" href="../../d9/d6/country3_8c-source.html#l00928">ReDisplayCompositionStr()</a>.
<p>
<pre class="fragment"><div>01046 {
01047 
01048     COPYDATASTRUCT CopyData;
01049     <a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html">LPCONIME_UICOMPMESSAGE</a> lpCompStrMem;
01050 
01051     lpCompStrMem = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>;
01052     CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a4">CI_CONIMECOMPOSITION</a>;
01053     CopyData.cbData = lpCompStrMem-&gt;<a class="code" href="../../d9/d8/struct__CONIME__UICOMPMESSAGE.html#o0">dwSize</a>;
01054     CopyData.lpData = lpCompStrMem;
01055     <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
01056                            (WPARAM)hwnd,
01057                            (LPARAM)&amp;CopyData
01058                           );
01059 
01060 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a174" doxytag="conimep.h::ReDisplayCompStrPRC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ReDisplayCompStrPRC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/country3_8c-source.html#l01013">1013</a> of file <a class="el" href="../../d9/d6/country3_8c-source.html">country3.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00059">CI_CONIMEMODEINFO</a>, <a class="el" href="../../d3/d5/conime_8h.html#a42">CONIME_UIMODEINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00525">MakeInfoStringPRC()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d9/d6/country3_8c-source.html#l00928">ReDisplayCompositionStr()</a>.
<p>
<pre class="fragment"><div>01017 {
01018     COPYDATASTRUCT CopyData;
01019     <a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo;
01020 
01021     lpModeInfo = (<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>)LocalAlloc(LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) );
01022     <span class="keywordflow">if</span> ( lpModeInfo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01023         <span class="keywordflow">return</span>;
01024     }
01025     <span class="comment">//</span>
01026     <span class="comment">// Display character to Console</span>
01027     <span class="comment">//</span>
01028     CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a5">CI_CONIMEMODEINFO</a>;
01029     CopyData.cbData = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>);
01030     CopyData.lpData = lpModeInfo;
01031 
01032     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7/country_8c.html#a25">MakeInfoStringPRC</a>(ConTbl, lpModeInfo) ) {
01033         <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
01034                                (WPARAM)hwnd,
01035                                (LPARAM)&amp;CopyData
01036                              );
01037     }
01038     LocalFree( lpModeInfo );
01039 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a173" doxytag="conimep.h::ReDisplayCompStrTaiwan" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ReDisplayCompStrTaiwan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d6/country3_8c-source.html#l00983">983</a> of file <a class="el" href="../../d9/d6/country3_8c-source.html">country3.c</a>.
<p>
References <a class="el" href="../../d4/d4/conime_8h-source.html#l00059">CI_CONIMEMODEINFO</a>, <a class="el" href="../../d3/d5/conime_8h.html#a42">CONIME_UIMODEINFO</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01227">ConsoleImeSendMessage()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00298">MakeInfoStringTaiwan()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d9/d6/country3_8c-source.html#l00928">ReDisplayCompositionStr()</a>.
<p>
<pre class="fragment"><div>00987 {
00988     COPYDATASTRUCT CopyData;
00989     <a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a> lpModeInfo;
00990 
00991     lpModeInfo = (<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">LPCONIME_UIMODEINFO</a>)LocalAlloc(LPTR, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>) );
00992     <span class="keywordflow">if</span> ( lpModeInfo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00993         <span class="keywordflow">return</span>;
00994     }
00995     <span class="comment">//</span>
00996     <span class="comment">// Display character to Console</span>
00997     <span class="comment">//</span>
00998     CopyData.dwData = <a class="code" href="../../d3/d5/conime_8h.html#a5">CI_CONIMEMODEINFO</a>;
00999     CopyData.cbData = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d9/struct__CONIME__UIMODEINFO.html">CONIME_UIMODEINFO</a>);
01000     CopyData.lpData = lpModeInfo;
01001 
01002     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7/country_8c.html#a19">MakeInfoStringTaiwan</a>(ConTbl, lpModeInfo) ) {
01003         <a class="code" href="../../d4/d5/conimep_8h.html#a109">ConsoleImeSendMessage</a>( ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,
01004                                (WPARAM)hwnd,
01005                                (LPARAM)&amp;CopyData
01006                              );
01007     }
01008 
01009     LocalFree( lpModeInfo );
01010 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a101" doxytag="conimep.h::RemoveConsole" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL RemoveConsole           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsole</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00801">801</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00033">LockConsoleTable</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00824">RemoveConsoleWorker()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00034">UnlockConsoleTable</a>.
<p>
<pre class="fragment"><div>00805 {
00806     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00807     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> ret;
00808 
00809     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a0">LockConsoleTable</a>();
00810 
00811     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(hConsole);
00812     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00813     {
00814         <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a1">UnlockConsoleTable</a>();
00815         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00816     }
00817     ret = <a class="code" href="../../d4/d5/conimep_8h.html#a102">RemoveConsoleWorker</a>(hwnd, ConTbl);
00818 
00819     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a1">UnlockConsoleTable</a>();
00820     <span class="keywordflow">return</span> ret;
00821 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a102" doxytag="conimep.h::RemoveConsoleWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL RemoveConsoleWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ConTbl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00824">824</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d5/d4/conimep_8h-source.html#l00126">_CONSOLE_TABLE::CandSep</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00106">_CONSOLE_TABLE::ConsoleCP</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00107">_CONSOLE_TABLE::ConsoleOutputCP</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00133">_CONSOLE_TABLE::Enable</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00094">_CONSOLE_TABLE::hConsole</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00102">_CONSOLE_TABLE::hIMC_Original</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00100">_CONSOLE_TABLE::hklActive</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00061">ImmDestroyContext()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00134">_CONSOLE_TABLE::LateRemove</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00120">_CONSOLE_TABLE::lpCandListMem</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00114">_CONSOLE_TABLE::lpCompStrMem</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00136">_CONSOLE_TABLE::lphklList</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00061">MAX_LISTCAND</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00096">_CONSOLE_TABLE::ScreenBufferSize</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00664">InsertConsole()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00801">RemoveConsole()</a>.
<p>
<pre class="fragment"><div>00828 {
00829     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> j;
00830 
00831     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o27">Enable</a>) {
00832         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o0">hConsole</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00833         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o2">ScreenBufferSize</a>.X = 0;
00834         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o9">ConsoleCP</a> = 0;
00835         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o10">ConsoleOutputCP</a> = 0;
00836         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o3">hklActive</a> = 0;
00837 
00838         <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a2">ImmDestroyContext</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o5">hIMC_Original</a>);
00839 
00840         <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>){
00841             LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o14">lpCompStrMem</a>);
00842         }
00843         <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d5/conimep_8h.html#a26">MAX_LISTCAND</a>; j++){
00844             <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[j] != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00845                 LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o17">lpCandListMem</a>[j]);
00846             }
00847         }
00848         <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00849             LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o23">CandSep</a>);
00850         }
00851 
00852         <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00853             LocalFree(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o30">lphklList</a>) ;
00854         }
00855 
00856         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o27">Enable</a>     = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00857         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o28">LateRemove</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00858     }
00859     <span class="keywordflow">else</span>
00860         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o28">LateRemove</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00861 
00862 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00863 <span class="preprocessor"></span>    InvalidateRect(hwnd,NULL,TRUE);
00864 <span class="preprocessor">#endif</span>
00865 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00866 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a100" doxytag="conimep.h::SearchConsole" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> SearchConsole           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hConsole</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">767</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00029">ConsoleTable</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00094">_CONSOLE_TABLE::hConsole</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00134">_CONSOLE_TABLE::LateRemove</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00033">LockConsoleTable</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00030">NumberOfConsoleTable</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00034">UnlockConsoleTable</a>.
<p>
Referenced by <a class="el" href="../../d1/d9/imefull_8c-source.html#l00281">CharHandlerToConsole()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01094">ConImeInputLangchange()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01000">ConImeInputLangchangeRequest()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00720">ConsoleCodepageChange()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00950">ConsoleKillFocus()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00981">ConsoleScreenBufferSize()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00903">ConsoleSetFocus()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00032">GetCompositionStr()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00640">GetNLSMode()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00747">ImeSysPropertyWindow()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l01204">ImeUICloseCandidate()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00108">ImeUIEndComposition()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00576">ImeUIGuideLine()</a>, <a class="el" href="../../d8/d6/country2_8c-source.html#l00024">ImeUIOpenCandidate()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00406">ImeUIOpenStatusWindow()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00522">ImeUISetConversionMode()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00468">ImeUISetOpenStatus()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00067">ImeUIStartComposition()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01202">InputLangchange()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00869">InsertNewConsole()</a>, <a class="el" href="../../d9/d6/country3_8c-source.html#l00928">ReDisplayCompositionStr()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00801">RemoveConsole()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00670">SetNLSMode()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00770 {
00771     ULONG i;
00772     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> FocusedConsole;
00773 
00774     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a0">LockConsoleTable</a>();
00775 
00776     <span class="comment">// conime receive ime message from console before 1st console registered.</span>
00777     <span class="comment">// this will happen after restart conime when conime dead by bogus ime's AV or </span>
00778     <span class="comment">// other problem</span>
00779     <span class="comment">// so this fail safe code is  necessary to protect consrv.</span>
00780     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a3">LastConsole</a> == 0) {
00781         <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a3">LastConsole</a> = hConsole ;
00782     }
00783 
00784     <span class="keywordflow">for</span> (i = 1; i &lt; <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a6">NumberOfConsoleTable</a>; i++) {
00785         FocusedConsole = <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a5">ConsoleTable</a>[i];
00786         <span class="keywordflow">if</span> (FocusedConsole != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00787         {
00788             <span class="keywordflow">if</span> ((FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o0">hConsole</a> == hConsole)&amp;&amp;
00789                 (!FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o28">LateRemove</a>)) {
00790 
00791                 <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a1">UnlockConsoleTable</a>();
00792                 <span class="keywordflow">return</span> FocusedConsole;
00793             }
00794         }
00795     }
00796     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a1">UnlockConsoleTable</a>();
00797     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00798 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a125" doxytag="conimep.h::SetNLSMode" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL SetNLSMode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsole</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fdwConversion</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/consubs_8c-source.html#l00670">670</a> of file <a class="el" href="../../d1/d5/consubs_8c-source.html">consubs.c</a>.
<p>
References <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00104">_CONSOLE_TABLE::dwConversion</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00105">_CONSOLE_TABLE::dwSentence</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00103">_CONSOLE_TABLE::fOpen</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00101">_CONSOLE_TABLE::hIMC_Current</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00102">_CONSOLE_TABLE::hIMC_Original</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00104">IME_CMODE_DISABLE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00103">IME_CMODE_OPEN</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00086">ImmAssociateContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00292">ImmReleaseContext()</a>, <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00188">ImmSetActiveContextConsoleIME()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01402">ImmSetConversionStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01525">ImmSetOpenStatus()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01094">ConImeInputLangchange()</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">WndProc()</a>.
<p>
<pre class="fragment"><div>00675 {
00676     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00677     HIMC hIMC;
00678 
00679     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(hConsole);
00680     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00681         <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Error! Cannot found registed Console\n"</span>));
00682         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00683     }
00684 
00685     <span class="keywordflow">if</span> (fdwConversion &amp; <a class="code" href="../../d3/d5/conime_8h.html#a30">IME_CMODE_DISABLE</a>)
00686     {
00687         <a class="code" href="../../d1/d5/ntuser_2imm_2conime_8c.html#a4">ImmSetActiveContextConsoleIME</a>(hWnd, FALSE) ;
00688         <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a3">ImmAssociateContext</a>(hWnd, (HIMC)NULL);
00689         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o4">hIMC_Current</a> = (HIMC)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00690     }
00691     <span class="keywordflow">else</span>
00692     {
00693         <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a3">ImmAssociateContext</a>(hWnd, ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o5">hIMC_Original</a>);
00694         <a class="code" href="../../d1/d5/ntuser_2imm_2conime_8c.html#a4">ImmSetActiveContextConsoleIME</a>(hWnd, TRUE) ;
00695         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o4">hIMC_Current</a> = ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o5">hIMC_Original</a>;
00696     }
00697 
00698     hIMC = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>( hWnd ) ;
00699     <span class="keywordflow">if</span> ( hIMC == (HIMC)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> )
00700         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00701 
00702     ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o6">fOpen</a> =(fdwConversion &amp; <a class="code" href="../../d3/d5/conime_8h.html#a29">IME_CMODE_OPEN</a>) ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> ;
00703     <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a32">ImmSetOpenStatus</a>(hIMC, ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o6">fOpen</a>);
00704 
00705     fdwConversion &amp;= ~(<a class="code" href="../../d3/d5/conime_8h.html#a30">IME_CMODE_DISABLE</a> | <a class="code" href="../../d3/d5/conime_8h.html#a29">IME_CMODE_OPEN</a>);
00706     <span class="keywordflow">if</span> (ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a> != fdwConversion)
00707     {
00708         ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a> = fdwConversion;
00709         <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a30">ImmSetConversionStatus</a>(hIMC,
00710                                ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o7">dwConversion</a>,
00711                                ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o8">dwSentence</a> );
00712     }
00713 
00714     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hWnd, hIMC );
00715 
00716     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00717 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a129" doxytag="conimep.h::VirtualKeyHandler" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID VirtualKeyHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d1/d9/imefull_8c-source.html#l00281">CharHandlerToConsole()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a96" doxytag="conimep.h::WndProc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT FAR PASCAL WndProc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>Message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00288">288</a> of file <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html">ntcon/conime/conime.c</a>.
<p>
References <a class="el" href="../../d4/d9/user32_8def-source.html#l00327">BeginPaint</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d9/imefull_8c-source.html#l00208">CharHandlerFromConsole()</a>, <a class="el" href="../../d1/d9/imefull_8c-source.html#l00281">CharHandlerToConsole()</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00090">CONIME_BACKWARD</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00069">CONIME_CREATE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00070">CONIME_DESTROY</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00088">CONIME_DIRECT</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00089">CONIME_FORWARD</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00074">CONIME_GET_NLSMODE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00073">CONIME_HOTKEY</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00078">CONIME_INPUTLANGCHANGE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00080">CONIME_INPUTLANGCHANGEREQUEST</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00082">CONIME_INPUTLANGCHANGEREQUESTBACKWARD</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00081">CONIME_INPUTLANGCHANGEREQUESTFORWARD</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00083">CONIME_KEYDATA</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00072">CONIME_KILLFOCUS</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00079">CONIME_NOTIFY_CODEPAGE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00076">CONIME_NOTIFY_SCREENBUFFERSIZE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00077">CONIME_NOTIFY_VK_KANA</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00075">CONIME_SET_NLSMODE</a>, <a class="el" href="../../d4/d4/conime_8h-source.html#l00071">CONIME_SETFOCUS</a>, <a class="el" href="../../d7/d6/country_8c-source.html#l00063">ConimeHotkey()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01094">ConImeInputLangchange()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01000">ConImeInputLangchangeRequest()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00720">ConsoleCodepageChange()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00950">ConsoleKillFocus()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00981">ConsoleScreenBufferSize()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00903">ConsoleSetFocus()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00029">ConsoleTable</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00023">Create()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l01579">CreateCaret</a>, <a class="el" href="../../d7/d4/ioep_8h-source.html#l00067">DBGPRINT</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00629">DefWindowProc()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02981">DestroyCaret()</a>, <a class="el" href="../../d4/d3/w32_2ntuser_2client_2nt6_2pch_8h-source.html#l00039">DestroyWindow</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00040">dwConsoleThreadId</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00133">_CONSOLE_TABLE::Enable</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03016">EnableWindow()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00611">ExitList()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/aug98_2dll32_2icmdll_8h-source.html#l00010">FAR</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00640">GetNLSMode()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00037">gfDoNotKillFocus</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00094">_CONSOLE_TABLE::hConsole</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00095">_CONSOLE_TABLE::hWndCon</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00747">ImeSysPropertyWindow()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00160">ImeUIComposition()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00108">ImeUIEndComposition()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00261">ImeUINotify()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00522">ImeUISetConversionMode()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00067">ImeUIStartComposition()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00056">InputExceptionFilter</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l01202">InputLangchange()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00869">InsertNewConsole()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00312">IsUnicodeFullWidth()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00538">IsWindowEnabled()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00026">LastConsole</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00134">_CONSOLE_TABLE::LateRemove</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00033">LockConsoleTable</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00025">MM_ACCESS_VIOLATION</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00024">MM_EXIT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00030">NumberOfConsoleTable</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03387">PostQuitMessage()</a>, <a class="el" href="../../d1/d4/srvinit_8c-source.html#l01355">RemoveConsole()</a>, <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00767">SearchConsole()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03461">SetCaretPos()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03499">SetForegroundWindow()</a>, <a class="el" href="../../d1/d5/consubs_8c-source.html#l00670">SetNLSMode()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d1/d4/ntcon_2conime_2conime_8c-source.html#l00034">UnlockConsoleTable</a>.
<p>
<pre class="fragment"><div>00292 {
00293     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwImmRet = 0;        <span class="comment">// return value of ImmSrvProcessKey()</span>
00294 
00295     <span class="keywordflow">try</span> {
00296 
00297         <span class="keywordflow">switch</span> (Message)
00298         {
00299             <span class="keywordflow">case</span> <a class="code" href="../../d3/d5/conime_8h.html#a9">CONIME_CREATE</a>:
00300                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_CREATE: Console Handle=%08x\n"</span>, wParam));
00301                 <span class="keywordflow">return</span> <a class="code" href="../../d4/d5/conimep_8h.html#a103">InsertNewConsole</a>(hWnd,(HANDLE)wParam,(HWND)lParam);
00302 
00303             <span class="keywordflow">case</span> <a class="code" href="../../d3/d5/conime_8h.html#a10">CONIME_DESTROY</a>:
00304                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_DESTROY: Console Handle=%08x\n"</span>, wParam));
00305                 <span class="keywordflow">return</span> <a class="code" href="../../d0/d5/srvinit_8c.html#a37">RemoveConsole</a>(hWnd, (HANDLE)wParam);
00306 
00307             <span class="keywordflow">case</span> <a class="code" href="../../d3/d5/conime_8h.html#a11">CONIME_SETFOCUS</a>:
00308                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_SETFOCUS: Console Handle=%08x\n"</span>, wParam));
00309                 <span class="keywordflow">return</span> <a class="code" href="../../d4/d5/conimep_8h.html#a104">ConsoleSetFocus</a>(hWnd, (HANDLE)wParam, (HKL)lParam);
00310 
00311             <span class="keywordflow">case</span> <a class="code" href="../../d3/d5/conime_8h.html#a12">CONIME_KILLFOCUS</a>:
00312                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_KILLFOCUS: Console Handle=%08x\n"</span>, wParam));
00313                 <span class="keywordflow">return</span> <a class="code" href="../../d4/d5/conimep_8h.html#a105">ConsoleKillFocus</a>(hWnd, (HANDLE)wParam);
00314 
00315             <span class="keywordflow">case</span> <a class="code" href="../../d3/d5/conime_8h.html#a14">CONIME_GET_NLSMODE</a>:
00316                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_GET_NLSMODE: Console Handle=%08x\n"</span>, wParam));
00317                 <span class="keywordflow">return</span> <a class="code" href="../../d0/d6/consubs_8c.html#a11">GetNLSMode</a>(hWnd, (HANDLE)wParam);
00318 
00319             <span class="keywordflow">case</span> <a class="code" href="../../d3/d5/conime_8h.html#a15">CONIME_SET_NLSMODE</a>:
00320                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_SET_NLSMODE: Console Handle=%08x\n"</span>, wParam));
00321                 <span class="keywordflow">return</span> <a class="code" href="../../d0/d6/consubs_8c.html#a12">SetNLSMode</a>(hWnd, (HANDLE)wParam, (DWORD)lParam);
00322 
00323             <span class="keywordflow">case</span> <a class="code" href="../../d3/d5/conime_8h.html#a13">CONIME_HOTKEY</a>:
00324                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_HOTKEY\n"</span>));
00325                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/country_8c.html#a14">ConimeHotkey</a>(hWnd, (HANDLE)wParam, (DWORD)lParam);
00326 
00327             <span class="keywordflow">case</span> <a class="code" href="../../d3/d5/conime_8h.html#a17">CONIME_NOTIFY_VK_KANA</a>:
00328                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_NOTIFY_VK_KANA\n"</span>));
00329                 <span class="keywordflow">return</span> <a class="code" href="../../d0/d6/consubs_8c.html#a9">ImeUISetConversionMode</a>(hWnd);
00330 
00331             <span class="keywordflow">case</span> <a class="code" href="../../d3/d5/conime_8h.html#a16">CONIME_NOTIFY_SCREENBUFFERSIZE</a>: {
00332                 COORD ScreenBufferSize;
00333                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_NOTIFY_SCREENBUFFERSIZE: Console Handle=%08x\n"</span>, wParam));
00334                 ScreenBufferSize.X = LOWORD(lParam);
00335                 ScreenBufferSize.Y = HIWORD(lParam);
00336                 <span class="keywordflow">return</span> <a class="code" href="../../d4/d5/conimep_8h.html#a106">ConsoleScreenBufferSize</a>(hWnd, (HANDLE)wParam, ScreenBufferSize);
00337             }
00338 
00339             <span class="keywordflow">case</span> <a class="code" href="../../d3/d5/conime_8h.html#a18">CONIME_INPUTLANGCHANGE</a>: {
00340                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_INPUTLANGCHANGE: Console Handle=%08x \n"</span>,wParam));
00341                 <a class="code" href="../../d4/d5/conimep_8h.html#a108">ConImeInputLangchange</a>(hWnd, (HANDLE)wParam, (HKL)lParam );
00342                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00343             }
00344 
00345             <span class="keywordflow">case</span> <a class="code" href="../../d3/d5/conime_8h.html#a19">CONIME_NOTIFY_CODEPAGE</a>: {
00346                 <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Output;
00347                 WORD Codepage;
00348 
00349                 Codepage = HIWORD(lParam);
00350                 Output = LOWORD(lParam);
00351                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_NOTIFY_CODEPAGE: Console Handle=%08x %04x %04x\n"</span>,wParam, Output, Codepage));
00352                 <span class="keywordflow">return</span> <a class="code" href="../../d0/d6/consubs_8c.html#a13">ConsoleCodepageChange</a>(hWnd, (HANDLE)wParam, Output, Codepage);
00353             }
00354 
00355             <span class="keywordflow">case</span> WM_KEYDOWN    +<a class="code" href="../../d3/d5/conime_8h.html#a23">CONIME_KEYDATA</a>:
00356             <span class="keywordflow">case</span> WM_KEYUP      +<a class="code" href="../../d3/d5/conime_8h.html#a23">CONIME_KEYDATA</a>:
00357             <span class="keywordflow">case</span> WM_SYSKEYDOWN +<a class="code" href="../../d3/d5/conime_8h.html#a23">CONIME_KEYDATA</a>:
00358             <span class="keywordflow">case</span> WM_SYSKEYUP   +<a class="code" href="../../d3/d5/conime_8h.html#a23">CONIME_KEYDATA</a>:
00359             <span class="keywordflow">case</span> WM_DEADCHAR   +<a class="code" href="../../d3/d5/conime_8h.html#a23">CONIME_KEYDATA</a>:
00360             <span class="keywordflow">case</span> WM_SYSDEADCHAR+<a class="code" href="../../d3/d5/conime_8h.html#a23">CONIME_KEYDATA</a>:
00361             <span class="keywordflow">case</span> WM_SYSCHAR    +<a class="code" href="../../d3/d5/conime_8h.html#a23">CONIME_KEYDATA</a>:
00362             <span class="keywordflow">case</span> WM_CHAR       +<a class="code" href="../../d3/d5/conime_8h.html#a23">CONIME_KEYDATA</a>:
00363                 <a class="code" href="../../d0/d0/imefull_8c.html#a1">CharHandlerFromConsole</a>( hWnd, Message, (ULONG)wParam, (ULONG)lParam );
00364                 <span class="keywordflow">break</span>;
00365             <span class="keywordflow">case</span> WM_KEYDOWN:
00366             <span class="keywordflow">case</span> WM_KEYUP:
00367             <span class="keywordflow">case</span> WM_SYSKEYDOWN:
00368             <span class="keywordflow">case</span> WM_SYSKEYUP:
00369             <span class="keywordflow">case</span> WM_DEADCHAR:
00370             <span class="keywordflow">case</span> WM_SYSDEADCHAR:
00371             <span class="keywordflow">case</span> WM_SYSCHAR:
00372             <span class="keywordflow">case</span> WM_CHAR:
00373                 <a class="code" href="../../d0/d0/imefull_8c.html#a2">CharHandlerToConsole</a>( hWnd, Message, (ULONG)wParam, (ULONG)lParam );
00374                 <span class="keywordflow">break</span>;
00375 
00376             <span class="keywordflow">case</span> WM_INPUTLANGCHANGE:
00377                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_INPUTLANGCHANGE: Console Handle=%08x \n"</span>,wParam));
00378                 <a class="code" href="../../d4/d5/conimep_8h.html#a110">InputLangchange</a>(hWnd, (DWORD)wParam, (HKL)lParam );
00379                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00380 
00381             <span class="keywordflow">case</span> WM_INPUTLANGCHANGEREQUEST:
00382                 <span class="comment">// Console IME never receive this message for this window is hidden</span>
00383                 <span class="comment">// and doesn't have focus.</span>
00384                 <span class="comment">//</span>
00385                 <span class="comment">// However, Hot key of IME_CHOTKEY_IME_NONIME_TOGGLE/IME_THOTKEY_IME_NONIME_TOGGLE</span>
00386                 <span class="comment">// are send this message by ImmSimulateHotKey API.</span>
00387                 <span class="comment">//</span>
00388                 <span class="comment">// If nothing processing by this message, then DefWindowProc calls</span>
00389                 <span class="comment">// ActivateKeyboardLayout on kernel side.</span>
00390                 <span class="comment">// And, ActivateKeyboardLayout send WM_INPUTLANGCHANGE message to focus window</span>
00391                 <span class="comment">// on this message queue.</span>
00392                 <span class="comment">// It window is console window procedure.</span>
00393                 <span class="comment">// Console window procedure can do send CONIME_INPUTLANGCHANGE message to</span>
00394                 <span class="comment">// console IME window.</span>
00395                 <span class="comment">// In console window is windowed case, this sequence as well.</span>
00396                 <span class="comment">// But, In console window is full screen case, message queue have not focus.</span>
00397                 <span class="comment">// WM_INPUTLANGCHANGE message can not send to console window procedure.</span>
00398                 <span class="comment">//</span>
00399                 <span class="comment">// This code avoid console full screen mode problem.</span>
00400                 <span class="comment">// Send message to console window procedure when this window receive it.</span>
00401                 <span class="comment">//</span>
00402                 {
00403                     <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> ConTbl;
00404 
00405                     ConTbl = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
00406                     <span class="keywordflow">if</span> (ConTbl == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00407                         <span class="keywordflow">return</span> <a class="code" href="../../d5/d9/cltxt_8h.html#a15">DefWindowProc</a>(hWnd, Message, wParam, lParam);
00408                     }
00409 
00410                     <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(ConTbl-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>, Message, wParam, lParam);
00411                 }
00412                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;    <span class="comment">// TRUE : process this message by application</span>
00413 
00414             <span class="keywordflow">case</span> <a class="code" href="../../d3/d5/conime_8h.html#a20">CONIME_INPUTLANGCHANGEREQUEST</a>:
00415                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_INPUTLANGCHANGEREQUEST: Console Handle=%08x \n"</span>,wParam));
00416                 <span class="keywordflow">return</span> <a class="code" href="../../d4/d5/conimep_8h.html#a107">ConImeInputLangchangeRequest</a>(hWnd, (HANDLE)wParam, (HKL)lParam, CONIME_DIRECT);
00417 
00418             <span class="keywordflow">case</span> <a class="code" href="../../d3/d5/conime_8h.html#a21">CONIME_INPUTLANGCHANGEREQUESTFORWARD</a>:
00419                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_INPUTLANGCHANGEREQUEST: Console Handle=%08x \n"</span>,wParam));
00420                 <span class="keywordflow">return</span> <a class="code" href="../../d4/d5/conimep_8h.html#a107">ConImeInputLangchangeRequest</a>(hWnd, (HANDLE)wParam, (HKL)lParam, CONIME_FORWARD);
00421 
00422             <span class="keywordflow">case</span> <a class="code" href="../../d3/d5/conime_8h.html#a22">CONIME_INPUTLANGCHANGEREQUESTBACKWARD</a>:
00423                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: CONIME_INPUTLANGCHANGEREQUEST: Console Handle=%08x \n"</span>,wParam));
00424                 <span class="keywordflow">return</span> <a class="code" href="../../d4/d5/conimep_8h.html#a107">ConImeInputLangchangeRequest</a>(hWnd, (HANDLE)wParam, (HKL)lParam, CONIME_BACKWARD);
00425 
00426 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00427 <span class="preprocessor"></span>            <span class="keywordflow">case</span> WM_MOVE:
00428                 ImeUIMoveCandWin( hWnd );
00429                 <span class="keywordflow">break</span>;
00430 
00431             <span class="keywordflow">case</span> WM_COMMAND: <span class="comment">// message: command from application menu</span>
00432 
00433                 <span class="comment">// Message packing of wparam and lparam have changed for Win32,</span>
00434                 <span class="comment">// so use the GET_WM_COMMAND macro to unpack the commnad</span>
00435 
00436                 <span class="keywordflow">switch</span> (LOWORD(wParam)) {
00437                     <span class="keywordflow">case</span> <a class="code" href="../../d4/d5/conimep_8h.html#a3">MM_EXIT</a>:
00438                         <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(hWnd,WM_CLOSE,0,0L);
00439                         <span class="keywordflow">break</span>;
00440 
00441                     <span class="keywordflow">case</span> <a class="code" href="../../d4/d5/conimep_8h.html#a4">MM_ACCESS_VIOLATION</a>:
00442                         {
00443                             <a class="code" href="../../d9/d7/halvprnt_8c.html#a1">PBYTE</a> p = 0;
00444                             *p = 0;
00445                         }
00446                         <span class="keywordflow">break</span>;
00447                 }
00448                 <span class="keywordflow">break</span>;
00449 <span class="preprocessor">#endif</span>
00450 <span class="preprocessor"></span>
00451             <span class="keywordflow">case</span> WM_IME_STARTCOMPOSITION:
00452                 <a class="code" href="../../d0/d6/consubs_8c.html#a1">ImeUIStartComposition</a>( hWnd );
00453                 <span class="keywordflow">break</span>;
00454             <span class="keywordflow">case</span> WM_IME_ENDCOMPOSITION:
00455                 <a class="code" href="../../d0/d6/consubs_8c.html#a2">ImeUIEndComposition</a>( hWnd );
00456                 <span class="keywordflow">break</span>;
00457             <span class="keywordflow">case</span> WM_IME_COMPOSITION:
00458                 <a class="code" href="../../d0/d6/consubs_8c.html#a3">ImeUIComposition</a>( hWnd, wParam, lParam );
00459                 <span class="keywordflow">break</span>;
00460             <span class="keywordflow">case</span> WM_IME_COMPOSITIONFULL:
00461                 <span class="keywordflow">break</span>;
00462             <span class="keywordflow">case</span> WM_IME_NOTIFY:
00463                 <span class="keywordflow">if</span> ( !<a class="code" href="../../d0/d6/consubs_8c.html#a4">ImeUINotify</a>( hWnd, wParam, lParam ) ) {
00464                     <span class="keywordflow">return</span> <a class="code" href="../../d5/d9/cltxt_8h.html#a15">DefWindowProc</a>(hWnd, Message, wParam, lParam);
00465                 }
00466                 <span class="keywordflow">break</span>;
00467             <span class="keywordflow">case</span> WM_IME_SETCONTEXT:
00468                 <span class="comment">//</span>
00469                 <span class="comment">// The application have to pass WM_IME_SETCONTEXT to DefWindowProc.</span>
00470                 <span class="comment">// When the application want to handle the IME at the timing of</span>
00471                 <span class="comment">// focus changing, the application should use WM_GETFOCUS or</span>
00472                 <span class="comment">// WM_KILLFOCUS.</span>
00473                 <span class="comment">//</span>
00474                 lParam &amp;= ~ISC_SHOWUIALL;
00475 
00476                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d9/cltxt_8h.html#a15">DefWindowProc</a>( hWnd, Message, wParam, lParam );
00477             <span class="keywordflow">case</span> WM_IME_SYSTEM:
00478                 <span class="keywordflow">switch</span> (wParam) {
00479                     <span class="keywordflow">case</span> IMS_CLOSEPROPERTYWINDOW:
00480                     <span class="keywordflow">case</span> IMS_OPENPROPERTYWINDOW:
00481                         <a class="code" href="../../d0/d6/consubs_8c.html#a14">ImeSysPropertyWindow</a>(hWnd, wParam, lParam);
00482                         <span class="keywordflow">break</span>;
00483                     <span class="keywordflow">default</span>:
00484                         <span class="keywordflow">return</span> <a class="code" href="../../d5/d9/cltxt_8h.html#a15">DefWindowProc</a>( hWnd, Message, wParam, lParam );
00485                 }
00486                 <span class="keywordflow">break</span>;
00487 
00488             <span class="keywordflow">case</span> WM_CREATE:
00489                 <span class="keywordflow">return</span> <a class="code" href="../../d0/d6/consubs_8c.html#a0">Create</a>(hWnd);
00490                 <span class="keywordflow">break</span>;
00491 
00492             <span class="keywordflow">case</span> WM_DESTROY:
00493                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME:Recieve WM_DESTROY\n"</span>));
00494                 <a class="code" href="../../d4/d5/conimep_8h.html#a97">ExitList</a>(hWnd);
00495                 <a class="code" href="../../d3/d8/client_8c.html#a122">PostQuitMessage</a>(0);
00496                 <span class="keywordflow">return</span> 0;
00497                 <span class="keywordflow">break</span>;
00498 
00499             <span class="keywordflow">case</span> WM_CLOSE:
00500                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME:Recieve WM_CLOSE\n"</span>));
00501                 <a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html#a3">DestroyWindow</a>(hWnd);
00502                 <span class="keywordflow">return</span> 0;
00503                 <span class="keywordflow">break</span>;
00504 
00505             <span class="keywordflow">case</span> WM_ENABLE:{
00506                 <a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html">PCONSOLE_TABLE</a> FocusedConsole;
00507                 <span class="keywordflow">if</span> (!wParam) {
00508                     FocusedConsole = <a class="code" href="../../d4/d5/conimep_8h.html#a100">SearchConsole</a>(LastConsole);
00509                     <span class="keywordflow">if</span> (FocusedConsole != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
00510                         FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o0">hConsole</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00511                         FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o27">Enable</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00512                         <a class="code" href="../../d3/d8/client_8c.html#a98">EnableWindow</a>(FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,FALSE);
00513                         <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a8">gfDoNotKillFocus</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00514                     }
00515                 }
00516                 <span class="keywordflow">else</span>{
00517                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00518                     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a0">LockConsoleTable</a>();
00519                     <span class="keywordflow">for</span> ( i = 1; i &lt; <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a6">NumberOfConsoleTable</a>; i ++){
00520                         FocusedConsole = <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a5">ConsoleTable</a>[i];
00521                         <span class="keywordflow">if</span> (FocusedConsole != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00522                         {
00523                             <span class="keywordflow">if</span> ((FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o0">hConsole</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)&amp;&amp;
00524                                 (!FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o27">Enable</a>)&amp;&amp;
00525                                 (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a20">IsWindowEnabled</a>(FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>))){
00526                                 <a class="code" href="../../d3/d8/client_8c.html#a98">EnableWindow</a>(FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>,TRUE);
00527                                 FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o27">Enable</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00528                                 <span class="keywordflow">if</span> (!FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o28">LateRemove</a>)
00529                                     <a class="code" href="../../d3/d8/client_8c.html#a131">SetForegroundWindow</a>(FocusedConsole-&gt;<a class="code" href="../../d0/d7/struct__CONSOLE__TABLE.html#o1">hWndCon</a>);
00530                             }
00531                         }
00532                     }
00533                     <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a1">UnlockConsoleTable</a>();
00534                 }
00535                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d9/cltxt_8h.html#a15">DefWindowProc</a>(hWnd, Message, wParam, lParam);
00536                 <span class="keywordflow">break</span>;
00537             }
00538 
00539 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00540 <span class="preprocessor"></span>            <span class="keywordflow">case</span> WM_SETFOCUS:
00541                 <a class="code" href="../../d6/d0/usercli_8h.html#a233">CreateCaret</a>( hWnd,
00542                              NULL,
00543                              <a class="code" href="../../d0/d6/consubs_8c.html#a5">IsUnicodeFullWidth</a>( ConvertLine[xPos] ) ?
00544                              CaretWidth*2 : CaretWidth,
00545                              (UINT)cyMetrics );
00546                 <a class="code" href="../../d3/d8/client_8c.html#a128">SetCaretPos</a>( xPos * cxMetrics, 0 );
00547                 ShowCaret( hWnd );
00548                 <span class="keywordflow">break</span>;
00549 
00550             <span class="keywordflow">case</span> WM_KILLFOCUS:
00551                 HideCaret( hWnd );
00552                 <a class="code" href="../../d3/d8/client_8c.html#a95">DestroyCaret</a>();
00553                 <span class="keywordflow">break</span>;
00554 
00555             <span class="keywordflow">case</span> WM_PAINT:
00556                 {
00557                     PAINTSTRUCT pstruc;
00558                     HDC  hDC;
00559                     hDC = <a class="code" href="../../d3/d0/user32_8def.html#a41">BeginPaint</a>(hWnd,&amp;pstruc);
00560                     ReDraw(hWnd);
00561                     EndPaint(hWnd,&amp;pstruc);
00562                     <span class="keywordflow">break</span>;
00563                 }
00564 <span class="preprocessor">#endif</span>
00565 <span class="preprocessor"></span>
00566             <span class="keywordflow">case</span> WM_QUERYENDSESSION:
00567 <span class="preprocessor">#ifdef HIRSHI_DEBUG</span>
00568 <span class="preprocessor"></span>                <span class="comment">/*</span>
00569 <span class="comment">                 * If specified ntsd debugger on this process,</span>
00570 <span class="comment">                 * then never catch WM_QUERYENDSESSION when logoff/shutdown because</span>
00571 <span class="comment">                 * this process will terminate when ntsd process terminated.</span>
00572 <span class="comment">                 */</span>
00573                 {
00574                     <span class="keywordtype">int</span> i;
00575                     i = MessageBox(hWnd,TEXT(<span class="stringliteral">"Could you approve exit session?"</span>), TEXT(<span class="stringliteral">"Console IME"</span>),
00576                                    MB_ICONSTOP | MB_YESNO);
00577                     <span class="keywordflow">return</span> (i == IDYES ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00578                 }
00579 <span class="preprocessor">#endif</span>
00580 <span class="preprocessor"></span>                <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;           <span class="comment">// Logoff or shutdown time.</span>
00581 
00582             <span class="keywordflow">case</span> WM_ENDSESSION:
00583                 <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME:Recieve WM_ENDSESSION\n"</span>));
00584                 <a class="code" href="../../d4/d5/conimep_8h.html#a97">ExitList</a>(hWnd);
00585                 <span class="keywordflow">return</span> 0;
00586 
00587             <span class="keywordflow">default</span>:          <span class="comment">// Passes it on if unproccessed</span>
00588                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d9/cltxt_8h.html#a15">DefWindowProc</a>(hWnd, Message, wParam, lParam);
00589         }
00590 
00591     } except (<a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a2">InputExceptionFilter</a>(GetExceptionInformation())) {
00592 
00593         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a9">dwConsoleThreadId</a>)
00594         {
00595             <a class="code" href="../../d6/d5/ioep_8h.html#a21">DBGPRINT</a>((<span class="stringliteral">"CONIME: Exception on WndProc!!\n"</span>));
00596             UnregisterConsoleIME();
00597             <a class="code" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a9">dwConsoleThreadId</a> = 0;
00598 
00599             <a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html#a3">DestroyWindow</a>(hWnd);
00600             <span class="keywordflow">return</span> 0;
00601         }
00602 
00603     }
00604 
00605 
00606     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00607 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:14 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

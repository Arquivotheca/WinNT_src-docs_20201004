<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: caret.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>caret.c File Reference</h1><code>#include "<a class="el" href="../../d1/d3/w32_2ntuser_2kernel_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d5/d4/caret_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/caret_8c.html#a0">UT_CaretSet</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/caret_8c.html#a1">UT_InvertCaret</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/caret_8c.html#a2">zzzInternalDestroyCaret</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/caret_8c.html#a3">zzzDestroyCaret</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/caret_8c.html#a4">xxxCreateCaret</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, HBITMAP hBitmap, int cx, int <a class="el" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/caret_8c.html#a5">zzzInternalShowCaret</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/caret_8c.html#a6">zzzInternalHideCaret</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/caret_8c.html#a7">zzzShowCaret</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/caret_8c.html#a8">zzzHideCaret</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/caret_8c.html#a9">CaretBlinkProc</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT message, UINT_PTR id, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/caret_8c.html#a10">_SetCaretBlinkTime</a> (UINT cmsBlink)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/caret_8c.html#a11">zzzSetCaretPos</a> (int x, int y)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a10" doxytag="caret.c::_SetCaretBlinkTime" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _SetCaretBlinkTime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cmsBlink</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/caret_8c-source.html#l00513">513</a> of file <a class="el" href="../../d5/d4/caret_8c-source.html">caret.c</a>.
<p>
References <a class="el" href="../../d5/d1/timers_8c-source.html#l00431">_KillSystemTimer()</a>, <a class="el" href="../../d5/d1/timers_8c-source.html#l00078">_SetSystemTimer()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03124">tagQ::caret</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00454">CaretBlinkProc()</a>, <a class="el" href="../../d8/d4/w32_2ntuser_2kernel_2security_8c-source.html#l00518">CheckWinstaWriteAttributesAccess()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02910">tagCARET::hTimer</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00312">IDSYS_CARET</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02901">tagCARET::spwnd</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l02445">xxxUpdatePerUserSystemParameters()</a>.
<p>
<pre class="fragment"><div>00515 {
00516     <a class="code" href="../../d7/d4/structtagQ.html">PQ</a> pq;
00517     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a>  ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
00518 
00519     <span class="comment">/*</span>
00520 <span class="comment">     * Blow it off if the caller doesn't have the proper access rights</span>
00521 <span class="comment">     */</span>
00522     <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d5/w32_2ntuser_2kernel_2security_8c.html#a9">CheckWinstaWriteAttributesAccess</a>()) {
00523         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00524     }
00525 
00526     <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtCaretBlink = cmsBlink;
00527 
00528     pq = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>;
00529 
00530     <span class="keywordflow">if</span> (pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>) {
00531         <a class="code" href="../../d4/d1/userk_8h.html#a1567">_KillSystemTimer</a>(pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>, IDSYS_CARET);
00532         pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o9">hTimer</a> = <a class="code" href="../../d4/d1/userk_8h.html#a1894">_SetSystemTimer</a>(pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>, IDSYS_CARET,
00533             <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtCaretBlink, CaretBlinkProc);
00534     }
00535 
00536     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00537 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="caret.c::CaretBlinkProc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID CaretBlinkProc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT_PTR&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/caret_8c-source.html#l00454">454</a> of file <a class="el" href="../../d5/d4/caret_8c-source.html">caret.c</a>.
<p>
References <a class="el" href="../../d5/d1/timers_8c-source.html#l00431">_KillSystemTimer()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03124">tagQ::caret</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03076">tagCARET::fOn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03075">tagCARET::fVisible</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00932">gbRemoteSession</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00312">IDSYS_CARET</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03077">tagCARET::iHideLevel</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02901">tagCARET::spwnd</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00094">UT_InvertCaret()</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d5/d4/caret_8c-source.html#l00513">_SetCaretBlinkTime()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00254">xxxCreateCaret()</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00550">zzzSetCaretPos()</a>.
<p>
<pre class="fragment"><div>00459 {
00460     <a class="code" href="../../d7/d4/structtagQ.html">PQ</a> pq;
00461 
00462     <span class="comment">/*</span>
00463 <span class="comment">     * If this window doesn't even have a timer, just return.  TRUE is</span>
00464 <span class="comment">     * returned, which gets returned from DispatchMessage().  Why? Because</span>
00465 <span class="comment">     * it is compatible with Win3.</span>
00466 <span class="comment">     */</span>
00467     pq = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;pq;
00468     <span class="keywordflow">if</span> (pwnd != pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>)
00469         <span class="keywordflow">return</span>;
00470 
00471     <span class="comment">/*</span>
00472 <span class="comment">     * leave caret on, don't blink it off for remote sessions</span>
00473 <span class="comment">     */</span>
00474 
00475     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a328">gbRemoteSession</a> &amp;&amp; (<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtCaretBlink &gt;= 1200) &amp;&amp; pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o2">fOn</a> &amp;&amp; pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o1">fVisible</a>) {
00476 
00477         <span class="comment">/*</span>
00478 <span class="comment">         * Kill the timer for performance</span>
00479 <span class="comment">         */</span>
00480         <a class="code" href="../../d4/d1/userk_8h.html#a1567">_KillSystemTimer</a>(pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>, IDSYS_CARET);
00481         <span class="keywordflow">return</span>;
00482     }
00483 
00484     <span class="comment">/*</span>
00485 <span class="comment">     * Flip the logical cursor state.  If the hide level permits it, flip</span>
00486 <span class="comment">     * the physical state and draw the caret.</span>
00487 <span class="comment">     */</span>
00488     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o2">fOn</a> ^= 1;
00489     <span class="keywordflow">if</span> (pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o3">iHideLevel</a> == 0) {
00490         pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o1">fVisible</a> ^= 1;
00491         <a class="code" href="../../d4/d5/caret_8c.html#a1">UT_InvertCaret</a>();
00492     }
00493 
00494     <span class="keywordflow">return</span>;
00495 
00496     DBG_UNREFERENCED_PARAMETER(message);
00497     DBG_UNREFERENCED_PARAMETER(<span class="keywordtype">id</span>);
00498     DBG_UNREFERENCED_PARAMETER(lParam);
00499 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="caret.c::UT_CaretSet" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL UT_CaretSet           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/caret_8c-source.html#l00028">28</a> of file <a class="el" href="../../d5/d4/caret_8c-source.html">caret.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03124">tagQ::caret</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03319">tagTHREADINFO::ppi</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l04737">PtiFromThreadId()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02901">tagCARET::spwnd</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03084">tagCARET::tid</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01175">TIDq</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02827">TIF_16BIT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03331">tagTHREADINFO::TIF_flags</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d5/d4/caret_8c-source.html#l00234">zzzDestroyCaret()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00434">zzzHideCaret()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00550">zzzSetCaretPos()</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00413">zzzShowCaret()</a>.
<p>
<pre class="fragment"><div>00030 {
00031     <a class="code" href="../../d7/d4/structtagQ.html">PQ</a> pq;
00032     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent;
00033 
00034     <span class="comment">/*</span>
00035 <span class="comment">     * Current queue have a caret? If not, return FALSE.</span>
00036 <span class="comment">     */</span>
00037     ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
00038     pq = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>;
00039 
00040     <span class="keywordflow">if</span> (pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00041         RIPERR0(ERROR_ACCESS_DENIED,
00042                 RIP_VERBOSE,
00043                 <span class="stringliteral">"Access denied in UT_CaretSet to current queue's caret"</span>);
00044 
00045         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00046     }
00047 
00048     <span class="comment">/*</span>
00049 <span class="comment">     * If the current task does not own the caret, then return FALSE</span>
00050 <span class="comment">     * but we let 32 bit multithreaded apps set the caret position from</span>
00051 <span class="comment">     * a second thread for compatibility to our NT 3.1 BETAs</span>
00052 <span class="comment">     */</span>
00053     <span class="keywordflow">if</span> (pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o10">tid</a> != <a class="code" href="../../d4/d1/userk_8h.html#a107">TIDq</a>(ptiCurrent)) {
00054         <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCursorOwner;
00055 
00056         ptiCursorOwner = <a class="code" href="../../d4/d1/userk_8h.html#a1201">PtiFromThreadId</a>(pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o10">tid</a>);
00057 
00058         <span class="keywordflow">if</span> ((ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o9">TIF_flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a796">TIF_16BIT</a>) || ptiCursorOwner == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ||
00059                 (ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o2">ppi</a> != ptiCursorOwner-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o2">ppi</a>))  {
00060             RIPERR0(ERROR_ACCESS_DENIED,
00061                     RIP_VERBOSE,
00062                     <span class="stringliteral">"Access denied in UT_CaretSet"</span>);
00063 
00064             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00065         }
00066     }
00067 
00068     <span class="comment">/*</span>
00069 <span class="comment">     * If pwnd == NULL, just checking to see if current queue has caret.</span>
00070 <span class="comment">     * It does, so return TRUE.</span>
00071 <span class="comment">     */</span>
00072     <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00073         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00074 
00075     <span class="comment">/*</span>
00076 <span class="comment">     * pwnd != NULL.  Check to see if the caret is for pwnd.  If so, return</span>
00077 <span class="comment">     * TRUE.</span>
00078 <span class="comment">     */</span>
00079     <span class="keywordflow">if</span> (pwnd == pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>)
00080         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00081 
00082     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00083 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="caret.c::UT_InvertCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void UT_InvertCaret           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/caret_8c-source.html#l00094">94</a> of file <a class="el" href="../../d5/d4/caret_8c-source.html">caret.c</a>.
<p>
References <a class="el" href="../../d9/d8/update_8c-source.html#l01462">_ExcludeUpdateRgn()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00148">_GetDC()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00183">_ReleaseDC()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03124">tagQ::caret</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03081">tagCARET::cx</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03080">tagCARET::cy</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03075">tagCARET::fVisible</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03361">ghbrWhite</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00493">ghdcMem</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03082">tagCARET::hBitmap</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01757">tagWND::hrgnUpdate</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00537">IsVisible()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02901">tagCARET::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02318">WFWIN31COMPAT</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03078">tagCARET::x</a>, and <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03079">tagCARET::y</a>.
<p>
Referenced by <a class="el" href="../../d5/d4/caret_8c-source.html#l00454">CaretBlinkProc()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00376">zzzInternalHideCaret()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00331">zzzInternalShowCaret()</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00550">zzzSetCaretPos()</a>.
<p>
<pre class="fragment"><div>00095 {
00096     HDC hdc;
00097     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00098     <a class="code" href="../../d7/d4/structtagQ.html">PQ</a> pq;
00099     HBITMAP hbmSave;
00100     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fRestore;
00101 
00102     pq = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;pq;
00103     pwnd = pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>;
00104 
00105 
00106     <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || !<a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a6">IsVisible</a>(pwnd)) {
00107         pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o1">fVisible</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00108         <span class="keywordflow">return</span>;
00109     }
00110 
00111     <span class="comment">/*</span>
00112 <span class="comment">     * Don't have a dc.  Get one for this window and draw the caret.</span>
00113 <span class="comment">     */</span>
00114     hdc = <a class="code" href="../../d4/d1/userk_8h.html#a1694">_GetDC</a>(pwnd);
00115 
00116     <span class="keywordflow">if</span> (fRestore = (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o11">hrgnUpdate</a> ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>)) {
00117         GreSaveDC(hdc);
00118         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN31COMPAT))
00119             <a class="code" href="../../d4/d1/userk_8h.html#a1676">_ExcludeUpdateRgn</a>(hdc, pwnd);
00120     }
00121 
00122     <span class="comment">/*</span>
00123 <span class="comment">     * If the caret bitmap is NULL, the caret is a white pattern invert</span>
00124 <span class="comment">     * If the caret bitmap is == 1, the caret is a gray pattern.</span>
00125 <span class="comment">     * If the caret bitmap is  &gt; 1, the caret is really a bitmap.</span>
00126 <span class="comment">     */</span>
00127     <span class="keywordflow">if</span> ((pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o8">hBitmap</a>) &gt; (HBITMAP)1) {
00128 
00129         <span class="comment">/*</span>
00130 <span class="comment">         * The caret is a bitmap...  SRCINVERT it onto the screen.</span>
00131 <span class="comment">         */</span>
00132         hbmSave = GreSelectBitmap(ghdcMem, pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o8">hBitmap</a>);
00133         GreBitBlt(hdc, pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o4">x</a>, pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o5">y</a>, pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o7">cx</a>,
00134               pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o6">cy</a>, ghdcMem, 0, 0, SRCINVERT, 0);
00135 
00136         GreSelectBitmap(ghdcMem, hbmSave);
00137 
00138     } <span class="keywordflow">else</span> {
00139 
00140         POLYPATBLT PolyData;
00141 
00142         <span class="comment">/*</span>
00143 <span class="comment">         * The caret is a pattern (gray or white).  PATINVERT it onto the</span>
00144 <span class="comment">         * screen.  Remember to unrealize the gray object so it aligns</span>
00145 <span class="comment">         * to the window correctly.</span>
00146 <span class="comment">         *</span>
00147 <span class="comment">         * Remove call to UnrealizeObject.  GDI handles this on NT for</span>
00148 <span class="comment">         * brushes.</span>
00149 <span class="comment">         *</span>
00150 <span class="comment">         * UnrealizeObject(hbrGray);</span>
00151 <span class="comment">         */</span>
00152         PolyData.x  = pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o4">x</a>;
00153         PolyData.y  = pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o5">y</a>;
00154         PolyData.cx = pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o7">cx</a>;
00155         PolyData.cy = pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o6">cy</a>;
00156 
00157         <span class="keywordflow">if</span> ((pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o8">hBitmap</a>) == (HBITMAP)1) {
00158             <span class="comment">//hbrSave = GreSelectBrush(hdc, ghbrGray);</span>
00159             PolyData.BrClr.hbr = <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;hbrGray;
00160         } <span class="keywordflow">else</span> {
00161             <span class="comment">//hbrSave = GreSelectBrush(hdc, ghbrWhite);</span>
00162             PolyData.BrClr.hbr = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1134">ghbrWhite</a>;
00163         }
00164 
00165         GrePolyPatBlt(hdc,PATINVERT,&amp;PolyData,1,PPB_BRUSH);
00166 
00167         <span class="comment">//GrePatBlt(hdc, pq-&gt;caret.x, pq-&gt;caret.y, pq-&gt;caret.cx, pq-&gt;caret.cy,</span>
00168         <span class="comment">//        PATINVERT);</span>
00169         <span class="comment">//</span>
00170         <span class="comment">//GreSelectBrush(hdc,hbrSave);</span>
00171     }
00172 
00173     <span class="keywordflow">if</span> (fRestore)
00174         GreRestoreDC(hdc, -1);
00175 
00176     <a class="code" href="../../d4/d1/userk_8h.html#a1697">_ReleaseDC</a>(hdc);
00177 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="caret.c::xxxCreateCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL xxxCreateCaret           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HBITMAP&nbsp;</td>
          <td class="mdname" nowrap> <em>hBitmap</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cy</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/caret_8c-source.html#l00254">254</a> of file <a class="el" href="../../d5/d4/caret_8c-source.html">caret.c</a>.
<p>
References <a class="el" href="../../d5/d1/timers_8c-source.html#l00078">_SetSystemTimer()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03124">tagQ::caret</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00454">CaretBlinkProc()</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00361">CheckLock</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03081">tagCARET::cx</a>, <a class="el" href="../../d2/d0/inctlpan_8c-source.html#l00480">cy</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03080">tagCARET::cy</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06469">DeferWinEventNotify</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03076">tagCARET::fOn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03075">tagCARET::fVisible</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03082">tagCARET::hBitmap</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02910">tagCARET::hTimer</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00312">IDSYS_CARET</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03077">tagCARET::iHideLevel</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06472">IsWinEventNotifyDeferredOK</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00367">Lock</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02901">tagCARET::spwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03084">tagCARET::tid</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01175">TIDq</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d6/d6/kernel_2winable_8c-source.html#l00274">xxxWindowEvent()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06473">zzzEndDeferWinEventNotify</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00189">zzzInternalDestroyCaret()</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06550">NtUserCreateCaret()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.
<p>
<pre class="fragment"><div>00259 {
00260     <a class="code" href="../../d7/d4/structtagQ.html">PQ</a> pq;
00261     BITMAP bitmap;
00262     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a>  ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
00263 
00264     <a class="code" href="../../d6/d0/usercli_8h.html#a35">CheckLock</a>(pwnd);
00265     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a616">IsWinEventNotifyDeferredOK</a>());
00266 
00267     pq = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>;
00268 
00269     <span class="comment">/*</span>
00270 <span class="comment">     * Don't allow the app to create a caret in a window</span>
00271 <span class="comment">     * from another queue.</span>
00272 <span class="comment">     */</span>
00273     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pwnd)-&gt;pq != pq) {
00274         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00275     }
00276 
00277     <span class="comment">/*</span>
00278 <span class="comment">     * Defer WinEvent notifications to preserve pq</span>
00279 <span class="comment">     */</span>
00280     <a class="code" href="../../d4/d1/userk_8h.html#a614">DeferWinEventNotify</a>();
00281 
00282     <span class="keywordflow">if</span> (pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00283         <a class="code" href="../../d4/d5/caret_8c.html#a2">zzzInternalDestroyCaret</a>();
00284 
00285     <a class="code" href="../../d6/d0/usercli_8h.html#a41">Lock</a>(&amp;pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>, pwnd);
00286     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o3">iHideLevel</a> = 1;
00287     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o2">fOn</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00288     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o1">fVisible</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00289     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o10">tid</a> = <a class="code" href="../../d4/d1/userk_8h.html#a107">TIDq</a>(ptiCurrent);
00290 
00291     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> == 0)
00292         <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER);
00293     <span class="keywordflow">if</span> (cx == 0)
00294         cx = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER);
00295 
00296     <span class="keywordflow">if</span> ((pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o8">hBitmap</a> = hBitmap) &gt; (HBITMAP)1) {
00297         GreExtGetObjectW(hBitmap, <span class="keyword">sizeof</span>(BITMAP), &amp;bitmap);
00298         <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a> = bitmap.bmHeight;
00299         cx = bitmap.bmWidth;
00300     }
00301 
00302     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o6">cy</a> = <a class="code" href="../../d1/d1/inctlpan_8c.html#a3">cy</a>;
00303     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o7">cx</a> = cx;
00304 
00305     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o9">hTimer</a> = <a class="code" href="../../d4/d1/userk_8h.html#a1894">_SetSystemTimer</a>(pwnd, IDSYS_CARET, <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtCaretBlink,
00306             CaretBlinkProc);
00307 
00308     UserAssert(pwnd == pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>);
00309     <a class="code" href="../../d4/d1/userk_8h.html#a617">zzzEndDeferWinEventNotify</a>();
00310     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00311         <span class="comment">/*</span>
00312 <span class="comment">         * It's best to force this routine to be an xxx routine: that way we can</span>
00313 <span class="comment">         * force pwnd to be locked and force notifications from within this routine</span>
00314 <span class="comment">         * and all of the callers are happy with this.</span>
00315 <span class="comment">         */</span>
00316         <a class="code" href="../../d5/d7/kernel_2winable_8c.html#a8">xxxWindowEvent</a>(EVENT_OBJECT_CREATE, pwnd, OBJID_CARET, INDEXID_CONTAINER, 0);
00317     }
00318 
00319     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00320 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="caret.c::zzzDestroyCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL zzzDestroyCaret           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/caret_8c-source.html#l00234">234</a> of file <a class="el" href="../../d5/d4/caret_8c-source.html">caret.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00028">UT_CaretSet()</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00189">zzzInternalDestroyCaret()</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/focusact_8c-source.html#l02549">xxxCheckFocus()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.
<p>
<pre class="fragment"><div>00235 {
00236     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d5/caret_8c.html#a0">UT_CaretSet</a>(NULL)) {
00237         <a class="code" href="../../d4/d5/caret_8c.html#a2">zzzInternalDestroyCaret</a>();
00238         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00239     }
00240     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00241 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="caret.c::zzzHideCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL zzzHideCaret           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/caret_8c-source.html#l00434">434</a> of file <a class="el" href="../../d5/d4/caret_8c-source.html">caret.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00028">UT_CaretSet()</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00376">zzzInternalHideCaret()</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05279">NtUserHideCaret()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.
<p>
<pre class="fragment"><div>00436 {
00437     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d5/caret_8c.html#a0">UT_CaretSet</a>(pwnd)) {
00438         <a class="code" href="../../d4/d5/caret_8c.html#a6">zzzInternalHideCaret</a>();
00439         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00440     }
00441     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00442 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="caret.c::zzzInternalDestroyCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void zzzInternalDestroyCaret           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/caret_8c-source.html#l00189">189</a> of file <a class="el" href="../../d5/d4/caret_8c-source.html">caret.c</a>.
<p>
References <a class="el" href="../../d5/d1/timers_8c-source.html#l00431">_KillSystemTimer()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03124">tagQ::caret</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03082">tagCARET::hBitmap</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02910">tagCARET::hTimer</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00312">IDSYS_CARET</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03077">tagCARET::iHideLevel</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02901">tagCARET::spwnd</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00364">ThreadLockWithPti</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00366">ThreadUnlock</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00368">Unlock</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00376">zzzInternalHideCaret()</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l06494">zzzWindowEvent</a>.
<p>
Referenced by <a class="el" href="../../d5/d4/caret_8c-source.html#l00254">xxxCreateCaret()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l01591">xxxDestroyWindow()</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00234">zzzDestroyCaret()</a>.
<p>
<pre class="fragment"><div>00190 {
00191     <a class="code" href="../../d7/d4/structtagQ.html">PQ</a> pq;
00192     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
00193     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndCaret;
00194     <a class="code" href="../../d5/d1/struct__TL.html">TL</a> tlpwndCaret;
00195 
00196     <span class="comment">/*</span>
00197 <span class="comment">     * Hide the caret, kill the timer, and null out the caret structure.</span>
00198 <span class="comment">     */</span>
00199     <a class="code" href="../../d4/d5/caret_8c.html#a6">zzzInternalHideCaret</a>();
00200     pq = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>;
00201     <a class="code" href="../../d4/d1/userk_8h.html#a1567">_KillSystemTimer</a>(pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>, IDSYS_CARET);
00202 
00203     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o9">hTimer</a> = 0;
00204     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o8">hBitmap</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00205     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o3">iHideLevel</a> = 0;
00206 
00207     pwndCaret = pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>;
00208     <span class="keywordflow">if</span> (pwndCaret != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00209         <span class="comment">/*</span>
00210 <span class="comment">         * Threadlock caret's spwnd for WinEvent notification below</span>
00211 <span class="comment">         */</span>
00212         <a class="code" href="../../d6/d0/usercli_8h.html#a38">ThreadLockWithPti</a>(ptiCurrent, pwndCaret, &amp;tlpwndCaret);
00213         <a class="code" href="../../d6/d0/usercli_8h.html#a42">Unlock</a>(&amp;pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>);
00214 
00215         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00216             <a class="code" href="../../d4/d1/userk_8h.html#a619">zzzWindowEvent</a>(EVENT_OBJECT_DESTROY, pwndCaret, OBJID_CARET, INDEXID_CONTAINER, 0);
00217         }
00218 
00219         <a class="code" href="../../d6/d0/usercli_8h.html#a40">ThreadUnlock</a>(&amp;tlpwndCaret);
00220     }
00221 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="caret.c::zzzInternalHideCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void zzzInternalHideCaret           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/caret_8c-source.html#l00376">376</a> of file <a class="el" href="../../d5/d4/caret_8c-source.html">caret.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l03124">tagQ::caret</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03075">tagCARET::fVisible</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03077">tagCARET::iHideLevel</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02901">tagCARET::spwnd</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00094">UT_InvertCaret()</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l06494">zzzWindowEvent</a>.
<p>
Referenced by <a class="el" href="../../d0/d2/paint_8c-source.html#l00310">xxxBeginPaint()</a>, <a class="el" href="../../d0/d4/scrollw_8c-source.html#l00741">xxxScrollWindowEx()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00434">zzzHideCaret()</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00189">zzzInternalDestroyCaret()</a>.
<p>
<pre class="fragment"><div>00377 {
00378     <a class="code" href="../../d7/d4/structtagQ.html">PQ</a> pq;
00379     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
00380 
00381     pq = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>;
00382 
00383     <span class="comment">/*</span>
00384 <span class="comment">     * If the caret is physically visible, invert it to turn off the bits.</span>
00385 <span class="comment">     * Adjust the hide count upwards to remember this hide level.</span>
00386 <span class="comment">     */</span>
00387     <span class="keywordflow">if</span> (pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o1">fVisible</a>)
00388         <a class="code" href="../../d4/d5/caret_8c.html#a1">UT_InvertCaret</a>();
00389 
00390     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o1">fVisible</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00391     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o3">iHideLevel</a>++;
00392 
00393     <span class="comment">/*</span>
00394 <span class="comment">     * Is the caret transitioning to being hidden?  If so, iHideLevel is</span>
00395 <span class="comment">     * going from 0 to 1.</span>
00396 <span class="comment">     */</span>
00397     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>() &amp;&amp; (pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o3">iHideLevel</a> == 1)) {
00398         <a class="code" href="../../d4/d1/userk_8h.html#a619">zzzWindowEvent</a>(EVENT_OBJECT_HIDE, pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>, OBJID_CARET, INDEXID_CONTAINER, 0);
00399     }
00400 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="caret.c::zzzInternalShowCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void zzzInternalShowCaret           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/caret_8c-source.html#l00331">331</a> of file <a class="el" href="../../d5/d4/caret_8c-source.html">caret.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l03124">tagQ::caret</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03076">tagCARET::fOn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03075">tagCARET::fVisible</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03077">tagCARET::iHideLevel</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02901">tagCARET::spwnd</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00094">UT_InvertCaret()</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l06494">zzzWindowEvent</a>.
<p>
Referenced by <a class="el" href="../../d0/d2/paint_8c-source.html#l00449">xxxEndPaint()</a>, <a class="el" href="../../d0/d4/scrollw_8c-source.html#l00741">xxxScrollWindowEx()</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00413">zzzShowCaret()</a>.
<p>
<pre class="fragment"><div>00332 {
00333     <a class="code" href="../../d7/d4/structtagQ.html">PQ</a> pq;
00334     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
00335 
00336     pq = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>;
00337 
00338     <span class="comment">/*</span>
00339 <span class="comment">     * If the caret hide level is aleady 0 (meaning it's ok to show) and the</span>
00340 <span class="comment">     * caret is not physically on, try to invert now if it's turned on.</span>
00341 <span class="comment">     */</span>
00342     <span class="keywordflow">if</span> (pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o3">iHideLevel</a> == 0) {
00343         <span class="keywordflow">if</span> (!pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o1">fVisible</a>) {
00344             <span class="keywordflow">if</span> ((pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o1">fVisible</a> = pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o2">fOn</a>) != 0) {
00345                 <a class="code" href="../../d4/d5/caret_8c.html#a1">UT_InvertCaret</a>();
00346             }
00347         }
00348         <span class="keywordflow">return</span>;
00349     }
00350 
00351     <span class="comment">/*</span>
00352 <span class="comment">     * Adjust the hide caret hide count.  If we hit 0, we can show the</span>
00353 <span class="comment">     * caret.  Try to invert it if it's turned on.</span>
00354 <span class="comment">     */</span>
00355 
00356     <span class="keywordflow">if</span> (--pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o3">iHideLevel</a> == 0) {
00357         <span class="keywordflow">if</span> ((pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o1">fVisible</a> = pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o2">fOn</a>) != 0)
00358             <a class="code" href="../../d4/d5/caret_8c.html#a1">UT_InvertCaret</a>();
00359 
00360         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00361             <a class="code" href="../../d4/d1/userk_8h.html#a619">zzzWindowEvent</a>(EVENT_OBJECT_SHOW, pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>, OBJID_CARET, INDEXID_CONTAINER, 0);
00362         }
00363     }
00364 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="caret.c::zzzSetCaretPos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL zzzSetCaretPos           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>y</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/caret_8c-source.html#l00550">550</a> of file <a class="el" href="../../d5/d4/caret_8c-source.html">caret.c</a>.
<p>
References <a class="el" href="../../d5/d1/timers_8c-source.html#l00431">_KillSystemTimer()</a>, <a class="el" href="../../d5/d1/timers_8c-source.html#l00078">_SetSystemTimer()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03124">tagQ::caret</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00454">CaretBlinkProc()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03076">tagCARET::fOn</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03075">tagCARET::fVisible</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01265">FWINABLE</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02910">tagCARET::hTimer</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00312">IDSYS_CARET</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03077">tagCARET::iHideLevel</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l03321">tagTHREADINFO::pq</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02901">tagCARET::spwnd</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00028">UT_CaretSet()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00094">UT_InvertCaret()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03078">tagCARET::x</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03079">tagCARET::y</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l06494">zzzWindowEvent</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00907">zzzSetSBCaretPos()</a>.
<p>
<pre class="fragment"><div>00553 {
00554     <a class="code" href="../../d7/d4/structtagQ.html">PQ</a> pq;
00555     <a class="code" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a>  ptiCurrent = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>();
00556 
00557     <span class="comment">/*</span>
00558 <span class="comment">     * If this thread does not have the caret set, return FALSE.</span>
00559 <span class="comment">     */</span>
00560     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d5/caret_8c.html#a0">UT_CaretSet</a>(NULL)) {
00561         RIPERR0(ERROR_ACCESS_DENIED, RIP_VERBOSE, <span class="stringliteral">"Access denied in zzzSetCaretPos"</span>);
00562         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00563     }
00564 
00565     <span class="comment">/*</span>
00566 <span class="comment">     * If the caret isn't changing position, do nothing (but return success).</span>
00567 <span class="comment">     */</span>
00568     pq = ptiCurrent-&gt;<a class="code" href="../../d2/d8/structtagTHREADINFO.html#o3">pq</a>;
00569     <span class="keywordflow">if</span> (pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o4">x</a> == x &amp;&amp; pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o5">y</a> == y)
00570         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00571 
00572     <span class="comment">/*</span>
00573 <span class="comment">     * If the caret is visible, turn it off while we move it.</span>
00574 <span class="comment">     */</span>
00575     <span class="keywordflow">if</span> (pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o1">fVisible</a>)
00576         <a class="code" href="../../d4/d5/caret_8c.html#a1">UT_InvertCaret</a>();
00577 
00578     <span class="comment">/*</span>
00579 <span class="comment">     * Adjust to the new position.</span>
00580 <span class="comment">     */</span>
00581     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o4">x</a> = x;
00582     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o5">y</a> = y;
00583 
00584     <span class="comment">/*</span>
00585 <span class="comment">     * Set a new timer so it'll blink in the new position dtCaretBlink</span>
00586 <span class="comment">     * milliseconds from now.</span>
00587 <span class="comment">     */</span>
00588     <a class="code" href="../../d4/d1/userk_8h.html#a1567">_KillSystemTimer</a>(pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>, IDSYS_CARET);
00589     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o9">hTimer</a> = <a class="code" href="../../d4/d1/userk_8h.html#a1894">_SetSystemTimer</a>(pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>, IDSYS_CARET,
00590             <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;dtCaretBlink, CaretBlinkProc);
00591 
00592     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o2">fOn</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00593 
00594     <span class="comment">/*</span>
00595 <span class="comment">     * Draw it immediately now if the hide level permits it.</span>
00596 <span class="comment">     */</span>
00597     pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o1">fVisible</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00598     <span class="keywordflow">if</span> (pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o3">iHideLevel</a> == 0) {
00599         pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o1">fVisible</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00600         <a class="code" href="../../d4/d5/caret_8c.html#a1">UT_InvertCaret</a>();
00601     }
00602 
00603     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a405">FWINABLE</a>()) {
00604         <a class="code" href="../../d4/d1/userk_8h.html#a619">zzzWindowEvent</a>(EVENT_OBJECT_LOCATIONCHANGE, pq-&gt;<a class="code" href="../../d7/d4/structtagQ.html#o18">caret</a>.<a class="code" href="../../d6/d9/structtagCARET.html#o0">spwnd</a>, OBJID_CARET, INDEXID_CONTAINER, 0);
00605     }
00606 
00607     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00608 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="caret.c::zzzShowCaret" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL zzzShowCaret           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/caret_8c-source.html#l00413">413</a> of file <a class="el" href="../../d5/d4/caret_8c-source.html">caret.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00028">UT_CaretSet()</a>, and <a class="el" href="../../d5/d4/caret_8c-source.html#l00331">zzzInternalShowCaret()</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06219">NtUserShowCaret()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01782">xxxEndScroll()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02196">xxxSBTrackInit()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>.
<p>
<pre class="fragment"><div>00415 {
00416     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d5/caret_8c.html#a0">UT_CaretSet</a>(pwnd)) {
00417         <a class="code" href="../../d4/d5/caret_8c.html#a5">zzzInternalShowCaret</a>();
00418         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00419     }
00420     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00421 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:02 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

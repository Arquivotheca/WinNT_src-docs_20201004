<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: ppc/kdcpuapi.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>kdcpuapi.c File Reference</h1><code>#include "<a class="el" href="../../d2/d6/4_2kdp_8h-source.html">kdp.h</a>"</code><br>

<p>
<a href="../../d5/d4/ppc_2kdcpuapi_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/ppc_2kdcpuapi_8c.html#a0">END_OF_CONTROL_SPACE</a>&nbsp;&nbsp;&nbsp;(sizeof(KPROCESSOR_STATE))</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/ppc_2kdcpuapi_8c.html#a1">KdpSetLoadState</a> (IN PDBGKD_WAIT_STATE_CHANGE WaitStateChange, IN PCONTEXT ContextRecord)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/ppc_2kdcpuapi_8c.html#a2">KdpSetStateChange</a> (IN PDBGKD_WAIT_STATE_CHANGE WaitStateChange, IN PEXCEPTION_RECORD ExceptionRecord, IN PCONTEXT ContextRecord, IN BOOLEAN SecondChance)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/ppc_2kdcpuapi_8c.html#a3">KdpGetStateChange</a> (IN PDBGKD_MANIPULATE_STATE ManipulateState, IN PCONTEXT ContextRecord)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/ppc_2kdcpuapi_8c.html#a4">KdpReadControlSpace</a> (IN PDBGKD_MANIPULATE_STATE m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/ppc_2kdcpuapi_8c.html#a5">KdpWriteControlSpace</a> (IN PDBGKD_MANIPULATE_STATE m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/ppc_2kdcpuapi_8c.html#a6">KdpReadIoSpace</a> (IN PDBGKD_MANIPULATE_STATE m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d5/ppc_2kdcpuapi_8c.html#a7">KdpWriteIoSpace</a> (IN PDBGKD_MANIPULATE_STATE m, IN PSTRING AdditionalData, IN PCONTEXT Context)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="ppc/kdcpuapi.c::END_OF_CONTROL_SPACE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define END_OF_CONTROL_SPACE&nbsp;&nbsp;&nbsp;(sizeof(KPROCESSOR_STATE))          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html#l00024">24</a> of file <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html">ppc/kdcpuapi.c</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a3" doxytag="ppc/kdcpuapi.c::KdpGetStateChange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpGetStateChange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE&nbsp;</td>
          <td class="mdname" nowrap> <em>ManipulateState</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>ContextRecord</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html#l00175">175</a> of file <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html">ppc/kdcpuapi.c</a>.
<p>
<pre class="fragment"><div>00182                    :
00183 
00184     Extract continuation <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a58">control</a> data from Manipulate_State message
00185 
00186     N.B. This <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a noop <span class="keywordflow">for</span> MIPS.
00187 
00188 Arguments:
00189 
00190     ManipulateState - supplies pointer to Manipulate_State packet
00191 
00192     ContextRecord - Supplies a pointer to a context record.
00193 
00194 Return Value:
00195 
00196     None.
00197 
00198 --*/
00199 
00200 {
00201 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="ppc/kdcpuapi.c::KdpReadControlSpace" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpReadControlSpace           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html#l00204">204</a> of file <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html">ppc/kdcpuapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d3/d4/i386_2kdcpuapi_8c-source.html#l00028">END_OF_CONTROL_SPACE</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02776">KeNumberProcessors</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02782">KiProcessorBlock</a>, <a class="el" href="../../d5/d0/genmips_8c-source.html#l00109">t()</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00212                    :
00213 
00214     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a read <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a58">control</a> space state
00215     manipulation message.  Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to read implementation
00216     specific system data.
00217 
00218 Arguments:
00219 
00220     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
00221 
00222     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
00223 
00224     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
00225 
00226 Return Value:
00227 
00228     None.
00229 
00230 --*/
00231 
00232 {
00233 
00234     PDBGKD_READ_MEMORY a = &amp;m-&gt;u.ReadMemory;
00235     ULONG Length, <a class="code" href="../../d4/d1/genmips_8c.html#a17">t</a>;
00236     PVOID StartAddr;
00237     STRING MessageHeader;
00238     PULONG EntryBuffer;
00239 
00240     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
00241     MessageHeader.Buffer = (PCHAR)m;
00242 
00243     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(AdditionalData-&gt;Length == 0);
00244 
00245     <span class="keywordflow">if</span> (a-&gt;TransferCount &gt; (PACKET_MAX_SIZE - <span class="keyword">sizeof</span>(DBGKD_MANIPULATE_STATE))) {
00246         Length = PACKET_MAX_SIZE - <span class="keyword">sizeof</span>(DBGKD_MANIPULATE_STATE);
00247 
00248     } <span class="keywordflow">else</span> {
00249         Length = a-&gt;TransferCount;
00250     }
00251 
00252     <span class="comment">//</span>
00253     <span class="comment">// Case on address to determine what part of Control space is being read.</span>
00254     <span class="comment">//</span>
00255 
00256     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(<span class="keyword">sizeof</span>(PVOID) == <span class="keyword">sizeof</span>(ULONG));
00257     <span class="keywordflow">if</span> ((ULONG)a-&gt;TargetBaseAddress == DEBUG_CONTROL_SPACE_PCR) {
00258         EntryBuffer = (PULONG)PCR;
00259         AdditionalData-&gt;Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>( AdditionalData-&gt;Buffer,
00260                                         (PCHAR)&amp;EntryBuffer,
00261                                         <span class="keyword">sizeof</span>(ULONG)
00262                                         );
00263         <span class="keywordflow">if</span> (Length == AdditionalData-&gt;Length) {
00264             m-&gt;ReturnStatus = STATUS_SUCCESS;
00265         } <span class="keywordflow">else</span> {
00266             m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
00267         }
00268         a-&gt;ActualBytesRead = <span class="keyword">sizeof</span>(ULONG);
00269     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((a-&gt;TargetBaseAddress &lt; (PVOID)<a class="code" href="../../d2/d5/i386_2kdcpuapi_8c.html#a0">END_OF_CONTROL_SPACE</a>) &amp;&amp;
00270         (m-&gt;Processor &lt; (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d4/d9/ke_8h.html#a133">KeNumberProcessors</a>)) {
00271         <a class="code" href="../../d4/d1/genmips_8c.html#a17">t</a> = (PUCHAR)<a class="code" href="../../d2/d5/i386_2kdcpuapi_8c.html#a0">END_OF_CONTROL_SPACE</a> - (PUCHAR)a-&gt;TargetBaseAddress;
00272         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/genmips_8c.html#a17">t</a> &lt; Length) {
00273             Length = <a class="code" href="../../d4/d1/genmips_8c.html#a17">t</a>;
00274         }
00275         StartAddr = (PVOID)((ULONG)a-&gt;TargetBaseAddress +
00276                             (ULONG)&amp;(<a class="code" href="../../d4/d9/ke_8h.html#a139">KiProcessorBlock</a>[m-&gt;Processor]-&gt;ProcessorState));
00277         AdditionalData-&gt;Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(
00278                                     AdditionalData-&gt;Buffer,
00279                                     StartAddr,
00280                                     Length
00281                                     );
00282 
00283         <span class="keywordflow">if</span> (Length == AdditionalData-&gt;Length) {
00284             m-&gt;ReturnStatus = STATUS_SUCCESS;
00285         } <span class="keywordflow">else</span> {
00286             m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
00287         }
00288         a-&gt;ActualBytesRead = AdditionalData-&gt;Length;
00289 
00290     } <span class="keywordflow">else</span> {
00291 
00292         <span class="comment">//</span>
00293         <span class="comment">// Uninterpreted Special Space</span>
00294         <span class="comment">//</span>
00295 
00296         AdditionalData-&gt;Length = 0;
00297         m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
00298         a-&gt;ActualBytesRead = 0;
00299     }
00300 
00301     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
00302         PACKET_TYPE_KD_STATE_MANIPULATE,
00303         &amp;MessageHeader,
00304         AdditionalData
00305         );
00306 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="ppc/kdcpuapi.c::KdpReadIoSpace" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpReadIoSpace           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html#l00379">379</a> of file <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html">ppc/kdcpuapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d5/d5/ppc_2debugsup_8c-source.html#l00028">MmDbgReadCheck()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>.
<p>
<pre class="fragment"><div>00387                    :
00388 
00389     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a read io space state
00390     manipulation message.  Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to read system io
00391     locations.
00392 
00393 Arguments:
00394 
00395     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
00396 
00397     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
00398 
00399     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
00400 
00401 Return Value:
00402 
00403     None.
00404 
00405 --*/
00406 
00407 {
00408     PDBGKD_READ_WRITE_IO a = &amp;m-&gt;u.ReadWriteIo;
00409     STRING MessageHeader;
00410     PUCHAR b;
00411     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> s;
00412     PULONG l;
00413 
00414     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
00415     MessageHeader.Buffer = (PCHAR)m;
00416 
00417     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(AdditionalData-&gt;Length == 0);
00418 
00419     m-&gt;ReturnStatus = STATUS_SUCCESS;
00420 
00421     <span class="comment">//</span>
00422     <span class="comment">// Check Size and Alignment</span>
00423     <span class="comment">//</span>
00424 
00425     <span class="keywordflow">switch</span> ( a-&gt;DataSize ) {
00426         <span class="keywordflow">case</span> 1:
00427             b = (PUCHAR)<a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a0">MmDbgReadCheck</a>(a-&gt;IoAddress);
00428             <span class="keywordflow">if</span> ( b ) {
00429                 a-&gt;DataValue = (ULONG)*b;
00430             } <span class="keywordflow">else</span> {
00431                 m-&gt;ReturnStatus = STATUS_ACCESS_VIOLATION;
00432             }
00433             <span class="keywordflow">break</span>;
00434         <span class="keywordflow">case</span> 2:
00435             <span class="keywordflow">if</span> ((ULONG)a-&gt;IoAddress &amp; 1 ) {
00436                 m-&gt;ReturnStatus = STATUS_DATATYPE_MISALIGNMENT;
00437             } <span class="keywordflow">else</span> {
00438                 s = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)<a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a0">MmDbgReadCheck</a>(a-&gt;IoAddress);
00439                 <span class="keywordflow">if</span> ( s ) {
00440                     a-&gt;DataValue = (ULONG)*s;
00441                 } <span class="keywordflow">else</span> {
00442                     m-&gt;ReturnStatus = STATUS_ACCESS_VIOLATION;
00443                 }
00444             }
00445             <span class="keywordflow">break</span>;
00446         <span class="keywordflow">case</span> 4:
00447             <span class="keywordflow">if</span> ((ULONG)a-&gt;IoAddress &amp; 3 ) {
00448                 m-&gt;ReturnStatus = STATUS_DATATYPE_MISALIGNMENT;
00449             } <span class="keywordflow">else</span> {
00450                 l = (PULONG)<a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a0">MmDbgReadCheck</a>(a-&gt;IoAddress);
00451                 <span class="keywordflow">if</span> ( l ) {
00452                     a-&gt;DataValue = (ULONG)*l;
00453                 } <span class="keywordflow">else</span> {
00454                     m-&gt;ReturnStatus = STATUS_ACCESS_VIOLATION;
00455                 }
00456             }
00457             <span class="keywordflow">break</span>;
00458         <span class="keywordflow">default</span>:
00459             m-&gt;ReturnStatus = STATUS_INVALID_PARAMETER;
00460     }
00461 
00462     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
00463         PACKET_TYPE_KD_STATE_MANIPULATE,
00464         &amp;MessageHeader,
00465         NULL
00466         );
00467 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="ppc/kdcpuapi.c::KdpSetLoadState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpSetLoadState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_WAIT_STATE_CHANGE&nbsp;</td>
          <td class="mdname" nowrap> <em>WaitStateChange</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>ContextRecord</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html#l00028">28</a> of file <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html">ppc/kdcpuapi.c</a>.
<p>
References <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00051">Count</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00050">End</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00902">KdpDeleteBreakpointRange()</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00035                    :
00036 
00037     Fill in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Wait_State_Change message record <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> load symbol <span class="keywordflow">case</span>.
00038 
00039 Arguments:
00040 
00041     WaitStateChange - Supplies pointer to record to fill in
00042 
00043     ContextRecord - Supplies a pointer to a context record.
00044 
00045 Return Value:
00046 
00047     None.
00048 
00049 --*/
00050 
00051 {
00052 
00053     ULONG <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
00054     PVOID <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a>;
00055 
00056     <span class="comment">//</span>
00057     <span class="comment">// Copy the immediate instruction stream into the control report structure.</span>
00058     <span class="comment">//</span>
00059 
00060     <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a> =  <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(&amp;WaitStateChange-&gt;ControlReport.InstructionStream[0],
00061                            WaitStateChange-&gt;ProgramCounter,
00062                            DBGKD_MAXSTREAM);
00063 
00064     WaitStateChange-&gt;ControlReport.InstructionCount = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
00065 
00066     <span class="comment">//</span>
00067     <span class="comment">// Clear breakpoints in the copied instruction stream. If any breakpoints</span>
00068     <span class="comment">// are cleared, then recopy the instruction stream.</span>
00069     <span class="comment">//</span>
00070 
00071     <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a> = (PVOID)((PUCHAR)(WaitStateChange-&gt;ProgramCounter) + <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a> - 1);
00072     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d7/4_2kdp_8h.html#a106">KdpDeleteBreakpointRange</a>(WaitStateChange-&gt;ProgramCounter, End) != <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) {
00073         <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(&amp;WaitStateChange-&gt;ControlReport.InstructionStream[0],
00074                       WaitStateChange-&gt;ProgramCounter,
00075                       WaitStateChange-&gt;ControlReport.InstructionCount);
00076     }
00077 
00078     <span class="comment">//</span>
00079     <span class="comment">// Copy the context record into the wait state change structure.</span>
00080     <span class="comment">//</span>
00081 
00082     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>((PCHAR)&amp;WaitStateChange-&gt;Context,
00083                   (PCHAR)ContextRecord,
00084                   <span class="keyword">sizeof</span>(*ContextRecord));
00085 
00086     <span class="keywordflow">return</span>;
00087 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="ppc/kdcpuapi.c::KdpSetStateChange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpSetStateChange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_WAIT_STATE_CHANGE&nbsp;</td>
          <td class="mdname" nowrap> <em>WaitStateChange</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PEXCEPTION_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>ExceptionRecord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>ContextRecord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>SecondChance</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html#l00090">90</a> of file <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html">ppc/kdcpuapi.c</a>.
<p>
References <a class="el" href="../../d5/d9/cmconfig_8c-source.html#l00051">Count</a>, <a class="el" href="../../d0/d1/config_2i386_2init386_8c-source.html#l00050">End</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d3/kdbreak_8c-source.html#l00902">KdpDeleteBreakpointRange()</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00150">KdpQuickMoveMemory()</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00069">KeGetCurrentPrcb</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00070">KeGetCurrentThread</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02776">KeNumberProcessors</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02778">KeProcessorLevel</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00099                    :
00100 
00101     Fill in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Wait_State_Change message record.
00102 
00103 Arguments:
00104 
00105     WaitStateChange - Supplies pointer to record to fill in
00106 
00107     ExceptionRecord - Supplies a pointer to an exception record.
00108 
00109     ContextRecord - Supplies a pointer to a context record.
00110 
00111     SecondChance - Supplies a <span class="keywordtype">boolean</span> value that determines whether <span class="keyword">this</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
00112         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> first or second chance <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> exception.
00113 
00114 Return Value:
00115 
00116     None.
00117 
00118 --*/
00119 
00120 {
00121 
00122     ULONG <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
00123     PVOID <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a>;
00124 
00125     <span class="comment">//</span>
00126     <span class="comment">// Set up description of event, including exception record</span>
00127     <span class="comment">//</span>
00128 
00129     WaitStateChange-&gt;NewState = DbgKdExceptionStateChange;
00130     WaitStateChange-&gt;ProcessorLevel = <a class="code" href="../../d4/d9/ke_8h.html#a135">KeProcessorLevel</a>;
00131     WaitStateChange-&gt;Processor = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a2">KeGetCurrentPrcb</a>()-&gt;Number;
00132     WaitStateChange-&gt;NumberProcessors = (ULONG)<a class="code" href="../../d4/d9/ke_8h.html#a133">KeNumberProcessors</a>;
00133     WaitStateChange-&gt;Thread = (PVOID)<a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a3">KeGetCurrentThread</a>();
00134     WaitStateChange-&gt;ProgramCounter = (PVOID)CONTEXT_TO_PROGRAM_COUNTER(ContextRecord);
00135     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a111">KdpQuickMoveMemory</a>((PCHAR)&amp;WaitStateChange-&gt;u.Exception.ExceptionRecord,
00136                        (PCHAR)ExceptionRecord,
00137                        <span class="keyword">sizeof</span>(EXCEPTION_RECORD));
00138 
00139     WaitStateChange-&gt;u.Exception.FirstChance = !SecondChance;
00140 
00141     <span class="comment">//</span>
00142     <span class="comment">// Copy the immediate instruction stream into the control report structure.</span>
00143     <span class="comment">//</span>
00144 
00145     <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a> =  <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(&amp;WaitStateChange-&gt;ControlReport.InstructionStream[0],
00146                            WaitStateChange-&gt;ProgramCounter,
00147                            DBGKD_MAXSTREAM);
00148 
00149     WaitStateChange-&gt;ControlReport.InstructionCount = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a>;
00150 
00151     <span class="comment">//</span>
00152     <span class="comment">// Clear breakpoints in the copied instruction stream. If any breakpoints</span>
00153     <span class="comment">// are cleared, then recopy the instruction stream.</span>
00154     <span class="comment">//</span>
00155 
00156     <a class="code" href="../../d9/d1/config_2i386_2init386_8c.html#a19">End</a> = (PVOID)((PUCHAR)(WaitStateChange-&gt;ProgramCounter) + <a class="code" href="../../d4/d0/cmconfig_8c.html#a6">Count</a> - 1);
00157     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d7/4_2kdp_8h.html#a106">KdpDeleteBreakpointRange</a>(WaitStateChange-&gt;ProgramCounter, End) != <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>) {
00158         <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(&amp;WaitStateChange-&gt;ControlReport.InstructionStream[0],
00159                       WaitStateChange-&gt;ProgramCounter,
00160                       WaitStateChange-&gt;ControlReport.InstructionCount);
00161     }
00162 
00163     <span class="comment">//</span>
00164     <span class="comment">// Copy the context record into the wait state change structure.</span>
00165     <span class="comment">//</span>
00166 
00167     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>((PCHAR)&amp;WaitStateChange-&gt;Context,
00168                   (PCHAR)ContextRecord,
00169                   <span class="keyword">sizeof</span>(*ContextRecord));
00170 
00171     <span class="keywordflow">return</span>;
00172 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="ppc/kdcpuapi.c::KdpWriteControlSpace" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpWriteControlSpace           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html#l00309">309</a> of file <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html">ppc/kdcpuapi.c</a>.
<p>
References <a class="el" href="../../d3/d4/i386_2kdcpuapi_8c-source.html#l00028">END_OF_CONTROL_SPACE</a>, <a class="el" href="../../d9/d5/kdmove_8c-source.html#l00031">KdpMoveMemory()</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02776">KeNumberProcessors</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l02782">KiProcessorBlock</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00317                    :
00318 
00319     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a write <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a58">control</a> space state
00320     manipulation message.  Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to write implementation
00321     specific system data.
00322 
00323 Arguments:
00324 
00325     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
00326 
00327     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
00328 
00329     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
00330 
00331 Return Value:
00332 
00333     None.
00334 
00335 --*/
00336 
00337 {
00338     PDBGKD_WRITE_MEMORY a = &amp;m-&gt;u.WriteMemory;
00339     STRING MessageHeader;
00340     ULONG  Length;
00341     PVOID  StartAddr;
00342 
00343     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
00344     MessageHeader.Buffer = (PCHAR)m;
00345 
00346     <span class="keywordflow">if</span> ((((PUCHAR)a-&gt;TargetBaseAddress + a-&gt;TransferCount) &lt;=
00347         (PUCHAR)<a class="code" href="../../d2/d5/i386_2kdcpuapi_8c.html#a0">END_OF_CONTROL_SPACE</a>) &amp;&amp; (m-&gt;Processor &lt; (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)<a class="code" href="../../d4/d9/ke_8h.html#a133">KeNumberProcessors</a>)) {
00348 
00349         StartAddr = (PVOID)((ULONG)a-&gt;TargetBaseAddress +
00350                             (ULONG)&amp;(<a class="code" href="../../d4/d9/ke_8h.html#a139">KiProcessorBlock</a>[m-&gt;Processor]-&gt;ProcessorState));
00351 
00352         Length = <a class="code" href="../../d1/d7/4_2kdp_8h.html#a110">KdpMoveMemory</a>(
00353                             StartAddr,
00354                             AdditionalData-&gt;Buffer,
00355                             AdditionalData-&gt;Length
00356                             );
00357 
00358         <span class="keywordflow">if</span> (Length == AdditionalData-&gt;Length) {
00359             m-&gt;ReturnStatus = STATUS_SUCCESS;
00360         } <span class="keywordflow">else</span> {
00361             m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
00362         }
00363         a-&gt;ActualBytesWritten = Length;
00364 
00365     } <span class="keywordflow">else</span> {
00366         AdditionalData-&gt;Length = 0;
00367         m-&gt;ReturnStatus = STATUS_UNSUCCESSFUL;
00368         a-&gt;ActualBytesWritten = 0;
00369     }
00370 
00371     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
00372         PACKET_TYPE_KD_STATE_MANIPULATE,
00373         &amp;MessageHeader,
00374         AdditionalData
00375         );
00376 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="ppc/kdcpuapi.c::KdpWriteIoSpace" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID KdpWriteIoSpace           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PDBGKD_MANIPULATE_STATE&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AdditionalData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html#l00470">470</a> of file <a class="el" href="../../d5/d4/ppc_2kdcpuapi_8c-source.html">ppc/kdcpuapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d0/d4/kdcomio_8c-source.html#l00683">KdpSendPacket()</a>, <a class="el" href="../../d5/d5/ppc_2debugsup_8c-source.html#l00078">MmDbgWriteCheck()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00085">PUSHORT</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>00478                    :
00479 
00480     This function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> called in response of a write io space state
00481     manipulation message.  Its function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to write to system io
00482     locations.
00483 
00484 Arguments:
00485 
00486     m - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> state manipulation message.
00487 
00488     AdditionalData - Supplies any additional data <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> message.
00489 
00490     Context - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current context.
00491 
00492 Return Value:
00493 
00494     None.
00495 
00496 --*/
00497 
00498 {
00499     PDBGKD_READ_WRITE_IO a = &amp;m-&gt;u.ReadWriteIo;
00500     STRING MessageHeader;
00501     PUCHAR b;
00502     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a> s;
00503     PULONG l;
00504 
00505     MessageHeader.Length = <span class="keyword">sizeof</span>(*m);
00506     MessageHeader.Buffer = (PCHAR)m;
00507 
00508     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(AdditionalData-&gt;Length == 0);
00509 
00510     m-&gt;ReturnStatus = STATUS_SUCCESS;
00511 
00512     <span class="comment">//</span>
00513     <span class="comment">// Check Size and Alignment</span>
00514     <span class="comment">//</span>
00515 
00516     <span class="keywordflow">switch</span> ( a-&gt;DataSize ) {
00517         <span class="keywordflow">case</span> 1:
00518             b = (PUCHAR)<a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a1">MmDbgWriteCheck</a>(a-&gt;IoAddress);
00519             <span class="keywordflow">if</span> ( b ) {
00520                 WRITE_REGISTER_UCHAR(b,(UCHAR)a-&gt;DataValue);
00521             } <span class="keywordflow">else</span> {
00522                 m-&gt;ReturnStatus = STATUS_ACCESS_VIOLATION;
00523             }
00524             <span class="keywordflow">break</span>;
00525         <span class="keywordflow">case</span> 2:
00526             <span class="keywordflow">if</span> ((ULONG)a-&gt;IoAddress &amp; 1 ) {
00527                 m-&gt;ReturnStatus = STATUS_DATATYPE_MISALIGNMENT;
00528             } <span class="keywordflow">else</span> {
00529                 s = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a22">PUSHORT</a>)<a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a1">MmDbgWriteCheck</a>(a-&gt;IoAddress);
00530                 <span class="keywordflow">if</span> ( s ) {
00531                     WRITE_REGISTER_USHORT(s,(USHORT)a-&gt;DataValue);
00532                 } <span class="keywordflow">else</span> {
00533                     m-&gt;ReturnStatus = STATUS_ACCESS_VIOLATION;
00534                 }
00535             }
00536             <span class="keywordflow">break</span>;
00537         <span class="keywordflow">case</span> 4:
00538             <span class="keywordflow">if</span> ((ULONG)a-&gt;IoAddress &amp; 3 ) {
00539                 m-&gt;ReturnStatus = STATUS_DATATYPE_MISALIGNMENT;
00540             } <span class="keywordflow">else</span> {
00541                 l = (PULONG)<a class="code" href="../../d4/d6/ppc_2debugsup_8c.html#a1">MmDbgWriteCheck</a>(a-&gt;IoAddress);
00542                 <span class="keywordflow">if</span> ( l ) {
00543                     WRITE_REGISTER_ULONG(l,a-&gt;DataValue);
00544                 } <span class="keywordflow">else</span> {
00545                     m-&gt;ReturnStatus = STATUS_ACCESS_VIOLATION;
00546                 }
00547             }
00548             <span class="keywordflow">break</span>;
00549         <span class="keywordflow">default</span>:
00550             m-&gt;ReturnStatus = STATUS_INVALID_PARAMETER;
00551     }
00552 
00553     <a class="code" href="../../d1/d7/4_2kdp_8h.html#a116">KdpSendPacket</a>(
00554         PACKET_TYPE_KD_STATE_MANIPULATE,
00555         &amp;MessageHeader,
00556         NULL
00557         );
00558 }
}
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:25 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

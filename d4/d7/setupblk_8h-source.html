<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: setupblk.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>setupblk.h</h1><a href="../../d3/d8/setupblk_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="preprocessor">#ifndef _SETUPBLK_</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define _SETUPBLK_</span>
00003 <span class="preprocessor"></span>
00004 <span class="comment">//</span>
00005 <span class="comment">// Filetypes for files in txtsetup.oem.</span>
00006 <span class="comment">//</span>
00007 
<a name="l00008"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a67">00008</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
00009     <a class="code" href="../../d3/d8/setupblk_8h.html#a67a43">HwFileDriver</a>,
00010     <a class="code" href="../../d3/d8/setupblk_8h.html#a67a44">HwFilePort</a>,
00011     <a class="code" href="../../d3/d8/setupblk_8h.html#a67a45">HwFileClass</a>,
00012     <a class="code" href="../../d3/d8/setupblk_8h.html#a67a46">HwFileInf</a>,
00013     <a class="code" href="../../d3/d8/setupblk_8h.html#a67a47">HwFileDll</a>,
00014     <a class="code" href="../../d3/d8/setupblk_8h.html#a67a48">HwFileDetect</a>,
00015     <a class="code" href="../../d3/d8/setupblk_8h.html#a67a49">HwFileHal</a>,
00016     <a class="code" href="../../d3/d8/setupblk_8h.html#a67a50">HwFileCatalog</a>,
00017     <a class="code" href="../../d3/d8/setupblk_8h.html#a67a51">HwFileMax</a>
00018 } <a class="code" href="../../d3/d8/setupblk_8h.html#a67">HwFileType</a>;
00019 
<a name="l00020"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a0">00020</a> <span class="preprocessor">#define FILETYPE(FileType)                      (1 &lt;&lt; (FileType))</span>
<a name="l00021"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a1">00021</a> <span class="preprocessor"></span><span class="preprocessor">#define SET_FILETYPE_PRESENT(BitArray,FileType) ((BitArray) |= FILETYPE(FileType))</span>
<a name="l00022"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a2">00022</a> <span class="preprocessor"></span><span class="preprocessor">#define IS_FILETYPE_PRESENT(BitArray,FileType)  ((BitArray) &amp; FILETYPE(FileType))</span>
00023 <span class="preprocessor"></span>
00024 <span class="comment">//</span>
00025 <span class="comment">// Registry data types for registry data in txtsetup.oem.</span>
00026 <span class="comment">//</span>
<a name="l00027"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a68">00027</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
00028     <a class="code" href="../../d3/d8/setupblk_8h.html#a68a52">HwRegistryDword</a>,
00029     <a class="code" href="../../d3/d8/setupblk_8h.html#a68a53">HwRegistryBinary</a>,
00030     <a class="code" href="../../d3/d8/setupblk_8h.html#a68a54">HwRegistrySz</a>,
00031     <a class="code" href="../../d3/d8/setupblk_8h.html#a68a55">HwRegistryExpandSz</a>,
00032     <a class="code" href="../../d3/d8/setupblk_8h.html#a68a56">HwRegistryMultiSz</a>,
00033     <a class="code" href="../../d3/d8/setupblk_8h.html#a68a57">HwRegistryMax</a>
00034 } <a class="code" href="../../d3/d8/setupblk_8h.html#a68">HwRegistryType</a>;
00035 
00036 <span class="comment">//</span>
00037 <span class="comment">// Component types.</span>
00038 <span class="comment">//</span>
00039 
<a name="l00040"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a69">00040</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
00041     <a class="code" href="../../d3/d8/setupblk_8h.html#a69a58">HwComponentComputer</a>,
00042     <a class="code" href="../../d3/d8/setupblk_8h.html#a69a59">HwComponentDisplay</a>,
00043     <a class="code" href="../../d3/d8/setupblk_8h.html#a69a60">HwComponentKeyboard</a>,
00044     <a class="code" href="../../d3/d8/setupblk_8h.html#a69a61">HwComponentLayout</a>,
00045     <a class="code" href="../../d3/d8/setupblk_8h.html#a69a62">HwComponentMouse</a>,
00046     <a class="code" href="../../d3/d8/setupblk_8h.html#a69a63">HwComponentMax</a>
00047 } <a class="code" href="../../d3/d8/setupblk_8h.html#a69">HwComponentType</a>;
00048 
00049 
00050 
<a name="l00051"></a><a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html">00051</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html">_DETECTED_DEVICE_REGISTRY</a> {
00052 
<a name="l00053"></a><a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html#o0">00053</a>     <span class="keyword">struct </span><a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html">_DETECTED_DEVICE_REGISTRY</a> *<a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html#o0">Next</a>;
00054 
00055     <span class="comment">//</span>
00056     <span class="comment">// The name of the key.  The empty string means the key in the</span>
00057     <span class="comment">// services key itself.</span>
00058     <span class="comment">//</span>
00059 
<a name="l00060"></a><a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html#o1">00060</a>     PCHAR <a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html#o1">KeyName</a>;
00061 
00062     <span class="comment">//</span>
00063     <span class="comment">// The name of the value within the registry key</span>
00064     <span class="comment">//</span>
00065 
<a name="l00066"></a><a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html#o2">00066</a>     PCHAR <a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html#o2">ValueName</a>;
00067 
00068     <span class="comment">//</span>
00069     <span class="comment">// The data type for the value (ie, REG_DWORD, etc)</span>
00070     <span class="comment">//</span>
00071 
<a name="l00072"></a><a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html#o3">00072</a>     ULONG <a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html#o3">ValueType</a>;
00073 
00074     <span class="comment">//</span>
00075     <span class="comment">// The buffer containing the data to be placed into the value.</span>
00076     <span class="comment">// If the ValueType is REG_SZ, then Buffer should point to</span>
00077     <span class="comment">// a nul-terminated ASCII string (ie, not unicode), and BufferSize</span>
00078     <span class="comment">// should be the length in bytes of that string (plus 1 for the nul).</span>
00079     <span class="comment">//</span>
00080 
<a name="l00081"></a><a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html#o4">00081</a>     PVOID <a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html#o4">Buffer</a>;
00082 
00083     <span class="comment">//</span>
00084     <span class="comment">// The size of the buffer in bytes</span>
00085     <span class="comment">//</span>
00086 
<a name="l00087"></a><a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html#o5">00087</a>     ULONG <a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html#o5">BufferSize</a>;
00088 
00089 
00090 } <a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html">DETECTED_DEVICE_REGISTRY</a>, *<a class="code" href="../../d2/d3/struct__DETECTED__DEVICE__REGISTRY.html">PDETECTED_DEVICE_REGISTRY</a>;
00091 
00092 
00093 <span class="comment">//</span>
00094 <span class="comment">// One of these will be created for each file to be copied for a</span>
00095 <span class="comment">// third party device.</span>
00096 <span class="comment">//</span>
<a name="l00097"></a><a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html">00097</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html">_DETECTED_DEVICE_FILE</a> {
00098 
<a name="l00099"></a><a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o0">00099</a>     <span class="keyword">struct </span><a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html">_DETECTED_DEVICE_FILE</a> *<a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o0">Next</a>;
00100 
00101     <span class="comment">//</span>
00102     <span class="comment">// Filename of the file.</span>
00103     <span class="comment">//</span>
00104 
<a name="l00105"></a><a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o1">00105</a>     PCHAR <a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o1">Filename</a>;
00106 
00107     <span class="comment">//</span>
00108     <span class="comment">// type of the file (hal, port, class, etc).</span>
00109     <span class="comment">//</span>
00110 
<a name="l00111"></a><a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o2">00111</a>     <a class="code" href="../../d3/d8/setupblk_8h.html#a67">HwFileType</a> <a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o2">FileType</a>;
00112 
00113     <span class="comment">//</span>
00114     <span class="comment">// Part of name of the section in txtsetup.oem [Config.&lt;ConfigName&gt;]</span>
00115     <span class="comment">// that contains registry options.  If this is NULL, then no registry</span>
00116     <span class="comment">// information is associated with this file.</span>
00117     <span class="comment">//</span>
<a name="l00118"></a><a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o3">00118</a>     PCHAR <a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o3">ConfigName</a>;
00119 
00120     <span class="comment">//</span>
00121     <span class="comment">// Registry values for the node in the services list in the registry.</span>
00122     <span class="comment">//</span>
00123 
<a name="l00124"></a><a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o4">00124</a>     <a class="code" href="../../d3/d8/setupblk_8h.html#a32">PDETECTED_DEVICE_REGISTRY</a> <a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o4">RegistryValueList</a>;
00125 
00126     <span class="comment">//</span>
00127     <span class="comment">// These two fields are used when prompting for the diskette</span>
00128     <span class="comment">// containing the third-party-supplied driver's files.</span>
00129     <span class="comment">//</span>
00130 
<a name="l00131"></a><a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o5">00131</a>     PCHAR <a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o5">DiskDescription</a>;
<a name="l00132"></a><a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o6">00132</a>     PCHAR <a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o6">DiskTagfile</a>;
00133 
00134     <span class="comment">//</span>
00135     <span class="comment">// Directory where files are to be found on the disk.</span>
00136     <span class="comment">//</span>
00137 
<a name="l00138"></a><a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o7">00138</a>     PCHAR <a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html#o7">Directory</a>;
00139 
00140 } <a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html">DETECTED_DEVICE_FILE</a>, *<a class="code" href="../../d1/d3/struct__DETECTED__DEVICE__FILE.html">PDETECTED_DEVICE_FILE</a>;
00141 
00142 
00143 
00144 <span class="comment">//</span>
00145 <span class="comment">// structure for storing information about a driver we have located and</span>
00146 <span class="comment">// will install.</span>
00147 <span class="comment">//</span>
00148 
<a name="l00149"></a><a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html">00149</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html">_DETECTED_DEVICE</a> {
00150 
<a name="l00151"></a><a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o0">00151</a>     <span class="keyword">struct </span><a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html">_DETECTED_DEVICE</a> *<a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o0">Next</a>;
00152 
00153     <span class="comment">//</span>
00154     <span class="comment">// String used as a key into the relevent section (like [Display],</span>
00155     <span class="comment">// [Mouse], etc).</span>
00156     <span class="comment">//</span>
00157 
<a name="l00158"></a><a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o1">00158</a>     PCHAR <a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o1">IdString</a>;
00159 
00160     <span class="comment">//</span>
00161     <span class="comment">// 0-based order that this driver is listed in txtsetup.sif.</span>
00162     <span class="comment">// (ULONG)-1 for unsupported (ie, third party) scsi devices.</span>
00163     <span class="comment">//</span>
<a name="l00164"></a><a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o2">00164</a>     ULONG <a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o2">Ordinal</a>;
00165 
00166     <span class="comment">//</span>
00167     <span class="comment">// String that describes the hardware.</span>
00168     <span class="comment">//</span>
00169 
<a name="l00170"></a><a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o3">00170</a>     PCHAR <a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o3">Description</a>;
00171 
00172     <span class="comment">//</span>
00173     <span class="comment">// If this is TRUE, then there is an OEM option selected for this</span>
00174     <span class="comment">// hardware.</span>
00175     <span class="comment">//</span>
00176 
<a name="l00177"></a><a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o4">00177</a>     BOOLEAN <a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o4">ThirdPartyOptionSelected</a>;
00178 
00179     <span class="comment">//</span>
00180     <span class="comment">// Bits to be set if a third party option is selected, indicating</span>
00181     <span class="comment">// which type of files are specified in the oem inf file.</span>
00182     <span class="comment">//</span>
00183 
<a name="l00184"></a><a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o5">00184</a>     ULONG <a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o5">FileTypeBits</a>;
00185 
00186     <span class="comment">//</span>
00187     <span class="comment">// Files for a third party option.</span>
00188     <span class="comment">//</span>
00189 
<a name="l00190"></a><a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o6">00190</a>     <a class="code" href="../../d3/d8/setupblk_8h.html#a34">PDETECTED_DEVICE_FILE</a> <a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o6">Files</a>;
00191 
00192     <span class="comment">//</span>
00193     <span class="comment">// For first party files loaded by the boot loader,</span>
00194     <span class="comment">// this value will be the "BaseDllName" -- ie, the filename</span>
00195     <span class="comment">// part only of the file from which the driver was loaded.</span>
00196     <span class="comment">//</span>
00197     <span class="comment">// This field is only filled in in certain cases, so be careful</span>
00198     <span class="comment">// when using it.  See ntos\boot\setup\setup.c. (Always filled in</span>
00199     <span class="comment">// for SCSI devices.)</span>
00200     <span class="comment">//</span>
<a name="l00201"></a><a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o7">00201</a>     PCHAR <a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o7">BaseDllName</a>;
00202 
00203     <span class="comment">//</span>
00204     <span class="comment">// If this is TRUE, then there is a migrated driver for this</span>
00205     <span class="comment">// hardware.</span>
00206     <span class="comment">//</span>
<a name="l00207"></a><a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o8">00207</a>     BOOLEAN <a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html#o8">MigratedDriver</a>;
00208 
00209 } <a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html">DETECTED_DEVICE</a>, *<a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html">PDETECTED_DEVICE</a>;
00210 
00211 
00212 <span class="comment">//</span>
00213 <span class="comment">// Name of txtsetup.oem</span>
00214 <span class="comment">//</span>
<a name="l00215"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a3">00215</a> <span class="preprocessor">#define TXTSETUP_OEM_FILENAME    "txtsetup.oem"</span>
<a name="l00216"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a4">00216</a> <span class="preprocessor"></span><span class="preprocessor">#define TXTSETUP_OEM_FILENAME_U L"txtsetup.oem"</span>
00217 <span class="preprocessor"></span>
00218 <span class="comment">//</span>
00219 <span class="comment">// Name of sections in txtsetup.oem.  These are not localized.</span>
00220 <span class="comment">//</span>
<a name="l00221"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a5">00221</a> <span class="preprocessor">#define TXTSETUP_OEM_DISKS       "Disks"</span>
<a name="l00222"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a6">00222</a> <span class="preprocessor"></span><span class="preprocessor">#define TXTSETUP_OEM_DISKS_U    L"Disks"</span>
<a name="l00223"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a7">00223</a> <span class="preprocessor"></span><span class="preprocessor">#define TXTSETUP_OEM_DEFAULTS    "Defaults"</span>
<a name="l00224"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a8">00224</a> <span class="preprocessor"></span><span class="preprocessor">#define TXTSETUP_OEM_DEFAULTS_U L"Defaults"</span>
00225 <span class="preprocessor"></span>
00226 <span class="comment">//</span>
00227 <span class="comment">// Field offsets in txtsetup.oem</span>
00228 <span class="comment">//</span>
00229 
00230 <span class="comment">// in [Disks] section</span>
<a name="l00231"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a9">00231</a> <span class="preprocessor">#define OINDEX_DISKDESCR        0</span>
<a name="l00232"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a10">00232</a> <span class="preprocessor"></span><span class="preprocessor">#define OINDEX_TAGFILE          1</span>
<a name="l00233"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a11">00233</a> <span class="preprocessor"></span><span class="preprocessor">#define OINDEX_DIRECTORY        2</span>
00234 <span class="preprocessor"></span>
00235 <span class="comment">// in [Defaults] section</span>
<a name="l00236"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a12">00236</a> <span class="preprocessor">#define OINDEX_DEFAULT          0</span>
00237 <span class="preprocessor"></span>
00238 <span class="comment">// in [&lt;component_name&gt;] section (ie, [keyboard])</span>
<a name="l00239"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a13">00239</a> <span class="preprocessor">#define OINDEX_DESCRIPTION      0</span>
00240 <span class="preprocessor"></span>
00241 <span class="comment">// in [Files.&lt;compoment_name&gt;.&lt;id&gt;] section (ie, [Files.Keyboard.Oem1])</span>
<a name="l00242"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a14">00242</a> <span class="preprocessor">#define OINDEX_DISKSPEC         0</span>
<a name="l00243"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a15">00243</a> <span class="preprocessor"></span><span class="preprocessor">#define OINDEX_FILENAME         1</span>
<a name="l00244"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a16">00244</a> <span class="preprocessor"></span><span class="preprocessor">#define OINDEX_CONFIGNAME       2</span>
00245 <span class="preprocessor"></span>
00246 <span class="comment">// in [Config.&lt;compoment_name&gt;.&lt;id&gt;] section (ie, [Config.Keyboard.Oem1])</span>
<a name="l00247"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a17">00247</a> <span class="preprocessor">#define OINDEX_KEYNAME          0</span>
<a name="l00248"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a18">00248</a> <span class="preprocessor"></span><span class="preprocessor">#define OINDEX_VALUENAME        1</span>
<a name="l00249"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a19">00249</a> <span class="preprocessor"></span><span class="preprocessor">#define OINDEX_VALUETYPE        2</span>
<a name="l00250"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a20">00250</a> <span class="preprocessor"></span><span class="preprocessor">#define OINDEX_FIRSTVALUE       3</span>
00251 <span class="preprocessor"></span>
00252 <span class="comment">// in [HardwareIds.&lt;compoment_name&gt;.&lt;id&gt;] section (ie, [HardwareIds.Keyboard.Oem1])</span>
<a name="l00253"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a21">00253</a> <span class="preprocessor">#define OINDEX_HW_ID         0</span>
<a name="l00254"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a22">00254</a> <span class="preprocessor"></span><span class="preprocessor">#define OINDEX_DRIVER_NAME   1</span>
<a name="l00255"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a23">00255</a> <span class="preprocessor"></span><span class="preprocessor">#define OINDEX_CLASS_GUID    2</span>
00256 <span class="preprocessor"></span>
00257 
<a name="l00258"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a70">00258</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
00259     <a class="code" href="../../d3/d8/setupblk_8h.html#a70a64">SetupOperationSetup</a>,
00260     <a class="code" href="../../d3/d8/setupblk_8h.html#a70a65">SetupOperationUpgrade</a>,
00261     <a class="code" href="../../d3/d8/setupblk_8h.html#a70a66">SetupOperationRepair</a>
00262 } <a class="code" href="../../d3/d8/setupblk_8h.html#a70">SetupOperation</a>;
00263 
00264 
<a name="l00265"></a><a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html">00265</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html">_SETUP_LOADER_BLOCK_SCALARS</a> {
00266 
00267     <span class="comment">//</span>
00268     <span class="comment">// This value indicates the operation we are performing</span>
00269     <span class="comment">// as chosen by the user or discovered by setupldr.</span>
00270     <span class="comment">//</span>
<a name="l00271"></a><a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html#o0">00271</a>     <span class="keywordtype">unsigned</span>    <a class="code" href="../../d3/d8/setupblk_8h.html#a70">SetupOperation</a>;
00272 
00273     <span class="comment">//</span>
00274     <span class="comment">// In some cases we will ask the user whether he wants</span>
00275     <span class="comment">// a CD-ROM or floppy-based installation.  This flag</span>
00276     <span class="comment">// indicates whether he chose a CD-ROM setup.</span>
00277     <span class="comment">//</span>
<a name="l00278"></a><a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html#o1">00278</a>     <span class="keywordtype">unsigned</span>    <a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html#o1">SetupFromCdRom</a>      : 1;
00279 
00280     <span class="comment">//</span>
00281     <span class="comment">// If this flag is set, then setupldr loaded scsi miniport drivers</span>
00282     <span class="comment">// and the scsi class drivers we may need (scsidisk, scsicdrm, scsiflop).</span>
00283     <span class="comment">//</span>
<a name="l00284"></a><a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html#o2">00284</a>     <span class="keywordtype">unsigned</span>    <a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html#o2">LoadedScsi</a>          : 1;
00285 
00286     <span class="comment">//</span>
00287     <span class="comment">// If this flag is set, then setupldr loaded non-scsi floppy class drivers</span>
00288     <span class="comment">// (ie, floppy.sys) and fastfat.sys.</span>
00289     <span class="comment">//</span>
<a name="l00290"></a><a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html#o3">00290</a>     <span class="keywordtype">unsigned</span>    <a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html#o3">LoadedFloppyDrivers</a> : 1;
00291 
00292     <span class="comment">//</span>
00293     <span class="comment">// If this flag is set, then setupldr loaded non-scsi disk class drivers</span>
00294     <span class="comment">// (ie, atdisk, abiosdsk, delldsa, cpqarray) and filesystems (fat, hpfs, ntfs).</span>
00295     <span class="comment">//</span>
<a name="l00296"></a><a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html#o4">00296</a>     <span class="keywordtype">unsigned</span>    <a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html#o4">LoadedDiskDrivers</a>   : 1;
00297 
00298     <span class="comment">//</span>
00299     <span class="comment">// If this flag is set, then setupldr loaded non-scsi cdrom class drivers</span>
00300     <span class="comment">// (currently there are none) and cdfs.</span>
00301     <span class="comment">//</span>
<a name="l00302"></a><a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html#o5">00302</a>     <span class="keywordtype">unsigned</span>    <a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html#o5">LoadedCdRomDrivers</a>  : 1;
00303 
00304     <span class="comment">//</span>
00305     <span class="comment">// If this flag is set, then setupldr loaded all filesystems listed</span>
00306     <span class="comment">// in [FileSystems], on txtsetup.sif.</span>
00307     <span class="comment">//</span>
<a name="l00308"></a><a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html#o6">00308</a>     <span class="keywordtype">unsigned</span>    <a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html#o6">LoadedFileSystems</a>  : 1;
00309 
00310 } <a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html">SETUP_LOADER_BLOCK_SCALARS</a>, *<a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html">PSETUP_LOADER_BLOCK_SCALARS</a>;
00311 
00312 
<a name="l00313"></a><a class="code" href="../../d2/d7/struct__PNP__HARDWARE__ID.html">00313</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d2/d7/struct__PNP__HARDWARE__ID.html">_PNP_HARDWARE_ID</a> {
00314 
<a name="l00315"></a><a class="code" href="../../d2/d7/struct__PNP__HARDWARE__ID.html#o0">00315</a>     <span class="keyword">struct </span><a class="code" href="../../d2/d7/struct__PNP__HARDWARE__ID.html">_PNP_HARDWARE_ID</a> *<a class="code" href="../../d2/d7/struct__PNP__HARDWARE__ID.html#o0">Next</a>;
00316 
00317     <span class="comment">//</span>
00318     <span class="comment">// String that represents the hardware id of a PNP device.</span>
00319     <span class="comment">//</span>
00320 
<a name="l00321"></a><a class="code" href="../../d2/d7/struct__PNP__HARDWARE__ID.html#o1">00321</a>     PCHAR <a class="code" href="../../d2/d7/struct__PNP__HARDWARE__ID.html#o1">Id</a>;
00322 
00323     <span class="comment">//</span>
00324     <span class="comment">// Driver for the device</span>
00325     <span class="comment">//</span>
00326 
<a name="l00327"></a><a class="code" href="../../d2/d7/struct__PNP__HARDWARE__ID.html#o2">00327</a>     PCHAR <a class="code" href="../../d2/d7/struct__PNP__HARDWARE__ID.html#o2">DriverName</a>;
00328 
00329     <span class="comment">//</span>
00330     <span class="comment">// GUID for this device, if any</span>
00331     <span class="comment">//</span>
<a name="l00332"></a><a class="code" href="../../d2/d7/struct__PNP__HARDWARE__ID.html#o3">00332</a>     PCHAR <a class="code" href="../../d2/d7/struct__PNP__HARDWARE__ID.html#o3">ClassGuid</a>;
00333 
00334 
00335 } <a class="code" href="../../d2/d7/struct__PNP__HARDWARE__ID.html">PNP_HARDWARE_ID</a>, *<a class="code" href="../../d2/d7/struct__PNP__HARDWARE__ID.html">PPNP_HARDWARE_ID</a>;
00336 
00337 
00338 <span class="comment">//</span>
00339 <span class="comment">// Purely arbitrary, but all net boot components enforce this.  The only</span>
00340 <span class="comment">// problem is if a detected Hal name is greater than this, things get ugly if</span>
00341 <span class="comment">// the first MAX_HAL_NAME_LENGTH characters are identical for two different hals.</span>
00342 <span class="comment">// NOTE: If you change this, change the definition in private\sm\server\smsrvp.h</span>
00343 <span class="comment">// NOTE: If you change this, change the definition in private\inc\oscpkt.h</span>
00344 <span class="comment">//</span>
<a name="l00345"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a24">00345</a> <span class="preprocessor">#define MAX_HAL_NAME_LENGTH 30</span>
00346 <span class="preprocessor"></span>
00347 
<a name="l00348"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html">00348</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html">_SETUP_LOADER_BLOCK</a> {
00349 
00350     <span class="comment">//</span>
00351     <span class="comment">// ARC path to the Setup source media.</span>
00352     <span class="comment">// The Setup boot media path is given by the</span>
00353     <span class="comment">// ArcBootDeviceName field in the loader block itself.</span>
00354     <span class="comment">//</span>
<a name="l00355"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o0">00355</a>     PCHAR       <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o0">ArcSetupDeviceName</a>;
00356 
00357     <span class="comment">//</span>
00358     <span class="comment">// Detected/loaded video device.</span>
00359     <span class="comment">//</span>
<a name="l00360"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o1">00360</a>     <a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html">DETECTED_DEVICE</a>    <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o1">VideoDevice</a>;
00361 
00362     <span class="comment">//</span>
00363     <span class="comment">// Detected/loaded keyboard device.</span>
00364     <span class="comment">//</span>
<a name="l00365"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o2">00365</a>     <a class="code" href="../../d3/d8/setupblk_8h.html#a36">PDETECTED_DEVICE</a>    <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o2">KeyboardDevices</a>;
00366 
00367     <span class="comment">//</span>
00368     <span class="comment">// Detected computer type.</span>
00369     <span class="comment">//</span>
<a name="l00370"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o3">00370</a>     <a class="code" href="../../d0/d3/struct__DETECTED__DEVICE.html">DETECTED_DEVICE</a>    <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o3">ComputerDevice</a>;
00371 
00372     <span class="comment">//</span>
00373     <span class="comment">// Detected/loaded scsi adapters.  This is a linked list</span>
00374     <span class="comment">// because there could be multiple adapters.</span>
00375     <span class="comment">//</span>
<a name="l00376"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o4">00376</a>     <a class="code" href="../../d3/d8/setupblk_8h.html#a36">PDETECTED_DEVICE</a>    <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o4">ScsiDevices</a>;
00377 
00378     <span class="comment">//</span>
00379     <span class="comment">// Non-pointer values.</span>
00380     <span class="comment">//</span>
<a name="l00381"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o5">00381</a>     <a class="code" href="../../d6/d2/struct__SETUP__LOADER__BLOCK__SCALARS.html">SETUP_LOADER_BLOCK_SCALARS</a> <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o5">ScalarValues</a>;
00382 
00383     <span class="comment">//</span>
00384     <span class="comment">// Pointer to the txtsetup.sif file loaded by setupldr</span>
00385     <span class="comment">//</span>
<a name="l00386"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o6">00386</a>     PCHAR <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o6">IniFile</a>;
<a name="l00387"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o7">00387</a>     ULONG <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o7">IniFileLength</a>;
00388 
00389     <span class="comment">//</span>
00390     <span class="comment">// Pointer to the winnt.sif file loaded by setupldr</span>
00391     <span class="comment">//</span>
<a name="l00392"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o8">00392</a>     PCHAR <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o8">WinntSifFile</a>;
<a name="l00393"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o9">00393</a>     ULONG <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o9">WinntSifFileLength</a>;
00394 
00395     <span class="comment">//</span>
00396     <span class="comment">// Pointer to the migrate.inf file loaded by setupldr</span>
00397     <span class="comment">//</span>
<a name="l00398"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o10">00398</a>     PCHAR <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o10">MigrateInfFile</a>;
<a name="l00399"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o11">00399</a>     ULONG <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o11">MigrateInfFileLength</a>;
00400 
00401     <span class="comment">//</span>
00402     <span class="comment">// Pointer to the unsupdrv.inf file loaded by setupldr</span>
00403     <span class="comment">//</span>
<a name="l00404"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o12">00404</a>     PCHAR <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o12">UnsupDriversInfFile</a>;
<a name="l00405"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o13">00405</a>     ULONG <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o13">UnsupDriversInfFileLength</a>;
00406 
00407     <span class="comment">// On non-vga displays, setupldr looks in the firmware config tree</span>
00408     <span class="comment">// for the monitor peripheral that should be a child of the</span>
00409     <span class="comment">// display controller for the display being used during installation.</span>
00410     <span class="comment">// It copies its monitor configuration data to allow setup to</span>
00411     <span class="comment">// set the mode properly later.</span>
00412     <span class="comment">//</span>
<a name="l00413"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o14">00413</a>     <a class="code" href="../../d3/d9/struct__MONITOR__CONFIGURATION__DATA.html">PMONITOR_CONFIGURATION_DATA</a> <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o14">Monitor</a>;
<a name="l00414"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o15">00414</a>     PCHAR <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o15">MonitorId</a>;
00415 
00416 <span class="preprocessor">#ifdef _ALPHA_</span>
00417 <span class="preprocessor"></span>    <span class="comment">//</span>
00418     <span class="comment">// if alpha, then we need to know if the user supplied an OEM PAL disk</span>
00419     <span class="comment">//</span>
00420     <a class="code" href="../../d3/d8/setupblk_8h.html#a36">PDETECTED_DEVICE</a>    OemPal;
00421 <span class="preprocessor">#endif</span>
00422 <span class="preprocessor"></span>
00423     <span class="comment">//</span>
00424     <span class="comment">// Loaded boot bus extenders</span>
00425     <span class="comment">//</span>
<a name="l00426"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o16">00426</a>     <a class="code" href="../../d3/d8/setupblk_8h.html#a36">PDETECTED_DEVICE</a>    <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o16">BootBusExtenders</a>;
00427 
00428     <span class="comment">//</span>
00429     <span class="comment">// Loaded bus extenders</span>
00430     <span class="comment">//</span>
<a name="l00431"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o17">00431</a>     <a class="code" href="../../d3/d8/setupblk_8h.html#a36">PDETECTED_DEVICE</a>    <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o17">BusExtenders</a>;
00432 
00433     <span class="comment">//</span>
00434     <span class="comment">// Loaded support drivers for input devices</span>
00435     <span class="comment">//</span>
<a name="l00436"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o18">00436</a>     <a class="code" href="../../d3/d8/setupblk_8h.html#a36">PDETECTED_DEVICE</a>    <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o18">InputDevicesSupport</a>;
00437 
00438     <span class="comment">//</span>
00439     <span class="comment">//  This is a linked list that the contains the hardware id database,</span>
00440     <span class="comment">//  that will be used during the initialization phase of textmode</span>
00441     <span class="comment">//  setup (setupdd.sys)</span>
00442     <span class="comment">//</span>
<a name="l00443"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o19">00443</a>     <a class="code" href="../../d3/d8/setupblk_8h.html#a40">PPNP_HARDWARE_ID</a> <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o19">HardwareIdDatabase</a>;
00444 
00445     <span class="comment">//</span>
00446     <span class="comment">// Remote boot information.</span>
00447     <span class="comment">//</span>
00448 
<a name="l00449"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o20">00449</a>     WCHAR <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o20">ComputerName</a>[64];
<a name="l00450"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o21">00450</a>     ULONG <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o21">IpAddress</a>;
<a name="l00451"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o22">00451</a>     ULONG <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o22">SubnetMask</a>;
<a name="l00452"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o23">00452</a>     ULONG <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o23">ServerIpAddress</a>;
<a name="l00453"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o24">00453</a>     ULONG <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o24">DefaultRouter</a>;
<a name="l00454"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o25">00454</a>     ULONG <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o25">DnsNameServer</a>;
00455 
00456     <span class="comment">//</span>
00457     <span class="comment">// BUGBUG: Check if these next two are long enough.</span>
00458     <span class="comment">//</span>
00459 
00460     <span class="comment">//</span>
00461     <span class="comment">// The PCI hardware ID we got from the ROM of the netboot card</span>
00462     <span class="comment">// ("PCI\VEN_xxx...").</span>
00463     <span class="comment">//</span>
00464 
<a name="l00465"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o26">00465</a>     WCHAR <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o26">NetbootCardHardwareId</a>[64];
00466 
00467     <span class="comment">//</span>
00468     <span class="comment">// The name of the netboot card driver ("abc.sys").</span>
00469     <span class="comment">//</span>
00470 
<a name="l00471"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o27">00471</a>     WCHAR <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o27">NetbootCardDriverName</a>[24];
00472 
00473     <span class="comment">//</span>
00474     <span class="comment">// The name of the netboot card service key in the registry.</span>
00475     <span class="comment">//</span>
00476 
<a name="l00477"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o28">00477</a>     WCHAR <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o28">NetbootCardServiceName</a>[24];
00478 
00479 <span class="preprocessor">#if defined(REMOTE_BOOT)</span>
00480 <span class="preprocessor"></span>    <span class="comment">//</span>
00481     <span class="comment">// The inbound SPI, outbound SPI, and session key for the</span>
00482     <span class="comment">// IPSEC conversation with the server.</span>
00483     <span class="comment">//</span>
00484 
00485     ULONG IpsecInboundSpi;
00486     ULONG IpsecOutboundSpi;
00487     ULONG IpsecSessionKey;
00488 <span class="preprocessor">#endif // defined(REMOTE_BOOT)</span>
00489 <span class="preprocessor"></span>
00490     <span class="comment">//</span>
00491     <span class="comment">// If non-NULL this points to a string containing registry values to</span>
00492     <span class="comment">// be added for the netboot card. The string consists of a series of</span>
00493     <span class="comment">// name\0type\0value\0, with a final \0 at the end.</span>
00494     <span class="comment">//</span>
00495 
<a name="l00496"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o29">00496</a>     PCHAR <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o29">NetbootCardRegistry</a>;
<a name="l00497"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o30">00497</a>     ULONG <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o30">NetbootCardRegistryLength</a>;
00498 
00499     <span class="comment">//</span>
00500     <span class="comment">// If non-NULL this points to the PCI or ISAPNP information about</span>
00501     <span class="comment">// the netboot card.</span>
00502     <span class="comment">//</span>
00503 
<a name="l00504"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o31">00504</a>     PCHAR <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o31">NetbootCardInfo</a>;
<a name="l00505"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o32">00505</a>     ULONG <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o32">NetbootCardInfoLength</a>;
00506 
00507     <span class="comment">//</span>
00508     <span class="comment">// Various flags.</span>
00509     <span class="comment">//</span>
00510 
<a name="l00511"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o33">00511</a>     ULONG <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o33">Flags</a>;
00512 
<a name="l00513"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a25">00513</a> <span class="preprocessor">#define SETUPBLK_FLAGS_IS_REMOTE_BOOT   0x00000001</span>
<a name="l00514"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a26">00514</a> <span class="preprocessor"></span><span class="preprocessor">#define SETUPBLK_FLAGS_IS_TEXTMODE      0x00000002</span>
00515 <span class="preprocessor"></span><span class="preprocessor">#if defined(REMOTE_BOOT)</span>
00516 <span class="preprocessor"></span><span class="preprocessor">#define SETUPBLK_FLAGS_REPIN            0x00000004</span>
00517 <span class="preprocessor"></span><span class="preprocessor">#define SETUPBLK_FLAGS_DISABLE_CSC      0x00000008</span>
00518 <span class="preprocessor"></span><span class="preprocessor">#define SETUPBLK_FLAGS_DISCONNECTED     0x00000010</span>
00519 <span class="preprocessor"></span><span class="preprocessor">#define SETUPBLK_FLAGS_FORMAT_NEEDED    0x00000020</span>
00520 <span class="preprocessor"></span><span class="preprocessor">#define SETUPBLK_FLAGS_IPSEC_ENABLED    0x00000040</span>
00521 <span class="preprocessor"></span><span class="preprocessor">#endif // defined(REMOTE_BOOT)</span>
<a name="l00522"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a27">00522</a> <span class="preprocessor"></span><span class="preprocessor">#define SETUPBLK_FLAGS_CONSOLE          0x00000080</span>
00523 <span class="preprocessor"></span><span class="preprocessor">#if defined(REMOTE_BOOT)</span>
00524 <span class="preprocessor"></span><span class="preprocessor">#define SETUPBLK_FLAGS_PIN_NET_DRIVER   0x00000100</span>
00525 <span class="preprocessor"></span><span class="preprocessor">#endif // defined(REMOTE_BOOT)</span>
<a name="l00526"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a28">00526</a> <span class="preprocessor"></span><span class="preprocessor">#define SETUPBLK_FLAGS_REMOTE_INSTALL   0x00000200</span>
<a name="l00527"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a29">00527</a> <span class="preprocessor"></span><span class="preprocessor">#define SETUPBLK_FLAGS_SYSPREP_INSTALL  0x00000400</span>
<a name="l00528"></a><a class="code" href="../../d3/d8/setupblk_8h.html#a30">00528</a> <span class="preprocessor"></span><span class="preprocessor">#define SETUPBLK_XINT13_SUPPORT         0x00000800</span>
00529 <span class="preprocessor"></span>
00530 <span class="preprocessor">#if defined(REMOTE_BOOT)</span>
00531 <span class="preprocessor"></span>    <span class="comment">//</span>
00532     <span class="comment">// HAL file name.</span>
00533     <span class="comment">//</span>
00534 
00535     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> NetBootHalName[<a class="code" href="../../d3/d8/setupblk_8h.html#a24">MAX_HAL_NAME_LENGTH</a> + 1];
00536 <span class="preprocessor">#endif // defined(REMOTE_BOOT)</span>
00537 <span class="preprocessor"></span>
00538     <span class="comment">//</span>
00539     <span class="comment">// During remote boot textmode setup, NtBootPath in the loader block points</span>
00540     <span class="comment">// to the setup source location. We also need to pass in the path to the</span>
00541     <span class="comment">// machine directory. This will be in the format \server\share\path.</span>
00542     <span class="comment">//</span>
<a name="l00543"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o34">00543</a>     PCHAR <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o34">MachineDirectoryPath</a>;
00544 
00545     <span class="comment">//</span>
00546     <span class="comment">// Holds the name of the .sif file used by a remote boot machine</span>
00547     <span class="comment">// during textmode setup -- this is a temp file that needs to be</span>
00548     <span class="comment">// deleted. This will be in the format \server\share\path.</span>
00549     <span class="comment">//</span>
<a name="l00550"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o35">00550</a>     PCHAR <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o35">NetBootSifPath</a>;
00551 
00552     <span class="comment">//</span>
00553     <span class="comment">// On a remote boot, this is information from the secret used</span>
00554     <span class="comment">// when the redirector logs on.</span>
00555     <span class="comment">//</span>
00556 
<a name="l00557"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o36">00557</a>     PVOID <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o36">NetBootSecret</a>;
00558 
00559 <span class="preprocessor">#if defined(REMOTE_BOOT)</span>
00560 <span class="preprocessor"></span>    <span class="comment">//</span>
00561     <span class="comment">// This indicates whether TFTP needed to use the second password in</span>
00562     <span class="comment">// the secret to log on (as a hint to the redirector).</span>
00563     <span class="comment">//</span>
00564 
00565     BOOLEAN NetBootUsePassword2;
00566 <span class="preprocessor">#endif // defined(REMOTE_BOOT)</span>
00567 <span class="preprocessor"></span>
00568     <span class="comment">//</span>
00569     <span class="comment">// This is the UNC path that a SysPrep installation or a machine replacement</span>
00570     <span class="comment">// senario is supposed to connect to find IMirror.dat</span>
00571     <span class="comment">//</span>
<a name="l00572"></a><a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o37">00572</a>     UCHAR <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html#o37">NetBootIMirrorFilePath</a>[260];
00573 
00574 } <a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html">SETUP_LOADER_BLOCK</a>, *<a class="code" href="../../d5/d2/struct__SETUP__LOADER__BLOCK.html">PSETUP_LOADER_BLOCK</a>;
00575 
00576 <span class="preprocessor">#endif // _SETUPBLK_</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:41:48 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

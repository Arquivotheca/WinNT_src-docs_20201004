<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: client/winable.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>winable.c File Reference</h1><code>#include "<a class="el" href="../../d8/d2/w32_2ntuser_2client_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d5/d6/client_2winable_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d7/client_2winable_8c.html#a0">GetWindowInfo</a> (HWND hwnd, PWINDOWINFO pwi)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a0" doxytag="client/winable.c::GetWindowInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI GetWindowInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PWINDOWINFO&nbsp;</td>
          <td class="mdname" nowrap> <em>pwi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d6/client_2winable_8c-source.html#l00024">24</a> of file <a class="el" href="../../d5/d6/client_2winable_8c-source.html">client/winable.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01738">tagCLS::atomClassName</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00582">GetWindowBorders()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">REBASEALWAYS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00202">SYSMET</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00477">VER30</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00476">VER31</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00474">VER50</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02267">WFFRAMEON</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02318">WFWIN31COMPAT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02320">WFWIN50COMPAT</a>.
<p>
<pre class="fragment"><div>00025 {
00026     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwnd;
00027     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cBorders;
00028     <a class="code" href="../../d7/d0/structtagCLS.html">PCLS</a> pclsT;
00029 
00030     <span class="keywordflow">if</span> (pwi-&gt;cbSize != <span class="keyword">sizeof</span>(WINDOWINFO)) {
00031         RIPERR1(ERROR_INVALID_PARAMETER, RIP_WARNING, <span class="stringliteral">"WINDOWINFO.cbSize %d is wrong"</span>, pwi-&gt;cbSize);
00032     }
00033     <span class="comment">/*</span>
00034 <span class="comment">     * Validate the window</span>
00035 <span class="comment">     */</span>
00036     pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd);
00037 
00038     <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00039         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00040     }
00041 
00042     <span class="keywordflow">try</span> {
00043         <span class="comment">// Window rect</span>
00044         pwi-&gt;rcWindow = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>;
00045 
00046         <span class="comment">// Client rect</span>
00047         pwi-&gt;rcClient = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>;
00048 
00049         <span class="comment">// Style</span>
00050         pwi-&gt;dwStyle = pwnd-&gt;style;
00051         pwi-&gt;dwExStyle = pwnd-&gt;ExStyle;
00052         pwi-&gt;dwWindowStatus = 0;
00053         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFFRAMEON))
00054             pwi-&gt;dwWindowStatus |= WS_ACTIVECAPTION;
00055 
00056         <span class="comment">// Borders</span>
00057         cBorders = <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a7">GetWindowBorders</a>(pwnd-&gt;style, pwnd-&gt;ExStyle, TRUE, FALSE);
00058         pwi-&gt;cxWindowBorders = cBorders * <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CXBORDER);
00059         pwi-&gt;cyWindowBorders = cBorders * <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a18">SYSMET</a>(CYBORDER);
00060 
00061         <span class="comment">// Type</span>
00062         pclsT = (<a class="code" href="../../d7/d0/structtagCLS.html">PCLS</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pwnd, pcls);
00063         pwi-&gt;atomWindowType = pclsT-&gt;<a class="code" href="../../d7/d0/structtagCLS.html#o1">atomClassName</a>;
00064 
00065         <span class="comment">// Version</span>
00066         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN50COMPAT)) {
00067             pwi-&gt;wCreatorVersion = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a100">VER50</a>;
00068         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT)) {
00069             pwi-&gt;wCreatorVersion = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>;
00070         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN31COMPAT)) {
00071             pwi-&gt;wCreatorVersion = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a102">VER31</a>;
00072         } <span class="keywordflow">else</span> {
00073             pwi-&gt;wCreatorVersion = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a103">VER30</a>;
00074         }
00075     } except (W32ExceptionHandler(FALSE, RIP_WARNING)) {
00076         RIPERR1(ERROR_INVALID_WINDOW_HANDLE,
00077                 RIP_WARNING,
00078                 <span class="stringliteral">"Window %x no longer valid"</span>,
00079                 hwnd);
00080         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00081     }
00082 
00083     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00084 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:46:09 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

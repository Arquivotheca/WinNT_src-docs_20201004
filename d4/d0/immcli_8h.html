<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: immcli.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>immcli.h File Reference</h1><code>#include &lt;windows.h&gt;</code><br>
<code>#include &lt;stddef.h&gt;</code><br>
<code>#include &lt;w32err.h&gt;</code><br>
<code>#include &lt;w32gdip.h&gt;</code><br>
<code>#include "winuserp.h"</code><br>
<code>#include "winuserk.h"</code><br>
<code>#include "kbd.h"</code><br>
<code>#include &lt;wowuserp.h&gt;</code><br>
<code>#include &lt;memory.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;imm.h&gt;</code><br>
<code>#include &lt;immp.h&gt;</code><br>
<code>#include &lt;ime.h&gt;</code><br>
<code>#include &lt;imep.h&gt;</code><br>
<code>#include &lt;winnls32.h&gt;</code><br>
<code>#include "<a class="el" href="../../d9/d9/immstruc_8h-source.html">immstruc.h</a>"</code><br>
<code>#include "<a class="el" href="../../d0/d0/immuser_8h-source.html">immuser.h</a>"</code><br>
<code>#include "<a class="el" href="../../d2/d9/inc_2user_8h-source.html">user.h</a>"</code><br>

<p>
<a href="../../d5/d9/immcli_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">_ENUMREGWORDDATA</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d1/d8/structtagIMELAYOUT.html">tagIMELAYOUT</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d5/structtagFE__KEYBOARDS.html">tagFE_KEYBOARDS</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a0">OEMRESOURCE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a1">HEX_ASCII_SIZE</a>&nbsp;&nbsp;&nbsp;20</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>&nbsp;&nbsp;&nbsp;UserAssert</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a3">bUser32Initialized</a>&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d9/d6/ntuser_2kernel_2globals_8h.html#a317">gpsi</a> != NULL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a5">ValidateHimc</a>(himc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a6">RevalidateHimc</a>(himc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a7">ImmLocalReAlloc</a>(p, uBytes, uFlags)&nbsp;&nbsp;&nbsp;HeapReAlloc(<a class="el" href="../../d4/d0/immcli_8h.html#a53">pImmHeap</a>, uFlags, (LPSTR)(p), (uBytes))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(p)&nbsp;&nbsp;&nbsp;HeapFree(<a class="el" href="../../d4/d0/immcli_8h.html#a53">pImmHeap</a>, 0, (LPSTR)(p))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a9">ImmLocalSize</a>(p)&nbsp;&nbsp;&nbsp;HeapSize(<a class="el" href="../../d4/d0/immcli_8h.html#a53">pImmHeap</a>, 0, (LPSTR)(p))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a10">ImmLocalLock</a>(p)&nbsp;&nbsp;&nbsp;(LPSTR)(p)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a11">ImmLocalUnlock</a>(p)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a12">ImmLocalFlags</a>(p)&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a13">ImmLocalHandle</a>(p)&nbsp;&nbsp;&nbsp;(HLOCAL)(p)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a14">GetInputContextProcess</a>(himc)&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)NtUserQueryInputContext(himc, InputContextProcess)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a15">GetInputContextThread</a>(himc)&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)NtUserQueryInputContext(himc, InputContextThread)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a16">GetWindowProcess</a>(hwnd)&nbsp;&nbsp;&nbsp;(ULONG_PTR)NtUserQueryWindow(hwnd, WindowProcess)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a17">GETPROCESSID</a>()&nbsp;&nbsp;&nbsp;(ULONG_PTR)(NtCurrentTeb()-&gt;ClientId.UniqueProcess)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a18">DWORD_ALIGN</a>(x)&nbsp;&nbsp;&nbsp;((x+3)&amp;~3)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a19">SetICF</a>(pClientImc, flag)&nbsp;&nbsp;&nbsp;((pClientImc)-&gt;<a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> |= flag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a20">ClrICF</a>(pClientImc, flag)&nbsp;&nbsp;&nbsp;((pClientImc)-&gt;<a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp;= ~flag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, flag)&nbsp;&nbsp;&nbsp;((pClientImc)-&gt;<a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; flag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a22">IsWndEqual</a>(hWnd1, hWnd2)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a23">HKL_TO_LANGID</a>(hkl)&nbsp;&nbsp;&nbsp;(LOWORD(HandleToUlong(hkl)))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a24">LANGIDFROMHKL</a>(hkl)&nbsp;&nbsp;&nbsp;(LOBYTE(LOWORD((ULONG_PTR)hkl)))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi)&nbsp;&nbsp;&nbsp;(CP_ACP)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a26">CImcCodePage</a>(pClientImc)&nbsp;&nbsp;&nbsp;(CP_ACP)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a27">TRACE</a>(x)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a28">BACK_T1</a>&nbsp;&nbsp;&nbsp;100</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a29">TAB_T1</a>&nbsp;&nbsp;&nbsp;101</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a30">CAPS_T1</a>&nbsp;&nbsp;&nbsp;102</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a31">ENTER_T1</a>&nbsp;&nbsp;&nbsp;103</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a32">SHIFT_T1</a>&nbsp;&nbsp;&nbsp;104</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a33">CTRL_T1</a>&nbsp;&nbsp;&nbsp;105</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a34">ESC_T1</a>&nbsp;&nbsp;&nbsp;106</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a35">ALT_T1</a>&nbsp;&nbsp;&nbsp;107</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a36">LABEL_T1</a>&nbsp;&nbsp;&nbsp;108</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a37">BACKSP_C1</a>&nbsp;&nbsp;&nbsp;201</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a38">TAB_C1</a>&nbsp;&nbsp;&nbsp;202</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a39">CAPS_C1</a>&nbsp;&nbsp;&nbsp;203</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a40">ENTER_C1</a>&nbsp;&nbsp;&nbsp;204</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a41">SHIFT_C1</a>&nbsp;&nbsp;&nbsp;205</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a42">INS_C1</a>&nbsp;&nbsp;&nbsp;206</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a43">DEL_C1</a>&nbsp;&nbsp;&nbsp;207</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a44">ESC_C1</a>&nbsp;&nbsp;&nbsp;208</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a45">LABEL_C1</a>&nbsp;&nbsp;&nbsp;209</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">_ENUMREGWORDDATA</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a46">ENUMREGWORDDATA</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">_ENUMREGWORDDATA</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a47">PENUMREGWORDDATA</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d1/d8/structtagIMELAYOUT.html">tagIMELAYOUT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a48">IMELAYOUT</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d1/d8/structtagIMELAYOUT.html">tagIMELAYOUT</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a49">PIMELAYOUT</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d2/d5/structtagFE__KEYBOARDS.html">tagFE_KEYBOARDS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a50">FE_KEYBOARDS</a></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a67">ImmLocalAlloc</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> uFlag, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> uBytes)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a68">CreateInputContext</a> (HIMC hImc, HKL hKL, BOOL fCanCallImeSelect)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a69">DestroyInputContext</a> (HIMC hImc, HKL hKL, BOOL bTerminate)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a70">SelectInputContext</a> (HKL hSelKL, HKL hUnSelKL, HIMC hImc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a71">BuildHimcList</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> idThread, HIMC **pphimcFirst)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HIMC&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a72">ImmGetSaveContext</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwFlag)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a73">ImmSetCompositionStringWorker</a> (HIMC hImc, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex, <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> lpComp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCompLen, <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> lpRead, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwReadLen, BOOL fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a74">ImmGetCandidateListCountWorker</a> (HIMC hImc, LPDWORD lpdwListCount, BOOL fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a75">ImmGetCandidateListWorker</a> (HIMC hImc, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex, LPCANDIDATELIST lpCandList, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwBufLen, BOOL fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a76">ImmGetGuideLineWorker</a> (HIMC hImc, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex, LPBYTE lpBuf, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwBufLen, BOOL fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a77">InternalGetCompositionStringA</a> (LPCOMPOSITIONSTRING lpCompStr, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex, <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> lpBuf, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwBufLen, BOOL fAnsiImc, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCodePage)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a78">InternalGetCompositionStringW</a> (LPCOMPOSITIONSTRING lpCompStr, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex, <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> lpBuf, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwBufLen, BOOL fAnsiImc, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCodePage)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a79">InternalGetCandidateListAtoW</a> (LPCANDIDATELIST lpCandListA, LPCANDIDATELIST lpCandListW, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwBufLen, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCodePage)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a80">InternalGetCandidateListWtoA</a> (LPCANDIDATELIST lpCandListW, LPCANDIDATELIST lpCandListA, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwBufLen, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCodePage)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a81">CalcCharacterPositionAtoW</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCharPosA, LPSTR lpszCharStr, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCodePage)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a82">CalcCharacterPositionWtoA</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCharPosW, LPWSTR lpwszCharStr, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCodePage)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a83">LFontAtoLFontW</a> (LPLOGFONTA lfFontA, LPLOGFONTW lfFontW)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a84">LFontWtoLFontA</a> (LPLOGFONTW lfFontW, LPLOGFONTA lfFontA)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a85">MakeIMENotify</a> (HIMC hImc, HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwAction, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwIndex, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwValue, WPARAM wParam, LPARAM lParam)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a86">ImmSendNotification</a> (BOOL fForProcess)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a87">InquireIme</a> (<a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a88">LoadIME</a> (<a class="el" href="../../d0/d8/structtagIMEINFOEX.html">PIMEINFOEX</a> piiex, <a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a89">UnloadIME</a> (<a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi, BOOL fTerminateIme)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a90">LoadImeDpi</a> (HKL hKL, BOOL fLock)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a91">FindOrLoadImeDpi</a> (HKL hKL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a92">GetSystemPathName</a> (PWSTRpwszPath, PWSTR pwszFileName, UINT maxChar)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a93">LoadVersionInfo</a> (<a class="el" href="../../d0/d8/structtagIMEINFOEX.html">PIMEINFOEX</a> piiex)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LPWSTR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a94">MakeStringFromRegFullInfo</a> (PKEY_VALUE_FULL_INFORMATION pKey, size_t limit)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PINPUTCONTEXT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a95">InternalImmLockIMC</a> (HIMC hImc, BOOL fCanCallImeSelect)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a96">ImmIsUIMessageWorker</a> (HWND hIMEWnd, UINT message, WPARAM wParam, LPARAM lParam, BOOL fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a97">TestInputContextProcess</a> (<a class="el" href="../../d1/d7/structtagIMC.html">PIMC</a> pImc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a98">ImmGetImeDpi</a> (HKL hKL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a99">ImmGetAppCompatFlags</a> (HIMC hImc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a100">ImmPtInRect</a> (int left, int top, int width, int height, LPPOINT lppt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a101">GetKeyboardLayoutCP</a> (HKL hKL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT CALLBACK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a102">EnumRegisterWordProcA</a> (LPCSTR lpszReading, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, LPCSTR lpszString, <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">PENUMREGWORDDATA</a> pEnumRegWordData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT CALLBACK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a103">EnumRegisterWordProcW</a> (LPCWSTR lpwszReading, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, LPCWSTR lpwszString, <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">PENUMREGWORDDATA</a> pEnumRegWordData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a104">ImmPostMessages</a> (HWND hwnd, HIMC hImc, <a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> iNum, PTRANSMSG pTransMsg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a105">HotKeyIDDispatcher</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HIMC hImc, HKL hKL, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwHotKeyID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a106">OpenRegApi</a> (<a class="el" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a> *pfn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a107">CloseRegApi</a> (<a class="el" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a> *pfn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a108">TranslateIMESubFunctions</a> (HWND hWndApp, LPIMESTRUCT lpIme, BOOL fAnsi)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a109">TransGetLevel</a> (HWND hWndApp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a110">TransSetLevel</a> (HWND hWndApp, LPIMESTRUCT lpIme)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a111">TransCodeConvert</a> (HIMC hImc, LPIMESTRUCT lpIme)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a112">TransConvertList</a> (HIMC hImc, LPIMESTRUCT lpIme)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>LRESULT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a113">TransGetMNTable</a> (HIMC hImc, LPIMESTRUCT lpIme)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a114">WINNLSTranslateMessageK</a> (int iNumMsg, PTRANSMSG pTransMsg, LPINPUTCONTEXT lpIMC, LPCOMPOSITIONSTRING lpCompStr, BOOL bAnsiIMC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a115">WINNLSTranslateMessageJ</a> (UINT uiNumMsg, PTRANSMSG pTransMsg, LPINPUTCONTEXT lpIMC, LPCOMPOSITIONSTRING lpCompStr, BOOL bAnsiIMC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a116">WINNLSTranslateMessage</a> (<a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a> iNum, PTRANSMSG pTransMsg, HIMC hImc, BOOL fAnsi, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwLangId)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>__inline int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a117">IsAnsiIMC</a> (HIMC hIMC)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a51">gfInitialized</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HINSTANCE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a52">ghInst</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PVOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a53">pImmHeap</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d6/structtagSERVERINFO.html">PSERVERINFO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a54">gpsi</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d6/structtagSHAREDINFO.html">SHAREDINFO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a55">gSharedInfo</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a56">gpImeDpi</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CRITICAL_SECTION&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a57">gcsImeDpi</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>POINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a58">gptWorkArea</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>POINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a59">gptRaiseEdge</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a60">guScanCode</a> [0XFF]</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a61">gszRegKbdLayout</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a62">gszRegKbdOrder</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a63">gszValLayoutText</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a64">gszValLayoutFile</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>CONST WCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a65">gszValImeFile</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d0/immcli_8h.html#a66">PtiCurrent</a> (VOID)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a35" doxytag="immcli.h::ALT_T1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ALT_T1&nbsp;&nbsp;&nbsp;107          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00484">484</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00347">InitSKT1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="immcli.h::BACK_T1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BACK_T1&nbsp;&nbsp;&nbsp;100          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00477">477</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00347">InitSKT1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="immcli.h::BACKSP_C1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BACKSP_C1&nbsp;&nbsp;&nbsp;201          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00488">488</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00269">InitSKC1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="immcli.h::bUser32Initialized" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define bUser32Initialized&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d9/d6/ntuser_2kernel_2globals_8h.html#a317">gpsi</a> != NULL)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00118">118</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="immcli.h::CAPS_C1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CAPS_C1&nbsp;&nbsp;&nbsp;203          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00490">490</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00269">InitSKC1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="immcli.h::CAPS_T1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CAPS_T1&nbsp;&nbsp;&nbsp;102          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00479">479</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00347">InitSKT1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="immcli.h::CImcCodePage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CImcCodePage          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pClientImc&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(CP_ACP)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00183">183</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00879">ImmGetCandidateListCountWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01014">ImmGetCandidateListWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00036">ImmGetCompositionStringA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00099">ImmGetCompositionStringW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01173">ImmGetGuideLineWorker()</a>, and <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03349">ImmRequestMessageWorker()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="immcli.h::ClrICF" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ClrICF          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pClientImc,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>flag&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((pClientImc)-&gt;<a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp;= ~flag)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00164">164</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00484">ImmEnableIME()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, and <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="immcli.h::CTRL_T1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CTRL_T1&nbsp;&nbsp;&nbsp;105          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00482">482</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00347">InitSKT1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="immcli.h::DEL_C1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DEL_C1&nbsp;&nbsp;&nbsp;207          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00494">494</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00269">InitSKC1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="immcli.h::DWORD_ALIGN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DWORD_ALIGN          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((x+3)&amp;~3)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00160">160</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d1/d6/w32_2ntgdi_2icm_2mscms_2profile_8c-source.html#l03334">AddTaggedElement()</a>, <a class="el" href="../../d1/d6/w32_2ntgdi_2icm_2mscms_2profile_8c-source.html#l03228">AddTagTableEntry()</a>, <a class="el" href="../../d1/d6/w32_2ntgdi_2icm_2mscms_2profile_8c-source.html#l03490">ChangeTaggedElementSize()</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l01130">CompStrAToStringExA()</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l01216">CompStrAToStringExW()</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l00804">CompStrAToUndetA()</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l00940">CompStrAToUndetW()</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l01975">CompStrWToStringExA()</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l01889">CompStrWToStringExW()</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l01692">CompStrWToUndetA()</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l01556">CompStrWToUndetW()</a>, <a class="el" href="../../d1/d6/w32_2ntgdi_2icm_2mscms_2profile_8c-source.html#l03400">DeleteTaggedElement()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00879">ImmGetCandidateListCountWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02885">InternalGetCandidateListAtoW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02962">InternalGetCandidateListWtoA()</a>, <a class="el" href="../../d1/d6/w32_2ntgdi_2icm_2mscms_2profile_8c-source.html#l01422">SetColorProfileElementReference()</a>, and <a class="el" href="../../d1/d6/w32_2ntgdi_2icm_2mscms_2profile_8c-source.html#l00986">SetColorProfileElementSize()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="immcli.h::ENTER_C1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ENTER_C1&nbsp;&nbsp;&nbsp;204          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00491">491</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00269">InitSKC1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="immcli.h::ENTER_T1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ENTER_T1&nbsp;&nbsp;&nbsp;103          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00480">480</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00347">InitSKT1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="immcli.h::ESC_C1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ESC_C1&nbsp;&nbsp;&nbsp;208          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00495">495</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00269">InitSKC1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="immcli.h::ESC_T1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ESC_T1&nbsp;&nbsp;&nbsp;106          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00483">483</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00347">InitSKT1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="immcli.h::GetInputContextProcess" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetInputContextProcess          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">himc&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)NtUserQueryInputContext(himc, InputContextProcess)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00149">149</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00759">ImmGetImeMenuItemsWorker()</a>, and <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00598">TestInputContextProcess()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="immcli.h::GetInputContextThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetInputContextThread          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">himc&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)NtUserQueryInputContext(himc, InputContextThread)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00152">152</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00087">HotKeyIDDispatcher()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00086">ImmAssociateContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00142">ImmAssociateContextEx()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00061">ImmDestroyContext()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00171">ImmGenerateMessage()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00759">ImmGetImeMenuItemsWorker()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01294">ImmNotifyIME()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03586">ImmRequestMessageAorW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02266">ImmSetCandidateWindow()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01694">ImmSetCompositionFontA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01764">ImmSetCompositionFontW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00610">ImmSetCompositionStringWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02185">ImmSetCompositionWindow()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01402">ImmSetConversionStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01525">ImmSetOpenStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02115">ImmSetStatusWindowPos()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03158">MakeIMENotify()</a>, and <a class="el" href="../../d3/d4/transsub_8c-source.html#l01042">TransHanjaMode()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="immcli.h::GETPROCESSID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GETPROCESSID          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(ULONG_PTR)(NtCurrentTeb()-&gt;ClientId.UniqueProcess)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00158">158</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="immcli.h::GetWindowProcess" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetWindowProcess          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(ULONG_PTR)NtUserQueryWindow(hwnd, WindowProcess)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00155">155</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="immcli.h::HEX_ASCII_SIZE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HEX_ASCII_SIZE&nbsp;&nbsp;&nbsp;20          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00051">51</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/layout_8c-source.html#l00602">GetImeLayout()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00266">ImmInstallIMEW()</a>, and <a class="el" href="../../d5/d0/layout_8c-source.html#l00662">WriteImeLayout()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="immcli.h::HKL_TO_LANGID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HKL_TO_LANGID          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hkl&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(LOWORD(HandleToUlong(hkl)))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00171">171</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="immcli.h::IMECodePage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IMECodePage          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pImeDpi&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(CP_ACP)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00182">182</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00563">CreateInputContext()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00575">ImmConfigureIMEA()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00707">ImmConfigureIMEW()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00539">ImmEnumRegisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00642">ImmEnumRegisterWordW()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00849">ImmEscapeA()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00999">ImmEscapeW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01841">ImmGetConversionListA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01964">ImmGetConversionListW()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00397">ImmGetRegisterWordStyleA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00469">ImmGetRegisterWordStyleW()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00025">ImmRegisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00116">ImmRegisterWordW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00610">ImmSetCompositionStringWorker()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00211">ImmUnregisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00302">ImmUnregisterWordW()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00040">InquireIme()</a>, and <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="immcli.h::ImmAssert" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ImmAssert&nbsp;&nbsp;&nbsp;UserAssert          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00059">59</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00749">EnumRegisterWordProcA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00819">EnumRegisterWordProcW()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00087">HotKeyIDDispatcher()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00876">ImmGetImeInfoEx()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01128">ImmPenAuxInput()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">ImmTranslateMessage()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00538">RestorePrivateMode()</a>, and <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="immcli.h::ImmLocalFlags" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ImmLocalFlags          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00141">141</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="immcli.h::ImmLocalFree" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ImmLocalFree          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;HeapFree(<a class="el" href="../../d4/d0/immcli_8h.html#a53">pImmHeap</a>, 0, (LPSTR)(p))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">137</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l01259">BuildHimcList()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00516">CopyImeFile()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00464">DestroyImeModeSaver()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00749">EnumRegisterWordProcA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00819">EnumRegisterWordProcW()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00575">ImmConfigureIMEA()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00707">ImmConfigureIMEW()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00026">ImmCreateContext()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00050">ImmDisableIME()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l01211">ImmEnumInputContext()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00539">ImmEnumRegisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00642">ImmEnumRegisterWordW()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00416">ImmFreeLayout()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00171">ImmGenerateMessage()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01841">ImmGetConversionListA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01964">ImmGetConversionListW()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00759">ImmGetImeMenuItemsWorker()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00397">ImmGetRegisterWordStyleA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00469">ImmGetRegisterWordStyleW()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00250">ImmIMPQueryIMEW()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00374">ImmIMPSetIMEW()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00407">ImmInstallIMEA()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00266">ImmInstallIMEW()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01128">ImmPenAuxInput()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00408">ImmPostMessages()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00325">ImmPutImeMenuItemsIntoMappedFile()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00025">ImmRegisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00116">ImmRegisterWordW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03349">ImmRequestMessageWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00610">ImmSetCompositionStringWorker()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">ImmTranslateMessage()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00365">ImmUnloadIME()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00211">ImmUnregisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00302">ImmUnregisterWordW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02339">InternalGetCompositionStringA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02619">InternalGetCompositionStringW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00388">InternalSCS_CHANGEATTR()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00493">InternalSCS_CHANGECLAUSE()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00559">InternalSCS_RECONVERTSTRING()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00234">LoadImeDpi()</a>, <a class="el" href="../../d4/d0/layime_8c-source.html#l00305">LoadVersionInfo()</a>, and <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l00582">WINNLSTranslateMessageJ()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="immcli.h::ImmLocalHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ImmLocalHandle          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(HLOCAL)(p)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00142">142</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="immcli.h::ImmLocalLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ImmLocalLock          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(LPSTR)(p)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00139">139</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="immcli.h::ImmLocalReAlloc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ImmLocalReAlloc          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>uBytes,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>uFlags&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;HeapReAlloc(<a class="el" href="../../d4/d0/immcli_8h.html#a53">pImmHeap</a>, uFlags, (LPSTR)(p), (uBytes))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00136">136</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="immcli.h::ImmLocalSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ImmLocalSize          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;HeapSize(<a class="el" href="../../d4/d0/immcli_8h.html#a53">pImmHeap</a>, 0, (LPSTR)(p))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00138">138</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="immcli.h::ImmLocalUnlock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ImmLocalUnlock          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">p&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00140">140</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="immcli.h::INS_C1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define INS_C1&nbsp;&nbsp;&nbsp;206          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00493">493</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00269">InitSKC1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="immcli.h::IsWndEqual" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IsWndEqual          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hWnd1,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>hWnd2&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>(LOWORD(HandleToUlong(hWnd1)) == LOWORD(HandleToUlong(hWnd2)) &amp;&amp; \
            <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hWnd1) == <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hWnd2))
</div></pre>
<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00168">168</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00086">ImmAssociateContext()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l01099">SKT1ButtonUp()</a>, and <a class="el" href="../../d3/d4/transsub_8c-source.html#l00450">TransSetConversionWindow()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="immcli.h::LABEL_C1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LABEL_C1&nbsp;&nbsp;&nbsp;209          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00496">496</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00269">InitSKC1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="immcli.h::LABEL_T1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LABEL_T1&nbsp;&nbsp;&nbsp;108          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00485">485</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00347">InitSKT1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="immcli.h::LANGIDFROMHKL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LANGIDFROMHKL          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hkl&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(LOBYTE(LOWORD((ULONG_PTR)hkl)))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00176">176</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/layout_8c-source.html#l00662">WriteImeLayout()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="immcli.h::OEMRESOURCE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define OEMRESOURCE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00018">18</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="immcli.h::RevalidateHimc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define RevalidateHimc          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">himc&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>(((himc) == (HIMC)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || !<a class="code" href="../../d4/d0/immcli_8h.html#a3">bUser32Initialized</a>) \
        ? (<a class="code" href="../../d1/d7/structtagIMC.html">PIMC</a>)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> : <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1199">HMValidateHandleNoRip</a>((HANDLE)himc, TYPE_INPUTCONTEXT))
</div></pre>
<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00126">126</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l01211">ImmEnumInputContext()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="immcli.h::SetICF" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SetICF          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pClientImc,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>flag&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((pClientImc)-&gt;<a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> |= flag)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00162">162</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00563">CreateInputContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00718">DestroyInputContext()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00484">ImmEnableIME()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, and <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="immcli.h::SHIFT_C1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SHIFT_C1&nbsp;&nbsp;&nbsp;205          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00492">492</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00269">InitSKC1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="immcli.h::SHIFT_T1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SHIFT_T1&nbsp;&nbsp;&nbsp;104          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00481">481</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00347">InitSKT1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="immcli.h::TAB_C1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TAB_C1&nbsp;&nbsp;&nbsp;202          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00489">489</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00269">InitSKC1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="immcli.h::TAB_T1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TAB_T1&nbsp;&nbsp;&nbsp;101          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00478">478</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00347">InitSKT1Bitmap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="immcli.h::TestICF" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TestICF          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pClientImc,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>flag&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((pClientImc)-&gt;<a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; flag)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00166">166</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00718">DestroyInputContext()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00484">ImmEnableIME()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00171">ImmGenerateMessage()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00879">ImmGetCandidateListCountWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01014">ImmGetCandidateListWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01583">ImmGetCompositionFontA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01643">ImmGetCompositionFontW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00036">ImmGetCompositionStringA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00099">ImmGetCompositionStringW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01173">ImmGetGuideLineWorker()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00225">ImmGetSaveContext()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00408">ImmPostMessages()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01694">ImmSetCompositionFontA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01764">ImmSetCompositionFontW()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00456">IsAnsiIMC()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01328">MySetCompFont()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>, and <a class="el" href="../../d3/d4/transsub_8c-source.html#l01222">SetFontForMCWVERTICAL()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="immcli.h::TRACE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TRACE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00470">470</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="immcli.h::ValidateHimc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ValidateHimc          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">himc&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>(((himc) == (HIMC)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || !<a class="code" href="../../d4/d0/immcli_8h.html#a3">bUser32Initialized</a>) \
        ? (<a class="code" href="../../d1/d7/structtagIMC.html">PIMC</a>)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> : <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1198">HMValidateHandle</a>((HANDLE)himc, TYPE_INPUTCONTEXT))
</div></pre>
<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00123">123</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="immcli.h::ValidateHwnd" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ValidateHwnd          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hwnd&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>(((hwnd) == (HWND)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || !<a class="code" href="../../d4/d0/immcli_8h.html#a3">bUser32Initialized</a>) \
        ? (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> : <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a1198">HMValidateHandle</a>(hwnd, TYPE_WINDOW))
</div></pre>
<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">120</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l01197">_CreateWindowEx()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00612">_SetWindowLongPtr()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00810">AnimateWindow()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00711">ArrangeWindows()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01907">ButtonWndProcA()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01929">ButtonWndProcW()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00200">CalcClientScrolling()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00409">CheckRadioButton()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l00117">ChildWindowFromPoint()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00593">ClientToScreen()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l02927">CloseWindow()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01335">ComboBoxWndProcA()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l01359">ComboBoxWndProcW()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00788">ComboListBoxWndProcA()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00810">ComboListBoxWndProcW()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00376">DDEMLClientWndProc()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01014">DefDlgProcA()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00999">DefDlgProcW()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02531">DefMDIChildProcWorker()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00629">DefWindowProc()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00078">DesktopWndProcWorker()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01036">DialogBox2()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01533">DispatchMessageWorker()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00600">DlgDirListA()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00130">DlgDirListComboBoxA()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00172">DlgDirListComboBoxW()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00645">DlgDirListW()</a>, <a class="el" href="../../d3/d3/combodir_8c-source.html#l00093">DlgDirSelectComboBoxExW()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l03776">ECGetControlBrush()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l00242">ECIsAncestorActive()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02787">EditWndProcA()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02808">EditWndProcW()</a>, <a class="el" href="../../d3/d8/dlgend_8c-source.html#l00024">EndDialog()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00415">EnterReaderModeHelper()</a>, <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00419">EnumHwndDlgChildProc()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00052">FChildVisible()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00440">GetClassLongPtr()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00067">GetClassNameA()</a>, <a class="el" href="../../d6/d6/classc_8c-source.html#l00305">GetClassWord()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00608">GetClientRect()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00120">GetDesktopWindow()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00490">GetDialogMonitor()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00163">GetDlgCtrlID()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00158">GetDlgItem()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00196">GetLastActivePopup()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00180">GetMenu()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00407">GetNextDlgGroupItem()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00318">GetNextDlgTabItem()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00319">GetParent()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01387">GetProp()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00383">GetScrollInfo()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00293">GetScrollPos()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00335">GetScrollRange()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00487">GetTopWindow()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01357">GetUpdateRect()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l01328">GetUpdateRgn()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00305">GetWindow()</a>, <a class="el" href="../../d5/d6/client_2winable_8c-source.html#l00024">GetWindowInfo()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00388">GetWindowLongPtr()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l01771">GetWindowModuleFileName()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00655">GetWindowRect()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03680">GetWindowRgn()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00781">GetWindowText()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00825">GetWindowTextLength()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00028">GetWindowWord()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00240">ImeWndProcA()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00256">ImeWndProcW()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00086">ImmAssociateContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00142">ImmAssociateContextEx()</a>, <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00034">ImmCallImeConsoleIME()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00575">ImmConfigureIMEA()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00707">ImmConfigureIMEW()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00225">ImmGetSaveContext()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03586">ImmRequestMessageAorW()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, <a class="el" href="../../d1/d8/dlgbegin_8c-source.html#l00553">InternalCreateDialog()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01246">InternalDialogBox()</a>, <a class="el" href="../../d1/d7/clenum_8c-source.html#l00095">InternalEnumWindows()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00508">IsChild()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00230">IsDialogMessageA()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00525">IsIconic()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00538">IsWindowEnabled()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00533">IsWindowUnicode()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00551">IsWindowVisible()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00580">IsZoomed()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00744">ListBoxWndProcA()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00766">ListBoxWndProcW()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01418">MapDialogRect()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00155">MapWindowPoints()</a>, <a class="el" href="../../d7/d3/msgbox_8c-source.html#l01648">MB_DlgProcWorker()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00685">MDIActivateDlgSize()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00165">MDIAddSysMenu()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02063">MDIClientWndProcA()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02078">MDIClientWndProcW()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01657">MDIClientWndProcWorker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02735">MDICompleteChildCreation()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00289">MDIRemoveSysMenu()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00127">MenuWndProcWorker()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l02089">MESSAGECALL()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d4/d0/mmcl_8c-source.html#l00068">MonitorFromWindow()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l13325">NtUserFlashWindowEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06624">NtUserGetDC()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06665">NtUserGetDCEx()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l05550">NtUserPostMessage()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l06394">NtUserTranslateMessage()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03265">OpenIcon()</a>, <a class="el" href="../../d8/d0/client_2draw_8c-source.html#l00025">PaintRect()</a>, <a class="el" href="../../d4/d3/ddemlwp_8c-source.html#l00059">ProcessDDEMLInitiate()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00158">ReaderWndProc()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00670">ScreenToClient()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00187">ScrollBarWndProcWorker()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d7/d3/client_2sbapi_8c-source.html#l00044">SetScrollRange()</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00848">SetWindowText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l01210">SmoothScrollWindowEx()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l01173">StaticWndProcA()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l01188">StaticWndProcW()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l02725">TrackMouseEvent()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00603">UnmaximizeChildWindows()</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l03608">UpdateWindow()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00415">UserAssociateHwnd()</a>, <a class="el" href="../../d9/d2/dc_8c-source.html#l00290">UserGetClientRgn()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l02519">UserGetDesktopDC()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00869">ValidatePositionableWindow()</a>, <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00447">WinHelpA()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l01545">xxxbFullscreenSwitch()</a>, <a class="el" href="../../d4/d3/comboini_8c-source.html#l00070">xxxCBCreateHandler()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00084">xxxCheckDefPushButton()</a>, <a class="el" href="../../d2/d7/w32_2ntuser_2kernel_2event_8c-source.html#l00120">xxxCsEvent()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">xxxDDETrackGetMessageHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00320">xxxDDETrackPostHook()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00147">xxxDDETrackSendHook()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00762">xxxDispatchMessage()</a>, <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00026">xxxDragObject()</a>, <a class="el" href="../../d3/d9/kernel_2help_8c-source.html#l00073">xxxHelpLoop()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00213">xxxInternalGetMessage()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02139">xxxLBoxCaretBlinker()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01237">xxxMDIActivate()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01540">xxxMDIDestroy()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00083">xxxSaveDlgFocus()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l06419">xxxSetConsoleCaretInfo()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00032">xxxSetFrameTitle()</a>, <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00568">xxxSetWindowData()</a>, <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00193">xxxSysCommand()</a>, and <a class="el" href="../../d0/d9/keyconv_8c-source.html#l00028">xxxTranslateMessage()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a46" doxytag="immcli.h::ENUMREGWORDDATA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">_ENUMREGWORDDATA</a>  <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">ENUMREGWORDDATA</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00539">ImmEnumRegisterWordA()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a50" doxytag="immcli.h::FE_KEYBOARDS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d2/d5/structtagFE__KEYBOARDS.html">tagFE_KEYBOARDS</a>  <a class="el" href="../../d2/d5/structtagFE__KEYBOARDS.html">FE_KEYBOARDS</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="immcli.h::IMELAYOUT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d1/d8/structtagIMELAYOUT.html">tagIMELAYOUT</a>  <a class="el" href="../../d1/d8/structtagIMELAYOUT.html">IMELAYOUT</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="immcli.h::PENUMREGWORDDATA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">_ENUMREGWORDDATA</a> * <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">PENUMREGWORDDATA</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00749">EnumRegisterWordProcA()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="immcli.h::PIMELAYOUT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d1/d8/structtagIMELAYOUT.html">tagIMELAYOUT</a> * <a class="el" href="../../d1/d8/structtagIMELAYOUT.html">PIMELAYOUT</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a71" doxytag="immcli.h::BuildHimcList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> BuildHimcList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>idThread</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC **&nbsp;</td>
          <td class="mdname" nowrap> <em>pphimcFirst</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l01259">1259</a> of file <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html">w32/ntuser/imm/context.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l12710">NtUserBuildHimcList()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>01262 {
01263     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> cHimc;
01264     HIMC *phimcFirst;
01265     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
01266     <span class="keywordtype">int</span> cTries;
01267 
01268     <span class="comment">/*</span>
01269 <span class="comment">     * Allocate a buffer to hold the names.</span>
01270 <span class="comment">     */</span>
01271     cHimc = 64;
01272     phimcFirst = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cHimc * <span class="keyword">sizeof</span>(HIMC));
01273     <span class="keywordflow">if</span> (phimcFirst == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01274         <span class="keywordflow">return</span> 0;
01275 
01276     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a390">NtUserBuildHimcList</a>(idThread, cHimc, phimcFirst, &amp;cHimc);
01277 
01278     <span class="comment">/*</span>
01279 <span class="comment">     * If the buffer wasn't big enough, reallocate</span>
01280 <span class="comment">     * the buffer and try again.</span>
01281 <span class="comment">     */</span>
01282     cTries = 0;
01283     <span class="keywordflow">while</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> == STATUS_BUFFER_TOO_SMALL) {
01284         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(phimcFirst);
01285 
01286         <span class="comment">/*</span>
01287 <span class="comment">         * If we can't seem to get it right,</span>
01288 <span class="comment">         * call it quits</span>
01289 <span class="comment">         */</span>
01290         <span class="keywordflow">if</span> (cTries++ == 10)
01291             <span class="keywordflow">return</span> 0;
01292 
01293         phimcFirst = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cHimc * <span class="keyword">sizeof</span>(HIMC));
01294         <span class="keywordflow">if</span> (phimcFirst == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01295             <span class="keywordflow">return</span> 0;
01296 
01297         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a390">NtUserBuildHimcList</a>(idThread, cHimc, phimcFirst, &amp;cHimc);
01298     }
01299 
01300     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status) || cHimc == 0) {
01301         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(phimcFirst);
01302         <span class="keywordflow">return</span> 0;
01303     }
01304 
01305     *pphimcFirst = phimcFirst;
01306 
01307     <span class="keywordflow">return</span> cHimc;
01308 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a81" doxytag="immcli.h::CalcCharacterPositionAtoW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CalcCharacterPositionAtoW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCharPosA</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszCharStr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCodePage</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03052">3052</a> of file <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html">ctxtinfo.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>.
<p>
Referenced by <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l01216">CompStrAToStringExW()</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l00940">CompStrAToUndetW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03224">ImmReconversionWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03349">ImmRequestMessageWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02619">InternalGetCompositionStringW()</a>, and <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00493">InternalSCS_CHANGECLAUSE()</a>.
<p>
<pre class="fragment"><div>03056 {
03057     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCharPosW = 0;
03058 
03059     <span class="keywordflow">while</span> (dwCharPosA != 0) {
03060         <span class="keywordflow">if</span> (IsDBCSLeadByteEx(dwCodePage, *lpszCharStr)) {
03061             <span class="keywordflow">if</span> (dwCharPosA &gt;= 2) {
03062                 dwCharPosA -= 2;
03063             }
03064             <span class="keywordflow">else</span> {
03065                 dwCharPosA--;
03066             }
03067             lpszCharStr += 2;
03068         }
03069         <span class="keywordflow">else</span> {
03070             dwCharPosA--;
03071             lpszCharStr++;
03072         }
03073         dwCharPosW++;
03074     }
03075 
03076     <span class="keywordflow">return</span> dwCharPosW;
03077 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a82" doxytag="immcli.h::CalcCharacterPositionWtoA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CalcCharacterPositionWtoA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCharPosW</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpwszCharStr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCodePage</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03089">3089</a> of file <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html">ctxtinfo.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00020">UnicodeToMultiByteSize()</a>.
<p>
Referenced by <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l01975">CompStrWToStringExA()</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l01692">CompStrWToUndetA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03224">ImmReconversionWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03349">ImmRequestMessageWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02339">InternalGetCompositionStringA()</a>, and <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00493">InternalSCS_CHANGECLAUSE()</a>.
<p>
<pre class="fragment"><div>03093 {
03094     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCharPosA = 0;
03095     ULONG MultiByteSize;
03096 
03097     <span class="keywordflow">while</span> (dwCharPosW != 0) {
03098         MultiByteSize = <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a7">UnicodeToMultiByteSize</a>(dwCodePage, lpwszCharStr);
03099         <span class="keywordflow">if</span> (MultiByteSize == 2) {
03100             dwCharPosA += 2;
03101         }
03102         <span class="keywordflow">else</span> {
03103             dwCharPosA++;
03104         }
03105         dwCharPosW--;
03106         lpwszCharStr++;
03107     }
03108 
03109     <span class="keywordflow">return</span> dwCharPosA;
03110 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a107" doxytag="immcli.h::CloseRegApi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CloseRegApi           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pfn</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00486">486</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d5/d9/immcli_8h-source.html#l00079">ADVAPI_FN::hModule</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00508">CliSaveImeHotKey()</a>.
<p>
<pre class="fragment"><div>00487 {
00488     UserAssert(pfn-&gt;<a class="code" href="../../d8/d0/structADVAPI__FN.html#o0">hModule</a>);
00489     <span class="keywordflow">if</span> (pfn-&gt;<a class="code" href="../../d8/d0/structADVAPI__FN.html#o0">hModule</a>) {
00490         FreeLibrary(pfn-&gt;<a class="code" href="../../d8/d0/structADVAPI__FN.html#o0">hModule</a>);
00491         pfn-&gt;<a class="code" href="../../d8/d0/structADVAPI__FN.html#o0">hModule</a>;
00492     }
00493 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a68" doxytag="immcli.h::CreateInputContext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CreateInputContext           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fCanCallImeSelect</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00563">563</a> of file <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html">w32/ntuser/imm/context.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00029">tagCLIENTIMC::dwCodePage</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00033">IMCF_UNICODE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00182">IMECodePage</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00087">tagIMEDPI::_tagImeFunctions::ImeSelect</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00436">ImmCreateIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00454">ImmDestroyIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00471">ImmLockIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00793">ImmLockImeDpi()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00488">ImmUnlockIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00162">SetICF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
<pre class="fragment"><div>00567 {
00568     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>            pImeDpi;
00569     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>         pClientImc;
00570     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>              dwPrivateDataSize;
00571     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>              fdwInitConvMode = 0;    <span class="comment">// do it later</span>
00572     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>               fInitOpen = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;      <span class="comment">// do it later</span>
00573     PINPUTCONTEXT      pInputContext;
00574     PCOMPOSITIONSTRING pCompStr;
00575     PCANDIDATEINFO     pCandInfo;
00576     PGUIDELINE         pGuideLine;
00577     <span class="keywordtype">int</span>                i;
00578 
00579     pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>(hImc);
00580     <span class="keywordflow">if</span> (!pInputContext) {
00581         RIPMSG1(RIP_WARNING, <span class="stringliteral">"CreateContext: Lock hIMC %x failure"</span>, hImc);
00582         <span class="keywordflow">goto</span> CrIMCLockErrOut;
00583     }
00584 
00585     <span class="comment">/*</span>
00586 <span class="comment">     * Initialize the member of INPUTCONTEXT</span>
00587 <span class="comment">     */</span>
00588     pInputContext-&gt;hCompStr = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a15">ImmCreateIMCC</a>(<span class="keyword">sizeof</span>(COMPOSITIONSTRING));
00589     <span class="keywordflow">if</span> (!pInputContext-&gt;hCompStr) {
00590         RIPMSG0(RIP_WARNING, <span class="stringliteral">"CreateContext: Create hCompStr failure"</span>);
00591         <span class="keywordflow">goto</span> CrIMCUnlockIMC;
00592     }
00593 
00594     pCompStr = (PCOMPOSITIONSTRING)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a17">ImmLockIMCC</a>(pInputContext-&gt;hCompStr);
00595     <span class="keywordflow">if</span> (!pCompStr) {
00596         RIPMSG1(RIP_WARNING,
00597               <span class="stringliteral">"CreateContext: Lock hCompStr %x failure"</span>, pInputContext-&gt;hCompStr);
00598         <span class="keywordflow">goto</span> CrIMCFreeCompStr;
00599     }
00600 
00601     pCompStr-&gt;dwSize = <span class="keyword">sizeof</span>(COMPOSITIONSTRING);
00602     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a>(pInputContext-&gt;hCompStr);
00603 
00604     pInputContext-&gt;hCandInfo = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a15">ImmCreateIMCC</a>(<span class="keyword">sizeof</span>(CANDIDATEINFO));
00605     <span class="keywordflow">if</span> (!pInputContext-&gt;hCandInfo) {
00606         RIPMSG0(RIP_WARNING, <span class="stringliteral">"CreateContext: Create hCandInfo failure"</span>);
00607         <span class="keywordflow">goto</span> CrIMCFreeCompStr;
00608     }
00609 
00610     pCandInfo = (PCANDIDATEINFO)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a17">ImmLockIMCC</a>(pInputContext-&gt;hCandInfo);
00611     <span class="keywordflow">if</span> (!pCandInfo) {
00612         RIPMSG1(RIP_WARNING,
00613               <span class="stringliteral">"CreateContext: Lock hCandInfo %x failure"</span>, pInputContext-&gt;hCandInfo);
00614         <span class="keywordflow">goto</span> CrIMCFreeCandInfo;
00615     }
00616 
00617     pCandInfo-&gt;dwSize = <span class="keyword">sizeof</span>(CANDIDATEINFO);
00618     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a>(pInputContext-&gt;hCandInfo);
00619 
00620     pInputContext-&gt;hGuideLine = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a15">ImmCreateIMCC</a>(<span class="keyword">sizeof</span>(GUIDELINE));
00621     <span class="keywordflow">if</span> (!pInputContext-&gt;hGuideLine) {
00622         RIPMSG0(RIP_WARNING, <span class="stringliteral">"CreateContext: Create hGuideLine failure"</span>);
00623         <span class="keywordflow">goto</span> CrIMCFreeCandInfo;
00624     }
00625 
00626     pGuideLine = (PGUIDELINE)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a17">ImmLockIMCC</a>(pInputContext-&gt;hGuideLine);
00627     <span class="keywordflow">if</span> (!pGuideLine) {
00628         RIPMSG1(RIP_WARNING,
00629               <span class="stringliteral">"CreateContext: Lock hGuideLine %x failure"</span>, pInputContext-&gt;hGuideLine);
00630         <span class="keywordflow">goto</span> CrIMCFreeGuideLine;
00631     }
00632 
00633     pGuideLine-&gt;dwSize = <span class="keyword">sizeof</span>(GUIDELINE);
00634     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a>(pInputContext-&gt;hGuideLine);
00635 
00636     pInputContext-&gt;hMsgBuf = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a15">ImmCreateIMCC</a>(<span class="keyword">sizeof</span>(UINT));
00637     <span class="keywordflow">if</span> (!pInputContext-&gt;hMsgBuf) {
00638         RIPMSG0(RIP_WARNING, <span class="stringliteral">"CreateContext: Create hMsgBuf failure"</span>);
00639         <span class="keywordflow">goto</span> CrIMCFreeGuideLine;
00640     }
00641 
00642     pInputContext-&gt;dwNumMsgBuf = 0;
00643     pInputContext-&gt;fOpen = fInitOpen;
00644     pInputContext-&gt;fdwConversion = fdwInitConvMode;
00645     pInputContext-&gt;fdwSentence = 0;
00646 
00647     <span class="keywordflow">for</span> (i = 0; i &lt; 4; i++) {
00648         pInputContext-&gt;cfCandForm[i].dwIndex = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(-1);
00649     }
00650 
00651     pImeDpi = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>(hKL);
00652     <span class="keywordflow">if</span> (pImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00653         <span class="keywordflow">if</span> ((pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hImc)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00654             RIPMSG0(RIP_WARNING, <span class="stringliteral">"CreateContext: ImmLockClientImc() failure"</span>);
00655             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00656             <span class="keywordflow">goto</span> CrIMCFreeMsgBuf;
00657         }
00658 
00659         <span class="comment">/*</span>
00660 <span class="comment">         * Unicode based IME expects an Uncode based input context.</span>
00661 <span class="comment">         */</span>
00662         <span class="keywordflow">if</span> (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE)
00663             <a class="code" href="../../d4/d0/immcli_8h.html#a19">SetICF</a>(pClientImc, IMCF_UNICODE);
00664 
00665         pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o5">dwCodePage</a> = <a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi);
00666 
00667         <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00668 
00669         dwPrivateDataSize = pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.dwPrivateDataSize;
00670     }
00671     <span class="keywordflow">else</span> {
00672         dwPrivateDataSize = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>);
00673     }
00674 
00675     pInputContext-&gt;hPrivate = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a15">ImmCreateIMCC</a>(dwPrivateDataSize);
00676     <span class="keywordflow">if</span> (!pInputContext-&gt;hPrivate) {
00677         RIPMSG0(RIP_WARNING, <span class="stringliteral">"CreateContext: Create hPrivate failure"</span>);
00678         <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00679         <span class="keywordflow">goto</span> CrIMCFreeMsgBuf;
00680     }
00681 
00682     pInputContext-&gt;pImeModeSaver = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00683 
00684     <span class="keywordflow">if</span> (pImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00685         <span class="keywordflow">if</span> (fCanCallImeSelect) {
00686             (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o23">ImeSelect</a>)(hImc, <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00687         }
00688         <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00689     }
00690 
00691     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
00692     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00693 
00694     <span class="comment">/*</span>
00695 <span class="comment">     * context failure case</span>
00696 <span class="comment">     */</span>
00697 CrIMCFreeMsgBuf:
00698     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a>(pInputContext-&gt;hMsgBuf);
00699 CrIMCFreeGuideLine:
00700     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a>(pInputContext-&gt;hGuideLine);
00701 CrIMCFreeCandInfo:
00702     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a>(pInputContext-&gt;hCandInfo);
00703 CrIMCFreeCompStr:
00704     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a>(pInputContext-&gt;hCompStr);
00705 CrIMCUnlockIMC:
00706     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
00707 CrIMCLockErrOut:
00708     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00709 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a69" doxytag="immcli.h::DestroyInputContext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL DestroyInputContext           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bTerminate</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00718">718</a> of file <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html">w32/ntuser/imm/context.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00025">tagCLIENTIMC::cLockObj</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00464">DestroyImeModeSaver()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02065">tagIMC::dwClientImcData</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00024">tagCLIENTIMC::hInputContext</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00150">HMValidateHandle()</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00041">IMCF_DEFAULTIMC</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00039">IMCF_INDESTROY</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00087">tagIMEDPI::_tagImeFunctions::ImeSelect</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00454">ImmDestroyIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00793">ImmLockImeDpi()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00591">IS_IME_ENABLED</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l12617">NtUserDestroyInputContext()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00162">SetICF</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00166">TestICF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00922">TYPE_INPUTCONTEXT</a>.
<p>
<pre class="fragment"><div>00722 {
00723     PINPUTCONTEXT pInputContext;
00724     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>       pImeDpi;
00725     <a class="code" href="../../d1/d7/structtagIMC.html">PIMC</a>          pImc;
00726     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>    pClientImc;
00727 
00728     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a126">IS_IME_ENABLED</a>()) {
00729         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00730 
00731     }
00732     <span class="keywordflow">if</span> (hImc == <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a>) {
00733         RIPMSG0(RIP_VERBOSE, <span class="stringliteral">"DestroyInputContext: hImc is NULL."</span>);
00734         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00735     }
00736 
00737     pImc = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a6">HMValidateHandle</a>((HANDLE)hImc, TYPE_INPUTCONTEXT);
00738 
00739     <span class="comment">/*</span>
00740 <span class="comment">     * Cannot destroy input context from other thread.</span>
00741 <span class="comment">     */</span>
00742     <span class="keywordflow">if</span> (pImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pImc) != <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>())
00743         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00744 
00745     <span class="comment">/*</span>
00746 <span class="comment">     * We are destroying this hImc so we don't bother calling</span>
00747 <span class="comment">     * ImmLockClientImc() to get the pClientImc. Instead, we</span>
00748 <span class="comment">     * reference the pImc-&gt;dwClientImcData directly and call</span>
00749 <span class="comment">     * InterlockedIncrement(&amp;pClientImc-&gt;cLockObj) right after</span>
00750 <span class="comment">     * several quick checks.</span>
00751 <span class="comment">     */</span>
00752     pClientImc = (<a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>)pImc-&gt;<a class="code" href="../../d1/d7/structtagIMC.html#o2">dwClientImcData</a>;
00753 
00754     <span class="keywordflow">if</span> (pClientImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00755         <span class="comment">/*</span>
00756 <span class="comment">         * Client side Imc has not been initialzed yet.</span>
00757 <span class="comment">         * We simply destroy this input context from kernel.</span>
00758 <span class="comment">         */</span>
00759         <span class="keywordflow">if</span> (bTerminate) {
00760             <span class="comment">/*</span>
00761 <span class="comment">             * If called from THREAD_DETACH, we don't</span>
00762 <span class="comment">             * have to destroy kernel side Input Context.</span>
00763 <span class="comment">             */</span>
00764             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00765         }
00766         <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a386">NtUserDestroyInputContext</a>(hImc);
00767     }
00768 
00769     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_DEFAULTIMC) &amp;&amp; !bTerminate) {
00770         <span class="comment">/*</span>
00771 <span class="comment">         * Cannot destroy default input context unless the</span>
00772 <span class="comment">         * thread is terminating.</span>
00773 <span class="comment">         */</span>
00774         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00775     }
00776 
00777     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_INDESTROY)) {
00778         <span class="comment">/*</span>
00779 <span class="comment">         * This hImc is being destroyed. Returns as success.</span>
00780 <span class="comment">         */</span>
00781         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00782     }
00783 
00784     <span class="comment">/*</span>
00785 <span class="comment">     * Time to lock up the pClientImc.</span>
00786 <span class="comment">     */</span>
00787     InterlockedIncrement(&amp;pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o1">cLockObj</a>);
00788 
00789     <span class="keywordflow">if</span> (pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00790 
00791         pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>(hImc);
00792         <span class="keywordflow">if</span> (!pInputContext) {
00793             RIPMSG1(RIP_WARNING, <span class="stringliteral">"DestroyContext: Lock hImc %x failure"</span>, hImc);
00794             <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00795             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00796         }
00797 
00798         pImeDpi = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>(hKL);
00799         <span class="keywordflow">if</span> (pImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00800             (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o23">ImeSelect</a>)(hImc, <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00801             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00802         }
00803 
00804         <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a>(pInputContext-&gt;hPrivate);
00805         <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a>(pInputContext-&gt;hMsgBuf);
00806         <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a>(pInputContext-&gt;hGuideLine);
00807         <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a>(pInputContext-&gt;hCandInfo);
00808         <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a>(pInputContext-&gt;hCompStr);
00809 
00810         <span class="comment">/*</span>
00811 <span class="comment">         * Free all ImeModeSaver.</span>
00812 <span class="comment">         */</span>
00813         <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a10">DestroyImeModeSaver</a>(pInputContext);
00814 
00815         <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
00816     }
00817 
00818     <a class="code" href="../../d4/d0/immcli_8h.html#a19">SetICF</a>(pClientImc, IMCF_INDESTROY);
00819 
00820     <span class="comment">/*</span>
00821 <span class="comment">     * ImmUnlockClientImc() will free up the pClientImc</span>
00822 <span class="comment">     * when InterlockedDecrement(&amp;pClientImc-&gt;cLockObj)</span>
00823 <span class="comment">     * reaches 0.</span>
00824 <span class="comment">     */</span>
00825     <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00826 
00827     <span class="keywordflow">return</span> (bTerminate) ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a386">NtUserDestroyInputContext</a>(hImc);
00828 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a102" doxytag="immcli.h::EnumRegisterWordProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT CALLBACK EnumRegisterWordProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszReading</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">PENUMREGWORDDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pEnumRegWordData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/regword_8c-source.html#l00749">749</a> of file <a class="el" href="../../d7/d6/regword_8c-source.html">regword.c</a>.
<p>
References <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00048">_ENUMREGWORDDATA::dwCodePage</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00059">ImmAssert</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00047">_ENUMREGWORDDATA::lpData</a>, <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o2">_ENUMREGWORDDATA::lpfn</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d0/immcli_8h.html#a47">PENUMREGWORDDATA</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00642">ImmEnumRegisterWordW()</a>.
<p>
<pre class="fragment"><div>00754 {
00755     LPWSTR lpwszReading;
00756     LPWSTR lpwszString;
00757     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>    cchReading;
00758     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>    cchString;
00759     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>    i;
00760     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>   uRet;
00761 
00762     <a class="code" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>(pEnumRegWordData != NULL);
00763 
00764     <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00765         cchReading = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszReading) + <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>);
00766         lpwszReading = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchReading * <span class="keyword">sizeof</span>(WCHAR));
00767         <span class="keywordflow">if</span> (lpwszReading == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00768             RIPMSG0(RIP_WARNING, <span class="stringliteral">"EnumRegisterWordProcA: memory failure."</span>);
00769             <span class="keywordflow">return</span> 0;
00770         }
00771 
00772         i = MultiByteToWideChar(pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o4">dwCodePage</a>,
00773                                 (DWORD)MB_PRECOMPOSED,
00774                                 (LPSTR)lpszReading,              <span class="comment">// src</span>
00775                                 (INT)<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszReading),
00776                                 (LPWSTR)lpwszReading,            <span class="comment">// dest</span>
00777                                 cchReading);
00778         lpwszReading[i] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00779     }
00780     <span class="keywordflow">else</span> {
00781         lpwszReading = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00782     }
00783 
00784     <span class="keywordflow">if</span> (lpszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00785         cchString  = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszString) + <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>);
00786         lpwszString = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchString * <span class="keyword">sizeof</span>(WCHAR));
00787         <span class="keywordflow">if</span> (lpwszString == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00788             RIPMSG0(RIP_WARNING, <span class="stringliteral">"EnumRegisterWordProcA: memory failure."</span>);
00789             <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00790                 <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszReading);
00791             <span class="keywordflow">return</span> 0;
00792         }
00793 
00794         i = MultiByteToWideChar(pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o4">dwCodePage</a>,
00795                                 (DWORD)MB_PRECOMPOSED,
00796                                 (LPSTR)lpszString,              <span class="comment">// src</span>
00797                                 (INT)<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszString),
00798                                 (LPWSTR)lpwszString,            <span class="comment">// dest</span>
00799                                 cchString);
00800         lpwszString[i] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00801     }
00802     <span class="keywordflow">else</span> {
00803         lpwszString = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00804     }
00805 
00806     uRet = (*pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o2">lpfn</a>.w)(lpwszReading, dwStyle,
00807                             lpwszString, pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o3">lpData</a>);
00808 
00809     <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00810         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszReading);
00811 
00812     <span class="keywordflow">if</span> (lpwszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00813         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszString);
00814 
00815     <span class="keywordflow">return</span> uRet;
00816 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a103" doxytag="immcli.h::EnumRegisterWordProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT CALLBACK EnumRegisterWordProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpwszReading</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpwszString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">PENUMREGWORDDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pEnumRegWordData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/regword_8c-source.html#l00819">819</a> of file <a class="el" href="../../d7/d6/regword_8c-source.html">regword.c</a>.
<p>
References <a class="el" href="../../d5/d9/immcli_8h-source.html#l00048">_ENUMREGWORDDATA::dwCodePage</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00059">ImmAssert</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00047">_ENUMREGWORDDATA::lpData</a>, <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o2">_ENUMREGWORDDATA::lpfn</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00539">ImmEnumRegisterWordA()</a>.
<p>
<pre class="fragment"><div>00824 {
00825     LPSTR lpszReading;
00826     LPSTR lpszString;
00827     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>   cchReading;
00828     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>   cchString;
00829     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>   i;
00830     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>  uRet;
00831 
00832     <a class="code" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>(pEnumRegWordData != NULL);
00833 
00834     <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00835         cchReading = (wcslen(lpwszReading) + 1) * <span class="keyword">sizeof</span>(WCHAR);
00836         lpszReading = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchReading);
00837         <span class="keywordflow">if</span> (lpszReading == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00838             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmRegisterWordW: memory failure."</span>);
00839             <span class="keywordflow">return</span> 0;
00840         }
00841 
00842         i = WideCharToMultiByte(pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o4">dwCodePage</a>,
00843                                 (DWORD)0,
00844                                 (LPWSTR)lpwszReading,          <span class="comment">// src</span>
00845                                 (INT)wcslen(lpwszReading),
00846                                 (LPSTR)lpszReading,            <span class="comment">// dest</span>
00847                                 cchReading,
00848                                 (LPSTR)NULL,
00849                                 (LPBOOL)NULL);
00850         lpszReading[i] = <span class="charliteral">'\0'</span>;
00851     }
00852     <span class="keywordflow">else</span> {
00853         lpszReading = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00854     }
00855 
00856     <span class="keywordflow">if</span> (lpwszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00857         cchString  = (wcslen(lpwszString) + 1) * <span class="keyword">sizeof</span>(WCHAR);
00858         lpszString = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchString);
00859         <span class="keywordflow">if</span> (lpszString == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00860             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmRegisterWordW: memory failure."</span>);
00861             <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00862                 <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszReading);
00863             <span class="keywordflow">return</span> 0;
00864         }
00865 
00866         i = WideCharToMultiByte(pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o4">dwCodePage</a>,
00867                                 (DWORD)0,
00868                                 (LPWSTR)lpwszString,          <span class="comment">// src</span>
00869                                 (INT)wcslen(lpwszString),
00870                                 (LPSTR)lpszString,            <span class="comment">// dest</span>
00871                                 cchString,
00872                                 (LPSTR)NULL,
00873                                 (LPBOOL)NULL);
00874         lpszString[i] = <span class="charliteral">'\0'</span>;
00875     }
00876     <span class="keywordflow">else</span> {
00877         lpszString = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00878     }
00879 
00880     uRet = (*pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o2">lpfn</a>.a)(lpszReading, dwStyle,
00881                             lpszString, pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o3">lpData</a>);
00882 
00883     <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00884         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszReading);
00885 
00886     <span class="keywordflow">if</span> (lpszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00887         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszString);
00888 
00889     <span class="keywordflow">return</span> uRet;
00890 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a91" doxytag="immcli.h::FindOrLoadImeDpi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> FindOrLoadImeDpi           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hKL</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/immime_8c-source.html#l00327">327</a> of file <a class="el" href="../../d7/d9/immime_8c-source.html">immime.c</a>.
<p>
References <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00793">ImmLockImeDpi()</a>, <a class="el" href="../../d5/d4/conimep_8h-source.html#l00149">IS_IME_KBDLAYOUT</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00234">LoadImeDpi()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d7/d9/immime_8c-source.html#l00575">ImmConfigureIMEA()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00707">ImmConfigureIMEW()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00539">ImmEnumRegisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00642">ImmEnumRegisterWordW()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00849">ImmEscapeA()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00999">ImmEscapeW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01841">ImmGetConversionListA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01964">ImmGetConversionListW()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00202">ImmGetProperty()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00397">ImmGetRegisterWordStyleA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00469">ImmGetRegisterWordStyleW()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01128">ImmPenAuxInput()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00025">ImmRegisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00116">ImmRegisterWordW()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00211">ImmUnregisterWordA()</a>, and <a class="el" href="../../d7/d6/regword_8c-source.html#l00302">ImmUnregisterWordW()</a>.
<p>
<pre class="fragment"><div>00329 {
00330     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi;
00331 
00332     <span class="comment">/*</span>
00333 <span class="comment">     * Non IME based keyboard layout doesn't have IMEDPI.</span>
00334 <span class="comment">     */</span>
00335     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d5/conimep_8h.html#a49">IS_IME_KBDLAYOUT</a>(hKL))
00336         <span class="keywordflow">return</span> (<a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00337 
00338     pImeDpi = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>(hKL);
00339     <span class="keywordflow">if</span> (pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00340         pImeDpi = <a class="code" href="../../d6/d0/immime_8c.html#a10">LoadImeDpi</a>(hKL, TRUE);
00341 
00342     <span class="keywordflow">return</span> pImeDpi;
00343 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a101" doxytag="immcli.h::GetKeyboardLayoutCP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT GetKeyboardLayoutCP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hKL</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00643">643</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00641">CachedCP</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00640">CachedLCID</a>, <a class="el" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a1">LOCALE_CPDATA</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00672">GetThreadKeyboardLayoutCP()</a>, and <a class="el" href="../../d7/d9/immime_8c-source.html#l01128">ImmPenAuxInput()</a>.
<p>
<pre class="fragment"><div>00645 {
00646 <span class="preprocessor">    #define LOCALE_CPDATA 7</span>
00647 <span class="preprocessor"></span>    WCHAR wszCodePage[<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a1">LOCALE_CPDATA</a>];
00648     LCID  lcid;
00649 
00650     lcid = MAKELCID(LOWORD(HandleToUlong(hKL)), SORT_DEFAULT);
00651 
00652     <span class="keywordflow">if</span> (lcid == <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a2">CachedLCID</a>)
00653         <span class="keywordflow">return</span> <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a3">CachedCP</a>;
00654 
00655     <span class="keywordflow">if</span> (!GetLocaleInfoW(lcid, LOCALE_IDEFAULTANSICODEPAGE,
00656                 wszCodePage, LOCALE_CPDATA))
00657         <span class="keywordflow">return</span> CP_ACP;
00658 
00659     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a2">CachedLCID</a> = lcid;
00660     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a3">CachedCP</a> = (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)wcstol(wszCodePage, NULL, 10);
00661 
00662     <span class="keywordflow">return</span> <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a3">CachedCP</a>;
00663 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a92" doxytag="immcli.h::GetSystemPathName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID GetSystemPathName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PWSTRpwszPath&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pwszFileName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>maxChar</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/layime_8c-source.html#l00095">95</a> of file <a class="el" href="../../d4/d0/layime_8c-source.html">layime.c</a>.
<p>
References <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/layout_8c-source.html#l00516">CopyImeFile()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00266">ImmInstallIMEW()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00131">LoadIME()</a>, and <a class="el" href="../../d4/d0/layime_8c-source.html#l00305">LoadVersionInfo()</a>.
<p>
<pre class="fragment"><div>00096 {
00097     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> fnLen = wcslen(pwszFileName);
00098     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> i = GetSystemDirectoryW(pwszPath, maxChar);
00099 
00100     UserAssert(fnLen + 1 &lt; maxChar);
00101     <span class="comment">// avoid error condition</span>
00102     <span class="keywordflow">if</span> (fnLen + 1 &gt;= maxChar) {
00103         *pwszPath = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00104         <span class="keywordflow">return</span>;
00105     }
00106     <span class="keywordflow">if</span> (i &gt; 0 || i &lt; maxChar - fnLen - 1) {
00107         pwszPath += i;
00108         <span class="keywordflow">if</span> (pwszPath[-1] != <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\\'</span>)
00109             *pwszPath++ = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\\'</span>;
00110     }
00111     wcscpy(pwszPath, pwszFileName);
00112 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a105" doxytag="immcli.h::HotKeyIDDispatcher" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL HotKeyIDDispatcher           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwHotKeyID</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00087">87</a> of file <a class="el" href="../../d3/d1/hotkey_8c-source.html">hotkey.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00245">CIMENonIMEToggle()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00365">CSymbolToggle()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00152">GetInputContextThread</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00085">tagIMEDPI::_tagImeFunctions::ImeEscape</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00059">ImmAssert</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00793">ImmLockImeDpi()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00155">JCloseOpen()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00464">KEnglishHangul()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00519">KHanjaConvert()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00492">KShapeToggle()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, and <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00415">TShapeToggle()</a>.
<p>
Referenced by <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, and <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00057">ImmSimulateHotKey()</a>.
<p>
<pre class="fragment"><div>00088 {
00089     <span class="comment">/*</span>
00090 <span class="comment">     * Dispatch the IME hotkey event for the specified hImc</span>
00091 <span class="comment">     * only if the calling thread owns the hImc.</span>
00092 <span class="comment">     */</span>
00093     <span class="keywordflow">if</span> (hImc != <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a> &amp;&amp;
00094             <a class="code" href="../../d4/d0/immcli_8h.html#a15">GetInputContextThread</a>(hImc) != GetCurrentThreadId()) {
00095         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00096     }
00097 
00098     <span class="keywordflow">switch</span> ( dwHotKeyID ) {
00099     <span class="keywordflow">case</span> IME_CHOTKEY_IME_NONIME_TOGGLE:
00100         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a0">CIMENonIMEToggle</a>(hImc, hKlCurrent, hWnd, MAKELANGID(LANG_CHINESE, SUBLANG_CHINESE_SIMPLIFIED));
00101 
00102     <span class="keywordflow">case</span> IME_THOTKEY_IME_NONIME_TOGGLE:
00103         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a0">CIMENonIMEToggle</a>(hImc, hKlCurrent, hWnd, MAKELANGID(LANG_CHINESE, SUBLANG_CHINESE_TRADITIONAL));
00104 
00105     <span class="keywordflow">case</span> IME_CHOTKEY_SYMBOL_TOGGLE:
00106     <span class="keywordflow">case</span> IME_THOTKEY_SYMBOL_TOGGLE:
00107         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a3">CSymbolToggle</a>( hImc, hKlCurrent, hWnd);
00108 
00109     <span class="keywordflow">case</span> IME_JHOTKEY_CLOSE_OPEN:
00110         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a2">JCloseOpen</a>( hImc, hKlCurrent, hWnd);
00111 
00112     <span class="keywordflow">case</span> IME_KHOTKEY_ENGLISH:           <span class="comment">// VK_HANGUL : English/Hangul mode</span>
00113         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a5">KEnglishHangul</a>( hImc );
00114 
00115     <span class="keywordflow">case</span> IME_KHOTKEY_SHAPE_TOGGLE:      <span class="comment">// VK_JUNJA : full/half width</span>
00116         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a6">KShapeToggle</a>( hImc );
00117 
00118     <span class="keywordflow">case</span> IME_KHOTKEY_HANJACONVERT:      <span class="comment">// VK_HANJA : convert hangul to hanja</span>
00119         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a7">KHanjaConvert</a>( hImc );
00120 
00121     <span class="keywordflow">case</span> IME_CHOTKEY_SHAPE_TOGGLE:
00122     <span class="keywordflow">case</span> IME_THOTKEY_SHAPE_TOGGLE:
00123         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a4">TShapeToggle</a>( hImc, hKlCurrent, hWnd);
00124 
00125     <span class="keywordflow">default</span>:
00126         <span class="comment">/*</span>
00127 <span class="comment">         * Direct swithing hotkey should have been handled in the kernel side.</span>
00128 <span class="comment">         */</span>
00129         <a class="code" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>(dwHotKeyID &lt; IME_HOTKEY_DSWITCH_FIRST || dwHotKeyID &gt; IME_HOTKEY_DSWITCH_LAST);
00130 
00131         <span class="keywordflow">if</span> ( dwHotKeyID &gt;= IME_HOTKEY_PRIVATE_FIRST &amp;&amp;
00132                     dwHotKeyID &lt;= IME_HOTKEY_PRIVATE_LAST ) {
00133 
00134             <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi;
00135             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    bRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00136 
00137             <span class="keywordflow">if</span> ( (pImeDpi = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>(hKlCurrent)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00138 
00139                 bRet = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)(*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o21">ImeEscape</a>)( hImc,
00140                                                   IME_ESC_PRIVATE_HOTKEY,
00141                                                   (PVOID)&amp;dwHotKeyID );
00142                 <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00143                 <span class="keywordflow">return</span> bRet;
00144             }
00145         }
00146     }
00147     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00148 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a99" doxytag="immcli.h::ImmGetAppCompatFlags" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ImmGetAppCompatFlags           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hImc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00912">912</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d0/d0/immuser_8h-source.html#l00027">tagCLIENTIMC::dwImeCompatFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01441">MySetCandidateWindow()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01328">MySetCompFont()</a>, and <a class="el" href="../../d3/d4/transsub_8c-source.html#l01396">MySetCompWindow()</a>.
<p>
<pre class="fragment"><div>00913 {
00914     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>    pClientImc;
00915     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>         dwImeCompat = 0;
00916 
00917     pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>( hImc );
00918     <span class="keywordflow">if</span> ( pClientImc != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00919         dwImeCompat = pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o3">dwImeCompatFlags</a>;
00920         <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>( pClientImc );
00921     }
00922     <span class="keywordflow">return</span> dwImeCompat;
00923 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a74" doxytag="immcli.h::ImmGetCandidateListCountWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ImmGetCandidateListCountWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpdwListCount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00879">879</a> of file <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html">ctxtinfo.c</a>.
<p>
References <a class="el" href="../../d5/d9/immcli_8h-source.html#l00183">CImcCodePage</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00160">DWORD_ALIGN</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00033">IMCF_UNICODE</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00471">ImmLockIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00488">ImmUnlockIMCC()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02885">InternalGetCandidateListAtoW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02962">InternalGetCandidateListWtoA()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00166">TestICF</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00845">ImmGetCandidateListCountA()</a>, and <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00862">ImmGetCandidateListCountW()</a>.
<p>
<pre class="fragment"><div>00883 {
00884     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>      pClientImc;
00885     PINPUTCONTEXT   pInputContext;
00886     LPCANDIDATEINFO lpCandInfo;
00887     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>           dwRet = 0;
00888     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>             i;
00889     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>           dwCodePage;
00890 
00891     <span class="keywordflow">if</span> (lpdwListCount) {
00892         *lpdwListCount = 0;
00893     } <span class="keywordflow">else</span> {
00894         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmGetCandidateListCount: NULL lpdwListCount."</span>);
00895         <span class="keywordflow">return</span> dwRet;
00896     }
00897 
00898     pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hImc);
00899     <span class="keywordflow">if</span> (pClientImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00900         RIPMSG1(RIP_WARNING, <span class="stringliteral">"ImmGetCandidateListCount: Invalid hImc %lx."</span>, hImc);
00901         <span class="keywordflow">goto</span> GetCandListCntExit;
00902     }
00903     dwCodePage = <a class="code" href="../../d4/d0/immcli_8h.html#a26">CImcCodePage</a>(pClientImc);
00904 
00905     pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>(hImc);
00906     <span class="keywordflow">if</span> (pInputContext == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00907         RIPMSG1(RIP_WARNING, <span class="stringliteral">"ImmGetCandidateListCount: Lock hImc %lx failed."</span>, hImc);
00908         <span class="keywordflow">goto</span> GetCandListCntUnlockClientImc;
00909     }
00910 
00911     lpCandInfo = (LPCANDIDATEINFO)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a17">ImmLockIMCC</a>(pInputContext-&gt;hCandInfo);
00912     <span class="keywordflow">if</span> (!lpCandInfo) {
00913         RIPMSG1(RIP_WARNING,
00914               <span class="stringliteral">"ImmGetCandidateListCount: Lock hCandInfo %x failed."</span>,
00915               pInputContext-&gt;hCandInfo);
00916         <span class="keywordflow">goto</span> GetCandListCntUnlockIMC;
00917     }
00918 
00919     <span class="keywordflow">if</span> (lpCandInfo-&gt;dwSize &lt; <span class="keyword">sizeof</span>(CANDIDATEINFO)) {
00920         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmGetCandidateListCount: no candidate list."</span>);
00921         <span class="keywordflow">goto</span> GetCandListCntUnlockIMC;
00922     }
00923 
00924     *lpdwListCount = lpCandInfo-&gt;dwCount;
00925 
00926     <span class="keywordflow">if</span> (fAnsi &amp;&amp; <a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE)) {
00927         LPCANDIDATELIST lpCandListW;
00928 
00929         dwRet = <a class="code" href="../../d4/d0/immcli_8h.html#a18">DWORD_ALIGN</a>(<span class="keyword">sizeof</span>(CANDIDATEINFO))
00930               + <a class="code" href="../../d4/d0/immcli_8h.html#a18">DWORD_ALIGN</a>(lpCandInfo-&gt;dwPrivateSize);
00931 
00932         <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)lpCandInfo-&gt;dwCount; i++) {
00933             lpCandListW = (LPCANDIDATELIST)((LPBYTE)lpCandInfo + lpCandInfo-&gt;dwOffset[i]);
00934             dwRet += <a class="code" href="../../d4/d0/immcli_8h.html#a80">InternalGetCandidateListWtoA</a>(lpCandListW, NULL, 0, dwCodePage);
00935         }
00936     }
00937     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!fAnsi &amp;&amp; !<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE)) {
00938         LPCANDIDATELIST lpCandListA;
00939 
00940         dwRet = <a class="code" href="../../d4/d0/immcli_8h.html#a18">DWORD_ALIGN</a>(<span class="keyword">sizeof</span>(CANDIDATEINFO))
00941               + <a class="code" href="../../d4/d0/immcli_8h.html#a18">DWORD_ALIGN</a>(lpCandInfo-&gt;dwPrivateSize);
00942 
00943         <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)lpCandInfo-&gt;dwCount; i++) {
00944             lpCandListA = (LPCANDIDATELIST)((LPBYTE)lpCandInfo + lpCandInfo-&gt;dwOffset[i]);
00945             dwRet += <a class="code" href="../../d4/d0/immcli_8h.html#a79">InternalGetCandidateListAtoW</a>(lpCandListA, NULL, 0, dwCodePage);
00946         }
00947     }
00948     <span class="keywordflow">else</span> {
00949         dwRet = lpCandInfo-&gt;dwSize;
00950     }
00951 
00952     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a>(pInputContext-&gt;hCandInfo);
00953 
00954 GetCandListCntUnlockIMC:
00955     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
00956 
00957 GetCandListCntUnlockClientImc:
00958     <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00959 
00960 GetCandListCntExit:
00961     <span class="keywordflow">return</span> dwRet;
00962 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a75" doxytag="immcli.h::ImmGetCandidateListWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ImmGetCandidateListWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCANDIDATELIST&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCandList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufLen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01014">1014</a> of file <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html">ctxtinfo.c</a>.
<p>
References <a class="el" href="../../d5/d9/immcli_8h-source.html#l00183">CImcCodePage</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00033">IMCF_UNICODE</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00471">ImmLockIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00488">ImmUnlockIMCC()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02885">InternalGetCandidateListAtoW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02962">InternalGetCandidateListWtoA()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00166">TestICF</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00974">ImmGetCandidateListA()</a>, and <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00994">ImmGetCandidateListW()</a>.
<p>
<pre class="fragment"><div>01020 {
01021     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>      pClientImc;
01022     PINPUTCONTEXT   pInputContext;
01023     LPCANDIDATEINFO lpCandInfo;
01024     LPCANDIDATELIST lpCandListTemp;
01025     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>           dwBufLenTemp;
01026     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>           dwRet = 0;
01027     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>           dwCodePage;
01028 
01029     pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hImc);
01030     <span class="keywordflow">if</span> (pClientImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01031         RIPMSG1(RIP_WARNING, <span class="stringliteral">"ImmGetCandidateList: Invalid hImc %lx."</span>, hImc);
01032         <span class="keywordflow">goto</span> GetCandListExit;
01033 
01034     }
01035 
01036     dwCodePage = <a class="code" href="../../d4/d0/immcli_8h.html#a26">CImcCodePage</a>(pClientImc);
01037 
01038     pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>(hImc);
01039     <span class="keywordflow">if</span> (pInputContext == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01040         RIPMSG1(RIP_WARNING, <span class="stringliteral">"ImmGetCandidateList: Lock hImc %lx failed."</span>, hImc);
01041         <span class="keywordflow">goto</span> GetCandListUnlockClientImc;
01042     }
01043 
01044     lpCandInfo = (LPCANDIDATEINFO)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a17">ImmLockIMCC</a>(pInputContext-&gt;hCandInfo);
01045     <span class="keywordflow">if</span> (!lpCandInfo) {
01046         RIPMSG1(RIP_WARNING, <span class="stringliteral">"ImmGetCandidateList: Lock hCandInfo %x failed"</span>,
01047               pInputContext-&gt;hCandInfo);
01048         <span class="keywordflow">goto</span> GetCandListUnlockIMC;
01049     }
01050 
01051     <span class="keywordflow">if</span> (lpCandInfo-&gt;dwSize &lt; <span class="keyword">sizeof</span>(CANDIDATEINFO)) {
01052         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmGetCandidateList: no candidate list."</span>);
01053         <span class="keywordflow">goto</span> GetCandListUnlockIMCC;
01054     }
01055 
01056     <span class="comment">/*</span>
01057 <span class="comment">     * invalid access</span>
01058 <span class="comment">     */</span>
01059     <span class="keywordflow">if</span> (dwIndex &gt;= lpCandInfo-&gt;dwCount) {
01060         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmGetCandidateList: dwIndex &gt;= lpCandInfo-&gt;dwCount."</span>);
01061         <span class="keywordflow">goto</span> GetCandListUnlockIMCC;
01062     }
01063 
01064     lpCandListTemp = (LPCANDIDATELIST)((LPBYTE)lpCandInfo + lpCandInfo-&gt;dwOffset[dwIndex]);
01065 
01066     <span class="keywordflow">if</span> (fAnsi &amp;&amp; <a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE)) {
01067         <span class="comment">/*</span>
01068 <span class="comment">         * ANSI Caller with an Unicode hImc.</span>
01069 <span class="comment">         */</span>
01070         dwBufLenTemp = <a class="code" href="../../d4/d0/immcli_8h.html#a80">InternalGetCandidateListWtoA</a>(lpCandListTemp, NULL, 0, dwCodePage);
01071     }
01072     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!fAnsi &amp;&amp; !<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE)) {
01073         <span class="comment">/*</span>
01074 <span class="comment">         * Unicode Caller with an ANSI hImc.</span>
01075 <span class="comment">         */</span>
01076         dwBufLenTemp = <a class="code" href="../../d4/d0/immcli_8h.html#a79">InternalGetCandidateListAtoW</a>(lpCandListTemp, NULL, 0, dwCodePage);
01077     }
01078     <span class="keywordflow">else</span> {
01079         <span class="comment">/*</span>
01080 <span class="comment">         * No conversion required.</span>
01081 <span class="comment">         */</span>
01082         dwBufLenTemp = lpCandListTemp-&gt;dwSize;
01083     }
01084 
01085     <span class="comment">/*</span>
01086 <span class="comment">     * Query buffer size or early exit on error</span>
01087 <span class="comment">     */</span>
01088     <span class="keywordflow">if</span> (dwBufLen == 0 || dwBufLenTemp == 0) {
01089         dwRet = dwBufLenTemp;
01090     }
01091     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!lpCandList) {
01092         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmGetCandidateList: Null lpCandList."</span>);
01093     }
01094     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwBufLen &lt; dwBufLenTemp) {
01095         RIPMSG2(RIP_WARNING, <span class="stringliteral">"ImmGetCandidateList: dwBufLen = %d too small, require = %d."</span>,
01096               dwBufLen, dwBufLenTemp);
01097     } <span class="keywordflow">else</span> {
01098         <span class="keywordflow">if</span> (fAnsi &amp;&amp; <a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE)) {
01099             dwRet = <a class="code" href="../../d4/d0/immcli_8h.html#a80">InternalGetCandidateListWtoA</a>(lpCandListTemp, lpCandList, dwBufLenTemp, dwCodePage);
01100         }
01101         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!fAnsi &amp;&amp; !<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE)) {
01102             dwRet = <a class="code" href="../../d4/d0/immcli_8h.html#a79">InternalGetCandidateListAtoW</a>(lpCandListTemp, lpCandList, dwBufLenTemp, dwCodePage);
01103         }
01104         <span class="keywordflow">else</span> {
01105             RtlCopyMemory((LPBYTE)lpCandList, (LPBYTE)lpCandListTemp, dwBufLenTemp);
01106             dwRet = dwBufLenTemp;
01107         }
01108     }
01109 
01110 GetCandListUnlockIMCC:
01111     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a>(pInputContext-&gt;hCandInfo);
01112 
01113 GetCandListUnlockIMC:
01114     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
01115 
01116 GetCandListUnlockClientImc:
01117     <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
01118 
01119 GetCandListExit:
01120     <span class="keywordflow">return</span> dwRet;
01121 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a76" doxytag="immcli.h::ImmGetGuideLineWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ImmGetGuideLineWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPBYTE&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufLen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01173">1173</a> of file <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html">ctxtinfo.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00183">CImcCodePage</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00033">IMCF_UNICODE</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00471">ImmLockIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00488">ImmUnlockIMCC()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02885">InternalGetCandidateListAtoW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02962">InternalGetCandidateListWtoA()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00166">TestICF</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01133">ImmGetGuideLineA()</a>, and <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01153">ImmGetGuideLineW()</a>.
<p>
<pre class="fragment"><div>01179 {
01180     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>    pClientImc;
01181     PINPUTCONTEXT pInputContext;
01182     LPGUIDELINE   lpGuideLine;
01183     LPBYTE        lpBufTemp;
01184     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>         dwRet = 0;
01185     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>         dwBufLenNeeded;
01186     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>          bUDC;
01187     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>         dwCodePage;
01188 
01189     pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hImc);
01190     <span class="keywordflow">if</span> (pClientImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01191         RIPMSG1(RIP_WARNING, <span class="stringliteral">"ImmGetGuideLine: Invalid hImc %lx."</span>, hImc);
01192         <span class="keywordflow">goto</span> GetGuideLineExit;
01193     }
01194     dwCodePage = <a class="code" href="../../d4/d0/immcli_8h.html#a26">CImcCodePage</a>(pClientImc);
01195 
01196     pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>(hImc);
01197     <span class="keywordflow">if</span> (pInputContext == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01198         RIPMSG1(RIP_WARNING, <span class="stringliteral">"ImmGetGuideLine: Lock hImc %lx failed."</span>, hImc);
01199         <span class="keywordflow">goto</span> GetGuideLineUnlockClientImc;
01200     }
01201 
01202     lpGuideLine = (LPGUIDELINE)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a17">ImmLockIMCC</a>(pInputContext-&gt;hGuideLine);
01203     <span class="keywordflow">if</span> (!lpGuideLine) {
01204         RIPMSG1(RIP_WARNING, <span class="stringliteral">"ImmGetGuideLine: Lock hGuideLine %lx failed."</span>,
01205               pInputContext-&gt;hGuideLine);
01206         <span class="keywordflow">goto</span> GetGuideLineUnlockIMC;
01207     }
01208 
01209     <span class="keywordflow">switch</span> (dwIndex) {
01210     <span class="keywordflow">case</span> GGL_LEVEL:
01211         dwRet = lpGuideLine-&gt;dwLevel;
01212         <span class="keywordflow">break</span>;
01213 
01214     <span class="keywordflow">case</span> GGL_INDEX:
01215         dwRet = lpGuideLine-&gt;dwIndex;
01216         <span class="keywordflow">break</span>;
01217 
01218     <span class="keywordflow">case</span> GGL_STRING:
01219 
01220         lpBufTemp = (LPBYTE)lpGuideLine + lpGuideLine-&gt;dwStrOffset;
01221 
01222         <span class="comment">/*</span>
01223 <span class="comment">         * Calculate the required buffer length.</span>
01224 <span class="comment">         */</span>
01225         <span class="keywordflow">if</span> (fAnsi &amp;&amp; <a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE)) {
01226             dwBufLenNeeded = WideCharToMultiByte(dwCodePage,
01227                                                  (DWORD)0,
01228                                                  (LPWSTR)lpBufTemp,
01229                                                  (INT)lpGuideLine-&gt;dwStrLen,
01230                                                  (LPSTR)NULL,
01231                                                  (INT)0,
01232                                                  (LPSTR)NULL,
01233                                                  (LPBOOL)&amp;bUDC);
01234         }
01235         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!fAnsi &amp;&amp; !<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE)) {
01236             dwBufLenNeeded = MultiByteToWideChar(dwCodePage,
01237                                                  (DWORD)MB_PRECOMPOSED,
01238                                                  (LPSTR)lpBufTemp,
01239                                                  (INT)lpGuideLine-&gt;dwStrLen,
01240                                                  (LPWSTR)NULL,
01241                                                  (INT)0);
01242             dwBufLenNeeded *= <span class="keyword">sizeof</span>(WCHAR);
01243         }
01244         <span class="keywordflow">else</span> {
01245             dwBufLenNeeded = lpGuideLine-&gt;dwStrLen;
01246             <span class="comment">/*</span>
01247 <span class="comment">             * The dwStrLen records the strlen and not the byte count.</span>
01248 <span class="comment">             */</span>
01249             <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE))
01250                 dwBufLenNeeded *= <span class="keyword">sizeof</span>(WCHAR);
01251         }
01252 
01253         <span class="comment">/*</span>
01254 <span class="comment">         * Query GuideLine string size only or early exit on error</span>
01255 <span class="comment">         */</span>
01256         <span class="keywordflow">if</span> (dwBufLen == 0 || dwBufLenNeeded == 0) {
01257             dwRet = dwBufLenNeeded;
01258             <span class="keywordflow">goto</span> GetGuideLineUnlockIMCC;
01259         }
01260 
01261         <span class="keywordflow">if</span> (lpBuf == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || dwBufLen &lt; dwBufLenNeeded)
01262             <span class="keywordflow">goto</span> GetGuideLineUnlockIMCC;
01263 
01264         <span class="keywordflow">if</span> (fAnsi &amp;&amp; <a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE)) {
01265             dwRet = WideCharToMultiByte(dwCodePage,
01266                                         (DWORD)0,
01267                                         (LPWSTR)lpBufTemp,
01268                                         (INT)lpGuideLine-&gt;dwStrLen,
01269                                         (LPSTR)lpBuf,
01270                                         (INT)dwBufLen,
01271                                         (LPSTR)NULL,
01272                                         (LPBOOL)&amp;bUDC);
01273         }
01274         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!fAnsi &amp;&amp; !<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE)) {
01275             dwRet = MultiByteToWideChar(dwCodePage,
01276                                         (DWORD)MB_PRECOMPOSED,
01277                                         (LPSTR)lpBufTemp,
01278                                         (INT)lpGuideLine-&gt;dwStrLen,
01279                                         (LPWSTR)lpBuf,
01280                                         (INT)dwBufLen/<span class="keyword">sizeof</span>(WCHAR));
01281             dwRet *= <span class="keyword">sizeof</span>(WCHAR);
01282         }
01283         <span class="keywordflow">else</span> {
01284             RtlCopyMemory(lpBuf, lpBufTemp, dwBufLenNeeded);
01285             dwRet = dwBufLenNeeded;
01286         }
01287 
01288         <span class="keywordflow">break</span>;
01289 
01290     <span class="keywordflow">case</span> GGL_PRIVATE:
01291 
01292         lpBufTemp = (LPBYTE)lpGuideLine + lpGuideLine-&gt;dwPrivateOffset;
01293 
01294         <span class="comment">/*</span>
01295 <span class="comment">         * The dwPrivateOffset is an offset to a CANDIDATELIST when</span>
01296 <span class="comment">         * lpGuideLine-&gt;dwIndex == GL_ID_REVERSECONVERSION. Do conversion</span>
01297 <span class="comment">         * for this case only.</span>
01298 <span class="comment">         */</span>
01299         <span class="keywordflow">if</span> (fAnsi &amp;&amp; <a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE) &amp;&amp;
01300                 lpGuideLine-&gt;dwIndex == GL_ID_REVERSECONVERSION) {
01301             dwBufLenNeeded = <a class="code" href="../../d4/d0/immcli_8h.html#a80">InternalGetCandidateListWtoA</a>(
01302                         (LPCANDIDATELIST)lpBufTemp, (LPCANDIDATELIST)NULL, 0, dwCodePage);
01303         }
01304         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!fAnsi &amp;&amp; !<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE) &amp;&amp;
01305                 lpGuideLine-&gt;dwIndex == GL_ID_REVERSECONVERSION) {
01306             dwBufLenNeeded = <a class="code" href="../../d4/d0/immcli_8h.html#a79">InternalGetCandidateListAtoW</a>(
01307                         (LPCANDIDATELIST)lpBufTemp, (LPCANDIDATELIST)NULL, 0, dwCodePage);
01308         }
01309         <span class="keywordflow">else</span> {
01310             dwBufLenNeeded = lpGuideLine-&gt;dwPrivateSize;
01311         }
01312 
01313         <span class="comment">/*</span>
01314 <span class="comment">         * Query dwPrivateSize size only or early exit on error</span>
01315 <span class="comment">         */</span>
01316         <span class="keywordflow">if</span> (dwBufLen == 0 || dwBufLenNeeded == 0) {
01317             dwRet = dwBufLenNeeded;
01318             <span class="keywordflow">goto</span> GetGuideLineUnlockIMCC;
01319         }
01320 
01321         <span class="keywordflow">if</span> (lpBuf == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || dwBufLen &lt; dwBufLenNeeded)
01322             <span class="keywordflow">goto</span> GetGuideLineUnlockIMCC;
01323 
01324         <span class="keywordflow">if</span> (fAnsi &amp;&amp; <a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE) &amp;&amp;
01325                 lpGuideLine-&gt;dwIndex == GL_ID_REVERSECONVERSION) {
01326             dwRet = <a class="code" href="../../d4/d0/immcli_8h.html#a80">InternalGetCandidateListWtoA</a>(
01327                     (LPCANDIDATELIST)lpBufTemp, (LPCANDIDATELIST)lpBuf, dwBufLenNeeded, dwCodePage);
01328         }
01329         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!fAnsi &amp;&amp; !<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE) &amp;&amp;
01330                 lpGuideLine-&gt;dwIndex == GL_ID_REVERSECONVERSION) {
01331             dwRet = <a class="code" href="../../d4/d0/immcli_8h.html#a79">InternalGetCandidateListAtoW</a>(
01332                     (LPCANDIDATELIST)lpBufTemp, (LPCANDIDATELIST)lpBuf, dwBufLenNeeded, dwCodePage);
01333         }
01334         <span class="keywordflow">else</span> {
01335             RtlCopyMemory(lpBuf, lpBufTemp, dwBufLenNeeded);
01336             dwRet = dwBufLenNeeded;
01337         }
01338 
01339         <span class="keywordflow">break</span>;
01340 
01341     <span class="keywordflow">default</span>:
01342         <span class="keywordflow">break</span>;
01343     }
01344 
01345 GetGuideLineUnlockIMCC:
01346     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a>(pInputContext-&gt;hGuideLine);
01347 
01348 GetGuideLineUnlockIMC:
01349     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
01350 
01351 GetGuideLineUnlockClientImc:
01352     <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
01353 
01354 GetGuideLineExit:
01355     <span class="keywordflow">return</span> dwRet;
01356 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a98" doxytag="immcli.h::ImmGetImeDpi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> ImmGetImeDpi           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hKL</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00769">769</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d3/d5/ntuser_2imm_2globals_8c-source.html#l00034">gcsImeDpi</a>, <a class="el" href="../../d3/d5/ntuser_2imm_2globals_8c-source.html#l00033">gpImeDpi</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00069">tagIMEDPI::hKL</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d0/immuser_8h-source.html#l00067">tagIMEDPI::pNext</a>.
<p>
Referenced by <a class="el" href="../../d7/d9/immime_8c-source.html#l00346">ImmLoadIME()</a>, and <a class="el" href="../../d7/d9/immime_8c-source.html#l00234">LoadImeDpi()</a>.
<p>
<pre class="fragment"><div>00771 {
00772     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi;
00773 
00774     RtlEnterCriticalSection(&amp;gcsImeDpi);
00775 
00776     pImeDpi = <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a7">gpImeDpi</a>;
00777 
00778     <span class="keywordflow">while</span> (pImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o2">hKL</a> != hKL)
00779         pImeDpi = pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o0">pNext</a>;
00780 
00781     RtlLeaveCriticalSection(&amp;gcsImeDpi);
00782 
00783     <span class="keywordflow">return</span> (<a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>)pImeDpi;
00784 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a72" doxytag="immcli.h::ImmGetSaveContext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HIMC ImmGetSaveContext           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlag</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00225">225</a> of file <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html">w32/ntuser/imm/context.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01770">tagWND::hImc</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00046">IGSC_DEFIMCFALLBACK</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00047">IGSC_WINNLSCHECK</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00040">IMCF_WINNLSDISABLE</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00591">IS_IME_ENABLED</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07799">NtUserGetThreadState()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l09643">NtUserQueryWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00166">TestICF</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l01178">TestWindowProcess()</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00120">ValidateHwnd</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00309">ImmSetActiveContext()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00037">ImmWINNLSGetEnableStatus()</a>, and <a class="el" href="../../d3/d4/transsub_8c-source.html#l00054">TranslateIMESubFunctions()</a>.
<p>
<pre class="fragment"><div>00228 {
00229     HIMC       hRetImc;
00230     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a> pClientImc;
00231     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>  pwnd;
00232 
00233     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a126">IS_IME_ENABLED</a>()) {
00234         <span class="keywordflow">return</span> <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a>;
00235     }
00236 
00237     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00238         <span class="comment">/*</span>
00239 <span class="comment">         * Retrieves the default input context of current thread.</span>
00240 <span class="comment">         */</span>
00241         hRetImc = (HIMC)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a287">NtUserGetThreadState</a>(UserThreadStateDefaultInputContext);
00242     }
00243     <span class="keywordflow">else</span> {
00244         <span class="comment">/*</span>
00245 <span class="comment">         * Retrieves the input context associated to the given window.</span>
00246 <span class="comment">         */</span>
00247         <span class="keywordflow">if</span> ((pwnd = <a class="code" href="../../d4/d0/immcli_8h.html#a4">ValidateHwnd</a>(hWnd)) == (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00248             RIPMSG1(RIP_WARNING,
00249                   <span class="stringliteral">"ImmGetSaveContext: invalid window handle %x"</span>, hWnd);
00250             <span class="keywordflow">return</span> <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a>;
00251         }
00252         <span class="comment">/*</span>
00253 <span class="comment">         * Don't allow other process to access input context</span>
00254 <span class="comment">         */</span>
00255         <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d7/kernel_2winmgr_8c.html#a16">TestWindowProcess</a>(pwnd)) {
00256             RIPMSG0(RIP_WARNING,
00257                   <span class="stringliteral">"ImmGetSaveContext: can not get input context of other process"</span>);
00258             <span class="keywordflow">return</span> <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a>;
00259         }
00260         hRetImc = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o20">hImc</a>;
00261 
00262         <span class="keywordflow">if</span> (hRetImc == <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a> &amp;&amp; (dwFlag &amp; <a class="code" href="../../d8/d0/immstruc_8h.html#a13">IGSC_DEFIMCFALLBACK</a>)) {
00263             <span class="comment">/*</span>
00264 <span class="comment">             * hWnd associated with NULL input context, retrieves the</span>
00265 <span class="comment">             * default input context of the hWnd's creator thread.</span>
00266 <span class="comment">             */</span>
00267             hRetImc = (HIMC)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a328">NtUserQueryWindow</a>(hWnd, WindowDefaultInputContext);
00268         }
00269     }
00270 
00271     pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hRetImc);
00272     <span class="keywordflow">if</span> (pClientImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00273         <span class="keywordflow">return</span> <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a>;
00274 
00275     <span class="keywordflow">if</span> ((dwFlag &amp; <a class="code" href="../../d8/d0/immstruc_8h.html#a14">IGSC_WINNLSCHECK</a>) &amp;&amp; <a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_WINNLSDISABLE))
00276         hRetImc = <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a>;
00277 
00278     <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00279 
00280     <span class="keywordflow">return</span> hRetImc;
00281 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a96" doxytag="immcli.h::ImmIsUIMessageWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImmIsUIMessageWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMEWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00115">115</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00017">D</a>, <a class="el" href="../../d7/d5/memprint_8h-source.html#l00079">DbgPrint</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00076">ImmIsUIMessageA()</a>, and <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00094">ImmIsUIMessageW()</a>.
<p>
<pre class="fragment"><div>00121 {
00122     <a class="code" href="../../d2/d0/imemenu_8c.html#a0">D</a>(<a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"ImmIsUIMessageWorker(wnd[%08X], msg[%04X], wp[%08X], lp[%08X], Ansi[%d]\n"</span>,
00123       hIMEWnd, message, wParam, lParam, fAnsi));
00124 
00125     <span class="keywordflow">switch</span> (message) {
00126     <span class="keywordflow">case</span> WM_IME_STARTCOMPOSITION:
00127     <span class="keywordflow">case</span> WM_IME_ENDCOMPOSITION:
00128     <span class="keywordflow">case</span> WM_IME_COMPOSITION:
00129     <span class="keywordflow">case</span> WM_IME_SETCONTEXT:
00130     <span class="keywordflow">case</span> WM_IME_COMPOSITIONFULL:
00131     <span class="keywordflow">case</span> WM_IME_SELECT:
00132     <span class="keywordflow">case</span> WM_IME_NOTIFY:
00133     <span class="keywordflow">case</span> WM_IME_SYSTEM:
00134 
00135         <span class="keywordflow">if</span> (!hIMEWnd)
00136             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00137 
00138 <span class="preprocessor">#if DBG</span>
00139 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>(hIMEWnd)) {
00140             RIPMSG1(RIP_WARNING,
00141                   <span class="stringliteral">"ImmIsUIMessage: Invalid window handle %x"</span>, hIMEWnd);
00142             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00143         }
00144 <span class="preprocessor">#endif</span>
00145 <span class="preprocessor"></span>
00146         <span class="keywordflow">if</span> (fAnsi) {
00147             SendMessageA(hIMEWnd, message, wParam, lParam);
00148         }
00149         <span class="keywordflow">else</span> {
00150             SendMessageW(hIMEWnd, message, wParam, lParam);
00151         }
00152 
00153         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00154 
00155     <span class="keywordflow">default</span>:
00156         <span class="keywordflow">break</span>;
00157     }
00158 
00159     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00160 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a67" doxytag="immcli.h::ImmLocalAlloc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> ImmLocalAlloc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>uBytes</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">557</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d3/d5/ntuser_2imm_2globals_8c-source.html#l00028">pImmHeap</a>.
<p>
Referenced by <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l01259">BuildHimcList()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00516">CopyImeFile()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00749">EnumRegisterWordProcA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00819">EnumRegisterWordProcW()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00436">GetImeModeSaver()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00492">GetImePrivateModeSaver()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00575">ImmConfigureIMEA()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00707">ImmConfigureIMEW()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00026">ImmCreateContext()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00539">ImmEnumRegisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00642">ImmEnumRegisterWordW()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00416">ImmFreeLayout()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00171">ImmGenerateMessage()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01841">ImmGetConversionListA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01964">ImmGetConversionListW()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00759">ImmGetImeMenuItemsWorker()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00397">ImmGetRegisterWordStyleA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00469">ImmGetRegisterWordStyleW()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00250">ImmIMPQueryIMEW()</a>, <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00374">ImmIMPSetIMEW()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00407">ImmInstallIMEA()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00266">ImmInstallIMEW()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l01128">ImmPenAuxInput()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00408">ImmPostMessages()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00325">ImmPutImeMenuItemsIntoMappedFile()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00025">ImmRegisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00116">ImmRegisterWordW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03349">ImmRequestMessageWorker()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">ImmTranslateMessage()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00211">ImmUnregisterWordA()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00302">ImmUnregisterWordW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02339">InternalGetCompositionStringA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02619">InternalGetCompositionStringW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00388">InternalSCS_CHANGEATTR()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00493">InternalSCS_CHANGECLAUSE()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00559">InternalSCS_RECONVERTSTRING()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00324">InternalSCS_SETSTR()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00234">LoadImeDpi()</a>, <a class="el" href="../../d4/d0/layime_8c-source.html#l00305">LoadVersionInfo()</a>, and <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l00582">WINNLSTranslateMessageJ()</a>.
<p>
<pre class="fragment"><div>00560 {
00561     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a3">pImmHeap</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00562         <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a3">pImmHeap</a> = RtlProcessHeap();
00563         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a3">pImmHeap</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00564             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmLocalAlloc: NULL pImmHeap!"</span>);
00565             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00566         }
00567     }
00568 
00569     <span class="keywordflow">return</span> HeapAlloc(pImmHeap, uFlag, uBytes);
00570 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a104" doxytag="immcli.h::ImmPostMessages" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ImmPostMessages           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>iNum</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PTRANSMSG&nbsp;</td>
          <td class="mdname" nowrap> <em>pTransMsg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00408">408</a> of file <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html">ntuser/imm/input.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00033">IMCF_UNICODE</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00166">TestICF</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01099">TransGetLevel()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00475">VER40</a>, and <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00478">WINNLSTranslateMessage()</a>.
<p>
Referenced by <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00196">ImmTranslateMessage()</a>.
<p>
<pre class="fragment"><div>00413 {
00414     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> i;
00415     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fAnsiIME;
00416     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a> pClientImc;
00417     PTRANSMSG pTransMsgTemp, pTransMsgBuf = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00418 
00419     <span class="comment">//</span>
00420     <span class="comment">// Check if the IME is unicode or not.</span>
00421     <span class="comment">// The message buffer contains unicode messages</span>
00422     <span class="comment">// if the IME is unicode.</span>
00423     <span class="comment">//</span>
00424     pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hImc);
00425     <span class="keywordflow">if</span> (pClientImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00426         RIPMSG1(RIP_WARNING,
00427                 <span class="stringliteral">"ImmPostMessages: Invalid hImc %lx."</span>, hImc);
00428         <span class="keywordflow">return</span>;
00429     }
00430 
00431     fAnsiIME = ! <a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE);
00432     <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00433 
00434     <span class="comment">//</span>
00435     <span class="comment">// translate messages to 3.x format if the App's version is 3.x.</span>
00436     <span class="comment">//</span>
00437     pTransMsgTemp = pTransMsg;
00438     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;dwExpWinVer &lt; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a101">VER40</a>) {
00439         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwLangId = PRIMARYLANGID(
00440                                       LANGIDFROMLCID(
00441                                                     GetSystemDefaultLCID()));
00442         <span class="keywordflow">if</span> ( (dwLangId == LANG_KOREAN &amp;&amp; <a class="code" href="../../d2/d5/transsub_8c.html#a25">TransGetLevel</a>(hWnd) == 3) ||
00443              dwLangId == LANG_JAPANESE ) {
00444 
00445             pTransMsgBuf = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, iNum * <span class="keyword">sizeof</span>(TRANSMSG));
00446             <span class="keywordflow">if</span> (pTransMsgBuf != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00447                 RtlCopyMemory(pTransMsgBuf, pTransMsg, iNum * <span class="keyword">sizeof</span>(TRANSMSG));
00448                 iNum = <a class="code" href="../../d4/d3/ntuser_2imm_2input_8c.html#a5">WINNLSTranslateMessage</a>(iNum,
00449                                               pTransMsgBuf,
00450                                               hImc,
00451                                               fAnsiIME,
00452                                               dwLangId );
00453                 pTransMsgTemp = pTransMsgBuf;
00454             }
00455         }
00456     }
00457 
00458     <span class="keywordflow">for</span> (i = 0; i &lt; iNum; i++) {
00459         <span class="keywordflow">if</span> (fAnsiIME) {
00460             PostMessageA(hWnd,
00461                     pTransMsgTemp-&gt;message,
00462                     pTransMsgTemp-&gt;wParam,
00463                     pTransMsgTemp-&gt;lParam);
00464         } <span class="keywordflow">else</span> {
00465             PostMessageW(hWnd,
00466                     pTransMsgTemp-&gt;message,
00467                     pTransMsgTemp-&gt;wParam,
00468                     pTransMsgTemp-&gt;lParam);
00469         }
00470         pTransMsgTemp++;
00471     }
00472 
00473     <span class="keywordflow">if</span> (pTransMsgBuf != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00474         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(pTransMsgBuf);
00475     }
00476 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a100" doxytag="immcli.h::ImmPtInRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImmPtInRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>left</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>top</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>width</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>height</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPPOINT&nbsp;</td>
          <td class="mdname" nowrap> <em>lppt</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00933">933</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>.
<p>
Referenced by <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00679">SKC1MousePosition()</a>, and <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00803">SKT1MousePosition()</a>.
<p>
<pre class="fragment"><div>00939 {
00940     <span class="keywordflow">return</span> (lppt-&gt;x &gt;= left &amp;&amp; lppt-&gt;x &lt; (left + width) &amp;&amp;
00941             lppt-&gt;y &gt;= top  &amp;&amp; lppt-&gt;y &lt; (top + height));
00942 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a86" doxytag="immcli.h::ImmSendNotification" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ImmSendNotification           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">BOOL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fForProcess</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l01191">1191</a> of file <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html">w32/ntuser/imm/context.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l01211">ImmEnumInputContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l01157">SendNotificationProc()</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00955">ImmSystemHandler()</a>.
<p>
<pre class="fragment"><div>01193 {
01194     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwThreadId;
01195 
01196     <span class="keywordflow">if</span> (fForProcess) {
01197         dwThreadId = -1;
01198     } <span class="keywordflow">else</span> {
01199         dwThreadId = 0;
01200     }
01201 
01202     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a19">ImmEnumInputContext</a>(dwThreadId, (IMCENUMPROC)SendNotificationProc, 0);
01203 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a73" doxytag="immcli.h::ImmSetCompositionStringWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL ImmSetCompositionStringWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpComp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCompLen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpRead</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwReadLen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00610">610</a> of file <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html">ctxtinfo.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00239">CheckAttribute()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00287">CheckClause()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00197">CompositionString()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00152">GetInputContextThread</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04502">GetKeyboardLayout()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00182">IMECodePage</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00091">tagIMEDPI::_tagImeFunctions::ImeSetCompositionString</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00793">ImmLockImeDpi()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00488">ImmUnlockIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00388">InternalSCS_CHANGEATTR()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00493">InternalSCS_CHANGECLAUSE()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00559">InternalSCS_RECONVERTSTRING()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00324">InternalSCS_SETSTR()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00162">ImmSetCompositionStringA()</a>, and <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00184">ImmSetCompositionStringW()</a>.
<p>
<pre class="fragment"><div>00618 {
00619     PINPUTCONTEXT      pInputContext;
00620     PCOMPOSITIONSTRING pCompStr;
00621     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>              dwThreadId;
00622     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>            pImeDpi;
00623     LPBYTE             lpCompBuf, lpReadBuf;
00624     LPBYTE             lpNewComp = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, lpNewRead = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00625     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>              dwNewCompLen, dwNewReadLen;
00626     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>               fRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00627     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>               fCheckSize = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00628     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>               fNeedAWConversion;
00629     LPBYTE             lpOrgComp, lpOrgRead;
00630     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>              dwOrgCompLen, dwOrgReadLen;
00631 
00632     dwThreadId = <a class="code" href="../../d4/d0/immcli_8h.html#a15">GetInputContextThread</a>(hImc);
00633     <span class="keywordflow">if</span> (dwThreadId != GetCurrentThreadId()) {
00634         RIPMSG1(RIP_WARNING,
00635               <span class="stringliteral">"ImmSetCompositionString: Invalid input context access %lx."</span>, hImc);
00636         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00637     }
00638 
00639     pImeDpi = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>(<a class="code" href="../../d3/d8/client_8c.html#a154">GetKeyboardLayout</a>(dwThreadId));
00640     <span class="keywordflow">if</span> (pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00641         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00642 
00643     lpCompBuf = lpReadBuf = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00644 
00645     <span class="comment">// Backup original pointers to copyback for QUERY.</span>
00646     lpOrgComp = lpComp;
00647     lpOrgRead = lpRead;
00648     dwOrgCompLen = dwCompLen;
00649     dwOrgReadLen = dwReadLen;
00650 
00651     <span class="comment">/*</span>
00652 <span class="comment">     * Check if we need ANSI/Unicode conversion</span>
00653 <span class="comment">     */</span>
00654     <span class="keywordflow">if</span> (( fAnsi &amp;&amp; !(pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE)) ||
00655         (!fAnsi &amp;&amp;  (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE))) {
00656         <span class="comment">/*</span>
00657 <span class="comment">         * No A/W conversion needed.</span>
00658 <span class="comment">         */</span>
00659         fNeedAWConversion = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00660         <span class="keywordflow">goto</span> start_scs;
00661     }
00662     fNeedAWConversion = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00663 
00664     <span class="keywordflow">switch</span> (dwIndex) {
00665     <span class="keywordflow">case</span> SCS_SETSTR:
00666         <span class="keywordflow">if</span> ( lpComp &amp;&amp;
00667             (lpCompBuf = <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a15">InternalSCS_SETSTR</a>(lpComp, dwCompLen,
00668                                 &amp;lpNewComp, &amp;dwNewCompLen, fAnsi, <a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00669             <span class="keywordflow">goto</span> callime_scs;
00670         <span class="keywordflow">if</span> ( lpRead &amp;&amp;
00671             (lpReadBuf = <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a15">InternalSCS_SETSTR</a>(lpRead, dwReadLen,
00672                                 &amp;lpNewRead, &amp;dwNewReadLen, fAnsi, <a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00673             <span class="keywordflow">goto</span> callime_scs;
00674 
00675         fCheckSize = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00676         <span class="keywordflow">break</span>;
00677 
00678     <span class="keywordflow">case</span> SCS_CHANGEATTR:
00679         <span class="keywordflow">if</span> ( lpComp &amp;&amp;
00680             (lpCompBuf = <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a16">InternalSCS_CHANGEATTR</a>(
00681                                 hImc, lpComp, dwCompLen, GCS_COMPSTR,
00682                                 &amp;lpNewComp, &amp;dwNewCompLen, fAnsi, <a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00683             <span class="keywordflow">goto</span> callime_scs;
00684         <span class="keywordflow">if</span> ( lpRead &amp;&amp;
00685             (lpReadBuf = <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a16">InternalSCS_CHANGEATTR</a>(
00686                                 hImc, lpRead, dwReadLen, GCS_COMPREADSTR,
00687                                 &amp;lpNewRead, &amp;dwNewReadLen, fAnsi, <a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00688             <span class="keywordflow">goto</span> callime_scs;
00689         <span class="keywordflow">break</span>;
00690 
00691     <span class="keywordflow">case</span> SCS_CHANGECLAUSE:
00692        <span class="keywordflow">if</span> ( lpComp &amp;&amp;
00693            (lpCompBuf = <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a17">InternalSCS_CHANGECLAUSE</a>(
00694                                 hImc, lpComp, dwCompLen, GCS_COMPSTR,
00695                                 (LPDWORD *)&amp;lpNewComp, &amp;dwNewCompLen, fAnsi, <a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00696             <span class="keywordflow">goto</span> callime_scs;
00697         <span class="keywordflow">if</span> ( lpRead &amp;&amp;
00698             (lpReadBuf = <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a17">InternalSCS_CHANGECLAUSE</a>(
00699                                 hImc, lpRead, dwReadLen, GCS_COMPREADSTR,
00700                                 (LPDWORD *)&amp;lpNewRead, &amp;dwNewReadLen, fAnsi, <a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00701             <span class="keywordflow">goto</span> callime_scs;
00702         <span class="keywordflow">break</span>;
00703 
00704     <span class="keywordflow">case</span> SCS_SETRECONVERTSTRING:
00705     <span class="keywordflow">case</span> SCS_QUERYRECONVERTSTRING:
00706         <span class="keywordflow">if</span> (lpComp &amp;&amp;
00707             (lpCompBuf = <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a18">InternalSCS_RECONVERTSTRING</a>((LPRECONVERTSTRING)lpComp, dwCompLen,
00708                                 (LPRECONVERTSTRING *)&amp;lpNewComp, &amp;dwNewCompLen,
00709                                 fAnsi, <a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00710             <span class="keywordflow">goto</span> callime_scs;
00711         <span class="keywordflow">if</span> (lpRead &amp;&amp;
00712             (lpReadBuf = <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a18">InternalSCS_RECONVERTSTRING</a>((LPRECONVERTSTRING)lpRead, dwReadLen,
00713                                 (LPRECONVERTSTRING *)&amp;lpNewRead, &amp;dwNewReadLen,
00714                                 fAnsi, <a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi))) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00715             <span class="keywordflow">goto</span> callime_scs;
00716 
00717         fCheckSize = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00718         <span class="keywordflow">break</span>;
00719 
00720     <span class="keywordflow">default</span>:
00721         <span class="keywordflow">goto</span> callime_scs;
00722     }
00723 
00724     <span class="keywordflow">if</span> (lpCompBuf != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00725         lpComp    = lpNewComp;
00726         dwCompLen = dwNewCompLen;
00727     }
00728 
00729     <span class="keywordflow">if</span> (lpReadBuf != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00730         lpRead    = lpNewRead;
00731         dwReadLen = dwNewReadLen;
00732     }
00733 
00734 start_scs:
00735 
00736     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/ctxtinfo_8c.html#a12">CompositionString</a>(hImc, &amp;pInputContext, &amp;pCompStr, fCheckSize) &lt;= 0)
00737         <span class="keywordflow">goto</span> callime_scs;
00738 
00739     <span class="keywordflow">switch</span> (dwIndex)
00740     {
00741     <span class="keywordflow">case</span> SCS_SETSTR:
00742         fRet = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00743         <span class="keywordflow">break</span>;
00744 
00745     <span class="keywordflow">case</span> SCS_CHANGEATTR:
00746         <span class="keywordflow">if</span> ( lpComp &amp;&amp;
00747             !<a class="code" href="../../d4/d1/ctxtinfo_8c.html#a13">CheckAttribute</a>((LPBYTE)lpComp, dwCompLen,
00748                     (LPBYTE)((LPBYTE)pCompStr + pCompStr-&gt;dwCompAttrOffset),
00749                     pCompStr-&gt;dwCompAttrLen,
00750                     (LPDWORD)((LPBYTE)pCompStr + pCompStr-&gt;dwCompClauseOffset),
00751                     pCompStr-&gt;dwCompClauseLen)) <span class="keywordflow">break</span>;
00752 
00753         <span class="keywordflow">if</span> ( lpRead &amp;&amp;
00754             !<a class="code" href="../../d4/d1/ctxtinfo_8c.html#a13">CheckAttribute</a>((LPBYTE)lpRead, dwReadLen,
00755                     (LPBYTE)((LPBYTE)pCompStr + pCompStr-&gt;dwCompReadAttrOffset),
00756                     pCompStr-&gt;dwCompReadAttrLen,
00757                     (LPDWORD)((LPBYTE)pCompStr + pCompStr-&gt;dwCompReadClauseOffset),
00758                     pCompStr-&gt;dwCompReadClauseLen)) <span class="keywordflow">break</span>;
00759         fRet = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00760         <span class="keywordflow">break</span>;
00761 
00762     <span class="keywordflow">case</span> SCS_CHANGECLAUSE:
00763         <span class="keywordflow">if</span> ( lpComp &amp;&amp;
00764             !<a class="code" href="../../d4/d1/ctxtinfo_8c.html#a14">CheckClause</a>((LPDWORD)lpComp, dwCompLen,
00765                          (LPDWORD)((LPBYTE)pCompStr + pCompStr-&gt;dwCompClauseOffset),
00766                          pCompStr-&gt;dwCompClauseLen)) <span class="keywordflow">break</span>;
00767         <span class="keywordflow">if</span> ( lpRead &amp;&amp;
00768             !<a class="code" href="../../d4/d1/ctxtinfo_8c.html#a14">CheckClause</a>((LPDWORD)lpRead, dwReadLen,
00769                          (LPDWORD)((LPBYTE)pCompStr + pCompStr-&gt;dwCompReadClauseOffset),
00770                          pCompStr-&gt;dwCompReadClauseLen)) <span class="keywordflow">break</span>;
00771         fRet = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00772         <span class="keywordflow">break</span>;
00773 
00774     <span class="keywordflow">case</span> SCS_SETRECONVERTSTRING:
00775     <span class="keywordflow">case</span> SCS_QUERYRECONVERTSTRING:
00776         <span class="keywordflow">if</span> (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwSCSCaps &amp; SCS_CAP_SETRECONVERTSTRING) {
00777             fRet = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00778         }
00779         <span class="keywordflow">break</span>;
00780 
00781     <span class="keywordflow">default</span>:
00782         <span class="keywordflow">break</span>;
00783     }
00784 
00785     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a>(pInputContext-&gt;hCompStr);
00786     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
00787 
00788 callime_scs:
00789 
00790     <span class="keywordflow">if</span> (fRet) {
00791         fRet = (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o27">ImeSetCompositionString</a>)(hImc, dwIndex,
00792                                     lpComp, dwCompLen, lpRead, dwReadLen);
00793     }
00794 
00795     <span class="comment">/*</span>
00796 <span class="comment">     * Check if we need ANSI/Unicode back conversion</span>
00797 <span class="comment">     */</span>
00798     <span class="keywordflow">if</span> (fNeedAWConversion) {
00799         LPBYTE lpCompBufBack = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, lpReadBufBack = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00800         <span class="comment">/*</span>
00801 <span class="comment">         * A/W back conversion needed.</span>
00802 <span class="comment">         */</span>
00803         <span class="keywordflow">switch</span> (dwIndex) {
00804         <span class="keywordflow">case</span> SCS_QUERYRECONVERTSTRING:
00805             <span class="keywordflow">if</span> (lpOrgComp &amp;&amp;
00806                 (lpCompBufBack = <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a18">InternalSCS_RECONVERTSTRING</a>((LPRECONVERTSTRING)lpComp, dwCompLen,
00807                                     (LPRECONVERTSTRING *)&amp;lpNewComp, &amp;dwNewCompLen,
00808                                     !fAnsi, <a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi)))) {
00809                 RtlCopyMemory(lpOrgComp, lpNewComp, dwNewCompLen);
00810             }
00811             <span class="keywordflow">if</span> (lpOrgRead &amp;&amp;
00812                 (lpReadBufBack = <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a18">InternalSCS_RECONVERTSTRING</a>(
00813                                     (LPRECONVERTSTRING)lpRead, dwReadLen,
00814                                     (LPRECONVERTSTRING *)&amp;lpNewRead, &amp;dwNewReadLen,
00815                                     !fAnsi, <a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi)))) {
00816                 RtlCopyMemory(lpOrgRead, lpNewRead, dwNewReadLen);
00817             }
00818         }
00819         <span class="keywordflow">if</span> (lpCompBufBack != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00820             LocalFree(lpCompBufBack);
00821         <span class="keywordflow">if</span> (lpReadBufBack != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00822             LocalFree(lpReadBufBack);
00823     }
00824 
00825     <span class="keywordflow">if</span> (lpCompBuf != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00826         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpCompBuf);
00827     <span class="keywordflow">if</span> (lpReadBuf != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00828         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpReadBuf);
00829 
00830     <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00831 
00832     <span class="keywordflow">return</span> fRet;
00833 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a87" doxytag="immcli.h::InquireIme" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL InquireIme           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pImeDpi</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/immime_8c-source.html#l00040">40</a> of file <a class="el" href="../../d7/d9/immime_8c-source.html">immime.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00071">tagIMEDPI::dwCodePage</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00068">tagIMEDPI::hInst</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00067">IM_UI_CLASS_SIZE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00182">IMECodePage</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o3">tagIMEDPI::_tagImeFunctions::ImeInquire</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07799">NtUserGetThreadState()</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02827">TIF_16BIT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d0/d0/immuser_8h-source.html#l00072">tagIMEDPI::wszUIClass</a>.
<p>
Referenced by <a class="el" href="../../d7/d9/immime_8c-source.html#l00131">LoadIME()</a>.
<p>
<pre class="fragment"><div>00042 {
00043     WNDCLASS    wc;
00044     <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>        ClassName[<a class="code" href="../../d8/d0/immstruc_8h.html#a24">IM_UI_CLASS_SIZE</a> * <span class="keyword">sizeof</span>(WCHAR)];
00045     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       dwSystemInfoFlags;
00046     PIMEINFO    pImeInfo = &amp;pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>;
00047 
00048     dwSystemInfoFlags = (<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a287">NtUserGetThreadState</a>(UserThreadStateIsWinlogonThread))
00049                       ? IME_SYSINFO_WINLOGON : 0;
00050 
00051     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;dwTIFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a796">TIF_16BIT</a>)
00052         dwSystemInfoFlags |= IME_SYSINFO_WOW16;
00053 
00054     (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o3">ImeInquire</a>.w)(pImeInfo, (PVOID)ClassName, dwSystemInfoFlags);
00055 
00056     <span class="comment">/*</span>
00057 <span class="comment">     * parameter checking for each fields.</span>
00058 <span class="comment">     */</span>
00059     <span class="keywordflow">if</span> (pImeInfo-&gt;dwPrivateDataSize == 0)
00060         pImeInfo-&gt;dwPrivateDataSize = <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>);
00061 
00062     <span class="keywordflow">if</span> (pImeInfo-&gt;fdwProperty &amp; ~(IME_PROP_ALL)) {
00063         RIPMSG0(RIP_WARNING, <span class="stringliteral">"wrong property"</span>);
00064         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00065     }
00066 
00067     <span class="keywordflow">if</span> (pImeInfo-&gt;fdwConversionCaps &amp; ~(IME_CMODE_ALL)) {
00068         RIPMSG0(RIP_WARNING, <span class="stringliteral">"wrong conversion capabilities"</span>);
00069         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00070     }
00071 
00072     <span class="keywordflow">if</span> (pImeInfo-&gt;fdwSentenceCaps &amp; ~(IME_SMODE_ALL)) {
00073         RIPMSG0(RIP_WARNING, <span class="stringliteral">"wrong sentence capabilities"</span>);
00074         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00075     }
00076 
00077     <span class="keywordflow">if</span> (pImeInfo-&gt;fdwUICaps &amp; ~(UI_CAP_ALL)) {
00078         RIPMSG0(RIP_WARNING, <span class="stringliteral">"wrong UI capabilities"</span>);
00079         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00080     }
00081 
00082     <span class="keywordflow">if</span> (pImeInfo-&gt;fdwSCSCaps &amp; ~(SCS_CAP_ALL)) {
00083         RIPMSG0(RIP_WARNING, <span class="stringliteral">"wrong set comp string capabilities"</span>);
00084         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00085     }
00086 
00087     <span class="keywordflow">if</span> (pImeInfo-&gt;fdwSelectCaps &amp; ~(SELECT_CAP_ALL)) {
00088         RIPMSG0(RIP_WARNING, <span class="stringliteral">"wrong select capabilities"</span>);
00089         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00090     }
00091 
00092     <span class="keywordflow">if</span> (!(pImeInfo-&gt;fdwProperty &amp; IME_PROP_UNICODE)) {
00093 
00094         <span class="comment">/*</span>
00095 <span class="comment">         * This is ANSI IME. Ensure that it is usable under current system</span>
00096 <span class="comment">         * codepage.</span>
00097 <span class="comment">         */</span>
00098         <span class="keywordflow">if</span> (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o4">dwCodePage</a> != GetACP() &amp;&amp; pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o4">dwCodePage</a> != CP_ACP) {
00099             <span class="comment">// Note: in the future, if possible, these reference to dwCodepage</span>
00100             <span class="comment">// should be IMECodePage()...</span>
00101             RIPMSG1(RIP_WARNING, <span class="stringliteral">"incompatible codepage(%d) for ANSI IME"</span>, pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o4">dwCodePage</a>);
00102             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00103         }
00104 
00105         <span class="comment">/*</span>
00106 <span class="comment">         * ANSI -&gt; Unicode Class name.</span>
00107 <span class="comment">         */</span>
00108         MultiByteToWideChar(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00109                             (DWORD)MB_PRECOMPOSED,
00110                             (LPSTR)ClassName,               <span class="comment">// src</span>
00111                             (INT)-1,
00112                             pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o5">wszUIClass</a>,            <span class="comment">// dest</span>
00113                             IM_UI_CLASS_SIZE);
00114     } <span class="keywordflow">else</span> {
00115         RtlCopyMemory(pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o5">wszUIClass</a>, ClassName, <span class="keyword">sizeof</span>(ClassName));
00116     }
00117     pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o5">wszUIClass</a>[<a class="code" href="../../d8/d0/immstruc_8h.html#a24">IM_UI_CLASS_SIZE</a>-1] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00118 
00119     <span class="keywordflow">if</span> (!GetClassInfoW((HINSTANCE)pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o1">hInst</a>, pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o5">wszUIClass</a>, &amp;wc)) {
00120         RIPMSG1(RIP_WARNING, <span class="stringliteral">"UI class (%ws) not found in this IME"</span>, pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o5">wszUIClass</a>);
00121         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00122     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (wc.cbWndExtra &lt; <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) * 2) {
00123         RIPMSG0(RIP_WARNING, <span class="stringliteral">"UI class cbWndExtra problem"</span>);
00124         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00125     }
00126 
00127     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00128 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a79" doxytag="immcli.h::InternalGetCandidateListAtoW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InternalGetCandidateListAtoW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCANDIDATELIST&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCandListA</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCANDIDATELIST&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCandListW</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufLen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCodePage</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02885">2885</a> of file <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html">ctxtinfo.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00160">DWORD_ALIGN</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00879">ImmGetCandidateListCountWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01014">ImmGetCandidateListWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01964">ImmGetConversionListW()</a>, and <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01173">ImmGetGuideLineWorker()</a>.
<p>
<pre class="fragment"><div>02890 {
02891     LPWSTR lpCandStrW;
02892     LPSTR  lpCandStrA;
02893     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>    i, j;
02894     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>  dwCandListLen;
02895 
02896     dwCandListLen = <span class="keyword">sizeof</span>(CANDIDATELIST);
02897 
02898     <span class="comment">/*</span>
02899 <span class="comment">     * CANDIDATELIST has already contained the dwOffset[0]</span>
02900 <span class="comment">     */</span>
02901     <span class="keywordflow">if</span> (lpCandListA-&gt;dwCount &gt; 0)
02902         dwCandListLen += <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) * (lpCandListA-&gt;dwCount - 1);
02903 
02904     <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)lpCandListA-&gt;dwCount; i++) {
02905 
02906         lpCandStrA = (LPSTR)((LPBYTE)lpCandListA + lpCandListA-&gt;dwOffset[i]);
02907 
02908         j = MultiByteToWideChar(dwCodePage,
02909                                 (DWORD)MB_PRECOMPOSED,
02910                                 lpCandStrA,
02911                                 -1,
02912                                 (LPWSTR)NULL,
02913                                 0);
02914 
02915         dwCandListLen += (j * <span class="keyword">sizeof</span>(WCHAR));
02916     }
02917 
02918     dwCandListLen = <a class="code" href="../../d4/d0/immcli_8h.html#a18">DWORD_ALIGN</a>(dwCandListLen);
02919 
02920     <span class="keywordflow">if</span> (dwBufLen == 0)
02921         <span class="keywordflow">return</span> dwCandListLen;
02922 
02923     <span class="keywordflow">if</span> (dwBufLen &lt; dwCandListLen) {
02924         RIPMSG0(RIP_WARNING, <span class="stringliteral">"InternalGetCandidateListAtoW: dwBufLen too small."</span>);
02925         <span class="keywordflow">return</span> 0;
02926     }
02927 
02928     lpCandListW-&gt;dwSize = dwBufLen;
02929     lpCandListW-&gt;dwStyle = lpCandListA-&gt;dwStyle;
02930     lpCandListW-&gt;dwCount = lpCandListA-&gt;dwCount;
02931     lpCandListW-&gt;dwSelection = lpCandListA-&gt;dwSelection;
02932     lpCandListW-&gt;dwPageStart = lpCandListA-&gt;dwPageStart;
02933     lpCandListW-&gt;dwPageSize = lpCandListA-&gt;dwPageSize;
02934     lpCandListW-&gt;dwOffset[0] = <span class="keyword">sizeof</span>(CANDIDATELIST);
02935     <span class="keywordflow">if</span> (lpCandListW-&gt;dwCount &gt; 0)
02936         lpCandListW-&gt;dwOffset[0] += <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) * (lpCandListW-&gt;dwCount - 1);
02937 
02938     dwCandListLen = dwBufLen - lpCandListW-&gt;dwOffset[0];
02939 
02940     <span class="keywordflow">for</span>  (i = 0; i &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)lpCandListW-&gt;dwCount; i++) {
02941 
02942         lpCandStrA = (LPSTR) ((LPBYTE)lpCandListA + lpCandListA-&gt;dwOffset[i]);
02943         lpCandStrW = (LPWSTR)((LPBYTE)lpCandListW + lpCandListW-&gt;dwOffset[i]);
02944 
02945         j = MultiByteToWideChar(dwCodePage,
02946                                 (DWORD)MB_PRECOMPOSED,
02947                                 lpCandStrA,
02948                                 -1,
02949                                 lpCandStrW,
02950                                 (INT)dwCandListLen/<span class="keyword">sizeof</span>(WCHAR));
02951 
02952         dwCandListLen -= (j * <span class="keyword">sizeof</span>(WCHAR));
02953 
02954         <span class="keywordflow">if</span> (i &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)lpCandListW-&gt;dwCount - 1)
02955             lpCandListW-&gt;dwOffset[i+1] = lpCandListW-&gt;dwOffset[i] + j * <span class="keyword">sizeof</span>(WCHAR);
02956     }
02957 
02958     <span class="keywordflow">return</span> dwBufLen;
02959 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a80" doxytag="immcli.h::InternalGetCandidateListWtoA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InternalGetCandidateListWtoA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCANDIDATELIST&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCandListW</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCANDIDATELIST&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCandListA</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufLen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCodePage</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02962">2962</a> of file <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html">ctxtinfo.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00160">DWORD_ALIGN</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00879">ImmGetCandidateListCountWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01014">ImmGetCandidateListWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01841">ImmGetConversionListA()</a>, and <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01173">ImmGetGuideLineWorker()</a>.
<p>
<pre class="fragment"><div>02967 {
02968     LPWSTR lpCandStrW;
02969     LPSTR  lpCandStrA;
02970     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>    i, j;
02971     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>  dwCandListLen;
02972     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>   bUDC;
02973 
02974     dwCandListLen = <span class="keyword">sizeof</span>(CANDIDATELIST);
02975 
02976     <span class="comment">/*</span>
02977 <span class="comment">     * CANDIDATELIST has already contained the dwOffset[0]</span>
02978 <span class="comment">     */</span>
02979     <span class="keywordflow">if</span> (lpCandListW-&gt;dwCount &gt; 0)
02980         dwCandListLen += <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) * (lpCandListW-&gt;dwCount - 1);
02981 
02982     <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)lpCandListW-&gt;dwCount; i++) {
02983 
02984         lpCandStrW = (LPWSTR)((LPBYTE)lpCandListW + lpCandListW-&gt;dwOffset[i]);
02985 
02986         j = WideCharToMultiByte(dwCodePage,
02987                                 (DWORD)0,
02988                                 lpCandStrW,
02989                                 -1,
02990                                 (LPSTR)NULL,
02991                                 (INT)0,
02992                                 (LPSTR)NULL,
02993                                 (LPBOOL)&amp;bUDC);
02994 
02995         dwCandListLen += (j * <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>));
02996     }
02997 
02998     dwCandListLen = <a class="code" href="../../d4/d0/immcli_8h.html#a18">DWORD_ALIGN</a>(dwCandListLen);
02999 
03000     <span class="keywordflow">if</span> (dwBufLen == 0)
03001         <span class="keywordflow">return</span> dwCandListLen;
03002 
03003     <span class="keywordflow">if</span> (dwBufLen &lt; dwCandListLen) {
03004         RIPMSG0(RIP_WARNING, <span class="stringliteral">"InternalGetCandidateListWtoA: dwBufLen too small."</span>);
03005         <span class="keywordflow">return</span> 0;
03006     }
03007 
03008     lpCandListA-&gt;dwSize = dwBufLen;
03009     lpCandListA-&gt;dwStyle = lpCandListW-&gt;dwStyle;
03010     lpCandListA-&gt;dwCount = lpCandListW-&gt;dwCount;
03011     lpCandListA-&gt;dwSelection = lpCandListW-&gt;dwSelection;
03012     lpCandListA-&gt;dwPageStart = lpCandListW-&gt;dwPageStart;
03013     lpCandListA-&gt;dwPageSize = lpCandListW-&gt;dwPageSize;
03014     lpCandListA-&gt;dwOffset[0] = <span class="keyword">sizeof</span>(CANDIDATELIST);
03015     <span class="keywordflow">if</span> (lpCandListA-&gt;dwCount &gt; 0)
03016         lpCandListA-&gt;dwOffset[0] += <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) * (lpCandListA-&gt;dwCount - 1);
03017 
03018     dwCandListLen = dwBufLen - lpCandListA-&gt;dwOffset[0];
03019 
03020     <span class="keywordflow">for</span>  (i = 0; i &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)lpCandListA-&gt;dwCount; i++) {
03021 
03022         lpCandStrA = (LPSTR) ((LPBYTE)lpCandListA + lpCandListA-&gt;dwOffset[i]);
03023         lpCandStrW = (LPWSTR)((LPBYTE)lpCandListW + lpCandListW-&gt;dwOffset[i]);
03024 
03025         j = WideCharToMultiByte(dwCodePage,
03026                                 (DWORD)0,
03027                                 lpCandStrW,
03028                                 -1,
03029                                 (LPSTR)lpCandStrA,
03030                                 (INT)dwCandListLen,
03031                                 (LPSTR)NULL,
03032                                 (LPBOOL)&amp;bUDC);
03033 
03034         dwCandListLen -= (j * <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>));
03035 
03036         <span class="keywordflow">if</span> (i &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)lpCandListA-&gt;dwCount - 1)
03037             lpCandListA-&gt;dwOffset[i+1] = lpCandListA-&gt;dwOffset[i] + j * <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>);
03038     }
03039 
03040     <span class="keywordflow">return</span> dwBufLen;
03041 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a77" doxytag="immcli.h::InternalGetCompositionStringA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG InternalGetCompositionStringA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCOMPOSITIONSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCompStr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufLen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsiImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCodePage</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00036">ImmGetCompositionStringA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02339">InternalGetCompositionStringA()</a>, and <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02619">InternalGetCompositionStringW()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a78" doxytag="immcli.h::InternalGetCompositionStringW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LONG InternalGetCompositionStringW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCOMPOSITIONSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCompStr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufLen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsiImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCodePage</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l00099">ImmGetCompositionStringW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02339">InternalGetCompositionStringA()</a>, and <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02619">InternalGetCompositionStringW()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a95" doxytag="immcli.h::InternalImmLockIMC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PINPUTCONTEXT InternalImmLockIMC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fCanCallImeSelect</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00303">303</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d0/d0/immuser_8h-source.html#l00025">tagCLIENTIMC::cLockObj</a>, <a class="el" href="../../d4/d1/userk_8h.html#a2030">CreateInputContext()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00034">EnterImcCrit</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04502">GetKeyboardLayout()</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00024">tagCLIENTIMC::hInputContext</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d8/d0/immstruc_8h.html#a74a50">InputContextDefaultImeWindow</a>, <a class="el" href="../../d8/d0/immstruc_8h.html#a74a49">InputContextThread</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00035">LeaveImcCrit</a>, <a class="el" href="../../d9/d5/ntuser_2client_2globals_8h-source.html#l00090">LHND</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l12674">NtUserQueryInputContext()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, and <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>.
<p>
<pre class="fragment"><div>00306 {
00307     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>    pClientImc;
00308     PINPUTCONTEXT pInputContext;
00309     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>         dwImcThreadId;
00310 
00311     <span class="keywordflow">if</span> ((pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hImc)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00312         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00313 
00314     <a class="code" href="../../d9/d0/immuser_8h.html#a2">EnterImcCrit</a>(pClientImc);
00315 
00316     <span class="keywordflow">if</span> (pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00317         <span class="comment">/*</span>
00318 <span class="comment">         * If the owner thread of this hImc does not have</span>
00319 <span class="comment">         * default IME window, don't bother to create the</span>
00320 <span class="comment">         * INPUTCONTEXT. It could happen when some other</span>
00321 <span class="comment">         * thread which call ImmGetContext() to retrieve</span>
00322 <span class="comment">         * the associate hImc before the default IME window</span>
00323 <span class="comment">         * is created.</span>
00324 <span class="comment">         */</span>
00325         <span class="keywordflow">if</span> ((HWND)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a389">NtUserQueryInputContext</a>(hImc,
00326                 InputContextDefaultImeWindow) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00327             <a class="code" href="../../d9/d0/immuser_8h.html#a3">LeaveImcCrit</a>(pClientImc);
00328             <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00329             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00330         }
00331 
00332         <span class="comment">/*</span>
00333 <span class="comment">         * This is a delay creation of INPUTCONTEXT structure. Create</span>
00334 <span class="comment">         * it now for this hImc.</span>
00335 <span class="comment">         */</span>
00336         pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a> = LocalAlloc(LHND, <span class="keyword">sizeof</span>(INPUTCONTEXT));
00337 
00338         <span class="keywordflow">if</span> (pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00339             <a class="code" href="../../d9/d0/immuser_8h.html#a3">LeaveImcCrit</a>(pClientImc);
00340             <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00341             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00342         }
00343 
00344         dwImcThreadId = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a389">NtUserQueryInputContext</a>(hImc, InputContextThread);
00345 
00346         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a2030">CreateInputContext</a>(hImc, <a class="code" href="../../d3/d8/client_8c.html#a154">GetKeyboardLayout</a>(dwImcThreadId), fCanCallImeSelect)) {
00347             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmLockIMC: CreateInputContext failed"</span>);
00348             LocalFree(pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a>);
00349             pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00350             <a class="code" href="../../d9/d0/immuser_8h.html#a3">LeaveImcCrit</a>(pClientImc);
00351             <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00352             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00353         }
00354     }
00355 
00356     <a class="code" href="../../d9/d0/immuser_8h.html#a3">LeaveImcCrit</a>(pClientImc);
00357 
00358     pInputContext = (PINPUTCONTEXT)LocalLock(pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o0">hInputContext</a>);
00359 
00360     <span class="comment">/*</span>
00361 <span class="comment">     * Increment lock count so that the ImmUnlockClientImc() won't</span>
00362 <span class="comment">     * free up the pClientImc-&gt;hInputContext.</span>
00363 <span class="comment">     */</span>
00364     InterlockedIncrement(&amp;pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o1">cLockObj</a>);
00365 
00366     <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
00367 
00368     <span class="keywordflow">return</span> pInputContext;
00369 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a117" doxytag="immcli.h::IsAnsiIMC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> __inline int IsAnsiIMC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hIMC</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00456">456</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00033">IMCF_UNICODE</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/immcli_8h-source.html#l00166">TestICF</a>.
<p>
Referenced by <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00759">ImmGetImeMenuItemsWorker()</a>.
<p>
<pre class="fragment"><div>00457 {
00458     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bAnsi;
00459 
00460     <span class="comment">// get ansi mode of origin IMC</span>
00461     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a> pClientIMC = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hIMC);
00462     <span class="keywordflow">if</span> (pClientIMC == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00463         <span class="keywordflow">return</span> -1;
00464     }
00465     bAnsi = !<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientIMC, IMCF_UNICODE);
00466     <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientIMC);
00467     <span class="keywordflow">return</span> bAnsi;
00468 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a83" doxytag="immcli.h::LFontAtoLFontW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID LFontAtoLFontW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPLOGFONTA&nbsp;</td>
          <td class="mdname" nowrap> <em>lfFontA</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPLOGFONTW&nbsp;</td>
          <td class="mdname" nowrap> <em>lfFontW</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03113">3113</a> of file <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html">ctxtinfo.c</a>.
<p>
References <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01643">ImmGetCompositionFontW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03349">ImmRequestMessageWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01694">ImmSetCompositionFontA()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01328">MySetCompFont()</a>, and <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>.
<p>
<pre class="fragment"><div>03116 {
03117     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> i;
03118 
03119     RtlCopyMemory(lpLogFontW, lpLogFontA, <span class="keyword">sizeof</span>(LOGFONTA)-LF_FACESIZE);
03120 
03121     i = MultiByteToWideChar(CP_ACP,     <span class="comment">// Note: font face name should use ACP for A/W conversion.</span>
03122                             MB_PRECOMPOSED,
03123                             lpLogFontA-&gt;lfFaceName,
03124                             <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpLogFontA-&gt;lfFaceName),
03125                             lpLogFontW-&gt;lfFaceName,
03126                             LF_FACESIZE);
03127 
03128     lpLogFontW-&gt;lfFaceName[i] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
03129 
03130     <span class="keywordflow">return</span>;
03131 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a84" doxytag="immcli.h::LFontWtoLFontA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID LFontWtoLFontA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPLOGFONTW&nbsp;</td>
          <td class="mdname" nowrap> <em>lfFontW</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPLOGFONTA&nbsp;</td>
          <td class="mdname" nowrap> <em>lfFontA</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03134">3134</a> of file <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html">ctxtinfo.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01583">ImmGetCompositionFontA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03349">ImmRequestMessageWorker()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01764">ImmSetCompositionFontW()</a>, and <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">SelectInputContext()</a>.
<p>
<pre class="fragment"><div>03137 {
03138     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>  i;
03139     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bUDC;
03140 
03141     RtlCopyMemory(lpLogFontA, lpLogFontW, <span class="keyword">sizeof</span>(LOGFONTA)-LF_FACESIZE);
03142 
03143     i = WideCharToMultiByte(CP_ACP,     <span class="comment">// Note: font face name should use ACP for A/W conversion.</span>
03144                             0,
03145                             lpLogFontW-&gt;lfFaceName,
03146                             wcslen(lpLogFontW-&gt;lfFaceName),
03147                             lpLogFontA-&gt;lfFaceName,
03148                             LF_FACESIZE,
03149                             (LPSTR)NULL,
03150                             &amp;bUDC);
03151 
03152     lpLogFontA-&gt;lfFaceName[i] = <span class="charliteral">'\0'</span>;
03153 
03154     <span class="keywordflow">return</span>;
03155 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a88" doxytag="immcli.h::LoadIME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL LoadIME           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d8/structtagIMEINFOEX.html">PIMEINFOEX</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>piiex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pImeDpi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/immime_8c-source.html#l00131">131</a> of file <a class="el" href="../../d7/d9/immime_8c-source.html">immime.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00105">tagIMEINFOEX::fLoadFlag</a>, <a class="el" href="../../d6/d0/immime_8c.html#a1">GET_IMEPROC</a>, <a class="el" href="../../d6/d0/immime_8c.html#a0">GET_IMEPROCT</a>, <a class="el" href="../../d4/d0/layime_8c-source.html#l00095">GetSystemPathName()</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00068">tagIMEDPI::hInst</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00062">IMEF_LOADED</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00061">IMEF_LOADERROR</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00060">IMEF_NONLOAD</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00092">tagIMEDPI::_tagImeFunctions::ImeGetImeMenuItems</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00101">tagIMEINFOEX::ImeInfo</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00040">InquireIme()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00065">MAX_PATH</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l12800">NtUserSetImeInfoEx()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00109">tagIMEINFOEX::wszImeFile</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00102">tagIMEINFOEX::wszUIClass</a>, and <a class="el" href="../../d0/d0/immuser_8h-source.html#l00072">tagIMEDPI::wszUIClass</a>.
<p>
Referenced by <a class="el" href="../../d7/d9/immime_8c-source.html#l00234">LoadImeDpi()</a>.
<p>
<pre class="fragment"><div>00134 {
00135     WCHAR wszImeFile[<a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>];
00136     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>  fSuccess;
00137 
00138     <a class="code" href="../../d3/d1/layime_8c.html#a17">GetSystemPathName</a>(wszImeFile, piiex-&gt;<a class="code" href="../../d0/d8/structtagIMEINFOEX.html#o9">wszImeFile</a>, MAX_PATH);
00139 
00140     pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o1">hInst</a> = LoadLibraryW(wszImeFile);
00141 
00142     <span class="keywordflow">if</span> (!pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o1">hInst</a>) {
00143         RIPMSG1(RIP_WARNING, <span class="stringliteral">"LoadIME: LoadLibraryW(%ws) failed"</span>, wszImeFile);
00144         <span class="keywordflow">goto</span> LoadIME_ErrOut;
00145     }
00146 
00147 <span class="preprocessor">#define GET_IMEPROCT(x) \</span>
00148 <span class="preprocessor">    if (!(pImeDpi-&gt;pfn.##x.t = (PVOID) GetProcAddress(pImeDpi-&gt;hInst, #x))) { \</span>
00149 <span class="preprocessor">        RIPMSG1(RIP_WARNING, "LoadIME: " #x " not supported in %ws", wszImeFile);           \</span>
00150 <span class="preprocessor">        goto LoadIME_ErrOut; }</span>
00151 <span class="preprocessor"></span>
00152 <span class="preprocessor">#define GET_IMEPROC(x) \</span>
00153 <span class="preprocessor">    if (!(pImeDpi-&gt;pfn.##x = (PVOID) GetProcAddress(pImeDpi-&gt;hInst, #x))) {   \</span>
00154 <span class="preprocessor">        RIPMSG1(RIP_WARNING, "LoadIME: " #x " not supported in %ws", wszImeFile);           \</span>
00155 <span class="preprocessor">        goto LoadIME_ErrOut; }</span>
00156 <span class="preprocessor"></span>
00157     <a class="code" href="../../d6/d0/immime_8c.html#a0">GET_IMEPROCT</a>(ImeInquire);
00158     <a class="code" href="../../d6/d0/immime_8c.html#a0">GET_IMEPROCT</a>(ImeConversionList);
00159     <a class="code" href="../../d6/d0/immime_8c.html#a0">GET_IMEPROCT</a>(ImeRegisterWord);
00160     <a class="code" href="../../d6/d0/immime_8c.html#a0">GET_IMEPROCT</a>(ImeUnregisterWord);
00161     <a class="code" href="../../d6/d0/immime_8c.html#a0">GET_IMEPROCT</a>(ImeGetRegisterWordStyle);
00162     <a class="code" href="../../d6/d0/immime_8c.html#a0">GET_IMEPROCT</a>(ImeEnumRegisterWord);
00163     <a class="code" href="../../d6/d0/immime_8c.html#a1">GET_IMEPROC</a> (ImeConfigure);
00164     <a class="code" href="../../d6/d0/immime_8c.html#a1">GET_IMEPROC</a> (ImeDestroy);
00165     <a class="code" href="../../d6/d0/immime_8c.html#a1">GET_IMEPROC</a> (ImeEscape);
00166     <a class="code" href="../../d6/d0/immime_8c.html#a1">GET_IMEPROC</a> (ImeProcessKey);
00167     <a class="code" href="../../d6/d0/immime_8c.html#a1">GET_IMEPROC</a> (ImeSelect);
00168     <a class="code" href="../../d6/d0/immime_8c.html#a1">GET_IMEPROC</a> (ImeSetActiveContext);
00169     <a class="code" href="../../d6/d0/immime_8c.html#a1">GET_IMEPROC</a> (ImeToAsciiEx);
00170     <a class="code" href="../../d6/d0/immime_8c.html#a1">GET_IMEPROC</a> (NotifyIME);
00171     <a class="code" href="../../d6/d0/immime_8c.html#a1">GET_IMEPROC</a> (ImeSetCompositionString);
00172 
00173     <span class="comment">// 4.0 IMEs don't have this entry. could be NULL.</span>
00174     pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o28">ImeGetImeMenuItems</a> = (PVOID)GetProcAddress(pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o1">hInst</a>, <span class="stringliteral">"ImeGetImeMenuItems"</span>);
00175 
00176 <span class="preprocessor">#undef GET_IMEPROCT</span>
00177 <span class="preprocessor"></span><span class="preprocessor">#undef GET_IMEPROC</span>
00178 <span class="preprocessor"></span>
00179     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/immime_8c.html#a7">InquireIme</a>(pImeDpi)) {
00180         RIPMSG0(RIP_WARNING, <span class="stringliteral">"LoadIME: InquireIme failed"</span>);
00181 LoadIME_ErrOut:
00182         FreeLibrary(pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o1">hInst</a>);
00183         pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o1">hInst</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00184         fSuccess = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00185     }
00186     <span class="keywordflow">else</span> {
00187         fSuccess = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00188     }
00189 
00190     <span class="comment">/*</span>
00191 <span class="comment">     * Update kernel side IMEINFOEX for this keyboard layout if</span>
00192 <span class="comment">     * this is its first loading.</span>
00193 <span class="comment">     */</span>
00194     <span class="keywordflow">if</span> (piiex-&gt;<a class="code" href="../../d0/d8/structtagIMEINFOEX.html#o5">fLoadFlag</a> == <a class="code" href="../../d8/d0/immstruc_8h.html#a18">IMEF_NONLOAD</a>) {
00195         <span class="keywordflow">if</span> (fSuccess) {
00196             RtlCopyMemory((PBYTE)&amp;piiex-&gt;<a class="code" href="../../d0/d8/structtagIMEINFOEX.html#o1">ImeInfo</a>,
00197                           (PBYTE)&amp;pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>, <span class="keyword">sizeof</span>(IMEINFO));
00198             RtlCopyMemory((PBYTE)piiex-&gt;<a class="code" href="../../d0/d8/structtagIMEINFOEX.html#o2">wszUIClass</a>,
00199                           (PBYTE)pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o5">wszUIClass</a>, <span class="keyword">sizeof</span>(pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o5">wszUIClass</a>));
00200             piiex-&gt;<a class="code" href="../../d0/d8/structtagIMEINFOEX.html#o5">fLoadFlag</a> = <a class="code" href="../../d8/d0/immstruc_8h.html#a20">IMEF_LOADED</a>;
00201         }
00202         <span class="keywordflow">else</span> {
00203             piiex-&gt;<a class="code" href="../../d0/d8/structtagIMEINFOEX.html#o5">fLoadFlag</a> = <a class="code" href="../../d8/d0/immstruc_8h.html#a19">IMEF_LOADERROR</a>;
00204         }
00205         <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a392">NtUserSetImeInfoEx</a>(piiex);
00206     }
00207 
00208     <span class="keywordflow">return</span> fSuccess;
00209 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a90" doxytag="immcli.h::LoadImeDpi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> LoadImeDpi           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fLock</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/immime_8c-source.html#l00234">234</a> of file <a class="el" href="../../d7/d9/immime_8c-source.html">immime.c</a>.
<p>
References <a class="el" href="../../d0/d0/immuser_8h-source.html#l00073">tagIMEDPI::cLock</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00071">tagIMEDPI::dwCodePage</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00074">tagIMEDPI::dwFlag</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00105">tagIMEINFOEX::fLoadFlag</a>, <a class="el" href="../../d3/d5/ntuser_2imm_2globals_8c-source.html#l00034">gcsImeDpi</a>, <a class="el" href="../../d3/d5/ntuser_2imm_2globals_8c-source.html#l00033">gpImeDpi</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00069">tagIMEDPI::hKL</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00064">IMEDPI_UNLOCKUNLOAD</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00061">IMEF_LOADERROR</a>, <a class="el" href="../../d8/d0/immstruc_8h.html#a75a52">ImeInfoExKeyboardLayout</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00769">ImmGetImeDpi()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00876">ImmGetImeInfoEx()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00131">LoadIME()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00067">tagIMEDPI::pNext</a>, and <a class="el" href="../../d7/d9/immime_8c-source.html#l00212">UnloadIME()</a>.
<p>
Referenced by <a class="el" href="../../d7/d9/immime_8c-source.html#l00327">FindOrLoadImeDpi()</a>, and <a class="el" href="../../d7/d9/immime_8c-source.html#l00346">ImmLoadIME()</a>.
<p>
<pre class="fragment"><div>00237 {
00238     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>        pImeDpi, pImeDpiT;
00239     <a class="code" href="../../d0/d8/structtagIMEINFOEX.html">IMEINFOEX</a>      iiex;
00240 
00241     <span class="comment">/*</span>
00242 <span class="comment">     * Query the IME information.</span>
00243 <span class="comment">     */</span>
00244     <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d0/immuser_8h.html#a47">ImmGetImeInfoEx</a>(&amp;iiex, ImeInfoExKeyboardLayout, &amp;hKL)) {
00245         RIPMSG1(RIP_WARNING, <span class="stringliteral">"LoadImeDpi: ImmGetImeInfoEx(%lx) failed"</span>, hKL);
00246         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00247     }
00248 
00249     <span class="comment">/*</span>
00250 <span class="comment">     * Win95 behaviour: If there was an IME load error for this layout,</span>
00251 <span class="comment">     * further attempt to load the same IME layout will be rejected.</span>
00252 <span class="comment">     */</span>
00253     <span class="keywordflow">if</span> (iiex.<a class="code" href="../../d0/d8/structtagIMEINFOEX.html#o5">fLoadFlag</a> == <a class="code" href="../../d8/d0/immstruc_8h.html#a19">IMEF_LOADERROR</a>)
00254         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00255 
00256     <span class="comment">/*</span>
00257 <span class="comment">     * Allocate a new IMEDPI for this layout.</span>
00258 <span class="comment">     */</span>
00259     pImeDpi = (<a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(HEAP_ZERO_MEMORY, <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d7/structtagIMEDPI.html">IMEDPI</a>));
00260     <span class="keywordflow">if</span> (pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00261         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00262 
00263     pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o2">hKL</a> = hKL;
00264 
00265     <span class="comment">// get code page of IME</span>
00266     {
00267         CHARSETINFO cs;
00268         <span class="keywordflow">if</span> (TranslateCharsetInfo((DWORD*)LOWORD(HandleToUlong(hKL)), &amp;cs, TCI_SRCLOCALE)) {
00269             pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o4">dwCodePage</a> = cs.ciACP;
00270         }
00271         <span class="keywordflow">else</span> {
00272             pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o4">dwCodePage</a> = CP_ACP;
00273         }
00274     }
00275 
00276     <span class="comment">/*</span>
00277 <span class="comment">     * Load up IME DLL.</span>
00278 <span class="comment">     */</span>
00279     <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d0/immime_8c.html#a8">LoadIME</a>(&amp;iiex, pImeDpi)) {
00280         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(pImeDpi);
00281         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00282     }
00283 
00284     <span class="comment">/*</span>
00285 <span class="comment">     * Link in the newly allocated entry.</span>
00286 <span class="comment">     */</span>
00287     RtlEnterCriticalSection(&amp;gcsImeDpi);
00288 
00289     pImeDpiT = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a30">ImmGetImeDpi</a>(hKL);
00290 
00291     <span class="keywordflow">if</span> (pImeDpiT == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00292         <span class="keywordflow">if</span> (fLock) {
00293             <span class="comment">/*</span>
00294 <span class="comment">             * Newly loaded with lock, will unload upon unlock.</span>
00295 <span class="comment">             */</span>
00296             pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o6">cLock</a> = 1;
00297             pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o7">dwFlag</a> |= <a class="code" href="../../d9/d0/immuser_8h.html#a5">IMEDPI_UNLOCKUNLOAD</a>;
00298         }
00299 
00300         <span class="comment">/*</span>
00301 <span class="comment">         * Update the global list for this new pImeDpi entry.</span>
00302 <span class="comment">         */</span>
00303         pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o0">pNext</a> = <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a7">gpImeDpi</a>;
00304         <a class="code" href="../../d2/d6/ntuser_2imm_2globals_8c.html#a7">gpImeDpi</a> = pImeDpi;
00305 
00306         RtlLeaveCriticalSection(&amp;gcsImeDpi);
00307     }
00308     <span class="keywordflow">else</span> {
00309 
00310         <span class="keywordflow">if</span> (!fLock) {
00311             pImeDpiT-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o7">dwFlag</a> &amp;= ~<a class="code" href="../../d9/d0/immuser_8h.html#a5">IMEDPI_UNLOCKUNLOAD</a>;
00312         }
00313 
00314         <span class="comment">/*</span>
00315 <span class="comment">         * The same IME has been loaded, discard this extra entry.</span>
00316 <span class="comment">         */</span>
00317         RtlLeaveCriticalSection(&amp;gcsImeDpi);
00318         <a class="code" href="../../d6/d0/immime_8c.html#a9">UnloadIME</a>(pImeDpi, FALSE);
00319         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(pImeDpi);
00320         pImeDpi = pImeDpiT;
00321     }
00322 
00323     <span class="keywordflow">return</span> pImeDpi;
00324 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a93" doxytag="immcli.h::LoadVersionInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL LoadVersionInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d8/structtagIMEINFOEX.html">PIMEINFOEX</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>piiex</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d0/layime_8c-source.html#l00305">305</a> of file <a class="el" href="../../d4/d0/layime_8c-source.html">layime.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00075">ARRAY_SIZE</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d1/layime_8c.html#a8">GET_PROC</a>, <a class="el" href="../../d4/d0/layime_8c-source.html#l00095">GetSystemPathName()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d4/d0/layime_8c-source.html#l00204">LoadFixVersionInfo()</a>, <a class="el" href="../../d4/d0/layime_8c-source.html#l00238">LoadVarVersionInfo()</a>, <a class="el" href="../../d4/d8/arcinst_8c-source.html#l00065">MAX_PATH</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d4/d0/layime_8c-source.html#l00016">VERSION_DLL</a>, and <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00109">tagIMEINFOEX::wszImeFile</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/layout_8c-source.html#l00266">ImmInstallIMEW()</a>, and <a class="el" href="../../d4/d0/layime_8c-source.html#l00038">ImmLoadLayout()</a>.
<p>
<pre class="fragment"><div>00307 {
00308     WCHAR   szPath[<a class="code" href="../../d3/d9/arcinst_8c.html#a6">MAX_PATH</a>];
00309     PWSTR   pszVersionBuffer;
00310     HANDLE  hVersion;
00311     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   dwVersionSize;
00312     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   dwHandle = 0;
00313     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fUnload, fReturn = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00314 
00315     hVersion = GetModuleHandle(VERSION_DLL);
00316     <span class="keywordflow">if</span> (hVersion != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00317         fUnload = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00318     }
00319     <span class="keywordflow">else</span> {
00320         hVersion = LoadLibrary(VERSION_DLL);
00321         <span class="keywordflow">if</span> (hVersion == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00322             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00323         }
00324         fUnload = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00325     }
00326 
00327 <span class="preprocessor">#define GET_PROC(x) \</span>
00328 <span class="preprocessor">    if (!(pfn##x = (PVOID) GetProcAddress(hVersion, VERSION_##x))) { \</span>
00329 <span class="preprocessor">        goto LoadVerInfoUnload; }</span>
00330 <span class="preprocessor"></span>
00331     <a class="code" href="../../d3/d1/layime_8c.html#a8">GET_PROC</a>(GetFileVersionInfoW);
00332     <a class="code" href="../../d3/d1/layime_8c.html#a8">GET_PROC</a>(GetFileVersionInfoSizeW);
00333     <a class="code" href="../../d3/d1/layime_8c.html#a8">GET_PROC</a>(VerQueryValueW);
00334 
00335 <span class="preprocessor">#undef GET_PROC</span>
00336 <span class="preprocessor"></span>
00337     <span class="comment">// szPath = fully qualified IME file name</span>
00338     <a class="code" href="../../d3/d1/layime_8c.html#a17">GetSystemPathName</a>(szPath, piiex-&gt;<a class="code" href="../../d0/d8/structtagIMEINFOEX.html#o9">wszImeFile</a>, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a2">ARRAY_SIZE</a>(szPath));
00339 
00340     dwVersionSize = (*pfnGetFileVersionInfoSizeW)(szPath, &amp;dwHandle);
00341 
00342     <span class="keywordflow">if</span> (dwVersionSize == 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>)
00343         <span class="keywordflow">goto</span> LoadVerInfoUnload;
00344 
00345     pszVersionBuffer = (PWSTR)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, dwVersionSize);
00346 
00347     <span class="keywordflow">if</span> (pszVersionBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)    <span class="comment">// can't get memory for version info, blow out</span>
00348         <span class="keywordflow">goto</span> LoadVerInfoUnload;
00349 
00350     <span class="keywordflow">if</span> (!(*pfnGetFileVersionInfoW)(szPath, dwHandle, dwVersionSize, pszVersionBuffer))
00351         <span class="keywordflow">goto</span> LoadVerInfoFree;
00352 
00353     <span class="comment">/*</span>
00354 <span class="comment">     * Get the fixed block version information.</span>
00355 <span class="comment">     */</span>
00356     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d1/layime_8c.html#a20">LoadFixVersionInfo</a>(piiex, pszVersionBuffer)) {
00357         <span class="comment">/*</span>
00358 <span class="comment">         * Get the variable block version information.</span>
00359 <span class="comment">         */</span>
00360         fReturn = <a class="code" href="../../d3/d1/layime_8c.html#a21">LoadVarVersionInfo</a>(piiex, pszVersionBuffer);
00361     }
00362 
00363 LoadVerInfoFree:
00364     <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>((HLOCAL)pszVersionBuffer);
00365 
00366 LoadVerInfoUnload:
00367     <span class="keywordflow">if</span> (fUnload)
00368         FreeLibrary(hVersion);
00369 
00370     <span class="keywordflow">return</span> fReturn;
00371 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a85" doxytag="immcli.h::MakeIMENotify" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL MakeIMENotify           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwAction</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwIndex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwValue</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>wParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPARAM&nbsp;</td>
          <td class="mdname" nowrap> <em>lParam</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03158">3158</a> of file <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html">ctxtinfo.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00152">GetInputContextThread</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04502">GetKeyboardLayout()</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00793">ImmLockImeDpi()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00090">tagIMEDPI::_tagImeFunctions::NotifyIME</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02266">ImmSetCandidateWindow()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01694">ImmSetCompositionFontA()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01764">ImmSetCompositionFontW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02185">ImmSetCompositionWindow()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01402">ImmSetConversionStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01525">ImmSetOpenStatus()</a>, and <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l02115">ImmSetStatusWindowPos()</a>.
<p>
<pre class="fragment"><div>03166 {
03167     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi;
03168     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>   dwThreadId;
03169 
03170 <span class="preprocessor">#ifdef LATER</span>
03171 <span class="preprocessor"></span>    <span class="comment">// implement MakeIMENotifyEvent() later</span>
03172 <span class="preprocessor">#endif</span>
03173 <span class="preprocessor"></span>
03174     <span class="keywordflow">if</span> (dwAction != 0 &amp;&amp; (dwThreadId = <a class="code" href="../../d4/d0/immcli_8h.html#a15">GetInputContextThread</a>(hImc)) != 0) {
03175 
03176         pImeDpi = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>(<a class="code" href="../../d3/d8/client_8c.html#a154">GetKeyboardLayout</a>(dwThreadId));
03177 
03178         <span class="keywordflow">if</span> (pImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
03179             (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o26">NotifyIME</a>)(hImc, dwAction, dwIndex, dwValue);
03180             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
03181         }
03182     }
03183 
03184     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; wParam != 0)
03185         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hWnd, WM_IME_NOTIFY, wParam, lParam);
03186 
03187     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
03188 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a94" doxytag="immcli.h::MakeStringFromRegFullInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPWSTR MakeStringFromRegFullInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PKEY_VALUE_FULL_INFORMATION&nbsp;</td>
          <td class="mdname" nowrap> <em>pKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap> <em>limit</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a106" doxytag="immcli.h::OpenRegApi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL OpenRegApi           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d0/structADVAPI__FN.html">ADVAPI_FN</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pfn</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00461">461</a> of file <a class="el" href="../../d6/d9/immhotky_8c-source.html">immhotky.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00452">GET</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00079">ADVAPI_FN::hModule</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/immhotky_8c-source.html#l00508">CliSaveImeHotKey()</a>.
<p>
<pre class="fragment"><div>00462 {
00463     pfn-&gt;<a class="code" href="../../d8/d0/structADVAPI__FN.html#o0">hModule</a> = LoadLibraryW(L<span class="stringliteral">"ADVAPI32.DLL"</span>);
00464 
00465     <span class="keywordflow">if</span> (pfn-&gt;<a class="code" href="../../d8/d0/structADVAPI__FN.html#o0">hModule</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00466         <a class="code" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(RegCreateKeyW);
00467         <a class="code" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(RegOpenKeyW);
00468         <a class="code" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(RegCloseKey);
00469         <a class="code" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(RegDeleteKeyW);
00470         <a class="code" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(RegCreateKeyExW);
00471         <a class="code" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(RegSetValueExW);
00472         <a class="code" href="../../d5/d0/immhotky_8c.html#a0">GET</a>(RegQueryValueExW);
00473 
00474         <span class="comment">//</span>
00475         <span class="comment">// Succeeded.</span>
00476         <span class="comment">//</span>
00477         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00478     }
00479 
00480     <span class="comment">//</span>
00481     <span class="comment">// Failed to open registry APIs.</span>
00482     <span class="comment">//</span>
00483     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00484 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a70" doxytag="immcli.h::SelectInputContext" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID SelectInputContext           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hSelKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hUnSelKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00837">837</a> of file <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html">w32/ntuser/imm/context.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00164">ClrICF</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00029">tagCLIENTIMC::dwCodePage</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00111">tagIMEMODESAVER::fdwConversion</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00113">tagIMEMODESAVER::fdwInit</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00112">tagIMEMODESAVER::fdwSentence</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00110">tagIMEMODESAVER::fOpen</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00436">GetImeModeSaver()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00015">IMCC_ALLOC_TOOLARGE</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00033">IMCF_UNICODE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00182">IMECodePage</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00087">tagIMEDPI::_tagImeFunctions::ImeSelect</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00059">ImmAssert</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00436">ImmCreateIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00454">ImmDestroyIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00505">ImmGetIMCCLockCount()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00540">ImmGetIMCCSize()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00471">ImmLockIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00793">ImmLockImeDpi()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00522">ImmReSizeIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00747">ImmUnlockClientImc()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00488">ImmUnlockIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00303">InternalImmLockIMC()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03113">LFontAtoLFontW()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l03134">LFontWtoLFontA()</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00538">RestorePrivateMode()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00520">SavePrivateMode()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00162">SetICF</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00166">TestICF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d7/d9/immime_8c-source.html#l00031">SelectContextProc()</a>.
<p>
<pre class="fragment"><div>00841 {
00842     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>            pSelImeDpi, pUnSelImeDpi;
00843     <a class="code" href="../../d3/d0/structtagCLIENTIMC.html">PCLIENTIMC</a>         pClientImc;
00844     PINPUTCONTEXT      pInputContext;
00845     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>              dwSelPriv = 0, dwUnSelPriv = 0, dwSize;
00846     HIMCC              hImcc;
00847     PCOMPOSITIONSTRING pCompStr;
00848     PCANDIDATEINFO     pCandInfo;
00849     PGUIDELINE         pGuideLine;
00850     BOOLEAN            fLogFontInited;
00851 
00852     TAGMSG3(DBGTAG_IMM, <span class="stringliteral">"SelectInputContext: called for sel=%08p unsel=%08p hImc=%08p"</span>,
00853             hSelKL, hUnSelKL, hImc);
00854 
00855     pClientImc = <a class="code" href="../../d9/d0/immuser_8h.html#a43">ImmLockClientImc</a>(hImc);
00856     <span class="keywordflow">if</span> (pClientImc == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00857         RIPMSG0(RIP_VERBOSE, <span class="stringliteral">"SelectInputContext: cannot lock client Imc. Bailing out."</span>);
00858         <span class="keywordflow">return</span>;
00859     }
00860 
00861     pSelImeDpi   = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>(hSelKL);
00862 
00863     <span class="keywordflow">if</span> (hSelKL != hUnSelKL) {
00864         <span class="comment">/*</span>
00865 <span class="comment">         * If those new sel and unsel do no match but</span>
00866 <span class="comment">         * somehow SelectInput is called, that means</span>
00867 <span class="comment">         * we should initialize the input contex again</span>
00868 <span class="comment">         * without dumping the old information.</span>
00869 <span class="comment">         */</span>
00870         pUnSelImeDpi = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>(hUnSelKL);
00871     } <span class="keywordflow">else</span> {
00872         pUnSelImeDpi = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00873     }
00874 
00875     <span class="keywordflow">if</span> (pSelImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00876         <span class="comment">/*</span>
00877 <span class="comment">         * According to private memory size of the two layout, we decide</span>
00878 <span class="comment">         * whether we nee to reallocate this memory block</span>
00879 <span class="comment">         */</span>
00880         dwSelPriv = pSelImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.dwPrivateDataSize;
00881 
00882         <span class="comment">/*</span>
00883 <span class="comment">         * Setup the code page of the newly selected IME.</span>
00884 <span class="comment">         */</span>
00885         pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o5">dwCodePage</a> = <a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pSelImeDpi);
00886     }
00887     <span class="keywordflow">else</span> {
00888         pClientImc-&gt;<a class="code" href="../../d3/d0/structtagCLIENTIMC.html#o5">dwCodePage</a> = CP_ACP;
00889     }
00890 
00891     <span class="keywordflow">if</span> (pUnSelImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00892         dwUnSelPriv = pUnSelImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.dwPrivateDataSize;
00893 
00894     dwSelPriv   = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(dwSelPriv,   <span class="keyword">sizeof</span>(UINT));
00895     dwUnSelPriv = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a>(dwUnSelPriv, <span class="keyword">sizeof</span>(UINT));
00896 
00897     <span class="comment">/*</span>
00898 <span class="comment">     * Unselect the input context.</span>
00899 <span class="comment">     */</span>
00900     <span class="keywordflow">if</span> (pUnSelImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00901         (*pUnSelImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o23">ImeSelect</a>)(hImc, <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00902 
00903     <span class="comment">/*</span>
00904 <span class="comment">     * Reinitialize the client side input context for the selected layout.</span>
00905 <span class="comment">     */</span>
00906     <span class="keywordflow">if</span> ((pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a11">InternalImmLockIMC</a>(hImc, FALSE)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00907         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fdwOldConversion = pInputContext-&gt;fdwConversion;
00908         <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fdwOldSentence = pInputContext-&gt;fdwSentence;
00909         <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fOldOpen = pInputContext-&gt;fOpen;
00910         <a class="code" href="../../d2/d8/structtagIMEMODESAVER.html">PIMEMODESAVER</a> pUnSelModeSaver, pSelModeSaver;
00911         <span class="keyword">const</span> <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fdwConvPreserve = IME_CMODE_EUDC;
00912 
00913         fLogFontInited = ((pInputContext-&gt;fdwInit &amp; INIT_LOGFONT) == INIT_LOGFONT);
00914 
00915         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE) &amp;&amp; pSelImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
00916                 !(pSelImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE)) {
00917             <span class="comment">/*</span>
00918 <span class="comment">             * Check if there is any LOGFONT to be converted.</span>
00919 <span class="comment">             */</span>
00920             <span class="keywordflow">if</span> (fLogFontInited) {
00921                 LOGFONTA LogFontA;
00922 
00923                 <a class="code" href="../../d4/d0/immcli_8h.html#a84">LFontWtoLFontA</a>(&amp;pInputContext-&gt;lfFont.W, &amp;LogFontA);
00924                 RtlCopyMemory(&amp;pInputContext-&gt;lfFont.A, &amp;LogFontA, <span class="keyword">sizeof</span>(LOGFONTA));
00925             }
00926 
00927             <a class="code" href="../../d4/d0/immcli_8h.html#a20">ClrICF</a>(pClientImc, IMCF_UNICODE);
00928         }
00929         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d0/immcli_8h.html#a21">TestICF</a>(pClientImc, IMCF_UNICODE) &amp;&amp; pSelImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp;
00930                  (pSelImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE)) {
00931             <span class="comment">/*</span>
00932 <span class="comment">             * Check if there is any LOGFONT to be converted.</span>
00933 <span class="comment">             */</span>
00934             <span class="keywordflow">if</span> (fLogFontInited) {
00935                 LOGFONTW LogFontW;
00936 
00937                 <a class="code" href="../../d4/d0/immcli_8h.html#a83">LFontAtoLFontW</a>(&amp;pInputContext-&gt;lfFont.A, &amp;LogFontW);
00938                 RtlCopyMemory(&amp;pInputContext-&gt;lfFont.W, &amp;LogFontW, <span class="keyword">sizeof</span>(LOGFONTW));
00939             }
00940 
00941             <a class="code" href="../../d4/d0/immcli_8h.html#a19">SetICF</a>(pClientImc, IMCF_UNICODE);
00942         }
00943 
00944         <span class="comment">/*</span>
00945 <span class="comment">         * hPrivate</span>
00946 <span class="comment">         */</span>
00947         <span class="keywordflow">if</span> (dwUnSelPriv != dwSelPriv) {
00948             hImcc = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a20">ImmReSizeIMCC</a>(pInputContext-&gt;hPrivate, dwSelPriv);
00949             <span class="keywordflow">if</span> (hImcc) {
00950                 pInputContext-&gt;hPrivate = hImcc;
00951             }
00952             <span class="keywordflow">else</span> {
00953                 RIPMSG1(RIP_WARNING,
00954                       <span class="stringliteral">"SelectContext: resize hPrivate %lX failure"</span>,
00955                       pInputContext-&gt;hPrivate);
00956                 <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a>(pInputContext-&gt;hPrivate);
00957                 pInputContext-&gt;hPrivate = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a15">ImmCreateIMCC</a>(dwSelPriv);
00958             }
00959         }
00960 
00961         <span class="comment">/*</span>
00962 <span class="comment">         * hMsgBuf</span>
00963 <span class="comment">         */</span>
00964         dwSize = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a21">ImmGetIMCCSize</a>(pInputContext-&gt;hMsgBuf);
00965 
00966         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a19">ImmGetIMCCLockCount</a>(pInputContext-&gt;hMsgBuf) != 0 ||
00967                 dwSize &gt; <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a0">IMCC_ALLOC_TOOLARGE</a>) {
00968 
00969             RIPMSG0(RIP_WARNING, <span class="stringliteral">"SelectContext: create new hMsgBuf"</span>);
00970             <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a>(pInputContext-&gt;hMsgBuf);
00971             pInputContext-&gt;hMsgBuf = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a15">ImmCreateIMCC</a>(<span class="keyword">sizeof</span>(UINT));
00972             pInputContext-&gt;dwNumMsgBuf = 0;
00973         }
00974 
00975         <span class="comment">/*</span>
00976 <span class="comment">         * hGuideLine</span>
00977 <span class="comment">         */</span>
00978         dwSize = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a21">ImmGetIMCCSize</a>(pInputContext-&gt;hGuideLine);
00979 
00980         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a19">ImmGetIMCCLockCount</a>(pInputContext-&gt;hGuideLine) != 0 ||
00981                 dwSize &lt; sizeof(GUIDELINE) || dwSize &gt; <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a0">IMCC_ALLOC_TOOLARGE</a>) {
00982 
00983             RIPMSG0(RIP_WARNING, <span class="stringliteral">"SelectContext: create new hGuideLine"</span>);
00984             <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a>(pInputContext-&gt;hGuideLine);
00985             pInputContext-&gt;hGuideLine = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a15">ImmCreateIMCC</a>(<span class="keyword">sizeof</span>(GUIDELINE));
00986             pGuideLine = (PGUIDELINE)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a17">ImmLockIMCC</a>(pInputContext-&gt;hGuideLine);
00987 
00988             <span class="keywordflow">if</span> (pGuideLine != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00989                 pGuideLine-&gt;dwSize = <span class="keyword">sizeof</span>(GUIDELINE);
00990                 <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a>(pInputContext-&gt;hGuideLine);
00991             }
00992         }
00993 
00994         <span class="comment">/*</span>
00995 <span class="comment">         * hCandInfo</span>
00996 <span class="comment">         */</span>
00997         dwSize = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a21">ImmGetIMCCSize</a>(pInputContext-&gt;hCandInfo);
00998 
00999         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a19">ImmGetIMCCLockCount</a>(pInputContext-&gt;hCandInfo) != 0 ||
01000                 dwSize &lt; sizeof(CANDIDATEINFO) || dwSize &gt; <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a0">IMCC_ALLOC_TOOLARGE</a>) {
01001 
01002             RIPMSG0(RIP_WARNING, <span class="stringliteral">"SelectContext: create new hCandInfo"</span>);
01003             <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a>(pInputContext-&gt;hCandInfo);
01004             pInputContext-&gt;hCandInfo = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a15">ImmCreateIMCC</a>(<span class="keyword">sizeof</span>(CANDIDATEINFO));
01005             pCandInfo = (PCANDIDATEINFO)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a17">ImmLockIMCC</a>(pInputContext-&gt;hCandInfo);
01006 
01007             <span class="keywordflow">if</span> (pCandInfo != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01008                 pCandInfo-&gt;dwSize = <span class="keyword">sizeof</span>(CANDIDATEINFO);
01009                 <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a>(pInputContext-&gt;hCandInfo);
01010             }
01011         }
01012 
01013         <span class="comment">/*</span>
01014 <span class="comment">         * hCompStr</span>
01015 <span class="comment">         */</span>
01016         dwSize = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a21">ImmGetIMCCSize</a>(pInputContext-&gt;hCompStr);
01017 
01018         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a19">ImmGetIMCCLockCount</a>(pInputContext-&gt;hCompStr) != 0 ||
01019                 dwSize &lt; sizeof(COMPOSITIONSTRING) || dwSize &gt; <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a0">IMCC_ALLOC_TOOLARGE</a>) {
01020 
01021             RIPMSG0(RIP_WARNING, <span class="stringliteral">"SelectContext: create new hCompStr"</span>);
01022             <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a16">ImmDestroyIMCC</a>(pInputContext-&gt;hCompStr);
01023             pInputContext-&gt;hCompStr = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a15">ImmCreateIMCC</a>(<span class="keyword">sizeof</span>(COMPOSITIONSTRING));
01024             pCompStr = (PCOMPOSITIONSTRING)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a17">ImmLockIMCC</a>(pInputContext-&gt;hCompStr);
01025 
01026             <span class="keywordflow">if</span> (pCompStr != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01027                 pCompStr-&gt;dwSize = <span class="keyword">sizeof</span>(COMPOSITIONSTRING);
01028                 <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a>(pInputContext-&gt;hCompStr);
01029             }
01030         }
01031 
01032         <span class="comment">//</span>
01033         <span class="comment">// Save and restore the IME modes when the primary</span>
01034         <span class="comment">// language changes.</span>
01035         <span class="comment">//</span>
01036 
01037         <span class="keywordflow">if</span> (pUnSelImeDpi) {
01038             <span class="comment">//</span>
01039             <span class="comment">// If UnSelKL is IME, get ModeSaver per language.</span>
01040             <span class="comment">//</span>
01041             pUnSelModeSaver = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a9">GetImeModeSaver</a>(pInputContext, hUnSelKL);
01042             TAGMSG1(DBGTAG_IMM, <span class="stringliteral">"pUnSelModeSaver=%p"</span>, pUnSelModeSaver);
01043 
01044             <span class="comment">//</span>
01045             <span class="comment">// Firstly save the private sentence mode per IME.</span>
01046             <span class="comment">//</span>
01047             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a12">SavePrivateMode</a>(pInputContext, pUnSelModeSaver, hUnSelKL);
01048         }
01049         <span class="keywordflow">else</span> {
01050             pUnSelModeSaver = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01051         }
01052 
01053         <span class="keywordflow">if</span> (pSelImeDpi) {
01054             <span class="comment">//</span>
01055             <span class="comment">// If SelKL is IME, get is ModeSaver per language.</span>
01056             <span class="comment">//</span>
01057             pSelModeSaver = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a9">GetImeModeSaver</a>(pInputContext, hSelKL);
01058             TAGMSG1(DBGTAG_IMM, <span class="stringliteral">"pSelImeDpi. pImeModeSaver=%p"</span>, pSelModeSaver);
01059         }
01060         <span class="keywordflow">else</span> {
01061             pSelModeSaver = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01062         }
01063 
01064         <span class="comment">//</span>
01065         <span class="comment">// If the primary language of KL changes, save the current mode</span>
01066         <span class="comment">// and restore the previous modes of new language.</span>
01067         <span class="comment">//</span>
01068         <span class="keywordflow">if</span> (pUnSelModeSaver != pSelModeSaver) {
01069             <span class="comment">//</span>
01070             <span class="comment">// If old KL is IME, save the current conversion, sentence and open mode.</span>
01071             <span class="comment">//</span>
01072             <span class="keywordflow">if</span> (pUnSelModeSaver) {
01073                 pUnSelModeSaver-&gt;<a class="code" href="../../d2/d8/structtagIMEMODESAVER.html#o2">fOpen</a> = (pInputContext-&gt;fOpen != <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01074 
01075                 <span class="comment">//</span>
01076                 <span class="comment">// Don't have to save the preserved bits for conversion mode.</span>
01077                 <span class="comment">//</span>
01078                 pUnSelModeSaver-&gt;<a class="code" href="../../d2/d8/structtagIMEMODESAVER.html#o3">fdwConversion</a> = pInputContext-&gt;fdwConversion &amp; ~fdwConvPreserve;
01079 
01080                 pUnSelModeSaver-&gt;<a class="code" href="../../d2/d8/structtagIMEMODESAVER.html#o4">fdwSentence</a> = LOWORD(pInputContext-&gt;fdwSentence);
01081                 pUnSelModeSaver-&gt;<a class="code" href="../../d2/d8/structtagIMEMODESAVER.html#o5">fdwInit</a> = pInputContext-&gt;fdwInit;
01082             }
01083 
01084             <span class="comment">//</span>
01085             <span class="comment">// If new KL is IME, restore the previous conversion, sentence and open mode.</span>
01086             <span class="comment">//</span>
01087             <span class="keywordflow">if</span> (pSelModeSaver) {
01088                 <span class="keywordflow">if</span> (pInputContext-&gt;fdwDirty &amp; IMSS_INIT_OPEN) {
01089                     <span class="comment">//</span>
01090                     <span class="comment">// HKL change may be kicked from private IME hotkey, and</span>
01091                     <span class="comment">// a user wants it opened when switched.</span>
01092                     <span class="comment">//</span>
01093                     pInputContext-&gt;fOpen = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01094                     pInputContext-&gt;fdwDirty &amp;= ~IMSS_INIT_OPEN;
01095                 } <span class="keywordflow">else</span> {
01096                     pInputContext-&gt;fOpen = pSelModeSaver-&gt;<a class="code" href="../../d2/d8/structtagIMEMODESAVER.html#o2">fOpen</a>;
01097                 }
01098 
01099                 <span class="comment">//</span>
01100                 <span class="comment">// Some bits are preserved across the languages.</span>
01101                 <span class="comment">//</span>
01102                 pInputContext-&gt;fdwConversion &amp;= fdwConvPreserve;
01103                 <a class="code" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>((pSelModeSaver-&gt;<a class="code" href="../../d2/d8/structtagIMEMODESAVER.html#o3">fdwConversion</a> &amp; fdwConvPreserve) == 0);
01104                 pInputContext-&gt;fdwConversion |= pSelModeSaver-&gt;<a class="code" href="../../d2/d8/structtagIMEMODESAVER.html#o3">fdwConversion</a> &amp; ~fdwConvPreserve;
01105 
01106                 <a class="code" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>(HIWORD(pSelModeSaver-&gt;<a class="code" href="../../d2/d8/structtagIMEMODESAVER.html#o4">fdwSentence</a>) == 0);
01107                 pInputContext-&gt;fdwSentence = pSelModeSaver-&gt;<a class="code" href="../../d2/d8/structtagIMEMODESAVER.html#o4">fdwSentence</a>;
01108                 pInputContext-&gt;fdwInit = pSelModeSaver-&gt;<a class="code" href="../../d2/d8/structtagIMEMODESAVER.html#o5">fdwInit</a>;
01109             }
01110         }
01111         <span class="keywordflow">if</span> (pSelModeSaver) {
01112             <span class="comment">//</span>
01113             <span class="comment">// Restore the private sentence mode per IME.</span>
01114             <span class="comment">//</span>
01115             <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a13">RestorePrivateMode</a>(pInputContext, pSelModeSaver, hSelKL);
01116         }
01117 
01118         <span class="comment">/*</span>
01119 <span class="comment">         * Select the input context.</span>
01120 <span class="comment">         */</span>
01121         <span class="keywordflow">if</span> (pSelImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01122             (*pSelImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o23">ImeSelect</a>)(hImc, <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01123 
01124         <span class="comment">//</span>
01125         <span class="comment">// Set the dirty bits so that IMM can send notifications later.</span>
01126         <span class="comment">// See SendNotificatonProc.</span>
01127         <span class="comment">//</span>
01128         pInputContext-&gt;fdwDirty = 0;
01129         <span class="keywordflow">if</span> (pInputContext-&gt;fOpen != fOldOpen) {
01130             pInputContext-&gt;fdwDirty |= IMSS_UPDATE_OPEN;
01131         }
01132         <span class="keywordflow">if</span> (pInputContext-&gt;fdwConversion != fdwOldConversion) {
01133             pInputContext-&gt;fdwDirty |= IMSS_UPDATE_CONVERSION;
01134         }
01135         <span class="keywordflow">if</span> (pInputContext-&gt;fdwSentence != fdwOldSentence) {
01136             pInputContext-&gt;fdwDirty |= IMSS_UPDATE_SENTENCE;
01137         }
01138         TAGMSG4(DBGTAG_IMM, <span class="stringliteral">"fOpen:%d fdwConv:%08x fdwSent:%08x dirty:%02x"</span>,
01139                 pInputContext-&gt;fOpen, pInputContext-&gt;fdwConversion, pInputContext-&gt;fdwSentence, pInputContext-&gt;fdwDirty);
01140 
01141         <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
01142     }
01143     <span class="keywordflow">else</span> {
01144         <span class="comment">//</span>
01145         <span class="comment">// To keep the backward compatibility,</span>
01146         <span class="comment">// select the input context here.</span>
01147         <span class="comment">//</span>
01148         <span class="keywordflow">if</span> (pSelImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
01149             (*pSelImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o23">ImeSelect</a>)(hImc, <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
01150     }
01151 
01152     <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pUnSelImeDpi);
01153     <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pSelImeDpi);
01154     <a class="code" href="../../d9/d0/immuser_8h.html#a44">ImmUnlockClientImc</a>(pClientImc);
01155 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a97" doxytag="immcli.h::TestInputContextProcess" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL TestInputContextProcess           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d7/structtagIMC.html">PIMC</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pImc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00598">598</a> of file <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html">w32/ntuser/imm/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00149">GetInputContextProcess</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00154">GETPROCESSID</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01547">GETPTI</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01512">PtoH</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>.
<p>
<pre class="fragment"><div>00600 {
00601     <span class="comment">/*</span>
00602 <span class="comment">     * If the threads are the same, don't bother going to the kernel</span>
00603 <span class="comment">     * to get the input context's process id.</span>
00604 <span class="comment">     */</span>
00605     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a455">GETPTI</a>(pImc) == <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()) {
00606         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00607     }
00608 
00609     <span class="keywordflow">return</span> (<a class="code" href="../../d4/d0/immcli_8h.html#a14">GetInputContextProcess</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a448">PtoH</a>(pImc)) == <a class="code" href="../../d6/d0/usercli_8h.html#a13">GETPROCESSID</a>());
00610 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a111" doxytag="immcli.h::TransCodeConvert" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT TransCodeConvert           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPIMESTRUCT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpIme</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00647">647</a> of file <a class="el" href="../../d7/d2/kcodecnv_8c-source.html">kcodecnv.c</a>.
<p>
References <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00415">BanjaToJunja()</a>, <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00462">JohabToKs()</a>, <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00362">JunjaToBanja()</a>, <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00566">KsToJohab()</a>, <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00021">lpDest</a>, and <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00020">lpSource</a>.
<p>
Referenced by <a class="el" href="../../d3/d4/transsub_8c-source.html#l00054">TranslateIMESubFunctions()</a>.
<p>
<pre class="fragment"><div>00654                    :
00655 
00656 Arguments:
00657 
00658 Return Value:
00659 
00660 --*/
00661 
00662 {
00663     UNREFERENCED_PARAMETER(hIMC);
00664 
00665     <span class="keywordflow">switch</span> (lpIme-&gt;wParam)
00666     {
00667         <span class="keywordflow">case</span> IME_JUNJAtoBANJA:
00668             lpIme-&gt;wCount = <a class="code" href="../../d6/d3/kcodecnv_8c.html#a14">JunjaToBanja</a>(<a class="code" href="../../d6/d3/kcodecnv_8c.html#a3">lpSource</a>(lpIme), <a class="code" href="../../d6/d3/kcodecnv_8c.html#a4">lpDest</a>(lpIme));
00669             <span class="keywordflow">break</span>;
00670 
00671         <span class="keywordflow">case</span> IME_BANJAtoJUNJA:
00672             lpIme-&gt;wCount = <a class="code" href="../../d6/d3/kcodecnv_8c.html#a15">BanjaToJunja</a>(<a class="code" href="../../d6/d3/kcodecnv_8c.html#a3">lpSource</a>(lpIme), <a class="code" href="../../d6/d3/kcodecnv_8c.html#a4">lpDest</a>(lpIme));
00673             <span class="keywordflow">break</span>;
00674 
00675         <span class="keywordflow">case</span> IME_JOHABtoKS:
00676             lpIme-&gt;wCount = <a class="code" href="../../d6/d3/kcodecnv_8c.html#a16">JohabToKs</a>(<a class="code" href="../../d6/d3/kcodecnv_8c.html#a3">lpSource</a>(lpIme), <a class="code" href="../../d6/d3/kcodecnv_8c.html#a4">lpDest</a>(lpIme));
00677             <span class="keywordflow">break</span>;
00678 
00679         <span class="keywordflow">case</span> IME_KStoJOHAB:
00680             lpIme-&gt;wCount = <a class="code" href="../../d6/d3/kcodecnv_8c.html#a17">KsToJohab</a>(<a class="code" href="../../d6/d3/kcodecnv_8c.html#a3">lpSource</a>(lpIme), <a class="code" href="../../d6/d3/kcodecnv_8c.html#a4">lpDest</a>(lpIme));
00681             <span class="keywordflow">break</span>;
00682 
00683         <span class="keywordflow">default</span>:
00684             lpIme-&gt;wCount = 0;
00685     }
00686     <span class="keywordflow">return</span> (lpIme-&gt;wCount);
00687 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a112" doxytag="immcli.h::TransConvertList" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT TransConvertList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPIMESTRUCT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpIme</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00689">689</a> of file <a class="el" href="../../d7/d2/kcodecnv_8c-source.html">kcodecnv.c</a>.
<p>
References <a class="el" href="../../d4/d7/client_8c-source.html#l04502">GetKeyboardLayout()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01841">ImmGetConversionListA()</a>, <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00021">lpDest</a>, <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00020">lpSource</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d3/d4/transsub_8c-source.html#l00054">TranslateIMESubFunctions()</a>.
<p>
<pre class="fragment"><div>00690 {
00691     LPSTR           lpSrc;
00692     LPSTR           lpDst;
00693     HGLOBAL         hCandList;
00694     LPCANDIDATELIST lpCandList;
00695     LPSTR           lpCandStr;
00696     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>            i, uBufLen;
00697     LRESULT         lRet = 0;
00698 
00699     lpSrc = <a class="code" href="../../d6/d3/kcodecnv_8c.html#a3">lpSource</a>(lpIme);
00700     lpDst = <a class="code" href="../../d6/d3/kcodecnv_8c.html#a4">lpDest</a>(lpIme);
00701     uBufLen = <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a37">ImmGetConversionListA</a>(<a class="code" href="../../d3/d8/client_8c.html#a154">GetKeyboardLayout</a>(0), hImc, (LPCSTR)lpSrc,
00702             NULL, 0, GCL_CONVERSION);
00703     <span class="keywordflow">if</span> (uBufLen)
00704     {
00705         hCandList = GlobalAlloc(GHND, uBufLen);
00706         lpCandList = (LPCANDIDATELIST)GlobalLock(hCandList);
00707         lRet = <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a37">ImmGetConversionListA</a>(<a class="code" href="../../d3/d8/client_8c.html#a154">GetKeyboardLayout</a>(0), hImc, (LPCSTR)lpSrc,
00708                 lpCandList, uBufLen, GCL_CONVERSION);
00709         <span class="keywordflow">for</span> (i = 0; i &lt; lpCandList-&gt;dwCount; i++)
00710         {
00711             lpCandStr = (LPSTR)lpCandList + lpCandList-&gt;dwOffset[i];
00712             *lpDst++ = *lpCandStr++;
00713             *lpDst++ = *lpCandStr++;
00714         }
00715         *lpDst = <span class="charliteral">'\0'</span>;
00716         lpIme-&gt;wCount = (WORD)lpCandList-&gt;dwCount * 2;
00717         GlobalUnlock(hCandList);
00718         GlobalFree(hCandList);
00719     }
00720     <span class="keywordflow">return</span> (lRet);
00721 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a109" doxytag="immcli.h::TransGetLevel" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT TransGetLevel           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hWndApp</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d4/transsub_8c-source.html#l01099">1099</a> of file <a class="el" href="../../d3/d4/transsub_8c-source.html">transsub.c</a>.
<p>
References <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l12915">NtUserGetAppImeLevel()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00171">ImmGenerateMessage()</a>, <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00408">ImmPostMessages()</a>, and <a class="el" href="../../d3/d4/transsub_8c-source.html#l00054">TranslateIMESubFunctions()</a>.
<p>
<pre class="fragment"><div>01100 {
01101     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> lRet;
01102 
01103     <span class="keywordflow">if</span> ( (lRet = <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a396">NtUserGetAppImeLevel</a>( hWndApp )) == 0 )
01104         lRet = 1;       <span class="comment">// default level</span>
01105 
01106     <span class="keywordflow">return</span> lRet;
01107 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a113" doxytag="immcli.h::TransGetMNTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT TransGetMNTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPIMESTRUCT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpIme</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00723">723</a> of file <a class="el" href="../../d7/d2/kcodecnv_8c-source.html">kcodecnv.c</a>.
<p>
References <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00040">HMNTable</a>, <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00016">IDD_2BEOL</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d3/d4/transsub_8c-source.html#l00054">TranslateIMESubFunctions()</a>.
<p>
<pre class="fragment"><div>00724 {
00725     LPSTR   lpMnemonic;
00726     <span class="keywordtype">int</span>     iCount, iCIM;
00727 
00728     UNREFERENCED_PARAMETER(hImc);
00729 
00730     lpMnemonic = (LPSTR)(lpIme-&gt;lParam1);
00731 <span class="comment">// BUGBUG: Will be changed to use Registry instead of WIN.INI</span>
00732     iCIM = GetProfileInt(L<span class="stringliteral">"WANSUNG"</span>, L<span class="stringliteral">"InputMethod"</span>, IDD_2BEOL) - <a class="code" href="../../d6/d3/kcodecnv_8c.html#a0">IDD_2BEOL</a>;
00733     <span class="keywordflow">for</span> (iCount = 0; iCount &lt; 96; iCount++, lpMnemonic += 2)
00734         {
00735         *lpMnemonic = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(HMNTable[iCIM][iCount]);
00736         *(lpMnemonic+1) = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(HMNTable[iCIM][iCount]);
00737         }
00738     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00739 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a108" doxytag="immcli.h::TranslateIMESubFunctions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT TranslateIMESubFunctions           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWndApp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPIMESTRUCT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpIme</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d4/transsub_8c-source.html#l00054">54</a> of file <a class="el" href="../../d3/d4/transsub_8c-source.html">transsub.c</a>.
<p>
References <a class="el" href="../../d4/d3/w32_2ntuser_2client_2nt6_2pch_8h-source.html#l00039">DestroyWindow</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04502">GetKeyboardLayout()</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00046">IGSC_DEFIMCFALLBACK</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00225">ImmGetSaveContext()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>, <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00647">TransCodeConvert()</a>, <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00689">TransConvertList()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00932">TransEnterWordRegisterMode()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00710">TransGetConversionMode()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01099">TransGetLevel()</a>, <a class="el" href="../../d7/d2/kcodecnv_8c-source.html#l00723">TransGetMNTable()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00654">TransGetMode()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00399">TransGetOpenJ()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00373">TransGetOpenK()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01042">TransHanjaMode()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00425">TransMoveImeWindow()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00828">TransSendVKey()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00989">TransSetConversionFontEx()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00575">TransSetConversionMode()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00450">TransSetConversionWindow()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l01116">TransSetLevel()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00780">TransSetMode()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00331">TransSetOpenJ()</a>, <a class="el" href="../../d3/d4/transsub_8c-source.html#l00311">TransSetOpenK()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/clwinnls_8c-source.html#l00081">SendIMEMessageAll()</a>.
<p>
<pre class="fragment"><div>00058 {
00059     HIMC        hImc;
00060     LRESULT     lRet;
00061     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       dwLangID;
00062 
00063     hImc = <a class="code" href="../../d4/d0/immcli_8h.html#a72">ImmGetSaveContext</a>( hWndApp, IGSC_DEFIMCFALLBACK );
00064     <span class="keywordflow">if</span> ( hImc == <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a> ) {
00065         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00066     }
00067 
00068     dwLangID = PRIMARYLANGID(LANGIDFROMLCID(GetSystemDefaultLCID()));
00069 
00070     <span class="keywordflow">switch</span> (lpIme-&gt;fnc) {
00071     <span class="keywordflow">case</span> 0x03:  <span class="comment">// IME_QUERY, IME_GETIMECAPS: KOREAN &amp; JAPANESE</span>
00072         lRet = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00073         <span class="keywordflow">break</span>;
00074 
00075     <span class="keywordflow">case</span> 0x04:  <span class="comment">// IME_SETOPEN: KOREAN &amp; JAPANESE</span>
00076         <span class="keywordflow">if</span> ( dwLangID == LANG_KOREAN )
00077             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a0">TransSetOpenK</a>( hWndApp, hImc, lpIme );
00078         <span class="keywordflow">else</span>
00079             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a1">TransSetOpenJ</a>( hWndApp, hImc, lpIme );
00080         <span class="keywordflow">break</span>;
00081 
00082     <span class="keywordflow">case</span> 0x05:  <span class="comment">// IME_GETOPEN: KOREAN &amp; JAPANESE</span>
00083         <span class="keywordflow">if</span> ( dwLangID == LANG_KOREAN )
00084             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a2">TransGetOpenK</a>( hWndApp, hImc, lpIme, fAnsi );
00085         <span class="keywordflow">else</span>
00086             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a3">TransGetOpenJ</a>( hWndApp, hImc, lpIme, fAnsi );
00087         <span class="keywordflow">break</span>;
00088 
00089     <span class="keywordflow">case</span> 0x06:  <span class="comment">// IME_ENABLEDOSIME, IME_ENABLE</span>
00090     <span class="comment">// internal functions are not supported</span>
00091         lRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00092         <span class="keywordflow">break</span>;
00093 
00094     <span class="keywordflow">case</span> 0x07:  <span class="comment">// IME_GETVERSION: KOREAN &amp; JAPANESE</span>
00095         lRet = IMEVER_31;
00096         <span class="keywordflow">break</span>;
00097 
00098     <span class="keywordflow">case</span> 0x08:  <span class="comment">// IME_MOVEIMEWINDOW, IME_SETCONVERSIONWINDOW: KOREAN &amp; JAPANESE</span>
00099 
00100         <span class="keywordflow">if</span> ( dwLangID == LANG_KOREAN ) {
00101             <span class="comment">//</span>
00102             <span class="comment">// IME_MOVEIMEWINDOW for KOREAN</span>
00103             <span class="comment">//</span>
00104             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a4">TransMoveImeWindow</a>(hWndApp, hImc, lpIme);
00105         } <span class="keywordflow">else</span> {
00106             <span class="comment">//</span>
00107             <span class="comment">// IME_MOVECONVERTWINDOW or IME_SETCONVERSIONWINDOW for JAPANESE</span>
00108             <span class="comment">//</span>
00109             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a5">TransSetConversionWindow</a>( hWndApp, hImc, lpIme );
00110         }
00111         <span class="keywordflow">break</span>;
00112 
00113 <span class="comment">//  case 0x09:  // undefined</span>
00114 
00115     <span class="keywordflow">case</span> 0x10:  <span class="comment">// IME_SETCONVERSIONMODE: JAPANESE</span>
00116         <span class="keywordflow">if</span> ( dwLangID == LANG_JAPANESE ) {
00117             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a6">TransSetConversionMode</a>( hImc, lpIme );
00118         } <span class="keywordflow">else</span> {
00119             lRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00120         }
00121         <span class="keywordflow">break</span>;
00122 
00123     <span class="keywordflow">case</span> 0x11:  <span class="comment">// IME_GETCONVERSIONMODE, IME_GETMODE: // KOREAN &amp; JAPANESE</span>
00124         <span class="comment">// Use hSaveIMC, If WINNSEnableIME(FALSE).</span>
00125         <span class="keywordflow">if</span> ( dwLangID == LANG_KOREAN ) {
00126         <span class="comment">//</span>
00127         <span class="comment">// IME_GETMODE for KOREAN</span>
00128         <span class="comment">//</span>
00129             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a7">TransGetMode</a>( hImc );
00130         } <span class="keywordflow">else</span> {
00131         <span class="comment">//</span>
00132         <span class="comment">// IME_GETCONVERSIONMODE for JAPANESE</span>
00133         <span class="comment">//</span>
00134             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a8">TransGetConversionMode</a>( hImc );
00135         }
00136         <span class="keywordflow">break</span>;
00137 
00138     <span class="keywordflow">case</span> 0x12:  <span class="comment">// IME_SET_MODE, IME_SETFONT, IME_SETCONVERSIONFONT: KOREAN &amp; JAPANESE</span>
00139         <span class="keywordflow">if</span> ( dwLangID == LANG_KOREAN ) {
00140             <span class="comment">//</span>
00141             <span class="comment">// IME_SET_MODE for KOREAN</span>
00142             <span class="comment">//</span>
00143             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a9">TransSetMode</a>( hImc, lpIme );
00144         } <span class="keywordflow">else</span> {
00145             <span class="comment">//</span>
00146             <span class="comment">// IME_SETCONVERSIONFONT for JAPANESE</span>
00147             <span class="comment">//</span>
00148             lRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;   <span class="comment">// should not be called. use SETCONVERSIONFONTEX instead</span>
00149         }
00150         <span class="keywordflow">break</span>;
00151 
00152     <span class="keywordflow">case</span> 0x13:  <span class="comment">// IME_SENDVKEY, IME_SENDKEY: JAPANESE only</span>
00153         <span class="keywordflow">if</span> ( dwLangID == LANG_JAPANESE ) {
00154             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a10">TransSendVKey</a>( hWndApp, hImc, lpIme, fAnsi );
00155         } <span class="keywordflow">else</span> {
00156             lRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00157         }
00158         <span class="keywordflow">break</span>;
00159 
00160 <span class="comment">//</span>
00161 <span class="comment">// internal sub functions are not supported</span>
00162 <span class="comment">//</span>
00163 <span class="comment">//  case 0x14: // IME_DESTROY, IME_DESTROYIME</span>
00164 <span class="comment">//  case 0x15: // IME_PRIVATE</span>
00165 <span class="comment">//  case 0x16: // IME_WINDOWUPDATE</span>
00166 <span class="comment">//  case 0x17: // IME_SELECT</span>
00167 
00168     <span class="keywordflow">case</span> 0x18: <span class="comment">// IME_ENTERWORDREGISTERMODE: JAPANESE only</span>
00169         <span class="keywordflow">if</span> ( dwLangID == LANG_JAPANESE ) {
00170             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a11">TransEnterWordRegisterMode</a>( hWndApp, lpIme, fAnsi);
00171         } <span class="keywordflow">else</span> {
00172             lRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00173         }
00174         <span class="keywordflow">break</span>;
00175 
00176     <span class="keywordflow">case</span> 0x19:  <span class="comment">// IME_SETCONVERSIONFONTEX: JAPANESE only</span>
00177         <span class="keywordflow">if</span> ( dwLangID == LANG_JAPANESE ) {
00178             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a12">TransSetConversionFontEx</a>( hWndApp, hImc, lpIme, fAnsi);
00179         } <span class="keywordflow">else</span> {
00180             lRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00181         }
00182         <span class="keywordflow">break</span>;
00183 
00184 <span class="comment">//</span>
00185 <span class="comment">// internal sub functions are not supported</span>
00186 <span class="comment">//</span>
00187 <span class="comment">//  case 0x1A: // IME_DBCSNAME</span>
00188 <span class="comment">//  case 0x1B: // IME_MAXKEY</span>
00189 <span class="comment">//  case 0x1C: // IME_WINNLS_SK</span>
00190 
00191     <span class="keywordflow">case</span> 0x20:  <span class="comment">// IME_CODECONVERT: KOREAN only</span>
00192         <span class="keywordflow">if</span> ( dwLangID == LANG_KOREAN ) {
00193             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d3/kcodecnv_8c.html#a18">TransCodeConvert</a>( hImc, lpIme))
00194                 lRet = lpIme-&gt;wParam;
00195             <span class="keywordflow">else</span>
00196                 lRet = 0;
00197         } <span class="keywordflow">else</span> {
00198             lRet = 0;
00199         }
00200         <span class="keywordflow">break</span>;
00201 
00202     <span class="keywordflow">case</span> 0x21:  <span class="comment">// IME_CONVERTLIST: KOREAN only</span>
00203         <span class="keywordflow">if</span> ( dwLangID == LANG_KOREAN ) {
00204             lRet = <a class="code" href="../../d6/d3/kcodecnv_8c.html#a19">TransConvertList</a>( hImc, lpIme);
00205         } <span class="keywordflow">else</span> {
00206             lRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00207         }
00208         <span class="keywordflow">break</span>;
00209 
00210 <span class="comment">//</span>
00211 <span class="comment">// internal sub functions and undefined sub functions are not supported</span>
00212 <span class="comment">//</span>
00213 <span class="comment">//  case 0x22:  // IME_INPUTKEYTOSEQUENCE</span>
00214 <span class="comment">//  case 0x23:  // IME_SEQUENCETOINTERNAL</span>
00215 <span class="comment">//  case 0x24:  // IME_QUERYIMEINFO</span>
00216 <span class="comment">//  case 0x25:  // IME_DIALOG</span>
00217 <span class="comment">//  case 0x26 - 0x2f:   // undefined</span>
00218 
00219     <span class="keywordflow">case</span> 0x30:  <span class="comment">// IME_AUTOMATA: KOREAN only</span>
00220         <span class="keywordflow">if</span> ( dwLangID == LANG_KOREAN ) {
00221             lRet = ImmEscape(<a class="code" href="../../d3/d8/client_8c.html#a154">GetKeyboardLayout</a>(0), hImc, IME_AUTOMATA, lpIme);
00222         } <span class="keywordflow">else</span> {
00223             lRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00224         }
00225         <span class="keywordflow">break</span>;
00226 
00227     <span class="keywordflow">case</span> 0x31:  <span class="comment">// IME_HANJAMODE: KOREAN only</span>
00228         <span class="keywordflow">if</span> ( dwLangID == LANG_KOREAN ) {
00229             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a13">TransHanjaMode</a>( hWndApp,  hImc, lpIme);
00230         } <span class="keywordflow">else</span> {
00231             lRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00232         }
00233         <span class="keywordflow">break</span>;
00234 <span class="comment">//</span>
00235 <span class="comment">//  case 0x32 - 0x3f: // undefined</span>
00236 <span class="comment">//</span>
00237     <span class="keywordflow">case</span> 0x40:  <span class="comment">// IME_GETLEVEL: KOREAN only</span>
00238         <span class="keywordflow">if</span> ( dwLangID == LANG_KOREAN ) {
00239             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a25">TransGetLevel</a>( hWndApp );
00240         } <span class="keywordflow">else</span> {
00241             lRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00242         }
00243         <span class="keywordflow">break</span>;
00244 
00245     <span class="keywordflow">case</span> 0x41:  <span class="comment">// IME_SETLEVEL: KOREAN only</span>
00246         <span class="keywordflow">if</span> ( dwLangID == LANG_KOREAN ) {
00247             lRet = <a class="code" href="../../d2/d5/transsub_8c.html#a26">TransSetLevel</a>( hWndApp, lpIme);
00248         } <span class="keywordflow">else</span> {
00249             lRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00250         }
00251         <span class="keywordflow">break</span>;
00252 
00253     <span class="keywordflow">case</span> 0x42:  <span class="comment">// IME_GETMNTABLE: KOREAN only</span>
00254         <span class="keywordflow">if</span> ( dwLangID == LANG_KOREAN ) {
00255             lRet = <a class="code" href="../../d6/d3/kcodecnv_8c.html#a20">TransGetMNTable</a>( hImc, lpIme);
00256         } <span class="keywordflow">else</span> {
00257             lRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00258         }
00259         <span class="keywordflow">break</span>;
00260 
00261 <span class="preprocessor">#if defined(PENAPI)</span>
00262 <span class="preprocessor"></span>    <span class="keywordflow">case</span> IME_SETUNDETERMINESTRING:
00263         lRet = FSetUndetermine( hImc, (HGLOBAL)lpIME-&gt;lParam1);
00264         <span class="keywordflow">break</span>;
00265 
00266     <span class="keywordflow">case</span> IME_SETCAPTURE:
00267         lRet = FEnablePenUi((HWND)lpIME-&gt;wParam, (lpIME-&gt;wParam != NULL));
00268         <span class="keywordflow">break</span>;
00269 <span class="preprocessor">#endif</span>
00270 <span class="preprocessor"></span>
00271 <span class="preprocessor">#ifdef LATER // IME_NOTIFYWOWTASKEXIT</span>
00272 <span class="preprocessor"></span>    <span class="keywordflow">case</span> IME_NOTIFYWOWTASKEXIT:
00273       <span class="comment">//</span>
00274       <span class="comment">// Destroy the default IME window of WOW 16bit</span>
00275       <span class="comment">// applications now. We should not wait for the</span>
00276       <span class="comment">// server wow thread clean up that will destroy the</span>
00277       <span class="comment">// IME window because usrsrv won't send WM_DESTROY</span>
00278       <span class="comment">// to non-server side window procedures. Some IMEs</span>
00279       <span class="comment">// must receive WM_DESTROY to free up 32 bit objects.</span>
00280       <span class="comment">//</span>
00281       <span class="comment">//  kksuzuka #7982:IME memory leak on WOW16 applications.</span>
00282       <span class="comment">//</span>
00283       PIMMTHREADINFO piti = PitiCurrent();
00284 
00285       <span class="keywordflow">if</span> ( piti != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; <a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>( piti-&gt;hwndDefaultIme ) ) {
00286           <a class="code" href="../../d3/d4/w32_2ntuser_2client_2nt6_2pch_8h.html#a3">DestroyWindow</a>( piti-&gt;hwndDefaultIme );
00287       }
00288       <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00289 <span class="preprocessor">#endif</span>
00290 <span class="preprocessor"></span>    <span class="keywordflow">default</span>:
00291         <span class="comment">//</span>
00292         <span class="comment">// private/internal/undefined functions are not supported</span>
00293         <span class="comment">//</span>
00294         lRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00295         <span class="keywordflow">break</span>;
00296     }
00297 
00298     <span class="keywordflow">return</span> (lRet);
00299 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a110" doxytag="immcli.h::TransSetLevel" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LRESULT TransSetLevel           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWndApp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPIMESTRUCT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpIme</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d4/transsub_8c-source.html#l01116">1116</a> of file <a class="el" href="../../d3/d4/transsub_8c-source.html">transsub.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l12887">NtUserSetAppImeLevel()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d3/d4/transsub_8c-source.html#l00054">TranslateIMESubFunctions()</a>.
<p>
<pre class="fragment"><div>01117 {
01118     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwLevel;
01119 
01120     dwLevel = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)lpIme-&gt;wParam;
01121     <span class="keywordflow">if</span> ( dwLevel &gt;= 1 &amp;&amp; dwLevel &lt;= 5 ) {
01122         <span class="keywordflow">if</span> ( <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a395">NtUserSetAppImeLevel</a>(hWndApp, dwLevel) ) {
01123             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01124         }
01125     }
01126     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01127 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a89" doxytag="immcli.h::UnloadIME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID UnloadIME           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pImeDpi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fTerminateIme</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/immime_8c-source.html#l00212">212</a> of file <a class="el" href="../../d7/d9/immime_8c-source.html">immime.c</a>.
<p>
References <a class="el" href="../../d0/d0/immuser_8h-source.html#l00068">tagIMEDPI::hInst</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00084">tagIMEDPI::_tagImeFunctions::ImeDestroy</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00050">ImmDisableIME()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00365">ImmUnloadIME()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, and <a class="el" href="../../d7/d9/immime_8c-source.html#l00234">LoadImeDpi()</a>.
<p>
<pre class="fragment"><div>00215 {
00216     <span class="keywordflow">if</span> (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o1">hInst</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00217         RIPMSG0(RIP_WARNING, <span class="stringliteral">"UnloadIME: No IME's hInst."</span>);
00218         <span class="keywordflow">return</span>;
00219     }
00220 
00221     <span class="keywordflow">if</span> (fTerminateIme) {
00222         <span class="comment">/*</span>
00223 <span class="comment">         * Destroy IME first.</span>
00224 <span class="comment">         */</span>
00225         (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o20">ImeDestroy</a>)(0);
00226     }
00227 
00228     FreeLibrary(pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o1">hInst</a>);
00229     pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o1">hInst</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00230 
00231     <span class="keywordflow">return</span>;
00232 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a116" doxytag="immcli.h::WINNLSTranslateMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT WINNLSTranslateMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d1/bench_8h.html#a7">INT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>iNum</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PTRANSMSG&nbsp;</td>
          <td class="mdname" nowrap> <em>pTransMsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fAnsi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwLangId</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00478">478</a> of file <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html">ntuser/imm/input.c</a>.
<p>
References <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00471">ImmLockIMCC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00488">ImmUnlockIMCC()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l00582">WINNLSTranslateMessageJ()</a>, and <a class="el" href="../../d8/d9/ktranmsg_8c-source.html#l00128">WINNLSTranslateMessageK()</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00171">ImmGenerateMessage()</a>, and <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00408">ImmPostMessages()</a>.
<p>
<pre class="fragment"><div>00484 {
00485     LPINPUTCONTEXT      pInputContext;
00486     LPCOMPOSITIONSTRING pCompStr;
00487     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> uiRet = 0;
00488 
00489     pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>(hImc);
00490     <span class="keywordflow">if</span> (pInputContext == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00491         <span class="keywordflow">return</span> uiRet;
00492     }
00493 
00494     pCompStr = (LPCOMPOSITIONSTRING)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a17">ImmLockIMCC</a>( pInputContext-&gt;hCompStr );
00495 
00496     <span class="keywordflow">if</span> (dwLangId == LANG_KOREAN) {
00497         uiRet = <a class="code" href="../../d7/d0/ktranmsg_8c.html#a3">WINNLSTranslateMessageK</a>((UINT)iNum,
00498                                         pTransMsg,
00499                                         pInputContext,
00500                                         pCompStr,
00501                                         fAnsi );
00502     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( dwLangId == LANG_JAPANESE ) {
00503         uiRet = <a class="code" href="../../d4/d8/jtranmsg_8c.html#a18">WINNLSTranslateMessageJ</a>((UINT)iNum,
00504                                         pTransMsg,
00505                                         pInputContext,
00506                                         pCompStr,
00507                                         fAnsi );
00508     }
00509 
00510     <span class="keywordflow">if</span> (pCompStr != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00511         <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a18">ImmUnlockIMCC</a>(pInputContext-&gt;hCompStr);
00512     }
00513     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
00514 
00515     <span class="keywordflow">return</span> uiRet;
00516 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a115" doxytag="immcli.h::WINNLSTranslateMessageJ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT WINNLSTranslateMessageJ           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uiNumMsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PTRANSMSG&nbsp;</td>
          <td class="mdname" nowrap> <em>pTransMsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPINPUTCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCOMPOSITIONSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCompStr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsiIMC</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l00582">582</a> of file <a class="el" href="../../d5/d7/jtranmsg_8c-source.html">jtranmsg.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00027">ImmGetDefaultIMEWnd()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00277">IsWindow()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00533">IsWindowUnicode()</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l00137">JTransCompositionA()</a>, <a class="el" href="../../d5/d7/jtranmsg_8c-source.html#l00359">JTransCompositionW()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00478">WINNLSTranslateMessage()</a>.
<p>
<pre class="fragment"><div>00592                    :
00593 
00594 Arguments:
00595 
00596 Return Value:
00597 
00598 --*/
00599 
00600 {
00601     PTRANSMSG       pTransMsgBuf, pTransMsgTemp;
00602     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>            uiNewNum = 0;
00603     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>            uiTempNum;
00604     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>           dwTempSize;
00605     HWND            hDefIMEWnd;
00606     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>            i;
00607     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>            bAnsiWnd;
00608 
00609     hDefIMEWnd = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a4">ImmGetDefaultIMEWnd</a>((HWND)lpIMC-&gt;hWnd);
00610 
00611     bAnsiWnd = (! <a class="code" href="../../d3/d8/winmgrc_8c.html#a27">IsWindowUnicode</a>(lpIMC-&gt;hWnd)) ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00612 
00613     dwTempSize = uiNumMsg * <span class="keyword">sizeof</span>(TRANSMSG);
00614 
00615     <span class="comment">//</span>
00616     <span class="comment">// Allocate one more TRANSMSG and ZEROINIT the whole thing!</span>
00617     <span class="comment">//</span>
00618 
00619     pTransMsgBuf = (PTRANSMSG)<a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>( HEAP_ZERO_MEMORY,
00620                                              dwTempSize + <span class="keyword">sizeof</span>(TRANSMSG)
00621                                            );
00622     <span class="keywordflow">if</span> ( pTransMsgBuf == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> )
00623         <span class="keywordflow">goto</span> wtmsg2_j_10;
00624 
00625     RtlCopyMemory(pTransMsgBuf, pTransMsg, dwTempSize);
00626     pTransMsgTemp = pTransMsgBuf;
00627 
00628     <span class="comment">//</span>
00629     <span class="comment">// When MCW_HIDDEN mode, WM_IME_ENDCOMPOSITION will be translated to</span>
00630     <span class="comment">// IR_UNDETERMINE with 0 string. So that, this message have to be</span>
00631     <span class="comment">// generated after all messages.</span>
00632     <span class="comment">//</span>
00633 
00634     <span class="keywordflow">if</span> (lpIMC-&gt;fdw31Compat &amp; F31COMPAT_MCWHIDDEN) {
00635 
00636         <span class="keywordflow">for</span> (i = 0; i &lt; uiNumMsg; i++, pTransMsgTemp++) {
00637             <span class="keywordflow">if</span> (pTransMsgTemp-&gt;message == WM_IME_ENDCOMPOSITION) {
00638                 <span class="keywordflow">break</span>;
00639             }
00640         }
00641 
00642         <span class="keywordflow">if</span> (pTransMsgTemp-&gt;message == WM_IME_ENDCOMPOSITION) {
00643 
00644             PTRANSMSG pTransMsgSrc = pTransMsgTemp + 1;
00645 
00646             <span class="keywordflow">while</span> (pTransMsgSrc-&gt;message != 0) {
00647                 *pTransMsgTemp++ = *pTransMsgSrc++;
00648             }
00649 
00650             pTransMsgTemp-&gt;message = WM_IME_ENDCOMPOSITION;
00651             pTransMsgTemp-&gt;wParam  = 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00652             pTransMsgTemp-&gt;lParam  = 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00653 
00654         }
00655 
00656         pTransMsgTemp = pTransMsgBuf;
00657     }
00658 
00659     <span class="keywordflow">while</span> (pTransMsgTemp-&gt;message != 0) {
00660 
00661         <span class="keywordflow">switch</span> (pTransMsgTemp-&gt;message)
00662         {
00663             <span class="keywordflow">case</span> WM_IME_COMPOSITION:
00664 
00665                 <span class="keywordflow">if</span> (bAnsiIMC)
00666                     uiTempNum = <a class="code" href="../../d4/d8/jtranmsg_8c.html#a0">JTransCompositionA</a>(lpIMC,lpCompStr,pTransMsgTemp,pTransMsg);
00667                 <span class="keywordflow">else</span>
00668                     uiTempNum = <a class="code" href="../../d4/d8/jtranmsg_8c.html#a1">JTransCompositionW</a>(lpIMC,lpCompStr,pTransMsgTemp,pTransMsg);
00669 
00670                 uiNewNum  += uiTempNum;
00671                 pTransMsg += uiTempNum;
00672 
00673                 <span class="keywordflow">if</span> ( !(lpIMC-&gt;fdw31Compat &amp; F31COMPAT_MCWHIDDEN) )
00674                 {
00675                     <span class="keywordflow">if</span> ( lpIMC-&gt;cfCompForm.dwStyle != CFS_DEFAULT ) {
00676                         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>((HWND)lpIMC-&gt;hWnd, WM_IME_REPORT, IR_CHANGECONVERT, 0L);
00677                     }
00678                 }
00679 
00680                 <span class="keywordflow">break</span>;
00681 
00682             <span class="keywordflow">case</span> WM_IME_STARTCOMPOSITION:
00683 
00684                 <span class="keywordflow">if</span> ( !(lpIMC-&gt;fdw31Compat &amp; F31COMPAT_MCWHIDDEN) )
00685                 {
00686                     <span class="keywordflow">if</span> ( lpIMC-&gt;cfCompForm.dwStyle != CFS_DEFAULT ) {
00687                         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>((HWND)lpIMC-&gt;hWnd, WM_IME_REPORT, IR_OPENCONVERT, 0L);
00688                     }
00689 
00690                     *pTransMsg++ = *pTransMsgTemp;
00691                     uiNewNum++;
00692                 }
00693 
00694                 <span class="keywordflow">break</span>;
00695 
00696             <span class="keywordflow">case</span> WM_IME_ENDCOMPOSITION:
00697 
00698                 <span class="keywordflow">if</span> ( !(lpIMC-&gt;fdw31Compat &amp; F31COMPAT_MCWHIDDEN) )
00699                 {
00700                     <span class="keywordflow">if</span> ( lpIMC-&gt;cfCompForm.dwStyle != CFS_DEFAULT ) {
00701                         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>((HWND)lpIMC-&gt;hWnd, WM_IME_REPORT, IR_CLOSECONVERT, 0L);
00702                     }
00703 
00704                     *pTransMsg++ = *pTransMsgTemp;
00705                     uiNewNum++;
00706 
00707                 }
00708                 <span class="keywordflow">else</span> {
00709 
00710                     HWND <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a> = (HWND)lpIMC-&gt;hWnd;
00711                     HGLOBAL hUndet = 0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00712 
00713                     <span class="keywordflow">if</span> (hUndet = GlobalAlloc(GHND | GMEM_SHARE, <span class="keyword">sizeof</span>(UNDETERMINESTRUCT)))
00714                     {
00715                         <span class="keywordflow">if</span> (! <a class="code" href="../../d3/d8/winmgrc_8c.html#a27">IsWindowUnicode</a>(lpIMC-&gt;hWnd))
00716                             SendMessageA(hWnd,WM_IME_REPORT, IR_UNDETERMINE, (LPARAM)hUndet);
00717                         <span class="keywordflow">else</span>
00718                             SendMessageW(hWnd,WM_IME_REPORT, IR_UNDETERMINE, (LPARAM)hUndet);
00719 
00720                         GlobalFree(hUndet);
00721                     }
00722                 }
00723 
00724                 <span class="keywordflow">break</span>;
00725 
00726             <span class="keywordflow">case</span> WM_IME_NOTIFY:
00727 
00728                 <span class="keywordflow">switch</span> (pTransMsgTemp-&gt;wParam)
00729                 {
00730                     <span class="keywordflow">case</span> IMN_OPENCANDIDATE:
00731 
00732                         <span class="comment">//</span>
00733                         <span class="comment">// When 3.1 Application want to set MCW_HIDDEN,</span>
00734                         <span class="comment">// the candidate window of Chicago IME go way</span>
00735                         <span class="comment">// from the restangle of the composition string</span>
00736                         <span class="comment">// that will be drawn by the application.</span>
00737                         <span class="comment">//</span>
00738 
00739                         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d9/client_2wow_8c.html#a11">IsWindow</a>((HWND)lpIMC-&gt;hWnd) &amp;&amp;
00740                             (lpIMC-&gt;fdw31Compat &amp; F31COMPAT_MCWHIDDEN)) {
00741                             CANDIDATEFORM cfCandForm;
00742                             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i;
00743                             <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwNumCand = 0;
00744 
00745                             <span class="keywordflow">for</span> (i = 0; i &lt; 32; i++)
00746                             {
00747                                 <span class="comment">//</span>
00748                                 <span class="comment">// Only the opened candidate should be updated.</span>
00749                                 <span class="comment">//</span>
00750                                 <span class="keywordflow">if</span> (!(pTransMsgTemp-&gt;lParam &amp; (01<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a> &lt;&lt; i)))
00751                                     <span class="keywordflow">continue</span>;
00752 
00753                                 cfCandForm.dwIndex = i;
00754                                 cfCandForm.dwStyle = CFS_EXCLUDE;
00755                                 cfCandForm.ptCurrentPos = lpIMC-&gt;cfCompForm.ptCurrentPos;
00756                                 cfCandForm.rcArea       = lpIMC-&gt;cfCompForm.rcArea;
00757                                 <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hDefIMEWnd, WM_IME_CONTROL, IMC_SETCANDIDATEPOS,
00758                                                (LPARAM)(LPCANDIDATEFORM)&amp;cfCandForm);
00759                             }
00760                         }
00761 
00762                         <span class="keywordflow">break</span>;
00763 
00764                     <span class="keywordflow">default</span> :
00765                         <span class="keywordflow">break</span>;
00766                 }
00767 
00768                 <span class="keywordflow">if</span> (!(lpIMC-&gt;fdw31Compat &amp; F31COMPAT_MCWHIDDEN)) {
00769                     *pTransMsg++ = *pTransMsgTemp;
00770                     uiNewNum++;
00771                 }
00772                 <span class="keywordflow">else</span> {
00773                     <span class="comment">//</span>
00774                     <span class="comment">// For win31 apps who set MCW_HIDDEN, we won't give them</span>
00775                     <span class="comment">// IMN_OPENCANDIDATE here. Instead, send it directly to the</span>
00776                     <span class="comment">// default IME window.</span>
00777                     <span class="comment">//</span>
00778                     <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>( hDefIMEWnd, 
00779                                  pTransMsgTemp-&gt;message,
00780                                  pTransMsgTemp-&gt;wParam,
00781                                  pTransMsgTemp-&gt;lParam
00782                                );
00783                 }
00784 
00785                 <span class="keywordflow">break</span>;
00786 
00787             <span class="keywordflow">default</span> :
00788                 *pTransMsg++ = *pTransMsgTemp;
00789                 uiNewNum++;
00790                 <span class="keywordflow">break</span>;
00791         }
00792 
00793         pTransMsgTemp++;
00794     }
00795 
00796     <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(pTransMsgBuf);
00797 
00798 wtmsg2_j_10:
00799     <span class="keywordflow">return</span> (uiNewNum);
00800 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a114" doxytag="immcli.h::WINNLSTranslateMessageK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT WINNLSTranslateMessageK           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>iNumMsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PTRANSMSG&nbsp;</td>
          <td class="mdname" nowrap> <em>pTransMsg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPINPUTCONTEXT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCOMPOSITIONSTRING&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCompStr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsiIMC</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d9/ktranmsg_8c-source.html#l00128">128</a> of file <a class="el" href="../../d8/d9/ktranmsg_8c-source.html">ktranmsg.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00184">HIBYTE</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00027">ImmGetDefaultIMEWnd()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00533">IsWindowUnicode()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00478">WINNLSTranslateMessage()</a>.
<p>
<pre class="fragment"><div>00133 {
00134     HWND    hDefIMEWnd;
00135     <span class="keywordtype">int</span>     i, j;
00136     <span class="keyword">static</span>  <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> bp1stInterim = 0;
00137     <span class="keyword">static</span>  <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> bp2ndInterim = 0;
00138     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    bAnsiWnd;
00139     HWND    <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a>;
00140     WCHAR   wchUni;
00141     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>    chAnsi[2];
00142     <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>    bchLow, bchHi, bCh;
00143     <a class="code" href="../../d0/d5/perfuser_8c.html#a20">BOOL</a> (WINAPI* fpPostMessage)(HWND <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a>, <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> Msg, WPARAM wParam, LPARAM lParam);
00144     LRESULT (WINAPI* fpSendMessage)(HWND <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a>, <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> Msg, WPARAM wParam, LPARAM lParam);
00145 
00146     <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a> = (HWND)lpIMC-&gt;hWnd;
00147 
00148     hDefIMEWnd = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a4">ImmGetDefaultIMEWnd</a>(hWnd);
00149 
00150     bAnsiWnd = !<a class="code" href="../../d3/d8/winmgrc_8c.html#a27">IsWindowUnicode</a>(hWnd) ? <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> : <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00151     <span class="keywordflow">if</span> (bAnsiWnd) {
00152         fpPostMessage = PostMessageA;
00153         fpSendMessage = SendMessageA;
00154     } <span class="keywordflow">else</span> {
00155         fpPostMessage = PostMessageW;
00156         fpSendMessage = SendMessageW;
00157     }
00158 
00159     <span class="keywordflow">for</span> (i = 0; i &lt; iNumMsg; i++) {
00160 
00161         <span class="keywordflow">switch</span> (pTransMsg[i].message) {
00162 
00163         <span class="keywordflow">case</span> WM_IME_COMPOSITION :
00164 
00165             <span class="keywordflow">if</span> (pTransMsg[i].lParam &amp; GCS_RESULTSTR) {
00166 
00167                 fpPostMessage(hWnd, WM_IME_REPORT, IR_STRINGSTART, 0L);
00168 
00169                 <span class="keywordflow">for</span> (j = 0; j &lt; (<span class="keywordtype">int</span>)lpCompStr-&gt;dwResultStrLen; j++) {
00170                     LPARAM  lParam;
00171                     bCh = 0;
00172                     <span class="keywordflow">if</span> (bAnsiIMC) {
00173                         bCh = *((LPSTR)lpCompStr + lpCompStr-&gt;dwResultStrOffset + j);
00174                         <span class="keywordflow">if</span> (bAnsiWnd) {
00175                             <span class="keywordflow">if</span> (IsDBCSLeadByte(bCh)) {
00176                                 lParam = (bCh &gt;= 0xB0 &amp;&amp; bCh &lt;= 0xC8)? 0xFFF10001<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>: 0xFFF20001<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00177                                 PostMessageA(hWnd, WM_CHAR, bCh, lParam);
00178                                 bCh = *((LPSTR)lpCompStr + lpCompStr-&gt;dwResultStrOffset + ++j);
00179                             } <span class="keywordflow">else</span>
00180                                 lParam = 1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00181                             PostMessageA(hWnd, WM_CHAR, bCh, lParam);
00182                         } <span class="keywordflow">else</span> {
00183                             chAnsi[0] = bCh;
00184                             chAnsi[1] = *((LPSTR)lpCompStr + lpCompStr-&gt;dwResultStrOffset + ++j);
00185 
00186                             MultiByteToWideChar(CP_ACP, MB_PRECOMPOSED, chAnsi, 2, &amp;wchUni, 1);
00187 
00188                             PostMessageW(hWnd, WM_CHAR, wchUni, lParam);
00189                         }
00190                     } <span class="keywordflow">else</span> {    <span class="comment">// !bAnsiIMC</span>
00191                         bCh = *((LPSTR)lpCompStr + lpCompStr-&gt;dwResultStrOffset + j * <span class="keyword">sizeof</span>(WCHAR));
00192                         wchUni = bCh | ( *((LPSTR)lpCompStr + lpCompStr-&gt;dwResultStrOffset +
00193                                            (j * <span class="keyword">sizeof</span>(WCHAR) + 1)) &lt;&lt; 8);
00194 
00195                         <span class="keywordflow">if</span> (bAnsiWnd) {
00196                             WideCharToMultiByte(CP_ACP, 0, &amp;wchUni, 1, chAnsi, 2, NULL, NULL);
00197 
00198                             bchLow = chAnsi[0];
00199                             bchHi  = chAnsi[0]; <span class="comment">//(BYTE)chAnsi;</span>
00200 
00201                             <span class="keywordflow">if</span> (IsDBCSLeadByte(bchLow)) {
00202                                 lParam = (bchLow &gt;= 0xB0 &amp;&amp; bchLow &lt;= 0xC8) ? 0xFFF10001<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>: 0xFFF20001<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00203                                 PostMessageA(hWnd, WM_CHAR, bchLow, lParam);
00204                                 bchHi = chAnsi[1];
00205                             } <span class="keywordflow">else</span>
00206                                 lParam = 1<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>;
00207 
00208                             PostMessageA(hWnd, WM_CHAR, bchHi, lParam);
00209                         } <span class="keywordflow">else</span> {
00210                             PostMessageW(hWnd, WM_CHAR, wchUni, lParam);
00211                         }
00212                     }
00213                 }
00214 
00215                 fpPostMessage(hWnd, WM_IME_REPORT, IR_STRINGEND, 0L);
00216 
00217             } <span class="keywordflow">else</span> {    <span class="comment">// !(pTransMsg[i].lParam &amp; GCS_RESULTSTR)</span>
00218 
00219                 <span class="keywordflow">if</span> (pTransMsg[i].wParam) {
00220 
00221                     fpPostMessage(hWnd, WM_IME_REPORT, IR_STRINGSTART, 0L);
00222 
00223                     bp1stInterim = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a5">HIBYTE</a>(LOWORD(pTransMsg[i].wParam));
00224                     bp2ndInterim = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(LOWORD(pTransMsg[i].wParam));
00225 
00226                     <span class="keywordflow">if</span> (bAnsiIMC) {
00227                         <span class="keywordflow">if</span> (bAnsiWnd) {
00228                             PostMessageA(hWnd, WM_INTERIM, bp1stInterim, 0x00F00001L);
00229                             PostMessageA(hWnd, WM_INTERIM, bp2ndInterim, 0x00F00001L);
00230                             PostMessageA(hWnd, WM_IME_REPORT, IR_STRINGEND, 0L);
00231                         } <span class="keywordflow">else</span> {
00232                             chAnsi[0] = bp1stInterim;
00233                             chAnsi[1] = bp2ndInterim;
00234 
00235                             <span class="keywordflow">if</span> (MultiByteToWideChar(CP_ACP, MB_PRECOMPOSED, chAnsi, 2, &amp;wchUni, 1))
00236                                 PostMessageW(hWnd, WM_INTERIM, wchUni, 0x00F00001L);
00237                             PostMessageW(hWnd, WM_IME_REPORT, IR_STRINGEND, 0L);
00238                         }
00239 
00240                     } <span class="keywordflow">else</span> {
00241                         <span class="keywordflow">if</span> (bAnsiWnd) {
00242                             wchUni = (bp1stInterim &lt;&lt; 8) | bp2ndInterim;  <span class="comment">//(WORD)lpdwTransKey[i*3 + 1];</span>
00243                             WideCharToMultiByte(CP_ACP, 0, &amp;wchUni, 1, chAnsi, 2, NULL, NULL);
00244 
00245                             bchLow = chAnsi[0];
00246                             bchHi  = chAnsi[1];
00247 
00248                             PostMessageA(hWnd, WM_INTERIM, bchLow, 0x00F00001L);
00249                             PostMessageA(hWnd, WM_INTERIM, bchHi,  0x00F00001L);
00250                             PostMessageA(hWnd, WM_IME_REPORT, IR_STRINGEND, 0L);
00251                         } <span class="keywordflow">else</span> {
00252                             PostMessageW(hWnd, WM_INTERIM, pTransMsg[i].wParam, 0x00F00001L);
00253                             PostMessageW(hWnd, WM_IME_REPORT, IR_STRINGEND, 0L);
00254                         }
00255                     }
00256                     fpSendMessage(hDefIMEWnd, WM_IME_ENDCOMPOSITION, 0, 0L);
00257 
00258                 } <span class="keywordflow">else</span> {    <span class="comment">// !pTransMsg[i].wParam</span>
00259 
00260                     fpPostMessage(hWnd, WM_IME_REPORT, IR_STRINGSTART, 0L);
00261 
00262                     <span class="keywordflow">if</span> (bAnsiIMC) {
00263                         <span class="keywordflow">if</span> (bAnsiWnd) {
00264                             PostMessageA(hWnd, WM_CHAR, bp1stInterim, 0xFFF10001L);
00265                             PostMessageA(hWnd, WM_CHAR, bp2ndInterim, 0xFFF10001L);
00266                             PostMessageA(hWnd, WM_IME_REPORT, IR_STRINGEND, 0L);
00267                             PostMessageA(hWnd, WM_KEYDOWN, VK_BACK, 0x000E0001L);
00268                         } <span class="keywordflow">else</span> {
00269                             chAnsi[0] = bp1stInterim;
00270                             chAnsi[1] = bp2ndInterim;
00271 
00272                             <span class="keywordflow">if</span> (MultiByteToWideChar(CP_ACP, MB_PRECOMPOSED, chAnsi, 2, &amp;wchUni, 1))
00273                                 PostMessageW(hWnd, WM_CHAR, wchUni, 0xFFF10001L);
00274 
00275                             PostMessageW(hWnd, WM_IME_REPORT, IR_STRINGEND, 0L);
00276                             PostMessageW(hWnd, WM_KEYDOWN, VK_BACK, 0x000E0001L);
00277                         }
00278                     } <span class="keywordflow">else</span> {    <span class="comment">// !bAnsiIMC</span>
00279                         <span class="keywordflow">if</span> (bAnsiWnd) {
00280                             wchUni = (bp1stInterim &lt;&lt; 8 ) | bp2ndInterim;
00281 
00282                             WideCharToMultiByte(CP_ACP, 0, &amp;wchUni, 1, chAnsi, 2, NULL, NULL);
00283 
00284                             bchLow = chAnsi[0];
00285                             bchHi  = chAnsi[1];
00286 
00287                             PostMessageA(hWnd, WM_CHAR, bchLow, 0xFFF10001L);
00288                             PostMessageA(hWnd, WM_CHAR, bchHi,  0xFFF10001L);
00289                             PostMessageA(hWnd, WM_IME_REPORT, IR_STRINGEND, 0L);
00290                             PostMessageA(hWnd, WM_KEYDOWN, VK_BACK, 0x000E0001L);
00291                         } <span class="keywordflow">else</span> {
00292                             wchUni = bp1stInterim | (bp2ndInterim &lt;&lt; 8);
00293 
00294                             PostMessageW(hWnd, WM_CHAR, wchUni, 0xFFF10001L);
00295                             PostMessageW(hWnd, WM_IME_REPORT, IR_STRINGEND, 0L);
00296                             PostMessageW(hWnd, WM_KEYDOWN, VK_BACK, 0x000E0001L);
00297                         }
00298                     }
00299                 }
00300             }
00301             <span class="keywordflow">break</span>;
00302 
00303         <span class="keywordflow">case</span> WM_IME_STARTCOMPOSITION :
00304         <span class="keywordflow">case</span> WM_IME_ENDCOMPOSITION :
00305             <span class="keywordflow">break</span>;
00306 
00307         <span class="keywordflow">case</span> WM_IME_KEYDOWN:
00308             fpPostMessage(hWnd, WM_KEYDOWN, LOWORD(pTransMsg[i].wParam),
00309                           pTransMsg[i].lParam);
00310             <span class="keywordflow">break</span>;
00311 
00312         <span class="keywordflow">case</span> WM_IME_KEYUP:
00313             fpPostMessage(hWnd, WM_KEYUP, LOWORD(pTransMsg[i].wParam),
00314                           pTransMsg[i].lParam);
00315             <span class="keywordflow">break</span>;
00316 
00317         <span class="keywordflow">default</span> :
00318             fpSendMessage(hDefIMEWnd, pTransMsg[i].message,
00319                           pTransMsg[i].wParam, pTransMsg[i].lParam);
00320             <span class="keywordflow">break</span>;
00321         }
00322     }
00323 
00324     <span class="keywordflow">return</span> 0;   <span class="comment">// indicates all messages are post/sent within this function.</span>
00325 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a57" doxytag="immcli.h::gcsImeDpi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CRITICAL_SECTION <a class="el" href="../../d4/d0/immcli_8h.html#a57">gcsImeDpi</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00096">96</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00050">ImmDisableIME()</a>, <a class="el" href="../../d8/d9/imminit_8c-source.html#l00067">ImmDllInitialize()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00416">ImmFreeLayout()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00769">ImmGetImeDpi()</a>, <a class="el" href="../../d3/d9/imemenu_8c-source.html#l00560">ImmGetImeMenuItemsInterProcess()</a>, <a class="el" href="../../d8/d9/imminit_8c-source.html#l00019">ImmInitializeGlobals()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00793">ImmLockImeDpi()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00365">ImmUnloadIME()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, and <a class="el" href="../../d7/d9/immime_8c-source.html#l00234">LoadImeDpi()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a51" doxytag="immcli.h::gfInitialized" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOLEAN <a class="el" href="../../d4/d0/immcli_8h.html#a51">gfInitialized</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00089">89</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d8/d9/imminit_8c-source.html#l00067">ImmDllInitialize()</a>, and <a class="el" href="../../d8/d9/imminit_8c-source.html#l00019">ImmInitializeGlobals()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a52" doxytag="immcli.h::ghInst" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HINSTANCE <a class="el" href="../../d4/d0/immcli_8h.html#a52">ghInst</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00090">90</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/softkbd_8c-source.html#l00137">ImmCreateSoftKeyboard()</a>, <a class="el" href="../../d8/d9/imminit_8c-source.html#l00067">ImmDllInitialize()</a>, <a class="el" href="../../d8/d9/imminit_8c-source.html#l00019">ImmInitializeGlobals()</a>, <a class="el" href="../../d7/d8/softkbd_8c-source.html#l00024">RegisterSoftKeyboard()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00211">SKC1DrawBitmap()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00240">SKC1DrawLabel()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00285">SKT1DrawBitmap()</a>, and <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00316">SKT1DrawLabel()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a56" doxytag="immcli.h::gpImeDpi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> <a class="el" href="../../d4/d0/immcli_8h.html#a56">gpImeDpi</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00095">95</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00050">ImmDisableIME()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00416">ImmFreeLayout()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00769">ImmGetImeDpi()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00793">ImmLockImeDpi()</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00365">ImmUnloadIME()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, and <a class="el" href="../../d7/d9/immime_8c-source.html#l00234">LoadImeDpi()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a54" doxytag="immcli.h::gpsi" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d6/structtagSERVERINFO.html">PSERVERINFO</a> <a class="el" href="../../d9/d6/ntuser_2kernel_2globals_8h.html#a317">gpsi</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00092">92</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a59" doxytag="immcli.h::gptRaiseEdge" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> POINT <a class="el" href="../../d4/d0/immcli_8h.html#a59">gptRaiseEdge</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00099">99</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/softkbd_8c-source.html#l00065">GetSoftKeyboardDimension()</a>, <a class="el" href="../../d7/d8/softkbd_8c-source.html#l00137">ImmCreateSoftKeyboard()</a>, and <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00096">InitSKT1ButtonPos()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a58" doxytag="immcli.h::gptWorkArea" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> POINT <a class="el" href="../../d4/d0/immcli_8h.html#a58">gptWorkArea</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00098">98</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a55" doxytag="immcli.h::gSharedInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d6/structtagSHAREDINFO.html">SHAREDINFO</a> <a class="el" href="../../d9/d6/ntuser_2kernel_2globals_8h.html#a318">gSharedInfo</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00093">93</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a61" doxytag="immcli.h::gszRegKbdLayout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST WCHAR <a class="el" href="../../d4/d0/immcli_8h.html#a61">gszRegKbdLayout</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00102">102</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/layout_8c-source.html#l00602">GetImeLayout()</a>, <a class="el" href="../../d4/d0/layime_8c-source.html#l00038">ImmLoadLayout()</a>, and <a class="el" href="../../d5/d0/layout_8c-source.html#l00662">WriteImeLayout()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a62" doxytag="immcli.h::gszRegKbdOrder" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST WCHAR <a class="el" href="../../d4/d0/immcli_8h.html#a62">gszRegKbdOrder</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00106">106</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/layout_8c-source.html#l00662">WriteImeLayout()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a65" doxytag="immcli.h::gszValImeFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST WCHAR <a class="el" href="../../d4/d0/immcli_8h.html#a65">gszValImeFile</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00109">109</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/layout_8c-source.html#l00602">GetImeLayout()</a>, <a class="el" href="../../d4/d0/layime_8c-source.html#l00038">ImmLoadLayout()</a>, and <a class="el" href="../../d5/d0/layout_8c-source.html#l00662">WriteImeLayout()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a64" doxytag="immcli.h::gszValLayoutFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST WCHAR <a class="el" href="../../d4/d0/immcli_8h.html#a64">gszValLayoutFile</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00108">108</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/layout_8c-source.html#l00662">WriteImeLayout()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a63" doxytag="immcli.h::gszValLayoutText" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CONST WCHAR <a class="el" href="../../d4/d0/immcli_8h.html#a63">gszValLayoutText</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00107">107</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d5/d0/layout_8c-source.html#l00662">WriteImeLayout()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a60" doxytag="immcli.h::guScanCode" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT <a class="el" href="../../d4/d0/immcli_8h.html#a60">guScanCode</a>[0XFF]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00100">100</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/softkbd_8c-source.html#l00137">ImmCreateSoftKeyboard()</a>, <a class="el" href="../../d6/d7/sftkbdc1_8c-source.html#l00914">SKC1ButtonUp()</a>, <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l01099">SKT1ButtonUp()</a>, and <a class="el" href="../../d7/d7/sftkbdt1_8c-source.html#l00968">SKT1SetCursor()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a53" doxytag="immcli.h::pImmHeap" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PVOID <a class="el" href="../../d4/d0/immcli_8h.html#a53">pImmHeap</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d5/d9/immcli_8h-source.html#l00091">91</a> of file <a class="el" href="../../d5/d9/immcli_8h-source.html">immcli.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a66" doxytag="immcli.h::PtiCurrent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d2/d8/structtagTHREADINFO.html">PTHREADINFO</a> PtiCurrent(VOID)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:10 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

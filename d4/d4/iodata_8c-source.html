<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: iodata.c Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>iodata.c</h1><a href="../../d3/d5/iodata_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*++</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1989  Microsoft Corporation</span>
00004 <span class="comment"></span>
00005 <span class="comment">Module Name:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    iodata.c</span>
00008 <span class="comment"></span>
00009 <span class="comment">Abstract:</span>
00010 <span class="comment"></span>
00011 <span class="comment">    This module contains the global read/write data for the I/O system.</span>
00012 <span class="comment"></span>
00013 <span class="comment">Author:</span>
00014 <span class="comment"></span>
00015 <span class="comment">    Darryl E. Havens (darrylh) April 27, 1989</span>
00016 <span class="comment"></span>
00017 <span class="comment">Revision History:</span>
00018 <span class="comment"></span>
00019 <span class="comment"></span>
00020 <span class="comment">--*/</span>
00021 
00022 <span class="preprocessor">#include "<a class="code" href="../../d0/d6/iop_8h.html">iop.h</a>"</span>
00023 
00024 <span class="comment">//</span>
00025 <span class="comment">// Define the global read/write data for the I/O system.</span>
00026 <span class="comment">//</span>
00027 <span class="comment">// The following lock is used to guard access to the CancelRoutine address</span>
00028 <span class="comment">// in IRPs.  It must be locked to set the address of a routine, clear the</span>
00029 <span class="comment">// address of a routine, when a cancel routine is invoked, or when</span>
00030 <span class="comment">// manipulating any structure that will set a cancel routine address in</span>
00031 <span class="comment">// a packet.</span>
00032 <span class="comment">//</span>
00033 
<a name="l00034"></a><a class="code" href="../../d3/d5/iodata_8c.html#a1">00034</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d3/d5/iodata_8c.html#a1">IopCancelSpinLock</a>;
00035 
00036 <span class="comment">//</span>
00037 <span class="comment">// The following lock is used to guard access to VPB data structures.  It</span>
00038 <span class="comment">// must be held each time the reference count, mount flag, or device object</span>
00039 <span class="comment">// fields of a VPB are manipulated.</span>
00040 <span class="comment">//</span>
00041 
<a name="l00042"></a><a class="code" href="../../d3/d5/iodata_8c.html#a2">00042</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d3/d5/iodata_8c.html#a2">IopVpbSpinLock</a>;
00043 
00044 <span class="comment">//</span>
00045 <span class="comment">// The following lock is used to guard access to the I/O system database for</span>
00046 <span class="comment">// unloading drivers.  It must be locked to increment or decrement device</span>
00047 <span class="comment">// reference counts and to set the unload pending flag in a device object.</span>
00048 <span class="comment">// The lock is allocated by the I/O system during phase 1 initialization.</span>
00049 <span class="comment">//</span>
00050 <span class="comment">// This lock is also used to decrement the count of Associated IRPs for a</span>
00051 <span class="comment">// given Master IRP.</span>
00052 <span class="comment">//</span>
00053 
<a name="l00054"></a><a class="code" href="../../d3/d5/iodata_8c.html#a3">00054</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d3/d5/iodata_8c.html#a3">IopDatabaseLock</a>;
00055 
00056 <span class="comment">//</span>
00057 <span class="comment">// The following resource is used to control access to the I/O system's</span>
00058 <span class="comment">// database.  It allows exclusive access to the file system queue for</span>
00059 <span class="comment">// registering a file system as well as shared access to the same when</span>
00060 <span class="comment">// searching for a file system to mount a volume on some media.  The resource</span>
00061 <span class="comment">// is initialized by the I/O system initialization code during phase 1</span>
00062 <span class="comment">// initialization.</span>
00063 <span class="comment">//</span>
00064 
<a name="l00065"></a><a class="code" href="../../d3/d5/iodata_8c.html#a4">00065</a> <a class="code" href="../../d6/d4/struct__ERESOURCE.html">ERESOURCE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a4">IopDatabaseResource</a>;
00066 
00067 <span class="comment">//</span>
00068 <span class="comment">// The following resource is used to control access to security descriptors</span>
00069 <span class="comment">// on devices.  It allows multiple readers to perform security checks and</span>
00070 <span class="comment">// queries on device security, but only a single writer to modify the security</span>
00071 <span class="comment">// on a device at a time.</span>
00072 <span class="comment">//</span>
00073 
<a name="l00074"></a><a class="code" href="../../d3/d5/iodata_8c.html#a5">00074</a> <a class="code" href="../../d6/d4/struct__ERESOURCE.html">ERESOURCE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a5">IopSecurityResource</a>;
00075 
00076 <span class="comment">//</span>
00077 <span class="comment">// The following queue header contains the list of disk file systems currently</span>
00078 <span class="comment">// loaded into the system.  The list actually contains the device objects</span>
00079 <span class="comment">// for each of the file systems in the system.  Access to this queue is</span>
00080 <span class="comment">// protected using the IopDatabaseResource for exclusive (write) or shared</span>
00081 <span class="comment">// (read) access locks.</span>
00082 <span class="comment">//</span>
00083 
<a name="l00084"></a><a class="code" href="../../d3/d5/iodata_8c.html#a6">00084</a> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a6">IopDiskFileSystemQueueHead</a>;
00085 
00086 <span class="comment">//</span>
00087 <span class="comment">// The following queue header contains the list of CD ROM file systems currently</span>
00088 <span class="comment">// loaded into the system.  The list actually contains the device objects</span>
00089 <span class="comment">// for each of the file systems in the system.  Access to this queue is</span>
00090 <span class="comment">// protected using the IopDatabaseResource for exclusive (write) or shared</span>
00091 <span class="comment">// (read) access locks.</span>
00092 <span class="comment">//</span>
00093 
<a name="l00094"></a><a class="code" href="../../d3/d5/iodata_8c.html#a7">00094</a> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a7">IopCdRomFileSystemQueueHead</a>;
00095 
00096 <span class="comment">//</span>
00097 <span class="comment">// The following queue header contains the list of network file systems</span>
00098 <span class="comment">// (redirectors) currently loaded into the system.  The list actually</span>
00099 <span class="comment">// contains the device objects for each of the network file systems in the</span>
00100 <span class="comment">// system.  Access to this queue is protected using the IopDatabaseResource</span>
00101 <span class="comment">// for exclusive (write) or shared (read) access locks.</span>
00102 <span class="comment">//</span>
00103 
<a name="l00104"></a><a class="code" href="../../d3/d5/iodata_8c.html#a8">00104</a> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a8">IopNetworkFileSystemQueueHead</a>;
00105 
00106 <span class="comment">//</span>
00107 <span class="comment">// The following queue header contains the list of tape file systems currently</span>
00108 <span class="comment">// loaded into the system.  The list actually contains the device objects</span>
00109 <span class="comment">// for each of the file systems in the system.  Access to this queue is</span>
00110 <span class="comment">// protected using the IopDatabaseResource for exclusive (write) or shared</span>
00111 <span class="comment">// (read) access locks.</span>
00112 <span class="comment">//</span>
00113 
<a name="l00114"></a><a class="code" href="../../d3/d5/iodata_8c.html#a9">00114</a> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a9">IopTapeFileSystemQueueHead</a>;
00115 
00116 <span class="comment">//</span>
00117 <span class="comment">// The following queue header contains the list of boot drivers that have</span>
00118 <span class="comment">// registered for a call back once all devices have been enumerated.</span>
00119 <span class="comment">//</span>
00120 
<a name="l00121"></a><a class="code" href="../../d3/d5/iodata_8c.html#a10">00121</a> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a10">IopBootDriverReinitializeQueueHead</a>;
00122 
00123 <span class="comment">//</span>
00124 <span class="comment">// The following queue header contains the list of drivers that have</span>
00125 <span class="comment">// registered reinitialization routines.</span>
00126 <span class="comment">//</span>
00127 
<a name="l00128"></a><a class="code" href="../../d3/d5/iodata_8c.html#a11">00128</a> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a11">IopDriverReinitializeQueueHead</a>;
00129 
00130 <span class="comment">//</span>
00131 <span class="comment">// The following queue headers contain the lists of the drivers that have</span>
00132 <span class="comment">// registered shutdown notification routines.</span>
00133 <span class="comment">//</span>
00134 
<a name="l00135"></a><a class="code" href="../../d3/d5/iodata_8c.html#a12">00135</a> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a12">IopNotifyShutdownQueueHead</a>;
<a name="l00136"></a><a class="code" href="../../d3/d5/iodata_8c.html#a13">00136</a> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a13">IopNotifyLastChanceShutdownQueueHead</a>;
00137 
00138 <span class="comment">//</span>
00139 <span class="comment">// The following queue header contains the list of the driver that have</span>
00140 <span class="comment">// registered to be notified when a file system registers or unregisters itself</span>
00141 <span class="comment">// as an active file system.</span>
00142 <span class="comment">//</span>
00143 
<a name="l00144"></a><a class="code" href="../../d3/d5/iodata_8c.html#a14">00144</a> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a14">IopFsNotifyChangeQueueHead</a>;
00145 
00146 <span class="comment">//</span>
00147 <span class="comment">// The following are the lookaside lists used to keep track of the two I/O</span>
00148 <span class="comment">// Request Packet (IRP), the Memory Descriptor List (MDL) Lookaside list, and</span>
00149 <span class="comment">// the I/O Completion List (ICP) Lookaside list.</span>
00150 <span class="comment">//</span>
00151 <span class="comment">// The "large" IRP contains 4 stack locations, the maximum in the SDK, and the</span>
00152 <span class="comment">// "small" IRP contains a single entry, the most common case for devices other</span>
00153 <span class="comment">// than disks and network devices.</span>
00154 <span class="comment">//</span>
00155 
<a name="l00156"></a><a class="code" href="../../d3/d5/iodata_8c.html#a15">00156</a> <a class="code" href="../../d1/d4/struct__NPAGED__LOOKASIDE__LIST.html">NPAGED_LOOKASIDE_LIST</a> <a class="code" href="../../d3/d5/iodata_8c.html#a15">IopCompletionLookasideList</a>;
<a name="l00157"></a><a class="code" href="../../d3/d5/iodata_8c.html#a16">00157</a> <a class="code" href="../../d1/d4/struct__NPAGED__LOOKASIDE__LIST.html">NPAGED_LOOKASIDE_LIST</a> <a class="code" href="../../d3/d5/iodata_8c.html#a16">IopLargeIrpLookasideList</a>;
<a name="l00158"></a><a class="code" href="../../d3/d5/iodata_8c.html#a17">00158</a> <a class="code" href="../../d1/d4/struct__NPAGED__LOOKASIDE__LIST.html">NPAGED_LOOKASIDE_LIST</a> <a class="code" href="../../d3/d5/iodata_8c.html#a17">IopSmallIrpLookasideList</a>;
<a name="l00159"></a><a class="code" href="../../d3/d5/iodata_8c.html#a18">00159</a> <a class="code" href="../../d1/d4/struct__NPAGED__LOOKASIDE__LIST.html">NPAGED_LOOKASIDE_LIST</a> <a class="code" href="../../d3/d5/iodata_8c.html#a18">IopMdlLookasideList</a>;
<a name="l00160"></a><a class="code" href="../../d3/d5/iodata_8c.html#a19">00160</a> ULONG <a class="code" href="../../d8/d0/cmdat3_8c.html#a56">IopLargeIrpStackLocations</a>;
00161 
00162 
00163 <span class="comment">//</span>
00164 <span class="comment">// The following spinlock is used to control access to the I/O system's error</span>
00165 <span class="comment">// log database.  It is initialized by the I/O system initialization code when</span>
00166 <span class="comment">// the system is being initialized.  This lock must be owned in order to insert</span>
00167 <span class="comment">// or remove entries from either the free or entry queue.</span>
00168 <span class="comment">//</span>
00169 
<a name="l00170"></a><a class="code" href="../../d3/d5/iodata_8c.html#a20">00170</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d4/d4/alpha_2splocks_8c.html#a6">IopErrorLogLock</a>;
00171 
00172 <span class="comment">//</span>
00173 <span class="comment">// The following is the list head for all error log entries in the system which</span>
00174 <span class="comment">// have not yet been sent to the error log process.  Entries are written placed</span>
00175 <span class="comment">// onto the list by the IoWriteElEntry procedure.</span>
00176 <span class="comment">//</span>
00177 
<a name="l00178"></a><a class="code" href="../../d3/d5/iodata_8c.html#a21">00178</a> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a21">IopErrorLogListHead</a>;
00179 
00180 <span class="comment">//</span>
00181 <span class="comment">// The following is used to track how much memory is allocated to I/O error log</span>
00182 <span class="comment">// packets.  The spinlock is used to protect this variable.</span>
00183 <span class="comment">//</span>
00184 
<a name="l00185"></a><a class="code" href="../../d3/d5/iodata_8c.html#a22">00185</a> ULONG <a class="code" href="../../d3/d5/iodata_8c.html#a22">IopErrorLogAllocation</a>;
<a name="l00186"></a><a class="code" href="../../d3/d5/iodata_8c.html#a23">00186</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d4/d4/alpha_2splocks_8c.html#a7">IopErrorLogAllocationLock</a>;
00187 
00188 <span class="comment">//</span>
00189 <span class="comment">// The following spinlock is used by the I/O system to synchronize examining</span>
00190 <span class="comment">// the thread field of an I/O Request Packet so that the request can be</span>
00191 <span class="comment">// queued as a special kernel APC to the thread.  The reason that the</span>
00192 <span class="comment">// spinlock must be used is for cases when the request times out, and so</span>
00193 <span class="comment">// the thread has been permitted to possibly exit.</span>
00194 <span class="comment">//</span>
00195 
<a name="l00196"></a><a class="code" href="../../d3/d5/iodata_8c.html#a24">00196</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d3/d5/iodata_8c.html#a24">IopCompletionLock</a>;
00197 
00198 <span class="comment">//</span>
00199 <span class="comment">// The following global contains the queue of informational hard error</span>
00200 <span class="comment">// pop-ups.</span>
00201 <span class="comment">//</span>
00202 
<a name="l00203"></a><a class="code" href="../../d3/d5/iodata_8c.html#a25">00203</a> <a class="code" href="../../d8/d0/struct__IOP__HARD__ERROR__QUEUE.html">IOP_HARD_ERROR_QUEUE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a25">IopHardError</a>;
00204 
00205 <span class="comment">//</span>
00206 <span class="comment">// The following global is non-null when there is a pop-up on the screen</span>
00207 <span class="comment">// waiting for user action.  It points to that packet.</span>
00208 <span class="comment">//</span>
00209 
<a name="l00210"></a><a class="code" href="../../d3/d5/iodata_8c.html#a26">00210</a> <a class="code" href="../../d7/d0/struct__IOP__HARD__ERROR__PACKET.html">PIOP_HARD_ERROR_PACKET</a> <a class="code" href="../../d3/d5/iodata_8c.html#a26">IopCurrentHardError</a>;
00211 
00212 <span class="comment">//</span>
00213 <span class="comment">// The following are used to implement the I/O system's one second timer.</span>
00214 <span class="comment">// The lock protects access to the queue, the queue contains an entry for</span>
00215 <span class="comment">// each driver that needs to be invoked, and the timer and DPC data</span>
00216 <span class="comment">// structures are used to actually get the internal timer routine invoked</span>
00217 <span class="comment">// once every second.  The count is used to maintain the number of timer</span>
00218 <span class="comment">// entries that actually indicate that the driver is to be invoked.</span>
00219 <span class="comment">//</span>
00220 
<a name="l00221"></a><a class="code" href="../../d3/d5/iodata_8c.html#a27">00221</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d4/d4/alpha_2splocks_8c.html#a8">IopTimerLock</a>;
<a name="l00222"></a><a class="code" href="../../d3/d5/iodata_8c.html#a28">00222</a> LIST_ENTRY <a class="code" href="../../d3/d5/iodata_8c.html#a28">IopTimerQueueHead</a>;
<a name="l00223"></a><a class="code" href="../../d3/d5/iodata_8c.html#a29">00223</a> <a class="code" href="../../d1/d6/struct__KDPC.html">KDPC</a> <a class="code" href="../../d3/d5/iodata_8c.html#a29">IopTimerDpc</a>;
<a name="l00224"></a><a class="code" href="../../d3/d5/iodata_8c.html#a30">00224</a> <a class="code" href="../../d3/d8/struct__KTIMER.html">KTIMER</a> <a class="code" href="../../d3/d5/iodata_8c.html#a30">IopTimer</a>;
<a name="l00225"></a><a class="code" href="../../d3/d5/iodata_8c.html#a31">00225</a> ULONG <a class="code" href="../../d3/d5/iodata_8c.html#a31">IopTimerCount</a>;
00226 
00227 <span class="comment">//</span>
00228 <span class="comment">// The following are the global pointers for the Object Type Descriptors that</span>
00229 <span class="comment">// are created when each of the I/O specific object types are created.</span>
00230 <span class="comment">//</span>
00231 
<a name="l00232"></a><a class="code" href="../../d3/d5/iodata_8c.html#a32">00232</a> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a32">IoAdapterObjectType</a>;
<a name="l00233"></a><a class="code" href="../../d3/d5/iodata_8c.html#a33">00233</a> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a33">IoControllerObjectType</a>;
<a name="l00234"></a><a class="code" href="../../d3/d5/iodata_8c.html#a34">00234</a> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a34">IoCompletionObjectType</a>;
<a name="l00235"></a><a class="code" href="../../d3/d5/iodata_8c.html#a35">00235</a> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a35">IoDeviceObjectType</a>;
<a name="l00236"></a><a class="code" href="../../d3/d5/iodata_8c.html#a36">00236</a> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a36">IoDriverObjectType</a>;
<a name="l00237"></a><a class="code" href="../../d3/d5/iodata_8c.html#a37">00237</a> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a37">IoDeviceHandlerObjectType</a>;
<a name="l00238"></a><a class="code" href="../../d3/d5/iodata_8c.html#a38">00238</a> <a class="code" href="../../d3/d6/struct__OBJECT__TYPE.html">POBJECT_TYPE</a> <a class="code" href="../../d5/d8/fssup_8c.html#a3">IoFileObjectType</a>;
<a name="l00239"></a><a class="code" href="../../d3/d5/iodata_8c.html#a39">00239</a> ULONG        <a class="code" href="../../d3/d5/iodata_8c.html#a39">IoDeviceHandlerObjectSize</a>;
00240 
00241 <span class="comment">//</span>
00242 <span class="comment">// The following is a global lock and counters for I/O operations requested</span>
00243 <span class="comment">// on a system-wide basis.  The first three counters simply track the number</span>
00244 <span class="comment">// of read, write, and other types of operations that have been requested.</span>
00245 <span class="comment">// The latter three counters track the actual number of bytes that have been</span>
00246 <span class="comment">// transferred throughout the system.</span>
00247 <span class="comment">//</span>
00248 
<a name="l00249"></a><a class="code" href="../../d3/d5/iodata_8c.html#a40">00249</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d0/d5/io_8h.html#a379">IoStatisticsLock</a>;
<a name="l00250"></a><a class="code" href="../../d3/d5/iodata_8c.html#a41">00250</a> ULONG <a class="code" href="../../d0/d5/io_8h.html#a380">IoReadOperationCount</a>;
<a name="l00251"></a><a class="code" href="../../d3/d5/iodata_8c.html#a42">00251</a> ULONG <a class="code" href="../../d0/d5/io_8h.html#a381">IoWriteOperationCount</a>;
<a name="l00252"></a><a class="code" href="../../d3/d5/iodata_8c.html#a43">00252</a> ULONG <a class="code" href="../../d0/d5/io_8h.html#a382">IoOtherOperationCount</a>;
<a name="l00253"></a><a class="code" href="../../d3/d5/iodata_8c.html#a44">00253</a> LARGE_INTEGER <a class="code" href="../../d0/d5/io_8h.html#a383">IoReadTransferCount</a>;
<a name="l00254"></a><a class="code" href="../../d3/d5/iodata_8c.html#a45">00254</a> LARGE_INTEGER <a class="code" href="../../d0/d5/io_8h.html#a384">IoWriteTransferCount</a>;
<a name="l00255"></a><a class="code" href="../../d3/d5/iodata_8c.html#a46">00255</a> LARGE_INTEGER <a class="code" href="../../d0/d5/io_8h.html#a385">IoOtherTransferCount</a>;
00256 
00257 <span class="comment">//</span>
00258 <span class="comment">// The following is the base pointer for the crash dump control block that is</span>
00259 <span class="comment">// used to control dumping all of physical memory to the paging file after a</span>
00260 <span class="comment">// system crash.  And, the checksum for the dump control block is also declared.</span>
00261 <span class="comment">//</span>
00262 
<a name="l00263"></a><a class="code" href="../../d3/d5/iodata_8c.html#a47">00263</a> <a class="code" href="../../d1/d1/struct__DUMP__CONTROL__BLOCK.html">PDUMP_CONTROL_BLOCK</a> <a class="code" href="../../d3/d5/iodata_8c.html#a47">IopDumpControlBlock</a>;
<a name="l00264"></a><a class="code" href="../../d3/d5/iodata_8c.html#a48">00264</a> ULONG <a class="code" href="../../d3/d5/iodata_8c.html#a48">IopDumpControlBlockChecksum</a>;
00265 
00266 <span class="comment">//</span>
00267 <span class="comment">// The following are the spin lock and event that allow the I/O system to</span>
00268 <span class="comment">// implement fast file object locks.</span>
00269 <span class="comment">//</span>
00270 
<a name="l00271"></a><a class="code" href="../../d3/d5/iodata_8c.html#a49">00271</a> <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d3/d5/iodata_8c.html#a49">IopFastLockEvent</a>;
00272 
00273 <span class="comment">//</span>
00274 <span class="comment">// The following is a monotonically increasing number (retrieved via</span>
00275 <span class="comment">// InterlockedIncrement) that is used by IoCreateDevice to automatically</span>
00276 <span class="comment">// generate a device object name when the FILE_AUTOGENERATED_DEVICE_NAME</span>
00277 <span class="comment">// device characteristic is specified.</span>
00278 <span class="comment">//</span>
00279 
<a name="l00280"></a><a class="code" href="../../d3/d5/iodata_8c.html#a50">00280</a> LONG <a class="code" href="../../d3/d5/iodata_8c.html#a50">IopUniqueDeviceObjectNumber</a>;
00281 
00282 <span class="comment">//</span>
00283 <span class="comment">// IoRemoteBootClient indicates whether the system was booted as a remote</span>
00284 <span class="comment">// boot client.</span>
00285 <span class="comment">//</span>
00286 
<a name="l00287"></a><a class="code" href="../../d3/d5/iodata_8c.html#a51">00287</a> BOOLEAN <a class="code" href="../../d0/d5/io_8h.html#a399">IoRemoteBootClient</a>;
00288 
00289 <span class="preprocessor">#if defined(REMOTE_BOOT)</span>
00290 <span class="preprocessor"></span><span class="comment">//</span>
00291 <span class="comment">// The following indicates whether or not the Client Side Caching subsystem</span>
00292 <span class="comment">// was successfully initialized.</span>
00293 <span class="comment">//</span>
00294 
00295 BOOLEAN IoCscInitializationFailed;
00296 <span class="preprocessor">#endif</span>
00297 <span class="preprocessor"></span>
00298 <span class="comment">//</span>
00299 <span class="comment">// The following are used to synchronize with the link tracking service while establishing a connection.</span>
00300 <span class="comment">//</span>
00301 
<a name="l00302"></a><a class="code" href="../../d3/d5/iodata_8c.html#a52">00302</a> <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d3/d5/iodata_8c.html#a52">IopLinkTrackingPortObject</a>;
<a name="l00303"></a><a class="code" href="../../d3/d5/iodata_8c.html#a53">00303</a> <a class="code" href="../../d8/d1/struct__LINK__TRACKING__PACKET.html">LINK_TRACKING_PACKET</a> <a class="code" href="../../d3/d5/iodata_8c.html#a53">IopLinkTrackingPacket</a>;
00304 
00305 <span class="comment">//</span>
00306 <span class="comment">// Function pointers of key IO routines.</span>
00307 <span class="comment">// The functions need to be in their own cache lines as they are readonly and </span>
00308 <span class="comment">// never modified after boot.</span>
00309 <span class="comment">//</span>
00310 
<a name="l00311"></a><a class="code" href="../../d3/d5/iodata_8c.html#a0">00311</a> <span class="preprocessor">#define CACHE_SIZE      128</span>
<a name="l00312"></a><a class="code" href="../../d3/d5/iodata_8c.html#a54">00312</a> <span class="preprocessor"></span>UCHAR                   <a class="code" href="../../d3/d5/iodata_8c.html#a54">IopPrePadding</a>[<a class="code" href="../../d3/d5/iodata_8c.html#a0">CACHE_SIZE</a>] = {0};
<a name="l00313"></a><a class="code" href="../../d3/d5/iodata_8c.html#a55">00313</a> PIO_CALL_DRIVER         <a class="code" href="../../d3/d5/iodata_8c.html#a55">pIofCallDriver</a> = 0;
<a name="l00314"></a><a class="code" href="../../d3/d5/iodata_8c.html#a56">00314</a> PIO_COMPLETE_REQUEST    <a class="code" href="../../d3/d5/iodata_8c.html#a56">pIofCompleteRequest</a> = 0;
<a name="l00315"></a><a class="code" href="../../d3/d5/iodata_8c.html#a57">00315</a> <a class="code" href="../../d0/d6/iop_8h.html#a38">PIO_ALLOCATE_IRP</a>        <a class="code" href="../../d3/d5/iodata_8c.html#a57">pIoAllocateIrp</a> = 0;
<a name="l00316"></a><a class="code" href="../../d3/d5/iodata_8c.html#a58">00316</a> <a class="code" href="../../d0/d6/iop_8h.html#a37">PIO_FREE_IRP</a>            <a class="code" href="../../d3/d5/iodata_8c.html#a58">pIoFreeIrp</a> = 0;
<a name="l00317"></a><a class="code" href="../../d3/d5/iodata_8c.html#a59">00317</a> UCHAR                   <a class="code" href="../../d3/d5/iodata_8c.html#a59">IopPostPadding</a>[<a class="code" href="../../d3/d5/iodata_8c.html#a0">CACHE_SIZE</a>] = {0};
00318 
00319 <span class="comment">//*********</span>
00320 <span class="comment">//</span>
00321 <span class="comment">// Note:  All of the following data is potentially pageable, depending on the</span>
00322 <span class="comment">//        target platform.</span>
00323 <span class="comment">//</span>
00324 <span class="comment">//*********</span>
00325 
00326 <span class="preprocessor">#ifdef ALLOC_DATA_PRAGMA</span>
00327 <span class="preprocessor"></span><span class="preprocessor">#pragma data_seg("PAGE")</span>
00328 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00329 <span class="preprocessor"></span>
00330 <span class="comment">//</span>
00331 <span class="comment">// The following semaphore is used by the IO system when it reports resource</span>
00332 <span class="comment">// usage to the configuration registry on behalf of a driver.  This semaphore</span>
00333 <span class="comment">// is initialized by the I/O system initialization code when the system is</span>
00334 <span class="comment">// started.</span>
00335 <span class="comment">//</span>
00336 
<a name="l00337"></a><a class="code" href="../../d3/d5/iodata_8c.html#a60">00337</a> <a class="code" href="../../d8/d7/struct__KSEMAPHORE.html">KSEMAPHORE</a> <a class="code" href="../../d3/d5/iodata_8c.html#a60">IopRegistrySemaphore</a>;
00338 
00339 <span class="comment">//</span>
00340 <span class="comment">// The following are used to store the handle and a pointer to the referenced</span>
00341 
00342 <span class="comment">// whenever a file is moved across systems.</span>
00343 <span class="comment">//</span>
00344 
<a name="l00345"></a><a class="code" href="../../d3/d5/iodata_8c.html#a61">00345</a> PVOID <a class="code" href="../../d3/d5/iodata_8c.html#a61">IopLinkTrackingServiceObject</a>;
<a name="l00346"></a><a class="code" href="../../d3/d5/iodata_8c.html#a62">00346</a> <a class="code" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> <a class="code" href="../../d3/d5/iodata_8c.html#a62">IopLinkTrackingServiceEvent</a>;
00347 
00348 
00349 <span class="comment">//</span>
00350 <span class="comment">// The following array specifies the minimum length of the FileInformation</span>
00351 <span class="comment">// buffer for an NtQueryInformationFile service.</span>
00352 <span class="comment">//</span>
00353 <span class="comment">// WARNING:  This array depends on the order of the values in the</span>
00354 <span class="comment">//           FileInformationClass enumerated type.  Note that the</span>
00355 <span class="comment">//           enumerated type is one-based and the array is zero-based.</span>
00356 <span class="comment">//</span>
00357 
<a name="l00358"></a><a class="code" href="../../d3/d5/iodata_8c.html#a63">00358</a> UCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a63">IopQueryOperationLength</a>[] =
00359           {
00360             0,
00361             0,                                         <span class="comment">//  1 FileDirectoryInformation</span>
00362             0,                                         <span class="comment">//  2 FileFullDirectoryInformation</span>
00363             0,                                         <span class="comment">//  3 FileBothDirectoryInformation</span>
00364             <span class="keyword">sizeof</span>( FILE_BASIC_INFORMATION ),          <span class="comment">//  4 FileBasicInformation</span>
00365             <span class="keyword">sizeof</span>( FILE_STANDARD_INFORMATION ),       <span class="comment">//  5 FileStandardInformation</span>
00366             <span class="keyword">sizeof</span>( FILE_INTERNAL_INFORMATION ),       <span class="comment">//  6 FileInternalInformation</span>
00367             <span class="keyword">sizeof</span>( FILE_EA_INFORMATION ),             <span class="comment">//  7 FileEaInformation</span>
00368             <span class="keyword">sizeof</span>( FILE_ACCESS_INFORMATION ),         <span class="comment">//  8 FileAccessInformation</span>
00369             <span class="keyword">sizeof</span>( FILE_NAME_INFORMATION ),           <span class="comment">//  9 FileNameInformation</span>
00370             0,                                         <span class="comment">// 10 FileRenameInformation</span>
00371             0,                                         <span class="comment">// 11 FileLinkInformation</span>
00372             0,                                         <span class="comment">// 12 FileNamesInformation</span>
00373             0,                                         <span class="comment">// 13 FileDispositionInformation</span>
00374             <span class="keyword">sizeof</span>( FILE_POSITION_INFORMATION ),       <span class="comment">// 14 FilePositionInformation</span>
00375             0,                                         <span class="comment">// 15 FileFullEaInformation</span>
00376             <span class="keyword">sizeof</span>( FILE_MODE_INFORMATION ),           <span class="comment">// 16 FileModeInformation</span>
00377             <span class="keyword">sizeof</span>( FILE_ALIGNMENT_INFORMATION ),      <span class="comment">// 17 FileAlignmentInformation</span>
00378             <span class="keyword">sizeof</span>( FILE_ALL_INFORMATION ),            <span class="comment">// 18 FileAllInformation</span>
00379             0,                                         <span class="comment">// 19 FileAllocationInformation</span>
00380             0,                                         <span class="comment">// 20 FileEndOfFileInformation</span>
00381             <span class="keyword">sizeof</span>( FILE_NAME_INFORMATION ),           <span class="comment">// 21 FileAlternateNameInformation</span>
00382             <span class="keyword">sizeof</span>( FILE_STREAM_INFORMATION ),         <span class="comment">// 22 FileStreamInformation</span>
00383             <span class="keyword">sizeof</span>( FILE_PIPE_INFORMATION ),           <span class="comment">// 23 FilePipeInformation</span>
00384             <span class="keyword">sizeof</span>( FILE_PIPE_LOCAL_INFORMATION ),     <span class="comment">// 24 FilePipeLocalInformation</span>
00385             <span class="keyword">sizeof</span>( FILE_PIPE_REMOTE_INFORMATION ),    <span class="comment">// 25 FilePipeRemoteInformation</span>
00386             <span class="keyword">sizeof</span>( FILE_MAILSLOT_QUERY_INFORMATION ), <span class="comment">// 26 FileMailslotQueryInformation</span>
00387             0,                                         <span class="comment">// 27 FileMailslotSetInformation</span>
00388             <span class="keyword">sizeof</span>( FILE_COMPRESSION_INFORMATION ),    <span class="comment">// 28 FileCompressionInformation</span>
00389             <span class="keyword">sizeof</span>( FILE_OBJECTID_INFORMATION ),       <span class="comment">// 29 FileObjectIdInformation</span>
00390             0,                                         <span class="comment">// 30 FileCompletionInformation</span>
00391             0,                                         <span class="comment">// 31 FileMoveClusterInformation</span>
00392             <span class="keyword">sizeof</span>( FILE_QUOTA_INFORMATION ),          <span class="comment">// 32 FileQuotaInformation</span>
00393             <span class="keyword">sizeof</span>( FILE_REPARSE_POINT_INFORMATION ),  <span class="comment">// 33 FileReparsePointInformation</span>
00394             <span class="keyword">sizeof</span>( FILE_NETWORK_OPEN_INFORMATION),    <span class="comment">// 34 FileNetworkOpenInformation</span>
00395             <span class="keyword">sizeof</span>( FILE_ATTRIBUTE_TAG_INFORMATION),   <span class="comment">// 35 FileAttributeTagInformation</span>
00396             0,                                         <span class="comment">// 36 FileTrackingInformation</span>
00397             0xff                                       <span class="comment">//    FileMaximumInformation</span>
00398           };
00399 
00400 <span class="comment">//</span>
00401 <span class="comment">// The following array specifies the minimum length of the FileInformation</span>
00402 <span class="comment">// buffer for an NtSetInformationFile service.</span>
00403 <span class="comment">//</span>
00404 <span class="comment">// WARNING:  This array depends on the order of the values in the</span>
00405 <span class="comment">//           FileInformationClass enumerated type.  Note that the</span>
00406 <span class="comment">//           enumerated type is one-based and the array is zero-based.</span>
00407 <span class="comment">//</span>
00408 
<a name="l00409"></a><a class="code" href="../../d3/d5/iodata_8c.html#a64">00409</a> UCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a64">IopSetOperationLength</a>[] =
00410           {
00411             0,
00412             0,                                       <span class="comment">//  1 FileDirectoryInformation</span>
00413             0,                                       <span class="comment">//  2 FileFullDirectoryInformation</span>
00414             0,                                       <span class="comment">//  3 FileBothDirectoryInformation</span>
00415             <span class="keyword">sizeof</span>( FILE_BASIC_INFORMATION ),        <span class="comment">//  4 FileBasicInformation</span>
00416             0,                                       <span class="comment">//  5 FileStandardInformation</span>
00417             0,                                       <span class="comment">//  6 FileInternalInformation</span>
00418             0,                                       <span class="comment">//  7 FileEaInformation</span>
00419             0,                                       <span class="comment">//  8 FileAccessInformation</span>
00420             0,                                       <span class="comment">//  9 FileNameInformation</span>
00421             <span class="keyword">sizeof</span>( FILE_RENAME_INFORMATION ),       <span class="comment">// 10 FileRenameInformation</span>
00422             <span class="keyword">sizeof</span>( FILE_LINK_INFORMATION ),         <span class="comment">// 11 FileLinkInformation</span>
00423             0,                                       <span class="comment">// 12 FileNamesInformation</span>
00424             <span class="keyword">sizeof</span>( FILE_DISPOSITION_INFORMATION ),  <span class="comment">// 13 FileDispositionInformation</span>
00425             <span class="keyword">sizeof</span>( FILE_POSITION_INFORMATION ),     <span class="comment">// 14 FilePositionInformation</span>
00426             0,                                       <span class="comment">// 15 FileFullEaInformation</span>
00427             <span class="keyword">sizeof</span>( FILE_MODE_INFORMATION ),         <span class="comment">// 16 FileModeInformation</span>
00428             0,                                       <span class="comment">// 17 FileAlignmentInformation</span>
00429             0,                                       <span class="comment">// 18 FileAllInformation</span>
00430             <span class="keyword">sizeof</span>( FILE_ALLOCATION_INFORMATION ),   <span class="comment">// 19 FileAllocationInformation</span>
00431             <span class="keyword">sizeof</span>( FILE_END_OF_FILE_INFORMATION ),  <span class="comment">// 20 FileEndOfFileInformation</span>
00432             0,                                       <span class="comment">// 21 FileAlternateNameInformation</span>
00433             0,                                       <span class="comment">// 22 FileStreamInformation</span>
00434             <span class="keyword">sizeof</span>( FILE_PIPE_INFORMATION ),         <span class="comment">// 23 FilePipeInformation</span>
00435             0,                                       <span class="comment">// 24 FilePipeLocalInformation</span>
00436             <span class="keyword">sizeof</span>( FILE_PIPE_REMOTE_INFORMATION ),  <span class="comment">// 25 FilePipeRemoteInformation</span>
00437             0,                                       <span class="comment">// 26 FileMailslotQueryInformation</span>
00438             <span class="keyword">sizeof</span>( FILE_MAILSLOT_SET_INFORMATION ), <span class="comment">// 27 FileMailslotSetInformation</span>
00439             0,                                       <span class="comment">// 28 FileCompressionInformation</span>
00440             <span class="keyword">sizeof</span>( FILE_OBJECTID_INFORMATION ),     <span class="comment">// 29 FileObjectIdInformation</span>
00441             <span class="keyword">sizeof</span>( FILE_COMPLETION_INFORMATION ),   <span class="comment">// 30 FileCompletionInformation</span>
00442             <span class="keyword">sizeof</span>( FILE_MOVE_CLUSTER_INFORMATION ), <span class="comment">// 31 FileMoveClusterInformation</span>
00443             <span class="keyword">sizeof</span>( FILE_QUOTA_INFORMATION ),        <span class="comment">// 32 FileQuotaInformation</span>
00444             0,                                       <span class="comment">// 33 FileReparsePointInformation</span>
00445             0,                                       <span class="comment">// 34 FileNetworkOpenInformation</span>
00446             0,                                       <span class="comment">// 35 FileAttributeTagInformation</span>
00447             <span class="keyword">sizeof</span>( FILE_TRACKING_INFORMATION ),     <span class="comment">// 36 FileTrackingInformation</span>
00448             0xff                                     <span class="comment">//    FileMaximumInformation</span>
00449           };
00450 
00451 <span class="comment">//</span>
00452 <span class="comment">// The following array specifies the alignment requirement of both all query</span>
00453 <span class="comment">// and set operations, including directory operations, but not FS operations.</span>
00454 <span class="comment">//</span>
00455 <span class="comment">// WARNING:  This array depends on the order of the values in the</span>
00456 <span class="comment">//           FileInformationClass enumerated type.  Note that the</span>
00457 <span class="comment">//           enumerated type is one-based and the array is zero-based.</span>
00458 <span class="comment">//</span>
00459 
<a name="l00460"></a><a class="code" href="../../d3/d5/iodata_8c.html#a65">00460</a> UCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a65">IopQuerySetAlignmentRequirement</a>[] =
00461           {
00462             0,
00463             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">//  1 FileDirectoryInformation</span>
00464             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">//  2 FileFullDirectoryInformation</span>
00465             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">//  3 FileBothDirectoryInformation</span>
00466             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">//  4 FileBasicInformation</span>
00467             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">//  5 FileStandardInformation</span>
00468             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">//  6 FileInternalInformation</span>
00469             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">//  7 FileEaInformation</span>
00470             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">//  8 FileAccessInformation</span>
00471             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">//  9 FileNameInformation</span>
00472             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 10 FileRenameInformation</span>
00473             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 11 FileLinkInformation</span>
00474             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 12 FileNamesInformation</span>
00475             <span class="keyword">sizeof</span>( <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a> ),     <span class="comment">// 13 FileDispositionInformation</span>
00476             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">// 14 FilePositionInformation</span>
00477             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 15 FileFullEaInformation</span>
00478             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 16 FileModeInformation</span>
00479             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 17 FileAlignmentInformation</span>
00480             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">// 18 FileAllInformation</span>
00481             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">// 19 FileAllocationInformation</span>
00482             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">// 20 FileEndOfFileInformation</span>
00483             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 21 FileAlternateNameInformation</span>
00484             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">// 22 FileStreamInformation</span>
00485             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 23 FilePipeInformation</span>
00486             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 24 FilePipeLocalInformation</span>
00487             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 25 FilePipeRemoteInformation</span>
00488             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">// 26 FileMailslotQueryInformation</span>
00489             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 27 FileMailslotSetInformation</span>
00490             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">// 28 FileCompressionInformation</span>
00491             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 29 FileObjectIdInformation</span>
00492             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 30 FileCompletionInformation</span>
00493             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 31 FileMoveClusterInformation</span>
00494             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 32 FileQuotaInformation</span>
00495             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 33 FileReparsePointInformation</span>
00496             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">// 34 FileNetworkOpenInformation</span>
00497             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 35 FileAttributeTagInformation</span>
00498             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 36 FileTrackingInformation</span>
00499             0xff                <span class="comment">//    FileMaximumInformation</span>
00500           };
00501 
00502 <span class="comment">//</span>
00503 <span class="comment">// The following array specifies the required access mask for the caller to</span>
00504 <span class="comment">// access information in an NtQueryXxxFile service.</span>
00505 <span class="comment">//</span>
00506 <span class="comment">// WARNING:  This array depends on the order of the values in the</span>
00507 <span class="comment">//           FileInformationClass enumerated type.  Note that the</span>
00508 <span class="comment">//           enumerated type is one-based and the array is zero-based.</span>
00509 <span class="comment">//</span>
00510 
<a name="l00511"></a><a class="code" href="../../d3/d5/iodata_8c.html#a66">00511</a> ULONG <a class="code" href="../../d3/d5/iodata_8c.html#a66">IopQueryOperationAccess</a>[] =
00512          {
00513             0,
00514             0,                    <span class="comment">//  1 FileDirectoryInformation</span>
00515             0,                    <span class="comment">//  2 FileFullDirectoryInformation</span>
00516             0,                    <span class="comment">//  3 FileBothDirectoryInformation</span>
00517             FILE_READ_ATTRIBUTES, <span class="comment">//  4 FileBasicInformation</span>
00518             0,                    <span class="comment">//  5 FileStandardInformation</span>
00519             0,                    <span class="comment">//  6 FileInternalInformation</span>
00520             0,                    <span class="comment">//  7 FileEaInformation</span>
00521             0,                    <span class="comment">//  8 FileAccessInformation</span>
00522             0,                    <span class="comment">//  9 FileNameInformation</span>
00523             0,                    <span class="comment">// 10 FileRenameInformation</span>
00524             0,                    <span class="comment">// 11 FileLinkInformation</span>
00525             0,                    <span class="comment">// 12 FileNamesInformation</span>
00526             0,                    <span class="comment">// 13 FileDispositionInformation</span>
00527             0,                    <span class="comment">// 14 FilePositionInformation</span>
00528             FILE_READ_EA,         <span class="comment">// 15 FileFullEaInformation</span>
00529             0,                    <span class="comment">// 16 FileModeInformation</span>
00530             0,                    <span class="comment">// 17 FileAlignmentInformation</span>
00531             FILE_READ_ATTRIBUTES, <span class="comment">// 18 FileAllInformation</span>
00532             0,                    <span class="comment">// 19 FileAllocationInformation</span>
00533             0,                    <span class="comment">// 20 FileEndOfFileInformation</span>
00534             0,                    <span class="comment">// 21 FileAlternateNameInformation</span>
00535             0,                    <span class="comment">// 22 FileStreamInformation</span>
00536             FILE_READ_ATTRIBUTES, <span class="comment">// 23 FilePipeInformation</span>
00537             FILE_READ_ATTRIBUTES, <span class="comment">// 24 FilePipeLocalInformation</span>
00538             FILE_READ_ATTRIBUTES, <span class="comment">// 25 FilePipeRemoteInformation</span>
00539             0,                    <span class="comment">// 26 FileMailslotQueryInformation</span>
00540             0,                    <span class="comment">// 27 FileMailslotSetInformation</span>
00541             0,                    <span class="comment">// 28 FileCompressionInformation</span>
00542             0,                    <span class="comment">// 29 FileObjectIdInformation</span>
00543             0,                    <span class="comment">// 30 FileCompletionInformation</span>
00544             0,                    <span class="comment">// 31 FileMoveClusterInformation</span>
00545             0,                    <span class="comment">// 32 FileQuotaInformation</span>
00546             0,                    <span class="comment">// 33 FileReparsePointInformation</span>
00547             FILE_READ_ATTRIBUTES, <span class="comment">// 34 FileNetworkOpenInformation</span>
00548             FILE_READ_ATTRIBUTES, <span class="comment">// 35 FileAttributeTagInformation</span>
00549             0,                    <span class="comment">// 36 FileTrackingInformation</span>
00550             0xffffffff            <span class="comment">//    FileMaximumInformation</span>
00551           };
00552 
00553 <span class="comment">//</span>
00554 <span class="comment">// The following array specifies the required access mask for the caller to</span>
00555 <span class="comment">// access information in an NtSetXxxFile service.</span>
00556 <span class="comment">//</span>
00557 <span class="comment">// WARNING:  This array depends on the order of the values in the</span>
00558 <span class="comment">//           FILE_INFORMATION_CLASS enumerated type.  Note that the</span>
00559 <span class="comment">//           enumerated type is one-based and the array is zero-based.</span>
00560 <span class="comment">//</span>
00561 
<a name="l00562"></a><a class="code" href="../../d3/d5/iodata_8c.html#a67">00562</a> ULONG <a class="code" href="../../d3/d5/iodata_8c.html#a67">IopSetOperationAccess</a>[] =
00563          {
00564             0,
00565             0,                     <span class="comment">//  1 FileDirectoryInformation</span>
00566             0,                     <span class="comment">//  2 FileFullDirectoryInformation</span>
00567             0,                     <span class="comment">//  3 FileBothDirectoryInformation</span>
00568             FILE_WRITE_ATTRIBUTES, <span class="comment">//  4 FileBasicInformation</span>
00569             0,                     <span class="comment">//  5 FileStandardInformation</span>
00570             0,                     <span class="comment">//  6 FileInternalInformation</span>
00571             0,                     <span class="comment">//  7 FileEaInformation</span>
00572             0,                     <span class="comment">//  8 FileAccessInformation</span>
00573             0,                     <span class="comment">//  9 FileNameInformation</span>
00574             DELETE,                <span class="comment">// 10 FileRenameInformation</span>
00575             0,                     <span class="comment">// 11 FileLinkInformation</span>
00576             0,                     <span class="comment">// 12 FileNamesInformation</span>
00577             DELETE,                <span class="comment">// 13 FileDispositionInformation</span>
00578             0,                     <span class="comment">// 14 FilePositionInformation</span>
00579             FILE_WRITE_EA,         <span class="comment">// 15 FileFullEaInformation</span>
00580             0,                     <span class="comment">// 16 FileModeInformation</span>
00581             0,                     <span class="comment">// 17 FileAlignmentInformation</span>
00582             0,                     <span class="comment">// 18 FileAllInformation</span>
00583             FILE_WRITE_DATA,       <span class="comment">// 19 FileAllocationInformation</span>
00584             FILE_WRITE_DATA,       <span class="comment">// 20 FileEndOfFileInformation</span>
00585             0,                     <span class="comment">// 21 FileAlternateNameInformation</span>
00586             0,                     <span class="comment">// 22 FileStreamInformation</span>
00587             FILE_WRITE_ATTRIBUTES, <span class="comment">// 23 FilePipeInformation</span>
00588             0,                     <span class="comment">// 24 FilePipeLocalInformation</span>
00589             FILE_WRITE_ATTRIBUTES, <span class="comment">// 25 FilePipeRemoteInformation</span>
00590             0,                     <span class="comment">// 26 FileMailslotQueryInformation</span>
00591             0,                     <span class="comment">// 27 FileMailslotSetInformation</span>
00592             0,                     <span class="comment">// 28 FileCompressionInformation</span>
00593             0,                     <span class="comment">// 29 FileObjectIdInformation</span>
00594             0,                     <span class="comment">// 30 FileCompletionInformation</span>
00595             FILE_WRITE_DATA,       <span class="comment">// 31 FileMoveClusterInformation</span>
00596             0,                     <span class="comment">// 32 FileQuotaInformation</span>
00597             0,                     <span class="comment">// 33 FileReparsePointInformation</span>
00598             0,                     <span class="comment">// 34 FileNetworkOpenInformation</span>
00599             0,                     <span class="comment">// 35 FileAttributeTagInformation</span>
00600             FILE_WRITE_DATA,       <span class="comment">// 36 FileTrackingInformation</span>
00601             0xffffffff             <span class="comment">//    FileMaximumInformation</span>
00602           };
00603 
00604 <span class="comment">//</span>
00605 <span class="comment">// The following array specifies the minimum length of the FsInformation</span>
00606 <span class="comment">// buffer for an NtQueryVolumeInformation service.</span>
00607 <span class="comment">//</span>
00608 <span class="comment">// WARNING:  This array depends on the order of the values in the</span>
00609 <span class="comment">//           FS_INFORMATION_CLASS enumerated type.  Note that the</span>
00610 <span class="comment">//           enumerated type is one-based and the array is zero-based.</span>
00611 <span class="comment">//</span>
00612 
<a name="l00613"></a><a class="code" href="../../d3/d5/iodata_8c.html#a68">00613</a> UCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a68">IopQueryFsOperationLength</a>[] =
00614           {
00615             0,
00616             <span class="keyword">sizeof</span>( FILE_FS_VOLUME_INFORMATION ),    <span class="comment">// 1 FileFsVolumeInformation</span>
00617             0,                                       <span class="comment">// 2 FileFsLabelInformation</span>
00618             <span class="keyword">sizeof</span>( FILE_FS_SIZE_INFORMATION ),      <span class="comment">// 3 FileFsSizeInformation</span>
00619             <span class="keyword">sizeof</span>( FILE_FS_DEVICE_INFORMATION ),    <span class="comment">// 4 FileFsDeviceInformation</span>
00620             <span class="keyword">sizeof</span>( FILE_FS_ATTRIBUTE_INFORMATION ), <span class="comment">// 5 FileFsAttributeInformation</span>
00621             <span class="keyword">sizeof</span>( FILE_FS_CONTROL_INFORMATION ),   <span class="comment">// 6 FileFsControlInformation</span>
00622             <span class="keyword">sizeof</span>( FILE_FS_FULL_SIZE_INFORMATION ), <span class="comment">// 7 FileFsFullSizeInformation</span>
00623             <span class="keyword">sizeof</span>( FILE_FS_OBJECTID_INFORMATION ),  <span class="comment">// 8 FileFsObjectIdInformation</span>
00624             0xff                                     <span class="comment">//   FileFsMaximumInformation</span>
00625           };
00626 
00627 <span class="comment">//</span>
00628 <span class="comment">// The following array specifies the minimum length of the FsInformation</span>
00629 <span class="comment">// buffer for an NtSetVolumeInformation service.</span>
00630 <span class="comment">//</span>
00631 <span class="comment">// WARNING:  This array depends on the order of the values in the</span>
00632 <span class="comment">//           FS_INFORMATION_CLASS enumerated type.  Note that the</span>
00633 <span class="comment">//           enumerated type is one-based and the array is zero-based.</span>
00634 <span class="comment">//</span>
00635 
<a name="l00636"></a><a class="code" href="../../d3/d5/iodata_8c.html#a69">00636</a> UCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a69">IopSetFsOperationLength</a>[] =
00637           {
00638             0,
00639             0,                                     <span class="comment">// 1 FileFsVolumeInformation</span>
00640             <span class="keyword">sizeof</span>( FILE_FS_LABEL_INFORMATION ),   <span class="comment">// 2 FileFsLabelInformation</span>
00641             0,                                     <span class="comment">// 3 FileFsSizeInformation</span>
00642             0,                                     <span class="comment">// 4 FileFsDeviceInformation</span>
00643             0,                                     <span class="comment">// 5 FileFsAttributeInformation</span>
00644             <span class="keyword">sizeof</span>( FILE_FS_CONTROL_INFORMATION ), <span class="comment">// 6 FileFsControlInformation</span>
00645             0,                                     <span class="comment">// 7 FileFsFullSizeInformation</span>
00646             <span class="keyword">sizeof</span>( FILE_FS_OBJECTID_INFORMATION ),<span class="comment">// 8 FileFsObjectIdInformation</span>
00647             0xff                                   <span class="comment">//   FileFsMaximumInformation</span>
00648           };
00649 
00650 <span class="comment">//</span>
00651 <span class="comment">// The following array specifies the required access mask for the caller to</span>
00652 <span class="comment">// access information in an NtQueryVolumeInformation service.</span>
00653 <span class="comment">//</span>
00654 <span class="comment">// WARNING:  This array depends on the order of the values in the</span>
00655 <span class="comment">//           FS_INFORMATION_CLASS enumerated type.  Note that the</span>
00656 <span class="comment">//           enumerated type is one-based and the array is zero-based.</span>
00657 <span class="comment">//</span>
00658 
<a name="l00659"></a><a class="code" href="../../d3/d5/iodata_8c.html#a70">00659</a> ULONG <a class="code" href="../../d3/d5/iodata_8c.html#a70">IopQueryFsOperationAccess</a>[] =
00660          {
00661             0,
00662             0,              <span class="comment">// 1 FileFsVolumeInformation [any access to file or volume]</span>
00663             0,              <span class="comment">// 2 FileFsLabelInformation [query is invalid]</span>
00664             0,              <span class="comment">// 3 FileFsSizeInformation [any access to file or volume]</span>
00665             0,              <span class="comment">// 4 FileFsDeviceInformation [any access to file or volume]</span>
00666             0,              <span class="comment">// 5 FileFsAttributeInformation [any access to file or vol]</span>
00667             FILE_READ_DATA, <span class="comment">// 6 FileFsControlInformation [vol read access]</span>
00668             0,              <span class="comment">// 7 FileFsFullSizeInformation [any access to file or volume]</span>
00669             0,              <span class="comment">// 8 FileFsObjectIdInformation [any access to file or volume]</span>
00670             0xffffffff      <span class="comment">//   FileFsMaximumInformation</span>
00671           };
00672 
00673 <span class="comment">//</span>
00674 <span class="comment">// The following array specifies the required access mask for the caller to</span>
00675 <span class="comment">// access information in an NtSetVolumeInformation service.</span>
00676 <span class="comment">//</span>
00677 <span class="comment">// WARNING:  This array depends on the order of the values in the</span>
00678 <span class="comment">//           FS_INFORMATION_CLASS enumerated type.  Note that the</span>
00679 <span class="comment">//           enumerated type is one-based and the array is zero-based.</span>
00680 <span class="comment">//</span>
00681 
<a name="l00682"></a><a class="code" href="../../d3/d5/iodata_8c.html#a71">00682</a> ULONG <a class="code" href="../../d3/d5/iodata_8c.html#a71">IopSetFsOperationAccess</a>[] =
00683          {
00684             0,
00685             0,               <span class="comment">// 1 FileFsVolumeInformation [set is invalid]</span>
00686             FILE_WRITE_DATA, <span class="comment">// 2 FileFsLabelInformation [write access to volume]</span>
00687             0,               <span class="comment">// 3 FileFsSizeInformation [set is invalid]</span>
00688             0,               <span class="comment">// 4 FileFsDeviceInformation [set is invalid]</span>
00689             0,               <span class="comment">// 5 FileFsAttributeInformation [set is invalid]</span>
00690             FILE_WRITE_DATA, <span class="comment">// 6 FileFsControlInformation [vol write access]</span>
00691             0,               <span class="comment">// 7 FileFsFullSizeInformation [set is invalid]</span>
00692             FILE_WRITE_DATA, <span class="comment">// 8 FileFsObjectIdInformation [write access to volume]</span>
00693             0xffffffff       <span class="comment">//   FileFsMaximumInformation</span>
00694           };
00695 
00696 <span class="comment">//</span>
00697 <span class="comment">// The following array specifies the alignment requirements for all FS query</span>
00698 <span class="comment">// and set information services.</span>
00699 <span class="comment">//</span>
00700 <span class="comment">// WARNING:  This array depends on the order of the values in the</span>
00701 <span class="comment">//           FS_INFORMATION_CLASS enumerated type.  Note that the</span>
00702 <span class="comment">//           enumerated type is one-based and the array is zero-based.</span>
00703 <span class="comment">//</span>
00704 
<a name="l00705"></a><a class="code" href="../../d3/d5/iodata_8c.html#a72">00705</a> UCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a72">IopQuerySetFsAlignmentRequirement</a>[] =
00706          {
00707             0,
00708             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">// 1 FileFsVolumeInformation</span>
00709             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 2 FileFsLabelInformation</span>
00710             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">// 3 FileFsSizeInformation</span>
00711             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 4 FileFsDeviceInformation</span>
00712             <span class="keyword">sizeof</span>( LONG ),     <span class="comment">// 5 FileFsAttributeInformation</span>
00713             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">// 6 FileFsControlInformation</span>
00714             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">// 7 FileFsFullSizeInformation</span>
00715             <span class="keyword">sizeof</span>( LONGLONG ), <span class="comment">// 8 FileFsObjectIdInformation</span>
00716             0xff                <span class="comment">//   FileFsMaximumInformation</span>
00717           };
00718 
<a name="l00719"></a><a class="code" href="../../d3/d5/iodata_8c.html#a73">00719</a> PVOID <a class="code" href="../../d3/d5/iodata_8c.html#a73">IopLoaderBlock</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00720 
<a name="l00721"></a><a class="code" href="../../d3/d5/iodata_8c.html#a74">00721</a> BOOLEAN <a class="code" href="../../d3/d5/iodata_8c.html#a74">IopRemoteBootCardInitialized</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00722 
<a name="l00723"></a><a class="code" href="../../d3/d5/iodata_8c.html#a75">00723</a> WCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a75">IopWstrRaw</a>[]                  = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">".Raw"</span>;
<a name="l00724"></a><a class="code" href="../../d3/d5/iodata_8c.html#a76">00724</a> WCHAR <a class="code" href="../../d7/d9/assign_8c.html#a28">IopWstrTranslated</a>[]           = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">".Translated"</span>;
<a name="l00725"></a><a class="code" href="../../d3/d5/iodata_8c.html#a77">00725</a> WCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a77">IopWstrBusRaw</a>[]               = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">".Bus.Raw"</span>;
<a name="l00726"></a><a class="code" href="../../d3/d5/iodata_8c.html#a78">00726</a> WCHAR <a class="code" href="../../d7/d9/assign_8c.html#a29">IopWstrBusTranslated</a>[]        = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">".Bus.Translated"</span>;
<a name="l00727"></a><a class="code" href="../../d3/d5/iodata_8c.html#a79">00727</a> WCHAR <a class="code" href="../../d7/d9/assign_8c.html#a21">IopWstrOtherDrivers</a>[]         = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"OtherDrivers"</span>;
00728 
<a name="l00729"></a><a class="code" href="../../d3/d5/iodata_8c.html#a80">00729</a> WCHAR <a class="code" href="../../d7/d9/assign_8c.html#a22">IopWstrAssignedResources</a>[]    = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"AssignedSystemResources"</span>;
<a name="l00730"></a><a class="code" href="../../d3/d5/iodata_8c.html#a81">00730</a> WCHAR <a class="code" href="../../d7/d9/assign_8c.html#a23">IopWstrRequestedResources</a>[]   = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"RequestedSystemResources"</span>;
<a name="l00731"></a><a class="code" href="../../d3/d5/iodata_8c.html#a82">00731</a> WCHAR <a class="code" href="../../d7/d9/assign_8c.html#a24">IopWstrSystemResources</a>[]      = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"Control\\SystemResources"</span>;
<a name="l00732"></a><a class="code" href="../../d3/d5/iodata_8c.html#a83">00732</a> WCHAR <a class="code" href="../../d7/d9/assign_8c.html#a25">IopWstrReservedResources</a>[]    = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"ReservedResources"</span>;
<a name="l00733"></a><a class="code" href="../../d3/d5/iodata_8c.html#a84">00733</a> WCHAR <a class="code" href="../../d7/d9/assign_8c.html#a26">IopWstrAssignmentOrdering</a>[]   = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"AssignmentOrdering"</span>;
<a name="l00734"></a><a class="code" href="../../d3/d5/iodata_8c.html#a85">00734</a> WCHAR <a class="code" href="../../d7/d9/assign_8c.html#a27">IopWstrBusValues</a>[]            = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"BusValues"</span>;
<a name="l00735"></a><a class="code" href="../../d3/d5/iodata_8c.html#a86">00735</a> UNICODE_STRING <a class="code" href="../../d3/d5/iodata_8c.html#a86">IoArcBootDeviceName</a>  = { 0 };
<a name="l00736"></a><a class="code" href="../../d3/d5/iodata_8c.html#a87">00736</a> UNICODE_STRING <a class="code" href="../../d3/d5/iodata_8c.html#a87">IoArcHalDeviceName</a>  = { 0 };
<a name="l00737"></a><a class="code" href="../../d3/d5/iodata_8c.html#a88">00737</a> PUCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a88">IoLoaderArcBootDeviceName</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00738 
00739 <span class="comment">//</span>
00740 <span class="comment">// Initialization time data</span>
00741 <span class="comment">//</span>
00742 
00743 <span class="preprocessor">#ifdef ALLOC_DATA_PRAGMA</span>
00744 <span class="preprocessor"></span><span class="preprocessor">#pragma data_seg("INIT")</span>
00745 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00746 <span class="preprocessor"></span>
<a name="l00747"></a><a class="code" href="../../d3/d5/iodata_8c.html#a89">00747</a> WCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a89">IopWstrHal</a>[]                  = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"Hardware Abstraction Layer"</span>;
<a name="l00748"></a><a class="code" href="../../d3/d5/iodata_8c.html#a90">00748</a> WCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a90">IopWstrSystem</a>[]               = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"System Resources"</span>;
<a name="l00749"></a><a class="code" href="../../d3/d5/iodata_8c.html#a91">00749</a> WCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a91">IopWstrPhysicalMemory</a>[]       = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"Physical Memory"</span>;
<a name="l00750"></a><a class="code" href="../../d3/d5/iodata_8c.html#a92">00750</a> WCHAR <a class="code" href="../../d3/d5/iodata_8c.html#a92">IopWstrSpecialMemory</a>[]        = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="stringliteral">"Reserved"</span>;
00751 
00752 <span class="preprocessor">#ifdef ALLOC_DATA_PRAGMA</span>
00753 <span class="preprocessor"></span><span class="preprocessor">#pragma data_seg()</span>
00754 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:29 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

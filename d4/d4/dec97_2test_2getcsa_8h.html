<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: dec97/test/getcsa.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>getcsa.h File Reference</h1>
<p>
<a href="../../d5/d3/dec97_2test_2getcsa_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL EXTERN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d4/dec97_2test_2getcsa_8h.html#a0">GetPS2ColorSpaceArray</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InputIntent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBuffer, LPDWORD lpcbSize, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d4/dec97_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpBuffer, LPDWORD lpcbSize, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, int Type, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d4/dec97_2test_2getcsa_8h.html#a2">GetPS2CSA_ABC</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d4/dec97_2test_2getcsa_8h.html#a3">GetPS2CSA_ABC_LAB</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, LPDWORD lpcbSize, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> InputIntent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> InpDrvClrSp, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d4/dec97_2test_2getcsa_8h.html#a4">GetPublicArrayName</a> (<a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a> cp, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> IntentSig, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> PublicArrayName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d4/dec97_2test_2getcsa_8h.html#a5">CreateInputArray</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nInputCh, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nInputTable, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> Tag, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> Buff, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d4/d4/dec97_2test_2getcsa_8h.html#a6">CreateOutputArray</a> (<a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> lpMem, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nOutputCh, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> nOutputTable, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> <a class="el" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a28">Intent</a>, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a> Tag, <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a> Buff, BOOL <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a27">AllowBinary</a>)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a5" doxytag="dec97/test/getcsa.h::CreateInputArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateInputArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nInputCh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nInputTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Tag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Buff</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="dec97/test/getcsa.h::CreateOutputArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> CreateOutputArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nOutputCh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nOutputTable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Tag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Buff</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="dec97/test/getcsa.h::GetPS2ColorSpaceArray" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL EXTERN GetPS2ColorSpaceArray           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l01579">1579</a> of file <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html">aug98/dll32/getcsa.c</a>.
<p>
<pre class="fragment"><div>01586 {
01587     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> ColorSpace, <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
01588     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01589     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwSaveSize;
01590     <span class="keywordflow">if</span> (!cp)
01591         <span class="keywordflow">return</span> Success;
01592 
01593     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; ColorSpace) ||
01594         !<a class="code" href="../../d2/d9/ps2_8c.html#a42">GetCPRenderIntent</a> (cp, (LPCSIG) &amp; Intent))
01595     {
01596         <span class="keywordflow">return</span> Success;
01597     }
01598     dwSaveSize = *lpcbSize;
01599     <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a146">icUseRenderingIntent</a>)
01600         InputIntent = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>;
01601 
01602  <span class="comment">// Get ColorSpace from Profile.</span>
01603     <span class="keywordflow">if</span> ((<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>) InputIntent == <a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01604     {
01605         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a182">GetCSAFromProfile</a> (cp, lpBuffer, lpcbSize,
01606                                      InpDrvClrSp, ColorSpace, AllowBinary);
01607     }
01608     <span class="keywordflow">if</span> (!Success)
01609     {
01610         <span class="keywordflow">switch</span> (ColorSpace)
01611         {
01612             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>:
01613                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01614                                                  InpDrvClrSp, (CSIG) InputIntent, 
01615                                                  TYPE_CIEBASEDDEF, AllowBinary);
01616                 <span class="keywordflow">if</span> (Success)
01617                 {                       <span class="comment">// Create CieBasedABC or DeviceRGB</span>
01618                                         <span class="comment">// for the printer</span>
01619                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01620                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01621                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01622                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01623                     <span class="keywordflow">if</span> (lpBuffer)
01624                     {
01625                         lpNewBuffer = lpBuffer + *lpcbSize;
01626                         lpOldBuffer = lpNewBuffer;
01627                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01628                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01629                     } <span class="keywordflow">else</span>
01630                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01631 
01632                     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a184">GetPS2CSA_ABC</a> (cp, lpNewBuffer, &amp;cbNewSize,
01633                                         (CSIG)InputIntent, InpDrvClrSp, 
01634                                         AllowBinary, 1))   <span class="comment">// create a backup CSA</span>
01635                         <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a7">GetDeviceRGB</a> (lpNewBuffer, &amp;cbNewSize, InpDrvClrSp, 1);
01636 
01637                     <span class="keywordflow">if</span> (lpBuffer)
01638                     {
01639                         lpNewBuffer += cbNewSize;
01640                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01641                     } <span class="keywordflow">else</span>
01642                         *lpcbSize += cbNewSize;
01643 
01644                 }
01645                 <span class="keywordflow">if</span> (!Success)
01646                 {                           <span class="comment">// Create CieBasedABC</span>
01647                     Success = <a class="code" href="../../d2/d9/ps2_8c.html#a184">GetPS2CSA_ABC</a> (cp, lpBuffer, lpcbSize,
01648                                          (CSIG)InputIntent, InpDrvClrSp, 
01649                                          AllowBinary, 0);
01650                 }
01651                 <span class="keywordflow">if</span> (!Success)
01652                 {                           <span class="comment">// Create DeviceRGB</span>
01653                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a7">GetDeviceRGB</a> (lpBuffer, lpcbSize, InpDrvClrSp, 0);
01654                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01655                 }
01656                 <span class="keywordflow">break</span>;
01657             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>:
01658                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01659                                                  InpDrvClrSp, (CSIG) InputIntent, 
01660                                                  TYPE_CIEBASEDDEFG, AllowBinary);
01661                 <span class="keywordflow">if</span> (Success)
01662                 {                       <span class="comment">// Create DeviceCMYK for the printer</span>
01663                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01664                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01665                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01666                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01667                     <span class="keywordflow">if</span> (lpBuffer)
01668                     {
01669                         lpNewBuffer = lpBuffer + *lpcbSize;
01670                         lpOldBuffer = lpNewBuffer;
01671                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01672                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, NotSupportDEFG_S);
01673                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01674                     } <span class="keywordflow">else</span>
01675                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01676 
01677                     <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a8">GetDeviceCMYK</a> (lpNewBuffer, &amp;cbNewSize, InpDrvClrSp);
01678 
01679                     <span class="keywordflow">if</span> (lpBuffer)
01680                     {
01681                         lpNewBuffer += cbNewSize;
01682                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, SupportDEFG_E);
01683                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01684                     } <span class="keywordflow">else</span>
01685                         *lpcbSize += cbNewSize;
01686                 }
01687                 <span class="keywordflow">if</span> (!Success)
01688                 {                           <span class="comment">// Create DeviceCMYK</span>
01689                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a8">GetDeviceCMYK</a> (lpBuffer, lpcbSize, InpDrvClrSp);
01690                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01691                 }
01692                 <span class="keywordflow">break</span>;
01693             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a115">icSigGrayData</a>:
01694                 Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a19">GetPS2CSA_MONO</a> (cp, lpBuffer, lpcbSize, InpDrvClrSp, 
01695                                           (CSIG)InputIntent, AllowBinary);
01696                 <span class="keywordflow">if</span> (!Success)
01697                 {                           <span class="comment">// Create DeviceGray</span>
01698                     Success = <a class="code" href="../../d0/d4/jul98_2dll32_2getcsa_8c.html#a9">GetDeviceGray</a> (lpBuffer, lpcbSize, InpDrvClrSp);
01699                     Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01700                 }
01701                 <span class="keywordflow">break</span>;
01702             <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>:
01703                 Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a1">GetPS2CSA_DEFG_Intent</a> (cp, lpBuffer, lpcbSize,
01704                                                  InpDrvClrSp, (CSIG) InputIntent, 
01705                                                  TYPE_CIEBASEDDEF, AllowBinary);
01706                 <span class="keywordflow">if</span> (Success)
01707                 {                       <span class="comment">// Create CieBasedABC or DeviceRGB</span>
01708                                         <span class="comment">// for the printer</span>
01709                                         <span class="comment">// which does not support CieBasedDEF(G).</span>
01710                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cbNewSize = 0;
01711                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpNewBuffer;
01712                     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldBuffer;
01713                     <span class="keywordflow">if</span> (lpBuffer)
01714                     {
01715                         lpNewBuffer = lpBuffer + *lpcbSize;
01716                         lpOldBuffer = lpNewBuffer;
01717                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpNewBuffer, NewLine);
01718                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, NotSupportDEFG_S);
01719                         cbNewSize = dwSaveSize - (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpBuffer);
01720                     } <span class="keywordflow">else</span>
01721                         lpNewBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01722 
01723                     <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a3">GetPS2CSA_ABC_LAB</a> (cp, lpNewBuffer, &amp;cbNewSize,
01724                                         (CSIG)InputIntent, InpDrvClrSp, AllowBinary);
01725 
01726                     <span class="keywordflow">if</span> (lpBuffer)
01727                     {
01728                         lpNewBuffer += cbNewSize;
01729                         lpNewBuffer += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpNewBuffer, SupportDEFG_E);
01730                         *lpcbSize += (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) (lpNewBuffer - lpOldBuffer);
01731                     } <span class="keywordflow">else</span>
01732                         *lpcbSize += cbNewSize;
01733                 }
01734                 <span class="keywordflow">if</span> (!Success)
01735                 {                           <span class="comment">// Create CieBasedABC</span>
01736                     Success = <a class="code" href="../../d7/d4/jul98_2test_2getcsa_8h.html#a3">GetPS2CSA_ABC_LAB</a> (cp, lpBuffer, lpcbSize,
01737                                          (CSIG)InputIntent, InpDrvClrSp, AllowBinary);
01738                 }
01739                 <span class="keywordflow">break</span>;
01740 
01741             <span class="keywordflow">default</span>:
01742                 <span class="keywordflow">break</span>;
01743         }
01744     }
01745     <span class="keywordflow">return</span> Success;
01746 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="dec97/test/getcsa.h::GetPS2CSA_ABC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_ABC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html#l00634">634</a> of file <a class="el" href="../../d9/d2/dec97_2dll32_2getcsa_8c-source.html">dec97/dll32/getcsa.c</a>.
<p>
<pre class="fragment"><div>00636 {
00637     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> PCS, Dev;
00638     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
00639     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
00640 
00641     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i;
00642     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00643     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> Ret = 0;
00644  <span class="comment">// Check if we can generate the CS.</span>
00645  <span class="comment">// Required  tags are: red, green and blue Colorants.</span>
00646  <span class="comment">// As for TRC tags - we are quite flexible here - if we cannot find the</span>
00647  <span class="comment">// required tag - we assume the linear responce</span>
00648     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00649         !<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; Dev) ||
00650         (Dev != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) ||
00651         !<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigRedColorantTag) ||
00652         !<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigGreenColorantTag) ||
00653         !<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigBlueColorantTag) ||
00654         !<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigRedTRCTag) ||
00655         !<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigGreenTRCTag) ||
00656         !<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigBlueTRCTag))
00657     {
00658         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00659     }
00660     <span class="keywordflow">if</span> ((InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a114">icSigRgbData</a>) &amp;&amp;
00661         (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) &amp;&amp;
00662         (InpDrvClrSp != 0))
00663     {
00664         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00665     }
00666  <span class="comment">// Estimate the memory size required to hold CS</span>
00667 
00668     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
00669     {
00670         *lpcbSize = 65530;
00671         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00672     }
00673  <span class="comment">// Get info about Illuminant White Point from the header</span>
00674     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);     <span class="comment">// .. Illuminant</span>
00675                                                          
00676  <span class="comment">// Support absolute whitePoint</span>
00677     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
00678 
00679  <span class="comment">//*********** Creating global data</span>
00680     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00681     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CieBasedABCBegin);
00682 
00683     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a220">EnableGlobalDict</a>(lpMem);
00684 
00685     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a212">CreateColSpArray</a> (cp, lpMem, icSigRedTRCTag, AllowBinary);
00686     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a212">CreateColSpArray</a> (cp, lpMem, icSigGreenTRCTag, AllowBinary);
00687     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a212">CreateColSpArray</a> (cp, lpMem, icSigBlueTRCTag, AllowBinary);
00688 
00689     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00690     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, SetGlobalOp);
00691     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndOp);
00692 
00693 
00694  <span class="comment">//*********** Start creating the ColorSpace</span>
00695     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00696     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
00697  <span class="comment">//********** /CIEBasedABC</span>
00698     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedABCTag);   <span class="comment">// Create entry</span>
00699     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
00700 
00701  <span class="comment">//********** Black/White Point</span>
00702     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
00703 
00704  <span class="comment">//********** /DecodeABC</span>
00705     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00706     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeABCTag);
00707     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00708 
00709     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00710     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a213">CreateColSpProc</a> (cp, lpMem, icSigRedTRCTag, AllowBinary);
00711     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00712     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a213">CreateColSpProc</a> (cp, lpMem, icSigGreenTRCTag, AllowBinary);
00713     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00714     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a213">CreateColSpProc</a> (cp, lpMem, icSigBlueTRCTag, AllowBinary);
00715     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00716 
00717  <span class="comment">//********** /MatrixABC</span>
00718     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00719     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCTag);
00720     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00721 
00722     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a214">CreateFloatString</a> (cp, lpMem, icSigRedColorantTag);
00723     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a214">CreateFloatString</a> (cp, lpMem, icSigGreenColorantTag);
00724     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a214">CreateFloatString</a> (cp, lpMem, icSigBlueColorantTag);
00725 
00726     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00727 
00728  <span class="comment">//********** /RangeLMN</span>
00729     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00730     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMNTag);
00731     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeLMN);
00732 
00733  <span class="comment">//********** /DecodeLMN</span>
00734     <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00735     {
00736         <span class="comment">// Support absolute whitePoint</span>
00737         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00738         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNTag);
00739         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00740         <span class="keywordflow">for</span> (i = 0; i &lt; 3; i ++)
00741         {
00742             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
00743             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>)MediaWP[i]/IlluminantWP[i]);
00744             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MulOp); 
00745             lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00746         }
00747         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00748     }
00749 
00750  <span class="comment">//********** End dictionary definition</span>
00751     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00752     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndDict);
00753     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00754 
00755     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00756     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CieBasedABCEnd);
00757     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) ((lpMem - lpOldMem));
00758     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00759 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="dec97/test/getcsa.h::GetPS2CSA_ABC_LAB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_ABC_LAB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpMem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InputIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l00812">812</a> of file <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html">aug98/dll32/getcsa.c</a>.
<p>
<pre class="fragment"><div>00814 {
00815     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> PCS, Dev;
00816     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> IlluminantWP[3];
00817     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a16">SFLOAT</a> MediaWP[3];
00818 
00819     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> i;
00820     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> lpOldMem = lpMem;
00821     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> Ret = 0;
00822  <span class="comment">// Check if we can generate the CS.</span>
00823  <span class="comment">// Required  tags are: red, green and blue Colorants.</span>
00824  <span class="comment">// As for TRC tags - we are quite flexible here - if we cannot find the</span>
00825  <span class="comment">// required tag - we assume the linear responce</span>
00826     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d9/ps2_8c.html#a40">GetCPConnSpace</a> (cp, (LPCSIG) &amp; PCS) ||
00827         !<a class="code" href="../../d2/d9/ps2_8c.html#a41">GetCPDevSpace</a> (cp, (LPCSIG) &amp; Dev) ||
00828         (Dev != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>))
00829     {
00830         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00831     }
00832     <span class="keywordflow">if</span> ((InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a110">icSigLabData</a>) &amp;&amp;
00833         (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>) &amp;&amp;
00834         (InpDrvClrSp != 0))
00835     {
00836         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00837     }
00838  <span class="comment">// Estimate the memory size required to hold CS</span>
00839 
00840     <span class="keywordflow">if</span> (lpMem == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)                  <span class="comment">// This is a size request</span>
00841     {
00842         *lpcbSize = 65530;
00843         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00844     }
00845  <span class="comment">// Get info about Illuminant White Point from the header</span>
00846     <a class="code" href="../../d2/d9/ps2_8c.html#a191">GetCPWhitePoint</a> (cp, (LPSFLOAT) &amp; IlluminantWP);     <span class="comment">// .. Illuminant</span>
00847                                                          
00848  <span class="comment">// Support absolute whitePoint</span>
00849     <a class="code" href="../../d2/d9/ps2_8c.html#a209">GetMediaWP</a>(cp, InputIntent, IlluminantWP, MediaWP);
00850 
00851  <span class="comment">//*********** Start creating the ColorSpace</span>
00852     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, BeginArray);   <span class="comment">// Begin array</span>
00853 
00854  <span class="comment">//********** /CIEBasedABC</span>
00855     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, CIEBasedABCTag);   <span class="comment">// Create entry</span>
00856     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginDict);    <span class="comment">// Begin dictionary</span>
00857 
00858  <span class="comment">//********** Black/White Point</span>
00859     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a208">SendCSABWPoint</a>(lpMem, InputIntent, IlluminantWP, MediaWP);
00860 
00861  <span class="comment">//********** /RangeABC</span>
00862     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, RangeABCTag);
00863     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, RangeABC_Lab);
00864 
00865  <span class="comment">//********** /DecodeABC</span>
00866     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeABCTag);
00867     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeABCLab1);
00868 
00869  <span class="comment">//********** /MatrixABC</span>
00870     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, MatrixABCTag);
00871     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MatrixABCLab);
00872 
00873  <span class="comment">//********** /DecodeLMN</span>
00874     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, DecodeLMNTag);
00875     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginArray);
00876     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i ++)
00877     {
00878         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, BeginFunction);
00879         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, DecodeLMNLab);
00880         <span class="keywordflow">if</span> (InputIntent == <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>)
00881         {
00882             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) MediaWP[i]);
00883         }
00884         <span class="keywordflow">else</span>
00885         {
00886             lpMem += <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a46">WriteFloat</a> (lpMem, (<span class="keywordtype">double</span>) IlluminantWP[i]);
00887         }
00888         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, MulOp); 
00889         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndFunction);
00890         lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, NewLine);
00891     }
00892     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00893 
00894 
00895  <span class="comment">//********** End dictionary definition</span>
00896     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, EndDict);
00897     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a43">WriteObject</a> (lpMem, EndArray);
00898 
00899     lpMem += <a class="code" href="../../d2/d9/ps2_8c.html#a223">WriteNewLineObject</a> (lpMem, CieBasedABCEnd);
00900     *lpcbSize = (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>) ((lpMem - lpOldMem));
00901     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00902 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="dec97/test/getcsa.h::GetPS2CSA_DEFG_Intent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL GetPS2CSA_DEFG_Intent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpcbSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>InpDrvClrSp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Intent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>AllowBinary</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l01502">1502</a> of file <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html">aug98/dll32/getcsa.c</a>.
<p>
<pre class="fragment"><div>01510 {
01511     <a class="code" href="../../d6/d7/aug98_2dll32_2icmdll_8h.html#a6">SINT</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
01512     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> Success = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01513     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a> icSigAToBx;
01514 
01515  <span class="comment">// Try to create CieBasedDEFG CSA first.</span>
01516     <span class="keywordflow">if</span> (((Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a1">TYPE_CIEBASEDDEFG</a>) &amp;&amp; (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a118">icSigCmykData</a>) ||
01517          (Type == <a class="code" href="../../d2/d9/aug98_2dll32_2csprof_8h.html#a0">TYPE_CIEBASEDDEF</a>) &amp;&amp; (InpDrvClrSp != <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a120">icSigDefData</a>)) &amp;&amp;
01518         (InpDrvClrSp != 0))
01519     {
01520         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
01521     }
01522     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a28">Intent</a>)
01523     {
01524         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a142">icPerceptual</a>:
01525             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a17">icSigAToB0Tag</a>;
01526             <span class="keywordflow">break</span>;
01527         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a143">icRelativeColorimetric</a>:
01528             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a18">icSigAToB1Tag</a>;
01529             <span class="keywordflow">break</span>;
01530         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a144">icSaturation</a>:
01531             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a19">icSigAToB2Tag</a>;
01532             <span class="keywordflow">break</span>;
01533         <span class="keywordflow">case</span> <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a145">icAbsoluteColorimetric</a>:
01534             icSigAToBx = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a18">icSigAToB1Tag</a>;
01535             <span class="keywordflow">break</span>;
01536         <span class="keywordflow">default</span>:
01537             <span class="keywordflow">return</span> Success;
01538     }
01539 
01540     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9/ps2_8c.html#a189">DoesCPTagExist</a> (cp, icSigAToBx) &amp;&amp;
01541         <a class="code" href="../../d8/d9/jul98_2test_2csprof_8h.html#a12">GetCPTagIndex</a> (cp, icSigAToBx, (LPSINT) &amp; Index))
01542     {
01543         Success = <a class="code" href="../../d2/d9/ps2_8c.html#a186">GetPS2CSA_DEFG</a> (cp, lpBuffer, lpcbSize, Intent, Index, Type, AllowBinary);
01544     }
01545 
01546     <span class="keywordflow">return</span> Success;
01547 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="dec97/test/getcsa.h::GetPublicArrayName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a15">SINT</a> GetPublicArrayName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d9/jul98_2test_2csprof_8h.html#a5">CHANDLE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a17">CSIG</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>IntentSig</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a19">MEMPTR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PublicArrayName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html#l00154">154</a> of file <a class="el" href="../../d8/d2/aug98_2dll32_2getcsa_8c-source.html">aug98/dll32/getcsa.c</a>.
<p>
<pre class="fragment"><div>00155 {
00156     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a19">MEMPTR</a> OldPtr;
00157     OldPtr = PublicArrayName;
00158     PublicArrayName[0] = 0;
00159     MemCopy (PublicArrayName, (MEMPTR) &amp; IntentSig, <span class="keyword">sizeof</span> (CSIG));
00160     PublicArrayName += <span class="keyword">sizeof</span> (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a17">CSIG</a>);
00161     PublicArrayName[0] = 0;
00162     <span class="keywordflow">return</span> (PublicArrayName - OldPtr);
00163 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:53 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

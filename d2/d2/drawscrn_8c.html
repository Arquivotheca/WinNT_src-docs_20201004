<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: drawscrn.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>drawscrn.c File Reference</h1><code>#include "stdarg.h"</code><br>
<code>#include "stdio.h"</code><br>
<code>#include "ntddk.h"</code><br>
<code>#include "<a class="el" href="../../d8/d7/fsvga_8h-source.html">fsvga.h</a>"</code><br>
<code>#include "fsvgalog.h"</code><br>

<p>
<a href="../../d3/d1/drawscrn_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a0">COMMON_LVB_MASK</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a1">CalcGRAMScanLine</a>(WindowY, FontSizeY)&nbsp;&nbsp;&nbsp;(WindowY * FontSizeY)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a2">CalcGRAMOffs</a>(WindowSize, DeviceExtension)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a3">GetBytePerLine</a>(DeviceExtension)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a4">CalcGRAMSize</a> (IN COORD WindowSize, IN <a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> DeviceExtension)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PUCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a5">CalcGRAMAddress</a> (IN COORD WindowSize, IN <a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> DeviceExtension)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a6">IsGRAMRowOver</a> (PUCHAR BufPtr, BOOL fDbcs, <a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> DeviceExtension)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PUCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a7">NextGRAMRow</a> (PUCHAR BufPtr, <a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> DeviceExtension)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a8">memcpyGRAM</a> (IN PCHAR TargetPtr, IN PCHAR SourcePtr, IN ULONG Length)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a9">memcpyGRAMOver</a> (IN PCHAR TargetPtr, IN PCHAR SourcePtr, IN ULONG Length, IN PUCHAR FrameBufPtr, IN <a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> DeviceExtension)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a10">MoveGRAM</a> (IN PCHAR TargetPtr, IN PCHAR SourcePtr, IN ULONG Length, IN PUCHAR FrameBufPtr, IN <a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> DeviceExtension)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a11">FsgVgaInitializeHWFlags</a> (<a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> DeviceExtension)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a12">FsgCopyFrameBuffer</a> (<a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> DeviceExtension, PFSVIDEO_COPY_FRAME_BUFFER CopyFrameBuffer, ULONG inputBufferLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a13">FsgWriteToFrameBuffer</a> (<a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> DeviceExtension, PFSVIDEO_WRITE_TO_FRAME_BUFFER WriteFrameBuffer, ULONG inputBufferLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a14">FsgReverseMousePointer</a> (<a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> DeviceExtension, PFSVIDEO_REVERSE_MOUSE_POINTER MouseBuffer, ULONG inputBufferLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a15">FsgInvertCursor</a> (<a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> DeviceExtension, BOOL Invert)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a16">FsgWriteToScreen</a> (PUCHAR FrameBuffer, PUCHAR BitmapBuffer, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cjBytes, BOOL fDbcs, WORD Attributes1, WORD Attributes2, <a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> DeviceExtension)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a17">FsgWriteToScreenCommonLVB</a> (PUCHAR FrameBuffer, WORD Attributes, <a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> DeviceExtension)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a18">AccessGRAM_WR</a> (PUCHAR FrameBuffer, UCHAR write)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a19">AccessGRAM_RW</a> (PUCHAR FrameBuffer, UCHAR write)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UCHAR&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/drawscrn_8c.html#a20">AccessGRAM_AND</a> (PUCHAR FrameBuffer, UCHAR write)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a2" doxytag="drawscrn.c::CalcGRAMOffs" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CalcGRAMOffs          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">WindowSize,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>DeviceExtension&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>(DeviceExtension-&gt;EmulateInfo.StartAddress + \
     <a class="code" href="../../d2/d2/drawscrn_8c.html#a4">CalcGRAMSize</a>(WindowSize,DeviceExtension) \
    )
</div></pre>
<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00061">61</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00116">CalcGRAMAddress()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="drawscrn.c::CalcGRAMScanLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CalcGRAMScanLine          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">WindowY,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>FontSizeY&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(WindowY * FontSizeY)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00047">47</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00085">CalcGRAMSize()</a>, and <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00387">FsgVgaInitializeHWFlags()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="drawscrn.c::COMMON_LVB_MASK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define COMMON_LVB_MASK          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>(COMMON_LVB_GRID_HORIZONTAL |  \
                         COMMON_LVB_GRID_LVERTICAL  |  \
                         COMMON_LVB_GRID_RVERTICAL  |  \
                         COMMON_LVB_REVERSE_VIDEO   |  \
                         COMMON_LVB_UNDERSCORE      )
</div></pre>
<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00029">29</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00813">FsgWriteToScreen()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="drawscrn.c::GetBytePerLine" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GetBytePerLine          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DeviceExtension&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>((DeviceExtension-&gt;Configuration.HardwareScroll &amp; <a class="code" href="../../d7/d8/fsvga_8h.html#a6">OFFSET_128_TO_NEXT_SLICE</a>) ? \
     (1024 / 8) : \
     (640 / 8) \
    )
</div></pre>
<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00076">76</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00387">FsgVgaInitializeHWFlags()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a20" doxytag="drawscrn.c::AccessGRAM_AND" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UCHAR AccessGRAM_AND           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FrameBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>write</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00998">998</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00702">FsgInvertCursor()</a>, and <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00609">FsgReverseMousePointer()</a>.
<p>
<pre class="fragment"><div>01002 {
01003     <span class="keywordflow">return</span> *FrameBuffer &amp;= write;
01004 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="drawscrn.c::AccessGRAM_RW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UCHAR AccessGRAM_RW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FrameBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>write</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00986">986</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00915">FsgWriteToScreenCommonLVB()</a>.
<p>
<pre class="fragment"><div>00990 {
00991     UCHAR tmp;
00992     tmp = *FrameBuffer;
00993     *FrameBuffer = write;
00994     <span class="keywordflow">return</span> tmp;
00995 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="drawscrn.c::AccessGRAM_WR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UCHAR AccessGRAM_WR           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FrameBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>write</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00976">976</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d1/port_8c-source.html#l00257">ColorSetDirect()</a>.
<p>
<pre class="fragment"><div>00980 {
00981     *FrameBuffer = write;
00982     <span class="keywordflow">return</span> *FrameBuffer;
00983 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="drawscrn.c::CalcGRAMAddress" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PUCHAR CalcGRAMAddress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>WindowSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceExtension</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00116">116</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
References <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00061">CalcGRAMOffs</a>, and <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00437">FsgCopyFrameBuffer()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00702">FsgInvertCursor()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00609">FsgReverseMousePointer()</a>, and <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00489">FsgWriteToFrameBuffer()</a>.
<p>
<pre class="fragment"><div>00123                    :
00124 
00125     This routine calcurate a graphics buffer address.
00126 
00127 Arguments:
00128 
00129     WindowSize - Coord of window size.
00130 
00131     DeviceExtension - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> miniport driver's device <a class="code" href="../../d7/d1/genuedef_8c.html#a6">extension</a>.
00132 
00133 Return Value:
00134 
00135     Returen to graphics buffer address.
00136 
00137 --*/
00138 {
00139     PUCHAR BufPtr = (PUCHAR)DeviceExtension-&gt;CurrentMode.VideoMemory.FrameBufferBase;
00140 
00141     BufPtr += <a class="code" href="../../d2/d2/drawscrn_8c.html#a2">CalcGRAMOffs</a>(WindowSize, DeviceExtension);
00142     <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(BufPtr -
00143                 (PUCHAR)DeviceExtension-&gt;CurrentMode.VideoMemory.FrameBufferBase)
00144            &gt;= DeviceExtension-&gt;EmulateInfo.LimitGRAM)
00145         <span class="keywordflow">return</span> (BufPtr - DeviceExtension-&gt;EmulateInfo.LimitGRAM);
00146     <span class="keywordflow">else</span>
00147         <span class="keywordflow">return</span> BufPtr;
00148 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="drawscrn.c::CalcGRAMSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG CalcGRAMSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>WindowSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceExtension</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00085">85</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
References <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00047">CalcGRAMScanLine</a>.
<p>
<pre class="fragment"><div>00092                    :
00093 
00094     This Macro calcurate a graphics buffer size.
00095 
00096 Arguments:
00097 
00098     WindowSize - Coord of window size.
00099 
00100     DeviceExtension - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> miniport driver's device <a class="code" href="../../d7/d1/genuedef_8c.html#a6">extension</a>.
00101 
00102 Return Value:
00103 
00104     Returen to graphics buffer offset.
00105 
00106 --*/
00107 
00108 {
00109     <span class="keywordflow">return</span> WindowSize.X +
00110            <a class="code" href="../../d2/d2/drawscrn_8c.html#a1">CalcGRAMScanLine</a>(WindowSize.Y, DeviceExtension-&gt;ScreenAndFont.FontSize.Y) *
00111            DeviceExtension-&gt;EmulateInfo.BytePerLine;
00112 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="drawscrn.c::FsgCopyFrameBuffer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS FsgCopyFrameBuffer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceExtension</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PFSVIDEO_COPY_FRAME_BUFFER&nbsp;</td>
          <td class="mdname" nowrap> <em>CopyFrameBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>inputBufferLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00437">437</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
References <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00116">CalcGRAMAddress()</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00143">_DEVICE_EXTENSION::CurrentMode</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00702">FsgInvertCursor()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00314">MoveGRAM()</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00148">_DEVICE_EXTENSION::ScreenAndFont</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/fsvga_8c-source.html#l01349">FsVgaCopyFrameBuffer()</a>.
<p>
<pre class="fragment"><div>00445                    :
00446 
00447     This routine copy <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> frame buffer.
00448 
00449 Arguments:
00450 
00451     DeviceExtension - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> miniport driver's device <a class="code" href="../../d7/d1/genuedef_8c.html#a6">extension</a>.
00452 
00453     CopyFrameBuffer - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> structure containing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> information about <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> copy frame buffer.
00454 
00455     inputBufferLength - Length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer supplied by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> user.
00456 
00457 Return Value:
00458 
00459     STATUS_INSUFFICIENT_BUFFER <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer was not large enough
00460         <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input data.
00461 
00462     STATUS_SUCCESS <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> operation completed successfully.
00463 
00464 --*/
00465 
00466 {
00467     PUCHAR SourcePtr, TargetPtr;
00468 
00469     <a class="code" href="../../d7/d8/fsvga_8h.html#a49">FsgInvertCursor</a>(DeviceExtension,FALSE);
00470 
00471     SourcePtr = <a class="code" href="../../d7/d8/fsvga_8h.html#a39">CalcGRAMAddress</a> (CopyFrameBuffer-&gt;SrcScreen.Position,
00472                                  DeviceExtension);
00473     TargetPtr = <a class="code" href="../../d7/d8/fsvga_8h.html#a39">CalcGRAMAddress</a> (CopyFrameBuffer-&gt;DestScreen.Position,
00474                                  DeviceExtension);
00475     <a class="code" href="../../d7/d8/fsvga_8h.html#a44">MoveGRAM</a> (TargetPtr,
00476               SourcePtr,
00477               CopyFrameBuffer-&gt;SrcScreen.nNumberOfChars *
00478                   DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.FontSize.Y,
00479               DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o50">CurrentMode</a>.VideoMemory.FrameBufferBase,
00480               DeviceExtension
00481              );
00482 
00483     <a class="code" href="../../d7/d8/fsvga_8h.html#a49">FsgInvertCursor</a>(DeviceExtension,TRUE);
00484 
00485     <span class="keywordflow">return</span> STATUS_SUCCESS;
00486 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="drawscrn.c::FsgInvertCursor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS FsgInvertCursor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceExtension</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>Invert</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00702">702</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
References <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00998">AccessGRAM_AND()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00116">CalcGRAMAddress()</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00105">_EMULATE_BUFFER_INFORMATION::CursorAttributes</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00106">_EMULATE_BUFFER_INFORMATION::CursorPosition</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00153">_DEVICE_EXTENSION::EmulateInfo</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00200">NextGRAMRow()</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00148">_DEVICE_EXTENSION::ScreenAndFont</a>, <a class="el" href="../../d7/d1/port_8c-source.html#l00152">SetGRAMInvertMode()</a>, <a class="el" href="../../d7/d1/port_8c-source.html#l00081">SetGRAMWriteMode()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00107">_EMULATE_BUFFER_INFORMATION::ShowCursor</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00437">FsgCopyFrameBuffer()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00609">FsgReverseMousePointer()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00489">FsgWriteToFrameBuffer()</a>, <a class="el" href="../../d7/d7/fsvga_8c-source.html#l01777">FsVgaSetCursorAttribute()</a>, and <a class="el" href="../../d7/d7/fsvga_8c-source.html#l01710">FsVgaSetCursorPosition()</a>.
<p>
<pre class="fragment"><div>00709                    :
00710 
00711     This routine inverts <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> cursor.
00712 
00713 Arguments:
00714 
00715     DeviceExtension - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> miniport driver's device <a class="code" href="../../d7/d1/genuedef_8c.html#a6">extension</a>.
00716 
00717     Invert - 
00718 
00719 Return Value:
00720 
00721     STATUS_INSUFFICIENT_BUFFER <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer was not large enough
00722         <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input data.
00723 
00724     STATUS_SUCCESS <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> operation completed successfully.
00725 
00726 --*/
00727 
00728 {
00729     PUCHAR CurFrameBufPtr;
00730     COORD  CursorPosition;
00731     COORD  FontSize;
00732     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>  i;
00733     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>  TopScanLine;
00734     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>   fOneMore = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00735 
00736     <span class="keywordflow">if</span> (DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o11">ShowCursor</a> == Invert)
00737         <span class="keywordflow">return</span> STATUS_SUCCESS;
00738 
00739     DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o11">ShowCursor</a> = Invert;
00740 
00741     <span class="keywordflow">if</span> (!(DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o9">CursorAttributes</a>.Enable))
00742         <span class="keywordflow">return</span> STATUS_SUCCESS;
00743 
00744     FontSize = DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.FontSize;
00745     <span class="keywordflow">if</span> (DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.ScreenSize.Y &gt; 25)
00746     {
00747         TopScanLine = ((DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o9">CursorAttributes</a>.Height + 8) * 100 / 8) - 100;
00748     }
00749     <span class="keywordflow">else</span>
00750     {
00751         TopScanLine = ((DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o9">CursorAttributes</a>.Height + 16) * 100 / 16) - 100;
00752     }
00753     TopScanLine = (FontSize.Y * TopScanLine) / 100;
00754 
00755     CursorPosition.X = DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o10">CursorPosition</a>.Coord.Column;
00756     CursorPosition.Y = DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o10">CursorPosition</a>.Coord.Row;
00757     <span class="keywordflow">if</span> ( (0 &lt;= CursorPosition.X &amp;&amp;
00758                CursorPosition.X &lt; DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.ScreenSize.X) &amp;&amp;
00759          (0 &lt;= CursorPosition.Y &amp;&amp;
00760                CursorPosition.Y &lt; DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.ScreenSize.Y)    )
00761     {
00762         <span class="keywordflow">switch</span> (DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o10">CursorPosition</a>.dwType)
00763         {
00764             <span class="keywordflow">case</span> CHAR_TYPE_LEADING:
00765                 <span class="keywordflow">if</span> (CursorPosition.X != DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.ScreenSize.X-1)
00766                 {
00767                     fOneMore = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00768                 }
00769                 <span class="keywordflow">break</span>;
00770             <span class="keywordflow">case</span> CHAR_TYPE_TRAILING:
00771                 <span class="keywordflow">if</span> (CursorPosition.X != 0)
00772                 {
00773                     fOneMore = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00774                     CursorPosition.X--;
00775                 }
00776                 <span class="keywordflow">break</span>;
00777         }
00778 
00779         CurFrameBufPtr = <a class="code" href="../../d7/d8/fsvga_8h.html#a39">CalcGRAMAddress</a> (CursorPosition,
00780                                           DeviceExtension);
00781 
00782         <span class="comment">/*</span>
00783 <span class="comment">         * CursorAttributes.Height is top scan lines.</span>
00784 <span class="comment">         */</span>
00785         <span class="keywordflow">for</span> (i = 0; i &lt; TopScanLine; i++)
00786         {
00787             CurFrameBufPtr = <a class="code" href="../../d7/d8/fsvga_8h.html#a41">NextGRAMRow</a>(CurFrameBufPtr,DeviceExtension);
00788         }
00789 
00790         <span class="comment">//</span>
00791         <span class="comment">// Set invert mode of graphics register</span>
00792         <span class="comment">//</span>
00793         <a class="code" href="../../d6/d2/port_8c.html#a3">SetGRAMInvertMode</a>(DeviceExtension);
00794 
00795         <span class="comment">/*</span>
00796 <span class="comment">         * CursorAttributes.Width is bottom scan lines.</span>
00797 <span class="comment">         */</span>
00798         <span class="keywordflow">for</span> ( ; i &lt; FontSize.Y; i++)
00799         {
00800             <a class="code" href="../../d7/d8/fsvga_8h.html#a54">AccessGRAM_AND</a>(CurFrameBufPtr, (BYTE)-1);
00801             <span class="keywordflow">if</span> (fOneMore)
00802                 <a class="code" href="../../d7/d8/fsvga_8h.html#a54">AccessGRAM_AND</a>(CurFrameBufPtr+1, (BYTE)-1);
00803             CurFrameBufPtr = <a class="code" href="../../d7/d8/fsvga_8h.html#a41">NextGRAMRow</a>(CurFrameBufPtr,DeviceExtension);
00804         }
00805 
00806         <a class="code" href="../../d6/d2/port_8c.html#a1">SetGRAMWriteMode</a>(DeviceExtension);
00807     }
00808 
00809     <span class="keywordflow">return</span> STATUS_SUCCESS;
00810 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="drawscrn.c::FsgReverseMousePointer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS FsgReverseMousePointer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceExtension</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PFSVIDEO_REVERSE_MOUSE_POINTER&nbsp;</td>
          <td class="mdname" nowrap> <em>MouseBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>inputBufferLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00609">609</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
References <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00998">AccessGRAM_AND()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00116">CalcGRAMAddress()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00702">FsgInvertCursor()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00200">NextGRAMRow()</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00148">_DEVICE_EXTENSION::ScreenAndFont</a>, <a class="el" href="../../d7/d1/port_8c-source.html#l00152">SetGRAMInvertMode()</a>, <a class="el" href="../../d7/d1/port_8c-source.html#l00081">SetGRAMWriteMode()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/fsvga_8c-source.html#l01546">FsVgaReverseMousePointer()</a>.
<p>
<pre class="fragment"><div>00617                    :
00618 
00619     This routine reverse <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> frame buffer <span class="keywordflow">for</span> mouse pointer.
00620 
00621 Arguments:
00622 
00623     DeviceExtension - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> miniport driver's device <a class="code" href="../../d7/d1/genuedef_8c.html#a6">extension</a>.
00624 
00625     MouseBuffer - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> structure containing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> information about <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> mouse frame buffer.
00626 
00627     inputBufferLength - Length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer supplied by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> user.
00628 
00629 Return Value:
00630 
00631     STATUS_INSUFFICIENT_BUFFER <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer was not large enough
00632         <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input data.
00633 
00634     STATUS_SUCCESS <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> operation completed successfully.
00635 
00636 --*/
00637 
00638 {
00639 
00640     PUCHAR CurFrameBufPtr;
00641     COORD  CursorPosition;
00642     COORD  FontSize;
00643     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>  i;
00644     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>   fOneMore = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00645 
00646     <a class="code" href="../../d7/d8/fsvga_8h.html#a49">FsgInvertCursor</a>(DeviceExtension,FALSE);
00647 
00648     FontSize = DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.FontSize;
00649 
00650     CursorPosition.X = MouseBuffer-&gt;Screen.Position.X;
00651     CursorPosition.Y = MouseBuffer-&gt;Screen.Position.Y;
00652     <span class="keywordflow">if</span> ( (0 &lt;= CursorPosition.X &amp;&amp;
00653                CursorPosition.X &lt; MouseBuffer-&gt;Screen.ScreenSize.X) &amp;&amp;
00654          (0 &lt;= CursorPosition.Y &amp;&amp;
00655                CursorPosition.Y &lt; MouseBuffer-&gt;Screen.ScreenSize.Y)    )
00656     {
00657         <span class="keywordflow">switch</span> (MouseBuffer-&gt;dwType)
00658         {
00659             <span class="keywordflow">case</span> CHAR_TYPE_LEADING:
00660                 <span class="keywordflow">if</span> (CursorPosition.X != MouseBuffer-&gt;Screen.ScreenSize.X-1)
00661                 {
00662                     fOneMore = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00663                 }
00664                 <span class="keywordflow">break</span>;
00665             <span class="keywordflow">case</span> CHAR_TYPE_TRAILING:
00666                 <span class="keywordflow">if</span> (CursorPosition.X != 0)
00667                 {
00668                     fOneMore = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00669                     CursorPosition.X--;
00670                 }
00671                 <span class="keywordflow">break</span>;
00672         }
00673 
00674         CurFrameBufPtr = <a class="code" href="../../d7/d8/fsvga_8h.html#a39">CalcGRAMAddress</a> (CursorPosition,
00675                                           DeviceExtension);
00676 
00677         <span class="comment">//</span>
00678         <span class="comment">// Set invert mode of graphics register</span>
00679         <span class="comment">//</span>
00680         <a class="code" href="../../d6/d2/port_8c.html#a3">SetGRAMInvertMode</a>(DeviceExtension);
00681 
00682         <span class="comment">/*</span>
00683 <span class="comment">         * CursorAttributes.Width is bottom scan lines.</span>
00684 <span class="comment">         */</span>
00685         <span class="keywordflow">for</span> (i=0 ; i &lt; FontSize.Y; i++)
00686         {
00687             <a class="code" href="../../d7/d8/fsvga_8h.html#a54">AccessGRAM_AND</a>(CurFrameBufPtr, (BYTE)-1);
00688             <span class="keywordflow">if</span> (fOneMore)
00689                 <a class="code" href="../../d7/d8/fsvga_8h.html#a54">AccessGRAM_AND</a>(CurFrameBufPtr+1, (BYTE)-1);
00690             CurFrameBufPtr = <a class="code" href="../../d7/d8/fsvga_8h.html#a41">NextGRAMRow</a>(CurFrameBufPtr,DeviceExtension);
00691         }
00692 
00693         <a class="code" href="../../d6/d2/port_8c.html#a1">SetGRAMWriteMode</a>(DeviceExtension);
00694     }
00695 
00696     <a class="code" href="../../d7/d8/fsvga_8h.html#a49">FsgInvertCursor</a>(DeviceExtension,TRUE);
00697 
00698     <span class="keywordflow">return</span> STATUS_SUCCESS;
00699 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="drawscrn.c::FsgVgaInitializeHWFlags" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS FsgVgaInitializeHWFlags           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>DeviceExtension</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00387">387</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00093">_EMULATE_BUFFER_INFORMATION::BytePerLine</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00047">CalcGRAMScanLine</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00102">_EMULATE_BUFFER_INFORMATION::ColorBg</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00101">_EMULATE_BUFFER_INFORMATION::ColorFg</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00138">_DEVICE_EXTENSION::Configuration</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00105">_EMULATE_BUFFER_INFORMATION::CursorAttributes</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00097">_EMULATE_BUFFER_INFORMATION::DeltaNextFontRow</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00153">_DEVICE_EXTENSION::EmulateInfo</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00076">GetBytePerLine</a>, <a class="el" href="../../d7/d1/port_8c-source.html#l00031">GetHardwareScrollReg()</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00056">_FSVGA_CONFIGURATION_INFORMATION::HardwareScroll</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00096">LIMIT_64K</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00095">_EMULATE_BUFFER_INFORMATION::LimitGRAM</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00094">_EMULATE_BUFFER_INFORMATION::MaxScanLine</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00148">_DEVICE_EXTENSION::ScreenAndFont</a>, <a class="el" href="../../d7/d1/port_8c-source.html#l00081">SetGRAMWriteMode()</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00107">_EMULATE_BUFFER_INFORMATION::ShowCursor</a>, and <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00059">USE_LINE_COMPARE</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/fsvga_8c-source.html#l01663">FsVgaSetScreenInformation()</a>.
<p>
<pre class="fragment"><div>00393                    :
00394 
00395     This routine initialize <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> hardware scrolls flag and any values.
00396 
00397 Arguments:
00398 
00399     EmulateInfo - Pointer to screen emulate information structure.
00400 
00401 Return Value:
00402 
00403 --*/
00404 
00405 {
00406     ULONG <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00407 
00408     <a class="code" href="../../d6/d2/port_8c.html#a0">GetHardwareScrollReg</a>(DeviceExtension);
00409     DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o3">BytePerLine</a> =
00410         (WORD)<a class="code" href="../../d2/d2/drawscrn_8c.html#a3">GetBytePerLine</a>(DeviceExtension);
00411     DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o4">MaxScanLine</a> =
00412         (WORD)<a class="code" href="../../d2/d2/drawscrn_8c.html#a1">CalcGRAMScanLine</a>(DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.ScreenSize.Y,
00413                                DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.FontSize.Y);
00414     DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o6">DeltaNextFontRow</a> =
00415         DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o3">BytePerLine</a> * DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.FontSize.Y;
00416 
00417     <span class="keywordflow">if</span> (DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o49">Configuration</a>.<a class="code" href="../../d3/d1/struct__FSVGA__CONFIGURATION__INFORMATION.html#o2">HardwareScroll</a> &amp; <a class="code" href="../../d7/d8/fsvga_8h.html#a5">USE_LINE_COMPARE</a>) {
00418         DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o5">LimitGRAM</a> =
00419             DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o4">MaxScanLine</a> * DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o3">BytePerLine</a>;
00420     }
00421     <span class="keywordflow">else</span> {
00422         DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o5">LimitGRAM</a> = <a class="code" href="../../d7/d8/fsvga_8h.html#a7">LIMIT_64K</a>;
00423     }
00424 
00425     DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o7">ColorFg</a> = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)-1;
00426     DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o8">ColorBg</a> = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)-1;
00427 
00428     DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o9">CursorAttributes</a>.Enable = 0;
00429     DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o11">ShowCursor</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00430 
00431     <a class="code" href="../../d6/d2/port_8c.html#a1">SetGRAMWriteMode</a>(DeviceExtension);
00432 
00433     <span class="keywordflow">return</span> STATUS_SUCCESS;
00434 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="drawscrn.c::FsgWriteToFrameBuffer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS FsgWriteToFrameBuffer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceExtension</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PFSVIDEO_WRITE_TO_FRAME_BUFFER&nbsp;</td>
          <td class="mdname" nowrap> <em>WriteFrameBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>inputBufferLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00489">489</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
References <a class="el" href="../../d5/d5/fullscr_2vga_2foncache_8c-source.html#l00056">AlignCopyMemory()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d7/d5/foncache_8h-source.html#l00074">BYTE_ALIGN</a>, <a class="el" href="../../d5/d5/fullscr_2vga_2foncache_8c-source.html#l00041">CalcBitmapBufferSize()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00116">CalcGRAMAddress()</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00102">_EMULATE_BUFFER_INFORMATION::ColorBg</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00101">_EMULATE_BUFFER_INFORMATION::ColorFg</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00153">_DEVICE_EXTENSION::EmulateInfo</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00126">ExAllocatePool</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00702">FsgInvertCursor()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00813">FsgWriteToScreen()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d8/ex_8h.html#a329a174">PagedPool</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00148">_DEVICE_EXTENSION::ScreenAndFont</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d7/d5/foncache_8h-source.html#l00075">WORD_ALIGN</a>.
<p>
Referenced by <a class="el" href="../../d7/d7/fsvga_8c-source.html#l01429">FsVgaWriteToFrameBuffer()</a>.
<p>
<pre class="fragment"><div>00497                    :
00498 
00499     This routine write <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> frame buffer.
00500 
00501 Arguments:
00502 
00503     DeviceExtension - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> miniport driver's device <a class="code" href="../../d7/d1/genuedef_8c.html#a6">extension</a>.
00504 
00505     WriteFrameBuffer - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> structure containing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> information about <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> write frame buffer.
00506 
00507     inputBufferLength - Length of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer supplied by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> user.
00508 
00509 Return Value:
00510 
00511     STATUS_INSUFFICIENT_BUFFER <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer was not large enough
00512         <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input data.
00513 
00514     STATUS_SUCCESS <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> operation completed successfully.
00515 
00516 --*/
00517 
00518 {
00519     PCHAR_IMAGE_INFO pCharInfoUni = WriteFrameBuffer-&gt;SrcBuffer;
00520     PUCHAR TargetPtr;
00521     COORD Position = WriteFrameBuffer-&gt;DestScreen.Position;
00522     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Length = WriteFrameBuffer-&gt;DestScreen.nNumberOfChars;
00523     COORD FontSize1 = DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.FontSize;
00524     COORD FontSize2;
00525     PVOID pCapBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00526     ULONG cCapBuffer = 0;
00527     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>  fDbcs;
00528     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00529 
00530     <a class="code" href="../../d7/d8/fsvga_8h.html#a49">FsgInvertCursor</a>(DeviceExtension,FALSE);
00531 
00532     DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o7">ColorFg</a> = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)-1;
00533     DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o8">ColorBg</a> = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)-1;
00534 
00535     FontSize2 = FontSize1;
00536     FontSize2.X *= 2;
00537     cCapBuffer = <a class="code" href="../../d6/d6/foncache_8h.html#a29">CalcBitmapBufferSize</a>(FontSize2,BYTE_ALIGN);
00538     pCapBuffer = <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(PagedPool, cCapBuffer);
00539 
00540     <span class="keywordflow">while</span> (Length--)
00541     {
00542         <span class="keywordflow">if</span> (pCharInfoUni-&gt;FontImageInfo.ImageBits != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00543         {
00544             <span class="keywordflow">try</span>
00545             {
00546                 fDbcs = pCharInfoUni-&gt;CharInfo.Attributes &amp; COMMON_LVB_SBCSDBCS;
00547                 <a class="code" href="../../d7/d8/fsvga_8h.html#a56">AlignCopyMemory</a>((PVOID)pCapBuffer,                    <span class="comment">// pDestBits</span>
00548                                 BYTE_ALIGN,                           <span class="comment">// dwDestAlign</span>
00549                                 pCharInfoUni-&gt;FontImageInfo.ImageBits,<span class="comment">// pSrcBits</span>
00550                                 WORD_ALIGN,                           <span class="comment">// dwSrcAlign</span>
00551                                 fDbcs ? FontSize2 : FontSize1);
00552 
00553                 TargetPtr = <a class="code" href="../../d7/d8/fsvga_8h.html#a39">CalcGRAMAddress</a> (Position,
00554                                              DeviceExtension);
00555                 <span class="keywordflow">if</span> (fDbcs)
00556                 {
00557                     <span class="keywordflow">if</span> (Length)
00558                     {
00559                         <a class="code" href="../../d7/d8/fsvga_8h.html#a50">FsgWriteToScreen</a>(TargetPtr, pCapBuffer, 2, fDbcs,
00560                                          pCharInfoUni-&gt;CharInfo.Attributes,
00561                                          (pCharInfoUni+1)-&gt;CharInfo.Attributes,
00562                                          DeviceExtension);
00563                     }
00564                     <span class="keywordflow">else</span>
00565                     {
00566                         <a class="code" href="../../d7/d8/fsvga_8h.html#a50">FsgWriteToScreen</a>(TargetPtr, pCapBuffer, 2, FALSE,
00567                                          pCharInfoUni-&gt;CharInfo.Attributes,
00568                                          (WORD)-1,
00569                                          DeviceExtension);
00570                     }
00571                 }
00572                 <span class="keywordflow">else</span>
00573                 {
00574                     <a class="code" href="../../d7/d8/fsvga_8h.html#a50">FsgWriteToScreen</a>(TargetPtr, pCapBuffer, 1, fDbcs,
00575                                      pCharInfoUni-&gt;CharInfo.Attributes,
00576                                      (WORD)-1,
00577                                      DeviceExtension);
00578                 }
00579 
00580             }
00581             except (EXCEPTION_EXECUTE_HANDLER)
00582             {
00583             }
00584 
00585         }
00586 
00587         <span class="keywordflow">if</span> (fDbcs &amp;&amp; Length)
00588         {
00589             Length--;
00590             Position.X += 2;
00591             pCharInfoUni += 2;
00592         }
00593         <span class="keywordflow">else</span>
00594         {
00595             Position.X++;
00596             pCharInfoUni++;
00597         }
00598     }
00599 
00600     <a class="code" href="../../d7/d8/fsvga_8h.html#a49">FsgInvertCursor</a>(DeviceExtension,TRUE);
00601 
00602     <span class="keywordflow">if</span> (pCapBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00603         <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(pCapBuffer);
00604 
00605     <span class="keywordflow">return</span> STATUS_SUCCESS;
00606 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="drawscrn.c::FsgWriteToScreen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS FsgWriteToScreen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FrameBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>BitmapBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cjBytes</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fDbcs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>Attributes1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>Attributes2</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceExtension</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00813">813</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
References <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00029">COMMON_LVB_MASK</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00138">_DEVICE_EXTENSION::Configuration</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00049">_FSVGA_CONFIGURATION_INFORMATION::EmulationMode</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00050">ENABLE_WORD_WRITE_VRAM</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00915">FsgWriteToScreenCommonLVB()</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00152">IsGRAMRowOver()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00200">NextGRAMRow()</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00148">_DEVICE_EXTENSION::ScreenAndFont</a>, and <a class="el" href="../../d7/d1/port_8c-source.html#l00186">set_opaque_bkgnd_proc()</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00489">FsgWriteToFrameBuffer()</a>.
<p>
<pre class="fragment"><div>00822 {
00823     WORD  <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00824     PCHAR CurFrameBufPtrTmp;
00825     PCHAR CurFrameBufPtr2nd;
00826     PWORD CurFrameBufPtrWord;
00827     PUCHAR BitmapBufferTmp;
00828 
00829 <span class="preprocessor">#ifdef LATER_HIGH_SPPED_VRAM_ACCESS  // kazum</span>
00830 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (! <a class="code" href="../../d7/d8/fsvga_8h.html#a40">IsGRAMRowOver</a>(FrameBuffer,fDBCS,DeviceExtension)) {
00831         <span class="keywordflow">if</span> (!fDbcs) {
00832             <span class="keywordflow">if</span> (cjBytes == 2)
00833                 BitmapBuffer++;
00834             (*WriteGramInfo-&gt;pfnWriteFontToByteGRAM)(WriteGramInfo);
00835         }
00836         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cjBytes == 2 &amp;&amp; fDBCS) {
00837             <span class="keywordflow">if</span> (DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o49">Configuration</a>.<a class="code" href="../../d3/d1/struct__FSVGA__CONFIGURATION__INFORMATION.html#o0">EmulationMode</a> &amp; <a class="code" href="../../d7/d8/fsvga_8h.html#a0">ENABLE_WORD_WRITE_VRAM</a>) {
00838                 (*WriteGramInfo-&gt;pfnWriteFontToFirstWordGRAM)(WriteGramInfo);
00839             }
00840             <span class="keywordflow">else</span> {
00841                (*WriteGramInfo-&gt;pfnWriteFontToWordGRAM)(WriteGramInfo);
00842             }
00843         }
00844     }
00845     <span class="keywordflow">else</span>
00846 <span class="preprocessor">#endif // LATER_HIGH_SPPED_VRAM_ACCESS  // kazum</span>
00847 <span class="preprocessor"></span>    <span class="keywordflow">try</span>
00848     {
00849         <a class="code" href="../../d6/d2/port_8c.html#a4">set_opaque_bkgnd_proc</a>(DeviceExtension,FrameBuffer,Attributes1);
00850 
00851         <span class="keywordflow">if</span> (!fDbcs) {
00852             CurFrameBufPtrTmp = FrameBuffer;
00853             <span class="keywordflow">if</span> (cjBytes == 2)
00854                 BitmapBuffer++;
00855             <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>=0; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.FontSize.Y; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++) {
00856                 *CurFrameBufPtrTmp = *BitmapBuffer;
00857                 BitmapBuffer += cjBytes;
00858                 CurFrameBufPtrTmp=<a class="code" href="../../d7/d8/fsvga_8h.html#a41">NextGRAMRow</a>(CurFrameBufPtrTmp,DeviceExtension);
00859             }
00860         }
00861         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cjBytes == 2 &amp;&amp; fDbcs) {
00862             <span class="keywordflow">if</span> ((DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o49">Configuration</a>.<a class="code" href="../../d3/d1/struct__FSVGA__CONFIGURATION__INFORMATION.html#o0">EmulationMode</a> &amp; <a class="code" href="../../d7/d8/fsvga_8h.html#a0">ENABLE_WORD_WRITE_VRAM</a>) &amp;&amp;
00863                 !((ULONG)FrameBuffer &amp; 1) &amp;&amp;
00864                 (Attributes2 != -1) &amp;&amp;
00865                 (Attributes1 == Attributes2)
00866                ) {
00867                 CurFrameBufPtrWord = (PWORD)FrameBuffer;
00868                 <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>=0; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.FontSize.Y; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++) {
00869                     *CurFrameBufPtrWord = *((PWORD)BitmapBuffer);
00870                     BitmapBuffer += cjBytes;
00871                     CurFrameBufPtrWord=(PWORD)<a class="code" href="../../d7/d8/fsvga_8h.html#a41">NextGRAMRow</a>((PCHAR)CurFrameBufPtrWord,DeviceExtension);
00872                 }
00873             }
00874             <span class="keywordflow">else</span> {
00875                 CurFrameBufPtrTmp = FrameBuffer;
00876                 CurFrameBufPtr2nd = FrameBuffer + 1;
00877                 BitmapBufferTmp = BitmapBuffer + 1;
00878                 <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>=0; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.FontSize.Y; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++) {
00879                     *CurFrameBufPtrTmp = *BitmapBuffer;
00880                     BitmapBuffer += cjBytes;
00881                     CurFrameBufPtrTmp=<a class="code" href="../../d7/d8/fsvga_8h.html#a41">NextGRAMRow</a>(CurFrameBufPtrTmp,DeviceExtension);
00882                 }
00883                 <span class="keywordflow">if</span> (Attributes2 != -1 &amp;&amp;
00884                     Attributes1 != Attributes2)
00885                     <a class="code" href="../../d6/d2/port_8c.html#a4">set_opaque_bkgnd_proc</a>(DeviceExtension,FrameBuffer,Attributes2);
00886                 <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>=0; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.FontSize.Y; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++) {
00887                     *CurFrameBufPtr2nd = *BitmapBufferTmp;
00888                     BitmapBufferTmp += cjBytes;
00889                     CurFrameBufPtr2nd=<a class="code" href="../../d7/d8/fsvga_8h.html#a41">NextGRAMRow</a>(CurFrameBufPtr2nd,DeviceExtension);
00890                 }
00891             }
00892         }
00893     }
00894     except (EXCEPTION_EXECUTE_HANDLER)
00895     {
00896     }
00897 
00898     <span class="keywordflow">if</span> (Attributes1 &amp; <a class="code" href="../../d2/d2/drawscrn_8c.html#a0">COMMON_LVB_MASK</a>)
00899     {
00900         <a class="code" href="../../d7/d8/fsvga_8h.html#a51">FsgWriteToScreenCommonLVB</a>(FrameBuffer,
00901                                   Attributes1,
00902                                   DeviceExtension);
00903     }
00904     <span class="keywordflow">if</span> ((Attributes2 != (WORD)-1) &amp;&amp; (Attributes2 &amp; <a class="code" href="../../d2/d2/drawscrn_8c.html#a0">COMMON_LVB_MASK</a>))
00905     {
00906         <a class="code" href="../../d7/d8/fsvga_8h.html#a51">FsgWriteToScreenCommonLVB</a>(FrameBuffer+1,
00907                                   Attributes2,
00908                                   DeviceExtension);
00909     }
00910 
00911     <span class="keywordflow">return</span> STATUS_SUCCESS;
00912 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="drawscrn.c::FsgWriteToScreenCommonLVB" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS FsgWriteToScreenCommonLVB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FrameBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>Attributes</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceExtension</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00915">915</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
References <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00986">AccessGRAM_RW()</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00102">_EMULATE_BUFFER_INFORMATION::ColorBg</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00101">_EMULATE_BUFFER_INFORMATION::ColorFg</a>, <a class="el" href="../../d7/d1/port_8c-source.html#l00257">ColorSetDirect()</a>, <a class="el" href="../../d7/d1/port_8c-source.html#l00225">ColorSetGridMask()</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00153">_DEVICE_EXTENSION::EmulateInfo</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d2/d9/cmchek_8c-source.html#l00095">Index</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00200">NextGRAMRow()</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00148">_DEVICE_EXTENSION::ScreenAndFont</a>, <a class="el" href="../../d7/d1/port_8c-source.html#l00186">set_opaque_bkgnd_proc()</a>, and <a class="el" href="../../d7/d1/port_8c-source.html#l00081">SetGRAMWriteMode()</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00813">FsgWriteToScreen()</a>.
<p>
<pre class="fragment"><div>00920 {
00921     WORD  <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>;
00922     PUCHAR CurFrameBufPtrTmp;
00923 
00924     <span class="keywordflow">try</span>
00925     {
00926         <span class="keywordflow">if</span> (Attributes &amp; COMMON_LVB_UNDERSCORE)
00927         {
00928             <a class="code" href="../../d6/d2/port_8c.html#a4">set_opaque_bkgnd_proc</a>(DeviceExtension,FrameBuffer,Attributes);
00929             CurFrameBufPtrTmp = FrameBuffer;
00930             <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>=0; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.FontSize.Y - 1; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++)
00931                 CurFrameBufPtrTmp=<a class="code" href="../../d7/d8/fsvga_8h.html#a41">NextGRAMRow</a>(CurFrameBufPtrTmp,DeviceExtension);
00932             *CurFrameBufPtrTmp = 0xff;
00933         }
00934 
00935         <span class="keywordflow">if</span> (Attributes &amp; COMMON_LVB_GRID_HORIZONTAL)
00936         {
00937             <a class="code" href="../../d6/d2/port_8c.html#a6">ColorSetDirect</a>(DeviceExtension, FrameBuffer,
00938                            FOREGROUND_BLUE | FOREGROUND_GREEN | FOREGROUND_RED,
00939                            0);
00940             *FrameBuffer = 0xff;
00941         }
00942 
00943         <span class="keywordflow">if</span> ( (Attributes &amp; COMMON_LVB_GRID_LVERTICAL) ||
00944              (Attributes &amp; COMMON_LVB_GRID_RVERTICAL)   )
00945         {
00946             <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> mask = ((Attributes &amp; COMMON_LVB_GRID_LVERTICAL) ? 0x80 : 0) +
00947                         ((Attributes &amp; COMMON_LVB_GRID_RVERTICAL) ? 0x01 : 0);
00948             <a class="code" href="../../d6/d2/port_8c.html#a5">ColorSetGridMask</a>(DeviceExtension,
00949                              mask
00950                             );
00951             CurFrameBufPtrTmp = FrameBuffer;
00952             <span class="keywordflow">for</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>=0; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a> &lt; DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o51">ScreenAndFont</a>.FontSize.Y; <a class="code" href="../../d1/d0/cmchek_8c.html#a10">Index</a>++) {
00953                 <a class="code" href="../../d7/d8/fsvga_8h.html#a53">AccessGRAM_RW</a>(CurFrameBufPtrTmp, mask);
00954                 CurFrameBufPtrTmp=<a class="code" href="../../d7/d8/fsvga_8h.html#a41">NextGRAMRow</a>(CurFrameBufPtrTmp,DeviceExtension);
00955             }
00956 
00957             <a class="code" href="../../d6/d2/port_8c.html#a1">SetGRAMWriteMode</a>(DeviceExtension);
00958         }
00959 
00960         DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o7">ColorFg</a> = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)-1;
00961         DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o8">ColorBg</a> = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)-1;
00962 
00963     }
00964     except (EXCEPTION_EXECUTE_HANDLER)
00965     {
00966     }
00967 
00968     <span class="keywordflow">return</span> STATUS_SUCCESS;
00969 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="drawscrn.c::IsGRAMRowOver" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL IsGRAMRowOver           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>BufPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fDbcs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceExtension</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00152">152</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
References <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00143">_DEVICE_EXTENSION::CurrentMode</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00097">_EMULATE_BUFFER_INFORMATION::DeltaNextFontRow</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00153">_DEVICE_EXTENSION::EmulateInfo</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00095">_EMULATE_BUFFER_INFORMATION::LimitGRAM</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00813">FsgWriteToScreen()</a>.
<p>
<pre class="fragment"><div>00160                    :
00161 
00162     This Routine check <a class="code" href="../../d9/d4/struct__ROW.html">ROW</a> overflow as GRAM limit line.
00163 
00164 Arguments:
00165 
00166     BufPtr - Pointer to graphics buffer.
00167 
00168     fDbcs - Flag of DBCS(<span class="keyword">true</span>) or SBCS(false).
00169 
00170 Return Value:
00171     TRUE:  if font box is overflow as GRAMlimit line.
00172     FALSE: not overflow.
00173 
00174 --*/
00175 
00176 {
00177     <span class="keywordflow">if</span> (fDbcs)
00178     {
00179         <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(BufPtr + 1 +
00180                     DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o6">DeltaNextFontRow</a> -
00181                     (PUCHAR)DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o50">CurrentMode</a>.VideoMemory.FrameBufferBase)
00182              &gt;= DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o5">LimitGRAM</a>)
00183             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00184         <span class="keywordflow">else</span>
00185             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00186     }
00187     <span class="keywordflow">else</span>
00188     {
00189         <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(BufPtr +
00190                     DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o6">DeltaNextFontRow</a> -
00191                     (PUCHAR)DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o50">CurrentMode</a>.VideoMemory.FrameBufferBase)
00192              &gt;= DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o5">LimitGRAM</a>)
00193             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00194         <span class="keywordflow">else</span>
00195             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00196     }
00197 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="drawscrn.c::memcpyGRAM" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID memcpyGRAM           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>TargetPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>SourcePtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00233">233</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00263">memcpyGRAMOver()</a>, and <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00314">MoveGRAM()</a>.
<p>
<pre class="fragment"><div>00241                    :
00242 
00243     This routine <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a memory copy <span class="keywordflow">for</span> byte order.
00244 
00245 Arguments:
00246 
00247     TargetPtr - Pointer to target graphics buffer.
00248 
00249     SourcePtr - Pointer to source graphics buffer.
00250 
00251     Length - Fill length.
00252 
00253 Return Value:
00254 
00255 --*/
00256 
00257 {
00258     <span class="keywordflow">while</span> (Length--)
00259         *TargetPtr++ = *SourcePtr++;
00260 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="drawscrn.c::memcpyGRAMOver" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID memcpyGRAMOver           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>TargetPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>SourcePtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FrameBufPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceExtension</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00263">263</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, and <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00233">memcpyGRAM()</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00314">MoveGRAM()</a>.
<p>
<pre class="fragment"><div>00273                    :
00274 
00275     This routine <a class="code" href="../../d7/d4/conexts_8c.html#a1">move</a> a graphics buffer.
00276 
00277 Arguments:
00278 
00279     TargetPtr - Pointer to target graphics buffer.
00280 
00281     SourcePtr - Pointer to source graphics buffer.
00282 
00283     Length - Fill length.
00284 
00285 Return Value:
00286 
00287 --*/
00288 
00289 {
00290     ULONG tmpLen;
00291 
00292     <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(SourcePtr + Length - FrameBufPtr) &gt;= DeviceExtension-&gt;EmulateInfo.LimitGRAM) {
00293         tmpLen = DeviceExtension-&gt;EmulateInfo.LimitGRAM - (SourcePtr - FrameBufPtr);
00294         <a class="code" href="../../d7/d8/fsvga_8h.html#a42">memcpyGRAM</a>(TargetPtr, SourcePtr, tmpLen);
00295         TargetPtr += tmpLen;
00296         Length -= tmpLen;
00297         SourcePtr = FrameBufPtr;
00298     }
00299 
00300     <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(TargetPtr + Length - FrameBufPtr) &gt;= DeviceExtension-&gt;EmulateInfo.LimitGRAM) {
00301         tmpLen = DeviceExtension-&gt;EmulateInfo.LimitGRAM - (TargetPtr - FrameBufPtr);
00302         <a class="code" href="../../d7/d8/fsvga_8h.html#a42">memcpyGRAM</a>(TargetPtr, SourcePtr, tmpLen);
00303         SourcePtr += tmpLen;
00304         Length -= tmpLen;
00305         TargetPtr = FrameBufPtr;
00306     }
00307 
00308     <span class="keywordflow">if</span> (Length) {
00309         <a class="code" href="../../d7/d8/fsvga_8h.html#a42">memcpyGRAM</a>(TargetPtr, SourcePtr, Length);
00310     }
00311 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="drawscrn.c::MoveGRAM" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID MoveGRAM           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>TargetPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>SourcePtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FrameBufPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceExtension</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00314">314</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00233">memcpyGRAM()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00263">memcpyGRAMOver()</a>, <a class="el" href="../../d7/d1/port_8c-source.html#l00121">SetGRAMCopyMode()</a>, and <a class="el" href="../../d7/d1/port_8c-source.html#l00081">SetGRAMWriteMode()</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00437">FsgCopyFrameBuffer()</a>.
<p>
<pre class="fragment"><div>00324                    :
00325 
00326     This routine <a class="code" href="../../d7/d4/conexts_8c.html#a1">move</a> a graphics buffer.
00327 
00328 Arguments:
00329 
00330     TargetPtr - Pointer to target graphics buffer.
00331 
00332     SourcePtr - Pointer to source graphics buffer.
00333 
00334     Length - Fill length.
00335 
00336 Return Value:
00337 
00338     none.
00339 
00340 --*/
00341 {
00342     PCHAR tmpSrc;
00343     PCHAR tmpTrg;
00344     ULONG tmpLen;
00345 
00346     <span class="comment">//</span>
00347     <span class="comment">// Set copy mode of graphics register</span>
00348     <span class="comment">//</span>
00349 
00350     <a class="code" href="../../d6/d2/port_8c.html#a2">SetGRAMCopyMode</a>(DeviceExtension);
00351 
00352     <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(SourcePtr + Length - FrameBufPtr) &gt;= DeviceExtension-&gt;EmulateInfo.LimitGRAM ||
00353         (<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(TargetPtr + Length - FrameBufPtr) &gt;= DeviceExtension-&gt;EmulateInfo.LimitGRAM    ) {
00354         <span class="keywordflow">if</span> (SourcePtr &gt; TargetPtr) {
00355             <a class="code" href="../../d7/d8/fsvga_8h.html#a43">memcpyGRAMOver</a>(TargetPtr,SourcePtr,Length,FrameBufPtr,DeviceExtension);
00356         }
00357         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((ULONG)(TargetPtr - SourcePtr) &gt;= Length) {
00358             <a class="code" href="../../d7/d8/fsvga_8h.html#a43">memcpyGRAMOver</a>(TargetPtr,SourcePtr,Length,FrameBufPtr,DeviceExtension);
00359         }
00360         <span class="keywordflow">else</span> {
00361             <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(SourcePtr + Length - FrameBufPtr) &gt;= DeviceExtension-&gt;EmulateInfo.LimitGRAM) {
00362                 tmpLen = SourcePtr + Length - FrameBufPtr - DeviceExtension-&gt;EmulateInfo.LimitGRAM;
00363                 tmpTrg = TargetPtr + Length - tmpLen - DeviceExtension-&gt;EmulateInfo.LimitGRAM;
00364                 <a class="code" href="../../d7/d8/fsvga_8h.html#a42">memcpyGRAM</a>(tmpTrg, FrameBufPtr, tmpLen);
00365                 Length -= tmpLen;
00366             }
00367             <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(TargetPtr + Length - FrameBufPtr) &gt;= DeviceExtension-&gt;EmulateInfo.LimitGRAM) {
00368                 tmpLen = TargetPtr + Length - FrameBufPtr - DeviceExtension-&gt;EmulateInfo.LimitGRAM;
00369                 tmpSrc = SourcePtr + Length - tmpLen;
00370                 <a class="code" href="../../d7/d8/fsvga_8h.html#a42">memcpyGRAM</a>(FrameBufPtr, tmpSrc, tmpLen);
00371                 Length -= tmpLen;
00372             }
00373             <span class="keywordflow">if</span> (Length) {
00374                 <a class="code" href="../../d7/d8/fsvga_8h.html#a42">memcpyGRAM</a>(TargetPtr, SourcePtr, Length);
00375             }
00376         }
00377     }
00378     <span class="keywordflow">else</span> {
00379         <a class="code" href="../../d7/d8/fsvga_8h.html#a42">memcpyGRAM</a>(TargetPtr, SourcePtr, Length);
00380     }
00381 
00382     <a class="code" href="../../d6/d2/port_8c.html#a1">SetGRAMWriteMode</a>(DeviceExtension);
00383 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="drawscrn.c::NextGRAMRow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PUCHAR NextGRAMRow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>BufPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceExtension</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00200">200</a> of file <a class="el" href="../../d3/d1/drawscrn_8c-source.html">drawscrn.c</a>.
<p>
References <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00093">_EMULATE_BUFFER_INFORMATION::BytePerLine</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00143">_DEVICE_EXTENSION::CurrentMode</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00153">_DEVICE_EXTENSION::EmulateInfo</a>, and <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00095">_EMULATE_BUFFER_INFORMATION::LimitGRAM</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00702">FsgInvertCursor()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00609">FsgReverseMousePointer()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00813">FsgWriteToScreen()</a>, and <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00915">FsgWriteToScreenCommonLVB()</a>.
<p>
<pre class="fragment"><div>00207                    :
00208     This Routine add next row a graphics buffer address.
00209 
00210 Arguments:
00211 
00212     BufPtr - Pointer to graphics buffer.
00213 
00214 Return Value:
00215 
00216     Returen to graphics buffer address.
00217 
00218 --*/
00219 
00220 {
00221     <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>)(BufPtr +
00222                 DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o3">BytePerLine</a> -
00223                 (PUCHAR)DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o50">CurrentMode</a>.VideoMemory.FrameBufferBase)
00224            &gt;= DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o5">LimitGRAM</a>)
00225         <span class="keywordflow">return</span> (BufPtr +
00226                 DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o3">BytePerLine</a> -
00227                 DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o5">LimitGRAM</a>);
00228     <span class="keywordflow">else</span>
00229         <span class="keywordflow">return</span> (BufPtr + DeviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o3">BytePerLine</a>);
00230 }

</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:29 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

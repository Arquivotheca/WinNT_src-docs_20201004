<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: hotkey.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>hotkey.c File Reference</h1><code>#include "<a class="el" href="../../d9/d2/w32_2ntuser_2imm_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d3/d1/hotkey_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/hotkey_8c.html#a0">CIMENonIMEToggle</a> (HIMC hIMC, HKL hKL, HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, LANGID langTarget)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/hotkey_8c.html#a1">IMENonIMEToggle</a> (HIMC hIMC, HKL hKL, HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, BOOL fIME, LANGID langTarget)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/hotkey_8c.html#a2">JCloseOpen</a> (HIMC hIMC, HKL hKL, HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/hotkey_8c.html#a3">CSymbolToggle</a> (HIMC hIMC, HKL hKL, HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/hotkey_8c.html#a4">TShapeToggle</a> (HIMC hIMC, HKL hKL, HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/hotkey_8c.html#a5">KEnglishHangul</a> (HIMC hIMC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/hotkey_8c.html#a6">KShapeToggle</a> (HIMC hIMC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/hotkey_8c.html#a7">KHanjaConvert</a> (HIMC hIMC)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/hotkey_8c.html#a8">ImmGetHotKey</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwID, <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> puModifiers, <a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a> puVKey, HKL *phkl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/hotkey_8c.html#a9">ImmSimulateHotKey</a> (HWND hAppWnd, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwHotKeyID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d2/hotkey_8c.html#a10">HotKeyIDDispatcher</a> (HWND <a class="el" href="../../d5/d8/jul98_2test_2main_8c.html#a29">hWnd</a>, HIMC hImc, HKL hKlCurrent, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwHotKeyID)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a0" doxytag="hotkey.c::CIMENonIMEToggle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CIMENonIMEToggle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LANGID&nbsp;</td>
          <td class="mdname" nowrap> <em>langTarget</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00245">245</a> of file <a class="el" href="../../d3/d1/hotkey_8c-source.html">hotkey.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00292">IMENonIMEToggle()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00468">ImmIsIME()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01525">ImmSetOpenStatus()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00087">HotKeyIDDispatcher()</a>.
<p>
<pre class="fragment"><div>00250 {
00251     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00252         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00253 
00254     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/layout_8c.html#a20">ImmIsIME</a>(hKlCurrent) || LOWORD(HandleToUlong(hKlCurrent)) != langId) {
00255         <span class="comment">//</span>
00256         <span class="comment">// Current keyboard layout is not IME or its language does not match.</span>
00257         <span class="comment">// Let's try to switch to our IME.</span>
00258         <span class="comment">//</span>
00259         <a class="code" href="../../d2/d2/hotkey_8c.html#a1">IMENonIMEToggle</a>(hIMC, hKlCurrent, hWnd, FALSE, langId);
00260         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00261 
00262     } <span class="keywordflow">else</span> {
00263 
00264         LPINPUTCONTEXT pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>( hIMC );
00265 
00266         <span class="keywordflow">if</span> ( pInputContext == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00267             <span class="comment">//</span>
00268             <span class="comment">// returning TRUE even if we didn't change</span>
00269             <span class="comment">//</span>
00270             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00271         }
00272         <span class="keywordflow">if</span> (!pInputContext-&gt;fOpen) {
00273             <span class="comment">//</span>
00274             <span class="comment">// toggle close to open</span>
00275             <span class="comment">//</span>
00276             <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a32">ImmSetOpenStatus</a>(hIMC, TRUE);
00277             <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hIMC);
00278             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00279         } <span class="keywordflow">else</span> {
00280             <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hIMC);
00281             <a class="code" href="../../d2/d2/hotkey_8c.html#a1">IMENonIMEToggle</a>(hIMC, hKlCurrent, hWnd, TRUE, 0);
00282             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00283         }
00284     }
00285 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="hotkey.c::CSymbolToggle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL CSymbolToggle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00365">365</a> of file <a class="el" href="../../d3/d1/hotkey_8c-source.html">hotkey.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00468">ImmIsIME()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01402">ImmSetConversionStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01525">ImmSetOpenStatus()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00087">HotKeyIDDispatcher()</a>.
<p>
<pre class="fragment"><div>00369 {
00370     LPINPUTCONTEXT pInputContext;
00371 
00372     <span class="comment">//</span>
00373     <span class="comment">// Return TRUE even no layout switching - Win95 behavior</span>
00374     <span class="comment">//</span>
00375     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00376         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00377 
00378     <span class="keywordflow">if</span> ( ! <a class="code" href="../../d4/d1/layout_8c.html#a20">ImmIsIME</a>( hKL ) ) {
00379         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00380     }
00381 
00382     <span class="keywordflow">if</span> ( (pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>( hIMC )) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00383         <span class="comment">//</span>
00384         <span class="comment">// The return value is same as Win95.</span>
00385         <span class="comment">// Not happens so often any way.</span>
00386         <span class="comment">//</span>
00387         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00388     }
00389 
00390     <span class="keywordflow">if</span> (pInputContext-&gt;fOpen) {
00391         <span class="comment">//</span>
00392         <span class="comment">// toggle the symbol mode</span>
00393         <span class="comment">//</span>
00394         <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a30">ImmSetConversionStatus</a>(hIMC,
00395                                pInputContext-&gt;fdwConversion ^ IME_CMODE_SYMBOL,
00396                                pInputContext-&gt;fdwSentence);
00397     }
00398     <span class="keywordflow">else</span> {
00399         <span class="comment">//</span>
00400         <span class="comment">// change close -&gt; open</span>
00401         <span class="comment">//</span>
00402         <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a32">ImmSetOpenStatus</a>(hIMC, TRUE);
00403     }
00404 
00405     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hIMC);
00406     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00407 
00408 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="hotkey.c::HotKeyIDDispatcher" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL HotKeyIDDispatcher           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hImc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKlCurrent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwHotKeyID</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00087">87</a> of file <a class="el" href="../../d3/d1/hotkey_8c-source.html">hotkey.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00245">CIMENonIMEToggle()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00365">CSymbolToggle()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00152">GetInputContextThread</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00085">tagIMEDPI::_tagImeFunctions::ImeEscape</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00059">ImmAssert</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00793">ImmLockImeDpi()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00155">JCloseOpen()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00464">KEnglishHangul()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00519">KHanjaConvert()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00492">KShapeToggle()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d9/immstruc_8h-source.html#l00025">NULL_HIMC</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, and <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00415">TShapeToggle()</a>.
<p>
Referenced by <a class="el" href="../../d5/d2/ntuser_2imm_2input_8c-source.html#l00030">ImmProcessKey()</a>, and <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00057">ImmSimulateHotKey()</a>.
<p>
<pre class="fragment"><div>00088 {
00089     <span class="comment">/*</span>
00090 <span class="comment">     * Dispatch the IME hotkey event for the specified hImc</span>
00091 <span class="comment">     * only if the calling thread owns the hImc.</span>
00092 <span class="comment">     */</span>
00093     <span class="keywordflow">if</span> (hImc != <a class="code" href="../../d8/d0/immstruc_8h.html#a0">NULL_HIMC</a> &amp;&amp;
00094             <a class="code" href="../../d4/d0/immcli_8h.html#a15">GetInputContextThread</a>(hImc) != GetCurrentThreadId()) {
00095         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00096     }
00097 
00098     <span class="keywordflow">switch</span> ( dwHotKeyID ) {
00099     <span class="keywordflow">case</span> IME_CHOTKEY_IME_NONIME_TOGGLE:
00100         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a0">CIMENonIMEToggle</a>(hImc, hKlCurrent, hWnd, MAKELANGID(LANG_CHINESE, SUBLANG_CHINESE_SIMPLIFIED));
00101 
00102     <span class="keywordflow">case</span> IME_THOTKEY_IME_NONIME_TOGGLE:
00103         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a0">CIMENonIMEToggle</a>(hImc, hKlCurrent, hWnd, MAKELANGID(LANG_CHINESE, SUBLANG_CHINESE_TRADITIONAL));
00104 
00105     <span class="keywordflow">case</span> IME_CHOTKEY_SYMBOL_TOGGLE:
00106     <span class="keywordflow">case</span> IME_THOTKEY_SYMBOL_TOGGLE:
00107         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a3">CSymbolToggle</a>( hImc, hKlCurrent, hWnd);
00108 
00109     <span class="keywordflow">case</span> IME_JHOTKEY_CLOSE_OPEN:
00110         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a2">JCloseOpen</a>( hImc, hKlCurrent, hWnd);
00111 
00112     <span class="keywordflow">case</span> IME_KHOTKEY_ENGLISH:           <span class="comment">// VK_HANGUL : English/Hangul mode</span>
00113         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a5">KEnglishHangul</a>( hImc );
00114 
00115     <span class="keywordflow">case</span> IME_KHOTKEY_SHAPE_TOGGLE:      <span class="comment">// VK_JUNJA : full/half width</span>
00116         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a6">KShapeToggle</a>( hImc );
00117 
00118     <span class="keywordflow">case</span> IME_KHOTKEY_HANJACONVERT:      <span class="comment">// VK_HANJA : convert hangul to hanja</span>
00119         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a7">KHanjaConvert</a>( hImc );
00120 
00121     <span class="keywordflow">case</span> IME_CHOTKEY_SHAPE_TOGGLE:
00122     <span class="keywordflow">case</span> IME_THOTKEY_SHAPE_TOGGLE:
00123         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a4">TShapeToggle</a>( hImc, hKlCurrent, hWnd);
00124 
00125     <span class="keywordflow">default</span>:
00126         <span class="comment">/*</span>
00127 <span class="comment">         * Direct swithing hotkey should have been handled in the kernel side.</span>
00128 <span class="comment">         */</span>
00129         <a class="code" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>(dwHotKeyID &lt; IME_HOTKEY_DSWITCH_FIRST || dwHotKeyID &gt; IME_HOTKEY_DSWITCH_LAST);
00130 
00131         <span class="keywordflow">if</span> ( dwHotKeyID &gt;= IME_HOTKEY_PRIVATE_FIRST &amp;&amp;
00132                     dwHotKeyID &lt;= IME_HOTKEY_PRIVATE_LAST ) {
00133 
00134             <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi;
00135             <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    bRet = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00136 
00137             <span class="keywordflow">if</span> ( (pImeDpi = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>(hKlCurrent)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00138 
00139                 bRet = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>)(*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o21">ImeEscape</a>)( hImc,
00140                                                   IME_ESC_PRIVATE_HOTKEY,
00141                                                   (PVOID)&amp;dwHotKeyID );
00142                 <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00143                 <span class="keywordflow">return</span> bRet;
00144             }
00145         }
00146     }
00147     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00148 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="hotkey.c::IMENonIMEToggle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL IMENonIMEToggle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fIME</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LANGID&nbsp;</td>
          <td class="mdname" nowrap> <em>langTarget</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00292">292</a> of file <a class="el" href="../../d3/d1/hotkey_8c-source.html">hotkey.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00468">ImmIsIME()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07799">NtUserGetThreadState()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d7/ntcftxt_8h-source.html#l00427">PostMessage()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00245">CIMENonIMEToggle()</a>, and <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00155">JCloseOpen()</a>.
<p>
<pre class="fragment"><div>00298 {
00299     HKL  hEnumKL[32], hTargetKL;
00300     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a> nLayouts, i;
00301     HKL hPrevKL;
00302 
00303     UNREFERENCED_PARAMETER(hIMC);
00304 
00305     hPrevKL = (HKL)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a287">NtUserGetThreadState</a>( UserThreadStatePreviousKeyboardLayout );
00306 
00307     <span class="comment">//</span>
00308     <span class="comment">// If we find the same layout in the layout list, let's switch to</span>
00309     <span class="comment">// the layout. If we fail, let's switch to a first-found good</span>
00310     <span class="comment">// layout.</span>
00311     <span class="comment">//</span>
00312 
00313     hTargetKL = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00314     nLayouts = GetKeyboardLayoutList(<span class="keyword">sizeof</span>(hEnumKL)/<span class="keyword">sizeof</span>(HKL), hEnumKL);
00315 
00316     <span class="comment">// LATER:</span>
00317     <span class="comment">// Hmm, looks like we can't simply rely on hPrevKL on multiple lanugage</span>
00318     <span class="comment">// environment..</span>
00319     <span class="comment">//</span>
00320     <span class="keywordflow">if</span> (hPrevKL != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00321         <span class="keywordflow">if</span> (langTarget == 0 || LOWORD(HandleToUlong(hPrevKL)) == langTarget) {
00322             <span class="comment">//</span>
00323             <span class="comment">// If langtarget is not specified, or</span>
00324             <span class="comment">// if it matches the previous langauge.</span>
00325             <span class="comment">//</span>
00326             <span class="keywordflow">for</span> (i = 0; i &lt; nLayouts; i++) {
00327                 <span class="comment">// valid target HKL</span>
00328                 <span class="keywordflow">if</span> (hEnumKL[i] == hPrevKL) {
00329                     hTargetKL = hPrevKL;
00330                     <span class="keywordflow">break</span>;
00331                 }
00332             }
00333         }
00334     }
00335     <span class="keywordflow">if</span> (hTargetKL == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00336         <span class="keywordflow">for</span> (i = 0; i &lt; nLayouts; i++) {
00337             <span class="comment">// find a valid target HKL</span>
00338             <span class="keywordflow">if</span> (fCurrentIsIME ^ <a class="code" href="../../d4/d1/layout_8c.html#a20">ImmIsIME</a>(hEnumKL[i])) {
00339                 <span class="keywordflow">if</span> (langTarget != 0 &amp;&amp; LOWORD(HandleToUlong(hEnumKL[i])) != langTarget) {
00340                     <span class="comment">// If the target language is specified, check it</span>
00341                     <span class="keywordflow">continue</span>;
00342                 }
00343                 hTargetKL = hEnumKL[i];
00344                 <span class="keywordflow">break</span>;
00345             }
00346         }
00347     }
00348     <span class="keywordflow">if</span> (hTargetKL != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; hCurrentKL != hTargetKL) {
00349 
00350         <span class="comment">// depends on multilingual message and how to get the base charset</span>
00351         <span class="comment">// wait for confirmation of multiingual spec - tmp solution</span>
00352         <a class="code" href="../../d0/d8/ntcftxt_8h.html#a20">PostMessage</a>(hWnd, WM_INPUTLANGCHANGEREQUEST, DEFAULT_CHARSET, (LPARAM)hTargetKL);
00353     }
00354     <span class="comment">//</span>
00355     <span class="comment">// returning TRUE, even if we failed to switch</span>
00356     <span class="comment">//</span>
00357     <span class="keywordflow">return</span> <a class="code" href="../../d4/d1/layout_8c.html#a20">ImmIsIME</a>(hTargetKL);
00358 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="hotkey.c::ImmGetHotKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ImmGetHotKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>puModifiers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d5/ndismain_8h.html#a266">PUINT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>puVKey</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL *&nbsp;</td>
          <td class="mdname" nowrap> <em>phkl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00040">40</a> of file <a class="el" href="../../d3/d1/hotkey_8c-source.html">hotkey.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l12826">NtUserGetImeHotKey()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>00045 {
00046     <span class="keywordflow">if</span> (puModifiers == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || puVKey == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00047         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00048     }
00049     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a393">NtUserGetImeHotKey</a>( dwID, puModifiers, puVKey, phkl );
00050 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="hotkey.c::ImmSimulateHotKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ImmSimulateHotKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hAppWnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwHotKeyID</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00057">57</a> of file <a class="el" href="../../d3/d1/hotkey_8c-source.html">hotkey.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d7/client_8c-source.html#l04502">GetKeyboardLayout()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00251">GetWindowThreadProcessId()</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00087">HotKeyIDDispatcher()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00201">ImmGetContext()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00292">ImmReleaseContext()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/country_8c-source.html#l00063">ConimeHotkey()</a>.
<p>
<pre class="fragment"><div>00060 {
00061     HIMC hImc;
00062     HKL  hKL;
00063     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fReturn;
00064 
00065     hImc = <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a5">ImmGetContext</a>( hAppWnd );
00066     hKL = <a class="code" href="../../d3/d8/client_8c.html#a154">GetKeyboardLayout</a>( <a class="code" href="../../d3/d8/winmgrc_8c.html#a18">GetWindowThreadProcessId</a>(hAppWnd, NULL) );
00067     fReturn = <a class="code" href="../../d4/d0/immcli_8h.html#a105">HotKeyIDDispatcher</a>( hAppWnd, hImc, hKL, dwHotKeyID);
00068     <a class="code" href="../../d7/d6/w32_2ntuser_2imm_2context_8c.html#a7">ImmReleaseContext</a>( hAppWnd, hImc );
00069     <span class="keywordflow">return</span> fReturn;
00070 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="hotkey.c::JCloseOpen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL JCloseOpen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00155">155</a> of file <a class="el" href="../../d3/d1/hotkey_8c-source.html">hotkey.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00292">IMENonIMEToggle()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01494">ImmGetOpenStatus()</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00468">ImmIsIME()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00793">ImmLockImeDpi()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01525">ImmSetOpenStatus()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00090">tagIMEDPI::_tagImeFunctions::NotifyIME</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, <a class="el" href="../../d6/d8/cltxt_8h-source.html#l00652">SendMessage()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00087">HotKeyIDDispatcher()</a>.
<p>
<pre class="fragment"><div>00159 {
00160 
00161     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/layout_8c.html#a20">ImmIsIME</a>(hCurrentKL) &amp;&amp;
00162             LOWORD(HandleToUlong(hCurrentKL)) == MAKELANGID(LANG_JAPANESE, SUBLANG_DEFAULT)) {
00163         <span class="comment">//</span>
00164         <span class="comment">// If current KL is IME and its language is Japanese,</span>
00165         <span class="comment">// we only have to switch the open/close status.</span>
00166         <span class="comment">//</span>
00167         <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a32">ImmSetOpenStatus</a>( hIMC, !<a class="code" href="../../d4/d1/ctxtinfo_8c.html#a31">ImmGetOpenStatus</a>(hIMC) );
00168     } <span class="keywordflow">else</span> {
00169         <span class="comment">//</span>
00170         <span class="comment">// If current KL is not IME or its language is not Japanese,</span>
00171         <span class="comment">// we should find the Japanese IME and set it open.</span>
00172         <span class="comment">//</span>
00173         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d2/hotkey_8c.html#a1">IMENonIMEToggle</a>(hIMC, hCurrentKL, hWnd, FALSE, MAKELANGID(LANG_JAPANESE, SUBLANG_DEFAULT))) {
00174             <span class="comment">//</span>
00175             <span class="comment">// Mark it so that later we can initialize the fOpen</span>
00176             <span class="comment">// as expected.</span>
00177             <span class="comment">//</span>
00178             PINPUTCONTEXT pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>(hIMC);
00179 
00180             <span class="keywordflow">if</span> (pInputContext) {
00181                 pInputContext-&gt;fdwDirty |= IMSS_INIT_OPEN;
00182                 <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hIMC);
00183             }
00184         }
00185     }
00186     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00187 
00188 <span class="preprocessor">#if 0   // for your reference : old code ported from Win95</span>
00189 <span class="preprocessor"></span>    LPINPUTCONTEXT pInputContext;
00190     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>            pImeDpi;
00191 
00192 
00193     <span class="keywordflow">if</span> ( (pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>( hIMC )) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00194     <span class="comment">//</span>
00195     <span class="comment">// The return value is same as Win95.</span>
00196     <span class="comment">// Not happens so often any way.</span>
00197     <span class="comment">//</span>
00198         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00199     }
00200 
00201     pImeDpi = <a class="code" href="../../d9/d0/immuser_8h.html#a45">ImmLockImeDpi</a>( hCurrentKL );
00202     <span class="keywordflow">if</span> ( pImeDpi != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00203     <span class="comment">//</span>
00204     <span class="comment">// update Input Context</span>
00205     <span class="comment">//</span>
00206         pInputContext-&gt;fOpen = !pInputContext-&gt;fOpen;
00207 
00208     <span class="comment">//</span>
00209     <span class="comment">// notify IME</span>
00210     <span class="comment">//</span>
00211         (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o26">NotifyIME</a>)( hIMC,
00212                                    NI_CONTEXTUPDATED,
00213                                    0<a class="code" href="../../d2/d0/aw_8h.html#a3">L</a>,
00214                                    IMC_SETOPENSTATUS );
00215     <span class="comment">//</span>
00216     <span class="comment">// inform UI</span>
00217     <span class="comment">//</span>
00218         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hWnd, WM_IME_NOTIFY, IMN_SETOPENSTATUS, 0L);
00219         <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hWnd, WM_IME_SYSTEM, IMS_SETOPENSTATUS, 0L);
00220 
00221         <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>( hIMC );
00222         <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00223         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00224 
00225     } <span class="keywordflow">else</span> {
00226 
00227         <span class="keywordflow">if</span> ( !pInputContext-&gt;fOpen ) {
00228             pInputContext-&gt;fOpen = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00229             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hWnd, WM_IME_NOTIFY, IMN_SETOPENSTATUS, 0L);
00230             <a class="code" href="../../d5/d9/cltxt_8h.html#a16">SendMessage</a>(hWnd, WM_IME_SYSTEM, IMS_SETOPENSTATUS, 0L);
00231         }
00232         <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>( hIMC );
00233 
00234         <span class="keywordflow">return</span> <a class="code" href="../../d2/d2/hotkey_8c.html#a1">IMENonIMEToggle</a>(hIMC, hCurrentKL, hWnd, FALSE);
00235     }
00236 <span class="preprocessor">#endif</span>
00237 <span class="preprocessor"></span>}
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="hotkey.c::KEnglishHangul" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL KEnglishHangul           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hIMC</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00464">464</a> of file <a class="el" href="../../d3/d1/hotkey_8c-source.html">hotkey.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01402">ImmSetConversionStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01525">ImmSetOpenStatus()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00087">HotKeyIDDispatcher()</a>.
<p>
<pre class="fragment"><div>00465 {
00466     PINPUTCONTEXT pInputContext;
00467 
00468     <span class="keywordflow">if</span> ((pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>(hImc)) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00469 
00470         <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a30">ImmSetConversionStatus</a>(hImc,
00471                 pInputContext-&gt;fdwConversion ^ IME_CMODE_HANGEUL,
00472                 pInputContext-&gt;fdwSentence);
00473 
00474         <span class="keywordflow">if</span> ((pInputContext-&gt;fdwConversion &amp; IME_CMODE_HANGEUL) ||
00475                 (pInputContext-&gt;fdwConversion &amp; IME_CMODE_FULLSHAPE)) {
00476             <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a32">ImmSetOpenStatus</a>(hImc, TRUE);
00477         } <span class="keywordflow">else</span> {
00478             <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a32">ImmSetOpenStatus</a>(hImc, FALSE);
00479         }
00480         <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
00481         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00482     }
00483 
00484     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00485 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="hotkey.c::KHanjaConvert" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL KHanjaConvert           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hIMC</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00519">519</a> of file <a class="el" href="../../d3/d1/hotkey_8c-source.html">hotkey.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01402">ImmSetConversionStatus()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00087">HotKeyIDDispatcher()</a>.
<p>
<pre class="fragment"><div>00520 {
00521     PINPUTCONTEXT pInputContext;
00522 
00523     <span class="keywordflow">if</span> ( (pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>( hImc )) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00524 
00525         <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a30">ImmSetConversionStatus</a>( hImc,
00526                                 pInputContext-&gt;fdwConversion ^ IME_CMODE_HANJACONVERT,
00527                                 pInputContext-&gt;fdwSentence );
00528 
00529         <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>( hImc );
00530         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00531     }
00532     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00533 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="hotkey.c::KShapeToggle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL KShapeToggle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>hIMC</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00492">492</a> of file <a class="el" href="../../d3/d1/hotkey_8c-source.html">hotkey.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01402">ImmSetConversionStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01525">ImmSetOpenStatus()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00087">HotKeyIDDispatcher()</a>.
<p>
<pre class="fragment"><div>00493 {
00494     PINPUTCONTEXT pInputContext;
00495 
00496     <span class="keywordflow">if</span> ( (pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>( hImc )) != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00497 
00498         <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a30">ImmSetConversionStatus</a>(hImc,
00499             pInputContext-&gt;fdwConversion ^ IME_CMODE_FULLSHAPE,
00500             pInputContext-&gt;fdwSentence);
00501 
00502         <span class="keywordflow">if</span> ((pInputContext-&gt;fdwConversion &amp; IME_CMODE_HANGEUL)
00503                 || (pInputContext-&gt;fdwConversion &amp; IME_CMODE_FULLSHAPE))
00504             <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a32">ImmSetOpenStatus</a>(hImc, TRUE);
00505         <span class="keywordflow">else</span>
00506             <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a32">ImmSetOpenStatus</a>(hImc, FALSE);
00507         <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hImc);
00508         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00509     }
00510 
00511     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00512 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="hotkey.c::TShapeToggle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL TShapeToggle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HIMC&nbsp;</td>
          <td class="mdname" nowrap> <em>hIMC</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWnd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00415">415</a> of file <a class="el" href="../../d3/d1/hotkey_8c-source.html">hotkey.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d7/aug98_2test_2main_8c-source.html#l00110">hWnd</a>, <a class="el" href="../../d5/d0/layout_8c-source.html#l00468">ImmIsIME()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00371">ImmLockIMC()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01402">ImmSetConversionStatus()</a>, <a class="el" href="../../d5/d0/ctxtinfo_8c-source.html#l01525">ImmSetOpenStatus()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00383">ImmUnlockIMC()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/hotkey_8c-source.html#l00087">HotKeyIDDispatcher()</a>.
<p>
<pre class="fragment"><div>00419 {
00420     LPINPUTCONTEXT pInputContext;
00421 
00422     <span class="comment">//</span>
00423     <span class="comment">// Return TRUE even no layout switching - Win95 behavior</span>
00424     <span class="comment">//</span>
00425     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/aug98_2test_2main_8c.html#a29">hWnd</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00426         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00427 
00428     <span class="keywordflow">if</span> ( ! <a class="code" href="../../d4/d1/layout_8c.html#a20">ImmIsIME</a>( hKL ) ) {
00429         <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00430     }
00431 
00432     <span class="keywordflow">if</span> ( (pInputContext = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a12">ImmLockIMC</a>( hIMC )) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> ) {
00433         <span class="comment">//</span>
00434         <span class="comment">// The return value is same as Win95.</span>
00435         <span class="comment">// Not happens so often any way.</span>
00436         <span class="comment">//</span>
00437         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00438     }
00439 
00440     <span class="keywordflow">if</span> (pInputContext-&gt;fOpen) {
00441         <span class="comment">//</span>
00442         <span class="comment">// toggle the symbol mode</span>
00443         <span class="comment">//</span>
00444         <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a30">ImmSetConversionStatus</a>(hIMC,
00445                                pInputContext-&gt;fdwConversion ^ IME_CMODE_FULLSHAPE,
00446                                pInputContext-&gt;fdwSentence);
00447     }
00448     <span class="keywordflow">else</span> {
00449         <span class="comment">//</span>
00450         <span class="comment">// change close -&gt; open</span>
00451         <span class="comment">//</span>
00452         <a class="code" href="../../d4/d1/ctxtinfo_8c.html#a32">ImmSetOpenStatus</a>(hIMC, TRUE);
00453     }
00454 
00455     <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a13">ImmUnlockIMC</a>(hIMC);
00456     <span class="keywordflow">return</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00457 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:06 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

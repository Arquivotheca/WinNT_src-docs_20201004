<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: po.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>po.h</h1><a href="../../d1/d2/po_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*++ BUILD Version: 0001    // Increment this if a change has global effects</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1994  Microsoft Corporation</span>
00004 <span class="comment">Copyright (c) 1994  International Business Machines Corporation</span>
00005 <span class="comment"></span>
00006 <span class="comment">Module Name:</span>
00007 <span class="comment"></span>
00008 <span class="comment">    po.h</span>
00009 <span class="comment"></span>
00010 <span class="comment">Abstract:</span>
00011 <span class="comment"></span>
00012 <span class="comment">    This module contains the internal structure definitions and APIs used by</span>
00013 <span class="comment">    the NT Poewr Management.</span>
00014 <span class="comment"></span>
00015 <span class="comment">Author:</span>
00016 <span class="comment"></span>
00017 <span class="comment">    Ken Reneris (kenr) 19-July-1994</span>
00018 <span class="comment">    N. Yoshiyama [IBM Corp.] 01-Mar-1994</span>
00019 <span class="comment"></span>
00020 <span class="comment"></span>
00021 <span class="comment">Revision History:</span>
00022 <span class="comment"></span>
00023 <span class="comment"></span>
00024 <span class="comment">--*/</span>
00025 
00026 
00027 
00028 <span class="preprocessor">#ifndef _PO_</span>
00029 <span class="preprocessor"></span><span class="preprocessor">#define _PO_</span>
00030 <span class="preprocessor"></span>
00031 <span class="preprocessor">#if DBG</span>
00032 <span class="preprocessor"></span>
00033 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00034 PoPowerTracePrint(
00035     ULONG    TracePoint,
00036     ULONG_PTR Caller,
00037     ULONG_PTR CallerCaller,
00038     ULONG_PTR DeviceObject,
00039     ULONG_PTR Irp,
00040     ULONG_PTR Ios
00041     );
00042 
00043 <span class="preprocessor">#define PoPowerTrace(TracePoint,DevObj,Arg1,Arg2) \</span>
00044 <span class="preprocessor">{\</span>
00045 <span class="preprocessor">    PVOID pptcCaller;      \</span>
00046 <span class="preprocessor">    PVOID pptcCallerCaller;  \</span>
00047 <span class="preprocessor">    RtlGetCallersAddress(&amp;pptcCaller, &amp;pptcCallerCaller); \</span>
00048 <span class="preprocessor">    PoPowerTracePrint(TracePoint, (ULONG_PTR)pptcCaller, (ULONG_PTR)pptcCallerCaller, (ULONG_PTR)DevObj, (ULONG_PTR)Arg1, (ULONG_PTR)Arg2); \</span>
00049 <span class="preprocessor">}</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00051"></a><a class="code" href="../../d1/d2/po_8h.html#a0">00051</a> <span class="preprocessor"></span><span class="preprocessor">#define PoPowerTrace(TracePoint,DevObj,Arg1,Arg2)</span>
00052 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00053 <span class="preprocessor"></span>
<a name="l00054"></a><a class="code" href="../../d1/d2/po_8h.html#a1">00054</a> <span class="preprocessor">#define POWERTRACE_CALL         0x1</span>
<a name="l00055"></a><a class="code" href="../../d1/d2/po_8h.html#a2">00055</a> <span class="preprocessor"></span><span class="preprocessor">#define POWERTRACE_PRESENT      0x2</span>
<a name="l00056"></a><a class="code" href="../../d1/d2/po_8h.html#a3">00056</a> <span class="preprocessor"></span><span class="preprocessor">#define POWERTRACE_STARTNEXT    0x4</span>
<a name="l00057"></a><a class="code" href="../../d1/d2/po_8h.html#a4">00057</a> <span class="preprocessor"></span><span class="preprocessor">#define POWERTRACE_SETSTATE     0x8</span>
<a name="l00058"></a><a class="code" href="../../d1/d2/po_8h.html#a5">00058</a> <span class="preprocessor"></span><span class="preprocessor">#define POWERTRACE_COMPLETE     0x10</span>
00059 <span class="preprocessor"></span>
00060 
00061 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00062 <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a0">FASTCALL</a>
00063 <a class="code" href="../../d1/d2/po_8h.html#a57">PoInitializePrcb</a> (
00064     PKPRCB      Prcb
00065     );
00066 
00067 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00068 BOOLEAN
00069 <a class="code" href="../../d1/d2/po_8h.html#a58">PoInitSystem</a> (
00070     IN ULONG    Phase
00071     );
00072 
00073 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00074 <a class="code" href="../../d1/d2/po_8h.html#a59">PoInitDriverServices</a> (
00075     IN ULONG    Phase
00076     );
00077 
00078 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00079 <a class="code" href="../../d1/d2/po_8h.html#a60">PoInitHiberServices</a> (
00080     IN BOOLEAN  Setup
00081     );
00082 
00083 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00084 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00085 <a class="code" href="../../d1/d2/po_8h.html#a61">PoInitializeDeviceObject</a> (
00086     IN <a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html">PDEVOBJ_EXTENSION</a>   DeviceObjectExtension
00087     );
00088 
00089 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00090 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00091 <a class="code" href="../../d1/d2/po_8h.html#a62">PoRunDownDeviceObject</a> (
00092     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>   DeviceObject
00093     );
00094 
00095 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00096 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00097 <a class="code" href="../../d1/d2/po_8h.html#a63">PopCleanupPowerState</a> (
00098     IN OUT PUCHAR PowerState
00099     );
00100 
<a name="l00101"></a><a class="code" href="../../d1/d2/po_8h.html#a6">00101</a> <span class="preprocessor">#define PoRundownThread(Thread)     \</span>
00102 <span class="preprocessor">        PopCleanupPowerState(&amp;Thread-&gt;Tcb.PowerState)</span>
00103 <span class="preprocessor"></span>
<a name="l00104"></a><a class="code" href="../../d1/d2/po_8h.html#a7">00104</a> <span class="preprocessor">#define PoRundownProcess(Process)   \</span>
00105 <span class="preprocessor">        PopCleanupPowerState(&amp;Process-&gt;Pcb.PowerState)</span>
00106 <span class="preprocessor"></span>
00107 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00108 <a class="code" href="../../d1/d2/po_8h.html#a64">PoNotifySystemTimeSet</a> (
00109     VOID
00110     );
00111 
00112 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00113 <a class="code" href="../../d1/d2/po_8h.html#a65">PoInvalidateDevicePowerRelations</a>(
00114     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>  DeviceObject
00115     );
00116 
00117 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00118 <a class="code" href="../../d1/d2/po_8h.html#a66">PoShutdownBugCheck</a> (
00119     IN BOOLEAN  AllowCrashDump,
00120     IN ULONG    BugCheckCode,
00121     IN ULONG_PTR BugCheckParameter1,
00122     IN ULONG_PTR BugCheckParameter2,
00123     IN ULONG_PTR BugCheckParameter3,
00124     IN ULONG_PTR BugCheckParameter4
00125     );
00126 
00127 <span class="comment">// begin_nthal</span>
00128 
00129 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00130 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00131 <a class="code" href="../../d1/d2/po_8h.html#a67">PoSetHiberRange</a> (
00132     IN PVOID     MemoryMap,
00133     IN ULONG     Flags,
00134     IN PVOID     Address,
00135     IN ULONG_PTR Length,
00136     IN ULONG     Tag
00137     );
00138 
00139 <span class="comment">// memory_range.Type</span>
<a name="l00140"></a><a class="code" href="../../d1/d2/po_8h.html#a8">00140</a> <span class="preprocessor">#define PO_MEM_PRESERVE         0x00000001      // memory range needs preserved</span>
<a name="l00141"></a><a class="code" href="../../d1/d2/po_8h.html#a9">00141</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_MEM_CLONE            0x00000002      // Clone this range</span>
<a name="l00142"></a><a class="code" href="../../d1/d2/po_8h.html#a10">00142</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_MEM_CL_OR_NCHK       0x00000004      // Either clone or do not checksum</span>
<a name="l00143"></a><a class="code" href="../../d1/d2/po_8h.html#a11">00143</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_MEM_DISCARD          0x00008000      // This range to be removed</span>
<a name="l00144"></a><a class="code" href="../../d1/d2/po_8h.html#a12">00144</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_MEM_PAGE_ADDRESS     0x00004000      // Arguments passed are physical pages</span>
00145 <span class="preprocessor"></span>
00146 <span class="comment">// end_nthal</span>
00147 
<a name="l00148"></a><a class="code" href="../../d1/d2/po_8h.html#a13">00148</a> <span class="preprocessor">#define PoWakeTimerSupported()  \</span>
00149 <span class="preprocessor">    (PopCapabilities.RtcWake &gt;= PowerSystemSleeping1)</span>
00150 <span class="preprocessor"></span>
00151 ULONG
00152 <a class="code" href="../../d1/d2/po_8h.html#a68">PoSimpleCheck</a> (
00153     IN ULONG                PatialSum,
00154     IN PVOID                StartVa,
00155     IN ULONG_PTR            Length
00156     );
00157 
00158 BOOLEAN
00159 <a class="code" href="../../d1/d2/po_8h.html#a69">PoSystemIdleWorker</a> (
00160     IN BOOLEAN IdleWorker
00161     );
00162 
00163 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00164 <a class="code" href="../../d1/d2/po_8h.html#a70">PoVolumeDevice</a>(
00165     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
00166     );
00167 
00168 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00169 <a class="code" href="../../d1/d2/po_8h.html#a71">PoSetWarmEjectDevice</a>(
00170     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject
00171     ) ;
00172 
00173 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00174 <a class="code" href="../../d1/d2/po_8h.html#a72">PoGetLightestSystemStateForEject</a>(
00175     IN   BOOLEAN              DockBeingEjected,
00176     IN   BOOLEAN              HotEjectSupported,
00177     IN   BOOLEAN              WarmEjectSupported,
00178     OUT  PSYSTEM_POWER_STATE  LightestSleepState
00179     );
00180 
00181 <span class="comment">// begin_ntddk begin_wdm</span>
00182 
00183 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00184 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00185 <a class="code" href="../../d1/d2/po_8h.html#a73">PoSetSystemState</a> (
00186     IN EXECUTION_STATE Flags
00187     );
00188 
00189 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00190 PVOID
00191 <a class="code" href="../../d1/d2/po_8h.html#a74">PoRegisterSystemState</a> (
00192     IN PVOID StateHandle,
00193     IN EXECUTION_STATE Flags
00194     );
00195 
00196 <span class="keyword">typedef</span>
00197 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00198"></a><a class="code" href="../../d1/d2/po_8h.html#a39">00198</a> (*PREQUEST_POWER_COMPLETE) (
00199     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
00200     IN UCHAR MinorFunction,
00201     IN POWER_STATE PowerState,
00202     IN PVOID Context,
00203     IN PIO_STATUS_BLOCK IoStatus
00204     );
00205 
00206 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00207 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00208 <a class="code" href="../../d1/d2/po_8h.html#a75">PoRequestPowerIrp</a> (
00209     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject,
00210     IN UCHAR MinorFunction,
00211     IN POWER_STATE PowerState,
00212     IN <a class="code" href="../../d1/d2/po_8h.html#a39">PREQUEST_POWER_COMPLETE</a> CompletionFunction,
00213     IN PVOID Context,
00214     OUT <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a> *Irp OPTIONAL
00215     );
00216 
00217 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00218 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00219 <a class="code" href="../../d1/d2/po_8h.html#a76">PoUnregisterSystemState</a> (
00220     IN PVOID StateHandle
00221     );
00222 
00223 <span class="comment">// end_ntddk end_wdm</span>
00224 <span class="comment">// begin_ntddk begin_wdm begin_nthal begin_ntifs</span>
00225 
00226 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00227 POWER_STATE
00228 <a class="code" href="../../d1/d2/po_8h.html#a77">PoSetPowerState</a> (
00229     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>   DeviceObject,
00230     IN POWER_STATE_TYPE Type,
00231     IN POWER_STATE      State
00232     );
00233 
00234 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00235 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00236 <a class="code" href="../../d1/d2/po_8h.html#a78">PoCallDriver</a> (
00237     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>   DeviceObject,
00238     IN OUT <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>         Irp
00239     );
00240 
00241 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00242 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
00243 <a class="code" href="../../d1/d2/po_8h.html#a79">PoStartNextPowerIrp</a>(
00244     IN <a class="code" href="../../d0/d2/struct__IRP.html">PIRP</a>    Irp
00245     );
00246 
00247 
00248 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00249 PULONG
00250 <a class="code" href="../../d1/d2/po_8h.html#a80">PoRegisterDeviceForIdleDetection</a> (
00251     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>     DeviceObject,
00252     IN ULONG              ConservationIdleTime,
00253     IN ULONG              PerformanceIdleTime,
00254     IN DEVICE_POWER_STATE State
00255     );
00256 
<a name="l00257"></a><a class="code" href="../../d1/d2/po_8h.html#a14">00257</a> <span class="preprocessor">#define PoSetDeviceBusy(IdlePointer) \</span>
00258 <span class="preprocessor">    *IdlePointer = 0</span>
00259 <span class="preprocessor"></span>
00260 <span class="comment">//</span>
00261 <span class="comment">// \Callback\PowerState values</span>
00262 <span class="comment">//</span>
00263 
<a name="l00264"></a><a class="code" href="../../d1/d2/po_8h.html#a15">00264</a> <span class="preprocessor">#define PO_CB_SYSTEM_POWER_POLICY   0</span>
<a name="l00265"></a><a class="code" href="../../d1/d2/po_8h.html#a16">00265</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_CB_AC_STATUS             1</span>
<a name="l00266"></a><a class="code" href="../../d1/d2/po_8h.html#a17">00266</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_CB_BUTTON_COLLISION      2</span>
<a name="l00267"></a><a class="code" href="../../d1/d2/po_8h.html#a18">00267</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_CB_SYSTEM_STATE_LOCK     3</span>
00268 <span class="preprocessor"></span>
00269 
00270 <span class="comment">// end_ntddk end_wdm end_nthal end_ntifs</span>
00271 
00272 <span class="comment">//</span>
00273 <span class="comment">// Broken functions we don't intend on supporting. The code backing these</span>
00274 <span class="comment">// should be ripped out in NT5.1</span>
00275 <span class="comment">//</span>
00276 <span class="keyword">typedef</span>
00277 <a class="code" href="../../d2/d7/hal_8h.html#a212">VOID</a>
<a name="l00278"></a><a class="code" href="../../d1/d2/po_8h.html#a40">00278</a> (*PPO_NOTIFY) (
00279     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>   DeviceObject,
00280     IN PVOID            Context,
00281     IN ULONG            Type,
00282     IN ULONG            Reserved
00283     );
00284 
<a name="l00285"></a><a class="code" href="../../d1/d2/po_8h.html#a19">00285</a> <span class="preprocessor">#define PO_NOTIFY_D0                        0x00000001</span>
<a name="l00286"></a><a class="code" href="../../d1/d2/po_8h.html#a20">00286</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_NOTIFY_TRANSITIONING_FROM_D0     0x00000002</span>
<a name="l00287"></a><a class="code" href="../../d1/d2/po_8h.html#a21">00287</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_NOTIFY_INVALID                   0x80000000</span>
00288 <span class="preprocessor"></span>
00289 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00290 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00291 <a class="code" href="../../d1/d2/po_8h.html#a81">PoRegisterDeviceNotify</a> (
00292     IN <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>   DeviceObject,
00293     IN <a class="code" href="../../d1/d2/po_8h.html#a40">PPO_NOTIFY</a>       NotificationFunction,
00294     IN PVOID            NotificationContext,
00295     IN ULONG            NotificationType,
00296     OUT PDEVICE_POWER_STATE  DeviceState,
00297     OUT PVOID           *NotificationHandle
00298     );
00299 
00300 <a class="code" href="../../d0/d9/ntosdef_8h.html#a29">NTKERNELAPI</a>
00301 <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
00302 <a class="code" href="../../d1/d2/po_8h.html#a82">PoCancelDeviceNotify</a> (
00303     IN PVOID            NotificationHandle
00304     );
00305 
00306 
00307 <span class="comment">//</span>
00308 <span class="comment">// Callout set state failure notification</span>
00309 <span class="comment">//</span>
00310 
<a name="l00311"></a><a class="code" href="../../d6/d5/structPO__SET__STATE__FAILURE.html">00311</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00312"></a><a class="code" href="../../d6/d5/structPO__SET__STATE__FAILURE.html#o0">00312</a>     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>            <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
<a name="l00313"></a><a class="code" href="../../d6/d5/structPO__SET__STATE__FAILURE.html#o1">00313</a>     POWER_ACTION        PowerAction;
<a name="l00314"></a><a class="code" href="../../d6/d5/structPO__SET__STATE__FAILURE.html#o2">00314</a>     SYSTEM_POWER_STATE  MinState;
<a name="l00315"></a><a class="code" href="../../d6/d5/structPO__SET__STATE__FAILURE.html#o3">00315</a>     ULONG               Flags;
00316 } <a class="code" href="../../d6/d5/structPO__SET__STATE__FAILURE.html">PO_SET_STATE_FAILURE</a>, *<a class="code" href="../../d1/d2/po_8h.html#a41">PPO_SET_STATE_FAILURE</a>;
00317 
00318 
00319 
00320 <span class="comment">//</span>
00321 <span class="comment">// Hibernation file layout:</span>
00322 <span class="comment">//      Page 0  - PO_MEMORY_IMAGE</span>
00323 <span class="comment">//      Page 1  - Free page array</span>
00324 <span class="comment">//      Page 2  - KPROCESSOR_CONTEXT</span>
00325 <span class="comment">//      Page 3  - first memory_range_array page</span>
00326 <span class="comment">//</span>
00327 <span class="comment">// PO_MEMORY_IMAGE:</span>
00328 <span class="comment">//      Header on file which contains some information to identify</span>
00329 <span class="comment">//      the hibernation, as well as a couple of checksums.</span>
00330 <span class="comment">//</span>
00331 <span class="comment">// Free page array:</span>
00332 <span class="comment">//      A page full of page numbers which identify 4MBs worth of</span>
00333 <span class="comment">//      system pages that are not in the restoration image.  These</span>
00334 <span class="comment">//      pages are used by the loader (to its self out of the way)</span>
00335 <span class="comment">//      when restoring the memory image.</span>
00336 <span class="comment">//</span>
00337 <span class="comment">// KPROCESSOR_CONTEST</span>
00338 <span class="comment">//      The context of the processor which hibernated the system.</span>
00339 <span class="comment">//      Rest of page is empty.</span>
00340 <span class="comment">//</span>
00341 <span class="comment">// memory_range_array</span>
00342 <span class="comment">//      A page which contains an array of memory_range_array elements</span>
00343 <span class="comment">//      where element 0 is a Link entry, and all other elements are</span>
00344 <span class="comment">//      Range entries.   The Link entry is used to link to the next</span>
00345 <span class="comment">//      such page, and to supply a count of the number of Range entries</span>
00346 <span class="comment">//      in the current page.   The range entries each describe one</span>
00347 <span class="comment">//      physical memory range which needs restoration and its location</span>
00348 <span class="comment">//      in the file.</span>
00349 <span class="comment">//</span>
00350 
<a name="l00351"></a><a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html">00351</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html">_PO_MEMORY_RANGE_ARRAY</a> {
00352     <span class="keyword">union </span>{
00353         <span class="keyword">struct </span>{
<a name="l00354"></a><a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o0">00354</a>             PFN_NUMBER      <a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o0">PageNo</a>;
<a name="l00355"></a><a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o1">00355</a>             PFN_NUMBER      <a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o1">StartPage</a>;
<a name="l00356"></a><a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o2">00356</a>             PFN_NUMBER      <a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o2">EndPage</a>;
00357             ULONG           <a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o3">CheckSum</a>;
00358         } Range;
00359         <span class="keyword">struct </span>{
<a name="l00360"></a><a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o5">00360</a>             <span class="keyword">struct </span><a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html">_PO_MEMORY_RANGE_ARRAY</a> *<a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o5">Next</a>;
<a name="l00361"></a><a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o6">00361</a>             PFN_NUMBER      <a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o6">NextTable</a>;
<a name="l00362"></a><a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o3">00362</a>             ULONG           <a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o3">CheckSum</a>;
<a name="l00363"></a><a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o7">00363</a>             ULONG           <a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html#o7">EntryCount</a>;
00364         } Link;
00365     };
00366 } <a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html">PO_MEMORY_RANGE_ARRAY</a>, *<a class="code" href="../../d9/d7/struct__PO__MEMORY__RANGE__ARRAY.html">PPO_MEMORY_RANGE_ARRAY</a>;
00367 
<a name="l00368"></a><a class="code" href="../../d1/d2/po_8h.html#a22">00368</a> <span class="preprocessor">#define PO_MAX_RANGE_ARRAY  (PAGE_SIZE / sizeof(PO_MEMORY_RANGE_ARRAY))</span>
<a name="l00369"></a><a class="code" href="../../d1/d2/po_8h.html#a23">00369</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_ENTRIES_PER_PAGE (PO_MAX_RANGE_ARRAY-1)</span>
00370 <span class="preprocessor"></span>
00371 
<a name="l00372"></a><a class="code" href="../../d1/d2/po_8h.html#a24">00372</a> <span class="preprocessor">#define PO_IMAGE_SIGNATURE          'rbih'</span>
<a name="l00373"></a><a class="code" href="../../d1/d2/po_8h.html#a25">00373</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_IMAGE_SIGNATURE_WAKE     'ekaw'</span>
<a name="l00374"></a><a class="code" href="../../d1/d2/po_8h.html#a26">00374</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_IMAGE_SIGNATURE_BREAK    'pkrb'</span>
<a name="l00375"></a><a class="code" href="../../d1/d2/po_8h.html#a27">00375</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_IMAGE_SIGNATURE_LINK     'knil'</span>
<a name="l00376"></a><a class="code" href="../../d1/d2/po_8h.html#a28">00376</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_IMAGE_HEADER_PAGE        0</span>
<a name="l00377"></a><a class="code" href="../../d1/d2/po_8h.html#a29">00377</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_FREE_MAP_PAGE            1</span>
<a name="l00378"></a><a class="code" href="../../d1/d2/po_8h.html#a30">00378</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_PROCESSOR_CONTEXT_PAGE   2</span>
<a name="l00379"></a><a class="code" href="../../d1/d2/po_8h.html#a31">00379</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_FIRST_RANGE_TABLE_PAGE   3</span>
00380 <span class="preprocessor"></span>
<a name="l00381"></a><a class="code" href="../../d1/d2/po_8h.html#a32">00381</a> <span class="preprocessor">#define PO_COMPRESS_CHUNK_SIZE      4096</span>
00382 <span class="preprocessor"></span>
00383 <span class="comment">//</span>
00384 <span class="comment">// Define various HiberFlags to control the behavior when restoring</span>
00385 <span class="comment">//</span>
<a name="l00386"></a><a class="code" href="../../d1/d2/po_8h.html#a33">00386</a> <span class="preprocessor">#define PO_HIBER_APM_RECONNECT      1</span>
00387 <span class="preprocessor"></span>
<a name="l00388"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html">00388</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00389"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o0">00389</a>     ULONG                   Signature;
<a name="l00390"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o1">00390</a>     ULONG                   <a class="code" href="../../d2/d5/editreg_8c.html#a50">Version</a>;
<a name="l00391"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o2">00391</a>     ULONG                   CheckSum;
<a name="l00392"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o3">00392</a>     ULONG                   LengthSelf;
<a name="l00393"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o4">00393</a>     PFN_NUMBER              PageSelf;
<a name="l00394"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o5">00394</a>     ULONG                   PageSize;
00395 
<a name="l00396"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o6">00396</a>     ULONG                   ImageType;
<a name="l00397"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o7">00397</a>     LARGE_INTEGER           SystemTime;
<a name="l00398"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o8">00398</a>     ULONGLONG               InterruptTime;
<a name="l00399"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o9">00399</a>     ULONG                   FeatureFlags;
<a name="l00400"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o10">00400</a>     UCHAR                   HiberFlags;
<a name="l00401"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o11">00401</a>     UCHAR                   spare[3];
00402 
<a name="l00403"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o12">00403</a>     ULONG                   NoHiberPtes;
<a name="l00404"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o13">00404</a>     ULONG_PTR               HiberVa;
<a name="l00405"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o14">00405</a>     PHYSICAL_ADDRESS        HiberPte;
00406 
<a name="l00407"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o15">00407</a>     ULONG                   NoFreePages;
<a name="l00408"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o16">00408</a>     ULONG                   FreeMapCheck;
<a name="l00409"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o17">00409</a>     ULONG                   WakeCheck;
00410 
<a name="l00411"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o18">00411</a>     PFN_NUMBER              <a class="code" href="../../d4/d6/regext_8c.html#a1">TotalPages</a>;
<a name="l00412"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o19">00412</a>     PFN_NUMBER              FirstTablePage;
<a name="l00413"></a><a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html#o20">00413</a>     PFN_NUMBER              LastFilePage;
00414 } <a class="code" href="../../d5/d5/structPO__MEMORY__IMAGE.html">PO_MEMORY_IMAGE</a>, *<a class="code" href="../../d1/d2/po_8h.html#a44">PPO_MEMORY_IMAGE</a>;
00415 
<a name="l00416"></a><a class="code" href="../../d4/d5/structPO__IMAGE__LINK.html">00416</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00417"></a><a class="code" href="../../d4/d5/structPO__IMAGE__LINK.html#o0">00417</a>     ULONG                   Signature;
<a name="l00418"></a><a class="code" href="../../d4/d5/structPO__IMAGE__LINK.html#o1">00418</a>     WCHAR                   <a class="code" href="../../d8/d0/geninst_8c.html#a20">Name</a>[1];
00419 } <a class="code" href="../../d4/d5/structPO__IMAGE__LINK.html">PO_IMAGE_LINK</a>, *<a class="code" href="../../d1/d2/po_8h.html#a45">PPO_IMAGE_LINK</a>;
00420 
00421 <span class="comment">//</span>
00422 <span class="comment">// Returned by Io system</span>
00423 <span class="comment">//</span>
00424 
<a name="l00425"></a><a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html">00425</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html">_PO_DEVICE_NOTIFY</a> {
<a name="l00426"></a><a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o0">00426</a>     LIST_ENTRY              <a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o0">Link</a>;
<a name="l00427"></a><a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o1">00427</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>          <a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o1">TargetDevice</a>;
00428 
<a name="l00429"></a><a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o2">00429</a>     BOOLEAN                 <a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o2">WakeNeeded</a>;
<a name="l00430"></a><a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o3">00430</a>     UCHAR                   <a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o3">OrderLevel</a>;
00431 
<a name="l00432"></a><a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o4">00432</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>          DeviceObject;
<a name="l00433"></a><a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o5">00433</a>     PVOID                   <a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o5">Node</a>;
<a name="l00434"></a><a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o6">00434</a>     PWCHAR                  <a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o6">DeviceName</a>;
<a name="l00435"></a><a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o7">00435</a>     PWCHAR                  <a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o7">DriverName</a>;
00436 
<a name="l00437"></a><a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o8">00437</a>     LONG                    <a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html#o8">NodeLevel</a>;
00438 } <a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html">PO_DEVICE_NOTIFY</a>, *<a class="code" href="../../d7/d7/struct__PO__DEVICE__NOTIFY.html">PPO_DEVICE_NOTIFY</a>;
00439 
<a name="l00440"></a><a class="code" href="../../d1/d2/po_8h.html#a34">00440</a> <span class="preprocessor">#define PO_ORDER_NOT_VIDEO          0x0001</span>
<a name="l00441"></a><a class="code" href="../../d1/d2/po_8h.html#a35">00441</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_ORDER_ROOT_ENUM          0x0002</span>
<a name="l00442"></a><a class="code" href="../../d1/d2/po_8h.html#a36">00442</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_ORDER_PAGABLE            0x0004</span>
<a name="l00443"></a><a class="code" href="../../d1/d2/po_8h.html#a37">00443</a> <span class="preprocessor"></span><span class="preprocessor">#define PO_ORDER_MAXIMUM            0x0007</span>
00444 <span class="preprocessor"></span>
00445 <span class="comment">// notify GDI before this order level</span>
<a name="l00446"></a><a class="code" href="../../d1/d2/po_8h.html#a38">00446</a> <span class="preprocessor">#define PO_ORDER_GDI_NOTIFICATION   (PO_ORDER_PAGABLE)</span>
00447 <span class="preprocessor"></span>
<a name="l00448"></a><a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html">00448</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html">_PO_DEVICE_NOTIFY_ORDER</a> {
<a name="l00449"></a><a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html#o0">00449</a>     ULONG                   <a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html#o0">DevNodeSequence</a>;
<a name="l00450"></a><a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html#o1">00450</a>     ULONG                   <a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html#o1">NoLists</a>;
<a name="l00451"></a><a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html#o2">00451</a>     LONG                    <a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html#o2">MaxLevel</a>;
<a name="l00452"></a><a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html#o3">00452</a>     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>          *<a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html#o3">WarmEjectPdoPointer</a>;
00453 
<a name="l00454"></a><a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html#o4">00454</a>     LIST_ENTRY              <a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html#o4">Partial</a>;
<a name="l00455"></a><a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html#o5">00455</a>     LIST_ENTRY              <a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html#o5">Rebase</a>;
<a name="l00456"></a><a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html#o6">00456</a>     PLIST_ENTRY             <a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html#o6">Notify</a>;
00457 } <a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html">PO_DEVICE_NOTIFY_ORDER</a>, *<a class="code" href="../../d8/d7/struct__PO__DEVICE__NOTIFY__ORDER.html">PPO_DEVICE_NOTIFY_ORDER</a>;
00458 
<a name="l00459"></a><a class="code" href="../../d1/d2/po_8h.html#a50">00459</a> <span class="keyword">extern</span> KAFFINITY        <a class="code" href="../../d1/d2/po_8h.html#a50">PoSleepingSummary</a>;
<a name="l00460"></a><a class="code" href="../../d1/d2/po_8h.html#a51">00460</a> <span class="keyword">extern</span> BOOLEAN          <a class="code" href="../../d1/d2/po_8h.html#a51">PoEnabled</a>;
<a name="l00461"></a><a class="code" href="../../d1/d2/po_8h.html#a52">00461</a> <span class="keyword">extern</span> ULONG            <a class="code" href="../../d1/d2/po_8h.html#a52">PoPowerSequence</a>;
<a name="l00462"></a><a class="code" href="../../d1/d2/po_8h.html#a53">00462</a> <span class="keyword">extern</span> BOOLEAN          <a class="code" href="../../d1/d2/po_8h.html#a53">PoPageLockData</a>;
<a name="l00463"></a><a class="code" href="../../d1/d2/po_8h.html#a54">00463</a> <span class="keyword">extern</span> <a class="code" href="../../d3/d8/struct__KTIMER.html">KTIMER</a>           <a class="code" href="../../d1/d2/po_8h.html#a54">PoSystemIdleTimer</a>;
<a name="l00464"></a><a class="code" href="../../d1/d2/po_8h.html#a55">00464</a> <span class="keyword">extern</span> BOOLEAN          <a class="code" href="../../d1/d2/po_8h.html#a55">PoHiberInProgress</a>;
00465 
00466 <span class="comment">// PopCapabilities used by some internal macros</span>
<a name="l00467"></a><a class="code" href="../../d1/d2/po_8h.html#a56">00467</a> <span class="keyword">extern</span> SYSTEM_POWER_CAPABILITIES <a class="code" href="../../d1/d2/po_8h.html#a56">PopCapabilities</a>;
00468 
00469 <span class="preprocessor">#endif</span>
00470 <span class="preprocessor"></span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:41:24 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

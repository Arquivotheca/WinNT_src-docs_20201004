<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: proc_out.c Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>proc_out.c</h1><a href="../../d1/d5/proc__out_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="preprocessor">#include &lt;windows.h&gt;</span>
00002 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00003 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00004 <span class="preprocessor">#include &lt;<a class="code" href="../../d0/d5/io_8h.html">io.h</a>&gt;</span>
00005 <span class="preprocessor">#include &lt;fcntl.h&gt;</span>
00006 
<a name="l00007"></a><a class="code" href="../../d1/d5/proc__out_8c.html#a0">00007</a> <span class="preprocessor">#define STDIN  0</span>
<a name="l00008"></a><a class="code" href="../../d1/d5/proc__out_8c.html#a1">00008</a> <span class="preprocessor"></span><span class="preprocessor">#define STDOUT 1</span>
<a name="l00009"></a><a class="code" href="../../d1/d5/proc__out_8c.html#a2">00009</a> <span class="preprocessor"></span><span class="preprocessor">#define STDERR 2</span>
00010 <span class="preprocessor"></span>
<a name="l00011"></a><a class="code" href="../../d1/d5/proc__out_8c.html#a3">00011</a> <span class="preprocessor">#define CRTTONT(fh) (HANDLE)_get_osfhandle(fh)</span>
00012 <span class="preprocessor"></span>
<a name="l00013"></a><a class="code" href="../../d1/d5/proc__out_8c.html#a4">00013</a> <a class="code" href="../../d1/d5/proc__out_8c.html#a4">PrintPair</a>(
00014     LPWSTR pwch,
00015     UCHAR *pch,
00016     DWORD cch)
00017 {
00018     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cchWritten;
00019 
00020     <a class="code" href="../../d8/d4/ntcon_2client_2getset_8c.html#a10">SetConsoleMode</a>(<a class="code" href="../../d1/d5/proc__out_8c.html#a3">CRTTONT</a>(<a class="code" href="../../d1/d5/proc__out_8c.html#a1">STDOUT</a>), ENABLE_PROCESSED_OUTPUT | ENABLE_WRAP_AT_EOL_OUTPUT);
00021 
00022     printf(<span class="stringliteral">"%04x-%04x: "</span>, pwch[0], pwch[cch-1]);
00023     <a class="code" href="../../d9/d6/client_2stream_8c.html#a9">WriteConsoleW</a>(<a class="code" href="../../d1/d5/proc__out_8c.html#a3">CRTTONT</a>(<a class="code" href="../../d1/d5/proc__out_8c.html#a1">STDOUT</a>), pwch, cch, &amp;cchWritten, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00024     printf(<span class="stringliteral">"  "</span>);
00025     printf(<span class="stringliteral">"%02x-%02x: "</span>, pch[0], pch[cch-1]);
00026     <a class="code" href="../../d9/d6/client_2stream_8c.html#a8">WriteConsoleA</a>(<a class="code" href="../../d1/d5/proc__out_8c.html#a3">CRTTONT</a>(<a class="code" href="../../d1/d5/proc__out_8c.html#a1">STDOUT</a>), pch, cch, &amp;cchWritten, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00027 
00028     printf(<span class="stringliteral">"\n"</span>);
00029     <a class="code" href="../../d8/d4/ntcon_2client_2getset_8c.html#a10">SetConsoleMode</a>(<a class="code" href="../../d1/d5/proc__out_8c.html#a3">CRTTONT</a>(<a class="code" href="../../d1/d5/proc__out_8c.html#a1">STDOUT</a>), ENABLE_WRAP_AT_EOL_OUTPUT);
00030 
00031     printf(<span class="stringliteral">"%04x-%04x: "</span>, pwch[0], pwch[cch-1]);
00032     <a class="code" href="../../d9/d6/client_2stream_8c.html#a9">WriteConsoleW</a>(<a class="code" href="../../d1/d5/proc__out_8c.html#a3">CRTTONT</a>(<a class="code" href="../../d1/d5/proc__out_8c.html#a1">STDOUT</a>), pwch, cch, &amp;cchWritten, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00033     printf(<span class="stringliteral">"  "</span>);
00034     printf(<span class="stringliteral">"%02x-%02x: "</span>, pch[0], pch[cch-1]);
00035     <a class="code" href="../../d9/d6/client_2stream_8c.html#a8">WriteConsoleA</a>(<a class="code" href="../../d1/d5/proc__out_8c.html#a3">CRTTONT</a>(<a class="code" href="../../d1/d5/proc__out_8c.html#a1">STDOUT</a>), pch, cch, &amp;cchWritten, <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00036 
00037     <a class="code" href="../../d8/d4/ntcon_2client_2getset_8c.html#a10">SetConsoleMode</a>(<a class="code" href="../../d1/d5/proc__out_8c.html#a3">CRTTONT</a>(<a class="code" href="../../d1/d5/proc__out_8c.html#a1">STDOUT</a>), ENABLE_PROCESSED_OUTPUT | ENABLE_WRAP_AT_EOL_OUTPUT);
00038     printf(<span class="stringliteral">"\n\n"</span>);
00039 }
00040 
<a name="l00041"></a><a class="code" href="../../d1/d5/proc__out_8c.html#a5">00041</a> <span class="keywordtype">int</span> _cdecl <a class="code" href="../../d2/d5/editreg_8c.html#a87">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]) {
00042     WCHAR awch[100];
00043     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>  ach[100];
00044     <a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>  ch;
00045     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> i, j;
00046 
00047     printf(<span class="stringliteral">"The first and second line of each pair should be identical:\n"</span>);
00048     printf(<span class="stringliteral">"Unicode                       ANSI\n"</span>);
00049     <span class="keywordflow">for</span> (i = 0xA0; i &lt; 0xFF; i += 0x10) {
00050         <span class="keywordflow">for</span> (j = 0; j &lt; 16; j++) {
00051             awch[j] = (WCHAR)(i + j);
00052             ach[j] = (<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>)(i+j);
00053         }
00054         <a class="code" href="../../d1/d5/proc__out_8c.html#a4">PrintPair</a>(awch, ach, 16);
00055     }
00056 
00057     printf(<span class="stringliteral">"Now test line wrapping:\n"</span>);
00058     ch = 0x80;
00059     <span class="keywordflow">for</span> (j = 0; j &lt; 100; j++) {
00060         MultiByteToWideChar(CP_ACP, 0, &amp;ch, 1, &amp;awch[j], 1);
00061         ach[j] = ch;
00062         ch++;
00063     }
00064     <a class="code" href="../../d1/d5/proc__out_8c.html#a4">PrintPair</a>(awch, ach, 100);
00065 
00066 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:41:26 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

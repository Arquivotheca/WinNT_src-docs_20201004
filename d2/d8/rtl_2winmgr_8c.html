<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: rtl/winmgr.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>winmgr.c File Reference</h1>
<p>
<a href="../../d3/d7/rtl_2winmgr_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d8/rtl_2winmgr_8c.html#a0">FindNCHit</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, LONG lPt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d8/rtl_2winmgr_8c.html#a1">_FChildVisible</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d8/rtl_2winmgr_8c.html#a2">_MapWindowPoints</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndFrom, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndTo, LPPOINT lppt, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> cpt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d8/rtl_2winmgr_8c.html#a3">GetRealClientRect</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, LPRECT prc, UINT uFlags, <a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a> pMonitor)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d8/rtl_2winmgr_8c.html#a4">_GetLastActivePopup</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d8/rtl_2winmgr_8c.html#a5">_IsDescendant</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndChild)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d8/rtl_2winmgr_8c.html#a6">IsVisible</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d8/rtl_2winmgr_8c.html#a7">GetWindowBorders</a> (LONG lStyle, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwExStyle, BOOL fWindow, BOOL fClient)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d8/rtl_2winmgr_8c.html#a8">SizeBoxHwnd</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d8/rtl_2winmgr_8c.html#a9">NeedsWindowEdge</a> (<a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwExStyle, BOOL fNewApp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d8/rtl_2winmgr_8c.html#a10">_HasCaptionIcon</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d8/rtl_2winmgr_8c.html#a11">GetTopLevelWindow</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d8/rtl_2winmgr_8c.html#a12">GetRect</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, LPRECT lprc, UINT uCoords)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a1" doxytag="rtl/winmgr.c::_FChildVisible" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _FChildVisible           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00294">294</a> of file <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html">rtl/winmgr.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02561">TestwndChild</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00052">FChildVisible()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00821">xxxCalcValidRects()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>, and <a class="el" href="../../d1/d8/showwin_8c-source.html#l00085">xxxShowWindow()</a>.
<p>
<pre class="fragment"><div>00296 {
00297     <span class="keywordflow">while</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwnd)) {
00298         pwnd = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00299         <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00300             <span class="keywordflow">break</span>;
00301         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVISIBLE))
00302             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00303     }
00304 
00305     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00306 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="rtl/winmgr.c::_GetLastActivePopup" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> _GetLastActivePopup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00490">490</a> of file <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html">rtl/winmgr.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01759">tagWND::spwndLastActive</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00196">GetLastActivePopup()</a>, and <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00193">xxxSysCommand()</a>.
<p>
<pre class="fragment"><div>00492 {
00493     <span class="keywordflow">if</span> (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o12">spwndLastActive</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00494         <span class="keywordflow">return</span> pwnd;
00495 
00496     <span class="keywordflow">return</span> <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndLastActive);
00497 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="rtl/winmgr.c::_HasCaptionIcon" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _HasCaptionIcon           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00763">763</a> of file <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html">rtl/winmgr.c</a>.
<p>
References <a class="el" href="../../d8/d7/rtl_2winprop_8c-source.html#l00106">_GetProp()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01312">tagSERVERINFO::atomIconProp</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01311">tagSERVERINFO::atomIconSmProp</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00290">DIALOGCLASS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01511">HMObjectFromHandle</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d7/d0/userrtl_8h-source.html#l00022">MAKEINTATOM</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">REBASEALWAYS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02357">WEFDLGMODALFRAME</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02364">WEFTOOLWINDOW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02411">WFBORDERMASK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02408">WFDLGFRAME</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>.
<p>
Referenced by <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00019">FindNCHit()</a>, <a class="el" href="../../d2/d4/caption_8c-source.html#l00688">xxxDrawCaptionTemp()</a>, <a class="el" href="../../d7/d6/winable2_8c-source.html#l00580">xxxGetMenuBarInfo()</a>, <a class="el" href="../../d7/d6/winable2_8c-source.html#l00170">xxxGetTitleBarInfo()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l00032">xxxInitSendValidateMinMaxInfo()</a>, and <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l03180">xxxMNFindWindowFromPoint()</a>.
<p>
<pre class="fragment"><div>00764 {
00765     HICON hIcon;
00766     <a class="code" href="../../d7/d0/structtagCLS.html">PCLS</a> pcls;
00767 
00768     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFTOOLWINDOW))
00769         <span class="comment">// it's a tool window -- it doesn't get an icon</span>
00770         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00771 
00772     <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFBORDERMASK) != (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)<a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(WFDLGFRAME)) &amp;&amp;
00773             !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFDLGMODALFRAME))
00774         <span class="comment">// they are not trying to look like a dialog, they get an icon</span>
00775         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00776 
00777     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT) &amp;&amp;
00778         (((<a class="code" href="../../d7/d0/structtagCLS.html">PCLS</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pwnd, pcls))-&gt;atomClassName == (ATOM)(ULONG_PTR)<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a40">DIALOGCLASS</a>))
00779         <span class="comment">// it's an older REAL dialog -- it doesn't get an icon</span>
00780         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00781 
00782     hIcon = (HICON) <a class="code" href="../../d7/d8/rtl_2winprop_8c.html#a2">_GetProp</a>(pwnd, <a class="code" href="../../d6/d1/userrtl_8h.html#a0">MAKEINTATOM</a>(<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o28">atomIconSmProp</a>), TRUE);
00783 
00784     <span class="keywordflow">if</span> (hIcon) {
00785         <span class="comment">// it's a 4.0 dialog with a small icon -- if that small icon is</span>
00786         <span class="comment">// something other than the generic small windows icon, it gets an icon</span>
00787         <span class="keywordflow">return</span>(hIcon != <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;hIconSmWindows);
00788     }
00789     hIcon = (HICON) <a class="code" href="../../d7/d8/rtl_2winprop_8c.html#a2">_GetProp</a>(pwnd, <a class="code" href="../../d6/d1/userrtl_8h.html#a0">MAKEINTATOM</a>(<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;<a class="code" href="../../d2/d6/structtagSERVERINFO.html#o29">atomIconProp</a>), TRUE);
00790 
00791     <span class="keywordflow">if</span> (hIcon &amp;&amp; (hIcon != <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;hIcoWindows))
00792         <span class="comment">// it's a 4.0 dialog with no small icon, but instead a large icon</span>
00793         <span class="comment">// that's not the generic windows icon -- it gets an icon</span>
00794         <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00795 
00796     pcls = <a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pwnd, pcls);
00797     <span class="keywordflow">if</span> (pcls-&gt;spicnSm) {
00798         <span class="keywordflow">if</span> (pcls-&gt;spicnSm != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a447">HMObjectFromHandle</a>(<a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;hIconSmWindows)) {
00799             <span class="comment">// it's a 4.0 dialog with a class icon that's not the generic windows</span>
00800             <span class="comment">// icon -- it gets an icon</span>
00801             <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>);
00802         }
00803     }
00804 
00805     <span class="comment">// it's a 4.0 dialog with no small or large icon -- it doesn't get an icon</span>
00806     <span class="keywordflow">return</span>(<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>);
00807 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="rtl/winmgr.c::_IsDescendant" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _IsDescendant           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndChild</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00513">513</a> of file <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html">rtl/winmgr.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00348">_GetNextDlgTabItem()</a>, <a class="el" href="../../d7/d8/dlgmgrc_8c-source.html#l00207">_NextControl()</a>, <a class="el" href="../../d4/d5/visrgn_8c-source.html#l00523">CalcVisRgn()</a>, <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00290">GetNextDlgHelpItem()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00301">PWInsertAfter()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, and <a class="el" href="../../d0/d4/scrollw_8c-source.html#l00741">xxxScrollWindowEx()</a>.
<p>
<pre class="fragment"><div>00516 {
00517     <span class="keywordflow">while</span> (1) {
00518         <span class="keywordflow">if</span> (pwndParent == pwndChild)
00519             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00520         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwndChild) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>)
00521             <span class="keywordflow">break</span>;
00522         pwndChild = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndChild, spwndParent);
00523     }
00524 
00525     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00526 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="rtl/winmgr.c::_MapWindowPoints" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int _MapWindowPoints           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndFrom</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndTo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPPOINT&nbsp;</td>
          <td class="mdname" nowrap> <em>lppt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cpt</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00316">316</a> of file <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html">rtl/winmgr.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d9/d5/sertl_8c-source.html#l00332">max</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00116">PZERO</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00155">MapWindowPoints()</a>.
<p>
<pre class="fragment"><div>00321 {
00322 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00323 <span class="preprocessor"></span>    <span class="keywordtype">int</span>     dx = 0, dy = 0;
00324     <span class="keywordtype">int</span>     SaveLeft, Sign = 1;
00325     RECT    *pR      = (RECT *)lppt;
00326     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    bMirrored = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00327 <span class="preprocessor">#else</span>
00328 <span class="preprocessor"></span>    <span class="keywordtype">int</span> dx, dy;
00329     LPPOINT pptFrom, pptTo;
00330 <span class="preprocessor">#endif</span>
00331 <span class="preprocessor"></span>
00332     <span class="comment">/*</span>
00333 <span class="comment">     * If a window is NULL, use the desktop window.</span>
00334 <span class="comment">     * If the window is the desktop, don't offset by</span>
00335 <span class="comment">     * the client rect, since it won't work if the screen</span>
00336 <span class="comment">     * origin is not (0,0) - use zero instead.</span>
00337 <span class="comment">     */</span>
00338 
00339     <span class="comment">/*</span>
00340 <span class="comment">     * Compute deltas</span>
00341 <span class="comment">     */</span>
00342 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00343 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (pwndFrom &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwndFrom) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>) {
00344         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndFrom, WEFLAYOUTRTL)) {
00345             Sign      = -Sign;
00346             dx        = -pwndFrom-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.right;
00347             bMirrored = (cpt == 2);
00348         } <span class="keywordflow">else</span> {
00349             dx   = pwndFrom-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left;
00350         }
00351         dy   = pwndFrom-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.top;
00352     }
00353 
00354     <span class="keywordflow">if</span> (pwndTo &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwndTo) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>) {
00355         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndTo, WEFLAYOUTRTL)) {
00356             Sign      = -Sign;
00357             dx        = dx + Sign * pwndTo-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.right;
00358             bMirrored = (cpt == 2);
00359         } <span class="keywordflow">else</span> {
00360             dx   = dx - Sign * pwndTo-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left;
00361         }
00362         dy   = dy - pwndTo-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.top;
00363     }
00364 
00365 <span class="preprocessor">#else</span>
00366 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (pwndFrom == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwndFrom) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>) {
00367         pptFrom = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a6">PZERO</a>(POINT);
00368     } <span class="keywordflow">else</span> {
00369         pptFrom = (LPPOINT) &amp;pwndFrom-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>;
00370     }
00371 
00372     <span class="keywordflow">if</span> (pwndTo == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwndTo) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>) {
00373         pptTo = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a6">PZERO</a>(POINT);
00374     } <span class="keywordflow">else</span> {
00375         pptTo = (LPPOINT) &amp;pwndTo-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>;
00376     }
00377     dx = pptFrom-&gt;x - pptTo-&gt;x;
00378     dy = pptFrom-&gt;y - pptTo-&gt;y;
00379 <span class="preprocessor">#endif</span>
00380 <span class="preprocessor"></span>
00381     <span class="comment">/*</span>
00382 <span class="comment">     * Map the points</span>
00383 <span class="comment">     */</span>
00384     <span class="keywordflow">while</span> (cpt--) {
00385         lppt-&gt;x += dx;
00386 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00387 <span class="preprocessor"></span>        lppt-&gt;x *= Sign;
00388 <span class="preprocessor">#endif</span>
00389 <span class="preprocessor"></span>        lppt-&gt;y += dy;
00390         ++lppt;
00391     }
00392 
00393 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00394 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (bMirrored) {     <span class="comment">//Special case for Rect</span>
00395         SaveLeft  = <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a> (pR-&gt;left, pR-&gt;right);
00396         pR-&gt;right = <a class="code" href="../../d8/d6/sertl_8c.html#a1">max</a> (pR-&gt;left, pR-&gt;right);
00397         pR-&gt;left  = SaveLeft;
00398     }
00399 <span class="preprocessor">#endif</span>
00400 <span class="preprocessor"></span>    <span class="keywordflow">return</span> MAKELONG(dx, dy);
00401 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="rtl/winmgr.c::FindNCHit" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int FindNCHit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LONG&nbsp;</td>
          <td class="mdname" nowrap> <em>lPt</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00019">19</a> of file <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html">rtl/winmgr.c</a>.
<p>
References <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00763">_HasCaptionIcon()</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00052">CopyInflateRect()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00143">GET_X_LPARAM</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00147">GET_Y_LPARAM</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00582">GetWindowBorders()</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00165">InflateRect()</a>, <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00118">PtInRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00636">SizeBoxHwnd()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00203">SYSMETRTL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02366">WEFCLIENTEDGE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02368">WEFCONTEXTHELP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02357">WEFDLGMODALFRAME</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02374">WEFLEFTSCROLL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02364">WEFTOOLWINDOW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02411">WFBORDERMASK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02412">WFCAPTION</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02408">WFDLGFRAME</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02261">WFHPRESENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02400">WFMAXBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02402">WFMINBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02420">WFMINIMIZED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02259">WFMPRESENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02404">WFSIZEBOX</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02405">WFSYSMENU</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02260">WFVPRESENT</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>.
<p>
Referenced by <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00447">WinHelpA()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00114">xxxDesktopThread()</a>, <a class="el" href="../../d2/d2/mnloop_8c-source.html#l00635">xxxMNLoop()</a>, and <a class="el" href="../../d9/d2/movesize_8c-source.html#l00873">xxxTrackInitSize()</a>.
<p>
<pre class="fragment"><div>00022 {
00023     POINT pt;
00024     RECT rcWindow;
00025     RECT rcClient;
00026     RECT rcClientAdj;
00027     <span class="keywordtype">int</span> cBorders;
00028     <span class="keywordtype">int</span> dxButton;
00029 
00030     pt.x = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a7">GET_X_LPARAM</a>(lPt);
00031     pt.y = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a8">GET_Y_LPARAM</a>(lPt);
00032 
00033     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;((<a class="code" href="../../d6/d9/structtagWND.html">WND</a> *)pwnd)-&gt;rcWindow, pt))
00034         <span class="keywordflow">return</span> HTNOWHERE;
00035 
00036     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMINIMIZED)) {
00037         <a class="code" href="../../d3/d6/rect_8c.html#a2">CopyInflateRect</a>(&amp;rcWindow, &amp;((<a class="code" href="../../d6/d9/structtagWND.html">WND</a> *)pwnd)-&gt;rcWindow,
00038             -(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXFIXEDFRAME) + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXBORDER)), -(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYFIXEDFRAME) + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYBORDER)));
00039 
00040         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;rcWindow, pt))
00041             <span class="keywordflow">return</span> HTCAPTION;
00042 
00043         <span class="keywordflow">goto</span> CaptionHit;
00044     }
00045 
00046     <span class="comment">// Get client rectangle</span>
00047     rcClient = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>;
00048     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;rcClient, pt))
00049         <span class="keywordflow">return</span> HTCLIENT;
00050 
00051     <span class="comment">// Are we in "pseudo" client, i.e. the client &amp; scrollbars &amp; border</span>
00052     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFCLIENTEDGE))
00053         <a class="code" href="../../d3/d6/rect_8c.html#a2">CopyInflateRect</a>(&amp;rcClientAdj, &amp;rcClient, <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXEDGE), <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYEDGE));
00054     <span class="keywordflow">else</span>
00055         rcClientAdj = rcClient;
00056 
00057     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVPRESENT)) {
00058 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00059 <span class="preprocessor"></span>       <span class="keywordflow">if</span> ((!!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLEFTSCROLL)) ^ (!!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLAYOUTRTL)))
00060 <span class="preprocessor">#else</span>
00061 <span class="preprocessor"></span>       <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLEFTSCROLL))
00062 <span class="preprocessor">#endif</span>
00063 <span class="preprocessor"></span>           rcClientAdj.left -= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXVSCROLL);
00064        <span class="keywordflow">else</span>
00065            rcClientAdj.right += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXVSCROLL);
00066     }
00067     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFHPRESENT))
00068         rcClientAdj.bottom += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYHSCROLL);
00069 
00070     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;rcClientAdj, pt))
00071     {
00072         <span class="comment">// Subtract out window borders</span>
00073         cBorders = <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a7">GetWindowBorders</a>(pwnd-&gt;style, pwnd-&gt;ExStyle, TRUE, FALSE);
00074         <a class="code" href="../../d3/d6/rect_8c.html#a2">CopyInflateRect</a>(&amp;rcWindow, &amp;((<a class="code" href="../../d6/d9/structtagWND.html">WND</a> *)pwnd)-&gt;rcWindow,
00075             -cBorders*<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXBORDER), -cBorders*<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYBORDER));
00076 
00077         <span class="comment">// Are we on the border?</span>
00078         <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;rcWindow, pt))
00079         {
00080             <span class="comment">// On a sizing border?</span>
00081             <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFSIZEBOX)) {
00082                 <span class="comment">//</span>
00083                 <span class="comment">// Old compatibility thing:  For 3.x windows that just had</span>
00084                 <span class="comment">// a border, we returned HTNOWHERE, believe it or not,</span>
00085                 <span class="comment">// because our hit-testing code was so brain dead.</span>
00086                 <span class="comment">//</span>
00087                 <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT) &amp;&amp;
00088                         !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFDLGFRAME)    &amp;&amp;
00089                         !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFDLGMODALFRAME)) {
00090                     <span class="keywordflow">return</span>(HTNOWHERE);
00091 
00092                 } <span class="keywordflow">else</span> {
00093                     <span class="keywordflow">return</span>(HTBORDER);  <span class="comment">// We are on a dlg frame.</span>
00094                 }
00095             } <span class="keywordflow">else</span> {
00096 
00097                 <span class="keywordtype">int</span> ht;
00098 
00099                 <span class="comment">//</span>
00100                 <span class="comment">// Note this improvement.  The HT codes are numbered so that</span>
00101                 <span class="comment">// if you subtract HTSIZEFIRST-1 from them all, they sum up.  I.E.,</span>
00102                 <span class="comment">// (HTLEFT - HTSIZEFIRST + 1) + (HTTOP - HTSIZEFIRST + 1) ==</span>
00103                 <span class="comment">// (HTTOPLEFT - HTSIZEFIRST + 1).</span>
00104                 <span class="comment">//</span>
00105 
00106                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFTOOLWINDOW))
00107                     <a class="code" href="../../d3/d6/rect_8c.html#a7">InflateRect</a>(&amp;rcWindow, -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXSMSIZE), -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYSMSIZE));
00108                 <span class="keywordflow">else</span>
00109                     <a class="code" href="../../d3/d6/rect_8c.html#a7">InflateRect</a>(&amp;rcWindow, -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXSIZE), -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYSIZE));
00110 
00111                 <span class="keywordflow">if</span> (pt.y &lt; rcWindow.top)
00112                     ht = (HTTOP - HTSIZEFIRST + 1);
00113                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pt.y &gt;= rcWindow.bottom)
00114                     ht = (HTBOTTOM - HTSIZEFIRST + 1);
00115                 <span class="keywordflow">else</span>
00116                     ht = 0;
00117 
00118                 <span class="keywordflow">if</span> (pt.x &lt; rcWindow.left)
00119                     ht += (HTLEFT - HTSIZEFIRST + 1);
00120                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pt.x &gt;= rcWindow.right)
00121                     ht += (HTRIGHT - HTSIZEFIRST + 1);
00122 
00123                 <span class="keywordflow">return</span> (ht + HTSIZEFIRST - 1);
00124             }
00125         }
00126 
00127         <span class="comment">// Are we above the client area?</span>
00128         <span class="keywordflow">if</span> (pt.y &lt; rcClientAdj.top)
00129         {
00130             <span class="comment">// Are we in the caption?</span>
00131             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFBORDERMASK) == <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(WFCAPTION))
00132             {
00133 CaptionHit:
00134 
00135 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00136 <span class="preprocessor"></span>                <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLAYOUTRTL)) {
00137                     pt.x = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.right - (pt.x - pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left);
00138                 }
00139 <span class="preprocessor">#endif</span>
00140 <span class="preprocessor"></span>
00141                 <span class="keywordflow">if</span> (pt.y &gt;= rcWindow.top)
00142                 {
00143                     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFTOOLWINDOW))
00144                     {
00145                         rcWindow.top += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYSMCAPTION);
00146                         dxButton = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXSMSIZE);
00147                     }
00148                     <span class="keywordflow">else</span>
00149                     {
00150                         rcWindow.top += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYCAPTION);
00151                         dxButton = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXSIZE);
00152                     }
00153 
00154                     <span class="keywordflow">if</span> ((pt.y &gt;= rcWindow.top) &amp;&amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMPRESENT))
00155                         <span class="keywordflow">return</span>(HTMENU);
00156 
00157                     <span class="keywordflow">if</span> ((pt.x &gt;= rcWindow.left)  &amp;&amp;
00158                         (pt.x &lt;  rcWindow.right) &amp;&amp;
00159                         (pt.y &lt;  rcWindow.top))
00160                     {
00161                         <span class="comment">// Are we in the window menu?</span>
00162                         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFSYSMENU))
00163                         {
00164                             rcWindow.left += dxButton;
00165                             <span class="keywordflow">if</span> (pt.x &lt; rcWindow.left)
00166                             {
00167                                 <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a10">_HasCaptionIcon</a>(pwnd))
00168                                 <span class="comment">// iconless windows have no sysmenu hit rect</span>
00169                                     <span class="keywordflow">return</span>(HTCAPTION);
00170 
00171                                 <span class="keywordflow">return</span>(HTSYSMENU);
00172                             }
00173                         }
00174                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT))
00175                             <span class="keywordflow">return</span>(HTCAPTION);
00176 
00177                         <span class="comment">// only a close button if window has a system menu</span>
00178 
00179                         <span class="comment">// Are we in the close button?</span>
00180                         rcWindow.right -= dxButton;
00181                         <span class="keywordflow">if</span> (pt.x &gt;= rcWindow.right)
00182                             <span class="keywordflow">return</span> HTCLOSE;
00183 
00184                         <span class="keywordflow">if</span> ((pt.x &lt; rcWindow.right) &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFTOOLWINDOW))
00185                         {
00186                             <span class="comment">// Are we in the maximize/restore button?</span>
00187                             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, (WFMAXBOX | WFMINBOX)))
00188                             {
00189                                 <span class="comment">// Note that sizing buttons are same width for both</span>
00190                                 <span class="comment">// big captions and small captions.</span>
00191                                 rcWindow.right -= dxButton;
00192                                 <span class="keywordflow">if</span> (pt.x &gt;= rcWindow.right)
00193                                     <span class="keywordflow">return</span> HTZOOM;
00194 
00195                                 <span class="comment">// Are we in the minimize button?</span>
00196                                 rcWindow.right -= dxButton;
00197                                 <span class="keywordflow">if</span> (pt.x &gt;= rcWindow.right)
00198                                     <span class="keywordflow">return</span> HTREDUCE;
00199                             }
00200                             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFCONTEXTHELP))
00201                             {
00202                                 rcWindow.right -= dxButton;
00203                                 <span class="keywordflow">if</span> (pt.x &gt;= rcWindow.right)
00204                                     <span class="keywordflow">return</span> HTHELP;
00205                             }
00206                         }
00207                     }
00208                 }
00209 
00210                 <span class="comment">// We're in the caption proper</span>
00211                 <span class="keywordflow">return</span> HTCAPTION;
00212             }
00213 
00214             <span class="comment">//</span>
00215             <span class="comment">// Are we in the menu?</span>
00216             <span class="comment">//</span>
00217             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMPRESENT))
00218                 <span class="keywordflow">return</span> HTMENU;
00219         }
00220     }
00221     <span class="keywordflow">else</span>
00222     {
00223         <span class="comment">//</span>
00224         <span class="comment">// NOTE:</span>
00225         <span class="comment">// We can only be here if we are on the client edge, horz scroll,</span>
00226         <span class="comment">// sizebox, or vert scroll.  Hence, if we are not on the first 3,</span>
00227         <span class="comment">// we must be on the last one.</span>
00228         <span class="comment">//</span>
00229 
00230         <span class="comment">//</span>
00231         <span class="comment">// Are we on the client edge?</span>
00232         <span class="comment">//</span>
00233         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFCLIENTEDGE))
00234         {
00235             <a class="code" href="../../d3/d6/rect_8c.html#a7">InflateRect</a>(&amp;rcClientAdj, -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXEDGE), -<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYEDGE));
00236             <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/rect_8c.html#a5">PtInRect</a>(&amp;rcClientAdj, pt))
00237                 <span class="keywordflow">return</span>(HTBORDER);
00238         }
00239 
00240         <span class="comment">//</span>
00241         <span class="comment">// Are we on the scrollbars?</span>
00242         <span class="comment">//</span>
00243         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFHPRESENT) &amp;&amp; (pt.y &gt;= rcClient.bottom))
00244         {
00245             <span class="keywordtype">int</span> iHitTest=HTHSCROLL;
00246             UserAssert(pt.y &lt; rcClientAdj.bottom);
00247 
00248             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVPRESENT)) {
00249                 <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndSizeBox = <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a8">SizeBoxHwnd</a>(pwnd);
00250 
00251                 <span class="keywordflow">if</span>(pt.x &gt;= rcClient.right)
00252                     <span class="keywordflow">return</span>(pwndSizeBox ? HTBOTTOMRIGHT : HTGROWBOX);
00253 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00254 <span class="preprocessor"></span>                <span class="comment">//</span>
00255                 <span class="comment">// Mirror the grip box location so that it becomes</span>
00256                 <span class="comment">// on the bottom-left side if this is a RTL mirrrored</span>
00257                 <span class="comment">// windows.</span>
00258                 <span class="comment">//</span>
00259                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLAYOUTRTL) &amp;&amp; (pt.x &lt; rcClient.left))
00260                     <span class="keywordflow">return</span>(pwndSizeBox ? HTBOTTOMLEFT : HTGROWBOX);
00261 <span class="preprocessor">#endif</span>
00262 <span class="preprocessor"></span>            }
00263 
00264             <span class="keywordflow">return</span>(iHitTest);
00265         }
00266         <span class="keywordflow">else</span>
00267         {
00268             UserAssert(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVPRESENT));
00269 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00270 <span class="preprocessor"></span>            <span class="keywordflow">if</span> ((!!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLEFTSCROLL)) ^ (!!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLAYOUTRTL))) {
00271 <span class="preprocessor">#else</span>
00272 <span class="preprocessor"></span>            <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLEFTSCROLL)) {
00273 <span class="preprocessor">#endif</span>
00274 <span class="preprocessor"></span>                UserAssert(pt.x &lt; rcClient.left);
00275                 UserAssert(pt.x &gt;= rcClientAdj.left);
00276             } <span class="keywordflow">else</span> {
00277                 UserAssert(pt.x &gt;= rcClient.right);
00278                 UserAssert(pt.x &lt; rcClientAdj.right);
00279             }
00280             <span class="keywordflow">return</span>(HTVSCROLL);
00281         }
00282     }
00283 
00284     <span class="comment">//</span>
00285     <span class="comment">// We give up.</span>
00286     <span class="comment">//</span>
00287     <span class="comment">// Win31 returned HTNOWHERE in this case; For compatibility, we will</span>
00288     <span class="comment">// keep it that way.</span>
00289     <span class="comment">//</span>
00290     <span class="keywordflow">return</span>(HTNOWHERE);
00291 
00292 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="rtl/winmgr.c::GetRealClientRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void GetRealClientRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>prc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d2/structtagMONITOR.html">PMONITOR</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pMonitor</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00417">417</a> of file <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html">rtl/winmgr.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l02604">GetPrimaryMonitor()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00856">GetRect()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03045">GRC_FULLSCREEN</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03044">GRC_MINWNDS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03043">GRC_SCROLLS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03420">GRECT_CLIENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03424">GRECT_CLIENTCOORDS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02157">tagMONITOR::rcMonitor</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02158">tagMONITOR::rcWork</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00203">SYSMETRTL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02261">WFHPRESENT</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02260">WFVPRESENT</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00833">GetParentArrangeRect()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l00324">ParkIcon()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l01333">SetTiledRect()</a>, and <a class="el" href="../../d8/d8/icons_8c-source.html#l00031">xxxArrangeIconicWindows()</a>.
<p>
<pre class="fragment"><div>00423 {
00424     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>) {
00425         <span class="keywordflow">if</span> (!pMonitor) {
00426             pMonitor = <a class="code" href="../../d6/d0/usercli_8h.html#a793">GetPrimaryMonitor</a>();
00427         }
00428         *prc = (uFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a875">GRC_FULLSCREEN</a>) ? pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o3">rcMonitor</a> : pMonitor-&gt;<a class="code" href="../../d0/d2/structtagMONITOR.html#o4">rcWork</a>;
00429     } <span class="keywordflow">else</span> {
00430         <a class="code" href="../../d2/d8/rtl_2winmgr_8c.html#a12">GetRect</a>(pwnd, prc, GRECT_CLIENT | GRECT_CLIENTCOORDS);
00431         <span class="keywordflow">if</span> (uFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a873">GRC_SCROLLS</a>) {
00432             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFHPRESENT)){
00433                 prc-&gt;bottom += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYHSCROLL);
00434             }
00435 
00436             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVPRESENT)) {
00437                 prc-&gt;right += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXVSCROLL);
00438             }
00439         }
00440     }
00441 
00442     <span class="keywordflow">if</span> (uFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a874">GRC_MINWNDS</a>) {
00443         <span class="keywordflow">switch</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(ARRANGE) &amp; ~ARW_HIDE) {
00444             <span class="keywordflow">case</span> ARW_TOPLEFT | ARW_RIGHT:
00445             <span class="keywordflow">case</span> ARW_TOPRIGHT | ARW_LEFT:
00446                 <span class="comment">//</span>
00447                 <span class="comment">// Leave space on top for one row of min windows</span>
00448                 <span class="comment">//</span>
00449                 prc-&gt;top += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYMINSPACING);
00450                 <span class="keywordflow">break</span>;
00451 
00452             <span class="keywordflow">case</span> ARW_TOPLEFT | ARW_DOWN:
00453             <span class="keywordflow">case</span> ARW_BOTTOMLEFT | ARW_UP:
00454                 <span class="comment">//</span>
00455                 <span class="comment">// Leave space on left for one column of min windows</span>
00456                 <span class="comment">//</span>
00457                 prc-&gt;left += <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXMINSPACING);
00458                 <span class="keywordflow">break</span>;
00459 
00460             <span class="keywordflow">case</span> ARW_TOPRIGHT | ARW_DOWN:
00461             <span class="keywordflow">case</span> ARW_BOTTOMRIGHT | ARW_UP:
00462                 <span class="comment">//</span>
00463                 <span class="comment">// Leave space on right for one column of min windows</span>
00464                 <span class="comment">//</span>
00465                 prc-&gt;right -= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXMINSPACING);
00466                 <span class="keywordflow">break</span>;
00467 
00468             <span class="keywordflow">case</span> ARW_BOTTOMLEFT | ARW_RIGHT:
00469             <span class="keywordflow">case</span> ARW_BOTTOMRIGHT | ARW_LEFT:
00470                 <span class="comment">//</span>
00471                 <span class="comment">// Leave space on bottom for one row of min windows</span>
00472                 <span class="comment">//</span>
00473                 prc-&gt;bottom -= <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYMINSPACING);
00474                 <span class="keywordflow">break</span>;
00475         }
00476     }
00477 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="rtl/winmgr.c::GetRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void GetRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lprc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uCoords</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00856">856</a> of file <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html">rtl/winmgr.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03424">GRECT_CLIENTCOORDS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03427">GRECT_COORDMASK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03426">GRECT_PARENTCOORDS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03422">GRECT_RECTMASK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03421">GRECT_WINDOW</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l03425">GRECT_WINDOWCOORDS</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00139">OffsetRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02421">WFCHILD</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/winable2_8c-source.html#l00309">_GetScrollBarInfo()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01191">CalcSBStuff()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00417">GetRealClientRect()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l00557">MDICheckCascadeRect()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l00324">ParkIcon()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01012">SBCtlSetup()</a>, <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00663">UpdateCheckpoint()</a>, <a class="el" href="../../d0/d2/paint_8c-source.html#l01293">UT_GetParentDCClipBox()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00821">xxxCalcValidRects()</a>, <a class="el" href="../../d2/d4/caption_8c-source.html#l00986">xxxDrawCaptionBar()</a>, <a class="el" href="../../d2/d1/drawfrm_8c-source.html#l00076">xxxDrawWindowFrame()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l01329">xxxMinMaximize()</a>, <a class="el" href="../../d0/d4/scrollw_8c-source.html#l00741">xxxScrollWindowEx()</a>, and <a class="el" href="../../d6/d4/statctl_8c-source.html#l00094">xxxSetStaticImage()</a>.
<p>
<pre class="fragment"><div>00857 {
00858     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a>    pwndParent;
00859     LPRECT  lprcOffset;
00860 
00861     UserAssert(lprc);
00862     UserAssert((uCoords &amp; ~(GRECT_COORDMASK | GRECT_RECTMASK)) == 0);
00863     UserAssert(uCoords &amp; GRECT_COORDMASK);
00864     UserAssert(uCoords &amp; GRECT_RECTMASK);
00865 
00866     *lprc = (uCoords &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a903">GRECT_WINDOW</a>) ? pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a> : pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>;
00867 
00868     <span class="comment">/*</span>
00869 <span class="comment">     * If this is the desktop window, we have what we want, whether we</span>
00870 <span class="comment">     * are asking for GRECT_PARENTCOORDS, WINDOWCOORD or CLIENTCOORDS</span>
00871 <span class="comment">     */</span>
00872     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>)
00873         <span class="keywordflow">return</span>;
00874 
00875     <span class="keywordflow">switch</span> (uCoords &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a908">GRECT_COORDMASK</a>) {
00876     <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a907">GRECT_PARENTCOORDS</a>:
00877         pwndParent = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00878         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwndParent) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>)
00879             <span class="keywordflow">return</span>;
00880 
00881         lprcOffset = &amp;pwndParent-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>;
00882 
00883 <span class="preprocessor">#if defined(USE_MIRRORING)</span>
00884 <span class="preprocessor"></span>        <span class="comment">//</span>
00885         <span class="comment">// Let's mirror the edges of the child's window since the parent</span>
00886         <span class="comment">// is mirrored, so should the child window be. [samera]</span>
00887         <span class="comment">//</span>
00888         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndParent,WEFLAYOUTRTL) &amp;&amp;
00889                 (uCoords &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a903">GRECT_WINDOW</a>) &amp;&amp;
00890                 (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd,WFCHILD))) {
00891             <span class="keywordtype">int</span> iLeft;
00892 
00893             <span class="comment">//</span>
00894             <span class="comment">// I am using OffsetRect instead of implementing a new</span>
00895             <span class="comment">// OffsetMirrorRect API since this is the only place I am</span>
00896             <span class="comment">// doing it in.</span>
00897             <span class="comment">//</span>
00898             <span class="comment">// Since screen coordinates are not mirrored, the rect offsetting</span>
00899             <span class="comment">// should be done relative to prcOffset-&gt;right since it is the</span>
00900             <span class="comment">// leading edge for mirrored windows. [samera]</span>
00901             <span class="comment">//</span>
00902 
00903             UserVerify(<a class="code" href="../../d3/d6/rect_8c.html#a6">OffsetRect</a>(lprc, -lprcOffset-&gt;right, -lprcOffset-&gt;top));
00904 
00905             iLeft = lprc-&gt;left;
00906             lprc-&gt;left  = (lprc-&gt;right * -1);
00907             lprc-&gt;right = (iLeft * -1);
00908 
00909             <span class="keywordflow">return</span>;
00910         }
00911 <span class="preprocessor">#endif</span>
00912 <span class="preprocessor"></span>
00913         <span class="keywordflow">break</span>;
00914 
00915     <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a906">GRECT_WINDOWCOORDS</a>:
00916         lprcOffset = &amp;pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>;
00917         <span class="keywordflow">break</span>;
00918 
00919     <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a905">GRECT_CLIENTCOORDS</a>:
00920         lprcOffset = &amp;pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>;
00921         <span class="keywordflow">break</span>;
00922 
00923     <span class="keywordflow">default</span>:
00924         UserAssert(0 &amp;&amp; <span class="stringliteral">"Logic error in _GetRect - invalid uCoords"</span>);
00925     }
00926 
00927     UserVerify(<a class="code" href="../../d3/d6/rect_8c.html#a6">OffsetRect</a>(lprc, -lprcOffset-&gt;left, -lprcOffset-&gt;top));
00928 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="rtl/winmgr.c::GetTopLevelWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> GetTopLevelWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00817">817</a> of file <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html">rtl/winmgr.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02561">TestwndChild</a>.
<p>
Referenced by <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00099">_GetNextQueueWindow()</a>, <a class="el" href="../../d1/d2/palette_8c-source.html#l00051">_SelectPalette()</a>, <a class="el" href="../../d9/d3/sprite_8c-source.html#l00104">ConvertRedirectionDCs()</a>, <a class="el" href="../../d9/d3/sprite_8c-source.html#l01166">GetLayeredWindow()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l00798">ImeSetContextHandler()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l01246">InternalDialogBox()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l12956">NtUserSetImeOwnerWindow()</a>, <a class="el" href="../../d9/d3/sprite_8c-source.html#l00337">RecreateRedirectionBitmap()</a>, <a class="el" href="../../d2/d9/client_2help_8c-source.html#l00447">WinHelpA()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00472">xxxActivateThisWindow()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l00472">xxxButtonEvent()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l00033">xxxCreateWindowEx()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01264">xxxDefWindowProc()</a>, <a class="el" href="../../d0/d6/desktop_8c-source.html#l00883">xxxDesktopWndProc()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l02082">xxxDrawMenuBarUnderlines()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00228">xxxDWP_ProcessVirtKey()</a>, <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00023">xxxHandleNCMouseGuys()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01675">xxxNextWindow()</a>, and <a class="el" href="../../d4/d5/focusact_8c-source.html#l01235">xxxSetForegroundWindow()</a>.
<p>
<pre class="fragment"><div>00819 {
00820     <span class="keywordflow">if</span> (pwnd != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00821         <span class="keywordflow">while</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwnd))
00822             pwnd = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00823     }
00824 
00825     <span class="keywordflow">return</span> pwnd;
00826 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="rtl/winmgr.c::GetWindowBorders" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int GetWindowBorders           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LONG&nbsp;</td>
          <td class="mdname" nowrap> <em>lStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwExStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fWindow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fClient</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00582">582</a> of file <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html">rtl/winmgr.c</a>.
<p>
References <a class="el" href="../../d2/d7/clglobal_8c-source.html#l00051">gpsi</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00604">_AdjustWindowRectEx()</a>, <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02101">DefFrameProcWorker()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00019">FindNCHit()</a>, <a class="el" href="../../d5/d6/client_2winable_8c-source.html#l00024">GetWindowInfo()</a>, <a class="el" href="../../d5/d2/mnstate_8c-source.html#l00025">MNPositionSysMenu()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l00558">xxxAnimateCaption()</a>, <a class="el" href="../../d2/d4/caption_8c-source.html#l00030">xxxCalcCaptionButton()</a>, <a class="el" href="../../d0/d2/calcclrc_8c-source.html#l00021">xxxCalcClientRect()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l05305">xxxCheckFullScreen()</a>, <a class="el" href="../../d2/d4/caption_8c-source.html#l00986">xxxDrawCaptionBar()</a>, <a class="el" href="../../d2/d1/drawfrm_8c-source.html#l00076">xxxDrawWindowFrame()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00696">xxxDWP_DoNCActivate()</a>, <a class="el" href="../../d7/d6/winable2_8c-source.html#l00580">xxxGetMenuBarInfo()</a>, <a class="el" href="../../d7/d6/winable2_8c-source.html#l00170">xxxGetTitleBarInfo()</a>, <a class="el" href="../../d3/d9/kernel_2help_8c-source.html#l00073">xxxHelpLoop()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l00032">xxxInitSendValidateMinMaxInfo()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l03180">xxxMNFindWindowFromPoint()</a>, and <a class="el" href="../../d5/d1/mncomput_8c-source.html#l00758">xxxMNRecomputeBarIfNeeded()</a>.
<p>
<pre class="fragment"><div>00583 {
00584     <span class="keywordtype">int</span> cBorders = 0;
00585 
00586     <span class="keywordflow">if</span> (fWindow) {
00587         <span class="comment">//</span>
00588         <span class="comment">// Is there a 3D border around the window?</span>
00589         <span class="comment">//</span>
00590         <span class="keywordflow">if</span> (dwExStyle &amp; WS_EX_WINDOWEDGE)
00591             cBorders += 2;
00592         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwExStyle &amp; WS_EX_STATICEDGE)
00593             ++cBorders;
00594 
00595         <span class="comment">//</span>
00596         <span class="comment">// Is there a single flat border around the window?  This is true for</span>
00597         <span class="comment">// WS_BORDER, WS_DLGFRAME, and WS_EX_DLGMODALFRAME windows.</span>
00598         <span class="comment">//</span>
00599         <span class="keywordflow">if</span> ( (lStyle &amp; WS_CAPTION) || (dwExStyle &amp; WS_EX_DLGMODALFRAME) )
00600                 ++cBorders;
00601 
00602         <span class="comment">//</span>
00603         <span class="comment">// Is there a sizing flat border around the window?</span>
00604         <span class="comment">//</span>
00605         <span class="keywordflow">if</span> (lStyle &amp; WS_SIZEBOX)
00606                 cBorders += <a class="code" href="../../d1/d8/clglobal_8c.html#a4">gpsi</a>-&gt;gclBorder;
00607     }
00608 
00609     <span class="keywordflow">if</span> (fClient) {
00610             <span class="comment">//</span>
00611             <span class="comment">// Is there a 3D border around the client?</span>
00612             <span class="comment">//</span>
00613             <span class="keywordflow">if</span> (dwExStyle &amp; WS_EX_CLIENTEDGE)
00614             cBorders += 2;
00615     }
00616 
00617     <span class="keywordflow">return</span>(cBorders);
00618 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="rtl/winmgr.c::IsVisible" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL IsVisible           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00537">537</a> of file <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html">rtl/winmgr.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02420">WFMINIMIZED</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/dc_8c-source.html#l00608">_GetDCEx()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00171">BNSetFont()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d4/d5/visrgn_8c-source.html#l00523">CalcVisRgn()</a>, <a class="el" href="../../d5/d9/rtl_2help_8c-source.html#l00054">EnumPwndDlgChildProc()</a>, <a class="el" href="../../d2/d3/spb_8c-source.html#l00034">FBitsTouch()</a>, <a class="el" href="../../d2/d3/spb_8c-source.html#l00651">RestoreSpb()</a>, <a class="el" href="../../d2/d3/spb_8c-source.html#l01081">SpbCheckRect()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00784">StaticRepaint()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, <a class="el" href="../../d5/d4/caret_8c-source.html#l00094">UT_InvertCaret()</a>, <a class="el" href="../../d4/d5/focusact_8c-source.html#l00472">xxxActivateThisWindow()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00258">xxxBNGetDC()</a>, <a class="el" href="../../d2/d4/caption_8c-source.html#l00986">xxxDrawCaptionBar()</a>, <a class="el" href="../../d2/d1/drawfrm_8c-source.html#l00076">xxxDrawWindowFrame()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00211">xxxEnableSBCtlArrows()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00271">xxxEnableWndSBArrows()</a>, <a class="el" href="../../d9/d0/lboxctl1_8c-source.html#l00797">xxxLBResetContent()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l01329">xxxMinMaximize()</a>, <a class="el" href="../../d9/d8/update_8c-source.html#l00299">xxxRedrawWindow()</a>, <a class="el" href="../../d0/d4/scrollw_8c-source.html#l00741">xxxScrollWindowEx()</a>, and <a class="el" href="../../d9/d3/sbctl_8c-source.html#l01316">xxxSetScrollBar()</a>.
<p>
<pre class="fragment"><div>00539 {
00540     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
00541 
00542     <span class="keywordflow">for</span> (pwndT = pwnd; pwndT; pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndT, spwndParent)) {
00543 
00544         <span class="comment">/*</span>
00545 <span class="comment">         * Invisible windows are always invisible</span>
00546 <span class="comment">         */</span>
00547         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFVISIBLE))
00548             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00549 
00550         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WFMINIMIZED)) {
00551 
00552             <span class="comment">/*</span>
00553 <span class="comment">             * Children of minimized windows are always invisible.</span>
00554 <span class="comment">             */</span>
00555             <span class="keywordflow">if</span> (pwndT != pwnd)
00556                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00557         }
00558 
00559         <span class="comment">/*</span>
00560 <span class="comment">         * If we're at the desktop, then we don't want to go any further.</span>
00561 <span class="comment">         */</span>
00562         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwndT) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>)
00563             <span class="keywordflow">break</span>;
00564     }
00565 
00566     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00567 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="rtl/winmgr.c::NeedsWindowEdge" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL NeedsWindowEdge           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwExStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fNewApp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00727">727</a> of file <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html">rtl/winmgr.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00604">_AdjustWindowRectEx()</a>, <a class="el" href="../../d5/d7/createw_8c-source.html#l00033">xxxCreateWindowEx()</a>, and <a class="el" href="../../d7/d6/classchg_8c-source.html#l00203">xxxSetWindowStyle()</a>.
<p>
<pre class="fragment"><div>00728 {
00729     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fGetsWindowEdge;
00730 
00731     fGetsWindowEdge = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00732 
00733     <span class="keywordflow">if</span> (dwExStyle &amp; WS_EX_DLGMODALFRAME)
00734         fGetsWindowEdge = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00735     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwExStyle &amp; WS_EX_STATICEDGE)
00736         fGetsWindowEdge = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00737     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dwStyle &amp; WS_THICKFRAME)
00738         fGetsWindowEdge = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00739     <span class="keywordflow">else</span> <span class="keywordflow">switch</span> (dwStyle &amp; WS_CAPTION)
00740     {
00741         <span class="keywordflow">case</span> WS_DLGFRAME:
00742             fGetsWindowEdge = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00743             <span class="keywordflow">break</span>;
00744 
00745         <span class="keywordflow">case</span> WS_CAPTION:
00746             fGetsWindowEdge = fNewApp;
00747             <span class="keywordflow">break</span>;
00748     }
00749 
00750     <span class="keywordflow">return</span>(fGetsWindowEdge);
00751 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="rtl/winmgr.c::SizeBoxHwnd" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> SizeBoxHwnd           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00636">636</a> of file <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html">rtl/winmgr.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00203">SYSMETRTL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02421">WFCHILD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02262">WFCPRESENT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02415">WFMAXIMIZED</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02404">WFSIZEBOX</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/sbctl_8c-source.html#l00481">DrawSize()</a>, <a class="el" href="../../d3/d7/rtl_2winmgr_8c-source.html#l00019">FindNCHit()</a>, and <a class="el" href="../../d0/d8/winwhere_8c-source.html#l00315">xxxWindowHitTest2()</a>.
<p>
<pre class="fragment"><div>00638 {
00639 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00640 <span class="preprocessor"></span>    <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> bMirroredSizeBox = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>) <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLAYOUTRTL);
00641 <span class="preprocessor">#endif</span>
00642 <span class="preprocessor"></span>
00643     <span class="keywordtype">int</span> xbrChild;
00644     <span class="keywordtype">int</span> ybrChild = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.bottom;
00645 
00646 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00647 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (bMirroredSizeBox) {
00648         xbrChild = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.left;
00649     } <span class="keywordflow">else</span> 
00650 <span class="preprocessor">#endif</span>
00651 <span class="preprocessor"></span>    {
00652         xbrChild = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>.right;
00653     }
00654 
00655     <span class="keywordflow">while</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>) {
00656         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFSIZEBOX)) {
00657             <span class="comment">// First sizeable parent found</span>
00658             <span class="keywordtype">int</span> xbrParent;
00659             <span class="keywordtype">int</span> ybrParent;
00660 
00661             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMAXIMIZED))
00662                 <span class="keywordflow">return</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00663 
00664 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00665 <span class="preprocessor"></span>            <span class="keywordflow">if</span> (bMirroredSizeBox) {
00666                 xbrParent = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left;
00667             } <span class="keywordflow">else</span> 
00668 <span class="preprocessor">#endif</span>
00669 <span class="preprocessor"></span>            {
00670                 xbrParent = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.right;
00671             }
00672             ybrParent = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.bottom;
00673 
00674             <span class="comment">/*  If the sizebox dude is within an EDGE of the client's bottom</span>
00675 <span class="comment">             *  right corner (left corner for mirrored windows), let this succeed.  </span>
00676 <span class="comment">             *  That way people who draw their own sunken clients will be happy.</span>
00677 <span class="comment">             */</span>
00678 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00679 <span class="preprocessor"></span>            <span class="keywordflow">if</span> (bMirroredSizeBox) {
00680                 <span class="keywordflow">if</span> ((xbrChild - <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXEDGE) &gt; xbrParent) || (ybrChild + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYEDGE) &lt; ybrParent)) {
00681                     <span class="comment">//</span>
00682                     <span class="comment">// Child's bottom, left corner of SIZEBOX isn't close enough</span>
00683                     <span class="comment">// to bottom left of parent's client.</span>
00684                     <span class="comment">//</span>
00685                     <span class="keywordflow">return</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00686                 }
00687             } <span class="keywordflow">else</span> 
00688 <span class="preprocessor">#endif</span>
00689 <span class="preprocessor"></span>            {
00690                 <span class="keywordflow">if</span> ((xbrChild + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXEDGE) &lt; xbrParent) || (ybrChild + <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYEDGE) &lt; ybrParent)) {
00691                     <span class="comment">//</span>
00692                     <span class="comment">// Child's bottom, right corner of SIZEBOX isn't close enough</span>
00693                     <span class="comment">// to bottom right of parent's client.</span>
00694                     <span class="comment">//</span>
00695                     <span class="keywordflow">return</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00696                 }
00697             }
00698 
00699             <span class="keywordflow">return</span>(pwnd);
00700         }
00701 
00702         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFCHILD) || <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFCPRESENT))
00703             <span class="keywordflow">break</span>;
00704 
00705         pwnd = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00706     }
00707     <span class="keywordflow">return</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00708 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:46:09 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

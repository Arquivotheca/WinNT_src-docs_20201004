<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: condll.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>condll.h File Reference</h1><code>#include &lt;nt.h&gt;</code><br>
<code>#include &lt;ntrtl.h&gt;</code><br>
<code>#include &lt;nturtl.h&gt;</code><br>
<code>#include &lt;windows.h&gt;</code><br>
<code>#include &lt;winuserk.h&gt;</code><br>
<code>#include &lt;conroute.h&gt;</code><br>
<code>#include "conapi.h"</code><br>
<code>#include "ntcsrdll.h"</code><br>
<code>#include "<a class="el" href="../../d6/d4/conmsg_8h-source.html">conmsg.h</a>"</code><br>
<code>#include &lt;string.h&gt;</code><br>

<p>
<a href="../../d7/d3/condll_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a0">SET_CONSOLE_HANDLE</a>(HANDLE)&nbsp;&nbsp;&nbsp;((NtCurrentPeb())-&gt;ProcessParameters-&gt;ConsoleHandle = HANDLE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>&nbsp;&nbsp;&nbsp;((NtCurrentPeb())-&gt;ProcessParameters-&gt;ConsoleHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR)&nbsp;&nbsp;&nbsp;(SetLastError( ERROR ) )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(ERROR)&nbsp;&nbsp;&nbsp;(SetLastError( RtlNtStatusToDosError( ERROR ) ) )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a4">VALID_ACCESSES</a>&nbsp;&nbsp;&nbsp;(GENERIC_READ | GENERIC_WRITE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a5">VALID_SHARE_ACCESSES</a>&nbsp;&nbsp;&nbsp;(FILE_SHARE_READ | FILE_SHARE_WRITE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a6">VALID_DUP_OPTIONS</a>&nbsp;&nbsp;&nbsp;(DUPLICATE_CLOSE_SOURCE | DUPLICATE_SAME_ACCESS)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a7">CONSOLE_RECT_SIZE_X</a>(RECT)&nbsp;&nbsp;&nbsp;((RECT)-&gt;Right - (RECT)-&gt;Left + 1)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a8">CONSOLE_RECT_SIZE_Y</a>(RECT)&nbsp;&nbsp;&nbsp;((RECT)-&gt;Bottom - (RECT)-&gt;Top + 1)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a9">LockDll</a>()&nbsp;&nbsp;&nbsp;RtlEnterCriticalSection(&amp;<a class="el" href="../../d6/d4/condll_8h.html#a11">DllLock</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a10">UnlockDll</a>()&nbsp;&nbsp;&nbsp;RtlLeaveCriticalSection(&amp;<a class="el" href="../../d6/d4/condll_8h.html#a11">DllLock</a>)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a12">InitializeCtrlHandling</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a13">GetCurrentExeName</a> (LPWSTR <a class="el" href="../../d8/d6/ttri_8c.html#a3">Buffer</a>, ULONG BufferLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>HANDLE APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a14">OpenConsoleWInternal</a> (IN ULONG HandleType, IN ULONG DesiredAccess, IN BOOL InheritHandle, IN ULONG ShareMode)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a14"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a15">ReadConsoleInternal</a> (IN HANDLE hConsoleInput, OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> lpBuffer, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nNumberOfCharsToRead, OUT LPDWORD lpNumberOfCharsRead, IN OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> lpReserved, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>, IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> <a class="el" href="../../d8/d9/dllinit_8c.html#a5">ExeNameLength</a>, IN LPWSTR ExeName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a16">WriteConsoleInternal</a> (IN HANDLE hConsoleOutput, IN CONST VOID *lpBuffer, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nNumberOfCharsToWrite, OUT LPDWORD lpNumberOfCharsWritten, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a16"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a17">RegisterConsoleIMEInternal</a> (IN HWND hWndConsoleIME, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwConsoleIMEThreadId, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> DesktopLength, IN LPWSTR Desktop, OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *<a class="el" href="../../d0/d5/ntcon_2conime_2conime_8c.html#a9">dwConsoleThreadId</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a18">UnregisterConsoleIMEInternal</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwConsoleIMEThtreadId)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a19">GetConsoleInput</a> (IN HANDLE hConsoleInput, OUT PINPUT_RECORD lpBuffer, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, OUT LPDWORD lpNumberOfEventsRead, IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> wFlags, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a20">WriteConsoleInputInternal</a> (IN HANDLE hConsoleInput, IN CONST INPUT_RECORD *lpBuffer, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, OUT LPDWORD lpNumberOfEventsWritten, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>, IN BOOLEAN Append)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a20"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a21">ReadConsoleOutputInternal</a> (IN HANDLE hConsoleOutput, OUT PCHAR_INFO lpBuffer, IN COORD dwBufferSize, IN COORD dwBufferCoord, IN OUT PSMALL_RECT lpReadRegion, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a22">WriteConsoleOutputInternal</a> (IN HANDLE hConsoleOutput, IN CONST CHAR_INFO *lpBuffer, IN COORD dwBufferSize, IN COORD dwBufferCoord, IN PSMALL_RECT lpWriteRegion, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a22"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a23">ReadConsoleOutputString</a> (IN HANDLE hConsoleOutput, OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> lpString, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nSize, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fFlags, IN COORD dwReadCoord, OUT LPDWORD lpNumberOfElementsRead)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a24">WriteConsoleOutputString</a> (IN HANDLE hConsoleOutput, IN CONST VOID *lpString, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nSize, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fFlags, IN COORD dwWriteCoord, OUT LPDWORD lpNumberOfElementsWritten)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a24"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a25">FillConsoleOutput</a> (IN HANDLE hConsoleOutput, IN WORD Element, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nLength, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fFlags, IN COORD dwWriteCoord, OUT LPDWORD lpNumberOfElementsWritten)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a25"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a26">GetConsoleKeyboardLayoutNameWorker</a> (OUT LPSTR pszLayout, IN BOOL bAnsi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a26"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a27">SetConsolePaletteInternal</a> (IN HANDLE hConsoleOutput, IN HPALETTE hPalette, IN UINT dwUsage)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a28">ScrollConsoleScreenBufferInternal</a> (IN HANDLE hConsoleOutput, IN CONST SMALL_RECT *lpScrollRectangle, IN CONST SMALL_RECT *lpClipRectangle, IN COORD dwDestinationOrigin, IN CONST CHAR_INFO *lpFill, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a29">SetConsoleOutputCPInternal</a> (IN UINT wCodePageID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a30">SetLastConsoleEventActiveInternal</a> (VOID)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a30"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a31">ConnectConsoleInternal</a> (IN PWSTR pObjectDirectory, IN OUT <a class="el" href="../../d4/d9/struct__CONSOLE__API__CONNECTINFO.html">PCONSOLE_API_CONNECTINFO</a> pConnectInfo, OUT PBOOLEAN pServerProcess)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a31"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a32">AllocConsoleInternal</a> (IN LPWSTR lpTitle, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwTitleLength, IN LPWSTR lpDesktop, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwDesktopLength, IN LPWSTR lpCurDir, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwCurDirLength, IN LPWSTR AppName, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwAppNameLength, IN LPTHREAD_START_ROUTINE CtrlRoutine, IN LPTHREAD_START_ROUTINE PropRoutine, IN OUT <a class="el" href="../../d0/d3/struct__CONSOLE__INFO.html">PCONSOLE_INFO</a> pConsoleInfo)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a32"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a33">FreeConsoleInternal</a> (VOID)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a33"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a34">GetConsoleLangId</a> (OUT LANGID *lpLangId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a34"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a35">AddConsoleAliasInternal</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> Source, IN UINT SourceLength, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> Target, IN UINT TargetLength, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> ExeName, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a36">GetConsoleAliasInternal</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> Source, IN UINT SourceLength, OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> TargetBuffer, IN UINT TargetBufferLength, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> ExeName, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a36"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a37">GetConsoleAliasesLengthInternal</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> ExeName, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a37"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a38">GetConsoleAliasExesLengthInternal</a> (IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a38"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a39">GetConsoleAliasesInternal</a> (OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> AliasBuffer, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> AliasBufferLength, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> ExeName, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a39"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a40">GetConsoleAliasExesInternal</a> (OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> <a class="el" href="../../d8/d9/dllinit_8c.html#a4">ExeNameBuffer</a>, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> ExeNameBufferLength, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a40"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>VOID APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a41">ExpungeConsoleCommandHistoryInternal</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> ExeName, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a41"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a42">SetConsoleNumberOfCommandsInternal</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> Number, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> ExeName, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a42"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a43">GetConsoleCommandHistoryLengthInternal</a> (IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> ExeName, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a43"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a44">GetConsoleCommandHistoryInternal</a> (OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> <a class="el" href="../../d2/d5/editreg_8c.html#a43">Commands</a>, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> CommandBufferLength, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> ExeName, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a44"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a45">GetConsoleTitleInternal</a> (OUT PVOID lpConsoleTitle, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> nSize, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL APIENTRY&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a46">SetConsoleTitleInternal</a> (IN CONST VOID *lpConsoleTitle, IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> TitleLength, IN BOOLEAN <a class="el" href="../../d3/d0/user32_8def.html#a97">Unicode</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW64)  <a href="#a46"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a47">SetTEBLangID</a> (VOID)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">defined(BUILD_WOW6432)  <a href="#a47"></a><br><br></td></tr>
<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>CRITICAL_SECTION&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d4/condll_8h.html#a11">DllLock</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a7" doxytag="condll.h::CONSOLE_RECT_SIZE_X" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CONSOLE_RECT_SIZE_X          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">RECT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((RECT)-&gt;Right - (RECT)-&gt;Left + 1)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/condll_8h-source.html#l00058">58</a> of file <a class="el" href="../../d7/d3/condll_8h-source.html">condll.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00472">CopyRectangle()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00585">ReadConsoleOutputInternal()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00771">WriteConsoleOutputInternal()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="condll.h::CONSOLE_RECT_SIZE_Y" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CONSOLE_RECT_SIZE_Y          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">RECT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((RECT)-&gt;Bottom - (RECT)-&gt;Top + 1)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/condll_8h-source.html#l00059">59</a> of file <a class="el" href="../../d7/d3/condll_8h-source.html">condll.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00472">CopyRectangle()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00585">ReadConsoleOutputInternal()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00771">WriteConsoleOutputInternal()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="condll.h::GET_CONSOLE_HANDLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GET_CONSOLE_HANDLE&nbsp;&nbsp;&nbsp;((NtCurrentPeb())-&gt;ProcessParameters-&gt;ConsoleHandle)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">47</a> of file <a class="el" href="../../d7/d3/condll_8h-source.html">condll.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00126">AddConsoleAliasInternal()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00803">AllocConsole()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00553">CloseConsoleHandle()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00470">ConDllInitialize()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00138">ConsoleMenuControl()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01666">CreateConsoleScreenBuffer()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00597">DuplicateConsoleHandle()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00733">ExpungeConsoleCommandHistoryInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01448">FillConsoleOutput()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00782">FlushConsoleInputBuffer()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00979">FreeConsole()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00922">FreeConsoleInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00674">GenerateConsoleCtrlEvent()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00550">GetConsoleAliasesInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00425">GetConsoleAliasesLengthInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00647">GetConsoleAliasExesInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00500">GetConsoleAliasExesLengthInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00280">GetConsoleAliasInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00945">GetConsoleCommandHistoryInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00877">GetConsoleCommandHistoryLengthInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01316">GetConsoleCP()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00308">GetConsoleCursorInfo()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00548">GetConsoleDisplayMode()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00414">GetConsoleFontInfo()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00495">GetConsoleFontSize()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00680">GetConsoleHandleInformation()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00425">GetConsoleHardwareState()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">GetConsoleInput()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01543">GetConsoleKeyboardLayoutNameWorker()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00296">GetConsoleLangId()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00029">GetConsoleMode()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01429">GetConsoleOutputCP()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00247">GetConsoleScreenBufferInfo()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01070">GetConsoleTitleInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01617">GetConsoleWindow()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00546">GetCurrentConsoleFont()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00198">GetLargestConsoleWindowSize()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00100">GetNumberOfConsoleFonts()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00144">GetNumberOfConsoleInputEvents()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00363">GetNumberOfConsoleMouseButtons()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01752">InvalidateConsoleDIBits()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00044">OpenConsoleWInternal()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00191">ReadConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00585">ReadConsoleOutputInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00974">ReadConsoleOutputString()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00322">RegisterConsoleVDM()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01036">ScrollConsoleScreenBufferInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00736">SetConsoleActiveScreenBuffer()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01043">SetConsoleCommandHistoryMode()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01356">SetConsoleCP()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00038">SetConsoleCursor()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00925">SetConsoleCursorInfo()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00876">SetConsoleCursorPosition()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00225">SetConsoleDisplayMode()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01203">SetConsoleFont()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00734">SetConsoleHandleInformation()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00489">SetConsoleHardwareState()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01251">SetConsoleIcon()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00602">SetConsoleKeyShortcuts()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00685">SetConsoleMenuClose()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00608">SetConsoleMode()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00798">SetConsoleNumberOfCommandsInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01469">SetConsoleOutputCPInternal()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00191">SetConsolePaletteInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00827">SetConsoleScreenBufferSize()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01155">SetConsoleTextAttribute()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01170">SetConsoleTitleInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00980">SetConsoleWindowInfo()</a>, <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00250">SetLastConsoleEventActiveInternal()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00092">ShowConsoleCursor()</a>, <a class="el" href="../../d5/d6/convdm_8c-source.html#l00026">VDMConsoleOperation()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00787">VerifyConsoleIoHandle()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00335">WriteConsoleInputInternal()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00408">WriteConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00771">WriteConsoleOutputInternal()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01212">WriteConsoleOutputString()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="condll.h::LockDll" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LockDll          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;RtlEnterCriticalSection(&amp;<a class="el" href="../../d6/d4/condll_8h.html#a11">DllLock</a>)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/condll_8h-source.html#l00068">68</a> of file <a class="el" href="../../d7/d3/condll_8h-source.html">condll.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00803">AllocConsole()</a>, <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00093">CtrlRoutine()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00979">FreeConsole()</a>, and <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00417">SetConsoleCtrlHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="condll.h::SET_CONSOLE_HANDLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SET_CONSOLE_HANDLE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((NtCurrentPeb())-&gt;ProcessParameters-&gt;ConsoleHandle = HANDLE)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/condll_8h-source.html#l00046">46</a> of file <a class="el" href="../../d7/d3/condll_8h-source.html">condll.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00656">AllocConsoleInternal()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00470">ConDllInitialize()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00373">ConnectConsoleInternal()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00922">FreeConsoleInternal()</a>, and <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00263">SetUpHandles()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="condll.h::SET_LAST_ERROR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SET_LAST_ERROR          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ERROR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(SetLastError( ERROR ) )</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">48</a> of file <a class="el" href="../../d7/d3/condll_8h-source.html">condll.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00126">AddConsoleAliasInternal()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00656">AllocConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01666">CreateConsoleScreenBuffer()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00597">DuplicateConsoleHandle()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00733">ExpungeConsoleCommandHistoryInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01448">FillConsoleOutput()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00979">FreeConsole()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00674">GenerateConsoleCtrlEvent()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00550">GetConsoleAliasesInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00425">GetConsoleAliasesLengthInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00647">GetConsoleAliasExesInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00280">GetConsoleAliasInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00945">GetConsoleCommandHistoryInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00877">GetConsoleCommandHistoryLengthInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00308">GetConsoleCursorInfo()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00548">GetConsoleDisplayMode()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00414">GetConsoleFontInfo()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00680">GetConsoleHandleInformation()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00425">GetConsoleHardwareState()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">GetConsoleInput()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01256">GetConsoleInputExeNameA()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01288">GetConsoleInputExeNameW()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00029">GetConsoleMode()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00247">GetConsoleScreenBufferInfo()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01070">GetConsoleTitleInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00546">GetCurrentConsoleFont()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00144">GetNumberOfConsoleInputEvents()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00363">GetNumberOfConsoleMouseButtons()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01752">InvalidateConsoleDIBits()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00098">OpenConsoleW()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00191">ReadConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00585">ReadConsoleOutputInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00974">ReadConsoleOutputString()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00322">RegisterConsoleVDM()</a>, <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00368">RemoveCtrlHandler()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01036">ScrollConsoleScreenBufferInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00925">SetConsoleCursorInfo()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00225">SetConsoleDisplayMode()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01313">SetConsoleInputExeNameA()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01337">SetConsoleInputExeNameW()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00602">SetConsoleKeyShortcuts()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00798">SetConsoleNumberOfCommandsInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01220">SetConsoleTitleA()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01238">SetConsoleTitleW()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00980">SetConsoleWindowInfo()</a>, <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00297">SetCtrlHandler()</a>, <a class="el" href="../../d5/d6/convdm_8c-source.html#l00026">VDMConsoleOperation()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00335">WriteConsoleInputInternal()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00408">WriteConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00771">WriteConsoleOutputInternal()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01212">WriteConsoleOutputString()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="condll.h::SET_LAST_NT_ERROR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SET_LAST_NT_ERROR          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ERROR&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(SetLastError( RtlNtStatusToDosError( ERROR ) ) )</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">49</a> of file <a class="el" href="../../d7/d3/condll_8h-source.html">condll.h</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00126">AddConsoleAliasInternal()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00656">AllocConsoleInternal()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00553">CloseConsoleHandle()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00373">ConnectConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01666">CreateConsoleScreenBuffer()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00597">DuplicateConsoleHandle()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01448">FillConsoleOutput()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00782">FlushConsoleInputBuffer()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00922">FreeConsoleInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00674">GenerateConsoleCtrlEvent()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00550">GetConsoleAliasesInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00425">GetConsoleAliasesLengthInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00647">GetConsoleAliasExesInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00500">GetConsoleAliasExesLengthInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00280">GetConsoleAliasInternal()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00945">GetConsoleCommandHistoryInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01316">GetConsoleCP()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00308">GetConsoleCursorInfo()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00548">GetConsoleDisplayMode()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00414">GetConsoleFontInfo()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00495">GetConsoleFontSize()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00680">GetConsoleHandleInformation()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00425">GetConsoleHardwareState()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">GetConsoleInput()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01543">GetConsoleKeyboardLayoutNameWorker()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00029">GetConsoleMode()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01429">GetConsoleOutputCP()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00247">GetConsoleScreenBufferInfo()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01070">GetConsoleTitleInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01617">GetConsoleWindow()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00546">GetCurrentConsoleFont()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00198">GetLargestConsoleWindowSize()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00100">GetNumberOfConsoleFonts()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00144">GetNumberOfConsoleInputEvents()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00363">GetNumberOfConsoleMouseButtons()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01752">InvalidateConsoleDIBits()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00044">OpenConsoleWInternal()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00191">ReadConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00585">ReadConsoleOutputInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00974">ReadConsoleOutputString()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00322">RegisterConsoleVDM()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01036">ScrollConsoleScreenBufferInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00736">SetConsoleActiveScreenBuffer()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01043">SetConsoleCommandHistoryMode()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01356">SetConsoleCP()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00038">SetConsoleCursor()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00925">SetConsoleCursorInfo()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00876">SetConsoleCursorPosition()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00225">SetConsoleDisplayMode()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01203">SetConsoleFont()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00734">SetConsoleHandleInformation()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00489">SetConsoleHardwareState()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01251">SetConsoleIcon()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00602">SetConsoleKeyShortcuts()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00685">SetConsoleMenuClose()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00608">SetConsoleMode()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00798">SetConsoleNumberOfCommandsInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01501">SetConsoleOutputCP()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00737">SetConsolePalette()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00191">SetConsolePaletteInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00827">SetConsoleScreenBufferSize()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01155">SetConsoleTextAttribute()</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01170">SetConsoleTitleInternal()</a>, <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l00980">SetConsoleWindowInfo()</a>, <a class="el" href="../../d5/d6/convdm_8c-source.html#l00026">VDMConsoleOperation()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00787">VerifyConsoleIoHandle()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00335">WriteConsoleInputInternal()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00408">WriteConsoleInternal()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00771">WriteConsoleOutputInternal()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01212">WriteConsoleOutputString()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="condll.h::UnlockDll" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define UnlockDll          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;RtlLeaveCriticalSection(&amp;<a class="el" href="../../d6/d4/condll_8h.html#a11">DllLock</a>)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/condll_8h-source.html#l00069">69</a> of file <a class="el" href="../../d7/d3/condll_8h-source.html">condll.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00803">AllocConsole()</a>, <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00093">CtrlRoutine()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00979">FreeConsole()</a>, and <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00417">SetConsoleCtrlHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="condll.h::VALID_ACCESSES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define VALID_ACCESSES&nbsp;&nbsp;&nbsp;(GENERIC_READ | GENERIC_WRITE)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/condll_8h-source.html#l00053">53</a> of file <a class="el" href="../../d7/d3/condll_8h-source.html">condll.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01666">CreateConsoleScreenBuffer()</a>, <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00597">DuplicateConsoleHandle()</a>, and <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00098">OpenConsoleW()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="condll.h::VALID_DUP_OPTIONS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define VALID_DUP_OPTIONS&nbsp;&nbsp;&nbsp;(DUPLICATE_CLOSE_SOURCE | DUPLICATE_SAME_ACCESS)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/condll_8h-source.html#l00056">56</a> of file <a class="el" href="../../d7/d3/condll_8h-source.html">condll.h</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00597">DuplicateConsoleHandle()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="condll.h::VALID_SHARE_ACCESSES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define VALID_SHARE_ACCESSES&nbsp;&nbsp;&nbsp;(FILE_SHARE_READ | FILE_SHARE_WRITE)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/condll_8h-source.html#l00054">54</a> of file <a class="el" href="../../d7/d3/condll_8h-source.html">condll.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01666">CreateConsoleScreenBuffer()</a>, and <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00098">OpenConsoleW()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a35" doxytag="condll.h::AddConsoleAliasInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY AddConsoleAliasInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Source</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>SourceLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Target</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>TargetLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExeName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00126">126</a> of file <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html">client/cmdline.c</a>.
<p>
References <a class="el" href="../../d5/d5/conmsg_8h.html#a161">CONSOLE_API_MSG</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00491">_CONSOLE_ADDALIAS_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a215">ConsolepAddAlias</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00497">_CONSOLE_ADDALIAS_MSG::Exe</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00494">_CONSOLE_ADDALIAS_MSG::ExeLength</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00094">GetExeName()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a90">PCONSOLE_ADDALIAS_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00495">_CONSOLE_ADDALIAS_MSG::Source</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00492">_CONSOLE_ADDALIAS_MSG::SourceLength</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00496">_CONSOLE_ADDALIAS_MSG::Target</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00493">_CONSOLE_ADDALIAS_MSG::TargetLength</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00498">_CONSOLE_ADDALIAS_MSG::Unicode</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00499">_CONSOLE_ADDALIAS_MSG::UnicodeExe</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00252">AddConsoleAliasA()</a>, and <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00228">AddConsoleAliasW()</a>.
<p>
<pre class="fragment"><div>00137           :
00138 
00139     Source - <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> to substitute alias string <span class="keywordflow">for</span>, in input stream.
00140 
00141     Target - <a class="code" href="../../d4/d9/talloc_8c.html#a0">String</a> to substitute <span class="keywordflow">for</span> source.  <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> to <span class="keyword">delete</span> an existing
00142         alias.
00143 
00144     ExeName - Exe to set alias in.
00145 
00146 Return Value:
00147 
00148     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - The operation was successful.
00149 
00150     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>/<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - The operation failed. Extended error status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available
00151         <span class="keyword">using</span> GetLastError.
00152 
00153 --*/
00154 
00155 {
00156     PCSR_CAPTURE_HEADER CaptureBuffer;
00157     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00158     ULONG CapturedMsgPointers;
00159     <a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html">PCONSOLE_ADDALIAS_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.AddConsoleAliasW;
00160 
00161     a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00162     a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o1">SourceLength</a> = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)SourceLength;
00163     a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o7">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00164     CapturedMsgPointers = 2;
00165 
00166     a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o3">ExeLength</a> = <a class="code" href="../../d2/d1/client_2cmdline_8c.html#a11">GetExeName</a>(&amp;ExeName,Unicode,&amp;a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o8">UnicodeExe</a>);
00167 
00168     <span class="keywordflow">if</span> (Target != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00169         a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o2">TargetLength</a> = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)TargetLength;
00170         CapturedMsgPointers += 1;
00171     }
00172     <span class="keywordflow">else</span> {
00173         a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o5">Target</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00174         a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o2">TargetLength</a> = 0;
00175     }
00176 
00177     CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( CapturedMsgPointers,
00178                                               a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o1">SourceLength</a> + a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o2">TargetLength</a> + a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o3">ExeLength</a>
00179                                             );
00180     <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00181         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00182         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00183     }
00184     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00185                              (PCHAR) Source,
00186                              a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o1">SourceLength</a>,
00187                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o4">Source</a>
00188                            );
00189 
00190     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00191                              (PCHAR) ExeName,
00192                              a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o3">ExeLength</a>,
00193                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o6">Exe</a>
00194                            );
00195 
00196     <span class="keywordflow">if</span> (Target != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00197         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00198                                  (PCHAR) Target,
00199                                  a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o2">TargetLength</a>,
00200                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d2/d9/struct__CONSOLE__ADDALIAS__MSG.html#o5">Target</a>
00201                                );
00202     }
00203 
00204     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00205                          CaptureBuffer,
00206                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00207                                               ConsolepAddAlias
00208                                             ),
00209                          <span class="keyword">sizeof</span>( *a )
00210                        );
00211 
00212     <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00213 
00214     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00215         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00216         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00217     }
00218     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00219 
00220 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="condll.h::AllocConsoleInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY AllocConsoleInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpTitle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwTitleLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpDesktop</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwDesktopLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpCurDir</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwCurDirLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>AppName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwAppNameLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPTHREAD_START_ROUTINE&nbsp;</td>
          <td class="mdname" nowrap> <em>CtrlRoutine</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPTHREAD_START_ROUTINE&nbsp;</td>
          <td class="mdname" nowrap> <em>PropRoutine</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT <a class="el" href="../../d0/d3/struct__CONSOLE__INFO.html">PCONSOLE_INFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pConsoleInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00656">656</a> of file <a class="el" href="../../d9/d8/dllinit_8c-source.html">dllinit.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00600">_CONSOLE_ALLOC_MSG::AppName</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00599">_CONSOLE_ALLOC_MSG::AppNameLength</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a13">CONSOLE_INFO</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00594">_CONSOLE_ALLOC_MSG::ConsoleInfo</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a199">ConsolepAlloc</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00603">_CONSOLE_ALLOC_MSG::CtrlRoutine</a>, <a class="el" href="../../d7/d5/ntcon_2server_2globals_8h-source.html#l00033">CtrlRoutine</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00602">_CONSOLE_ALLOC_MSG::CurDir</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00601">_CONSOLE_ALLOC_MSG::CurDirLength</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00598">_CONSOLE_ALLOC_MSG::Desktop</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00597">_CONSOLE_ALLOC_MSG::DesktopLength</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00034">INITIALIZATION_FAILED</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00033">INITIALIZATION_SUCCEEDED</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d2/d1/obwait_8c-source.html#l00406">NtWaitForMultipleObjects()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00035">NUMBER_OF_INITIALIZATION_EVENTS</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00604">_CONSOLE_ALLOC_MSG::PropRoutine</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l01019">PropRoutine()</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00046">SET_CONSOLE_HANDLE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00596">_CONSOLE_ALLOC_MSG::Title</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00595">_CONSOLE_ALLOC_MSG::TitleLength</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00803">AllocConsole()</a>.
<p>
<pre class="fragment"><div>00670                    :
00671 
00672    Marshels <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> parameters <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d5/d5/conmsg_8h.html#a236a199">ConsolepAlloc</a> command.
00673 
00674 Arguments:
00675 
00676    See <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html">CONSOLE_ALLOC_MSG</a> structure and <a class="code" href="../../d8/d9/dllinit_8c.html#a21">AllocConsole</a>.
00677 
00678 Return Value:
00679 
00680     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - Success
00681 
00682     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> - An error occured.
00683 
00684 --*/
00685 {
00686    <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00687    <a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html">PCONSOLE_ALLOC_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.AllocConsole;
00688    PCSR_CAPTURE_HEADER CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00689    <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00690    <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> St;
00691 
00692    <span class="keywordflow">try</span> {
00693 
00694         a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o9">CtrlRoutine</a> = <a class="code" href="../../d6/d6/ntcon_2server_2globals_8h.html#a10">CtrlRoutine</a>;
00695         a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o10">PropRoutine</a> = <a class="code" href="../../d8/d9/dllinit_8c.html#a9">PropRoutine</a>;
00696 
00697         <span class="comment">// Allocate 4 extra pointer sizes to compensate for any alignment done</span>
00698         <span class="comment">// by CsrCaptureMessageBuffer.</span>
00699 
00700         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 5,
00701                                                   dwTitleLength + dwDesktopLength + dwCurDirLength +
00702                                                   dwAppNameLength + <span class="keyword">sizeof</span>( <a class="code" href="../../d0/d3/struct__CONSOLE__INFO.html">CONSOLE_INFO</a> ) + (4 * <span class="keyword">sizeof</span>(PVOID))
00703                                                  );
00704         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00705             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00706             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00707             leave;
00708         }
00709 
00710         <span class="comment">// Allocate the CONSOLE_INFO first so that it is aligned on a pointer</span>
00711         <span class="comment">// boundry.  This is necessary since NtWaitForMultipleObject expects</span>
00712         <span class="comment">// its arguments aligned on a handle boundry.</span>
00713 
00714         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00715                                  pConsoleInfo,
00716                                  <span class="keyword">sizeof</span>( CONSOLE_INFO ),
00717                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o0">ConsoleInfo</a>
00718                                );
00719 
00720         a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o1">TitleLength</a> = dwTitleLength;
00721         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00722                                  lpTitle,
00723                                  dwTitleLength,
00724                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o2">Title</a>
00725                                );
00726 
00727         a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o3">DesktopLength</a> = dwDesktopLength;
00728         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00729                                  lpDesktop,
00730                                  dwDesktopLength,
00731                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o4">Desktop</a>
00732                                );
00733 
00734         a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o7">CurDirLength</a> = dwCurDirLength;
00735         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00736                                  lpCurDir,
00737                                  dwCurDirLength,
00738                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o8">CurDir</a>
00739                                );
00740 
00741         a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o5">AppNameLength</a> = dwAppNameLength;
00742         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00743                                  lpAppName,
00744                                  dwAppNameLength,
00745                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o6">AppName</a>
00746                                );
00747 
00748         <span class="comment">//</span>
00749         <span class="comment">// Connect to the server process</span>
00750         <span class="comment">//</span>
00751 
00752         <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00753                              CaptureBuffer,
00754                              CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00755                                                   ConsolepAlloc
00756                                                 ),
00757                              <span class="keyword">sizeof</span>( *a )
00758                            );
00759         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00760             <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a> (m.ReturnValue);
00761             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00762             leave;
00763         }
00764 
00765         St = <a class="code" href="../../d1/d2/obwait_8c.html#a5">NtWaitForMultipleObjects</a>(NUMBER_OF_INITIALIZATION_EVENTS,
00766                                       a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o0">ConsoleInfo</a>-&gt;<a class="code" href="../../d0/d3/struct__CONSOLE__INFO.html#o5">InitEvents</a>,
00767                                       WaitAny,
00768                                       FALSE,
00769                                       NULL
00770                                       );
00771         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(St)) {
00772            <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(St);
00773            <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00774            leave;
00775         }
00776 
00777         <span class="comment">//The handles to be closed are events, so NtClose works fine.</span>
00778         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o0">ConsoleInfo</a>-&gt;<a class="code" href="../../d0/d3/struct__CONSOLE__INFO.html#o5">InitEvents</a>[INITIALIZATION_SUCCEEDED]);
00779         <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o0">ConsoleInfo</a>-&gt;<a class="code" href="../../d0/d3/struct__CONSOLE__INFO.html#o5">InitEvents</a>[INITIALIZATION_FAILED]);
00780         <span class="keywordflow">if</span> (St != <a class="code" href="../../d5/d5/conmsg_8h.html#a4">INITIALIZATION_SUCCEEDED</a>) {
00781             <a class="code" href="../../d6/d4/condll_8h.html#a0">SET_CONSOLE_HANDLE</a>(NULL);
00782             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00783             leave;
00784         }
00785         RtlCopyMemory(pConsoleInfo, a-&gt;<a class="code" href="../../d3/d9/struct__CONSOLE__ALLOC__MSG.html#o0">ConsoleInfo</a>, <span class="keyword">sizeof</span>(CONSOLE_INFO));
00786         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00787    }
00788    finally {
00789       <span class="keywordflow">if</span> (CaptureBuffer) {
00790          <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00791       }
00792    }
00793 
00794    <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00795 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="condll.h::ConnectConsoleInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ConnectConsoleInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pObjectDirectory</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT <a class="el" href="../../d4/d9/struct__CONSOLE__API__CONNECTINFO.html">PCONSOLE_API_CONNECTINFO</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pConnectInfo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>pServerProcess</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00373">373</a> of file <a class="el" href="../../d9/d8/dllinit_8c-source.html">dllinit.c</a>.
<p>
References <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00031">CsrClientConnectToServer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00034">INITIALIZATION_FAILED</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00033">INITIALIZATION_SUCCEEDED</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d6/d9/obclose_8c-source.html#l00037">NtClose()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d2/d1/obwait_8c-source.html#l00406">NtWaitForMultipleObjects()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00035">NUMBER_OF_INITIALIZATION_EVENTS</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00046">SET_CONSOLE_HANDLE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00470">ConDllInitialize()</a>.
<p>
<pre class="fragment"><div>00379                    :
00380 
00381     Helper function <span class="keywordflow">for</span> establishing a connection with <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> console server.
00382     Waits <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> server to signal completion.
00383 
00384 Arguments:
00385 
00386     pObjectDirectory -  Supplies a null terminated string that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> same
00387         as <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> value of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ObjectDirectory= argument passed to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> CSRSS
00388         program.
00389 
00390     pConnectInfo - Supplies and recieves <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> connection information.
00391 
00392     pServerProcess - Recieves <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> <span class="keyword">this</span> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a server process.
00393 
00394 Return Value:
00395 
00396     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - Success
00397 
00398     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> - An error occured.
00399 
00400 --*/
00401 {
00402 
00403    <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00404    ULONG ConnectionInformationLength;
00405 
00406    ConnectionInformationLength = <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d9/struct__CONSOLE__API__CONNECTINFO.html">CONSOLE_API_CONNECTINFO</a>);
00407 
00408    <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d8/d9/wow64csr_8c.html#a0">CsrClientConnectToServer</a>( pObjectDirectory,
00409                                       CONSRV_SERVERDLL_INDEX,
00410                                       NULL,
00411                                       pConnectInfo,
00412                                       &amp;ConnectionInformationLength,
00413                                       pServerProcess
00414                                     );
00415 
00416    <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( Status )) {
00417        <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00418    }
00419 
00420    <span class="comment">//</span>
00421    <span class="comment">// we return success although no console api can be called because</span>
00422    <span class="comment">// loading shouldn't fail.  we'll fail the api calls later.</span>
00423    <span class="comment">//</span>
00424 
00425    <span class="keywordflow">if</span> (*pServerProcess) {
00426        <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00427    }
00428 
00429 
00430    <span class="comment">//</span>
00431    <span class="comment">// if this is not a console app, return success - nothing else to do.</span>
00432    <span class="comment">//</span>
00433 
00434    <span class="keywordflow">if</span> (!pConnectInfo-&gt;ConsoleApp) {
00435        <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00436    }
00437 
00438    <span class="comment">//</span>
00439    <span class="comment">// wait for initialization to complete.  we have to use the NT</span>
00440    <span class="comment">// wait because the heap hasn't been initialized yet.</span>
00441    <span class="comment">//</span>
00442 
00443    <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d1/d2/obwait_8c.html#a5">NtWaitForMultipleObjects</a>(NUMBER_OF_INITIALIZATION_EVENTS,
00444                                         pConnectInfo-&gt;ConsoleInfo.InitEvents,
00445                                         WaitAny,
00446                                         FALSE,
00447                                         NULL
00448                                         );
00449 
00450    <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00451        <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(Status);
00452        <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00453    }
00454 
00455    <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(pConnectInfo-&gt;ConsoleInfo.InitEvents[INITIALIZATION_SUCCEEDED]);
00456    <a class="code" href="../../d5/d0/obclose_8c.html#a1">NtClose</a>(pConnectInfo-&gt;ConsoleInfo.InitEvents[INITIALIZATION_FAILED]);
00457    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> != <a class="code" href="../../d5/d5/conmsg_8h.html#a4">INITIALIZATION_SUCCEEDED</a>) {
00458        <a class="code" href="../../d6/d4/condll_8h.html#a0">SET_CONSOLE_HANDLE</a>(NULL);
00459        <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00460    }
00461 
00462    <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00463 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="condll.h::ExpungeConsoleCommandHistoryInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID APIENTRY ExpungeConsoleCommandHistoryInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExeName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00733">733</a> of file <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html">client/cmdline.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00547">_CONSOLE_EXPUNGECOMMANDHISTORY_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a221">ConsolepExpungeCommandHistory</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00549">_CONSOLE_EXPUNGECOMMANDHISTORY_MSG::Exe</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00548">_CONSOLE_EXPUNGECOMMANDHISTORY_MSG::ExeLength</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00094">GetExeName()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a102">PCONSOLE_EXPUNGECOMMANDHISTORY_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00550">_CONSOLE_EXPUNGECOMMANDHISTORY_MSG::Unicode</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00551">_CONSOLE_EXPUNGECOMMANDHISTORY_MSG::UnicodeExe</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00785">ExpungeConsoleCommandHistoryA()</a>, and <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00777">ExpungeConsoleCommandHistoryW()</a>.
<p>
<pre class="fragment"><div>00737 {
00738     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00739     <a class="code" href="../../d1/d0/struct__CONSOLE__EXPUNGECOMMANDHISTORY__MSG.html">PCONSOLE_EXPUNGECOMMANDHISTORY_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.ExpungeConsoleCommandHistoryW;
00740     PCSR_CAPTURE_HEADER CaptureBuffer;
00741 
00742     a-&gt;<a class="code" href="../../d1/d0/struct__CONSOLE__EXPUNGECOMMANDHISTORY__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00743     a-&gt;<a class="code" href="../../d1/d0/struct__CONSOLE__EXPUNGECOMMANDHISTORY__MSG.html#o1">ExeLength</a> = <a class="code" href="../../d2/d1/client_2cmdline_8c.html#a11">GetExeName</a>(&amp;ExeName,Unicode,&amp;a-&gt;<a class="code" href="../../d1/d0/struct__CONSOLE__EXPUNGECOMMANDHISTORY__MSG.html#o4">UnicodeExe</a>);
00744     a-&gt;<a class="code" href="../../d1/d0/struct__CONSOLE__EXPUNGECOMMANDHISTORY__MSG.html#o3">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00745 
00746     CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00747                                               a-&gt;<a class="code" href="../../d1/d0/struct__CONSOLE__EXPUNGECOMMANDHISTORY__MSG.html#o1">ExeLength</a>
00748                                             );
00749     <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00750         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00751         <span class="keywordflow">return</span>;
00752     }
00753 
00754     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00755                              (PCHAR) ExeName,
00756                              a-&gt;<a class="code" href="../../d1/d0/struct__CONSOLE__EXPUNGECOMMANDHISTORY__MSG.html#o1">ExeLength</a>,
00757                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d1/d0/struct__CONSOLE__EXPUNGECOMMANDHISTORY__MSG.html#o2">Exe</a>
00758                            );
00759 
00760     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00761                          CaptureBuffer,
00762                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00763                                               ConsolepExpungeCommandHistory
00764                                             ),
00765                          <span class="keyword">sizeof</span>( *a )
00766                        );
00767     <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00768 
00769 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="condll.h::FillConsoleOutput" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY FillConsoleOutput           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>Element</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwWriteCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfElementsWritten</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01448">1448</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00295">_CONSOLE_FILLCONSOLEOUTPUT_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a170">ConsolepFillConsoleOutput</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00299">_CONSOLE_FILLCONSOLEOUTPUT_MSG::Element</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00298">_CONSOLE_FILLCONSOLEOUTPUT_MSG::ElementType</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00300">_CONSOLE_FILLCONSOLEOUTPUT_MSG::Length</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00296">_CONSOLE_FILLCONSOLEOUTPUT_MSG::OutputHandle</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00297">_CONSOLE_FILLCONSOLEOUTPUT_MSG::WriteCoord</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01616">FillConsoleOutputAttribute()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01524">FillConsoleOutputCharacterA()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01570">FillConsoleOutputCharacterW()</a>.
<p>
<pre class="fragment"><div>01459           :
01460 
01461     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
01462         that is to be written.  The handle must have been created with
01463         GENERIC_WRITE access.
01464 
01465     Element - The attribute or character to write.
01466 
01467     nLength - Number of times to write the element.
01468 
01469     fFlags - flag indicating what type of element to write.
01470 
01471     dwWriteCoord - Screen buffer coordinates to write the element to.
01472 
01473     lpNumberOfElementsWritten - Pointer to number of elements written.
01474 
01475 Return Value:
01476 
01477     TRUE - The operation was successful.
01478 
01479     FALSE/NULL - The operation failed.
01480         Extended error status is available using GetLastError.
01481 
01482 --*/
01483 
01484 {
01485 
01486     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
01487     <a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html">PCONSOLE_FILLCONSOLEOUTPUT_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.FillConsoleOutput;
01488 
01489     a-&gt;<a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
01490     a-&gt;<a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html#o1">OutputHandle</a> = hConsoleOutput;
01491     a-&gt;<a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html#o5">Length</a> = nLength;
01492     a-&gt;<a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html#o3">ElementType</a> = fFlags;
01493     a-&gt;<a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html#o4">Element</a> = Element;
01494     a-&gt;<a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html#o2">WriteCoord</a> = dwWriteCoord;
01495     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
01496                          NULL,
01497                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
01498                                               ConsolepFillConsoleOutput
01499                                             ),
01500                          <span class="keyword">sizeof</span>( *a )
01501                        );
01502     <span class="keywordflow">try</span> {
01503         *lpNumberOfElementsWritten = a-&gt;<a class="code" href="../../d2/d0/struct__CONSOLE__FILLCONSOLEOUTPUT__MSG.html#o5">Length</a>;
01504     } except( EXCEPTION_EXECUTE_HANDLER ) {
01505         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
01506         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01507     }
01508     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(m.ReturnValue)) {
01509         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
01510         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01511     }
01512     <span class="keywordflow">else</span> {
01513         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01514     }
01515 
01516 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="condll.h::FreeConsoleInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY FreeConsoleInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00922">922</a> of file <a class="el" href="../../d9/d8/dllinit_8c-source.html">dllinit.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00608">_CONSOLE_FREE_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a200">ConsolepFree</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00046">SET_CONSOLE_HANDLE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00979">FreeConsole()</a>.
<p>
<pre class="fragment"><div>00927                    :
00928 
00929    Marshels <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> parameters <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d5/d5/conmsg_8h.html#a236a200">ConsolepFree</a> command.
00930 
00931 Arguments:
00932 
00933    See <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d4/d0/struct__CONSOLE__FREE__MSG.html">CONSOLE_FREE_MSG</a> structure and <a class="code" href="../../d8/d9/dllinit_8c.html#a23">FreeConsole</a>.
00934 
00935 Return Value:
00936 
00937     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - Success
00938 
00939     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> - An error occured.
00940 
00941 --*/
00942 {
00943 
00944    <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00945    <a class="code" href="../../d4/d0/struct__CONSOLE__FREE__MSG.html">PCONSOLE_FREE_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.FreeConsole;
00946 
00947    a-&gt;<a class="code" href="../../d4/d0/struct__CONSOLE__FREE__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00948 
00949    <span class="comment">//</span>
00950    <span class="comment">// Connect to the server process</span>
00951    <span class="comment">//</span>
00952 
00953    <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00954                         NULL,
00955                         CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00956                                              ConsolepFree
00957                                            ),
00958                         <span class="keyword">sizeof</span>( *a )
00959                       );
00960 
00961    <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00962       <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a> (m.ReturnValue);
00963       <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00964 
00965    } <span class="keywordflow">else</span> {
00966 
00967       <a class="code" href="../../d6/d4/condll_8h.html#a0">SET_CONSOLE_HANDLE</a>(NULL);
00968       <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00969    }
00970 
00971 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="condll.h::GetConsoleAliasesInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY GetConsoleAliasesInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>AliasBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>AliasBufferLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExeName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00550">550</a> of file <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html">client/cmdline.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00536">_CONSOLE_GETALIASES_MSG::AliasesBuffer</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00535">_CONSOLE_GETALIASES_MSG::AliasesBufferLength</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00530">_CONSOLE_GETALIASES_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a219">ConsolepGetAliases</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00532">_CONSOLE_GETALIASES_MSG::Exe</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00531">_CONSOLE_GETALIASES_MSG::ExeLength</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00094">GetExeName()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a98">PCONSOLE_GETALIASES_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00533">_CONSOLE_GETALIASES_MSG::Unicode</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00534">_CONSOLE_GETALIASES_MSG::UnicodeExe</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00628">GetConsoleAliasesA()</a>, and <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00614">GetConsoleAliasesW()</a>.
<p>
<pre class="fragment"><div>00556 {
00557     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00558     <a class="code" href="../../d6/d0/struct__CONSOLE__GETALIASES__MSG.html">PCONSOLE_GETALIASES_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetConsoleAliasesW;
00559     PCSR_CAPTURE_HEADER CaptureBuffer;
00560 
00561     a-&gt;<a class="code" href="../../d6/d0/struct__CONSOLE__GETALIASES__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00562     a-&gt;<a class="code" href="../../d6/d0/struct__CONSOLE__GETALIASES__MSG.html#o1">ExeLength</a> = <a class="code" href="../../d2/d1/client_2cmdline_8c.html#a11">GetExeName</a>(&amp;ExeName,Unicode,&amp;a-&gt;<a class="code" href="../../d6/d0/struct__CONSOLE__GETALIASES__MSG.html#o4">UnicodeExe</a>);
00563     a-&gt;<a class="code" href="../../d6/d0/struct__CONSOLE__GETALIASES__MSG.html#o3">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00564     a-&gt;<a class="code" href="../../d6/d0/struct__CONSOLE__GETALIASES__MSG.html#o5">AliasesBufferLength</a> = AliasBufferLength;
00565 
00566     CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 2,
00567                                               a-&gt;<a class="code" href="../../d6/d0/struct__CONSOLE__GETALIASES__MSG.html#o1">ExeLength</a> + AliasBufferLength
00568                                             );
00569     <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00570         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00571         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00572     }
00573 
00574     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00575                              (PCHAR) ExeName,
00576                              a-&gt;<a class="code" href="../../d6/d0/struct__CONSOLE__GETALIASES__MSG.html#o1">ExeLength</a>,
00577                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d6/d0/struct__CONSOLE__GETALIASES__MSG.html#o2">Exe</a>
00578                            );
00579     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00580                              (PCHAR) NULL,
00581                              a-&gt;<a class="code" href="../../d6/d0/struct__CONSOLE__GETALIASES__MSG.html#o5">AliasesBufferLength</a>,
00582                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d6/d0/struct__CONSOLE__GETALIASES__MSG.html#o6">AliasesBuffer</a>
00583                            );
00584     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00585                          CaptureBuffer,
00586                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00587                                               ConsolepGetAliases
00588                                             ),
00589                          <span class="keyword">sizeof</span>( *a )
00590                        );
00591     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00592         <span class="keywordflow">try</span> {
00593             RtlCopyMemory( AliasBuffer, a-&gt;<a class="code" href="../../d6/d0/struct__CONSOLE__GETALIASES__MSG.html#o6">AliasesBuffer</a>, a-&gt;<a class="code" href="../../d6/d0/struct__CONSOLE__GETALIASES__MSG.html#o5">AliasesBufferLength</a> );
00594         } except( EXCEPTION_EXECUTE_HANDLER ) {
00595             <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00596             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00597             <span class="keywordflow">return</span> 0;
00598         }
00599         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00600         <span class="keywordflow">return</span> a-&gt;<a class="code" href="../../d6/d0/struct__CONSOLE__GETALIASES__MSG.html#o5">AliasesBufferLength</a>;
00601     } <span class="keywordflow">else</span> {
00602         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00603         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00604         <span class="keywordflow">return</span> 0;
00605     }
00606 
00607 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="condll.h::GetConsoleAliasesLengthInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY GetConsoleAliasesLengthInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExeName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00425">425</a> of file <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html">client/cmdline.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00515">_CONSOLE_GETALIASESLENGTH_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a217">ConsolepGetAliasesLength</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00517">_CONSOLE_GETALIASESLENGTH_MSG::Exe</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00516">_CONSOLE_GETALIASESLENGTH_MSG::ExeLength</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00094">GetExeName()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a94">PCONSOLE_GETALIASESLENGTH_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00519">_CONSOLE_GETALIASESLENGTH_MSG::Unicode</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00520">_CONSOLE_GETALIASESLENGTH_MSG::UnicodeExe</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00485">GetConsoleAliasesLengthA()</a>, and <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00474">GetConsoleAliasesLengthW()</a>.
<p>
<pre class="fragment"><div>00429 {
00430     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00431     <a class="code" href="../../d7/d0/struct__CONSOLE__GETALIASESLENGTH__MSG.html">PCONSOLE_GETALIASESLENGTH_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetConsoleAliasesLengthW;
00432     PCSR_CAPTURE_HEADER CaptureBuffer;
00433 
00434     a-&gt;<a class="code" href="../../d7/d0/struct__CONSOLE__GETALIASESLENGTH__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00435     a-&gt;<a class="code" href="../../d7/d0/struct__CONSOLE__GETALIASESLENGTH__MSG.html#o1">ExeLength</a> = <a class="code" href="../../d2/d1/client_2cmdline_8c.html#a11">GetExeName</a>(&amp;ExeName,Unicode,&amp;a-&gt;<a class="code" href="../../d7/d0/struct__CONSOLE__GETALIASESLENGTH__MSG.html#o5">UnicodeExe</a>);
00436     a-&gt;<a class="code" href="../../d7/d0/struct__CONSOLE__GETALIASESLENGTH__MSG.html#o4">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00437 
00438     CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00439                                               a-&gt;<a class="code" href="../../d7/d0/struct__CONSOLE__GETALIASESLENGTH__MSG.html#o1">ExeLength</a>
00440                                             );
00441     <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00442         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00443         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00444     }
00445 
00446     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00447                              (PCHAR) ExeName,
00448                              a-&gt;<a class="code" href="../../d7/d0/struct__CONSOLE__GETALIASESLENGTH__MSG.html#o1">ExeLength</a>,
00449                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d7/d0/struct__CONSOLE__GETALIASESLENGTH__MSG.html#o2">Exe</a>
00450                            );
00451     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00452                          CaptureBuffer,
00453                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00454                                               ConsolepGetAliasesLength
00455                                             ),
00456                          <span class="keyword">sizeof</span>( *a )
00457                        );
00458     <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00459     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00460         <span class="keywordflow">return</span> a-&gt;<a class="code" href="../../d7/d0/struct__CONSOLE__GETALIASESLENGTH__MSG.html#o3">AliasesLength</a>;
00461     } <span class="keywordflow">else</span> {
00462         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00463         <span class="keywordflow">return</span> 0;
00464     }
00465 
00466 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="condll.h::GetConsoleAliasExesInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY GetConsoleAliasExesInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExeNameBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExeNameBufferLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00647">647</a> of file <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html">client/cmdline.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00542">_CONSOLE_GETALIASEXES_MSG::AliasExesBuffer</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00541">_CONSOLE_GETALIASEXES_MSG::AliasExesBufferLength</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00540">_CONSOLE_GETALIASEXES_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a220">ConsolepGetAliasExes</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00033">ExeNameBuffer</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a100">PCONSOLE_GETALIASEXES_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00543">_CONSOLE_GETALIASEXES_MSG::Unicode</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00716">GetConsoleAliasExesA()</a>, and <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00704">GetConsoleAliasExesW()</a>.
<p>
<pre class="fragment"><div>00652 {
00653     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00654     <a class="code" href="../../d8/d0/struct__CONSOLE__GETALIASEXES__MSG.html">PCONSOLE_GETALIASEXES_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetConsoleAliasExesW;
00655     PCSR_CAPTURE_HEADER CaptureBuffer;
00656 
00657     a-&gt;<a class="code" href="../../d8/d0/struct__CONSOLE__GETALIASEXES__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00658     a-&gt;<a class="code" href="../../d8/d0/struct__CONSOLE__GETALIASEXES__MSG.html#o1">AliasExesBufferLength</a> = ExeNameBufferLength;
00659     a-&gt;<a class="code" href="../../d8/d0/struct__CONSOLE__GETALIASEXES__MSG.html#o3">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00660     CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00661                                               ExeNameBufferLength
00662                                             );
00663     <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00664         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00665         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00666     }
00667 
00668     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00669                              (PCHAR) NULL,
00670                              a-&gt;<a class="code" href="../../d8/d0/struct__CONSOLE__GETALIASEXES__MSG.html#o1">AliasExesBufferLength</a>,
00671                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d8/d0/struct__CONSOLE__GETALIASEXES__MSG.html#o2">AliasExesBuffer</a>
00672                            );
00673 
00674     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00675                          CaptureBuffer,
00676                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00677                                               ConsolepGetAliasExes
00678                                             ),
00679                          <span class="keyword">sizeof</span>( *a )
00680                        );
00681     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00682         <span class="keywordflow">try</span> {
00683             RtlCopyMemory( ExeNameBuffer, a-&gt;<a class="code" href="../../d8/d0/struct__CONSOLE__GETALIASEXES__MSG.html#o2">AliasExesBuffer</a>, a-&gt;<a class="code" href="../../d8/d0/struct__CONSOLE__GETALIASEXES__MSG.html#o1">AliasExesBufferLength</a> );
00684         } except( EXCEPTION_EXECUTE_HANDLER ) {
00685             <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00686             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00687             <span class="keywordflow">return</span> 0;
00688         }
00689         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00690         <span class="keywordflow">return</span> a-&gt;<a class="code" href="../../d8/d0/struct__CONSOLE__GETALIASEXES__MSG.html#o1">AliasExesBufferLength</a>;
00691     } <span class="keywordflow">else</span> {
00692         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00693         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00694         <span class="keywordflow">return</span> 0;
00695     }
00696 
00697 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="condll.h::GetConsoleAliasExesLengthInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY GetConsoleAliasExesLengthInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN BOOLEAN&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Unicode</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00500">500</a> of file <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html">client/cmdline.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00524">_CONSOLE_GETALIASEXESLENGTH_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a218">ConsolepGetAliasExesLength</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a96">PCONSOLE_GETALIASEXESLENGTH_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00526">_CONSOLE_GETALIASEXESLENGTH_MSG::Unicode</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00539">GetConsoleAliasExesLengthA()</a>, and <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00532">GetConsoleAliasExesLengthW()</a>.
<p>
<pre class="fragment"><div>00503 {
00504     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00505     <a class="code" href="../../d9/d0/struct__CONSOLE__GETALIASEXESLENGTH__MSG.html">PCONSOLE_GETALIASEXESLENGTH_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetConsoleAliasExesLengthW;
00506 
00507     a-&gt;<a class="code" href="../../d9/d0/struct__CONSOLE__GETALIASEXESLENGTH__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00508     a-&gt;<a class="code" href="../../d9/d0/struct__CONSOLE__GETALIASEXESLENGTH__MSG.html#o2">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00509 
00510     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00511                          NULL,
00512                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00513                                               ConsolepGetAliasExesLength
00514                                             ),
00515                          <span class="keyword">sizeof</span>( *a )
00516                        );
00517     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00518         <span class="keywordflow">return</span> a-&gt;<a class="code" href="../../d9/d0/struct__CONSOLE__GETALIASEXESLENGTH__MSG.html#o1">AliasExesLength</a>;
00519     } <span class="keywordflow">else</span> {
00520         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00521         <span class="keywordflow">return</span> 0;
00522     }
00523 
00524 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="condll.h::GetConsoleAliasInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY GetConsoleAliasInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Source</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>SourceLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>TargetBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>TargetBufferLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExeName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00280">280</a> of file <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html">client/cmdline.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00503">_CONSOLE_GETALIAS_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a216">ConsolepGetAlias</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00509">_CONSOLE_GETALIAS_MSG::Exe</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00506">_CONSOLE_GETALIAS_MSG::ExeLength</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00094">GetExeName()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a92">PCONSOLE_GETALIAS_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00507">_CONSOLE_GETALIAS_MSG::Source</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00504">_CONSOLE_GETALIAS_MSG::SourceLength</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00508">_CONSOLE_GETALIAS_MSG::Target</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00505">_CONSOLE_GETALIAS_MSG::TargetLength</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00510">_CONSOLE_GETALIAS_MSG::Unicode</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00511">_CONSOLE_GETALIAS_MSG::UnicodeExe</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00403">GetConsoleAliasA()</a>, and <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00385">GetConsoleAliasW()</a>.
<p>
<pre class="fragment"><div>00291           :
00292 
00293     Source - <a class="code" href="../../d8/d0/geninst_8c.html#a20">Name</a> of alias to query.  <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> means query all alias names.
00294 
00295     Target - Where to store value of alias.  If Source <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, then
00296         value <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> one or more null terminated strings terminated by an extra
00297         null byte.  Each null terminated string <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> name of an alias.
00298 
00299 Return Value:
00300 
00301     Non-zero - The operation was successful, and <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keywordflow">return</span> value <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00302         number of characters stored in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Target buffer.
00303 
00304     <a class="code" href="../../d6/d6/ttime_8c.html#a0">Zero</a> - The operation failed. Extended error status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available
00305         <span class="keyword">using</span> GetLastError.
00306 
00307 --*/
00308 
00309 {
00310     PCSR_CAPTURE_HEADER CaptureBuffer;
00311     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00312     ULONG CapturedMsgPointers;
00313     <a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html">PCONSOLE_GETALIAS_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetConsoleAliasW;
00314 
00315     <span class="keywordflow">if</span> (Source == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00316         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_PARAMETER);
00317         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00318     }
00319     a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00320     a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o7">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00321 
00322     CapturedMsgPointers = 3;
00323 
00324     a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o3">ExeLength</a> = <a class="code" href="../../d2/d1/client_2cmdline_8c.html#a11">GetExeName</a>(&amp;ExeName,Unicode,&amp;a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o8">UnicodeExe</a>);
00325 
00326     a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o1">SourceLength</a> = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>) SourceLength;
00327     a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o2">TargetLength</a> = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>) TargetBufferLength;
00328 
00329     CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( CapturedMsgPointers,
00330                                               a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o1">SourceLength</a> + a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o2">TargetLength</a> + a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o3">ExeLength</a>
00331                                             );
00332     <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00333         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00334         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00335     }
00336 
00337     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00338                              (PCHAR) ExeName,
00339                              a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o3">ExeLength</a>,
00340                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o6">Exe</a>
00341                            );
00342 
00343     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00344                              (PCHAR) Source,
00345                              a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o1">SourceLength</a>,
00346                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o4">Source</a>
00347                            );
00348 
00349     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00350                              (PCHAR) NULL,
00351                              a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o2">TargetLength</a>,
00352                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o5">Target</a>
00353                            );
00354 
00355     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00356                          CaptureBuffer,
00357                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00358                                               ConsolepGetAlias
00359                                             ),
00360                          <span class="keyword">sizeof</span>( *a )
00361                        );
00362 
00363     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00364         RtlCopyMemory( TargetBuffer, a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o5">Target</a>, a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o2">TargetLength</a> );
00365     }
00366     <span class="keywordflow">else</span> {
00367         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00368         <span class="keywordflow">if</span> (m.ReturnValue != STATUS_BUFFER_TOO_SMALL) {
00369             a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o2">TargetLength</a> = 0;
00370         }
00371     }
00372 
00373     <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00374 
00375     <span class="keywordflow">return</span> a-&gt;<a class="code" href="../../d5/d0/struct__CONSOLE__GETALIAS__MSG.html#o2">TargetLength</a>;
00376 
00377 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="condll.h::GetConsoleCommandHistoryInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY GetConsoleCommandHistoryInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Commands</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CommandBufferLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExeName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00945">945</a> of file <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html">client/cmdline.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00575">_CONSOLE_GETCOMMANDHISTORY_MSG::CommandBuffer</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00574">_CONSOLE_GETCOMMANDHISTORY_MSG::CommandBufferLength</a>, <a class="el" href="../../d3/d4/editreg_8c-source.html#l00184">Commands</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00573">_CONSOLE_GETCOMMANDHISTORY_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a224">ConsolepGetCommandHistory</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00577">_CONSOLE_GETCOMMANDHISTORY_MSG::Exe</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00576">_CONSOLE_GETCOMMANDHISTORY_MSG::ExeLength</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00094">GetExeName()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a108">PCONSOLE_GETCOMMANDHISTORY_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00578">_CONSOLE_GETCOMMANDHISTORY_MSG::Unicode</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00579">_CONSOLE_GETCOMMANDHISTORY_MSG::UnicodeExe</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01024">GetConsoleCommandHistoryA()</a>, and <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01010">GetConsoleCommandHistoryW()</a>.
<p>
<pre class="fragment"><div>00951 {
00952     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00953     <a class="code" href="../../d0/d1/struct__CONSOLE__GETCOMMANDHISTORY__MSG.html">PCONSOLE_GETCOMMANDHISTORY_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetConsoleCommandHistoryW;
00954     PCSR_CAPTURE_HEADER CaptureBuffer;
00955 
00956     a-&gt;<a class="code" href="../../d0/d1/struct__CONSOLE__GETCOMMANDHISTORY__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00957     a-&gt;<a class="code" href="../../d0/d1/struct__CONSOLE__GETCOMMANDHISTORY__MSG.html#o1">CommandBufferLength</a> = CommandBufferLength;
00958     a-&gt;<a class="code" href="../../d0/d1/struct__CONSOLE__GETCOMMANDHISTORY__MSG.html#o3">ExeLength</a> = <a class="code" href="../../d2/d1/client_2cmdline_8c.html#a11">GetExeName</a>(&amp;ExeName,Unicode,&amp;a-&gt;<a class="code" href="../../d0/d1/struct__CONSOLE__GETCOMMANDHISTORY__MSG.html#o6">UnicodeExe</a>);
00959     a-&gt;<a class="code" href="../../d0/d1/struct__CONSOLE__GETCOMMANDHISTORY__MSG.html#o5">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00960     CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 2,
00961                                               CommandBufferLength + a-&gt;<a class="code" href="../../d0/d1/struct__CONSOLE__GETCOMMANDHISTORY__MSG.html#o3">ExeLength</a>
00962                                             );
00963     <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00964         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00965         <span class="keywordflow">return</span> 0;
00966     }
00967 
00968 
00969     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00970                              (PCHAR) ExeName,
00971                              a-&gt;<a class="code" href="../../d0/d1/struct__CONSOLE__GETCOMMANDHISTORY__MSG.html#o3">ExeLength</a>,
00972                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d0/d1/struct__CONSOLE__GETCOMMANDHISTORY__MSG.html#o4">Exe</a>
00973                            );
00974 
00975     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00976                              (PCHAR) NULL,
00977                              a-&gt;<a class="code" href="../../d0/d1/struct__CONSOLE__GETCOMMANDHISTORY__MSG.html#o1">CommandBufferLength</a>,
00978                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d0/d1/struct__CONSOLE__GETCOMMANDHISTORY__MSG.html#o2">CommandBuffer</a>
00979                            );
00980     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00981                          CaptureBuffer,
00982                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00983                                               ConsolepGetCommandHistory
00984                                             ),
00985                          <span class="keyword">sizeof</span>( *a )
00986                        );
00987     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00988         <span class="keywordflow">try</span> {
00989             RtlCopyMemory( Commands, a-&gt;<a class="code" href="../../d0/d1/struct__CONSOLE__GETCOMMANDHISTORY__MSG.html#o2">CommandBuffer</a>, a-&gt;<a class="code" href="../../d0/d1/struct__CONSOLE__GETCOMMANDHISTORY__MSG.html#o1">CommandBufferLength</a> );
00990         } except( EXCEPTION_EXECUTE_HANDLER ) {
00991             <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00992             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00993             <span class="keywordflow">return</span> 0;
00994         }
00995         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00996         <span class="keywordflow">return</span> a-&gt;<a class="code" href="../../d0/d1/struct__CONSOLE__GETCOMMANDHISTORY__MSG.html#o1">CommandBufferLength</a>;
00997     } <span class="keywordflow">else</span> {
00998         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00999         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
01000         <span class="keywordflow">return</span> 0;
01001     }
01002 
01003 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="condll.h::GetConsoleCommandHistoryLengthInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY GetConsoleCommandHistoryLengthInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExeName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00877">877</a> of file <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html">client/cmdline.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00564">_CONSOLE_GETCOMMANDHISTORYLENGTH_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a223">ConsolepGetCommandHistoryLength</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00567">_CONSOLE_GETCOMMANDHISTORYLENGTH_MSG::Exe</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00566">_CONSOLE_GETCOMMANDHISTORYLENGTH_MSG::ExeLength</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00094">GetExeName()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a106">PCONSOLE_GETCOMMANDHISTORYLENGTH_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00568">_CONSOLE_GETCOMMANDHISTORYLENGTH_MSG::Unicode</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00569">_CONSOLE_GETCOMMANDHISTORYLENGTH_MSG::UnicodeExe</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00930">GetConsoleCommandHistoryLengthA()</a>, and <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00920">GetConsoleCommandHistoryLengthW()</a>.
<p>
<pre class="fragment"><div>00881 {    
00882     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00883     <a class="code" href="../../d1/d1/struct__CONSOLE__GETCOMMANDHISTORYLENGTH__MSG.html">PCONSOLE_GETCOMMANDHISTORYLENGTH_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetConsoleCommandHistoryLengthW;
00884     PCSR_CAPTURE_HEADER CaptureBuffer;
00885 
00886     a-&gt;<a class="code" href="../../d1/d1/struct__CONSOLE__GETCOMMANDHISTORYLENGTH__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00887     a-&gt;<a class="code" href="../../d1/d1/struct__CONSOLE__GETCOMMANDHISTORYLENGTH__MSG.html#o2">ExeLength</a> = <a class="code" href="../../d2/d1/client_2cmdline_8c.html#a11">GetExeName</a>(&amp;ExeName,Unicode,&amp;a-&gt;<a class="code" href="../../d1/d1/struct__CONSOLE__GETCOMMANDHISTORYLENGTH__MSG.html#o5">UnicodeExe</a>);
00888     a-&gt;<a class="code" href="../../d1/d1/struct__CONSOLE__GETCOMMANDHISTORYLENGTH__MSG.html#o4">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00889     CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00890                                               a-&gt;<a class="code" href="../../d1/d1/struct__CONSOLE__GETCOMMANDHISTORYLENGTH__MSG.html#o2">ExeLength</a>
00891                                             );
00892     <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00893         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00894         <span class="keywordflow">return</span> 0;
00895     }
00896 
00897     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00898                              (PCHAR) ExeName,
00899                              a-&gt;<a class="code" href="../../d1/d1/struct__CONSOLE__GETCOMMANDHISTORYLENGTH__MSG.html#o2">ExeLength</a>,
00900                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d1/d1/struct__CONSOLE__GETCOMMANDHISTORYLENGTH__MSG.html#o3">Exe</a>
00901                            );
00902 
00903     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00904                          CaptureBuffer,
00905                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00906                                               ConsolepGetCommandHistoryLength
00907                                             ),
00908                          <span class="keyword">sizeof</span>( *a )
00909                        );
00910     <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00911     <span class="keywordflow">return</span> a-&gt;<a class="code" href="../../d1/d1/struct__CONSOLE__GETCOMMANDHISTORYLENGTH__MSG.html#o1">CommandHistoryLength</a>;
00912 
00913 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="condll.h::GetConsoleInput" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY GetConsoleInput           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PINPUT_RECORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfEventsRead</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>wFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00029">29</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00229">_CONSOLE_GETCONSOLEINPUT_MSG::BufPtr</a>, <a class="el" href="../../d6/d4/rdwr_8c-source.html#l00044">CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00226">_CONSOLE_GETCONSOLEINPUT_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a164">ConsolepGetConsoleInput</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00231">_CONSOLE_GETCONSOLEINPUT_MSG::Flags</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00223">INPUT_RECORD_BUFFER_SIZE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00227">_CONSOLE_GETCONSOLEINPUT_MSG::InputHandle</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00230">_CONSOLE_GETCONSOLEINPUT_MSG::NumRecords</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00228">_CONSOLE_GETCONSOLEINPUT_MSG::Record</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00232">_CONSOLE_GETCONSOLEINPUT_MSG::Unicode</a>, and <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00150">PeekConsoleInputA()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00168">PeekConsoleInputW()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00209">ReadConsoleInputA()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00268">ReadConsoleInputExA()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00287">ReadConsoleInputExW()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00227">ReadConsoleInputW()</a>.
<p>
<pre class="fragment"><div>00040           :
00041 
00042     hConsoleInput - Supplies an open handle to CONIN$ that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be
00043         read.  The handle must have been created with GENERIC_READ access.
00044 
00045     lpBuffer - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of a buffer to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data read
00046         from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer.
00047 
00048     nLength - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of lpBuffer in INPUT_RECORDs.
00049 
00050     lpNumberOfEventsRead - Pointer to number of events read.
00051 
00052     wFlags - Flags that <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a58">control</a> how data <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> read.
00053 
00054 Return Value:
00055 
00056     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - The operation was successful.
00057 
00058     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>/<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - The operation failed.
00059         Extended error status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available <span class="keyword">using</span> GetLastError.
00060 
00061 --*/
00062 
00063 {
00064     PCSR_CAPTURE_HEADER CaptureBuffer;
00065     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00066     <a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html">PCONSOLE_GETCONSOLEINPUT_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetConsoleInput;
00067 
00068     <span class="comment">//</span>
00069     <span class="comment">// If it's not a well formed handle, don't bother going to the server.</span>
00070     <span class="comment">//</span>
00071 
00072     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d5/rdwr_8c.html#a8">CONSOLE_HANDLE</a>(hConsoleInput)) {
00073         <span class="keywordflow">try</span> {
00074             *lpNumberOfEventsRead = 0;
00075             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_HANDLE);
00076         } except( EXCEPTION_EXECUTE_HANDLER ) {
00077             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00078         }
00079         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00080     }
00081 
00082     a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00083     a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o1">InputHandle</a> = hConsoleInput;
00084     a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o4">NumRecords</a> = nLength;
00085     a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o5">Flags</a> = wFlags;
00086     a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o6">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00087 
00088     <span class="comment">//</span>
00089     <span class="comment">// for speed in the case where we're only reading a few records, we have</span>
00090     <span class="comment">// a buffer in the msg we pass to the server. this means we don't have to</span>
00091     <span class="comment">// allocate a capture buffer.</span>
00092     <span class="comment">//</span>
00093 
00094     <span class="keywordflow">if</span> (nLength &gt; <a class="code" href="../../d5/d5/conmsg_8h.html#a7">INPUT_RECORD_BUFFER_SIZE</a>) {
00095         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00096                                                   nLength * <span class="keyword">sizeof</span>(INPUT_RECORD)
00097                                                 );
00098         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00099             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00100             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00101         }
00102         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00103                                  NULL,
00104                                  nLength * <span class="keyword">sizeof</span>(INPUT_RECORD),
00105                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o3">BufPtr</a>
00106                                );
00107 
00108     } <span class="keywordflow">else</span> {
00109         a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o3">BufPtr</a> = a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o2">Record</a>;
00110         CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00111     }
00112     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00113                          CaptureBuffer,
00114                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00115                                               ConsolepGetConsoleInput
00116                                             ),
00117                          <span class="keyword">sizeof</span>( *a )
00118                        );
00119 
00120     <span class="keywordflow">try</span> {
00121         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00122             *lpNumberOfEventsRead = a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o4">NumRecords</a>;
00123             RtlCopyMemory(lpBuffer, a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o3">BufPtr</a>, a-&gt;<a class="code" href="../../d2/d1/struct__CONSOLE__GETCONSOLEINPUT__MSG.html#o4">NumRecords</a> * <span class="keyword">sizeof</span>(INPUT_RECORD));
00124         }
00125         <span class="keywordflow">else</span> {
00126             *lpNumberOfEventsRead = 0;
00127             <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00128         }
00129     } except( EXCEPTION_EXECUTE_HANDLER ) {
00130         <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00131             <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00132         }
00133         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00134         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00135     }
00136     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00137         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00138     }
00139 
00140     <span class="keywordflow">return</span> <a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(m.ReturnValue);
00141 
00142 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="condll.h::GetConsoleKeyboardLayoutNameWorker" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY GetConsoleKeyboardLayoutNameWorker           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT LPSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>pszLayout</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>bAnsi</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>
++<p>
Parameters:<p>
pszLayout - address of buffer of least 9 characters bAnsi - TRUE want ANSI (8-bit) chars FALSE want Unicode (16-bit) chars<p>
Return Value:<p>
TRUE - success FALSE - failure<p>
-- 
<p>
Definition at line <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01543">1543</a> of file <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html">ntcon/client/getset.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00733">_CONSOLE_GETKEYBOARDLAYOUTNAME_MSG::bAnsi</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00728">_CONSOLE_GETKEYBOARDLAYOUTNAME_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a232">ConsolepGetKeyboardLayoutName</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01598">GetConsoleKeyboardLayoutNameA()</a>, and <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01605">GetConsoleKeyboardLayoutNameW()</a>.
<p>
<pre class="fragment"><div>01549           :
01550 
01551     pszLayout  - address of buffer of least 9 characters
01552     bAnsi      - <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>  want ANSI (8-bit) chars
01553                  FALSE want Unicode (16-bit) chars
01554 
01555 Return Value:
01556 
01557     TRUE  - success
01558     FALSE - failure
01559 
01560 --*/
01561 
01562 {
01563 
01564     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
01565     <a class="code" href="../../d2/d2/struct__CONSOLE__GETKEYBOARDLAYOUTNAME__MSG.html">PCONSOLE_GETKEYBOARDLAYOUTNAME_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetKeyboardLayoutName;
01566 
01567     a-&gt;<a class="code" href="../../d2/d2/struct__CONSOLE__GETKEYBOARDLAYOUTNAME__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
01568     a-&gt;<a class="code" href="../../d2/d2/struct__CONSOLE__GETKEYBOARDLAYOUTNAME__MSG.html#o3">bAnsi</a> = bAnsi;
01569 
01570     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
01571                          NULL,
01572                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
01573                                               ConsolepGetKeyboardLayoutName
01574                                             ),
01575                          <span class="keyword">sizeof</span>( *a )
01576                        );
01577     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
01578         <span class="keywordflow">if</span> (bAnsi) {
01579            strncpy(pszLayout, a-&gt;<a class="code" href="../../d2/d2/struct__CONSOLE__GETKEYBOARDLAYOUTNAME__MSG.html#o2">achLayout</a>, 9);
01580         } <span class="keywordflow">else</span> {
01581            wcsncpy((LPWSTR)pszLayout, a-&gt;<a class="code" href="../../d2/d2/struct__CONSOLE__GETKEYBOARDLAYOUTNAME__MSG.html#o1">awchLayout</a>, 9);
01582         }
01583         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01584     } <span class="keywordflow">else</span> {
01585         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a> (m.ReturnValue);
01586         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01587     }
01588 
01589 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="condll.h::GetConsoleLangId" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI GetConsoleLangId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT LANGID *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lpLangId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00296">296</a> of file <a class="el" href="../../d9/d8/dllinit_8c-source.html">dllinit.c</a>.
<p>
<pre class="fragment"><div>00302           :
00303 
00304     lpLangId - Supplies a pointer to a LANGID in which to store <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Language <a class="code" href="../../d4/d9/smbtrsup_8c.html#a7">ID</a>.
00305 
00306 Return Value:
00307 
00308     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - The operation was successful.
00309 
00310     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>/<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - The operation failed. Extended error status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available
00311         <span class="keyword">using</span> GetLastError.
00312 
00313 
00314 --*/
00315 
00316 {
00317     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00318     <a class="code" href="../../d4/d3/struct__CONSOLE__LANGID__MSG.html">PCONSOLE_LANGID_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetConsoleLangId;
00319 
00320     a-&gt;<a class="code" href="../../d4/d3/struct__CONSOLE__LANGID__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00321     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00322                          NULL,
00323                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00324                                               ConsolepGetLangId
00325                                             ),
00326                          <span class="keyword">sizeof</span>( *a )
00327                        );
00328     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00329         <span class="keywordflow">try</span> {
00330             *lpLangId = a-&gt;<a class="code" href="../../d4/d3/struct__CONSOLE__LANGID__MSG.html#o1">LangId</a>;
00331         } except( EXCEPTION_EXECUTE_HANDLER ) {
00332             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00333         }
00334         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00335     } <span class="keywordflow">else</span> {
00336         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00337     }
00338 
00339 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="condll.h::GetConsoleTitleInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> APIENTRY GetConsoleTitleInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>lpConsoleTitle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01070">1070</a> of file <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html">client/cmdline.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00612">_CONSOLE_GETTITLE_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a201">ConsolepGetTitle</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a118">PCONSOLE_GETTITLE_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00614">_CONSOLE_GETTITLE_MSG::Title</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00613">_CONSOLE_GETTITLE_MSG::TitleLength</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00615">_CONSOLE_GETTITLE_MSG::Unicode</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01129">GetConsoleTitleA()</a>, and <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01147">GetConsoleTitleW()</a>.
<p>
<pre class="fragment"><div>01075 {
01076     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
01077     <a class="code" href="../../d9/d2/struct__CONSOLE__GETTITLE__MSG.html">PCONSOLE_GETTITLE_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.GetConsoleTitle;
01078     PCSR_CAPTURE_HEADER CaptureBuffer;
01079 
01080     <span class="keywordflow">if</span> (nSize == 0) {
01081         <span class="keywordflow">return</span> 0;
01082     }
01083     a-&gt;<a class="code" href="../../d9/d2/struct__CONSOLE__GETTITLE__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
01084     a-&gt;<a class="code" href="../../d9/d2/struct__CONSOLE__GETTITLE__MSG.html#o1">TitleLength</a> = nSize;
01085     a-&gt;<a class="code" href="../../d9/d2/struct__CONSOLE__GETTITLE__MSG.html#o3">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
01086     CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
01087                                               a-&gt;<a class="code" href="../../d9/d2/struct__CONSOLE__GETTITLE__MSG.html#o1">TitleLength</a>
01088                                             );
01089     <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01090         <span class="keywordflow">return</span> 0;
01091     }
01092     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
01093                              NULL,
01094                              a-&gt;<a class="code" href="../../d9/d2/struct__CONSOLE__GETTITLE__MSG.html#o1">TitleLength</a>,
01095                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d9/d2/struct__CONSOLE__GETTITLE__MSG.html#o2">Title</a>
01096                            );
01097     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
01098                          CaptureBuffer,
01099                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
01100                                               ConsolepGetTitle
01101                                             ),
01102                          <span class="keyword">sizeof</span>( *a )
01103                        );
01104     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
01105         <span class="keywordflow">try</span> {
01106             RtlCopyMemory( lpConsoleTitle, a-&gt;<a class="code" href="../../d9/d2/struct__CONSOLE__GETTITLE__MSG.html#o2">Title</a>, a-&gt;<a class="code" href="../../d9/d2/struct__CONSOLE__GETTITLE__MSG.html#o1">TitleLength</a>);
01107         } except( EXCEPTION_EXECUTE_HANDLER ) {
01108             <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
01109             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
01110             <span class="keywordflow">return</span> 0;
01111         }
01112     }
01113     <span class="keywordflow">else</span> {
01114         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
01115         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a> (m.ReturnValue);
01116         <span class="keywordflow">return</span> 0;
01117     }
01118     <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
01119     <span class="keywordflow">return</span> a-&gt;<a class="code" href="../../d9/d2/struct__CONSOLE__GETTITLE__MSG.html#o1">TitleLength</a>;
01120 
01121 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="condll.h::GetCurrentExeName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> GetCurrentExeName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>Buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BufferLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00349">ReadConsoleA()</a>, and <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00377">ReadConsoleW()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="condll.h::InitializeCtrlHandling" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS InitializeCtrlHandling           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00068">68</a> of file <a class="el" href="../../d0/d0/ctrlc_8c-source.html">ctrlc.c</a>.
<p>
References <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00031">AllocatedHandlerListLength</a>, <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00043">DefaultHandler()</a>, <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00032">HandlerList</a>, <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00030">HandlerListLength</a>, <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00027">INITIAL_LIST_SIZE</a>, and <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00029">SingleHandler</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00803">AllocConsole()</a>, and <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00470">ConDllInitialize()</a>.
<p>
<pre class="fragment"><div>00075           :
00076 
00077     none.
00078 
00079 Return Value:
00080 
00081     none.
00082 
00083 --*/
00084 
00085 {
00086     <a class="code" href="../../d9/d0/ctrlc_8c.html#a7">AllocatedHandlerListLength</a> = <a class="code" href="../../d9/d0/ctrlc_8c.html#a6">HandlerListLength</a> = <a class="code" href="../../d9/d0/ctrlc_8c.html#a1">INITIAL_LIST_SIZE</a>;
00087     <a class="code" href="../../d9/d0/ctrlc_8c.html#a8">HandlerList</a> = <a class="code" href="../../d9/d0/ctrlc_8c.html#a5">SingleHandler</a>;
00088     <a class="code" href="../../d9/d0/ctrlc_8c.html#a5">SingleHandler</a>[0] = <a class="code" href="../../d9/d0/ctrlc_8c.html#a10">DefaultHandler</a>;
00089     <span class="keywordflow">return</span> STATUS_SUCCESS;
00090 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="condll.h::OpenConsoleWInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> HANDLE APIENTRY OpenConsoleWInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>HandleType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>DesiredAccess</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>InheritHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ShareMode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00044">44</a> of file <a class="el" href="../../d0/d6/client_2stream_8c-source.html">client/stream.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00215">_CONSOLE_OPENCONSOLE_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a163">ConsolepOpenConsole</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00217">_CONSOLE_OPENCONSOLE_MSG::DesiredAccess</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00216">_CONSOLE_OPENCONSOLE_MSG::HandleType</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00218">_CONSOLE_OPENCONSOLE_MSG::InheritHandle</a>, <a class="el" href="../../d6/d3/rxact_8c-source.html#l00212">INVALID_HANDLE_VALUE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a22">PCONSOLE_OPENCONSOLE_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00219">_CONSOLE_OPENCONSOLE_MSG::ShareMode</a>, and <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00098">OpenConsoleW()</a>.
<p>
<pre class="fragment"><div>00052                    :
00053 
00054    Marshels parameters <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d5/d5/conmsg_8h.html#a236a163">ConsolepOpenConsole</a> command.
00055 
00056 Arguments:
00057 
00058    See <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d9/d3/struct__CONSOLE__OPENCONSOLE__MSG.html">CONSOLE_OPENCONSOLE_MSG</a> structure and <a class="code" href="../../d9/d6/client_2stream_8c.html#a3">OpenConsoleW</a>.
00059 
00060 Return Value:
00061 
00062     <a class="code" href="../../d5/d4/rxact_8c.html#a0">INVALID_HANDLE_VALUE</a> - An error occured.
00063 
00064 --*/
00065 {
00066 
00067     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00068     <a class="code" href="../../d9/d3/struct__CONSOLE__OPENCONSOLE__MSG.html">PCONSOLE_OPENCONSOLE_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.OpenConsole;
00069 
00070     a-&gt;<a class="code" href="../../d9/d3/struct__CONSOLE__OPENCONSOLE__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00071     a-&gt;<a class="code" href="../../d9/d3/struct__CONSOLE__OPENCONSOLE__MSG.html#o1">HandleType</a>    = HandleType;
00072     a-&gt;<a class="code" href="../../d9/d3/struct__CONSOLE__OPENCONSOLE__MSG.html#o2">DesiredAccess</a> = DesiredAccess;
00073     a-&gt;<a class="code" href="../../d9/d3/struct__CONSOLE__OPENCONSOLE__MSG.html#o3">InheritHandle</a> = InheritHandle;
00074     a-&gt;<a class="code" href="../../d9/d3/struct__CONSOLE__OPENCONSOLE__MSG.html#o4">ShareMode</a>= ShareMode;
00075     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00076                          NULL,
00077                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00078                                               ConsolepOpenConsole
00079                                             ),
00080                          <span class="keyword">sizeof</span>( *a )
00081                        );
00082     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue)) {
00083         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00084         <span class="keywordflow">return</span> (HANDLE) <a class="code" href="../../d5/d4/rxact_8c.html#a0">INVALID_HANDLE_VALUE</a>;
00085     }
00086     <span class="keywordflow">else</span> {
00087         <span class="keywordflow">return</span> a-&gt;<a class="code" href="../../d9/d3/struct__CONSOLE__OPENCONSOLE__MSG.html#o5">Handle</a>;
00088     }
00089 
00090 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="condll.h::ReadConsoleInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ReadConsoleInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nNumberOfCharsToRead</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfCharsRead</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpReserved</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExeNameLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>ExeName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00191">191</a> of file <a class="el" href="../../d0/d6/client_2stream_8c-source.html">client/stream.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00440">_CONSOLE_READCONSOLE_MSG::Buffer</a>, <a class="el" href="../../d0/d9/tcmpmem_8c-source.html#l00035">BUFFER_SIZE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00441">_CONSOLE_READCONSOLE_MSG::BufPtr</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00443">_CONSOLE_READCONSOLE_MSG::CaptureBufferSize</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00437">_CONSOLE_READCONSOLE_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a192">ConsolepReadConsole</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00446">_CONSOLE_READCONSOLE_MSG::ControlKeyState</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00445">_CONSOLE_READCONSOLE_MSG::CtrlWakeupMask</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00439">_CONSOLE_READCONSOLE_MSG::ExeNameLength</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00034">ExeNameLength</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00444">_CONSOLE_READCONSOLE_MSG::InitialNumBytes</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00438">_CONSOLE_READCONSOLE_MSG::InputHandle</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d7/d0/yield_8c-source.html#l00029">NtYieldExecution()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00442">_CONSOLE_READCONSOLE_MSG::NumBytes</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a78">PCONSOLE_READCONSOLE_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00447">_CONSOLE_READCONSOLE_MSG::Unicode</a>, and <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00349">ReadConsoleA()</a>, and <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00377">ReadConsoleW()</a>.
<p>
<pre class="fragment"><div>00202           :
00203 
00204     hConsoleInput - Supplies an open handle to <span class="stringliteral">"CONIN$"</span> open <span class="keywordflow">for</span> GENERIC_READ
00205         or <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> StdIn handle.
00206 
00207     lpBuffer - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of a buffer to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data read
00208         from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> console input.
00209 
00210     nNumberOfBytesToRead - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of bytes to read from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00211         input buffer.
00212 
00213     lpReserved - Ignore unless 4.0 application, in which <span class="keywordflow">case</span> <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> points
00214         to a CONSOLE_READCONSOLE_CONTROL data structure.  UNICODE <a class="code" href="../../d3/d0/imm32_8def.html#a1">only</a>.
00215         If !<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>, then call fails <span class="keywordflow">if</span> <span class="keyword">this</span> parameter <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> non-<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>
00216 
00217     <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> - <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> call from <a class="code" href="../../d9/d6/client_2stream_8c.html#a6">ReadConsoleW</a>, <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a> <span class="keywordflow">if</span> <a class="code" href="../../d9/d6/client_2stream_8c.html#a5">ReadConsoleA</a>
00218 
00219 
00220 Return Value:
00221 
00222     NON-<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of bytes actually read from <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer.
00223 
00224     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>/<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - The operation failed.
00225         Extended error status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available <span class="keyword">using</span> GetLastError.
00226 --*/
00227 
00228 {
00229     PCSR_CAPTURE_HEADER CaptureBuffer;
00230     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00231     <a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html">PCONSOLE_READCONSOLE_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.ReadConsole;
00232     BOOLEAN Dummy;
00233     PCONSOLE_READCONSOLE_CONTROL pInputControl;
00234     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00235 
00236     a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00237     a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o1">InputHandle</a> = hConsoleInput;
00238     a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o2">ExeNameLength</a> = <a class="code" href="../../d2/d1/client_2cmdline_8c.html#a6">ExeNameLength</a>;
00239     RtlCopyMemory(a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o3">Buffer</a>, ExeName, ExeNameLength);
00240     a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o10">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00241 
00242     <span class="comment">//</span>
00243     <span class="comment">// if ansi, make capture buffer large enough to hold translated</span>
00244     <span class="comment">// string.  this will make server side code much simpler.</span>
00245     <span class="comment">//</span>
00246 
00247     a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o6">CaptureBufferSize</a> = a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o5">NumBytes</a> = nNumberOfCharsToRead * <span class="keyword">sizeof</span>(WCHAR);
00248     <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o6">CaptureBufferSize</a> &gt; <a class="code" href="../../d9/d9/tcmpmem_8c.html#a0">BUFFER_SIZE</a>) {
00249         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00250                                                   a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o6">CaptureBufferSize</a>
00251                                                 );
00252         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00253             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00254             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00255         }
00256         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00257                                  NULL,
00258                                  a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o6">CaptureBufferSize</a>,
00259                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o4">BufPtr</a>
00260                                );
00261 
00262     }
00263     <span class="keywordflow">else</span> {
00264         a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o4">BufPtr</a> = a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o3">Buffer</a>;
00265         CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00266     }
00267 
00268 
00269     pInputControl = (PCONSOLE_READCONSOLE_CONTROL)lpReserved;
00270     a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o7">InitialNumBytes</a> = 0;
00271     a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o8">CtrlWakeupMask</a> = 0;
00272     a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o9">ControlKeyState</a> = 0;
00273     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
00274     <span class="keywordflow">try</span> {
00275         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> &amp;&amp;
00276             ARGUMENT_PRESENT(lpReserved) &amp;&amp;
00277             NtCurrentPeb()-&gt;ImageSubsystemMajorVersion &gt;= 4 &amp;&amp;
00278             pInputControl-&gt;nLength == <span class="keyword">sizeof</span>(*pInputControl)
00279            ) {
00280             <span class="keywordflow">if</span> ((pInputControl-&gt;nInitialChars &gt; nNumberOfCharsToRead)) {
00281                 <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_INVALID_PARAMETER;
00282             } <span class="keywordflow">else</span> {
00283                 a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o7">InitialNumBytes</a> = pInputControl-&gt;nInitialChars * <span class="keyword">sizeof</span>(WCHAR);
00284                 <span class="keywordflow">if</span> (pInputControl-&gt;nInitialChars != 0) {
00285                     RtlCopyMemory( a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o4">BufPtr</a>, lpBuffer, a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o7">InitialNumBytes</a> );
00286                 }
00287                 a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o8">CtrlWakeupMask</a> = pInputControl-&gt;dwCtrlWakeupMask;
00288             }
00289         } <span class="keywordflow">else</span> {
00290             pInputControl = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00291         }
00292     } except( EXCEPTION_EXECUTE_HANDLER ) {
00293         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = GetExceptionCode();
00294     }
00295 
00296     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status) &amp;&amp; pInputControl != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00297         <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00298             <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00299         }
00300         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(Status);
00301         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00302     }
00303 
00304     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00305                          CaptureBuffer,
00306                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00307                                               ConsolepReadConsole
00308                                             ),
00309                          <span class="keyword">sizeof</span>( *a )
00310                        );
00311     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00312         <span class="keywordflow">try</span> {
00313             *lpNumberOfCharsRead = a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o5">NumBytes</a>;
00314             <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>) {
00315                 *lpNumberOfCharsRead /= <span class="keyword">sizeof</span>(WCHAR);
00316                 <span class="keywordflow">if</span> (pInputControl != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00317                     pInputControl-&gt;dwControlKeyState = a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o9">ControlKeyState</a>;
00318                 }
00319             }
00320             RtlCopyMemory( lpBuffer, a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o4">BufPtr</a>, a-&gt;<a class="code" href="../../d3/d4/struct__CONSOLE__READCONSOLE__MSG.html#o5">NumBytes</a> );
00321         } except( EXCEPTION_EXECUTE_HANDLER ) {
00322             <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00323                 <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00324             }
00325             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00326             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00327         }
00328     }
00329     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00330         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00331     }
00332     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00333         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00334         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00335     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m.ReturnValue == STATUS_ALERTED) {
00336         <span class="comment">// ctrl-c or ctrl-break</span>
00337         <a class="code" href="../../d6/d1/yield_8c.html#a0">NtYieldExecution</a>();
00338         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_OPERATION_ABORTED);
00339     }
00340     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00341 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="condll.h::ReadConsoleOutputInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ReadConsoleOutputInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PCHAR_INFO&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PSMALL_RECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpReadRegion</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00585">585</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00249">_CONSOLE_READCONSOLEOUTPUT_MSG::BufPtr</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00248">_CONSOLE_READCONSOLEOUTPUT_MSG::Char</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00250">_CONSOLE_READCONSOLEOUTPUT_MSG::CharRegion</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00058">CONSOLE_RECT_SIZE_X</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00059">CONSOLE_RECT_SIZE_Y</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00246">_CONSOLE_READCONSOLEOUTPUT_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a166">ConsolepReadConsoleOutput</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l01551">CopyRectangle()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00247">_CONSOLE_READCONSOLEOUTPUT_MSG::OutputHandle</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00251">_CONSOLE_READCONSOLEOUTPUT_MSG::Unicode</a>, and <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00748">ReadConsoleOutputA()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00729">ReadConsoleOutputW()</a>.
<p>
<pre class="fragment"><div>00595           :
00596 
00597     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
00598         that is to be read.  The handle must have been created with
00599         GENERIC_READ access.
00600 
00601     lpBuffer - Supplies the address of a buffer to receive the data read
00602         from the screen buffer.  This pointer is treated as the origin of
00603         a two dimensional array of size dwBufferSize.
00604 
00605     dwBufferSize - size of lpBuffer
00606 
00607     dwBufferCoord - coordinates of upper left point in buffer to receive
00608         read data.
00609 
00610     lpReadRegion - Supplies on input the address of a structure indicating the
00611         rectangle within the screen buffer to read from.  The fields in
00612         the structure are column and row coordinates.  On output, the fields
00613         contain the actual region read.
00614 
00615 Return Value:
00616 
00617     TRUE - The operation was successful.
00618 
00619     FALSE/NULL - The operation failed. Extended error status is available
00620         using GetLastError.
00621 --*/
00622 
00623 {
00624     PCSR_CAPTURE_HEADER CaptureBuffer;
00625     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00626     <a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html">PCONSOLE_READCONSOLEOUTPUT_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.ReadConsoleOutput;
00627     ULONG NumChars;
00628     COORD SourceSize;
00629 
00630     a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00631     a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o1">OutputHandle</a> = hConsoleOutput;
00632     a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o5">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00633 
00634     <span class="comment">//</span>
00635     <span class="comment">// clip region to read based on caller's buffer size</span>
00636     <span class="comment">//</span>
00637 
00638     SourceSize.X = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)<a class="code" href="../../d6/d4/condll_8h.html#a7">CONSOLE_RECT_SIZE_X</a>(lpReadRegion);
00639     <span class="keywordflow">if</span> (SourceSize.X &gt; dwBufferSize.X-dwBufferCoord.X)
00640         SourceSize.X = dwBufferSize.X-dwBufferCoord.X;
00641     SourceSize.Y = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)<a class="code" href="../../d6/d4/condll_8h.html#a8">CONSOLE_RECT_SIZE_Y</a>(lpReadRegion);
00642     <span class="keywordflow">if</span> (SourceSize.Y &gt; dwBufferSize.Y-dwBufferCoord.Y)
00643         SourceSize.Y = dwBufferSize.Y-dwBufferCoord.Y;
00644 
00645     a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Left = lpReadRegion-&gt;Left;
00646     a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Right = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(lpReadRegion-&gt;Left + SourceSize.X - 1);
00647     a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Top  = lpReadRegion-&gt;Top;
00648     a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Bottom = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(lpReadRegion-&gt;Top + SourceSize.Y - 1);
00649 
00650     <span class="comment">//</span>
00651     <span class="comment">// for speed in the case where we're only reading one character, we have</span>
00652     <span class="comment">// a buffer in the msg we pass to the server. this means we don't have to</span>
00653     <span class="comment">// allocate a capture buffer.</span>
00654     <span class="comment">//</span>
00655 
00656     NumChars = SourceSize.X * SourceSize.Y;
00657     <span class="keywordflow">if</span> (NumChars &gt; 1) {
00658         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00659                                                   NumChars * <span class="keyword">sizeof</span>(CHAR_INFO)
00660                                                 );
00661         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00662             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00663             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00664         }
00665         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00666                                  NULL,
00667                                  NumChars * <span class="keyword">sizeof</span>(CHAR_INFO),
00668                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o3">BufPtr</a>
00669                                );
00670     }
00671     <span class="keywordflow">else</span> {
00672         CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00673         a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o3">BufPtr</a> = &amp;a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o2">Char</a>;
00674     }
00675     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00676                          CaptureBuffer,
00677                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00678                                               ConsolepReadConsoleOutput
00679                                             ),
00680                          <span class="keyword">sizeof</span>( *a )
00681                        );
00682     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00683         <span class="keywordflow">try</span> {
00684             SMALL_RECT SourceRect;
00685 
00686             SourceRect.Left = a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Left - lpReadRegion-&gt;Left;
00687             SourceRect.Top = a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Top - lpReadRegion-&gt;Top;
00688             SourceRect.Right = SourceRect.Left +
00689                     (a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Right - a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Left);
00690             SourceRect.Bottom =  SourceRect.Top +
00691                     (a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Bottom - a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Top);
00692             dwBufferCoord.X += SourceRect.Left;
00693             dwBufferCoord.Y += SourceRect.Top;
00694             <a class="code" href="../../d6/d2/output_8c.html#a51">CopyRectangle</a>(a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o3">BufPtr</a>,
00695                           SourceSize,
00696                           &amp;SourceRect,
00697                           lpBuffer,
00698                           dwBufferSize,
00699                           dwBufferCoord
00700                          );
00701         } except( EXCEPTION_EXECUTE_HANDLER ) {
00702             <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00703                 <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00704             }
00705             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00706             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00707         }
00708     }
00709     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00710         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00711     }
00712     *lpReadRegion = a-&gt;<a class="code" href="../../d4/d4/struct__CONSOLE__READCONSOLEOUTPUT__MSG.html#o4">CharRegion</a>;
00713     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(m.ReturnValue)) {
00714         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00715         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00716     }
00717     <span class="keywordflow">else</span> {
00718         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00719     }
00720 
00721 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="condll.h::ReadConsoleOutputString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ReadConsoleOutputString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwReadCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfElementsRead</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00974">974</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00280">_CONSOLE_READCONSOLEOUTPUTSTRING_MSG::BufPtr</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00275">_CONSOLE_READCONSOLEOUTPUTSTRING_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a168">ConsolepReadConsoleOutputString</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00281">_CONSOLE_READCONSOLEOUTPUTSTRING_MSG::NumRecords</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00276">_CONSOLE_READCONSOLEOUTPUTSTRING_MSG::OutputHandle</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00277">_CONSOLE_READCONSOLEOUTPUTSTRING_MSG::ReadCoord</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00279">_CONSOLE_READCONSOLEOUTPUTSTRING_MSG::String</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00278">_CONSOLE_READCONSOLEOUTPUTSTRING_MSG::StringType</a>, and <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01160">ReadConsoleOutputAttribute()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01089">ReadConsoleOutputCharacterA()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01138">ReadConsoleOutputCharacterW()</a>.
<p>
<pre class="fragment"><div>00986           :
00987 
00988     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
00989         that is to be read.  The handle must have been created with
00990         GENERIC_READ access.
00991 
00992     lpString - Supplies the address of a buffer to receive the character
00993         or attribute string read from the screen buffer.
00994 
00995     nLength - Size of lpCharacter buffer in elements.
00996 
00997     nSize - Size of element to read.
00998 
00999     fFlags - flag indicating what type of string to copy
01000 
01001     dwReadCoord - Screen buffer coordinates of string to read.
01002         read data.
01003 
01004     lpNumberOfElementsRead - Pointer to number of events read.
01005 
01006 Return Value:
01007 
01008     TRUE - The operation was successful.
01009 
01010     FALSE/NULL - The operation failed.
01011         Extended error status is available using GetLastError.
01012 
01013 --*/
01014 
01015 {
01016     PCSR_CAPTURE_HEADER CaptureBuffer;
01017     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
01018     <a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html">PCONSOLE_READCONSOLEOUTPUTSTRING_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.ReadConsoleOutputString;
01019     ULONG DataLength;
01020 
01021     a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
01022     a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o1">OutputHandle</a> = hConsoleOutput;
01023     a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o6">NumRecords</a> = nLength;
01024     a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o3">StringType</a> = fFlags;
01025     a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o2">ReadCoord</a> = dwReadCoord;
01026 
01027     DataLength = nLength*nSize;
01028 
01029     <span class="comment">//</span>
01030     <span class="comment">// for speed in the case where the string is small, we have a buffer</span>
01031     <span class="comment">// in the msg we pass to the server. this means we don't have to</span>
01032     <span class="comment">// allocate a capture buffer.</span>
01033     <span class="comment">//</span>
01034 
01035     <span class="keywordflow">if</span> (DataLength &gt; <span class="keyword">sizeof</span>(a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o4">String</a>)) {
01036         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
01037                                                   DataLength
01038                                                 );
01039         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01040             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
01041             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01042         }
01043         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
01044                                  NULL,
01045                                  DataLength,
01046                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o5">BufPtr</a>
01047                                );
01048 
01049     }
01050     <span class="keywordflow">else</span> {
01051         a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o5">BufPtr</a> = a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o4">String</a>;
01052         CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01053     }
01054     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
01055                          CaptureBuffer,
01056                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
01057                                               ConsolepReadConsoleOutputString
01058                                             ),
01059                          <span class="keyword">sizeof</span>( *a )
01060                        );
01061 
01062     <span class="keywordflow">try</span> {
01063        *lpNumberOfElementsRead = a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o6">NumRecords</a>;
01064         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
01065             RtlCopyMemory(lpString, a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o5">BufPtr</a>, a-&gt;<a class="code" href="../../d5/d4/struct__CONSOLE__READCONSOLEOUTPUTSTRING__MSG.html#o6">NumRecords</a> * nSize);
01066         }
01067         <span class="keywordflow">else</span> {
01068             <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
01069         }
01070     } except( EXCEPTION_EXECUTE_HANDLER ) {
01071         <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01072             <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
01073         }
01074         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
01075         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01076     }
01077     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01078         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
01079     }
01080     <span class="keywordflow">return</span> <a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(m.ReturnValue);
01081 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="condll.h::RegisterConsoleIMEInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY RegisterConsoleIMEInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HWND&nbsp;</td>
          <td class="mdname" nowrap> <em>hWndConsoleIME</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwConsoleIMEThreadId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DesktopLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN LPWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>Desktop</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>dwConsoleThreadId</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="condll.h::ScrollConsoleScreenBufferInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY ScrollConsoleScreenBufferInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST SMALL_RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpScrollRectangle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST SMALL_RECT *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpClipRectangle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwDestinationOrigin</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST CHAR_INFO *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpFill</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01036">1036</a> of file <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html">ntcon/client/getset.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00413">_CONSOLE_SCROLLSCREENBUFFER_MSG::Clip</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00412">_CONSOLE_SCROLLSCREENBUFFER_MSG::ClipRectangle</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00409">_CONSOLE_SCROLLSCREENBUFFER_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a188">ConsolepScrollScreenBuffer</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00414">_CONSOLE_SCROLLSCREENBUFFER_MSG::DestinationOrigin</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00415">_CONSOLE_SCROLLSCREENBUFFER_MSG::Fill</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00410">_CONSOLE_SCROLLSCREENBUFFER_MSG::OutputHandle</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00411">_CONSOLE_SCROLLSCREENBUFFER_MSG::ScrollRectangle</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00416">_CONSOLE_SCROLLSCREENBUFFER_MSG::Unicode</a>, and <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01115">ScrollConsoleScreenBufferA()</a>, and <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01133">ScrollConsoleScreenBufferW()</a>.
<p>
<pre class="fragment"><div>01047           :
01048 
01049     hConsoleOutput - Supplies an open handle to console output.
01050 
01051     lpScrollRectangle - Pointer to region within screen buffer to <a class="code" href="../../d7/d4/conexts_8c.html#a1">move</a>.
01052 
01053     lpClipRectangle -  Pointer to region within screen buffer that may be
01054         affected by <span class="keyword">this</span> scroll.  This pointer may be <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>.
01055 
01056     dwDestinationOrigin - Upper left corner of <span class="keyword">new</span> location of ScrollRectangle
01057         contents.
01058 
01059     lpFill - Pointer to structure containing <span class="keyword">new</span> contents of ScrollRectangle region.
01060 
01061 Return Value:
01062 
01063     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - The operation was successful.
01064 
01065     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>/<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - The operation failed. Extended error status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available
01066         <span class="keyword">using</span> GetLastError.
01067 
01068 --*/
01069 
01070 {
01071 
01072     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
01073     <a class="code" href="../../d8/d4/struct__CONSOLE__SCROLLSCREENBUFFER__MSG.html">PCONSOLE_SCROLLSCREENBUFFER_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.ScrollConsoleScreenBuffer;
01074 
01075     a-&gt;<a class="code" href="../../d8/d4/struct__CONSOLE__SCROLLSCREENBUFFER__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
01076     a-&gt;<a class="code" href="../../d8/d4/struct__CONSOLE__SCROLLSCREENBUFFER__MSG.html#o1">OutputHandle</a> = hConsoleOutput;
01077     a-&gt;<a class="code" href="../../d8/d4/struct__CONSOLE__SCROLLSCREENBUFFER__MSG.html#o7">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
01078     <span class="keywordflow">try</span> {
01079         a-&gt;<a class="code" href="../../d8/d4/struct__CONSOLE__SCROLLSCREENBUFFER__MSG.html#o2">ScrollRectangle</a> = *lpScrollRectangle;
01080         <span class="keywordflow">if</span> (lpClipRectangle != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01081             a-&gt;<a class="code" href="../../d8/d4/struct__CONSOLE__SCROLLSCREENBUFFER__MSG.html#o4">Clip</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01082             a-&gt;<a class="code" href="../../d8/d4/struct__CONSOLE__SCROLLSCREENBUFFER__MSG.html#o3">ClipRectangle</a> = *lpClipRectangle;
01083         }
01084         <span class="keywordflow">else</span> {
01085             a-&gt;<a class="code" href="../../d8/d4/struct__CONSOLE__SCROLLSCREENBUFFER__MSG.html#o4">Clip</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01086         }
01087         a-&gt;<a class="code" href="../../d8/d4/struct__CONSOLE__SCROLLSCREENBUFFER__MSG.html#o6">Fill</a> = *lpFill;
01088         a-&gt;<a class="code" href="../../d8/d4/struct__CONSOLE__SCROLLSCREENBUFFER__MSG.html#o5">DestinationOrigin</a> = dwDestinationOrigin;
01089     } except( EXCEPTION_EXECUTE_HANDLER ) {
01090         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
01091         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01092     }
01093     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
01094                          NULL,
01095                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
01096                                               ConsolepScrollScreenBuffer
01097                                             ),
01098                          <span class="keyword">sizeof</span>( *a )
01099                        );
01100     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
01101         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01102     } <span class="keywordflow">else</span> {
01103         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a> (m.ReturnValue);
01104         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01105     }
01106 
01107 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="condll.h::SetConsoleNumberOfCommandsInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY SetConsoleNumberOfCommandsInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Number</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExeName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00798">798</a> of file <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html">client/cmdline.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00555">_CONSOLE_SETNUMBEROFCOMMANDS_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a222">ConsolepSetNumberOfCommands</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00558">_CONSOLE_SETNUMBEROFCOMMANDS_MSG::Exe</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00557">_CONSOLE_SETNUMBEROFCOMMANDS_MSG::ExeLength</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00094">GetExeName()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00556">_CONSOLE_SETNUMBEROFCOMMANDS_MSG::NumCommands</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a104">PCONSOLE_SETNUMBEROFCOMMANDS_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00559">_CONSOLE_SETNUMBEROFCOMMANDS_MSG::Unicode</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00560">_CONSOLE_SETNUMBEROFCOMMANDS_MSG::UnicodeExe</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00860">SetConsoleNumberOfCommandsA()</a>, and <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l00848">SetConsoleNumberOfCommandsW()</a>.
<p>
<pre class="fragment"><div>00803 {
00804     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00805     <a class="code" href="../../d2/d6/struct__CONSOLE__SETNUMBEROFCOMMANDS__MSG.html">PCONSOLE_SETNUMBEROFCOMMANDS_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.SetConsoleNumberOfCommandsW;
00806     PCSR_CAPTURE_HEADER CaptureBuffer;
00807 
00808     a-&gt;<a class="code" href="../../d2/d6/struct__CONSOLE__SETNUMBEROFCOMMANDS__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00809     a-&gt;<a class="code" href="../../d2/d6/struct__CONSOLE__SETNUMBEROFCOMMANDS__MSG.html#o1">NumCommands</a> = Number;
00810     a-&gt;<a class="code" href="../../d2/d6/struct__CONSOLE__SETNUMBEROFCOMMANDS__MSG.html#o2">ExeLength</a> = <a class="code" href="../../d2/d1/client_2cmdline_8c.html#a11">GetExeName</a>(&amp;ExeName,Unicode,&amp;a-&gt;<a class="code" href="../../d2/d6/struct__CONSOLE__SETNUMBEROFCOMMANDS__MSG.html#o5">UnicodeExe</a>);
00811     a-&gt;<a class="code" href="../../d2/d6/struct__CONSOLE__SETNUMBEROFCOMMANDS__MSG.html#o4">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00812     CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00813                                               a-&gt;<a class="code" href="../../d2/d6/struct__CONSOLE__SETNUMBEROFCOMMANDS__MSG.html#o2">ExeLength</a>
00814                                             );
00815     <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00816         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00817         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00818     }
00819 
00820     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00821                              (PCHAR) ExeName,
00822                              a-&gt;<a class="code" href="../../d2/d6/struct__CONSOLE__SETNUMBEROFCOMMANDS__MSG.html#o2">ExeLength</a>,
00823                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d2/d6/struct__CONSOLE__SETNUMBEROFCOMMANDS__MSG.html#o3">Exe</a>
00824                            );
00825 
00826     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00827                          CaptureBuffer,
00828                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00829                                               ConsolepSetNumberOfCommands
00830                                             ),
00831                          <span class="keyword">sizeof</span>( *a )
00832                        );
00833     <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00834     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00835         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00836     } <span class="keywordflow">else</span> {
00837         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00838         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00839     }
00840 
00841 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="condll.h::SetConsoleOutputCPInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS APIENTRY SetConsoleOutputCPInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN UINT&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>wCodePageID</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01469">1469</a> of file <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html">ntcon/client/getset.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00719">_CONSOLE_SETCP_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a227">ConsolepSetCP</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00721">_CONSOLE_SETCP_MSG::Output</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00720">_CONSOLE_SETCP_MSG::wCodePageID</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01501">SetConsoleOutputCP()</a>.
<p>
<pre class="fragment"><div>01472 {
01473     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
01474     <a class="code" href="../../d1/d5/struct__CONSOLE__SETCP__MSG.html">PCONSOLE_SETCP_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.SetConsoleCP;
01475 
01476     a-&gt;<a class="code" href="../../d1/d5/struct__CONSOLE__SETCP__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
01477     a-&gt;<a class="code" href="../../d1/d5/struct__CONSOLE__SETCP__MSG.html#o2">Output</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01478     a-&gt;<a class="code" href="../../d1/d5/struct__CONSOLE__SETCP__MSG.html#o1">wCodePageID</a> = wCodePageID;
01479 <span class="preprocessor">#if defined(FE_SB)</span>
01480 <span class="preprocessor"></span>    a-&gt;hEvent = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01481 <span class="preprocessor">#endif</span>
01482 <span class="preprocessor"></span>
01483     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
01484                          NULL,
01485                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
01486                                               ConsolepSetCP
01487                                             ),
01488                          <span class="keyword">sizeof</span>( *a )
01489                        );
01490    
01491     <span class="keywordflow">return</span> m.ReturnValue;
01492 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="condll.h::SetConsolePaletteInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY SetConsolePaletteInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN HPALETTE&nbsp;</td>
          <td class="mdname" nowrap> <em>hPalette</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>dwUsage</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00191">191</a> of file <a class="el" href="../../d7/d3/client_2private_8c-source.html">client/private.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00664">_CONSOLE_SETPALETTE_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a209">ConsolepSetPalette</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00667">_CONSOLE_SETPALETTE_MSG::dwUsage</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00666">_CONSOLE_SETPALETTE_MSG::hPalette</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00665">_CONSOLE_SETPALETTE_MSG::OutputHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a132">PCONSOLE_SETPALETTE_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>.
<p>
Referenced by <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00737">SetConsolePalette()</a>.
<p>
<pre class="fragment"><div>00196 {
00197 
00198     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00199     <a class="code" href="../../d3/d6/struct__CONSOLE__SETPALETTE__MSG.html">PCONSOLE_SETPALETTE_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.SetConsolePalette;
00200     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00201 
00202     a-&gt;<a class="code" href="../../d3/d6/struct__CONSOLE__SETPALETTE__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00203     a-&gt;<a class="code" href="../../d3/d6/struct__CONSOLE__SETPALETTE__MSG.html#o1">OutputHandle</a> = hConsoleOutput;
00204     a-&gt;<a class="code" href="../../d3/d6/struct__CONSOLE__SETPALETTE__MSG.html#o2">hPalette</a> = hPalette;
00205     a-&gt;<a class="code" href="../../d3/d6/struct__CONSOLE__SETPALETTE__MSG.html#o3">dwUsage</a> = dwUsage;
00206     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00207                          NULL,
00208                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00209                                               ConsolepSetPalette
00210                                             ),
00211                          <span class="keyword">sizeof</span>( *a )
00212                        );
00213     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue)) {
00214         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00215         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00216     }
00217     <span class="keywordflow">else</span> {
00218         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00219     }
00220 
00221 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="condll.h::SetConsoleTitleInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY SetConsoleTitleInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN CONST VOID *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpConsoleTitle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>TitleLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01170">1170</a> of file <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html">client/cmdline.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00619">_CONSOLE_SETTITLE_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a202">ConsolepSetTitle</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a120">PCONSOLE_SETTITLE_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00621">_CONSOLE_SETTITLE_MSG::Title</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00620">_CONSOLE_SETTITLE_MSG::TitleLength</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00622">_CONSOLE_SETTITLE_MSG::Unicode</a>.
<p>
Referenced by <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01220">SetConsoleTitleA()</a>, and <a class="el" href="../../d3/d0/client_2cmdline_8c-source.html#l01238">SetConsoleTitleW()</a>.
<p>
<pre class="fragment"><div>01175 {
01176     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
01177     <a class="code" href="../../d6/d6/struct__CONSOLE__SETTITLE__MSG.html">PCONSOLE_SETTITLE_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.SetConsoleTitle;
01178     PCSR_CAPTURE_HEADER CaptureBuffer;
01179 
01180     a-&gt;<a class="code" href="../../d6/d6/struct__CONSOLE__SETTITLE__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
01181     a-&gt;<a class="code" href="../../d6/d6/struct__CONSOLE__SETTITLE__MSG.html#o1">TitleLength</a> = TitleLength;
01182     a-&gt;<a class="code" href="../../d6/d6/struct__CONSOLE__SETTITLE__MSG.html#o3">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
01183     CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
01184                                               a-&gt;<a class="code" href="../../d6/d6/struct__CONSOLE__SETTITLE__MSG.html#o1">TitleLength</a>
01185                                             );
01186     <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01187         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01188     }
01189     <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
01190                              (PCHAR) lpConsoleTitle,
01191                              a-&gt;<a class="code" href="../../d6/d6/struct__CONSOLE__SETTITLE__MSG.html#o1">TitleLength</a>,
01192                              (PVOID *) &amp;a-&gt;<a class="code" href="../../d6/d6/struct__CONSOLE__SETTITLE__MSG.html#o2">Title</a>
01193                            );
01194     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
01195                          CaptureBuffer,
01196                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
01197                                               ConsolepSetTitle
01198                                             ),
01199                          <span class="keyword">sizeof</span>( *a )
01200                        );
01201 
01202     <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
01203 
01204     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
01205         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01206     }
01207     <span class="keywordflow">else</span> {
01208         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a> (m.ReturnValue);
01209         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01210     }
01211 
01212 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="condll.h::SetLastConsoleEventActiveInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID APIENTRY SetLastConsoleEventActiveInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00250">250</a> of file <a class="el" href="../../d0/d0/ctrlc_8c-source.html">ctrlc.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00750">_CONSOLE_NOTIFYLASTCLOSE_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a230">ConsolepNotifyLastClose</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>.
<p>
Referenced by <a class="el" href="../../d0/d0/ctrlc_8c-source.html#l00288">SetLastConsoleEventActive()</a>.
<p>
<pre class="fragment"><div>00254                    :
00255 
00256     Sends a <a class="code" href="../../d5/d5/conmsg_8h.html#a236a230">ConsolepNotifyLastClose</a> command to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> server.
00257 
00258 Arguments:
00259 
00260     none.
00261 
00262 Return Value:
00263 
00264     None.
00265 
00266 --*/
00267 
00268 {
00269     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00270     <a class="code" href="../../d8/d3/struct__CONSOLE__NOTIFYLASTCLOSE__MSG.html">PCONSOLE_NOTIFYLASTCLOSE_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.SetLastConsoleEventActive;
00271 
00272     a-&gt;<a class="code" href="../../d8/d3/struct__CONSOLE__NOTIFYLASTCLOSE__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00273     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00274                          NULL,
00275                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00276                                               ConsolepNotifyLastClose
00277                                             ),
00278                          <span class="keyword">sizeof</span>( *a )
00279                        );
00280 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="condll.h::SetTEBLangID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID SetTEBLangID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW6432) 
<p>

<p>
Definition at line <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00346">346</a> of file <a class="el" href="../../d9/d8/dllinit_8c-source.html">dllinit.c</a>.
<p>
References <a class="el" href="../../d1/d4/srvinit_8c-source.html#l02643">GetConsoleLangId()</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00803">AllocConsole()</a>, <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00470">ConDllInitialize()</a>, and <a class="el" href="../../d9/d3/ntcon_2client_2getset_8c-source.html#l01501">SetConsoleOutputCP()</a>.
<p>
<pre class="fragment"><div>00359 {
00360     LANGID LangId;
00361 
00362     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5/srvinit_8c.html#a45">GetConsoleLangId</a>(&amp;LangId)) {
00363         SetThreadLocale( MAKELCID(LangId, SORT_DEFAULT) );
00364     }
00365 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="condll.h::UnregisterConsoleIMEInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY UnregisterConsoleIMEInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>dwConsoleIMEThtreadId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="condll.h::WriteConsoleInputInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY WriteConsoleInputInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST INPUT_RECORD *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfEventsWritten</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Append</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00335">335</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00242">_CONSOLE_WRITECONSOLEINPUT_MSG::Append</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00239">_CONSOLE_WRITECONSOLEINPUT_MSG::BufPtr</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00236">_CONSOLE_WRITECONSOLEINPUT_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a165">ConsolepWriteConsoleInput</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00223">INPUT_RECORD_BUFFER_SIZE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00237">_CONSOLE_WRITECONSOLEINPUT_MSG::InputHandle</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00240">_CONSOLE_WRITECONSOLEINPUT_MSG::NumRecords</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00238">_CONSOLE_WRITECONSOLEINPUT_MSG::Record</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00241">_CONSOLE_WRITECONSOLEINPUT_MSG::Unicode</a>, and <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00444">WriteConsoleInputA()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00803">WriteConsoleInputVDMA()</a>, <a class="el" href="../../d7/d3/client_2private_8c-source.html#l00815">WriteConsoleInputVDMW()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00456">WriteConsoleInputW()</a>.
<p>
<pre class="fragment"><div>00345           :
00346 
00347     hConsoleInput - Supplies an open handle to CONIN$ that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be
00348         written.  The handle must have been created with GENERIC_WRITE access.
00349 
00350     lpBuffer - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of a buffer containing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input records
00351         to write to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input buffer.
00352 
00353     nLength - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length of lpBuffer in INPUT_RECORDs.
00354 
00355     lpNumberOfEventsWritten - Pointer to number of events written.
00356 
00357     <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a> - <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> characters are unicode
00358 
00359     Append - <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> <span class="keywordflow">if</span> append to end of input stream.  <span class="keywordflow">if</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>, write to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00360     beginning of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> input stream (used by VDM).
00361 
00362 Return Value:
00363 
00364     <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> - The operation was successful.
00365 
00366     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>/<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - The operation failed.
00367         Extended error status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available <span class="keyword">using</span> GetLastError.
00368 
00369 --*/
00370 
00371 {
00372     PCSR_CAPTURE_HEADER CaptureBuffer;
00373     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00374     <a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html">PCONSOLE_WRITECONSOLEINPUT_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.WriteConsoleInput;
00375 
00376     a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00377     a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o1">InputHandle</a> = hConsoleInput;
00378     a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o4">NumRecords</a> = nLength;
00379     a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o5">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00380     a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o6">Append</a> = Append;
00381 
00382     <span class="comment">//</span>
00383     <span class="comment">// for speed in the case where we're only writing a few records, we have</span>
00384     <span class="comment">// a buffer in the msg we pass to the server. this means we don't have to</span>
00385     <span class="comment">// allocate a capture buffer.</span>
00386     <span class="comment">//</span>
00387 
00388     <span class="keywordflow">if</span> (nLength &gt; <a class="code" href="../../d5/d5/conmsg_8h.html#a7">INPUT_RECORD_BUFFER_SIZE</a>) {
00389         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00390                                                   nLength * <span class="keyword">sizeof</span>(INPUT_RECORD)
00391                                                 );
00392         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00393             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00394             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00395         }
00396         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00397                                  (PCHAR) lpBuffer,
00398                                  nLength * <span class="keyword">sizeof</span>(INPUT_RECORD),
00399                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o3">BufPtr</a>
00400                                );
00401 
00402     } <span class="keywordflow">else</span> {
00403         a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o3">BufPtr</a> = a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o2">Record</a>;
00404         CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00405         <span class="keywordflow">try</span> {
00406             RtlCopyMemory(a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o3">BufPtr</a>, lpBuffer, nLength * <span class="keyword">sizeof</span>(INPUT_RECORD));
00407         } except( EXCEPTION_EXECUTE_HANDLER ) {
00408             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00409             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00410         }
00411     }
00412     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00413                          CaptureBuffer,
00414                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00415                                               ConsolepWriteConsoleInput
00416                                             ),
00417                          <span class="keyword">sizeof</span>( *a )
00418                        );
00419     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00420         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00421     }
00422     <span class="keywordflow">try</span> {
00423         *lpNumberOfEventsWritten = a-&gt;<a class="code" href="../../d5/d7/struct__CONSOLE__WRITECONSOLEINPUT__MSG.html#o4">NumRecords</a>;
00424     } except( EXCEPTION_EXECUTE_HANDLER ) {
00425         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00426         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00427     }
00428     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(m.ReturnValue)) {
00429         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00430         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00431     }
00432     <span class="keywordflow">else</span> {
00433         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00434     }
00435 
00436 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="condll.h::WriteConsoleInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY WriteConsoleInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST VOID *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nNumberOfCharsToWrite</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfCharsWritten</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00408">408</a> of file <a class="el" href="../../d0/d6/client_2stream_8c-source.html">client/stream.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00453">_CONSOLE_WRITECONSOLE_MSG::Buffer</a>, <a class="el" href="../../d0/d9/tcmpmem_8c-source.html#l00035">BUFFER_SIZE</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00457">_CONSOLE_WRITECONSOLE_MSG::BufferInMessage</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00454">_CONSOLE_WRITECONSOLE_MSG::BufPtr</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00451">_CONSOLE_WRITECONSOLE_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a193">ConsolepWriteConsole</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00455">_CONSOLE_WRITECONSOLE_MSG::NumBytes</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00452">_CONSOLE_WRITECONSOLE_MSG::OutputHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a80">PCONSOLE_WRITECONSOLE_MSG</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00458">_CONSOLE_WRITECONSOLE_MSG::Unicode</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00511">WriteConsoleA()</a>, and <a class="el" href="../../d0/d6/client_2stream_8c-source.html#l00530">WriteConsoleW()</a>.
<p>
<pre class="fragment"><div>00417           :
00418 
00419     hFile - Supplies an open handle to to <span class="stringliteral">"CONOUT$"</span> open <span class="keywordflow">for</span> GENERIC_WRITE
00420         or <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> StdOut or StdErr handle.
00421 
00422     lpBuffer - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be written to
00423         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> console output.
00424 
00425     nNumberOfBytesToWrite - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of bytes to write to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00426         console output.
00427 
00428 Return Value:
00429 
00430     NON-<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - Returns <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of bytes actually written to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device.
00431 
00432     <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>/<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> - The operation failed.
00433         Extended error status <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> available <span class="keyword">using</span> GetLastError.
00434 --*/
00435 
00436 {
00437 
00438     PCSR_CAPTURE_HEADER CaptureBuffer;
00439     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00440     <a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html">PCONSOLE_WRITECONSOLE_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.WriteConsole;
00441 
00442     a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00443     a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o1">OutputHandle</a> = hConsoleOutput;
00444 
00445     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>) {
00446         a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o4">NumBytes</a> = nNumberOfCharsToWrite * <span class="keyword">sizeof</span>(WCHAR);
00447     } <span class="keywordflow">else</span> {
00448         a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o4">NumBytes</a> = nNumberOfCharsToWrite;
00449     }
00450 
00451     a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o7">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00452     <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o4">NumBytes</a> &gt; <a class="code" href="../../d9/d9/tcmpmem_8c.html#a0">BUFFER_SIZE</a>) {
00453         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00454                                                   a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o4">NumBytes</a>
00455                                                 );
00456         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00457             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00458             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00459         }
00460         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00461                                  (PCHAR) lpBuffer,
00462                                  a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o4">NumBytes</a>,
00463                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o3">BufPtr</a>
00464                                );
00465         a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o6">BufferInMessage</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00466     }
00467     <span class="keywordflow">else</span> {
00468         a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o3">BufPtr</a> = a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o2">Buffer</a>;
00469         <span class="keywordflow">try</span> {
00470             RtlCopyMemory( a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o3">BufPtr</a>, lpBuffer, a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o4">NumBytes</a>);
00471         } except( EXCEPTION_EXECUTE_HANDLER ) {
00472             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00473             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00474         }
00475         CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00476         a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o6">BufferInMessage</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00477     }
00478     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00479                          CaptureBuffer,
00480                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00481                                               ConsolepWriteConsole
00482                                             ),
00483                          <span class="keyword">sizeof</span>( *a )
00484                        );
00485     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00486         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00487     }
00488     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( m.ReturnValue )) {
00489         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00490         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00491     }
00492     <span class="keywordflow">try</span> {
00493        *lpNumberOfCharsWritten = a-&gt;<a class="code" href="../../d4/d7/struct__CONSOLE__WRITECONSOLE__MSG.html#o4">NumBytes</a>;
00494        <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>) {
00495            *lpNumberOfCharsWritten /= <span class="keyword">sizeof</span>(WCHAR);
00496        }
00497     } except( EXCEPTION_EXECUTE_HANDLER ) {
00498         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00499         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00500     }
00501     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00502 
00503 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="condll.h::WriteConsoleOutputInternal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY WriteConsoleOutputInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST CHAR_INFO *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwBufferCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PSMALL_RECT&nbsp;</td>
          <td class="mdname" nowrap> <em>lpWriteRegion</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Unicode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00771">771</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00258">_CONSOLE_WRITECONSOLEOUTPUT_MSG::BufPtr</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00257">_CONSOLE_WRITECONSOLEOUTPUT_MSG::Char</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00259">_CONSOLE_WRITECONSOLEOUTPUT_MSG::CharRegion</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00058">CONSOLE_RECT_SIZE_X</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00059">CONSOLE_RECT_SIZE_Y</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00255">_CONSOLE_WRITECONSOLEOUTPUT_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a167">ConsolepWriteConsoleOutput</a>, <a class="el" href="../../d7/d1/output_8c-source.html#l01551">CopyRectangle()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00256">_CONSOLE_WRITECONSOLEOUTPUT_MSG::OutputHandle</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00261">_CONSOLE_WRITECONSOLEOUTPUT_MSG::ReadVM</a>, <a class="el" href="../../d4/d6/config_2utils_2regutil_8c-source.html#l00022">RtlAllocateHeap</a>, <a class="el" href="../../d4/d6/config_2utils_2regutil_8c-source.html#l00023">RtlFreeHeap</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00062">SHORT</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00260">_CONSOLE_WRITECONSOLEOUTPUT_MSG::Unicode</a>, and <a class="el" href="../../d3/d9/nt6_2user32_8def-source.html#l00844">Unicode</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00951">WriteConsoleOutputA()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l00932">WriteConsoleOutputW()</a>.
<p>
<pre class="fragment"><div>00781           :
00782 
00783     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
00784         that is to be written.  The handle must have been created with
00785         GENERIC_WRITE access.
00786 
00787     lpBuffer - Supplies the address of a buffer containing the data to write
00788         to the screen buffer.  This buffer is treated as a two dimensional
00789         array.
00790 
00791     dwBufferSize - size of lpBuffer
00792 
00793     dwBufferCoord - coordinates of upper left point in buffer to write data
00794         from.
00795 
00796     lpWriteRegion - Supplies on input the address of a structure indicating the
00797         rectangle within the screen buffer to write to.  The fields in
00798         the structure are column and row coordinates.  On output, the fields
00799         contain the actual region written.
00800 
00801 Return Value:
00802 
00803     TRUE - The operation was successful.
00804 
00805     FALSE/NULL - The operation failed. Extended error status is available
00806         using GetLastError.
00807 --*/
00808 
00809 {
00810 
00811     PCSR_CAPTURE_HEADER CaptureBuffer;
00812     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
00813     <a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html">PCONSOLE_WRITECONSOLEOUTPUT_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.WriteConsoleOutput;
00814     ULONG NumChars;
00815     COORD SourceSize;
00816     COORD TargetPoint;
00817 
00818     a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
00819     a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o1">OutputHandle</a> = hConsoleOutput;
00820     a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o5">Unicode</a> = <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a96">Unicode</a>;
00821 
00822     <span class="comment">//</span>
00823     <span class="comment">// clip region to write based on caller's buffer size</span>
00824     <span class="comment">//</span>
00825 
00826     SourceSize.X = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)<a class="code" href="../../d6/d4/condll_8h.html#a7">CONSOLE_RECT_SIZE_X</a>(lpWriteRegion);
00827     <span class="keywordflow">if</span> (SourceSize.X &gt; dwBufferSize.X-dwBufferCoord.X)
00828         SourceSize.X = dwBufferSize.X-dwBufferCoord.X;
00829     SourceSize.Y = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)<a class="code" href="../../d6/d4/condll_8h.html#a8">CONSOLE_RECT_SIZE_Y</a>(lpWriteRegion);
00830     <span class="keywordflow">if</span> (SourceSize.Y &gt; dwBufferSize.Y-dwBufferCoord.Y)
00831         SourceSize.Y = dwBufferSize.Y-dwBufferCoord.Y;
00832 
00833     <span class="keywordflow">if</span> (SourceSize.X &lt;= 0 ||
00834         SourceSize.Y &lt;= 0) {
00835         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_PARAMETER);
00836         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00837     }
00838 
00839     a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Left = lpWriteRegion-&gt;Left;
00840     a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Right = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(lpWriteRegion-&gt;Left + SourceSize.X - 1);
00841     a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Top  = lpWriteRegion-&gt;Top;
00842     a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o4">CharRegion</a>.Bottom = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(lpWriteRegion-&gt;Top + SourceSize.Y - 1);
00843 
00844     <span class="comment">//</span>
00845     <span class="comment">// for speed in the case where we're only writing one character, we have</span>
00846     <span class="comment">// a buffer in the msg we pass to the server. this means we don't have to</span>
00847     <span class="comment">// allocate a capture buffer.</span>
00848     <span class="comment">//</span>
00849 
00850     NumChars = SourceSize.X * SourceSize.Y;
00851     <span class="keywordflow">if</span> (NumChars &gt; 1) {
00852         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
00853                                                   NumChars * <span class="keyword">sizeof</span>(CHAR_INFO)
00854                                                 );
00855         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00856             a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o6">ReadVM</a>=<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00857             a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o3">BufPtr</a> = <a class="code" href="../../d3/d7/config_2utils_2regutil_8c.html#a0">RtlAllocateHeap</a>( RtlProcessHeap(), 0, NumChars * <span class="keyword">sizeof</span>(CHAR_INFO));
00858             <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o3">BufPtr</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00859                 <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
00860                 <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00861             }
00862         } <span class="keywordflow">else</span> {
00863             a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o6">ReadVM</a>=<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00864             <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
00865                                      NULL,
00866                                      NumChars * <span class="keyword">sizeof</span>(CHAR_INFO),
00867                                      (PVOID *) &amp;a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o3">BufPtr</a>
00868                                    );
00869         }
00870     }
00871     <span class="keywordflow">else</span> {
00872         a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o6">ReadVM</a>=<a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00873         CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00874         a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o3">BufPtr</a> = &amp;a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o2">Char</a>;
00875     }
00876     <span class="keywordflow">try</span> {
00877         SMALL_RECT SourceRect;
00878 
00879         SourceRect.Left = dwBufferCoord.X;
00880         SourceRect.Top = dwBufferCoord.Y;
00881         SourceRect.Right = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(dwBufferCoord.X+SourceSize.X-1);
00882         SourceRect.Bottom = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a13">SHORT</a>)(dwBufferCoord.Y+SourceSize.Y-1);
00883         TargetPoint.X = 0;
00884         TargetPoint.Y = 0;
00885         <a class="code" href="../../d6/d2/output_8c.html#a51">CopyRectangle</a>(lpBuffer,
00886                       dwBufferSize,
00887                       &amp;SourceRect,
00888                       a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o3">BufPtr</a>,
00889                       SourceSize,
00890                       TargetPoint
00891                      );
00892     } except( EXCEPTION_EXECUTE_HANDLER ) {
00893         <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00894             <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00895         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o6">ReadVM</a>) {
00896             <span class="comment">// a-&gt;BufPtr was allocated with RtlAllocateHeap.</span>
00897             <a class="code" href="../../d3/d7/config_2utils_2regutil_8c.html#a1">RtlFreeHeap</a>( RtlProcessHeap(), 0, a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o3">BufPtr</a>);  
00898         }
00899         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
00900         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00901     }
00902     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
00903                          CaptureBuffer,
00904                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
00905                                               ConsolepWriteConsoleOutput
00906                                             ),
00907                          <span class="keyword">sizeof</span>( *a )
00908                        );
00909     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00910         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
00911     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o6">ReadVM</a>) {
00912         <span class="comment">// a-&gt;BufPtr was allocated with RtlAllocateHeap.</span>
00913         <a class="code" href="../../d3/d7/config_2utils_2regutil_8c.html#a1">RtlFreeHeap</a>(RtlProcessHeap(),0,a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o3">BufPtr</a>);       
00914     }
00915     *lpWriteRegion = a-&gt;<a class="code" href="../../d6/d7/struct__CONSOLE__WRITECONSOLEOUTPUT__MSG.html#o4">CharRegion</a>;
00916     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(m.ReturnValue)) {
00917         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
00918         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00919     }
00920     <span class="keywordflow">else</span> {
00921         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00922     }
00923 
00924 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="condll.h::WriteConsoleOutputString" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL APIENTRY WriteConsoleOutputString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>hConsoleOutput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST VOID *&nbsp;</td>
          <td class="mdname" nowrap> <em>lpString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN COORD&nbsp;</td>
          <td class="mdname" nowrap> <em>dwWriteCoord</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT LPDWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>lpNumberOfElementsWritten</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
defined(BUILD_WOW64) 
<p>

<p>
Definition at line <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01212">1212</a> of file <a class="el" href="../../d4/d5/iostubs_8c-source.html">iostubs.c</a>.
<p>
References <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00290">_CONSOLE_WRITECONSOLEOUTPUTSTRING_MSG::BufPtr</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00285">_CONSOLE_WRITECONSOLEOUTPUTSTRING_MSG::ConsoleHandle</a>, <a class="el" href="../../d5/d5/conmsg_8h.html#a236a169">ConsolepWriteConsoleOutputString</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00088">CsrAllocateCaptureBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00122">CsrCaptureMessageBuffer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00075">CsrClientCallServer()</a>, <a class="el" href="../../d9/d8/wow64csr_8c-source.html#l00098">CsrFreeCaptureBuffer()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00055">EXCEPTION_EXECUTE_HANDLER</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00047">GET_CONSOLE_HANDLE</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00291">_CONSOLE_WRITECONSOLEOUTPUTSTRING_MSG::NumRecords</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00286">_CONSOLE_WRITECONSOLEOUTPUTSTRING_MSG::OutputHandle</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00048">SET_LAST_ERROR</a>, <a class="el" href="../../d7/d3/condll_8h-source.html#l00049">SET_LAST_NT_ERROR</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00289">_CONSOLE_WRITECONSOLEOUTPUTSTRING_MSG::String</a>, <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00288">_CONSOLE_WRITECONSOLEOUTPUTSTRING_MSG::StringType</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">_CONSOLE_API_MSG::u</a>, and <a class="el" href="../../d6/d4/conmsg_8h-source.html#l00287">_CONSOLE_WRITECONSOLEOUTPUTSTRING_MSG::WriteCoord</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01397">WriteConsoleOutputAttribute()</a>, <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01329">WriteConsoleOutputCharacterA()</a>, and <a class="el" href="../../d4/d5/iostubs_8c-source.html#l01376">WriteConsoleOutputCharacterW()</a>.
<p>
<pre class="fragment"><div>01224           :
01225 
01226     hConsoleOutput - Supplies an open handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> screen buffer (CONOUT$)
01227         that is to be written.  The handle must have been created with
01228         GENERIC_WRITE access.
01229 
01230     lpString - Supplies the address of a buffer containing the character
01231         or attribute string to write to the screen buffer.
01232 
01233     nLength - Length of string to write, in elements.
01234 
01235     nSize - Size of element to read.
01236 
01237     fFlags - flag indicating what type of string to copy
01238 
01239     dwWriteCoord - Screen buffer coordinates to write the string to.
01240 
01241     lpNumberOfElementsWritten - Pointer to number of elements written.
01242 
01243 Return Value:
01244 
01245     TRUE - The operation was successful.
01246 
01247     FALSE/NULL - The operation failed.
01248         Extended error status is available using GetLastError.
01249 
01250 --*/
01251 
01252 {
01253 
01254     PCSR_CAPTURE_HEADER CaptureBuffer;
01255     <a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html">CONSOLE_API_MSG</a> m;
01256     <a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html">PCONSOLE_WRITECONSOLEOUTPUTSTRING_MSG</a> a = &amp;m.<a class="code" href="../../d5/d9/struct__CONSOLE__API__MSG.html#o77">u</a>.WriteConsoleOutputString;
01257     ULONG DataLength;
01258 
01259     a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o0">ConsoleHandle</a> = <a class="code" href="../../d6/d4/condll_8h.html#a1">GET_CONSOLE_HANDLE</a>;
01260     a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o1">OutputHandle</a> = hConsoleOutput;
01261     a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o6">NumRecords</a> = nLength;
01262     a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o3">StringType</a> = fFlags;
01263     a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o2">WriteCoord</a> = dwWriteCoord;
01264 
01265     <span class="comment">//</span>
01266     <span class="comment">// for speed in the case where the string is small, we have a buffer</span>
01267     <span class="comment">// in the msg we pass to the server. this means we don't have to</span>
01268     <span class="comment">// allocate a capture buffer.</span>
01269     <span class="comment">//</span>
01270 
01271     DataLength = nLength*nSize;
01272     <span class="keywordflow">if</span> (DataLength &gt; <span class="keyword">sizeof</span>(a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o4">String</a>)) {
01273         CaptureBuffer = <a class="code" href="../../d8/d9/wow64csr_8c.html#a5">CsrAllocateCaptureBuffer</a>( 1,
01274                                                   DataLength
01275                                                 );
01276         <span class="keywordflow">if</span> (CaptureBuffer == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01277             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_NOT_ENOUGH_MEMORY);
01278             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01279         }
01280         <a class="code" href="../../d8/d9/wow64csr_8c.html#a8">CsrCaptureMessageBuffer</a>( CaptureBuffer,
01281                                  (PCHAR) lpString,
01282                                  DataLength,
01283                                  (PVOID *) &amp;a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o5">BufPtr</a>
01284                                );
01285     }
01286     <span class="keywordflow">else</span> {
01287         a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o5">BufPtr</a> = a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o4">String</a>;
01288         CaptureBuffer = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01289 
01290         <span class="keywordflow">try</span> {
01291             RtlCopyMemory(a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o5">BufPtr</a>, lpString, DataLength);
01292         } except( EXCEPTION_EXECUTE_HANDLER ) {
01293             <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
01294             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01295         }
01296     }
01297     <a class="code" href="../../d8/d9/wow64csr_8c.html#a4">CsrClientCallServer</a>( (PCSR_API_MSG)&amp;m,
01298                          CaptureBuffer,
01299                          CSR_MAKE_API_NUMBER( CONSRV_SERVERDLL_INDEX,
01300                                               ConsolepWriteConsoleOutputString
01301                                             ),
01302                          <span class="keyword">sizeof</span>( *a )
01303                        );
01304     <span class="keywordflow">if</span> (CaptureBuffer != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01305         <a class="code" href="../../d8/d9/wow64csr_8c.html#a6">CsrFreeCaptureBuffer</a>( CaptureBuffer );
01306     }
01307     <span class="keywordflow">try</span> {
01308         *lpNumberOfElementsWritten = a-&gt;<a class="code" href="../../d7/d7/struct__CONSOLE__WRITECONSOLEOUTPUTSTRING__MSG.html#o6">NumRecords</a>;
01309     } except( EXCEPTION_EXECUTE_HANDLER ) {
01310         <a class="code" href="../../d6/d4/condll_8h.html#a2">SET_LAST_ERROR</a>(ERROR_INVALID_ACCESS);
01311         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01312     }
01313     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(m.ReturnValue)) {
01314         <a class="code" href="../../d6/d4/condll_8h.html#a3">SET_LAST_NT_ERROR</a>(m.ReturnValue);
01315         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01316     }
01317     <span class="keywordflow">else</span> {
01318         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01319     }
01320 
01321 }

</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a11" doxytag="condll.h::DllLock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CRITICAL_SECTION <a class="el" href="../../d6/d4/condll_8h.html#a11">DllLock</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d3/condll_8h-source.html#l00067">67</a> of file <a class="el" href="../../d7/d3/condll_8h-source.html">condll.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d8/dllinit_8c-source.html#l00470">ConDllInitialize()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:43:13 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

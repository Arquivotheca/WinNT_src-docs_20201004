<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: pnp.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>pnp.h File Reference</h1>
<p>
<a href="../../d7/d8/pnp_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d8/d6/struct__PNP__BUS__INFORMATION.html">_PNP_BUS_INFORMATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d9/struct__LEGACY__BUS__INFORMATION.html">_LEGACY_BUS_INFORMATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d5/struct__BUS__INTERFACE__STANDARD.html">_BUS_INTERFACE_STANDARD</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d5/struct__ACPI__INTERFACE__STANDARD.html">_ACPI_INTERFACE_STANDARD</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/structACPI__REGS__INTERFACE__STANDARD.html">ACPI_REGS_INTERFACE_STANDARD</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d6/structROUTING__TOKEN.html">ROUTING_TOKEN</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d5/d3/struct__INT__ROUTE__INTERFACE__STANDARD.html">_INT_ROUTE_INTERFACE_STANDARD</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/struct__IO__ASSIGNED__RESOURCES.html">_IO_ASSIGNED_RESOURCES</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d7/d7/struct__ARBITER__CONFLICT__INFO.html">_ARBITER_CONFLICT_INFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d8/struct__ARBITER__PARAMETERS.html">_ARBITER_PARAMETERS</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d8/struct__ARBITER__LIST__ENTRY.html">_ARBITER_LIST_ENTRY</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d7/struct__ARBITER__INTERFACE.html">_ARBITER_INTERFACE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d3/d2/struct__TRANSLATOR__INTERFACE.html">_TRANSLATOR_INTERFACE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/struct__LEGACY__DEVICE__DETECTION__INTERFACE.html">_LEGACY_DEVICE_DETECTION_INTERFACE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d5/struct__PLUGPLAY__NOTIFICATION__HEADER.html">_PLUGPLAY_NOTIFICATION_HEADER</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d9/d8/struct__HWPROFILE__CHANGE__NOTIFICATION.html">_HWPROFILE_CHANGE_NOTIFICATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d4/struct__DEVICE__INTERFACE__CHANGE__NOTIFICATION.html">_DEVICE_INTERFACE_CHANGE_NOTIFICATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d2/d0/struct__TARGET__DEVICE__REMOVAL__NOTIFICATION.html">_TARGET_DEVICE_REMOVAL_NOTIFICATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html">_TARGET_DEVICE_CUSTOM_NOTIFICATION</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a0">PCI_MSI_ROUTING</a>&nbsp;&nbsp;&nbsp;0x1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a1">PCI_INT_ROUTE_INTRF_STANDARD_VER</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a2">PLUGPLAY_REGKEY_DEVICE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a3">PLUGPLAY_REGKEY_DRIVER</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a4">PLUGPLAY_REGKEY_CURRENT_HWPROFILE</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a5">DEVICE_INTERFACE_INCLUDE_NONACTIVE</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a6">PNPNOTIFY_DEVICE_INTERFACE_INCLUDE_EXISTING_INTERFACES</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a7">IoAdjustPagingPathCount</a>(_count_, _paging_)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a8">ARBITER_FLAG_BOOT_CONFIG</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a9">ARBITER_PARTIAL</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a10">TDF_DEVICEEJECTABLE</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a11">TDF_NO_RESTART</a>&nbsp;&nbsp;&nbsp;0x00000002</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a12">TDF_KERNEL_INITIATED</a>&nbsp;&nbsp;&nbsp;0x00000004</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef BOOLEAN(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a15">PTRANSLATE_BUS_ADDRESS</a> )(IN PVOID Context, IN PHYSICAL_ADDRESS BusAddress, IN ULONG Length, IN OUT PULONG AddressSpace, OUT PPHYSICAL_ADDRESS TranslatedAddress)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d7/d6/struct__DMA__ADAPTER.html">_DMA_ADAPTER</a> *(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a16">PGET_DMA_ADAPTER</a> )(IN PVOID Context, IN struct <a class="el" href="../../d7/d3/struct__DEVICE__DESCRIPTION.html">_DEVICE_DESCRIPTION</a> *DeviceDescriptor, OUT PULONG NumberOfMapRegisters)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef ULONG(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a17">PGET_SET_DEVICE_DATA</a> )(IN PVOID Context, IN ULONG DataType, IN PVOID <a class="el" href="../../d8/d6/ttri_8c.html#a3">Buffer</a>, IN ULONG <a class="el" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a>, IN ULONG Length)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d8/d6/struct__PNP__BUS__INFORMATION.html">_PNP_BUS_INFORMATION</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a18">PNP_BUS_INFORMATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d8/d6/struct__PNP__BUS__INFORMATION.html">_PNP_BUS_INFORMATION</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a19">PPNP_BUS_INFORMATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d9/struct__LEGACY__BUS__INFORMATION.html">_LEGACY_BUS_INFORMATION</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a20">LEGACY_BUS_INFORMATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d9/struct__LEGACY__BUS__INFORMATION.html">_LEGACY_BUS_INFORMATION</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a21">PLEGACY_BUS_INFORMATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d7/d5/struct__BUS__INTERFACE__STANDARD.html">_BUS_INTERFACE_STANDARD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a22">BUS_INTERFACE_STANDARD</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d7/d5/struct__BUS__INTERFACE__STANDARD.html">_BUS_INTERFACE_STANDARD</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a23">PBUS_INTERFACE_STANDARD</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef BOOLEAN(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a24">PGPE_SERVICE_ROUTINE</a> )(PVOID, PVOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef NTSTATUS(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a25">PGPE_CONNECT_VECTOR</a> )(<a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>, ULONG, <a class="el" href="../../d4/d9/ke_8h.html#a50">KINTERRUPT_MODE</a>, BOOLEAN, <a class="el" href="../../d6/d9/pnp_8h.html#a24">PGPE_SERVICE_ROUTINE</a>, PVOID, PVOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef NTSTATUS(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a26">PGPE_DISCONNECT_VECTOR</a> )(PVOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef NTSTATUS(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a27">PGPE_ENABLE_EVENT</a> )(<a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>, PVOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef NTSTATUS(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a28">PGPE_DISABLE_EVENT</a> )(<a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>, PVOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef NTSTATUS(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a29">PGPE_CLEAR_STATUS</a> )(<a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>, PVOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef VOID(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a30">PDEVICE_NOTIFY_CALLBACK</a> )(PVOID, ULONG)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef NTSTATUS(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a31">PREGISTER_FOR_DEVICE_NOTIFICATIONS</a> )(<a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a30">PDEVICE_NOTIFY_CALLBACK</a>, PVOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef void(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a32">PUNREGISTER_FOR_DEVICE_NOTIFICATIONS</a> )(<a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a30">PDEVICE_NOTIFY_CALLBACK</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d5/d5/struct__ACPI__INTERFACE__STANDARD.html">_ACPI_INTERFACE_STANDARD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a33">ACPI_INTERFACE_STANDARD</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d5/d5/struct__ACPI__INTERFACE__STANDARD.html">_ACPI_INTERFACE_STANDARD</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a34">PACPI_INTERFACE_STANDARD</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a171">_ACPI_REG_TYPE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a35">ACPI_REG_TYPE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a171">_ACPI_REG_TYPE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a36">PACPI_REG_TYPE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a37">PREAD_ACPI_REGISTER</a> )(IN <a class="el" href="../../d6/d9/pnp_8h.html#a35">ACPI_REG_TYPE</a> AcpiReg, IN ULONG Register)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef VOID(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a38">PWRITE_ACPI_REGISTER</a> )(IN <a class="el" href="../../d6/d9/pnp_8h.html#a35">ACPI_REG_TYPE</a> AcpiReg, IN ULONG Register, IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> Value)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d6/d0/structACPI__REGS__INTERFACE__STANDARD.html">ACPI_REGS_INTERFACE_STANDARD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a39">ACPI_REGS_INTERFACE_STANDARD</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d6/d0/structACPI__REGS__INTERFACE__STANDARD.html">ACPI_REGS_INTERFACE_STANDARD</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a40">PACPI_REGS_INTERFACE_STANDARD</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a41">PROUTING_TOKEN</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef NTSTATUS(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a42">PGET_INTERRUPT_ROUTING</a> )(IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> Pdo, OUT ULONG *Bus, OUT ULONG *PciSlot, OUT UCHAR *InterruptLine, OUT UCHAR *InterruptPin, OUT UCHAR *ClassCode, OUT UCHAR *SubClassCode, OUT <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> *ParentPdo, OUT <a class="el" href="../../d9/d6/structROUTING__TOKEN.html">ROUTING_TOKEN</a> *RoutingToken, OUT UCHAR *Flags)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef NTSTATUS(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a43">PSET_INTERRUPT_ROUTING_TOKEN</a> )(IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> Pdo, IN <a class="el" href="../../d6/d9/pnp_8h.html#a41">PROUTING_TOKEN</a> RoutingToken)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef VOID(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a44">PUPDATE_INTERRUPT_LINE</a> )(IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> Pdo, IN UCHAR LineRegister)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d5/d3/struct__INT__ROUTE__INTERFACE__STANDARD.html">_INT_ROUTE_INTERFACE_STANDARD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a45">INT_ROUTE_INTERFACE_STANDARD</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d5/d3/struct__INT__ROUTE__INTERFACE__STANDARD.html">_INT_ROUTE_INTERFACE_STANDARD</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a46">PINT_ROUTE_INTERFACE_STANDARD</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d4/struct__IO__ASSIGNED__RESOURCES.html">_IO_ASSIGNED_RESOURCES</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a47">IO_ASSIGNED_RESOURCES</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d4/struct__IO__ASSIGNED__RESOURCES.html">_IO_ASSIGNED_RESOURCES</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a48">PIO_ASSIGNED_RESOURCES</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a172">_IO_NOTIFICATION_EVENT_CATEGORY</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a49">IO_NOTIFICATION_EVENT_CATEGORY</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef NTSTATUS(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a50">PDRIVER_NOTIFICATION_CALLBACK_ROUTINE</a> )(IN PVOID NotificationStructure, IN PVOID Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef VOID(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a51">PDEVICE_CHANGE_COMPLETE_CALLBACK</a> )(IN PVOID Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a173">_ARBITER_ACTION</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a52">ARBITER_ACTION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a173">_ARBITER_ACTION</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a53">PARBITER_ACTION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d7/d7/struct__ARBITER__CONFLICT__INFO.html">_ARBITER_CONFLICT_INFO</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a54">ARBITER_CONFLICT_INFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d7/d7/struct__ARBITER__CONFLICT__INFO.html">_ARBITER_CONFLICT_INFO</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a55">PARBITER_CONFLICT_INFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d8/struct__ARBITER__PARAMETERS.html">_ARBITER_PARAMETERS</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a56">ARBITER_PARAMETERS</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d8/struct__ARBITER__PARAMETERS.html">_ARBITER_PARAMETERS</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a57">PARBITER_PARAMETERS</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a174">_ARBITER_REQUEST_SOURCE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a58">ARBITER_REQUEST_SOURCE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a175">_ARBITER_RESULT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a59">ARBITER_RESULT</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d8/struct__ARBITER__LIST__ENTRY.html">_ARBITER_LIST_ENTRY</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a60">ARBITER_LIST_ENTRY</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d8/struct__ARBITER__LIST__ENTRY.html">_ARBITER_LIST_ENTRY</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a61">PARBITER_LIST_ENTRY</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef NTSTATUS(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a62">PARBITER_HANDLER</a> )(IN PVOID Context, IN <a class="el" href="../../d6/d9/pnp_8h.html#a52">ARBITER_ACTION</a> <a class="el" href="../../d9/d3/rules_8c.html#a7">Action</a>, IN OUT <a class="el" href="../../d3/d8/struct__ARBITER__PARAMETERS.html">PARBITER_PARAMETERS</a> Parameters)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d7/struct__ARBITER__INTERFACE.html">_ARBITER_INTERFACE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a63">ARBITER_INTERFACE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d7/struct__ARBITER__INTERFACE.html">_ARBITER_INTERFACE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a64">PARBITER_INTERFACE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a176">_RESOURCE_TRANSLATION_DIRECTION</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a65">RESOURCE_TRANSLATION_DIRECTION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef NTSTATUS(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a66">PTRANSLATE_RESOURCE_HANDLER</a> )(IN PVOID Context, IN PCM_PARTIAL_RESOURCE_DESCRIPTOR Source, IN <a class="el" href="../../d6/d9/pnp_8h.html#a65">RESOURCE_TRANSLATION_DIRECTION</a> Direction, IN ULONG AlternativesCount, OPTIONAL IN IO_RESOURCE_DESCRIPTOR Alternatives[], OPTIONAL IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> PhysicalDeviceObject, OUT PCM_PARTIAL_RESOURCE_DESCRIPTOR Target)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef NTSTATUS(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a67">PTRANSLATE_RESOURCE_REQUIREMENTS_HANDLER</a> )(IN PVOID Context, IN PIO_RESOURCE_DESCRIPTOR Source, IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> PhysicalDeviceObject, OUT PULONG TargetCount, OUT PIO_RESOURCE_DESCRIPTOR *Target)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d2/struct__TRANSLATOR__INTERFACE.html">_TRANSLATOR_INTERFACE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a68">TRANSLATOR_INTERFACE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d3/d2/struct__TRANSLATOR__INTERFACE.html">_TRANSLATOR_INTERFACE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a69">PTRANSLATOR_INTERFACE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef NTSTATUS(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a70">PLEGACY_DEVICE_DETECTION_HANDLER</a> )(IN PVOID Context, IN INTERFACE_TYPE LegacyBusType, IN ULONG <a class="el" href="../../d2/d7/hal_8h.html#a75">BusNumber</a>, IN ULONG SlotNumber, OUT <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> *PhysicalDeviceObject)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d0/struct__LEGACY__DEVICE__DETECTION__INTERFACE.html">_LEGACY_DEVICE_DETECTION_INTERFACE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a71">LEGACY_DEVICE_DETECTION_INTERFACE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d0/struct__LEGACY__DEVICE__DETECTION__INTERFACE.html">_LEGACY_DEVICE_DETECTION_INTERFACE</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a72">PLEGACY_DEVICE_DETECTION_INTERFACE</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d5/struct__PLUGPLAY__NOTIFICATION__HEADER.html">_PLUGPLAY_NOTIFICATION_HEADER</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a73">PLUGPLAY_NOTIFICATION_HEADER</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d5/struct__PLUGPLAY__NOTIFICATION__HEADER.html">_PLUGPLAY_NOTIFICATION_HEADER</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a74">PPLUGPLAY_NOTIFICATION_HEADER</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d8/struct__HWPROFILE__CHANGE__NOTIFICATION.html">_HWPROFILE_CHANGE_NOTIFICATION</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a75">HWPROFILE_CHANGE_NOTIFICATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d9/d8/struct__HWPROFILE__CHANGE__NOTIFICATION.html">_HWPROFILE_CHANGE_NOTIFICATION</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a76">PHWPROFILE_CHANGE_NOTIFICATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d4/struct__DEVICE__INTERFACE__CHANGE__NOTIFICATION.html">_DEVICE_INTERFACE_CHANGE_NOTIFICATION</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a77">DEVICE_INTERFACE_CHANGE_NOTIFICATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d4/struct__DEVICE__INTERFACE__CHANGE__NOTIFICATION.html">_DEVICE_INTERFACE_CHANGE_NOTIFICATION</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a78">PDEVICE_INTERFACE_CHANGE_NOTIFICATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d2/d0/struct__TARGET__DEVICE__REMOVAL__NOTIFICATION.html">_TARGET_DEVICE_REMOVAL_NOTIFICATION</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a79">TARGET_DEVICE_REMOVAL_NOTIFICATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d2/d0/struct__TARGET__DEVICE__REMOVAL__NOTIFICATION.html">_TARGET_DEVICE_REMOVAL_NOTIFICATION</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a80">PTARGET_DEVICE_REMOVAL_NOTIFICATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html">_TARGET_DEVICE_CUSTOM_NOTIFICATION</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a81">TARGET_DEVICE_CUSTOM_NOTIFICATION</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html">_TARGET_DEVICE_CUSTOM_NOTIFICATION</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a82">PTARGET_DEVICE_CUSTOM_NOTIFICATION</a></td></tr>

<tr><td colspan=2><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a170">DEVICE_REGISTRY_PROPERTY</a> { <br>
&nbsp;&nbsp;<a class="el" href="../../d6/d9/pnp_8h.html#a170a83">DevicePropertyDeviceDescription</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a170a84">DevicePropertyHardwareID</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a170a85">DevicePropertyCompatibleIDs</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a170a86">DevicePropertyBootConfiguration</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="../../d6/d9/pnp_8h.html#a170a87">DevicePropertyBootConfigurationTranslated</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a170a88">DevicePropertyClassName</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a170a89">DevicePropertyClassGuid</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a170a90">DevicePropertyDriverKeyName</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="../../d6/d9/pnp_8h.html#a170a91">DevicePropertyManufacturer</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a170a92">DevicePropertyFriendlyName</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a170a93">DevicePropertyLocationInformation</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a170a94">DevicePropertyPhysicalDeviceObjectName</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="../../d6/d9/pnp_8h.html#a170a95">DevicePropertyBusTypeGuid</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a170a96">DevicePropertyLegacyBusType</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a170a97">DevicePropertyBusNumber</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a170a98">DevicePropertyEnumeratorName</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="../../d6/d9/pnp_8h.html#a170a99">DevicePropertyAddress</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a170a100">DevicePropertyUINumber</a>
<br>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a171">_ACPI_REG_TYPE</a> { <br>
&nbsp;&nbsp;<a class="el" href="../../d6/d9/pnp_8h.html#a171a101">PM1a_ENABLE</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a171a102">PM1b_ENABLE</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a171a103">PM1a_STATUS</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a171a104">PM1b_STATUS</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="../../d6/d9/pnp_8h.html#a171a105">PM1a_CONTROL</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a171a106">PM1b_CONTROL</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a171a107">GP_STATUS</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a171a108">GP_ENABLE</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="../../d6/d9/pnp_8h.html#a171a109">SMI_CMD</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a171a110">MaxRegType</a>
<br>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a172">_IO_NOTIFICATION_EVENT_CATEGORY</a> { <a class="el" href="../../d6/d9/pnp_8h.html#a172a111">EventCategoryReserved</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a172a112">EventCategoryHardwareProfileChange</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a172a113">EventCategoryDeviceInterfaceChange</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a172a114">EventCategoryTargetDeviceChange</a>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a173">_ARBITER_ACTION</a> { <br>
&nbsp;&nbsp;<a class="el" href="../../d6/d9/pnp_8h.html#a173a115">ArbiterActionTestAllocation</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a173a116">ArbiterActionRetestAllocation</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a173a117">ArbiterActionCommitAllocation</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a173a118">ArbiterActionRollbackAllocation</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="../../d6/d9/pnp_8h.html#a173a119">ArbiterActionQueryAllocatedResources</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a173a120">ArbiterActionWriteReservedResources</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a173a121">ArbiterActionQueryConflict</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a173a122">ArbiterActionQueryArbitrate</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="../../d6/d9/pnp_8h.html#a173a123">ArbiterActionAddReserved</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a173a124">ArbiterActionBootAllocation</a>
<br>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a174">_ARBITER_REQUEST_SOURCE</a> { <br>
&nbsp;&nbsp;<a class="el" href="../../d6/d9/pnp_8h.html#a174a125">ArbiterRequestUndefined</a> =  -1, 
<a class="el" href="../../d6/d9/pnp_8h.html#a174a126">ArbiterRequestLegacyReported</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a174a127">ArbiterRequestHalReported</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a174a128">ArbiterRequestLegacyAssigned</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="../../d6/d9/pnp_8h.html#a174a129">ArbiterRequestPnpDetected</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a174a130">ArbiterRequestPnpEnumerated</a>
<br>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a175">_ARBITER_RESULT</a> { <a class="el" href="../../d6/d9/pnp_8h.html#a175a131">ArbiterResultUndefined</a> =  -1, 
<a class="el" href="../../d6/d9/pnp_8h.html#a175a132">ArbiterResultSuccess</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a175a133">ArbiterResultExternalConflict</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a175a134">ArbiterResultNullRequest</a>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a176">_RESOURCE_TRANSLATION_DIRECTION</a> { <a class="el" href="../../d6/d9/pnp_8h.html#a176a135">TranslateChildToParent</a>, 
<a class="el" href="../../d6/d9/pnp_8h.html#a176a136">TranslateParentToChild</a>
 }</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI BOOLEAN&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a137">PpInitSystem</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a138">PpDeviceRegistration</a> (IN PUNICODE_STRING DeviceInstancePath, IN BOOLEAN Add, IN PUNICODE_STRING ServiceKeyName OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a139">IoSynchronousInvalidateDeviceRelations</a> (<a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject, <a class="el" href="../../d0/d5/io_8h.html#a358">DEVICE_RELATION_TYPE</a> Type)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a140">IoGetAssignedResourcesForSuballocation</a> (IN INTERFACE_TYPE <a class="el" href="../../d6/d0/cmdat_8c.html#a4">InterfaceType</a>, IN ULONG <a class="el" href="../../d2/d7/hal_8h.html#a75">BusNumber</a>, IN ULONG SlotNumber, IN PIO_RESOURCE_DESCRIPTOR ResourceDescriptor, OUT <a class="el" href="../../d0/d4/struct__IO__ASSIGNED__RESOURCES.html">PIO_ASSIGNED_RESOURCES</a> *List)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a141">IoReportDetectedDevice</a> (IN <a class="el" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject, IN INTERFACE_TYPE LegacyBusType, IN ULONG <a class="el" href="../../d2/d7/hal_8h.html#a75">BusNumber</a>, IN ULONG SlotNumber, IN PCM_RESOURCE_LIST ResourceList, IN PIO_RESOURCE_REQUIREMENTS_LIST ResourceRequirements OPTIONAL, IN BOOLEAN ResourceAssigned, IN OUT <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> *DeviceObject)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a142">IoInvalidateDeviceRelations</a> (IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject, IN <a class="el" href="../../d0/d5/io_8h.html#a358">DEVICE_RELATION_TYPE</a> Type)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a143">IoRequestDeviceEject</a> (IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> PhysicalDeviceObject)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a144">IoGetDeviceProperty</a> (IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject, IN <a class="el" href="../../d6/d9/pnp_8h.html#a170">DEVICE_REGISTRY_PROPERTY</a> DeviceProperty, IN ULONG BufferLength, OUT PVOID PropertyBuffer, OUT PULONG ResultLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a145">IoOpenDeviceRegistryKey</a> (IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject, IN ULONG DevInstKeyType, IN ACCESS_MASK DesiredAccess, OUT PHANDLE DevInstRegKey)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS NTAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a146">IoRegisterDeviceInterface</a> (IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> PhysicalDeviceObject, IN CONST GUID *InterfaceClassGuid, IN PUNICODE_STRING ReferenceString, OPTIONAL OUT PUNICODE_STRING SymbolicLinkName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a147">IoOpenDeviceInterfaceRegistryKey</a> (IN PUNICODE_STRING SymbolicLinkName, IN ACCESS_MASK DesiredAccess, OUT PHANDLE DeviceInterfaceKey)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a148">IoSetDeviceInterfaceState</a> (IN PUNICODE_STRING SymbolicLinkName, IN BOOLEAN Enable)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS NTAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a149">IoGetDeviceInterfaces</a> (IN CONST GUID *InterfaceClassGuid, IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> PhysicalDeviceObject OPTIONAL, IN ULONG Flags, OUT PWSTR *SymbolicLinkList)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS NTAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a150">IoGetDeviceInterfaceAlias</a> (IN PUNICODE_STRING SymbolicLinkName, IN CONST GUID *AliasInterfaceClassGuid, OUT PUNICODE_STRING AliasSymbolicLinkName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a151">IoRegisterPlugPlayNotification</a> (IN <a class="el" href="../../d6/d9/pnp_8h.html#a49">IO_NOTIFICATION_EVENT_CATEGORY</a> EventCategory, IN ULONG EventCategoryFlags, IN PVOID EventCategoryData OPTIONAL, IN <a class="el" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject, IN <a class="el" href="../../d6/d9/pnp_8h.html#a50">PDRIVER_NOTIFICATION_CALLBACK_ROUTINE</a> CallbackRoutine, IN PVOID Context, OUT PVOID *NotificationEntry)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a152">IoUnregisterPlugPlayNotification</a> (IN PVOID NotificationEntry)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a153">IoReportTargetDeviceChange</a> (IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> PhysicalDeviceObject, IN PVOID NotificationStructure)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a154">IoInvalidateDeviceState</a> (IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> PhysicalDeviceObject)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a155">IoReportTargetDeviceChangeAsynchronous</a> (IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> PhysicalDeviceObject, IN PVOID NotificationStructure, IN <a class="el" href="../../d6/d9/pnp_8h.html#a51">PDEVICE_CHANGE_COMPLETE_CALLBACK</a> Callback, OPTIONAL IN PVOID Context OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTKERNELAPI NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a156">IoReportResourceForDetection</a> (IN <a class="el" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> DriverObject, IN PCM_RESOURCE_LIST DriverList OPTIONAL, IN ULONG DriverListSize OPTIONAL, IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject OPTIONAL, IN PCM_RESOURCE_LIST DeviceList OPTIONAL, IN ULONG DeviceListSize OPTIONAL, OUT PBOOLEAN ConflictDetected)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a157">PpSetCustomTargetEvent</a> (IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject, IN <a class="el" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> SyncEvent OPTIONAL, OUT PULONG Result OPTIONAL, IN <a class="el" href="../../d6/d9/pnp_8h.html#a51">PDEVICE_CHANGE_COMPLETE_CALLBACK</a> Callback OPTIONAL, IN PVOID Context OPTIONAL, IN <a class="el" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html">PTARGET_DEVICE_CUSTOM_NOTIFICATION</a> NotificationStructure)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a158">PpSetTargetDeviceRemove</a> (IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject, IN BOOLEAN KernelInitiated, IN BOOLEAN NoRestart, IN BOOLEAN DoEject, IN ULONG Problem, IN <a class="el" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> SyncEvent OPTIONAL, OUT PULONG Result OPTIONAL, OUT PPNP_VETO_TYPE VetoType OPTIONAL, OUT PUNICODE_STRING VetoName OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a159">PpSetDeviceRemovalSafe</a> (IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject, IN <a class="el" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> SyncEvent OPTIONAL, OUT PULONG Result OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a160">PpNotifyUserModeRemovalSafe</a> (IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a161">PpSetDeviceClassChange</a> (IN CONST GUID *EventGuid, IN CONST GUID *ClassGuid, IN PUNICODE_STRING SymbolicLinkName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a162">PpSetPlugPlayEvent</a> (IN CONST GUID *EventGuid, IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a163">PpInitializeNotification</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a164">PpShutdownSystem</a> (IN BOOLEAN Reboot, IN ULONG Phase, IN OUT PVOID *Context)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a165">PpSetPowerEvent</a> (IN ULONG EventCode, IN <a class="el" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> CompletionEvent OPTIONAL, OUT PNTSTATUS CompletionStatus OPTIONAL, OUT PPNP_VETO_TYPE VetoType OPTIONAL, OUT PUNICODE_STRING VetoName OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a166">PpSetHwProfileChangeEvent</a> (IN CONST GUID *EventGuid, IN <a class="el" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> CompletionEvent OPTIONAL, OUT PNTSTATUS CompletionStatus OPTIONAL, OUT PPNP_VETO_TYPE VetoType OPTIONAL, OUT PUNICODE_STRING VetoName OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a167">PpSynchronizeDeviceEventQueue</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a168">PpSetPowerVetoEvent</a> (IN POWER_ACTION VetoedPowerOperation, IN <a class="el" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> CompletionEvent OPTIONAL, OUT PNTSTATUS CompletionStatus OPTIONAL, IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject, IN PNP_VETO_TYPE VetoType, IN PUNICODE_STRING VetoName OPTIONAL)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>ULONG&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a169">IoPnPDeliverServicePowerNotification</a> (ULONG PwrNotification, BOOLEAN Synchronous)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d4/struct__ERESOURCE.html">ERESOURCE</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a13">PpRegistryDeviceResource</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/pnp_8h.html#a14">IoPnpDriverObject</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a8" doxytag="pnp.h::ARBITER_FLAG_BOOT_CONFIG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ARBITER_FLAG_BOOT_CONFIG&nbsp;&nbsp;&nbsp;0x00000001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00719">719</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
Referenced by <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l01342">IopMemFindSuitableRange()</a>, <a class="el" href="../../d4/d0/pnpmemio_8c-source.html#l00959">IopPortFindSuitableRange()</a>, and <a class="el" href="../../d6/d0/pnpres_8c-source.html#l01267">IopResourceRequirementsListToReqList()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="pnp.h::ARBITER_PARTIAL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ARBITER_PARTIAL&nbsp;&nbsp;&nbsp;0x00000001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00823">823</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d0/pnpres_8c-source.html#l03534">IopSetupArbiterAndTranslators()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="pnp.h::DEVICE_INTERFACE_INCLUDE_NONACTIVE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DEVICE_INTERFACE_INCLUDE_NONACTIVE&nbsp;&nbsp;&nbsp;0x00000001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00444">444</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l02707">IopGetDeviceInterfaces()</a>, and <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l04414">IopRemoveDeviceInterfaces()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="pnp.h::IoAdjustPagingPathCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define IoAdjustPagingPathCount          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">_count_,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>_paging_&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>{     \
    <span class="keywordflow">if</span> (_paging_) {                                     \
        InterlockedIncrement(_count_);                  \
    } <span class="keywordflow">else</span> {                                            \
        InterlockedDecrement(_count_);                  \
    }                                                   \
}
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00518">518</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="pnp.h::PCI_INT_ROUTE_INTRF_STANDARD_VER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define PCI_INT_ROUTE_INTRF_STANDARD_VER&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00308">308</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="pnp.h::PCI_MSI_ROUTING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define PCI_MSI_ROUTING&nbsp;&nbsp;&nbsp;0x1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00257">257</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="pnp.h::PLUGPLAY_REGKEY_CURRENT_HWPROFILE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define PLUGPLAY_REGKEY_CURRENT_HWPROFILE&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00394">394</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00810">IoOpenDeviceRegistryKey()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="pnp.h::PLUGPLAY_REGKEY_DEVICE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define PLUGPLAY_REGKEY_DEVICE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00392">392</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00810">IoOpenDeviceRegistryKey()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="pnp.h::PLUGPLAY_REGKEY_DRIVER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define PLUGPLAY_REGKEY_DRIVER&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00393">393</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00810">IoOpenDeviceRegistryKey()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="pnp.h::PNPNOTIFY_DEVICE_INTERFACE_INCLUDE_EXISTING_INTERFACES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define PNPNOTIFY_DEVICE_INTERFACE_INCLUDE_EXISTING_INTERFACES&nbsp;&nbsp;&nbsp;0x00000001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00471">471</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l07495">IoRegisterPlugPlayNotification()</a>, and <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00639">xxxRegisterForDeviceClassNotifications()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="pnp.h::TDF_DEVICEEJECTABLE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TDF_DEVICEEJECTABLE&nbsp;&nbsp;&nbsp;0x00000001          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l01063">1063</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="pnp.h::TDF_KERNEL_INITIATED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TDF_KERNEL_INITIATED&nbsp;&nbsp;&nbsp;0x00000004          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l01065">1065</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="pnp.h::TDF_NO_RESTART" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define TDF_NO_RESTART&nbsp;&nbsp;&nbsp;0x00000002          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l01064">1064</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a33" doxytag="pnp.h::ACPI_INTERFACE_STANDARD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d5/d5/struct__ACPI__INTERFACE__STANDARD.html">_ACPI_INTERFACE_STANDARD</a>  <a class="el" href="../../d5/d5/struct__ACPI__INTERFACE__STANDARD.html">ACPI_INTERFACE_STANDARD</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="pnp.h::ACPI_REG_TYPE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a171">_ACPI_REG_TYPE</a>  <a class="el" href="../../d6/d9/pnp_8h.html#a35">ACPI_REG_TYPE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="pnp.h::ACPI_REGS_INTERFACE_STANDARD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d6/d0/structACPI__REGS__INTERFACE__STANDARD.html">ACPI_REGS_INTERFACE_STANDARD</a>  <a class="el" href="../../d6/d0/structACPI__REGS__INTERFACE__STANDARD.html">ACPI_REGS_INTERFACE_STANDARD</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a52" doxytag="pnp.h::ARBITER_ACTION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a173">_ARBITER_ACTION</a>  <a class="el" href="../../d6/d9/pnp_8h.html#a52">ARBITER_ACTION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d7/arbiter_8c-source.html#l01414">ArbArbiterHandler()</a>, and <a class="el" href="../../d6/d0/pnpres_8c-source.html#l03292">IopAssignInner()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a54" doxytag="pnp.h::ARBITER_CONFLICT_INFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d7/d7/struct__ARBITER__CONFLICT__INFO.html">_ARBITER_CONFLICT_INFO</a>  <a class="el" href="../../d7/d7/struct__ARBITER__CONFLICT__INFO.html">ARBITER_CONFLICT_INFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d7/arbiter_8c-source.html#l03695">ArbQueryConflict()</a>, and <a class="el" href="../../d6/d0/pnpres_8c-source.html#l08022">IopQueryConflictFillConflicts()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a63" doxytag="pnp.h::ARBITER_INTERFACE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d7/struct__ARBITER__INTERFACE.html">_ARBITER_INTERFACE</a>  <a class="el" href="../../d9/d7/struct__ARBITER__INTERFACE.html">ARBITER_INTERFACE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a60" doxytag="pnp.h::ARBITER_LIST_ENTRY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d8/struct__ARBITER__LIST__ENTRY.html">_ARBITER_LIST_ENTRY</a>  <a class="el" href="../../d0/d8/struct__ARBITER__LIST__ENTRY.html">ARBITER_LIST_ENTRY</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d7/arbiter_8c-source.html#l00506">ArbTestAllocation()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a56" doxytag="pnp.h::ARBITER_PARAMETERS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d8/struct__ARBITER__PARAMETERS.html">_ARBITER_PARAMETERS</a>  <a class="el" href="../../d3/d8/struct__ARBITER__PARAMETERS.html">ARBITER_PARAMETERS</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a58" doxytag="pnp.h::ARBITER_REQUEST_SOURCE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a174">_ARBITER_REQUEST_SOURCE</a>  <a class="el" href="../../d6/d9/pnp_8h.html#a58">ARBITER_REQUEST_SOURCE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a59" doxytag="pnp.h::ARBITER_RESULT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a175">_ARBITER_RESULT</a>  <a class="el" href="../../d6/d9/pnp_8h.html#a59">ARBITER_RESULT</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="pnp.h::BUS_INTERFACE_STANDARD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d7/d5/struct__BUS__INTERFACE__STANDARD.html">_BUS_INTERFACE_STANDARD</a>  <a class="el" href="../../d7/d5/struct__BUS__INTERFACE__STANDARD.html">BUS_INTERFACE_STANDARD</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l08307">IoGetDmaAdapter()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a77" doxytag="pnp.h::DEVICE_INTERFACE_CHANGE_NOTIFICATION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d4/struct__DEVICE__INTERFACE__CHANGE__NOTIFICATION.html">_DEVICE_INTERFACE_CHANGE_NOTIFICATION</a>  <a class="el" href="../../d0/d4/struct__DEVICE__INTERFACE__CHANGE__NOTIFICATION.html">DEVICE_INTERFACE_CHANGE_NOTIFICATION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a75" doxytag="pnp.h::HWPROFILE_CHANGE_NOTIFICATION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d8/struct__HWPROFILE__CHANGE__NOTIFICATION.html">_HWPROFILE_CHANGE_NOTIFICATION</a>  <a class="el" href="../../d9/d8/struct__HWPROFILE__CHANGE__NOTIFICATION.html">HWPROFILE_CHANGE_NOTIFICATION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="pnp.h::INT_ROUTE_INTERFACE_STANDARD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d5/d3/struct__INT__ROUTE__INTERFACE__STANDARD.html">_INT_ROUTE_INTERFACE_STANDARD</a>  <a class="el" href="../../d5/d3/struct__INT__ROUTE__INTERFACE__STANDARD.html">INT_ROUTE_INTERFACE_STANDARD</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="pnp.h::IO_ASSIGNED_RESOURCES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d4/struct__IO__ASSIGNED__RESOURCES.html">_IO_ASSIGNED_RESOURCES</a>  <a class="el" href="../../d0/d4/struct__IO__ASSIGNED__RESOURCES.html">IO_ASSIGNED_RESOURCES</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="pnp.h::IO_NOTIFICATION_EVENT_CATEGORY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a172">_IO_NOTIFICATION_EVENT_CATEGORY</a>  <a class="el" href="../../d6/d9/pnp_8h.html#a49">IO_NOTIFICATION_EVENT_CATEGORY</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00639">xxxRegisterForDeviceClassNotifications()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="pnp.h::LEGACY_BUS_INFORMATION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d9/struct__LEGACY__BUS__INFORMATION.html">_LEGACY_BUS_INFORMATION</a>  <a class="el" href="../../d9/d9/struct__LEGACY__BUS__INFORMATION.html">LEGACY_BUS_INFORMATION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a71" doxytag="pnp.h::LEGACY_DEVICE_DETECTION_INTERFACE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d0/struct__LEGACY__DEVICE__DETECTION__INTERFACE.html">_LEGACY_DEVICE_DETECTION_INTERFACE</a>  <a class="el" href="../../d0/d0/struct__LEGACY__DEVICE__DETECTION__INTERFACE.html">LEGACY_DEVICE_DETECTION_INTERFACE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="pnp.h::PACPI_INTERFACE_STANDARD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d5/d5/struct__ACPI__INTERFACE__STANDARD.html">_ACPI_INTERFACE_STANDARD</a> * <a class="el" href="../../d5/d5/struct__ACPI__INTERFACE__STANDARD.html">PACPI_INTERFACE_STANDARD</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="pnp.h::PACPI_REG_TYPE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a171">_ACPI_REG_TYPE</a> * <a class="el" href="../../d6/d9/pnp_8h.html#a36">PACPI_REG_TYPE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="pnp.h::PACPI_REGS_INTERFACE_STANDARD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d6/d0/structACPI__REGS__INTERFACE__STANDARD.html">ACPI_REGS_INTERFACE_STANDARD</a> * <a class="el" href="../../d6/d0/structACPI__REGS__INTERFACE__STANDARD.html">PACPI_REGS_INTERFACE_STANDARD</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a53" doxytag="pnp.h::PARBITER_ACTION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a173">_ARBITER_ACTION</a> * <a class="el" href="../../d6/d9/pnp_8h.html#a53">PARBITER_ACTION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a55" doxytag="pnp.h::PARBITER_CONFLICT_INFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d7/d7/struct__ARBITER__CONFLICT__INFO.html">_ARBITER_CONFLICT_INFO</a> * <a class="el" href="../../d7/d7/struct__ARBITER__CONFLICT__INFO.html">PARBITER_CONFLICT_INFO</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d7/arbiter_8c-source.html#l03695">ArbQueryConflict()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a62" doxytag="pnp.h::PARBITER_HANDLER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef NTSTATUS(* <a class="el" href="../../d6/d9/pnp_8h.html#a62">PARBITER_HANDLER</a>)(IN PVOID Context, IN <a class="el" href="../../d6/d9/pnp_8h.html#a52">ARBITER_ACTION</a> <a class="el" href="../../d9/d3/rules_8c.html#a7">Action</a>, IN OUT <a class="el" href="../../d3/d8/struct__ARBITER__PARAMETERS.html">PARBITER_PARAMETERS</a> Parameters)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00807">807</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a64" doxytag="pnp.h::PARBITER_INTERFACE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d7/struct__ARBITER__INTERFACE.html">_ARBITER_INTERFACE</a> * <a class="el" href="../../d9/d7/struct__ARBITER__INTERFACE.html">PARBITER_INTERFACE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a61" doxytag="pnp.h::PARBITER_LIST_ENTRY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d8/struct__ARBITER__LIST__ENTRY.html">_ARBITER_LIST_ENTRY</a> * <a class="el" href="../../d0/d8/struct__ARBITER__LIST__ENTRY.html">PARBITER_LIST_ENTRY</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d7/arbiter_8c-source.html#l00506">ArbTestAllocation()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a57" doxytag="pnp.h::PARBITER_PARAMETERS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d8/struct__ARBITER__PARAMETERS.html">_ARBITER_PARAMETERS</a> * <a class="el" href="../../d3/d8/struct__ARBITER__PARAMETERS.html">PARBITER_PARAMETERS</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d7/arbiter_8c-source.html#l01414">ArbArbiterHandler()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="pnp.h::PBUS_INTERFACE_STANDARD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d7/d5/struct__BUS__INTERFACE__STANDARD.html">_BUS_INTERFACE_STANDARD</a> * <a class="el" href="../../d7/d5/struct__BUS__INTERFACE__STANDARD.html">PBUS_INTERFACE_STANDARD</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a51" doxytag="pnp.h::PDEVICE_CHANGE_COMPLETE_CALLBACK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef VOID(* <a class="el" href="../../d6/d9/pnp_8h.html#a51">PDEVICE_CHANGE_COMPLETE_CALLBACK</a>)(IN PVOID Context)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00508">508</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a78" doxytag="pnp.h::PDEVICE_INTERFACE_CHANGE_NOTIFICATION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d4/struct__DEVICE__INTERFACE__CHANGE__NOTIFICATION.html">_DEVICE_INTERFACE_CHANGE_NOTIFICATION</a> * <a class="el" href="../../d0/d4/struct__DEVICE__INTERFACE__CHANGE__NOTIFICATION.html">PDEVICE_INTERFACE_CHANGE_NOTIFICATION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00310">DeviceClassCDROMNotify()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="pnp.h::PDEVICE_NOTIFY_CALLBACK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef VOID(*  <a class="el" href="../../d6/d9/pnp_8h.html#a30">PDEVICE_NOTIFY_CALLBACK</a>)(PVOID, ULONG)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00163">163</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a50" doxytag="pnp.h::PDRIVER_NOTIFICATION_CALLBACK_ROUTINE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef NTSTATUS(* <a class="el" href="../../d6/d9/pnp_8h.html#a50">PDRIVER_NOTIFICATION_CALLBACK_ROUTINE</a>)(IN PVOID NotificationStructure, IN PVOID Context)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00475">475</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00639">xxxRegisterForDeviceClassNotifications()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="pnp.h::PGET_DMA_ADAPTER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d7/d6/struct__DMA__ADAPTER.html">_DMA_ADAPTER</a>*(* <a class="el" href="../../d6/d9/pnp_8h.html#a16">PGET_DMA_ADAPTER</a>)(IN PVOID Context, IN struct <a class="el" href="../../d7/d3/struct__DEVICE__DESCRIPTION.html">_DEVICE_DESCRIPTION</a> *DeviceDescriptor, OUT PULONG NumberOfMapRegisters)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00074">74</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="pnp.h::PGET_INTERRUPT_ROUTING" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef NTSTATUS(* <a class="el" href="../../d6/d9/pnp_8h.html#a42">PGET_INTERRUPT_ROUTING</a>)(IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> Pdo, OUT ULONG *Bus, OUT ULONG *PciSlot, OUT UCHAR *InterruptLine, OUT UCHAR *InterruptPin, OUT UCHAR *ClassCode, OUT UCHAR *SubClassCode, OUT <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> *ParentPdo, OUT <a class="el" href="../../d9/d6/structROUTING__TOKEN.html">ROUTING_TOKEN</a> *RoutingToken, OUT UCHAR *Flags)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00261">261</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="pnp.h::PGET_SET_DEVICE_DATA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef ULONG(* <a class="el" href="../../d6/d9/pnp_8h.html#a17">PGET_SET_DEVICE_DATA</a>)(IN PVOID Context, IN ULONG DataType, IN PVOID <a class="el" href="../../d8/d6/ttri_8c.html#a3">Buffer</a>, IN ULONG <a class="el" href="../../d4/d9/heapdbg_8c.html#a3">Offset</a>, IN ULONG Length)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00080">80</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="pnp.h::PGPE_CLEAR_STATUS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef NTSTATUS(*  <a class="el" href="../../d6/d9/pnp_8h.html#a29">PGPE_CLEAR_STATUS</a>)(<a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>, PVOID)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00159">159</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="pnp.h::PGPE_CONNECT_VECTOR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef NTSTATUS(*  <a class="el" href="../../d6/d9/pnp_8h.html#a25">PGPE_CONNECT_VECTOR</a>)(<a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>, ULONG, <a class="el" href="../../d4/d9/ke_8h.html#a50">KINTERRUPT_MODE</a>, BOOLEAN, <a class="el" href="../../d6/d9/pnp_8h.html#a24">PGPE_SERVICE_ROUTINE</a>, PVOID, PVOID)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00139">139</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="pnp.h::PGPE_DISABLE_EVENT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef NTSTATUS(*  <a class="el" href="../../d6/d9/pnp_8h.html#a28">PGPE_DISABLE_EVENT</a>)(<a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>, PVOID)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00155">155</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="pnp.h::PGPE_DISCONNECT_VECTOR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef NTSTATUS(*  <a class="el" href="../../d6/d9/pnp_8h.html#a26">PGPE_DISCONNECT_VECTOR</a>)(PVOID)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00148">148</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="pnp.h::PGPE_ENABLE_EVENT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef NTSTATUS(*  <a class="el" href="../../d6/d9/pnp_8h.html#a27">PGPE_ENABLE_EVENT</a>)(<a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>, PVOID)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00151">151</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="pnp.h::PGPE_SERVICE_ROUTINE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef BOOLEAN(*  <a class="el" href="../../d6/d9/pnp_8h.html#a24">PGPE_SERVICE_ROUTINE</a>)(PVOID, PVOID)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00135">135</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a76" doxytag="pnp.h::PHWPROFILE_CHANGE_NOTIFICATION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d8/struct__HWPROFILE__CHANGE__NOTIFICATION.html">_HWPROFILE_CHANGE_NOTIFICATION</a> * <a class="el" href="../../d9/d8/struct__HWPROFILE__CHANGE__NOTIFICATION.html">PHWPROFILE_CHANGE_NOTIFICATION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="pnp.h::PINT_ROUTE_INTERFACE_STANDARD" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d5/d3/struct__INT__ROUTE__INTERFACE__STANDARD.html">_INT_ROUTE_INTERFACE_STANDARD</a> * <a class="el" href="../../d5/d3/struct__INT__ROUTE__INTERFACE__STANDARD.html">PINT_ROUTE_INTERFACE_STANDARD</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="pnp.h::PIO_ASSIGNED_RESOURCES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d4/struct__IO__ASSIGNED__RESOURCES.html">_IO_ASSIGNED_RESOURCES</a> * <a class="el" href="../../d0/d4/struct__IO__ASSIGNED__RESOURCES.html">PIO_ASSIGNED_RESOURCES</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="pnp.h::PLEGACY_BUS_INFORMATION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d9/struct__LEGACY__BUS__INFORMATION.html">_LEGACY_BUS_INFORMATION</a> * <a class="el" href="../../d9/d9/struct__LEGACY__BUS__INFORMATION.html">PLEGACY_BUS_INFORMATION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a70" doxytag="pnp.h::PLEGACY_DEVICE_DETECTION_HANDLER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef NTSTATUS(* <a class="el" href="../../d6/d9/pnp_8h.html#a70">PLEGACY_DEVICE_DETECTION_HANDLER</a>)(IN PVOID Context, IN INTERFACE_TYPE LegacyBusType, IN ULONG <a class="el" href="../../d2/d7/hal_8h.html#a75">BusNumber</a>, IN ULONG SlotNumber, OUT <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> *PhysicalDeviceObject)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00906">906</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a72" doxytag="pnp.h::PLEGACY_DEVICE_DETECTION_INTERFACE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d0/struct__LEGACY__DEVICE__DETECTION__INTERFACE.html">_LEGACY_DEVICE_DETECTION_INTERFACE</a> * <a class="el" href="../../d0/d0/struct__LEGACY__DEVICE__DETECTION__INTERFACE.html">PLEGACY_DEVICE_DETECTION_INTERFACE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a73" doxytag="pnp.h::PLUGPLAY_NOTIFICATION_HEADER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d5/struct__PLUGPLAY__NOTIFICATION__HEADER.html">_PLUGPLAY_NOTIFICATION_HEADER</a>  <a class="el" href="../../d9/d5/struct__PLUGPLAY__NOTIFICATION__HEADER.html">PLUGPLAY_NOTIFICATION_HEADER</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="pnp.h::PNP_BUS_INFORMATION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d8/d6/struct__PNP__BUS__INFORMATION.html">_PNP_BUS_INFORMATION</a>  <a class="el" href="../../d8/d6/struct__PNP__BUS__INFORMATION.html">PNP_BUS_INFORMATION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a74" doxytag="pnp.h::PPLUGPLAY_NOTIFICATION_HEADER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d9/d5/struct__PLUGPLAY__NOTIFICATION__HEADER.html">_PLUGPLAY_NOTIFICATION_HEADER</a> * <a class="el" href="../../d9/d5/struct__PLUGPLAY__NOTIFICATION__HEADER.html">PPLUGPLAY_NOTIFICATION_HEADER</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="pnp.h::PPNP_BUS_INFORMATION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d8/d6/struct__PNP__BUS__INFORMATION.html">_PNP_BUS_INFORMATION</a> * <a class="el" href="../../d8/d6/struct__PNP__BUS__INFORMATION.html">PPNP_BUS_INFORMATION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="pnp.h::PREAD_ACPI_REGISTER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a>(* <a class="el" href="../../d6/d9/pnp_8h.html#a37">PREAD_ACPI_REGISTER</a>)(IN <a class="el" href="../../d6/d9/pnp_8h.html#a35">ACPI_REG_TYPE</a> AcpiReg, IN ULONG Register)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00213">213</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="pnp.h::PREGISTER_FOR_DEVICE_NOTIFICATIONS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef NTSTATUS(*  <a class="el" href="../../d6/d9/pnp_8h.html#a31">PREGISTER_FOR_DEVICE_NOTIFICATIONS</a>)(<a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a30">PDEVICE_NOTIFY_CALLBACK</a>, PVOID)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00167">167</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="pnp.h::PROUTING_TOKEN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef   * <a class="el" href="../../d6/d9/pnp_8h.html#a41">PROUTING_TOKEN</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="pnp.h::PSET_INTERRUPT_ROUTING_TOKEN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef NTSTATUS(* <a class="el" href="../../d6/d9/pnp_8h.html#a43">PSET_INTERRUPT_ROUTING_TOKEN</a>)(IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> Pdo, IN <a class="el" href="../../d6/d9/pnp_8h.html#a41">PROUTING_TOKEN</a> RoutingToken)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00276">276</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a82" doxytag="pnp.h::PTARGET_DEVICE_CUSTOM_NOTIFICATION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html">_TARGET_DEVICE_CUSTOM_NOTIFICATION</a> * <a class="el" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html">PTARGET_DEVICE_CUSTOM_NOTIFICATION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00248">DeviceCDROMNotify()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a80" doxytag="pnp.h::PTARGET_DEVICE_REMOVAL_NOTIFICATION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d2/d0/struct__TARGET__DEVICE__REMOVAL__NOTIFICATION.html">_TARGET_DEVICE_REMOVAL_NOTIFICATION</a> * <a class="el" href="../../d2/d0/struct__TARGET__DEVICE__REMOVAL__NOTIFICATION.html">PTARGET_DEVICE_REMOVAL_NOTIFICATION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="pnp.h::PTRANSLATE_BUS_ADDRESS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef BOOLEAN(* <a class="el" href="../../d6/d9/pnp_8h.html#a15">PTRANSLATE_BUS_ADDRESS</a>)(IN PVOID Context, IN PHYSICAL_ADDRESS BusAddress, IN ULONG Length, IN OUT PULONG AddressSpace, OUT PPHYSICAL_ADDRESS TranslatedAddress)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00066">66</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a66" doxytag="pnp.h::PTRANSLATE_RESOURCE_HANDLER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef NTSTATUS(* <a class="el" href="../../d6/d9/pnp_8h.html#a66">PTRANSLATE_RESOURCE_HANDLER</a>)(IN PVOID Context, IN PCM_PARTIAL_RESOURCE_DESCRIPTOR Source, IN <a class="el" href="../../d6/d9/pnp_8h.html#a65">RESOURCE_TRANSLATION_DIRECTION</a> Direction, IN ULONG AlternativesCount, OPTIONAL IN IO_RESOURCE_DESCRIPTOR Alternatives[], OPTIONAL IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> PhysicalDeviceObject, OUT PCM_PARTIAL_RESOURCE_DESCRIPTOR Target)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00864">864</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a67" doxytag="pnp.h::PTRANSLATE_RESOURCE_REQUIREMENTS_HANDLER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef NTSTATUS(* <a class="el" href="../../d6/d9/pnp_8h.html#a67">PTRANSLATE_RESOURCE_REQUIREMENTS_HANDLER</a>)(IN PVOID Context, IN PIO_RESOURCE_DESCRIPTOR Source, IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> PhysicalDeviceObject, OUT PULONG TargetCount, OUT PIO_RESOURCE_DESCRIPTOR *Target)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00876">876</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a69" doxytag="pnp.h::PTRANSLATOR_INTERFACE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d2/struct__TRANSLATOR__INTERFACE.html">_TRANSLATOR_INTERFACE</a> * <a class="el" href="../../d3/d2/struct__TRANSLATOR__INTERFACE.html">PTRANSLATOR_INTERFACE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="pnp.h::PUNREGISTER_FOR_DEVICE_NOTIFICATIONS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef void(*  <a class="el" href="../../d6/d9/pnp_8h.html#a32">PUNREGISTER_FOR_DEVICE_NOTIFICATIONS</a>)(<a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a30">PDEVICE_NOTIFY_CALLBACK</a>)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00172">172</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="pnp.h::PUPDATE_INTERRUPT_LINE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef VOID(* <a class="el" href="../../d6/d9/pnp_8h.html#a44">PUPDATE_INTERRUPT_LINE</a>)(IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> Pdo, IN UCHAR LineRegister)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00283">283</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="pnp.h::PWRITE_ACPI_REGISTER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef VOID(* <a class="el" href="../../d6/d9/pnp_8h.html#a38">PWRITE_ACPI_REGISTER</a>)(IN <a class="el" href="../../d6/d9/pnp_8h.html#a35">ACPI_REG_TYPE</a> AcpiReg, IN ULONG Register, IN <a class="el" href="../../d0/d6/jul98_2test_2icc__i386_8h.html#a14">USHORT</a> Value)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00217">217</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a65" doxytag="pnp.h::RESOURCE_TRANSLATION_DIRECTION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef enum <a class="el" href="../../d6/d9/pnp_8h.html#a176">_RESOURCE_TRANSLATION_DIRECTION</a>  <a class="el" href="../../d6/d9/pnp_8h.html#a65">RESOURCE_TRANSLATION_DIRECTION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a81" doxytag="pnp.h::TARGET_DEVICE_CUSTOM_NOTIFICATION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html">_TARGET_DEVICE_CUSTOM_NOTIFICATION</a>  <a class="el" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html">TARGET_DEVICE_CUSTOM_NOTIFICATION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d4/d8/fsrtl_2pnp_8c-source.html#l00041">FsRtlNotifyVolumeEvent()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a79" doxytag="pnp.h::TARGET_DEVICE_REMOVAL_NOTIFICATION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d2/d0/struct__TARGET__DEVICE__REMOVAL__NOTIFICATION.html">_TARGET_DEVICE_REMOVAL_NOTIFICATION</a>  <a class="el" href="../../d2/d0/struct__TARGET__DEVICE__REMOVAL__NOTIFICATION.html">TARGET_DEVICE_REMOVAL_NOTIFICATION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a68" doxytag="pnp.h::TRANSLATOR_INTERFACE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="../../d3/d2/struct__TRANSLATOR__INTERFACE.html">_TRANSLATOR_INTERFACE</a>  <a class="el" href="../../d3/d2/struct__TRANSLATOR__INTERFACE.html">TRANSLATOR_INTERFACE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="a171" doxytag="pnp.h::_ACPI_REG_TYPE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="../../d6/d9/pnp_8h.html#a171">_ACPI_REG_TYPE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="a171a101" doxytag="PM1a_ENABLE" ></a>PM1a_ENABLE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a171a102" doxytag="PM1b_ENABLE" ></a>PM1b_ENABLE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a171a103" doxytag="PM1a_STATUS" ></a>PM1a_STATUS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a171a104" doxytag="PM1b_STATUS" ></a>PM1b_STATUS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a171a105" doxytag="PM1a_CONTROL" ></a>PM1a_CONTROL</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a171a106" doxytag="PM1b_CONTROL" ></a>PM1b_CONTROL</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a171a107" doxytag="GP_STATUS" ></a>GP_STATUS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a171a108" doxytag="GP_ENABLE" ></a>GP_ENABLE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a171a109" doxytag="SMI_CMD" ></a>SMI_CMD</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a171a110" doxytag="MaxRegType" ></a>MaxRegType</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00200">200</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
<pre class="fragment"><div>00200                             {
00201     <a class="code" href="../../d6/d9/pnp_8h.html#a171a101">PM1a_ENABLE</a>,
00202     <a class="code" href="../../d6/d9/pnp_8h.html#a171a102">PM1b_ENABLE</a>,
00203     <a class="code" href="../../d6/d9/pnp_8h.html#a171a103">PM1a_STATUS</a>,
00204     <a class="code" href="../../d6/d9/pnp_8h.html#a171a104">PM1b_STATUS</a>,
00205     <a class="code" href="../../d6/d9/pnp_8h.html#a171a105">PM1a_CONTROL</a>,
00206     <a class="code" href="../../d6/d9/pnp_8h.html#a171a106">PM1b_CONTROL</a>,
00207     <a class="code" href="../../d6/d9/pnp_8h.html#a171a107">GP_STATUS</a>,
00208     <a class="code" href="../../d6/d9/pnp_8h.html#a171a108">GP_ENABLE</a>,
00209     <a class="code" href="../../d6/d9/pnp_8h.html#a171a109">SMI_CMD</a>,
00210     <a class="code" href="../../d6/d9/pnp_8h.html#a171a110">MaxRegType</a>
00211 } <a class="code" href="../../d6/d9/pnp_8h.html#a35">ACPI_REG_TYPE</a>, *<a class="code" href="../../d6/d9/pnp_8h.html#a36">PACPI_REG_TYPE</a>;
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a173" doxytag="pnp.h::_ARBITER_ACTION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="../../d6/d9/pnp_8h.html#a173">_ARBITER_ACTION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="a173a115" doxytag="ArbiterActionTestAllocation" ></a>ArbiterActionTestAllocation</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a173a116" doxytag="ArbiterActionRetestAllocation" ></a>ArbiterActionRetestAllocation</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a173a117" doxytag="ArbiterActionCommitAllocation" ></a>ArbiterActionCommitAllocation</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a173a118" doxytag="ArbiterActionRollbackAllocation" ></a>ArbiterActionRollbackAllocation</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a173a119" doxytag="ArbiterActionQueryAllocatedResources" ></a>ArbiterActionQueryAllocatedResources</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a173a120" doxytag="ArbiterActionWriteReservedResources" ></a>ArbiterActionWriteReservedResources</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a173a121" doxytag="ArbiterActionQueryConflict" ></a>ArbiterActionQueryConflict</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a173a122" doxytag="ArbiterActionQueryArbitrate" ></a>ArbiterActionQueryArbitrate</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a173a123" doxytag="ArbiterActionAddReserved" ></a>ArbiterActionAddReserved</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a173a124" doxytag="ArbiterActionBootAllocation" ></a>ArbiterActionBootAllocation</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00546">546</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
<pre class="fragment"><div>00546                              {
00547     <a class="code" href="../../d6/d9/pnp_8h.html#a173a115">ArbiterActionTestAllocation</a>,
00548     <a class="code" href="../../d6/d9/pnp_8h.html#a173a116">ArbiterActionRetestAllocation</a>,
00549     <a class="code" href="../../d6/d9/pnp_8h.html#a173a117">ArbiterActionCommitAllocation</a>,
00550     <a class="code" href="../../d6/d9/pnp_8h.html#a173a118">ArbiterActionRollbackAllocation</a>,
00551     <a class="code" href="../../d6/d9/pnp_8h.html#a173a119">ArbiterActionQueryAllocatedResources</a>,
00552     <a class="code" href="../../d6/d9/pnp_8h.html#a173a120">ArbiterActionWriteReservedResources</a>,
00553     <a class="code" href="../../d6/d9/pnp_8h.html#a173a121">ArbiterActionQueryConflict</a>,
00554     <a class="code" href="../../d6/d9/pnp_8h.html#a173a122">ArbiterActionQueryArbitrate</a>,
00555     <a class="code" href="../../d6/d9/pnp_8h.html#a173a123">ArbiterActionAddReserved</a>,
00556     <a class="code" href="../../d6/d9/pnp_8h.html#a173a124">ArbiterActionBootAllocation</a>
00557 } <a class="code" href="../../d6/d9/pnp_8h.html#a52">ARBITER_ACTION</a>, *<a class="code" href="../../d6/d9/pnp_8h.html#a53">PARBITER_ACTION</a>;
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a174" doxytag="pnp.h::_ARBITER_REQUEST_SOURCE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="../../d6/d9/pnp_8h.html#a174">_ARBITER_REQUEST_SOURCE</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="a174a125" doxytag="ArbiterRequestUndefined" ></a>ArbiterRequestUndefined</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a174a126" doxytag="ArbiterRequestLegacyReported" ></a>ArbiterRequestLegacyReported</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a174a127" doxytag="ArbiterRequestHalReported" ></a>ArbiterRequestHalReported</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a174a128" doxytag="ArbiterRequestLegacyAssigned" ></a>ArbiterRequestLegacyAssigned</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a174a129" doxytag="ArbiterRequestPnpDetected" ></a>ArbiterRequestPnpDetected</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a174a130" doxytag="ArbiterRequestPnpEnumerated" ></a>ArbiterRequestPnpEnumerated</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00692">692</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
<pre class="fragment"><div>00692                                      {
00693 
00694     <a class="code" href="../../d6/d9/pnp_8h.html#a174a125">ArbiterRequestUndefined</a> = -1,
00695     <a class="code" href="../../d6/d9/pnp_8h.html#a174a126">ArbiterRequestLegacyReported</a>,   <span class="comment">// IoReportResourceUsage</span>
00696     <a class="code" href="../../d6/d9/pnp_8h.html#a174a127">ArbiterRequestHalReported</a>,      <span class="comment">// IoReportHalResourceUsage</span>
00697     <a class="code" href="../../d6/d9/pnp_8h.html#a174a128">ArbiterRequestLegacyAssigned</a>,   <span class="comment">// IoAssignResources</span>
00698     <a class="code" href="../../d6/d9/pnp_8h.html#a174a129">ArbiterRequestPnpDetected</a>,      <span class="comment">// IoReportResourceForDetection</span>
00699     <a class="code" href="../../d6/d9/pnp_8h.html#a174a130">ArbiterRequestPnpEnumerated</a>     <span class="comment">// IRP_MN_QUERY_RESOURCE_REQUIREMENTS</span>
00700 
00701 } <a class="code" href="../../d6/d9/pnp_8h.html#a58">ARBITER_REQUEST_SOURCE</a>;
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a175" doxytag="pnp.h::_ARBITER_RESULT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="../../d6/d9/pnp_8h.html#a175">_ARBITER_RESULT</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="a175a131" doxytag="ArbiterResultUndefined" ></a>ArbiterResultUndefined</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a175a132" doxytag="ArbiterResultSuccess" ></a>ArbiterResultSuccess</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a175a133" doxytag="ArbiterResultExternalConflict" ></a>ArbiterResultExternalConflict</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a175a134" doxytag="ArbiterResultNullRequest" ></a>ArbiterResultNullRequest</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00704">704</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
<pre class="fragment"><div>00704                              {
00705 
00706     <a class="code" href="../../d6/d9/pnp_8h.html#a175a131">ArbiterResultUndefined</a> = -1,
00707     <a class="code" href="../../d6/d9/pnp_8h.html#a175a132">ArbiterResultSuccess</a>,
00708     <a class="code" href="../../d6/d9/pnp_8h.html#a175a133">ArbiterResultExternalConflict</a>, <span class="comment">// This indicates that the request can never be solved for devices in this list</span>
00709     <a class="code" href="../../d6/d9/pnp_8h.html#a175a134">ArbiterResultNullRequest</a>       <span class="comment">// The request was for length zero and thus no translation should be attempted</span>
00710 
00711 } <a class="code" href="../../d6/d9/pnp_8h.html#a59">ARBITER_RESULT</a>;
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a172" doxytag="pnp.h::_IO_NOTIFICATION_EVENT_CATEGORY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="../../d6/d9/pnp_8h.html#a172">_IO_NOTIFICATION_EVENT_CATEGORY</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="a172a111" doxytag="EventCategoryReserved" ></a>EventCategoryReserved</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a172a112" doxytag="EventCategoryHardwareProfileChange" ></a>EventCategoryHardwareProfileChange</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a172a113" doxytag="EventCategoryDeviceInterfaceChange" ></a>EventCategoryDeviceInterfaceChange</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a172a114" doxytag="EventCategoryTargetDeviceChange" ></a>EventCategoryTargetDeviceChange</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00459">459</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
<pre class="fragment"><div>00459                                              {
00460     <a class="code" href="../../d6/d9/pnp_8h.html#a172a111">EventCategoryReserved</a>,
00461     <a class="code" href="../../d6/d9/pnp_8h.html#a172a112">EventCategoryHardwareProfileChange</a>,
00462     <a class="code" href="../../d6/d9/pnp_8h.html#a172a113">EventCategoryDeviceInterfaceChange</a>,
00463     <a class="code" href="../../d6/d9/pnp_8h.html#a172a114">EventCategoryTargetDeviceChange</a>
00464 } <a class="code" href="../../d6/d9/pnp_8h.html#a49">IO_NOTIFICATION_EVENT_CATEGORY</a>;
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a176" doxytag="pnp.h::_RESOURCE_TRANSLATION_DIRECTION" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="../../d6/d9/pnp_8h.html#a176">_RESOURCE_TRANSLATION_DIRECTION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="a176a135" doxytag="TranslateChildToParent" ></a>TranslateChildToParent</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a176a136" doxytag="TranslateParentToChild" ></a>TranslateParentToChild</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00853">853</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
<pre class="fragment"><div>00853                                              {
00854     <a class="code" href="../../d6/d9/pnp_8h.html#a176a135">TranslateChildToParent</a>,
00855     <a class="code" href="../../d6/d9/pnp_8h.html#a176a136">TranslateParentToChild</a>
00856 } <a class="code" href="../../d6/d9/pnp_8h.html#a65">RESOURCE_TRANSLATION_DIRECTION</a>;
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a170" doxytag="pnp.h::DEVICE_REGISTRY_PROPERTY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="../../d6/d9/pnp_8h.html#a170">DEVICE_REGISTRY_PROPERTY</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a class="anchor" name="a170a83" doxytag="DevicePropertyDeviceDescription" ></a>DevicePropertyDeviceDescription</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a84" doxytag="DevicePropertyHardwareID" ></a>DevicePropertyHardwareID</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a85" doxytag="DevicePropertyCompatibleIDs" ></a>DevicePropertyCompatibleIDs</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a86" doxytag="DevicePropertyBootConfiguration" ></a>DevicePropertyBootConfiguration</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a87" doxytag="DevicePropertyBootConfigurationTranslated" ></a>DevicePropertyBootConfigurationTranslated</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a88" doxytag="DevicePropertyClassName" ></a>DevicePropertyClassName</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a89" doxytag="DevicePropertyClassGuid" ></a>DevicePropertyClassGuid</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a90" doxytag="DevicePropertyDriverKeyName" ></a>DevicePropertyDriverKeyName</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a91" doxytag="DevicePropertyManufacturer" ></a>DevicePropertyManufacturer</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a92" doxytag="DevicePropertyFriendlyName" ></a>DevicePropertyFriendlyName</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a93" doxytag="DevicePropertyLocationInformation" ></a>DevicePropertyLocationInformation</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a94" doxytag="DevicePropertyPhysicalDeviceObjectName" ></a>DevicePropertyPhysicalDeviceObjectName</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a95" doxytag="DevicePropertyBusTypeGuid" ></a>DevicePropertyBusTypeGuid</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a96" doxytag="DevicePropertyLegacyBusType" ></a>DevicePropertyLegacyBusType</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a97" doxytag="DevicePropertyBusNumber" ></a>DevicePropertyBusNumber</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a98" doxytag="DevicePropertyEnumeratorName" ></a>DevicePropertyEnumeratorName</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a99" doxytag="DevicePropertyAddress" ></a>DevicePropertyAddress</em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a class="anchor" name="a170a100" doxytag="DevicePropertyUINumber" ></a>DevicePropertyUINumber</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00045">45</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
<pre class="fragment"><div>00045              {
00046     <a class="code" href="../../d6/d9/pnp_8h.html#a170a83">DevicePropertyDeviceDescription</a>,
00047     <a class="code" href="../../d6/d9/pnp_8h.html#a170a84">DevicePropertyHardwareID</a>,
00048     <a class="code" href="../../d6/d9/pnp_8h.html#a170a85">DevicePropertyCompatibleIDs</a>,
00049     <a class="code" href="../../d6/d9/pnp_8h.html#a170a86">DevicePropertyBootConfiguration</a>,
00050     <a class="code" href="../../d6/d9/pnp_8h.html#a170a87">DevicePropertyBootConfigurationTranslated</a>,
00051     <a class="code" href="../../d6/d9/pnp_8h.html#a170a88">DevicePropertyClassName</a>,
00052     <a class="code" href="../../d6/d9/pnp_8h.html#a170a89">DevicePropertyClassGuid</a>,
00053     <a class="code" href="../../d6/d9/pnp_8h.html#a170a90">DevicePropertyDriverKeyName</a>,
00054     <a class="code" href="../../d6/d9/pnp_8h.html#a170a91">DevicePropertyManufacturer</a>,
00055     <a class="code" href="../../d6/d9/pnp_8h.html#a170a92">DevicePropertyFriendlyName</a>,
00056     <a class="code" href="../../d6/d9/pnp_8h.html#a170a93">DevicePropertyLocationInformation</a>,
00057     <a class="code" href="../../d6/d9/pnp_8h.html#a170a94">DevicePropertyPhysicalDeviceObjectName</a>,
00058     <a class="code" href="../../d6/d9/pnp_8h.html#a170a95">DevicePropertyBusTypeGuid</a>,
00059     <a class="code" href="../../d6/d9/pnp_8h.html#a170a96">DevicePropertyLegacyBusType</a>,
00060     <a class="code" href="../../d6/d9/pnp_8h.html#a170a97">DevicePropertyBusNumber</a>,
00061     <a class="code" href="../../d6/d9/pnp_8h.html#a170a98">DevicePropertyEnumeratorName</a>,
00062     <a class="code" href="../../d6/d9/pnp_8h.html#a170a99">DevicePropertyAddress</a>,
00063     <a class="code" href="../../d6/d9/pnp_8h.html#a170a100">DevicePropertyUINumber</a>
00064 } <a class="code" href="../../d6/d9/pnp_8h.html#a170">DEVICE_REGISTRY_PROPERTY</a>;
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a140" doxytag="pnp.h::IoGetAssignedResourcesForSuballocation" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS IoGetAssignedResourcesForSuballocation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN INTERFACE_TYPE&nbsp;</td>
          <td class="mdname" nowrap> <em>InterfaceType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BusNumber</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>SlotNumber</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PIO_RESOURCE_DESCRIPTOR&nbsp;</td>
          <td class="mdname" nowrap> <em>ResourceDescriptor</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT <a class="el" href="../../d0/d4/struct__IO__ASSIGNED__RESOURCES.html">PIO_ASSIGNED_RESOURCES</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>List</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a150" doxytag="pnp.h::IoGetDeviceInterfaceAlias" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS NTAPI IoGetDeviceInterfaceAlias           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>SymbolicLinkName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST GUID *&nbsp;</td>
          <td class="mdname" nowrap> <em>AliasInterfaceClassGuid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>AliasSymbolicLinkName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l04946">4946</a> of file <a class="el" href="../../d9/d9/pnpioapi_8c-source.html">pnpioapi.c</a>.
<p>
References <a class="el" href="../../d6/d7/ex_8h-source.html#l02475">ExAcquireResourceExclusive</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l02393">ExReleaseResource</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l05137">IopBuildSymbolicLinkStrings()</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l01983">IopConstStringSize</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l03708">IopDeviceInterfaceKeysFromSymbolicLink()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l05668">IopFreeAllocatedUnicodeString()</a>, <a class="el" href="../../d3/d3/internal_8c-source.html#l02546">IopGetRegistryValue()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l05424">IopParseSymbolicLinkName()</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00862">IopRegistryDataToUnicodeString</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01598">KeEnterCriticalRegion</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01628">KeLeaveCriticalRegion</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00813">KEY_VALUE_DATA</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00036">PpRegistryDeviceResource</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l01215">RtlFreeUnicodeString()</a>, <a class="el" href="../../d2/d6/guid_8c-source.html#l00051">RtlStringFromGUID()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00160">USER_SYMLINK_STRING_PREFIX</a>.
<p>
<pre class="fragment"><div>04954                    :
04955 
04956     This API returns a symbolic link name (i.e., device interface) of a
04957     particular interface <span class="keyword">class </span>that 'aliases' <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified device interface.
04958     Two device interfaces are considered aliases of each other if <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
04959     following two criteria are met:
04960 
04961         1.  Both interfaces are exposed by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> same PDO (devnode).
04962         2.  Both interfaces share <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> same RefString.
04963 
04964 Parameters:
04965 
04966     SymbolicLinkName - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> name of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device interface whose alias <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
04967         to be retrieved.
04968 
04969     AliasInterfaceClassGuid - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> GUID representing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> interface
04970         class for which an alias <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be retrieved.
04971 
04972     AliasSymbolicLinkName - Supplies a pointer to a string which, upon success,
04973         will contain <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> name of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device interface in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified class that
04974         aliases <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> SymbolicLinkName interface.  (This symbolic link name will be
04975         returned in either kernel-mode or user-mode form, depeding upon the form
04976         of the SymbolicLinkName path).
04977 
04978         It <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> caller's responsibility to free <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer allocated for this
04979         string via <a class="code" href="../../d6/d3/cmwraper_8c.html#a26">ExFreePool</a>().
04980 
04981 Return Value:
04982 
04983     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> code that indicates whether or not <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> function was successful.
04984 
04985 --*/
04986 
04987 {
04988     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
04989     HANDLE hKey;
04990     PKEY_VALUE_FULL_INFORMATION pDeviceInstanceInfo;
04991     UNICODE_STRING deviceInstanceString, refString, guidString, otherString;
04992     PUNICODE_STRING pUserString, pKernelString;
04993     BOOLEAN refStringPresent, userModeFormat;
04994 
04995     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
04996 
04997     <span class="comment">//</span>
04998     <span class="comment">// Convert the class guid into string form</span>
04999     <span class="comment">//</span>
05000 
05001     status = <a class="code" href="../../d1/d7/guid_8c.html#a2">RtlStringFromGUID</a>(AliasInterfaceClassGuid, &amp;guidString);
05002     <span class="keywordflow">if</span>( !<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status) ){
05003         <span class="keywordflow">goto</span> clean0;
05004     }
05005 
05006     <span class="comment">//</span>
05007     <span class="comment">// Enter critical section and acquire a lock on the registry.  Both these</span>
05008     <span class="comment">// mechanisms are required to prevent deadlock in the case where an APC</span>
05009     <span class="comment">// routine calls this routine after the registry resource has been claimed</span>
05010     <span class="comment">// in this case it would wait blocking this thread so the registry would</span>
05011     <span class="comment">// never be released -&gt; deadlock.  Critical sectioning the registry manipulation</span>
05012     <span class="comment">// portion solves this problem</span>
05013     <span class="comment">//</span>
05014 
05015     <a class="code" href="../../d4/d9/ke_8h.html#a28">KeEnterCriticalRegion</a>();
05016     <a class="code" href="../../d5/d8/ex_8h.html#a70">ExAcquireResourceExclusive</a>(&amp;PpRegistryDeviceResource, TRUE);
05017 
05018     <span class="comment">//</span>
05019     <span class="comment">// Open the (parent) device interface key--not the refstring-specific one.</span>
05020     <span class="comment">//</span>
05021 
05022     status = <a class="code" href="../../d8/d0/pnpioapi_8c.html#a62">IopDeviceInterfaceKeysFromSymbolicLink</a>(SymbolicLinkName,
05023                                                     KEY_READ,
05024                                                     NULL,
05025                                                     &amp;hKey,
05026                                                     NULL
05027                                                     );
05028     <span class="keywordflow">if</span>(!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
05029         <span class="keywordflow">goto</span> clean1;
05030     }
05031 
05032     <span class="comment">//</span>
05033     <span class="comment">// Get the name of the device instance that 'owns' this interface.</span>
05034     <span class="comment">//</span>
05035 
05036     status = <a class="code" href="../../d6/d5/ioep_8h.html#a52">IopGetRegistryValue</a>(hKey, REGSTR_VAL_DEVICE_INSTANCE, &amp;pDeviceInstanceInfo);
05037 
05038     ZwClose(hKey);
05039 
05040     <span class="keywordflow">if</span>(!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
05041         <span class="keywordflow">goto</span> clean1;
05042     }
05043 
05044     <span class="keywordflow">if</span>(pDeviceInstanceInfo-&gt;Type == REG_SZ) {
05045 
05046         <a class="code" href="../../d9/d0/pnpiop_8h.html#a82">IopRegistryDataToUnicodeString</a>(&amp;deviceInstanceString,
05047                                        (PWSTR)<a class="code" href="../../d9/d0/pnpiop_8h.html#a75">KEY_VALUE_DATA</a>(pDeviceInstanceInfo),
05048                                        pDeviceInstanceInfo-&gt;DataLength
05049                                       );
05050 
05051     } <span class="keywordflow">else</span> {
05052 
05053         status = STATUS_INVALID_PARAMETER_1;
05054         <span class="keywordflow">goto</span> clean2;
05055 
05056     }
05057 
05058     <span class="comment">//</span>
05059     <span class="comment">// Now parse out the refstring, so that we can construct the name of the interface device's</span>
05060     <span class="comment">// alias.  (NOTE: we have not yet verified that the alias actually exists, we're only</span>
05061     <span class="comment">// constructing what its name would be, if it did exist.)</span>
05062     <span class="comment">//</span>
05063     <span class="comment">// Don't bother to check the return code.  If this were a bad string, we'd have already</span>
05064     <span class="comment">// failed above when we called IopDeviceInterfaceKeysFromSymbolicLink.</span>
05065     <span class="comment">//</span>
05066     <a class="code" href="../../d8/d0/pnpioapi_8c.html#a66">IopParseSymbolicLinkName</a>(SymbolicLinkName,
05067                              NULL,
05068                              NULL,
05069                              NULL,
05070                              &amp;refString,
05071                              &amp;refStringPresent,
05072                              NULL
05073                             );
05074 
05075     <span class="comment">//</span>
05076     <span class="comment">// Did the caller supply us with a user-mode or kernel-mode format path?</span>
05077     <span class="comment">//</span>
05078     userModeFormat = (<a class="code" href="../../d9/d0/pnpiop_8h.html#a102">IopConstStringSize</a>(USER_SYMLINK_STRING_PREFIX) ==
05079                           RtlCompareMemory(SymbolicLinkName-&gt;Buffer,
05080                                            USER_SYMLINK_STRING_PREFIX,
05081                                            <a class="code" href="../../d9/d0/pnpiop_8h.html#a102">IopConstStringSize</a>(USER_SYMLINK_STRING_PREFIX)
05082                                           ));
05083 
05084     <span class="keywordflow">if</span>(userModeFormat) {
05085         pUserString = AliasSymbolicLinkName;
05086         pKernelString = &amp;otherString;
05087     } <span class="keywordflow">else</span> {
05088         pKernelString = AliasSymbolicLinkName;
05089         pUserString = &amp;otherString;
05090     }
05091 
05092     status = <a class="code" href="../../d8/d0/pnpioapi_8c.html#a63">IopBuildSymbolicLinkStrings</a>(&amp;deviceInstanceString,
05093                                          &amp;guidString,
05094                                          refStringPresent ? &amp;refString : NULL,
05095                                          pUserString,
05096                                          pKernelString
05097                                          );
05098     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
05099         <span class="keywordflow">goto</span> clean2;
05100     }
05101 
05102     <span class="comment">//</span>
05103     <span class="comment">// OK, we now have the symbolic link name of the alias, but we don't yet know whether</span>
05104     <span class="comment">// it actually exists.  Check this by attempting to open the associated registry key.</span>
05105     <span class="comment">//</span>
05106     status = <a class="code" href="../../d8/d0/pnpioapi_8c.html#a62">IopDeviceInterfaceKeysFromSymbolicLink</a>(AliasSymbolicLinkName,
05107                                                     KEY_READ,
05108                                                     NULL,
05109                                                     NULL,
05110                                                     &amp;hKey
05111                                                     );
05112 
05113     <span class="keywordflow">if</span>(<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
05114         <span class="comment">//</span>
05115         <span class="comment">// Alias exists--close the key handle.</span>
05116         <span class="comment">//</span>
05117         ZwClose(hKey);
05118     } <span class="keywordflow">else</span> {
05119         <a class="code" href="../../d9/d0/pnpiop_8h.html#a374">IopFreeAllocatedUnicodeString</a>(AliasSymbolicLinkName);
05120     }
05121 
05122     <a class="code" href="../../d9/d0/pnpiop_8h.html#a374">IopFreeAllocatedUnicodeString</a>(&amp;otherString);
05123 
05124 clean2:
05125     <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(pDeviceInstanceInfo);
05126 
05127 clean1:
05128     <a class="code" href="../../d5/d8/ex_8h.html#a66">ExReleaseResource</a>(&amp;PpRegistryDeviceResource);
05129     <a class="code" href="../../d4/d9/ke_8h.html#a29">KeLeaveCriticalRegion</a>();
05130     <a class="code" href="../../d6/d6/nls_8c.html#a34">RtlFreeUnicodeString</a>(&amp;guidString);
05131 
05132 clean0:
05133     <span class="keywordflow">return</span> status;
05134 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a149" doxytag="pnp.h::IoGetDeviceInterfaces" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS NTAPI IoGetDeviceInterfaces           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN CONST GUID *&nbsp;</td>
          <td class="mdname" nowrap> <em>InterfaceClassGuid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> PhysicalDeviceObject&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Flags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PWSTR *&nbsp;</td>
          <td class="mdname" nowrap> <em>SymbolicLinkList</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l03419">3419</a> of file <a class="el" href="../../d9/d9/pnpioapi_8c-source.html">pnpioapi.c</a>.
<p>
References <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00357">ASSERT_PDO</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00177">_DEVICE_NODE::InstancePath</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l02707">IopGetDeviceInterfaces()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>.
<p>
Referenced by <a class="el" href="../../d0/d5/ioinit_8c-source.html#l01047">IopCreateArcNames()</a>, and <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l07495">IoRegisterPlugPlayNotification()</a>.
<p>
<pre class="fragment"><div>03428                    :
03429 
03430     This API allows a WDM driver to get a list of paths that represent all
03431     device interfaces registered <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified interface <span class="keyword">class</span>.
03432 
03433 Parameters:
03434 
03435     InterfaceClassGuid - Supplies a pointer to a GUID representing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> interface <span class="keyword">class</span>
03436 <span class="keyword">        </span>for whom a list of members <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be retrieved
03437 
03438     PhysicalDeviceObject - Optionally, supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> PDO for whom
03439         interfaces of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified class are to be re-trieved.  If this parameter
03440         <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not supplied, then all interface devices (regardless of what physical
03441         device exposes them) will be returned.
03442 
03443     Flags - Supplies flags that modify <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> behavior of list retrieval.
03444         The following flags are presently defined:
03445 
03446         <a class="code" href="../../d6/d9/pnp_8h.html#a5">DEVICE_INTERFACE_INCLUDE_NONACTIVE</a> -- If this flag <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> specified, then all
03447             device interfaces, whether currently active or not, will be returned
03448             (potentially filtered based on the PhysicalDeviceObject, if specified).
03449 
03450     SymbolicLinkList - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of a character pointer, that on
03451         success will contain a multi-sz list of \DosDevices\ symbolic link
03452         names that provide <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> requested functionality.  The caller <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a>
03453         responsible for freeing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> memory via <a class="code" href="../../d6/d3/cmwraper_8c.html#a26">ExFreePool</a>
03454 
03455 Return Value:
03456 
03457     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> code that indicates whether or not <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> function was successful.
03458 
03459 --*/
03460 
03461 {
03462     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
03463     PUNICODE_STRING pDeviceName = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
03464     <a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a> pDeviceNode;
03465 
03466     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
03467 
03468     <span class="comment">//</span>
03469     <span class="comment">// Check we have a PDO and if so extract the instance path from it</span>
03470     <span class="comment">//</span>
03471 
03472     <span class="keywordflow">if</span> (ARGUMENT_PRESENT(PhysicalDeviceObject)) {
03473 
03474         <a class="code" href="../../d9/d0/pnpiop_8h.html#a4">ASSERT_PDO</a>(PhysicalDeviceObject);
03475         pDeviceNode = (<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a>) PhysicalDeviceObject-&gt;DeviceObjectExtension-&gt;DeviceNode;
03476         pDeviceName = &amp;pDeviceNode-&gt;InstancePath;
03477     }
03478 
03479     status = <a class="code" href="../../d9/d0/pnpiop_8h.html#a355">IopGetDeviceInterfaces</a>(InterfaceClassGuid,
03480                                     pDeviceName,
03481                                     Flags,
03482                                     FALSE,
03483                                     SymbolicLinkList,
03484                                     NULL
03485                                     );
03486     <span class="keywordflow">return</span> status;
03487 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a144" doxytag="pnp.h::IoGetDeviceProperty" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS IoGetDeviceProperty           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d6/d9/pnp_8h.html#a170">DEVICE_REGISTRY_PROPERTY</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceProperty</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BufferLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>PropertyBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ResultLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00373">373</a> of file <a class="el" href="../../d9/d9/pnpioapi_8c-source.html">pnpioapi.c</a>.
<p>
References <a class="el" href="../../d1/d4/io_8h-source.html#l01974">_DEVICE_CAPABILITIES::Address</a>, <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00357">ASSERT_PDO</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00215">_DEVICE_NODE::ChildBusNumber</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00216">_DEVICE_NODE::ChildBusTypeIndex</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00214">_DEVICE_NODE::ChildInterfaceType</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02415">_BUS_TYPE_GUID_LIST::Count</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a99">DevicePropertyAddress</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a86">DevicePropertyBootConfiguration</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a87">DevicePropertyBootConfigurationTranslated</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a97">DevicePropertyBusNumber</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a95">DevicePropertyBusTypeGuid</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a89">DevicePropertyClassGuid</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a88">DevicePropertyClassName</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a85">DevicePropertyCompatibleIDs</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a83">DevicePropertyDeviceDescription</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a90">DevicePropertyDriverKeyName</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a98">DevicePropertyEnumeratorName</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a92">DevicePropertyFriendlyName</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a84">DevicePropertyHardwareID</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a96">DevicePropertyLegacyBusType</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a93">DevicePropertyLocationInformation</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a91">DevicePropertyManufacturer</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a94">DevicePropertyPhysicalDeviceObjectName</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a170a100">DevicePropertyUINumber</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l02475">ExAcquireResourceExclusive</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00126">ExAllocatePool</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l02393">ExReleaseResource</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02425">_BUS_TYPE_GUID_LIST::Guid</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00177">_DEVICE_NODE::InstancePath</a>, <a class="el" href="../../d2/d9/pnpdata_8c-source.html#l00161">IopBusTypeGuidList</a>, <a class="el" href="../../d1/d1/pri__bld_2pnpsubs_8c-source.html#l03776">IopDeviceObjectToDeviceInstance()</a>, <a class="el" href="../../d3/d3/internal_8c-source.html#l02546">IopGetRegistryValue()</a>, <a class="el" href="../../d0/d1/pnpsubs_8c-source.html#l01104">IopOpenRegistryKeyEx()</a>, <a class="el" href="../../d7/d9/pnpenum_8c-source.html#l03694">IopQueryDeviceCapabilities()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01598">KeEnterCriticalRegion</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01628">KeLeaveCriticalRegion</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00813">KEY_VALUE_DATA</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d0/obquery_8c-source.html#l00713">ObQueryNameString()</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d5/d8/ex_8h.html#a329a174">PagedPool</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00036">PpRegistryDeviceResource</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d7/arbiter_8c-source.html#l03695">ArbQueryConflict()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l08307">IoGetDmaAdapter()</a>, and <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l09922">IopProcessSetInterfaceState()</a>.
<p>
<pre class="fragment"><div>00383                    :
00384 
00385     This routine lets drivers query <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> registry properties associated with <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00386     specified device.
00387 
00388 Parameters:
00389 
00390     DeviceObject - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device object whoes registry property <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be
00391                    returned.  This device object should be <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> one created by
00392                    a bus driver.
00393 
00394     DeviceProperty - Specifies what device property to get.
00395 
00396     BufferLength - Specifies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> length, in byte, of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> PropertyBuffer.
00397 
00398     PropertyBuffer - Supplies a pointer to a buffer to receive property data.
00399 
00400     ResultLength - Supplies a pointer to a variable to receive <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00401                    property data returned.
00402 
00403 ReturnValue:
00404 
00405     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> code that indicates whether or not <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> function was successful.  If
00406     PropertyBuffer <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> not big enough to hold requested data, STATUS_BUFFER_TOO_SMALL
00407     will be returned and ResultLength will be set to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> number of bytes actually
00408     required.
00409 
00410 --*/
00411 
00412 {
00413     <a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a> deviceNode;
00414     <a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html">DEVICE_CAPABILITIES</a> capabilities;
00415     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
00416     HANDLE handle;
00417     PWSTR valueName, keyName = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00418     PKEY_VALUE_FULL_INFORMATION keyValueInformation;
00419     ULONG valueType;
00420     ULONG length;
00421     POBJECT_NAME_INFORMATION deviceObjectName;
00422     PWSTR deviceInstanceName;
00423     PWCHAR enumeratorNameEnd;
00424 
00425     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00426 
00427     <a class="code" href="../../d9/d0/pnpiop_8h.html#a4">ASSERT_PDO</a>(DeviceObject);
00428 
00429     <span class="comment">//</span>
00430     <span class="comment">// Initialize out parameters</span>
00431     <span class="comment">//</span>
00432 
00433     *ResultLength = 0;
00434 
00435     <span class="comment">//</span>
00436     <span class="comment">// Map Device Property to registry value name and value type.</span>
00437     <span class="comment">//</span>
00438 
00439     <span class="keywordflow">switch</span> (DeviceProperty) {
00440 
00441     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a83">DevicePropertyDeviceDescription</a>:
00442         valueName = REGSTR_VALUE_DEVICE_DESC;
00443         valueType = REG_SZ;
00444         <span class="keywordflow">break</span>;
00445 
00446     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a84">DevicePropertyHardwareID</a>:
00447         valueName = REGSTR_VAL_HARDWAREID;
00448         valueType = REG_MULTI_SZ;
00449         <span class="keywordflow">break</span>;
00450 
00451     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a85">DevicePropertyCompatibleIDs</a>:
00452         valueName = REGSTR_VAL_COMPATIBLEIDS;
00453         valueType = REG_MULTI_SZ;
00454         <span class="keywordflow">break</span>;
00455 
00456     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a86">DevicePropertyBootConfiguration</a>:
00457         keyName   = REGSTR_KEY_LOG_CONF;
00458         valueName = REGSTR_VAL_BOOTCONFIG;
00459         valueType = REG_RESOURCE_LIST;
00460         <span class="keywordflow">break</span>;
00461 
00462     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a87">DevicePropertyBootConfigurationTranslated</a>:
00463         <span class="comment">//</span>
00464         <span class="comment">// BUGBUG(andrewth) - support this!</span>
00465         <span class="comment">//</span>
00466         <span class="keywordflow">return</span> STATUS_NOT_SUPPORTED;
00467         <span class="keywordflow">break</span>;
00468 
00469     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a88">DevicePropertyClassName</a>:
00470         valueName = REGSTR_VALUE_CLASS;
00471         valueType = REG_SZ;
00472         <span class="keywordflow">break</span>;
00473 
00474     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a89">DevicePropertyClassGuid</a>:
00475         valueName = REGSTR_VALUE_CLASSGUID;
00476         valueType = REG_SZ;
00477         <span class="keywordflow">break</span>;
00478 
00479     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a90">DevicePropertyDriverKeyName</a>:
00480         valueName = REGSTR_VALUE_DRIVER;
00481         valueType = REG_SZ;
00482         <span class="keywordflow">break</span>;
00483 
00484     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a91">DevicePropertyManufacturer</a>:
00485         valueName = REGSTR_VAL_MFG;
00486         valueType = REG_SZ;
00487         <span class="keywordflow">break</span>;
00488 
00489     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a92">DevicePropertyFriendlyName</a>:
00490         valueName = REGSTR_VALUE_FRIENDLYNAME;
00491         valueType = REG_SZ;
00492         <span class="keywordflow">break</span>;
00493 
00494     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a93">DevicePropertyLocationInformation</a>:
00495         valueName = REGSTR_VAL_LOCATION_INFORMATION;
00496         valueType = REG_SZ;
00497         <span class="keywordflow">break</span>;
00498 
00499     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a100">DevicePropertyUINumber</a>:
00500         valueName = REGSTR_VAL_UI_NUMBER;
00501         valueType = REG_DWORD;
00502         <span class="keywordflow">break</span>;
00503 
00504     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a94">DevicePropertyPhysicalDeviceObjectName</a>:
00505 
00506         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a> (0 == (1 &amp; BufferLength));  <span class="comment">// had better be an even length</span>
00507 
00508         <span class="comment">//</span>
00509         <span class="comment">// Create a buffer for the Obj manager.</span>
00510         <span class="comment">//</span>
00511         length = BufferLength + <span class="keyword">sizeof</span> (OBJECT_NAME_INFORMATION);
00512 
00513         deviceObjectName = (POBJECT_NAME_INFORMATION)
00514                             <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(PagedPool, length);
00515 
00516         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> == deviceObjectName) {
00517             <span class="keywordflow">return</span> STATUS_INSUFFICIENT_RESOURCES;
00518         }
00519 
00520         status = <a class="code" href="../../d6/d1/obquery_8c.html#a7">ObQueryNameString</a> (DeviceObject,
00521                                     deviceObjectName,
00522                                     length,
00523                                     ResultLength);
00524 
00525         <span class="keywordflow">if</span> (STATUS_INFO_LENGTH_MISMATCH == status) {
00526             status = STATUS_BUFFER_TOO_SMALL;
00527         }
00528 
00529         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a> (status)) {
00530 
00531             <span class="keywordflow">if</span> (deviceObjectName-&gt;Name.Length == 0)  {
00532 
00533                 <span class="comment">//</span>
00534                 <span class="comment">// PDO has no NAME, probably it's been deleted</span>
00535                 <span class="comment">//</span>
00536                 *ResultLength = 0;
00537 
00538             } <span class="keywordflow">else</span> {
00539 
00540                 *ResultLength = deviceObjectName-&gt;Name.Length + <span class="keyword">sizeof</span>(UNICODE_NULL);
00541                 <span class="keywordflow">if</span> (*ResultLength &gt; BufferLength) {
00542                     status = STATUS_BUFFER_TOO_SMALL;
00543                 } <span class="keywordflow">else</span> {
00544 
00545                     RtlCopyMemory(PropertyBuffer,
00546                                   deviceObjectName-&gt;Name.Buffer,
00547                                   deviceObjectName-&gt;Name.Length);
00548                     *(PWCHAR) (((PUCHAR) PropertyBuffer) + deviceObjectName-&gt;Name.Length) = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00549                 }
00550             }
00551         } <span class="keywordflow">else</span> {
00552             *ResultLength -= <span class="keyword">sizeof</span>(OBJECT_NAME_INFORMATION);
00553         }
00554 
00555         <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a> (deviceObjectName);
00556         <span class="keywordflow">return</span> status;
00557 
00558 
00559     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a95">DevicePropertyBusTypeGuid</a>:
00560 
00561         deviceNode = (<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a>)DeviceObject-&gt;DeviceObjectExtension-&gt;DeviceNode;
00562         <span class="keywordflow">if</span> (deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o21">ChildBusTypeIndex</a> != 0xffff
00563         &amp;&amp;  deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o21">ChildBusTypeIndex</a> &lt; <a class="code" href="../../d1/d0/pnpdata_8c.html#a22">IopBusTypeGuidList</a>-&gt;<a class="code" href="../../d8/d5/struct__BUS__TYPE__GUID__LIST.html#o0">Count</a>) {
00564 
00565             *ResultLength = <span class="keyword">sizeof</span>(GUID);
00566 
00567             <span class="keywordflow">if</span>(*ResultLength &lt;= BufferLength) {
00568 
00569                 RtlCopyMemory(PropertyBuffer,
00570                               &amp;(<a class="code" href="../../d1/d0/pnpdata_8c.html#a22">IopBusTypeGuidList</a>-&gt;<a class="code" href="../../d8/d5/struct__BUS__TYPE__GUID__LIST.html#o2">Guid</a>[deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o21">ChildBusTypeIndex</a>]),
00571                               <span class="keyword">sizeof</span>(GUID));
00572 
00573                 status = STATUS_SUCCESS;
00574 
00575             } <span class="keywordflow">else</span> {
00576 
00577                 status = STATUS_BUFFER_TOO_SMALL;
00578 
00579             }
00580 
00581         } <span class="keywordflow">else</span> {
00582             status = STATUS_OBJECT_NAME_NOT_FOUND;
00583         }
00584 
00585         <span class="keywordflow">return</span> status;
00586 
00587     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a96">DevicePropertyLegacyBusType</a>:
00588 
00589         deviceNode = (<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a>)DeviceObject-&gt;DeviceObjectExtension-&gt;DeviceNode;
00590         <span class="keywordflow">if</span> (deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o19">ChildInterfaceType</a> != InterfaceTypeUndefined) {
00591 
00592             *ResultLength = <span class="keyword">sizeof</span>(INTERFACE_TYPE);
00593 
00594             <span class="keywordflow">if</span>(*ResultLength &lt;= BufferLength) {
00595 
00596                 *(PINTERFACE_TYPE)PropertyBuffer = deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o19">ChildInterfaceType</a>;
00597                 status = STATUS_SUCCESS;
00598 
00599             } <span class="keywordflow">else</span> {
00600                 status = STATUS_BUFFER_TOO_SMALL;
00601             }
00602 
00603         } <span class="keywordflow">else</span> {
00604             status = STATUS_OBJECT_NAME_NOT_FOUND;
00605         }
00606 
00607         <span class="keywordflow">return</span> status;
00608 
00609     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a97">DevicePropertyBusNumber</a>:
00610 
00611         <span class="comment">//</span>
00612         <span class="comment">// Retrieve the property from the parent's devnode field.</span>
00613         <span class="comment">//</span>
00614 
00615         deviceNode = (<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a>)DeviceObject-&gt;DeviceObjectExtension-&gt;DeviceNode;
00616         <span class="keywordflow">if</span> ((deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o20">ChildBusNumber</a> &amp; 0x80000000) != 0x80000000) {
00617 
00618             *ResultLength = <span class="keyword">sizeof</span>(ULONG);
00619 
00620             <span class="keywordflow">if</span>(*ResultLength &lt;= BufferLength) {
00621 
00622                 *(PULONG)PropertyBuffer = deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o20">ChildBusNumber</a>;
00623                 status = STATUS_SUCCESS;
00624 
00625             } <span class="keywordflow">else</span> {
00626                 status = STATUS_BUFFER_TOO_SMALL;
00627             }
00628 
00629         } <span class="keywordflow">else</span> {
00630             status = STATUS_OBJECT_NAME_NOT_FOUND;
00631         }
00632 
00633         <span class="keywordflow">return</span> status;
00634 
00635     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a98">DevicePropertyEnumeratorName</a>:
00636 
00637         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a> (0 == (1 &amp; BufferLength));  <span class="comment">// had better be an even length</span>
00638 
00639         deviceNode = (<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a>)DeviceObject-&gt;DeviceObjectExtension-&gt;DeviceNode;
00640         deviceInstanceName = deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o13">InstancePath</a>.Buffer;
00641 
00642         <span class="comment">//</span>
00643         <span class="comment">// There should always be a string here, except for (possibly)</span>
00644         <span class="comment">// HTREE\Root\0, but no one should ever be calling us with that PDO</span>
00645         <span class="comment">// anyway.</span>
00646         <span class="comment">//</span>
00647         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a> (deviceInstanceName);
00648 
00649         <span class="comment">//</span>
00650         <span class="comment">// We know we're going to find a separator character (\) in the string,</span>
00651         <span class="comment">// so the fact that unicode strings may not be null-terminated isn't</span>
00652         <span class="comment">// a problem.</span>
00653         <span class="comment">//</span>
00654         enumeratorNameEnd = wcschr(deviceInstanceName, OBJ_NAME_PATH_SEPARATOR);
00655         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a> (enumeratorNameEnd);
00656 
00657         <span class="comment">//</span>
00658         <span class="comment">// Compute required length, minus null terminating character.</span>
00659         <span class="comment">//</span>
00660         length = (ULONG)((PUCHAR)enumeratorNameEnd - (PUCHAR)deviceInstanceName);
00661 
00662         <span class="comment">//</span>
00663         <span class="comment">// Store required length in caller-supplied OUT parameter.</span>
00664         <span class="comment">//</span>
00665         *ResultLength = length + <span class="keyword">sizeof</span>(UNICODE_NULL);
00666 
00667         <span class="keywordflow">if</span>(*ResultLength &gt; BufferLength) {
00668             status = STATUS_BUFFER_TOO_SMALL;
00669         } <span class="keywordflow">else</span> {
00670             memcpy((PUCHAR)PropertyBuffer, (PUCHAR)deviceInstanceName, length);
00671             *(PWCHAR)((PUCHAR)PropertyBuffer + length) = UNICODE_NULL;
00672             status = STATUS_SUCCESS;
00673         }
00674 
00675         <span class="keywordflow">return</span> status;
00676 
00677     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a170a99">DevicePropertyAddress</a>:
00678 
00679         deviceNode = (<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a>)DeviceObject-&gt;DeviceObjectExtension-&gt;DeviceNode;
00680 
00681         status = <a class="code" href="../../d9/d0/pnpiop_8h.html#a330">IopQueryDeviceCapabilities</a>(deviceNode, &amp;capabilities);
00682 
00683         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status) &amp;&amp; (capabilities.<a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o21">Address</a> != 0xFFFFFFFF)) {
00684 
00685             *ResultLength = <span class="keyword">sizeof</span>(ULONG);
00686 
00687             <span class="keywordflow">if</span>(*ResultLength &lt;= BufferLength) {
00688 
00689                 *(PULONG)PropertyBuffer = capabilities.<a class="code" href="../../d3/d3/struct__DEVICE__CAPABILITIES.html#o21">Address</a>;
00690                 status = STATUS_SUCCESS;
00691 
00692             } <span class="keywordflow">else</span> {
00693                 status = STATUS_BUFFER_TOO_SMALL;
00694             }
00695 
00696         } <span class="keywordflow">else</span> {
00697             status = STATUS_OBJECT_NAME_NOT_FOUND;
00698         }
00699 
00700         <span class="keywordflow">return</span> status;
00701 
00702     <span class="keywordflow">default</span>:
00703         status = STATUS_INVALID_PARAMETER_2;
00704         <span class="keywordflow">goto</span> clean0;
00705     }
00706 
00707     <span class="comment">//</span>
00708     <span class="comment">// Enter critical section and acquire a lock on the registry.  Both these</span>
00709     <span class="comment">// mechanisms are required to prevent deadlock in the case where an APC</span>
00710     <span class="comment">// routine calls this routine after the registry resource has been claimed</span>
00711     <span class="comment">// in this case it would wait blocking this thread so the registry would</span>
00712     <span class="comment">// never be released -&gt; deadlock.  Critical sectioning the registry manipulatio</span>
00713     <span class="comment">// portion solves this problem</span>
00714     <span class="comment">//</span>
00715 
00716     <a class="code" href="../../d4/d9/ke_8h.html#a28">KeEnterCriticalRegion</a>();
00717     <a class="code" href="../../d5/d8/ex_8h.html#a70">ExAcquireResourceExclusive</a>(&amp;PpRegistryDeviceResource, TRUE);
00718 
00719     <span class="comment">//</span>
00720     <span class="comment">// Based on the PDO specified by caller, find the handle of its device</span>
00721     <span class="comment">// instance registry key.</span>
00722     <span class="comment">//</span>
00723 
00724     status = <a class="code" href="../../d0/d2/pri__bld_2pnpsubs_8c.html#a24">IopDeviceObjectToDeviceInstance</a>(DeviceObject, &amp;handle, KEY_READ);
00725     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
00726         <span class="keywordflow">goto</span> clean1;
00727     }
00728 
00729     <span class="comment">//</span>
00730     <span class="comment">// If the data is stored in a subkey then open this key and close the old one</span>
00731     <span class="comment">//</span>
00732 
00733     <span class="keywordflow">if</span> (keyName) {
00734         HANDLE subKeyHandle;
00735         UNICODE_STRING unicodeKey;
00736 
00737         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeKey, keyName);
00738         status = <a class="code" href="../../d9/d1/pnpsubs_8c.html#a7">IopOpenRegistryKeyEx</a>( &amp;subKeyHandle,
00739                                        handle,
00740                                        &amp;unicodeKey,
00741                                        KEY_READ
00742                                        );
00743 
00744         <span class="keywordflow">if</span>(<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)){
00745             ZwClose(handle);
00746             handle = subKeyHandle;
00747         } <span class="keywordflow">else</span> {
00748             <span class="keywordflow">goto</span> clean2;
00749         }
00750 
00751     }
00752 
00753     <span class="comment">//</span>
00754     <span class="comment">// Read the registry value of the desired value name</span>
00755     <span class="comment">//</span>
00756 
00757     status = <a class="code" href="../../d6/d5/ioep_8h.html#a52">IopGetRegistryValue</a> (handle,
00758                                   valueName,
00759                                   &amp;keyValueInformation);
00760 
00761 
00762     <span class="comment">//</span>
00763     <span class="comment">// We have finished using the registry so clean up and release our resources</span>
00764     <span class="comment">//</span>
00765 
00766 clean2:
00767     ZwClose(handle);
00768 clean1:
00769     <a class="code" href="../../d5/d8/ex_8h.html#a66">ExReleaseResource</a>(&amp;PpRegistryDeviceResource);
00770     <a class="code" href="../../d4/d9/ke_8h.html#a29">KeLeaveCriticalRegion</a>();
00771 
00772     <span class="comment">//</span>
00773     <span class="comment">// If we have been sucessful finding the info hand it back to the caller</span>
00774     <span class="comment">//</span>
00775 
00776     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
00777 
00778         <span class="comment">//</span>
00779         <span class="comment">// Return the length of the data (or the required length if the buffer is too small)</span>
00780         <span class="comment">//</span>
00781 
00782         *ResultLength = keyValueInformation-&gt;DataLength;
00783 
00784         <span class="comment">//</span>
00785         <span class="comment">// Check that the buffer we have been given is big enough and that the value returned is</span>
00786         <span class="comment">// of the correct registry type</span>
00787         <span class="comment">//</span>
00788 
00789         <span class="keywordflow">if</span> (keyValueInformation-&gt;DataLength &lt;= BufferLength) {
00790             <span class="keywordflow">if</span> (keyValueInformation-&gt;Type == valueType) {
00791                 RtlCopyMemory(PropertyBuffer,
00792                               <a class="code" href="../../d9/d0/pnpiop_8h.html#a75">KEY_VALUE_DATA</a>(keyValueInformation),
00793                               keyValueInformation-&gt;DataLength);
00794 
00795             } <span class="keywordflow">else</span> {
00796                status = STATUS_INVALID_PARAMETER_2;
00797             }
00798         } <span class="keywordflow">else</span> {
00799             status = STATUS_BUFFER_TOO_SMALL;
00800         }
00801 
00802         <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(keyValueInformation);
00803     }
00804 
00805 clean0:
00806     <span class="keywordflow">return</span> status;
00807 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a142" doxytag="pnp.h::IoInvalidateDeviceRelations" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI VOID IoInvalidateDeviceRelations           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d5/io_8h.html#a358">DEVICE_RELATION_TYPE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a154" doxytag="pnp.h::IoInvalidateDeviceState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI VOID IoInvalidateDeviceState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>PhysicalDeviceObject</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l06281">6281</a> of file <a class="el" href="../../d9/d9/pnpioapi_8c-source.html">pnpioapi.c</a>.
<p>
References <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00357">ASSERT_PDO</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00553">DNF_REMOVE_PENDING_CLOSES</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00487">DNF_STARTED</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00129">_DEVICE_NODE::Flags</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l06387">IopInvalidateDeviceStateWorker()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l06327">IopQueueDeviceWorkItem()</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>.
<p>
<pre class="fragment"><div>06287                    :
06288 
06289     This API will cause <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> PnP manager to send <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified PDO an <a class="code" href="../../d0/d5/io_8h.html#a84">IRP_MN_QUERY_PNP_DEVICE_STATE</a>
06290     <a class="code" href="../../d0/d2/struct__IRP.html">IRP</a>.
06291 
06292 Parameters:
06293 
06294     PhysicalDeviceObject - Provides a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> PDO who's state <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be invalidated.
06295 
06296 Return Value:
06297 
06298     none.
06299 
06300 --*/
06301 {
06302     <a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a> deviceNode;
06303 
06304     <a class="code" href="../../d9/d0/pnpiop_8h.html#a4">ASSERT_PDO</a>(PhysicalDeviceObject);
06305 
06306     <span class="comment">//</span>
06307     <span class="comment">// If the call was made before PnP completes device enumeration</span>
06308     <span class="comment">// we can safely ignore it.  PnP manager will do it without</span>
06309     <span class="comment">// driver's request.  If the device was already removed or surprised</span>
06310     <span class="comment">// removed then ignore it as well since this is only valid for started</span>
06311     <span class="comment">// devices.</span>
06312     <span class="comment">//</span>
06313 
06314     deviceNode = (<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a>)PhysicalDeviceObject-&gt;DeviceObjectExtension-&gt;DeviceNode;
06315 
06316     <span class="keywordflow">if</span> ((deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o6">Flags</a> &amp; (<a class="code" href="../../d9/d0/pnpiop_8h.html#a23">DNF_STARTED</a> | <a class="code" href="../../d9/d0/pnpiop_8h.html#a32">DNF_REMOVE_PENDING_CLOSES</a>)) != <a class="code" href="../../d9/d0/pnpiop_8h.html#a23">DNF_STARTED</a>) {
06317         <span class="keywordflow">return</span>;
06318     }
06319 
06320     <a class="code" href="../../d8/d0/pnpioapi_8c.html#a50">IopQueueDeviceWorkItem</a>( PhysicalDeviceObject,
06321                             IopInvalidateDeviceStateWorker,
06322                             NULL);
06323 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a147" doxytag="pnp.h::IoOpenDeviceInterfaceRegistryKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS IoOpenDeviceInterfaceRegistryKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>SymbolicLinkName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>DesiredAccess</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PHANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceInterfaceKey</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l03624">3624</a> of file <a class="el" href="../../d9/d9/pnpioapi_8c-source.html">pnpioapi.c</a>.
<p>
References <a class="el" href="../../d6/d7/ex_8h-source.html#l02475">ExAcquireResourceExclusive</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l02393">ExReleaseResource</a>, <a class="el" href="../../d0/d1/pnpsubs_8c-source.html#l01156">IopCreateRegistryKeyEx()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l03708">IopDeviceInterfaceKeysFromSymbolicLink()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01598">KeEnterCriticalRegion</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01628">KeLeaveCriticalRegion</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00036">PpRegistryDeviceResource</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>03632                    :
03633 
03634     This routine will open <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> registry key where <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> data associated with a
03635     specific device interface can be stored.
03636 
03637 Parameters:
03638 
03639     SymbolicLinkName - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> symbolic link name which was
03640         returned by <a class="code" href="../../d6/d9/pnp_8h.html#a146">IoRegisterDeviceInterface</a> when <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device <span class="keyword">class </span>was registered.
03641 
03642     DesiredAccess - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> access privileges to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> key <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> caller wants.
03643 
03644     DeviceInterfaceKey - Supplies a pointer to a handle which on success will
03645         contain <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> requested registry key.
03646 
03647 Return Value:
03648 
03649     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> code that indicates whether or not <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> function was successful.
03650 
03651 --*/
03652 
03653 {
03654     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
03655     HANDLE hKey;
03656     UNICODE_STRING unicodeString;
03657 
03658     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
03659 
03660     <span class="comment">//</span>
03661     <span class="comment">// Enter critical section and acquire a lock on the registry.  Both these</span>
03662     <span class="comment">// mechanisms are required to prevent deadlock in the case where an APC</span>
03663     <span class="comment">// routine calls this routine after the registry resource has been claimed</span>
03664     <span class="comment">// in this case it would wait blocking this thread so the registry would</span>
03665     <span class="comment">// never be released -&gt; deadlock.  Critical sectioning the registry manipulation</span>
03666     <span class="comment">// portion solves this problem</span>
03667     <span class="comment">//</span>
03668 
03669     <a class="code" href="../../d4/d9/ke_8h.html#a28">KeEnterCriticalRegion</a>();
03670     <a class="code" href="../../d5/d8/ex_8h.html#a70">ExAcquireResourceExclusive</a>(&amp;PpRegistryDeviceResource, TRUE);
03671 
03672     <span class="comment">//</span>
03673     <span class="comment">// Open the interface device key</span>
03674     <span class="comment">//</span>
03675 
03676     status = <a class="code" href="../../d8/d0/pnpioapi_8c.html#a62">IopDeviceInterfaceKeysFromSymbolicLink</a>(SymbolicLinkName,
03677                                                     KEY_READ,
03678                                                     NULL,
03679                                                     NULL,
03680                                                     &amp;hKey
03681                                                     );
03682     <span class="keywordflow">if</span>(!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
03683         <span class="keywordflow">goto</span> clean0;
03684     }
03685 
03686     <span class="comment">//</span>
03687     <span class="comment">// Open the "Device Parameters" subkey.</span>
03688     <span class="comment">//</span>
03689 
03690     PiWstrToUnicodeString(&amp;unicodeString, REGSTR_KEY_DEVICEPARAMETERS);
03691     status = <a class="code" href="../../d9/d1/pnpsubs_8c.html#a8">IopCreateRegistryKeyEx</a>( DeviceInterfaceKey,
03692                                      hKey,
03693                                      &amp;unicodeString,
03694                                      DesiredAccess,
03695                                      REG_OPTION_NON_VOLATILE,
03696                                      NULL
03697                                      );
03698     ZwClose(hKey);
03699 
03700 clean0:
03701     <a class="code" href="../../d5/d8/ex_8h.html#a66">ExReleaseResource</a>(&amp;PpRegistryDeviceResource);
03702     <a class="code" href="../../d4/d9/ke_8h.html#a29">KeLeaveCriticalRegion</a>();
03703 
03704     <span class="keywordflow">return</span> status;
03705 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a145" doxytag="pnp.h::IoOpenDeviceRegistryKey" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS IoOpenDeviceRegistryKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>DevInstKeyType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ACCESS_MASK&nbsp;</td>
          <td class="mdname" nowrap> <em>DesiredAccess</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PHANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>DevInstRegKey</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00810">810</a> of file <a class="el" href="../../d9/d9/pnpioapi_8c-source.html">pnpioapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l02475">ExAcquireResourceExclusive</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00126">ExAllocatePool</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l02393">ExReleaseResource</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00177">_DEVICE_NODE::InstancePath</a>, <a class="el" href="../../d0/d1/pnpsubs_8c-source.html#l01156">IopCreateRegistryKeyEx()</a>, <a class="el" href="../../d1/d1/pri__bld_2pnpsubs_8c-source.html#l03776">IopDeviceObjectToDeviceInstance()</a>, <a class="el" href="../../d3/d3/internal_8c-source.html#l02546">IopGetRegistryValue()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l08501">IopOpenDeviceParametersSubkey()</a>, <a class="el" href="../../d0/d1/pnpsubs_8c-source.html#l01104">IopOpenRegistryKeyEx()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01598">KeEnterCriticalRegion</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01628">KeLeaveCriticalRegion</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00813">KEY_VALUE_DATA</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00123">MAX_RESTPATH_BUF_LEN</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d5/d8/ex_8h.html#a329a174">PagedPool</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00122">PATH_CONTROL_CLASS</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00120">PATH_CURRENTCONTROLSET</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00119">PATH_CURRENTCONTROLSET_HW_PROFILE_CURRENT</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00121">PATH_ENUM</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00394">PLUGPLAY_REGKEY_CURRENT_HWPROFILE</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00392">PLUGPLAY_REGKEY_DEVICE</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00393">PLUGPLAY_REGKEY_DRIVER</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00036">PpRegistryDeviceResource</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l01883">RtlAppendUnicodeStringToString()</a>, <a class="el" href="../../d7/d5/nls_8c-source.html#l01821">RtlAppendUnicodeToString()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00819                    :
00820 
00821     This routine returns a handle to an opened registry key that <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver
00822     may use to store/retrieve configuration information specific to a particular
00823     device instance.
00824 
00825     The driver must call ZwClose to close <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> handle returned from <span class="keyword">this</span> api
00826     when access <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> no longer required.
00827 
00828 Parameters:
00829 
00830     DeviceObject   - Supples <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device object of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> physical device instance to
00831                      open a registry storage key <span class="keywordflow">for</span>.  Normally <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a device object
00832                      created by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> hal bus extender.
00833 
00834     DevInstKeyType - Supplies flags specifying which storage key associated with
00835                      <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device instance <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> to be opened.  May be a combination of
00836                      <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> following value:
00837 
00838                      <a class="code" href="../../d6/d9/pnp_8h.html#a2">PLUGPLAY_REGKEY_DEVICE</a> - Open a key <span class="keywordflow">for</span> storing device specific
00839                          (driver-independent) information relating to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device instance.
00840                          The flag may not be specified with <a class="code" href="../../d6/d9/pnp_8h.html#a3">PLUGPLAY_REGKEY_DRIVER</a>.
00841 
00842                      <a class="code" href="../../d6/d9/pnp_8h.html#a3">PLUGPLAY_REGKEY_DRIVER</a> - Open a key <span class="keywordflow">for</span> storing driver-specific
00843                          information relating to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device instance,  This flag may
00844                          not be specified with <a class="code" href="../../d6/d9/pnp_8h.html#a2">PLUGPLAY_REGKEY_DEVICE</a>.
00845 
00846                      <a class="code" href="../../d6/d9/pnp_8h.html#a4">PLUGPLAY_REGKEY_CURRENT_HWPROFILE</a> - If <span class="keyword">this</span> flag <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> specified,
00847                          then a key in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> current hardware profile branch will be
00848                          opened <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified storage <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a>.  This allows <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver
00849                          to access configuration information that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> hardware profile
00850                          specific.
00851 
00852     DesiredAccess - Specifies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> access mask <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> key to be opened.
00853 
00854     DevInstRegKey - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> address of a variable that receives a handle to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
00855                     opened key <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified registry storage location.
00856 
00857 Return Value:
00858 
00859     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> code that indicates whether or not <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> function was successful.
00860 
00861 --*/
00862 
00863 {
00864 
00865     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status, appendStatus;
00866     HANDLE hBasePath;
00867     UNICODE_STRING unicodeBasePath, unicodeRestPath;
00868 
00869     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
00870 
00871     <span class="comment">//</span>
00872     <span class="comment">// Until SCSIPORT stops passing non PDOs allow the system to boot.</span>
00873     <span class="comment">//</span>
00874     <span class="comment">// ASSERT_PDO(PhysicalDeviceObject);</span>
00875     <span class="comment">//</span>
00876 
00877     <span class="comment">//</span>
00878     <span class="comment">// Initialise out parameters</span>
00879     <span class="comment">//</span>
00880 
00881     *DevInstRegKey = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00882 
00883     <span class="comment">//</span>
00884     <span class="comment">// Allocate a buffer to build the RestPath string in</span>
00885     <span class="comment">//</span>
00886 
00887     <span class="keywordflow">if</span>(!(unicodeRestPath.Buffer = <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(PagedPool, MAX_RESTPATH_BUF_LEN))) {
00888         status = STATUS_INSUFFICIENT_RESOURCES;
00889         <span class="keywordflow">goto</span> clean0;
00890     }
00891 
00892     unicodeRestPath.Length=0;
00893     unicodeRestPath.MaximumLength=<a class="code" href="../../d8/d0/pnpioapi_8c.html#a5">MAX_RESTPATH_BUF_LEN</a>;
00894 
00895     <span class="comment">//</span>
00896     <span class="comment">// Select the base path to the CurrentControlSet based on if we are dealing with</span>
00897     <span class="comment">// a hardware profile or not</span>
00898     <span class="comment">//</span>
00899 
00900     <span class="keywordflow">if</span>(DevInstKeyType &amp; <a class="code" href="../../d6/d9/pnp_8h.html#a4">PLUGPLAY_REGKEY_CURRENT_HWPROFILE</a>) {
00901         PiWstrToUnicodeString(&amp;unicodeBasePath, PATH_CURRENTCONTROLSET_HW_PROFILE_CURRENT);
00902 
00903     } <span class="keywordflow">else</span> {
00904         PiWstrToUnicodeString(&amp;unicodeBasePath, PATH_CURRENTCONTROLSET);
00905     }
00906 
00907     <span class="comment">//</span>
00908     <span class="comment">// Enter critical section and acquire a lock on the registry.  Both these</span>
00909     <span class="comment">// mechanisms are required to prevent deadlock in the case where an APC</span>
00910     <span class="comment">// routine calls this routine after the registry resource has been claimed</span>
00911     <span class="comment">// in this case it would wait blocking this thread so the registry would</span>
00912     <span class="comment">// never be released -&gt; deadlock.  Critical sectioning the registry manipulation</span>
00913     <span class="comment">// portion solves this problem</span>
00914     <span class="comment">//</span>
00915 
00916     <a class="code" href="../../d4/d9/ke_8h.html#a28">KeEnterCriticalRegion</a>();
00917     <a class="code" href="../../d5/d8/ex_8h.html#a70">ExAcquireResourceExclusive</a>(&amp;PpRegistryDeviceResource, TRUE);
00918 
00919     <span class="comment">//</span>
00920     <span class="comment">// Open the base registry key</span>
00921     <span class="comment">//</span>
00922 
00923     status = <a class="code" href="../../d9/d1/pnpsubs_8c.html#a7">IopOpenRegistryKeyEx</a>( &amp;hBasePath,
00924                                    NULL,
00925                                    &amp;unicodeBasePath,
00926                                    KEY_READ
00927                                    );
00928 
00929     <span class="keywordflow">if</span>(!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
00930         <span class="keywordflow">goto</span> clean1;
00931     }
00932 
00933     <span class="comment">//</span>
00934     <span class="comment">// Build the RestPath string</span>
00935     <span class="comment">//</span>
00936 
00937     <span class="keywordflow">switch</span> (DevInstKeyType) {
00938 
00939     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a2">PLUGPLAY_REGKEY_DEVICE</a>:
00940     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a2">PLUGPLAY_REGKEY_DEVICE</a> + <a class="code" href="../../d6/d9/pnp_8h.html#a4">PLUGPLAY_REGKEY_CURRENT_HWPROFILE</a>:
00941         {
00942             <a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a> pDeviceNode;
00943 
00944             <span class="comment">//</span>
00945             <span class="comment">// Initialise the rest path with Enum\</span>
00946             <span class="comment">//</span>
00947 
00948             appendStatus = <a class="code" href="../../d6/d6/nls_8c.html#a45">RtlAppendUnicodeToString</a>(&amp;unicodeRestPath, PATH_ENUM);
00949             <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( appendStatus ));
00950             <span class="comment">//</span>
00951             <span class="comment">// Get the Enumerator\DeviceID\InstanceID path from the DeviceNode</span>
00952             <span class="comment">//</span>
00953 
00954             pDeviceNode = (<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a>) PhysicalDeviceObject-&gt;DeviceObjectExtension-&gt;DeviceNode;
00955 
00956             <span class="comment">//</span>
00957             <span class="comment">// Ensure this is a PDO and not an FDO (only PDO's have a DeviceNode)</span>
00958             <span class="comment">//</span>
00959 
00960             <span class="keywordflow">if</span> (pDeviceNode) {
00961                 appendStatus = <a class="code" href="../../d6/d6/nls_8c.html#a46">RtlAppendUnicodeStringToString</a>(&amp;unicodeRestPath, &amp;(pDeviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o13">InstancePath</a>));
00962                 <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( appendStatus ));
00963             } <span class="keywordflow">else</span> {
00964                 status = STATUS_INVALID_DEVICE_REQUEST;
00965             }
00966 
00967             <span class="keywordflow">break</span>;
00968         }
00969 
00970     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a3">PLUGPLAY_REGKEY_DRIVER</a>:
00971     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a3">PLUGPLAY_REGKEY_DRIVER</a> + <a class="code" href="../../d6/d9/pnp_8h.html#a4">PLUGPLAY_REGKEY_CURRENT_HWPROFILE</a>:
00972         {
00973 
00974             HANDLE hDeviceKey;
00975             PKEY_VALUE_FULL_INFORMATION pDriverKeyInfo;
00976 
00977             <span class="comment">//</span>
00978             <span class="comment">// Initialise the rest path with Control\Class\</span>
00979             <span class="comment">//</span>
00980 
00981             appendStatus = <a class="code" href="../../d6/d6/nls_8c.html#a45">RtlAppendUnicodeToString</a>(&amp;unicodeRestPath, PATH_CONTROL_CLASS);
00982             <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( appendStatus ));
00983 
00984             <span class="comment">//</span>
00985             <span class="comment">// Open the device instance key for this device</span>
00986             <span class="comment">//</span>
00987 
00988             status = <a class="code" href="../../d0/d2/pri__bld_2pnpsubs_8c.html#a24">IopDeviceObjectToDeviceInstance</a>(PhysicalDeviceObject, &amp;hDeviceKey, KEY_READ);
00989 
00990             <span class="keywordflow">if</span>(!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)){
00991                 <span class="keywordflow">goto</span> clean1;
00992             }
00993 
00994             <span class="comment">//</span>
00995             <span class="comment">// See if we have a driver value</span>
00996             <span class="comment">//</span>
00997 
00998             status = <a class="code" href="../../d6/d5/ioep_8h.html#a52">IopGetRegistryValue</a>(hDeviceKey, REGSTR_VALUE_DRIVER, &amp;pDriverKeyInfo );
00999 
01000             <span class="keywordflow">if</span>(<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)){
01001 
01002                 <span class="keywordflow">if</span>(pDriverKeyInfo-&gt;Type == REG_SZ) {
01003 
01004                 <span class="comment">//</span>
01005                 <span class="comment">// Append &lt;DevInstClass&gt;&lt;ClassInstanceOrdinal&gt;</span>
01006                 <span class="comment">//</span>
01007 
01008                 appendStatus = <a class="code" href="../../d6/d6/nls_8c.html#a45">RtlAppendUnicodeToString</a>(&amp;unicodeRestPath, (PWSTR) <a class="code" href="../../d9/d0/pnpiop_8h.html#a75">KEY_VALUE_DATA</a>(pDriverKeyInfo));
01009                 <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>( appendStatus ));
01010 
01011                 } <span class="keywordflow">else</span> {
01012                     <span class="comment">//</span>
01013                     <span class="comment">// We have a driver key with a non REG_SZ type - something is wrong - blame the PDO!</span>
01014                     <span class="comment">//</span>
01015 
01016                     status = STATUS_INVALID_PARAMETER_1;
01017                 }
01018 
01019                 <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(pDriverKeyInfo);
01020             }
01021 
01022             ZwClose(hDeviceKey);
01023 
01024             <span class="keywordflow">break</span>;
01025         }
01026     <span class="keywordflow">default</span>:
01027         status = STATUS_INVALID_PARAMETER_3;
01028         <span class="keywordflow">goto</span> clean2;
01029     }
01030 
01031 
01032     <span class="comment">//</span>
01033     <span class="comment">// If we succeeded in building the rest path then open the key and hand it back to the caller</span>
01034     <span class="comment">//</span>
01035 
01036     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)){
01037         <span class="keywordflow">if</span> (DevInstKeyType == <a class="code" href="../../d6/d9/pnp_8h.html#a2">PLUGPLAY_REGKEY_DEVICE</a>) {
01038 
01039             status = <a class="code" href="../../d9/d0/pnpiop_8h.html#a304">IopOpenDeviceParametersSubkey</a>(DevInstRegKey,
01040                                                    hBasePath,
01041                                                    &amp;unicodeRestPath,
01042                                                    DesiredAccess);
01043         } <span class="keywordflow">else</span> {
01044 
01045             status = <a class="code" href="../../d9/d1/pnpsubs_8c.html#a8">IopCreateRegistryKeyEx</a>( DevInstRegKey,
01046                                              hBasePath,
01047                                              &amp;unicodeRestPath,
01048                                              DesiredAccess,
01049                                              REG_OPTION_NON_VOLATILE,
01050                                              NULL
01051                                              );
01052         }
01053     }
01054 
01055     <span class="comment">//</span>
01056     <span class="comment">// Free up resources</span>
01057     <span class="comment">//</span>
01058 
01059 clean2:
01060     ZwClose(hBasePath);
01061 clean1:
01062     <a class="code" href="../../d5/d8/ex_8h.html#a66">ExReleaseResource</a>(&amp;PpRegistryDeviceResource);
01063     <a class="code" href="../../d4/d9/ke_8h.html#a29">KeLeaveCriticalRegion</a>();
01064     <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(unicodeRestPath.Buffer);
01065 clean0:
01066     <span class="keywordflow">return</span> status;
01067 
01068 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a169" doxytag="pnp.h::IoPnPDeliverServicePowerNotification" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ULONG IoPnPDeliverServicePowerNotification           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>PwrNotification</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Synchronous</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l09221">9221</a> of file <a class="el" href="../../d9/d9/pnpioapi_8c-source.html">pnpioapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00126">ExAllocatePool</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00623">Executive</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/iosubs_8c-source.html#l08909">IoRaiseInformationalHardError()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01066">KeInitializeEvent</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00624">KernelMode</a>, <a class="el" href="../../d2/d6/wait_8c-source.html#l00810">KeWaitForSingleObject()</a>, <a class="el" href="../../d8/d0/pnpioapi_8c.html#a30">MAX_VETO_NAME_LENGTH</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d5/d8/ex_8h.html#a329a174">PagedPool</a>, and <a class="el" href="../../d6/d9/pnp_8h.html#a165">PpSetPowerEvent()</a>.
<p>
Referenced by <a class="el" href="../../d4/d5/kernel_2sendmsg_8c-source.html#l00466">xxxSendMessageBSM()</a>.
<p>
<pre class="fragment"><div>09225 {
09226 
09227     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status = STATUS_SUCCESS;
09228     <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> completionEvent;
09229     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> completionStatus=STATUS_SUCCESS;
09230     PNP_VETO_TYPE vetoType = PNP_VetoTypeUnknown;
09231     UNICODE_STRING vetoName;
09232 
09233     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
09234 
09235 <span class="preprocessor">#define MAX_VETO_NAME_LENGTH    512 //From Revent.c make it common</span>
09236 <span class="preprocessor"></span>
09237     <span class="keywordflow">if</span> (Synchronous) {
09238 
09239 
09240 
09241         vetoName.Buffer = <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a> (PagedPool,MAX_VETO_NAME_LENGTH*<span class="keyword">sizeof</span> (WCHAR));
09242 
09243         <span class="keywordflow">if</span> (vetoName.Buffer) {
09244             vetoName.MaximumLength = <a class="code" href="../../d8/d0/pnpioapi_8c.html#a30">MAX_VETO_NAME_LENGTH</a>;
09245         }<span class="keywordflow">else</span> {
09246             vetoName.MaximumLength = 0;
09247         }
09248         vetoName.Length = 0;
09249 
09250         <a class="code" href="../../d4/d9/ke_8h.html#a20">KeInitializeEvent</a>(&amp;completionEvent, NotificationEvent, FALSE);
09251 
09252         status = <a class="code" href="../../d6/d9/pnp_8h.html#a165">PpSetPowerEvent</a>(
09253             PwrNotification,
09254             &amp;completionEvent,
09255             &amp;completionStatus,
09256             &amp;vetoType,&amp;vetoName
09257             );
09258 
09259         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status))  {
09260 
09261             <a class="code" href="../../d1/d7/wait_8c.html#a4">KeWaitForSingleObject</a>( &amp;completionEvent, Executive, KernelMode, FALSE, NULL );
09262             status = completionStatus;
09263 
09264             <span class="keywordflow">if</span> (vetoType == PNP_VetoWindowsService) {
09265                 <a class="code" href="../../d4/d6/iosubs_8c.html#a94">IoRaiseInformationalHardError</a> (STATUS_DRIVER_FAILED_SLEEP,&amp;vetoName,NULL);
09266             }
09267 
09268         }
09269         <span class="keywordflow">if</span> (vetoName.Buffer) {
09270             <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a> (vetoName.Buffer);
09271         }
09272 
09273     } <span class="keywordflow">else</span> {
09274         status = <a class="code" href="../../d6/d9/pnp_8h.html#a165">PpSetPowerEvent</a>(
09275             PwrNotification,
09276             NULL,
09277             NULL,
09278             NULL,
09279             NULL
09280             );
09281     }
09282 
09283     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a> ((completionStatus == STATUS_SUCCESS) ||
09284             (completionStatus == STATUS_UNSUCCESSFUL));
09285     <span class="comment">//</span>
09286     <span class="comment">// The private code in Win32k that calls this, assumes that 0 is failure, !0 is success</span>
09287     <span class="comment">//</span>
09288 
09289     <span class="keywordflow">return</span> (completionStatus != STATUS_UNSUCCESSFUL);
09290 
09291 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a146" doxytag="pnp.h::IoRegisterDeviceInterface" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS NTAPI IoRegisterDeviceInterface           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PhysicalDeviceObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST GUID *&nbsp;</td>
          <td class="mdname" nowrap> <em>InterfaceClassGuid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>ReferenceString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OPTIONAL OUT PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>SymbolicLinkName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a151" doxytag="pnp.h::IoRegisterPlugPlayNotification" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS IoRegisterPlugPlayNotification           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d6/d9/pnp_8h.html#a49">IO_NOTIFICATION_EVENT_CATEGORY</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>EventCategory</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>EventCategoryFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID EventCategoryData&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DriverObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d6/d9/pnp_8h.html#a50">PDRIVER_NOTIFICATION_CALLBACK_ROUTINE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CallbackRoutine</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PVOID *&nbsp;</td>
          <td class="mdname" nowrap> <em>NotificationEntry</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l07495">7495</a> of file <a class="el" href="../../d9/d9/pnpioapi_8c-source.html">pnpioapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02328">_SETUP_NOTIFY_DATA::Callback</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02350">_HWPROFILE_NOTIFY_ENTRY::Callback</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02266">_TARGET_DEVICE_NOTIFY_ENTRY::Callback</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02301">_DEVICE_CLASS_NOTIFY_ENTRY::Callback</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00064">_NOTIFICATION_CALLBACK_PARAM_BLOCK::Callout</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02312">_DEVICE_CLASS_NOTIFY_ENTRY::ClassGuid</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02329">_SETUP_NOTIFY_DATA::Context</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02351">_HWPROFILE_NOTIFY_ENTRY::Context</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02267">_TARGET_DEVICE_NOTIFY_ENTRY::Context</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02302">_DEVICE_CLASS_NOTIFY_ENTRY::Context</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00066">_NOTIFICATION_CALLBACK_PARAM_BLOCK::Context</a>, <a class="el" href="../../d7/d5/memprint_8h-source.html#l00079">DbgPrint</a>, <a class="el" href="../../d9/d0/pnpiop_8h.html#a170">DEVICE_CLASS_NOTIFY_ENTRY</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02330">_SETUP_NOTIFY_DATA::DriverObject</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02352">_HWPROFILE_NOTIFY_ENTRY::DriverObject</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02268">_TARGET_DEVICE_NOTIFY_ENTRY::DriverObject</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02303">_DEVICE_CLASS_NOTIFY_ENTRY::DriverObject</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00965">_DEVICE_INTERFACE_CHANGE_NOTIFICATION::Event</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02327">_SETUP_NOTIFY_DATA::EventCategory</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02349">_HWPROFILE_NOTIFY_ENTRY::EventCategory</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02265">_TARGET_DEVICE_NOTIFY_ENTRY::EventCategory</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02300">_DEVICE_CLASS_NOTIFY_ENTRY::EventCategory</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a172a113">EventCategoryDeviceInterfaceChange</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a172a112">EventCategoryHardwareProfileChange</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a172a111">EventCategoryReserved</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a172a114">EventCategoryTargetDeviceChange</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00126">ExAllocatePool</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02277">_TARGET_DEVICE_NOTIFY_ENTRY::FileObject</a>, <a class="el" href="../../d9/d0/pnpiop_8h.html#a174">HWPROFILE_NOTIFY_ENTRY</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00969">_DEVICE_INTERFACE_CHANGE_NOTIFICATION::InterfaceClassGuid</a>, <a class="el" href="../../d4/d4/iodata_8c-source.html#l00236">IoDriverObjectType</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l03419">IoGetDeviceInterfaces()</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02053">IopAcquireNotifyLock</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00199">IopDeferredRegistrationList</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00200">IopDeferredRegistrationLock</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00183">IopDeviceClassNotifyList</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00184">IopDeviceClassNotifyLock</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l08036">IopGetRelatedTargetDevice()</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02040">IopHashGuid</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00188">IopHwProfileNotifyLock</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l09333">IopPnPHydraCallback()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00187">IopProfileNotifyList</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l06564">IopReferenceNotify()</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02061">IopReleaseNotifyLock</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00185">IopSetupNotifyData</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00186">IopTargetDeviceNotifyLock</a>, <a class="el" href="../../d3/d6/alpha_2kdpcpu_8h-source.html#l00070">KeGetCurrentThread</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00624">KernelMode</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02326">_SETUP_NOTIFY_DATA::ListEntry</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02333">_SETUP_NOTIFY_DATA::Lock</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02355">_HWPROFILE_NOTIFY_ENTRY::Lock</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02271">_TARGET_DEVICE_NOTIFY_ENTRY::Lock</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02306">_DEVICE_CLASS_NOTIFY_ENTRY::Lock</a>, <a class="el" href="../../d2/d1/mm_8h.html#a197">MmDispatchWin32Callout()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00065">_NOTIFICATION_CALLBACK_PARAM_BLOCK::NotificationStructure</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00197">_DEFERRED_REGISTRATION_ENTRY::NotifyEntry</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00494">ObDereferenceObject</a>, <a class="el" href="../../d8/d0/obref_8c-source.html#l01022">ObReferenceObjectByPointer()</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d5/d8/ex_8h.html#a329a174">PagedPool</a>, <a class="el" href="../../d8/d0/pnpioapi_8c.html#a46">PDEFERRED_REGISTRATION_ENTRY</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00151">_DEVICE_NODE::PhysicalDeviceObject</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02285">_TARGET_DEVICE_NOTIFY_ENTRY::PhysicalDeviceObject</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00189">PiNotificationInProgress</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00190">PiNotificationInProgressLock</a>, <a class="el" href="../../d3/d0/mm_8h-source.html#l00559">PKWIN32_CALLOUT</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02359">PNP_NOTIFICATION_VERSION</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00471">PNPNOTIFY_DEVICE_INTERFACE_INCLUDE_EXISTING_INTERFACES</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02331">_SETUP_NOTIFY_DATA::RefCount</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02353">_HWPROFILE_NOTIFY_ENTRY::RefCount</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02269">_TARGET_DEVICE_NOTIFY_ENTRY::RefCount</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02304">_DEVICE_CLASS_NOTIFY_ENTRY::RefCount</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d9/d0/pnpiop_8h.html#a172">SETUP_NOTIFY_DATA</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00964">_DEVICE_INTERFACE_CHANGE_NOTIFICATION::Size</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00970">_DEVICE_INTERFACE_CHANGE_NOTIFICATION::SymbolicLinkName</a>, <a class="el" href="../../d9/d0/pnpiop_8h.html#a168">TARGET_DEVICE_NOTIFY_ENTRY</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00232">_DEVICE_NODE::TargetDeviceNotify</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02332">_SETUP_NOTIFY_DATA::Unregistered</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02354">_HWPROFILE_NOTIFY_ENTRY::Unregistered</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02270">_TARGET_DEVICE_NOTIFY_ENTRY::Unregistered</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02305">_DEVICE_CLASS_NOTIFY_ENTRY::Unregistered</a>, and <a class="el" href="../../d7/d8/pnp_8h-source.html#l00963">_DEVICE_INTERFACE_CHANGE_NOTIFICATION::Version</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00310">DeviceClassCDROMNotify()</a>, <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00929">RegisterForDeviceChangeNotifications()</a>, and <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00639">xxxRegisterForDeviceClassNotifications()</a>.
<p>
<pre class="fragment"><div>07506                    :
07507 
07508     <a class="code" href="../../d6/d9/pnp_8h.html#a151">IoRegisterPlugPlayNotification</a> provides a mechanism by which WDM drivers may
07509     receive notification (via callback) <span class="keywordflow">for</span> a variety of Plug&amp;Play events.
07510 
07511 Arguments:
07512 
07513     EventCategory - Specifies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> event category being registered <span class="keywordflow">for</span>.  WDM drivers
07514         may currently <span class="keyword">register</span> <span class="keywordflow">for</span> hard-ware profile changes, device <span class="keyword">class </span>changes
07515         (instance arrivals and removals), and target device changes (query-removal,
07516         cancel-removal, removal-complete, as well as 3rd-party extensible events).
07517 
07518     EventCategoryFlags - Supplies flags that modify <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> behavior of event registration.
07519         There <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> a separate group of flags defined for each event category.  Presently,
07520         <a class="code" href="../../d3/d0/imm32_8def.html#a1">only</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> interface device change event category has any flags defined:
07521 
07522             DEVICE_CLASS_NOTIFY_FOR_EXISTING_DEVICES -- Drivers wishing to retrieve a
07523                 complete list of all interface devices presently available, and keep
07524                 <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> list up-to-date (i.e., receive notification of interface device
07525                 arrivals and removals), may specify this flag.  This will cause <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
07526                 PnP manager to immediately notify <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver about every currently-existing
07527                 device of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified interface class.
07528 
07529     EventCategoryData - Used to  'filter' events of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> desired category based on <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
07530         supplied criteria.  Not all event categories will use this parameter.  The
07531         event categories presently defined use this information as fol-lows:
07532 
07533         <a class="code" href="../../d6/d9/pnp_8h.html#a172a112">EventCategoryHardwareProfileChange</a> -- this parameter <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> unused, and should be <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>.
07534         EventCategoryDeviceClassChange -- LPGUID representing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> interface class of interest
07535         <a class="code" href="../../d6/d9/pnp_8h.html#a172a114">EventCategoryTargetDeviceChange</a> -- <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a> of interest
07536 
07537     DriverObject - The caller must supply a reference to its driver object (obtained via
07538         ObReferenceObject), to prevent <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver from being unloaded while registered for
07539         notification.  The PnP <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a79">Manager</a> will dereference <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver object when <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver
07540         unregisters for notification via <a class="code" href="../../d6/d9/pnp_8h.html#a152">IoUnregisterPlugPlayNotification</a>).
07541 
07542     CallbackRoutine - Entry point within <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver that <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> PnP manager should call
07543         whenever an applicable PnP event occurs.  The entry point must have <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
07544         following prototype:
07545 
07546             typedef
07547             <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>
07548             (*PDRIVER_NOTIFICATION_CALLBACK_ROUTINE) (
07549                 IN PVOID NotificationStructure,
07550                 IN PVOID Context
07551                 );
07552 
07553         where NotificationStructure contains information about <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> event.  Each event
07554         GUID within an event category may potentially have its own notification structure
07555         <a class="code" href="../../d8/d0/rtbatcr_8c.html#a8">format</a>, but <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> buffer must al-ways begin with a <a class="code" href="../../d9/d5/struct__PLUGPLAY__NOTIFICATION__HEADER.html">PLUGPLAY_NOTIFICATION_HEADER</a>,
07556         which indicates <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size and ver-sion of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> structure, as well as <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> GUID for
07557         <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> event.
07558 
07559         The Context parameter provides <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> callback with <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> same context data that <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
07560         caller passed in during registration.
07561 
07562     Context - Points to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> context data passed to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> callback upon event notification.
07563 
07564     NotificationEntry - Upon success, receives a handle representing <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> notification
07565         registration.  This handle may be used to unregister for notification via
07566         <a class="code" href="../../d6/d9/pnp_8h.html#a152">IoUnregisterPlugPlayNotification</a>.
07567 
07568 --*/
07569 {
07570 
07571     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status = STATUS_SUCCESS;
07572 <span class="preprocessor">#if DBG</span>
07573 <span class="preprocessor"></span>    ULONG originalApcDisable;
07574 <span class="preprocessor">#endif</span>
07575 <span class="preprocessor"></span>
07576     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
07577 
07578     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(NotificationEntry);
07579 
07580     <span class="comment">//</span>
07581     <span class="comment">// Initialize out parameters</span>
07582     <span class="comment">//</span>
07583 
07584     *NotificationEntry = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
07585 
07586     <span class="comment">//</span>
07587     <span class="comment">// Reference the driver object so it doesn't go away while we still have</span>
07588     <span class="comment">// a pointer outstanding</span>
07589     <span class="comment">//</span>
07590     status = <a class="code" href="../../d7/d1/obref_8c.html#a6">ObReferenceObjectByPointer</a>(DriverObject,
07591                                         0,
07592                                         IoDriverObjectType,
07593                                         KernelMode
07594                                         );
07595 
07596     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
07597         <span class="keywordflow">return</span> status;
07598     }
07599 
07600     <span class="keywordflow">switch</span> (EventCategory) {
07601 
07602     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a172a111">EventCategoryReserved</a>:
07603         {
07604 
07605             <a class="code" href="../../d7/d2/struct__SETUP__NOTIFY__DATA.html">PSETUP_NOTIFY_DATA</a> setupData;
07606 
07607             <span class="comment">//</span>
07608             <span class="comment">// Allocate space for the setup data</span>
07609             <span class="comment">//</span>
07610 
07611             setupData = <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(PagedPool, <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d2/struct__SETUP__NOTIFY__DATA.html">SETUP_NOTIFY_DATA</a>));
07612             <span class="keywordflow">if</span> (!setupData) {
07613                 status = STATUS_INSUFFICIENT_RESOURCES;
07614                 <span class="keywordflow">goto</span> clean0;
07615             }
07616 
07617             <span class="comment">//</span>
07618             <span class="comment">// Store the required information</span>
07619             <span class="comment">//</span>
07620             InitializeListHead(&amp;(setupData-&gt;<a class="code" href="../../d7/d2/struct__SETUP__NOTIFY__DATA.html#o0">ListEntry</a>));
07621             setupData-&gt;<a class="code" href="../../d7/d2/struct__SETUP__NOTIFY__DATA.html#o1">EventCategory</a> = EventCategory;
07622             setupData-&gt;<a class="code" href="../../d7/d2/struct__SETUP__NOTIFY__DATA.html#o2">Callback</a> = CallbackRoutine;
07623             setupData-&gt;<a class="code" href="../../d7/d2/struct__SETUP__NOTIFY__DATA.html#o3">Context</a> = Context;
07624             setupData-&gt;<a class="code" href="../../d7/d2/struct__SETUP__NOTIFY__DATA.html#o5">RefCount</a> = 1;
07625             setupData-&gt;<a class="code" href="../../d7/d2/struct__SETUP__NOTIFY__DATA.html#o6">Unregistered</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
07626             setupData-&gt;<a class="code" href="../../d7/d2/struct__SETUP__NOTIFY__DATA.html#o7">Lock</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
07627             setupData-&gt;<a class="code" href="../../d7/d2/struct__SETUP__NOTIFY__DATA.html#o4">DriverObject</a> = DriverObject;
07628 
07629             <span class="comment">//</span>
07630             <span class="comment">// Activate the notifications</span>
07631             <span class="comment">//</span>
07632 
07633             <a class="code" href="../../d8/d0/pnpioapi_8c.html#a39">IopSetupNotifyData</a> = setupData;
07634 
07635             <span class="comment">//</span>
07636             <span class="comment">// Explicitly NULL out the returned entry as you can *NOT* unregister</span>
07637             <span class="comment">// for setup notifications</span>
07638             <span class="comment">//</span>
07639 
07640             *NotificationEntry = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
07641 
07642             <span class="keywordflow">break</span>;
07643 
07644         }
07645 
07646     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a172a112">EventCategoryHardwareProfileChange</a>:
07647         {
07648             <a class="code" href="../../d0/d9/struct__HWPROFILE__NOTIFY__ENTRY.html">PHWPROFILE_NOTIFY_ENTRY</a> entry;
07649 
07650             <span class="comment">//</span>
07651             <span class="comment">// new entry</span>
07652             <span class="comment">//</span>
07653             entry =<a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a> (PagedPool,<span class="keyword">sizeof</span> (<a class="code" href="../../d0/d9/struct__HWPROFILE__NOTIFY__ENTRY.html">HWPROFILE_NOTIFY_ENTRY</a>));
07654             <span class="keywordflow">if</span> (!entry) {
07655                 status = STATUS_INSUFFICIENT_RESOURCES;
07656                 <span class="keywordflow">goto</span> clean0;
07657             }
07658 
07659             <span class="comment">//</span>
07660             <span class="comment">// grab the fields</span>
07661             <span class="comment">//</span>
07662 
07663             entry-&gt;<a class="code" href="../../d0/d9/struct__HWPROFILE__NOTIFY__ENTRY.html#o1">EventCategory</a> = EventCategory;
07664             entry-&gt;<a class="code" href="../../d0/d9/struct__HWPROFILE__NOTIFY__ENTRY.html#o2">Callback</a> = CallbackRoutine;
07665             entry-&gt;<a class="code" href="../../d0/d9/struct__HWPROFILE__NOTIFY__ENTRY.html#o3">Context</a> = Context;
07666             entry-&gt;<a class="code" href="../../d0/d9/struct__HWPROFILE__NOTIFY__ENTRY.html#o5">RefCount</a> = 1;
07667             entry-&gt;<a class="code" href="../../d0/d9/struct__HWPROFILE__NOTIFY__ENTRY.html#o6">Unregistered</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
07668             entry-&gt;<a class="code" href="../../d0/d9/struct__HWPROFILE__NOTIFY__ENTRY.html#o7">Lock</a> = &amp;<a class="code" href="../../d8/d0/pnpioapi_8c.html#a42">IopHwProfileNotifyLock</a>;
07669             entry-&gt;<a class="code" href="../../d0/d9/struct__HWPROFILE__NOTIFY__ENTRY.html#o4">DriverObject</a> = DriverObject;
07670 
07671             ExAcquireFastMutex(&amp;PiNotificationInProgressLock);
07672             <span class="keywordflow">if</span> (<a class="code" href="../../d8/d0/pnpioapi_8c.html#a43">PiNotificationInProgress</a>) {
07673                 <span class="comment">//</span>
07674                 <span class="comment">// If a notification is in progress, mark the entry as</span>
07675                 <span class="comment">// Unregistered until after the current notification is</span>
07676                 <span class="comment">// complete.</span>
07677                 <span class="comment">//</span>
07678 
07679                 <a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html">PDEFERRED_REGISTRATION_ENTRY</a> deferredNode;
07680 
07681                 deferredNode = <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(PagedPool, <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html">DEFERRED_REGISTRATION_ENTRY</a>));
07682                 <span class="keywordflow">if</span> (!deferredNode) {
07683                     ExReleaseFastMutex(&amp;PiNotificationInProgressLock);
07684                     status = STATUS_INSUFFICIENT_RESOURCES;
07685                     <span class="keywordflow">goto</span> clean0;
07686                 }
07687 
07688                 deferredNode-&gt;<a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html#o1">NotifyEntry</a> = (<a class="code" href="../../d0/d4/struct__NOTIFY__ENTRY__HEADER.html">PNOTIFY_ENTRY_HEADER</a>)entry;
07689 
07690                 <span class="comment">//</span>
07691                 <span class="comment">// Consider this entry unregistered during the current</span>
07692                 <span class="comment">// notification</span>
07693                 <span class="comment">//</span>
07694                 entry-&gt;<a class="code" href="../../d0/d9/struct__HWPROFILE__NOTIFY__ENTRY.html#o6">Unregistered</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
07695 
07696                 <span class="comment">//</span>
07697                 <span class="comment">// Reference the entry so that it doesn't go away until it has</span>
07698                 <span class="comment">// been removed from the deferred registration list</span>
07699                 <span class="comment">//</span>
07700                 <a class="code" href="../../d8/d0/pnpioapi_8c.html#a69">IopReferenceNotify</a>((<a class="code" href="../../d0/d4/struct__NOTIFY__ENTRY__HEADER.html">PNOTIFY_ENTRY_HEADER</a>)entry);
07701 
07702                 <span class="comment">//</span>
07703                 <span class="comment">// Add this entry to the deferred registration list</span>
07704                 <span class="comment">//</span>
07705                 <a class="code" href="../../d9/d0/pnpiop_8h.html#a107">IopAcquireNotifyLock</a>(&amp;IopDeferredRegistrationLock);
07706                 InsertTailList(&amp;IopDeferredRegistrationList, (PLIST_ENTRY)deferredNode);
07707                 <a class="code" href="../../d9/d0/pnpiop_8h.html#a108">IopReleaseNotifyLock</a>(&amp;IopDeferredRegistrationLock);
07708             } <span class="keywordflow">else</span> {
07709                 <span class="comment">//</span>
07710                 <span class="comment">// If there is currently no notification in progress, the deferred</span>
07711                 <span class="comment">// registration list must be empty.</span>
07712                 <span class="comment">//</span>
07713                 <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(IsListEmpty(&amp;IopDeferredRegistrationList));
07714             }
07715             ExReleaseFastMutex(&amp;PiNotificationInProgressLock);
07716 
07717             <span class="comment">//</span>
07718             <span class="comment">// Lock the list, insert the new entry, and unlock it.</span>
07719             <span class="comment">//</span>
07720 
07721             <a class="code" href="../../d9/d0/pnpiop_8h.html#a107">IopAcquireNotifyLock</a>(&amp;IopHwProfileNotifyLock);
07722             InsertTailList(&amp;IopProfileNotifyList, (PLIST_ENTRY)entry);
07723             <a class="code" href="../../d9/d0/pnpiop_8h.html#a108">IopReleaseNotifyLock</a>(&amp;IopHwProfileNotifyLock);
07724 
07725             *NotificationEntry = entry;
07726 
07727             <span class="keywordflow">break</span>;
07728         }
07729     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a172a114">EventCategoryTargetDeviceChange</a>:
07730         {
07731             <a class="code" href="../../d1/d0/struct__TARGET__DEVICE__NOTIFY__ENTRY.html">PTARGET_DEVICE_NOTIFY_ENTRY</a> entry;
07732             <a class="code" href="../../d2/d5/struct__IO__STACK__LOCATION.html">IO_STACK_LOCATION</a> irpSp;
07733             <a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a> deviceNode;
07734 
07735             <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(EventCategoryData);
07736 
07737             <span class="comment">//</span>
07738             <span class="comment">// Allocate a new list entry</span>
07739             <span class="comment">//</span>
07740 
07741             entry = <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(PagedPool, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d0/struct__TARGET__DEVICE__NOTIFY__ENTRY.html">TARGET_DEVICE_NOTIFY_ENTRY</a>));
07742             <span class="keywordflow">if</span> (!entry) {
07743                 status = STATUS_INSUFFICIENT_RESOURCES;
07744                 <span class="keywordflow">goto</span> clean0;
07745             }
07746 
07747             <span class="comment">//</span>
07748             <span class="comment">// Retrieve the device object associated with this file handle.</span>
07749             <span class="comment">//</span>
07750             status = <a class="code" href="../../d9/d0/pnpiop_8h.html#a350">IopGetRelatedTargetDevice</a>((<a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a>)EventCategoryData,
07751                                                &amp;deviceNode);
07752             <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
07753                 <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(entry);
07754                 <span class="keywordflow">goto</span> clean0;
07755             }
07756 
07757             <span class="comment">//</span>
07758             <span class="comment">// Fill out the entry</span>
07759             <span class="comment">//</span>
07760 
07761             entry-&gt;<a class="code" href="../../d1/d0/struct__TARGET__DEVICE__NOTIFY__ENTRY.html#o1">EventCategory</a> = EventCategory;
07762             entry-&gt;<a class="code" href="../../d1/d0/struct__TARGET__DEVICE__NOTIFY__ENTRY.html#o2">Callback</a> = CallbackRoutine;
07763             entry-&gt;<a class="code" href="../../d1/d0/struct__TARGET__DEVICE__NOTIFY__ENTRY.html#o3">Context</a> = Context;
07764             entry-&gt;<a class="code" href="../../d1/d0/struct__TARGET__DEVICE__NOTIFY__ENTRY.html#o4">DriverObject</a> = DriverObject;
07765             entry-&gt;<a class="code" href="../../d1/d0/struct__TARGET__DEVICE__NOTIFY__ENTRY.html#o5">RefCount</a> = 1;
07766             entry-&gt;<a class="code" href="../../d1/d0/struct__TARGET__DEVICE__NOTIFY__ENTRY.html#o6">Unregistered</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
07767             entry-&gt;<a class="code" href="../../d1/d0/struct__TARGET__DEVICE__NOTIFY__ENTRY.html#o7">Lock</a> = &amp;<a class="code" href="../../d8/d0/pnpioapi_8c.html#a40">IopTargetDeviceNotifyLock</a>;
07768             entry-&gt;<a class="code" href="../../d1/d0/struct__TARGET__DEVICE__NOTIFY__ENTRY.html#o8">FileObject</a> = (<a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a>)EventCategoryData;
07769 
07770             <span class="comment">//</span>
07771             <span class="comment">// The PDO associated with the devnode we got back from</span>
07772             <span class="comment">// IopGetRelatedTargetDevice has already been referenced by that</span>
07773             <span class="comment">// routine.  Store this reference away in the notification entry,</span>
07774             <span class="comment">// so we can deref it later when the notification entry is unregistered.</span>
07775             <span class="comment">//</span>
07776 
07777             <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o9">PhysicalDeviceObject</a>);
07778             entry-&gt;<a class="code" href="../../d1/d0/struct__TARGET__DEVICE__NOTIFY__ENTRY.html#o9">PhysicalDeviceObject</a> = deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o9">PhysicalDeviceObject</a>;
07779 
07780             ExAcquireFastMutex(&amp;PiNotificationInProgressLock);
07781             <span class="keywordflow">if</span> (<a class="code" href="../../d8/d0/pnpioapi_8c.html#a43">PiNotificationInProgress</a>) {
07782                 <span class="comment">//</span>
07783                 <span class="comment">// If a notification is in progress, mark the entry as</span>
07784                 <span class="comment">// Unregistered until after the current notification is</span>
07785                 <span class="comment">// complete.</span>
07786                 <span class="comment">//</span>
07787 
07788                 <a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html">PDEFERRED_REGISTRATION_ENTRY</a> deferredNode;
07789 
07790                 deferredNode = <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(PagedPool, <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html">DEFERRED_REGISTRATION_ENTRY</a>));
07791                 <span class="keywordflow">if</span> (!deferredNode) {
07792                     ExReleaseFastMutex(&amp;PiNotificationInProgressLock);
07793                     status = STATUS_INSUFFICIENT_RESOURCES;
07794                     <span class="keywordflow">goto</span> clean0;
07795                 }
07796 
07797                 deferredNode-&gt;<a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html#o1">NotifyEntry</a> = (<a class="code" href="../../d0/d4/struct__NOTIFY__ENTRY__HEADER.html">PNOTIFY_ENTRY_HEADER</a>)entry;
07798 
07799                 <span class="comment">//</span>
07800                 <span class="comment">// Consider this entry unregistered during the current</span>
07801                 <span class="comment">// notification</span>
07802                 <span class="comment">//</span>
07803                 entry-&gt;<a class="code" href="../../d1/d0/struct__TARGET__DEVICE__NOTIFY__ENTRY.html#o6">Unregistered</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
07804 
07805                 <span class="comment">//</span>
07806                 <span class="comment">// Reference the entry so that it doesn't go away until it has</span>
07807                 <span class="comment">// been removed from the deferred registration list</span>
07808                 <span class="comment">//</span>
07809                 <a class="code" href="../../d8/d0/pnpioapi_8c.html#a69">IopReferenceNotify</a>((<a class="code" href="../../d0/d4/struct__NOTIFY__ENTRY__HEADER.html">PNOTIFY_ENTRY_HEADER</a>)entry);
07810 
07811                 <span class="comment">//</span>
07812                 <span class="comment">// Add this entry to the deferred registration list</span>
07813                 <span class="comment">//</span>
07814                 <a class="code" href="../../d9/d0/pnpiop_8h.html#a107">IopAcquireNotifyLock</a>(&amp;IopDeferredRegistrationLock);
07815                 InsertTailList(&amp;IopDeferredRegistrationList, (PLIST_ENTRY)deferredNode);
07816                 <a class="code" href="../../d9/d0/pnpiop_8h.html#a108">IopReleaseNotifyLock</a>(&amp;IopDeferredRegistrationLock);
07817             } <span class="keywordflow">else</span> {
07818                 <span class="comment">//</span>
07819                 <span class="comment">// If there is currently no notification in progress, the deferred</span>
07820                 <span class="comment">// registration list must be empty.</span>
07821                 <span class="comment">//</span>
07822                 <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(IsListEmpty(&amp;IopDeferredRegistrationList));
07823             }
07824             ExReleaseFastMutex(&amp;PiNotificationInProgressLock);
07825 
07826             <span class="comment">//</span>
07827             <span class="comment">// Lock the list, insert the new entry, and unlock it.</span>
07828             <span class="comment">//</span>
07829 
07830             <a class="code" href="../../d9/d0/pnpiop_8h.html#a107">IopAcquireNotifyLock</a>(&amp;IopTargetDeviceNotifyLock);
07831             InsertTailList(&amp;deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o23">TargetDeviceNotify</a>, (PLIST_ENTRY)entry);
07832             <a class="code" href="../../d9/d0/pnpiop_8h.html#a108">IopReleaseNotifyLock</a>(&amp;IopTargetDeviceNotifyLock);
07833 
07834             *NotificationEntry = entry;
07835             <span class="keywordflow">break</span>;
07836         }
07837 
07838     <span class="keywordflow">case</span> <a class="code" href="../../d6/d9/pnp_8h.html#a172a113">EventCategoryDeviceInterfaceChange</a>:
07839         {
07840             <a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html">PDEVICE_CLASS_NOTIFY_ENTRY</a> entry;
07841 
07842             <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(EventCategoryData);
07843 
07844             <span class="comment">//</span>
07845             <span class="comment">// Allocate a new list entry</span>
07846             <span class="comment">//</span>
07847 
07848             entry = <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(PagedPool, <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html">DEVICE_CLASS_NOTIFY_ENTRY</a>));
07849             <span class="keywordflow">if</span> (!entry) {
07850                 status = STATUS_INSUFFICIENT_RESOURCES;
07851                 <span class="keywordflow">goto</span> clean0;
07852             }
07853 
07854             <span class="comment">//</span>
07855             <span class="comment">// Fill out the entry</span>
07856             <span class="comment">//</span>
07857 
07858             entry-&gt;<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html#o1">EventCategory</a> = EventCategory;
07859             entry-&gt;<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html#o2">Callback</a> = CallbackRoutine;
07860             entry-&gt;<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html#o3">Context</a> = Context;
07861             entry-&gt;<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html#o8">ClassGuid</a> = *((LPGUID) EventCategoryData);
07862             entry-&gt;<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html#o5">RefCount</a> = 1;
07863             entry-&gt;<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html#o6">Unregistered</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
07864             entry-&gt;<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html#o7">Lock</a> = &amp;<a class="code" href="../../d8/d0/pnpioapi_8c.html#a38">IopDeviceClassNotifyLock</a>;
07865             entry-&gt;<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html#o4">DriverObject</a> = DriverObject;
07866 
07867             ExAcquireFastMutex(&amp;PiNotificationInProgressLock);
07868             <span class="keywordflow">if</span> (<a class="code" href="../../d8/d0/pnpioapi_8c.html#a43">PiNotificationInProgress</a>) {
07869                 <span class="comment">//</span>
07870                 <span class="comment">// If a notification is in progress, mark the entry as</span>
07871                 <span class="comment">// Unregistered until after the current notification is</span>
07872                 <span class="comment">// complete.</span>
07873                 <span class="comment">//</span>
07874 
07875                 <a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html">PDEFERRED_REGISTRATION_ENTRY</a> deferredNode;
07876 
07877                 deferredNode = <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(PagedPool, <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html">DEFERRED_REGISTRATION_ENTRY</a>));
07878                 <span class="keywordflow">if</span> (!deferredNode) {
07879                     ExReleaseFastMutex(&amp;PiNotificationInProgressLock);
07880                     status = STATUS_INSUFFICIENT_RESOURCES;
07881                     <span class="keywordflow">goto</span> clean0;
07882                 }
07883 
07884                 deferredNode-&gt;<a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html#o1">NotifyEntry</a> = (<a class="code" href="../../d0/d4/struct__NOTIFY__ENTRY__HEADER.html">PNOTIFY_ENTRY_HEADER</a>)entry;
07885 
07886                 <span class="comment">//</span>
07887                 <span class="comment">// Consider this entry unregistered during the current</span>
07888                 <span class="comment">// notification</span>
07889                 <span class="comment">//</span>
07890                 entry-&gt;<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html#o6">Unregistered</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
07891 
07892                 <span class="comment">//</span>
07893                 <span class="comment">// Reference the entry so that it doesn't go away until it has</span>
07894                 <span class="comment">// been removed from the deferred registration list</span>
07895                 <span class="comment">//</span>
07896                 <a class="code" href="../../d8/d0/pnpioapi_8c.html#a69">IopReferenceNotify</a>((<a class="code" href="../../d0/d4/struct__NOTIFY__ENTRY__HEADER.html">PNOTIFY_ENTRY_HEADER</a>)entry);
07897 
07898                 <span class="comment">//</span>
07899                 <span class="comment">// Add this entry to the deferred registration list</span>
07900                 <span class="comment">//</span>
07901                 <a class="code" href="../../d9/d0/pnpiop_8h.html#a107">IopAcquireNotifyLock</a>(&amp;IopDeferredRegistrationLock);
07902                 InsertTailList(&amp;IopDeferredRegistrationList, (PLIST_ENTRY)deferredNode);
07903                 <a class="code" href="../../d9/d0/pnpiop_8h.html#a108">IopReleaseNotifyLock</a>(&amp;IopDeferredRegistrationLock);
07904             } <span class="keywordflow">else</span> {
07905                 <span class="comment">//</span>
07906                 <span class="comment">// If there is currently no notification in progress, the deferred</span>
07907                 <span class="comment">// registration list must be empty.</span>
07908                 <span class="comment">//</span>
07909                 <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(IsListEmpty(&amp;IopDeferredRegistrationList));
07910             }
07911             ExReleaseFastMutex(&amp;PiNotificationInProgressLock);
07912 
07913             <span class="comment">//</span>
07914             <span class="comment">// Lock the list</span>
07915             <span class="comment">//</span>
07916 
07917             <a class="code" href="../../d9/d0/pnpiop_8h.html#a107">IopAcquireNotifyLock</a>(&amp;IopDeviceClassNotifyLock);
07918 
07919             <span class="comment">//</span>
07920             <span class="comment">// Insert it at the tail</span>
07921             <span class="comment">//</span>
07922 
07923             InsertTailList( (PLIST_ENTRY) &amp;(IopDeviceClassNotifyList[ <a class="code" href="../../d9/d0/pnpiop_8h.html#a106">IopHashGuid</a>(&amp;(entry-&gt;<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html#o8">ClassGuid</a>)) ]),
07924                             (PLIST_ENTRY) entry
07925                           );
07926 
07927             <span class="comment">//</span>
07928             <span class="comment">// Unlock the list</span>
07929             <span class="comment">//</span>
07930 
07931             <a class="code" href="../../d9/d0/pnpiop_8h.html#a108">IopReleaseNotifyLock</a>(&amp;IopDeviceClassNotifyLock);
07932 
07933             <span class="comment">//</span>
07934             <span class="comment">// See if we need to notify for all the device classes already present</span>
07935             <span class="comment">//</span>
07936 
07937             <span class="keywordflow">if</span> (EventCategoryFlags &amp; <a class="code" href="../../d6/d9/pnp_8h.html#a6">PNPNOTIFY_DEVICE_INTERFACE_INCLUDE_EXISTING_INTERFACES</a>) {
07938 
07939                 PWCHAR pSymbolicLinks, pCurrent;
07940                 <a class="code" href="../../d0/d4/struct__DEVICE__INTERFACE__CHANGE__NOTIFICATION.html">DEVICE_INTERFACE_CHANGE_NOTIFICATION</a> notification;
07941                 UNICODE_STRING unicodeString;
07942 
07943                 <span class="comment">//</span>
07944                 <span class="comment">// Fill in the notification structure</span>
07945                 <span class="comment">//</span>
07946 
07947                 notification.<a class="code" href="../../d0/d4/struct__DEVICE__INTERFACE__CHANGE__NOTIFICATION.html#o0">Version</a> = <a class="code" href="../../d9/d0/pnpiop_8h.html#a110">PNP_NOTIFICATION_VERSION</a>;
07948                 notification.<a class="code" href="../../d0/d4/struct__DEVICE__INTERFACE__CHANGE__NOTIFICATION.html#o1">Size</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d4/struct__DEVICE__INTERFACE__CHANGE__NOTIFICATION.html">DEVICE_INTERFACE_CHANGE_NOTIFICATION</a>);
07949                 notification.<a class="code" href="../../d0/d4/struct__DEVICE__INTERFACE__CHANGE__NOTIFICATION.html#o2">Event</a> = GUID_DEVICE_INTERFACE_ARRIVAL;
07950                 notification.<a class="code" href="../../d0/d4/struct__DEVICE__INTERFACE__CHANGE__NOTIFICATION.html#o3">InterfaceClassGuid</a> = entry-&gt;<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html#o8">ClassGuid</a>;
07951 
07952                 <span class="comment">//</span>
07953                 <span class="comment">// Get the list of all the devices of this function class that are</span>
07954                 <span class="comment">// already in the system</span>
07955                 <span class="comment">//</span>
07956 
07957                 status = <a class="code" href="../../d8/d0/pnpioapi_8c.html#a86">IoGetDeviceInterfaces</a>(&amp;(entry-&gt;<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html#o8">ClassGuid</a>),
07958                                                 NULL,
07959                                                 0,
07960                                                 &amp;pSymbolicLinks
07961                                                 );
07962                 <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
07963                     <span class="comment">//</span>
07964                     <span class="comment">// No buffer will have been returned so just return status</span>
07965                     <span class="comment">//</span>
07966                     <span class="keywordflow">goto</span> clean0;
07967                 }
07968 
07969                 <span class="comment">//</span>
07970                 <span class="comment">// Callback for each device currently in the system</span>
07971                 <span class="comment">//</span>
07972 
07973                 pCurrent = pSymbolicLinks;
07974                 <span class="keywordflow">while</span>(*pCurrent != UNICODE_NULL) {
07975                     <a class="code" href="../../d7/d3/struct__NOTIFICATION__CALLBACK__PARAM__BLOCK.html">NOTIFICATION_CALLBACK_PARAM_BLOCK</a> callparams;
07976                     ULONG Console=0;
07977 
07978                     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeString, pCurrent);
07979                     notification.<a class="code" href="../../d0/d4/struct__DEVICE__INTERFACE__CHANGE__NOTIFICATION.html#o4">SymbolicLinkName</a> = &amp;unicodeString;
07980 
07981 <span class="preprocessor">#if DBG</span>
07982 <span class="preprocessor"></span>                    originalApcDisable = <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a3">KeGetCurrentThread</a>()-&gt;KernelApcDisable;
07983 <span class="preprocessor">#endif</span>
07984 <span class="preprocessor"></span>                    <span class="comment">//</span>
07985                     <span class="comment">// Call back on the registered notification routine</span>
07986                     <span class="comment">//</span>
07987                     callparams.<a class="code" href="../../d7/d3/struct__NOTIFICATION__CALLBACK__PARAM__BLOCK.html#o0">Callout</a>=(*CallbackRoutine);
07988                     callparams.<a class="code" href="../../d7/d3/struct__NOTIFICATION__CALLBACK__PARAM__BLOCK.html#o1">NotificationStructure</a>=&amp;notification;
07989                     callparams.<a class="code" href="../../d7/d3/struct__NOTIFICATION__CALLBACK__PARAM__BLOCK.html#o2">Context</a>=Context;
07990 
07991 
07992                     <span class="comment">//</span>
07993                     <span class="comment">// Dispatch this function via the memory manager.</span>
07994                     <span class="comment">// Win32K is a driver that can have multiple copies. If Hydra</span>
07995                     <span class="comment">// is running, the Mem. manager will check if the callback exists</span>
07996                     <span class="comment">// in "per session" space. If that is the case, it will attach to the</span>
07997                     <span class="comment">// console (hence the 3rd param of PULONG containing 0) session and deliver</span>
07998                     <span class="comment">// it. If either Hydra is not running, or the callback is outside session space</span>
07999                     <span class="comment">// then the callback is called directly.</span>
08000                     <span class="comment">//</span>
08001                     <a class="code" href="../../d2/d1/mm_8h.html#a197">MmDispatchWin32Callout</a> ((PKWIN32_CALLOUT)callparams.<a class="code" href="../../d7/d3/struct__NOTIFICATION__CALLBACK__PARAM__BLOCK.html#o0">Callout</a>,&amp;IopPnPHydraCallback,&amp;callparams,&amp;Console);
08002 
08003 <span class="preprocessor">#if DBG</span>
08004 <span class="preprocessor"></span>                    <span class="keywordflow">if</span> (originalApcDisable != <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a3">KeGetCurrentThread</a>()-&gt;KernelApcDisable) {
08005                         <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"IoRegisterPlugPlayNotification: Driver %Z, notification handler @ 0x%p returned with different KernelApcDisable = %d, original = %d\n"</span>,
08006                                  &amp;entry-&gt;<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html#o4">DriverObject</a>-&gt;<a class="code" href="../../d4/d9/struct__DRIVER__OBJECT.html#o8">DriverName</a>, entry-&gt;<a class="code" href="../../d4/d3/struct__DEVICE__CLASS__NOTIFY__ENTRY.html#o2">Callback</a>, <a class="code" href="../../d2/d7/alpha_2kdpcpu_8h.html#a3">KeGetCurrentThread</a>()-&gt;KernelApcDisable, originalApcDisable);
08007                         DbgBreakPoint();
08008                     }
08009 <span class="preprocessor">#endif</span>
08010 <span class="preprocessor"></span>
08011                     pCurrent += (unicodeString.Length / <span class="keyword">sizeof</span>(WCHAR)) + 1;
08012 
08013                 }
08014 
08015                 <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(pSymbolicLinks);
08016 
08017             }
08018 
08019             *NotificationEntry = entry;
08020         }
08021 
08022         <span class="keywordflow">break</span>;
08023     }
08024 
08025 clean0:
08026 
08027     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
08028         <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(DriverObject);
08029     }
08030 
08031     <span class="keywordflow">return</span> status;
08032 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a141" doxytag="pnp.h::IoReportDetectedDevice" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS IoReportDetectedDevice           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DriverObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN INTERFACE_TYPE&nbsp;</td>
          <td class="mdname" nowrap> <em>LegacyBusType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>BusNumber</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>SlotNumber</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCM_RESOURCE_LIST&nbsp;</td>
          <td class="mdname" nowrap> <em>ResourceList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PIO_RESOURCE_REQUIREMENTS_LIST ResourceRequirements&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>ResourceAssigned</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceObject</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l01548">1548</a> of file <a class="el" href="../../d9/d9/pnpioapi_8c-source.html">pnpioapi.c</a>.
<p>
References <a class="el" href="../../d6/d9/pnp_8h.html#a174a126">ArbiterRequestLegacyReported</a>, <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d3/d6/hal_8h-source.html#l01170">BusNumber</a>, <a class="el" href="../../d7/d9/cmdat_8c-source.html#l00176">CmRegistryMachineSystemCurrentControlSetEnumName</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l01274">_DEVOBJ_EXTENSION::DeviceNode</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l01210">_DEVICE_OBJECT::DeviceObjectExtension</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00408">DNF_ADDED</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00396">DNF_ENUMERATED</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00536">DNF_HAS_PROBLEM</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00370">DNF_MADEUP</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00500">DNF_NEED_ENUMERATION_ONLY</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00402">DNF_NEED_QUERY_IDS</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00433">DNF_NO_RESOURCE_REQUIRED</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00390">DNF_PROCESSED</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00487">DNF_STARTED</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l01164">DO_BUS_ENUMERATED_DEVICE</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l01301">DRVO_BUILTIN_DRIVER</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l02474">ExAcquireResourceShared</a>, <a class="el" href="../../d6/d4/cc_8h-source.html#l00126">ExAllocatePool</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d0/d1/fedefs_8h-source.html#l00051">exit</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l02393">ExReleaseResource</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00129">_DEVICE_NODE::Flags</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l01184">_DEVICE_OBJECT::Flags</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00177">_DEVICE_NODE::InstancePath</a>, <a class="el" href="../../d5/d5/iosubs_8c-source.html#l04073">IoCreateDevice()</a>, <a class="el" href="../../d5/d5/iosubs_8c-source.html#l05951">IoDeleteDevice()</a>, <a class="el" href="../../d5/d6/devnode_8c-source.html#l00056">IopAllocateDeviceNode()</a>, <a class="el" href="../../d1/d1/pri__bld_2pnpsubs_8c-source.html#l00695">IopConcatenateUnicodeStrings()</a>, <a class="el" href="../../d0/d1/pnpsubs_8c-source.html#l01156">IopCreateRegistryKeyEx()</a>, <a class="el" href="../../d1/d1/pri__bld_2pnpsubs_8c-source.html#l05338">IopDeleteLegacyKey()</a>, <a class="el" href="../../d1/d1/pri__bld_2pnpsubs_8c-source.html#l03523">IopDetermineResourceListSize()</a>, <a class="el" href="../../d1/d1/pri__bld_2pnpsubs_8c-source.html#l03651">IopDeviceObjectFromDeviceInstance()</a>, <a class="el" href="../../d1/d1/pri__bld_2pnpsubs_8c-source.html#l03776">IopDeviceObjectToDeviceInstance()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l09866">IopDoDeferredSetInterfaceState()</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00825">IopDoesDevNodeHaveProblem</a>, <a class="el" href="../../d6/d0/pnpres_8c-source.html#l06528">IopDuplicateDetection()</a>, <a class="el" href="../../d5/d6/devnode_8c-source.html#l00447">IopInsertTreeDeviceNode()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l02286">IopIsReportedAlready()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l08162">IopNotifySetupDeviceArrival()</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00037">IoPnpDriverObject</a>, <a class="el" href="../../d2/d9/pnpdata_8c-source.html#l00098">IopNumberDeviceNodes</a>, <a class="el" href="../../d0/d1/pnpsubs_8c-source.html#l01104">IopOpenRegistryKeyEx()</a>, <a class="el" href="../../d3/d9/pnpdd_8c-source.html#l00263">IopReleaseDeviceResources()</a>, <a class="el" href="../../d2/d9/pnpdata_8c-source.html#l00056">IopRootDeviceNode</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00835">IopSetDevNodeProblem</a>, <a class="el" href="../../d9/d0/pnpiop_8h.html#a301">IopWriteAllocatedResourcesToRegistry()</a>, <a class="el" href="../../d2/d7/report_8c-source.html#l00469">IoReportResourceUsageInternal()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01598">KeEnterCriticalRegion</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01628">KeLeaveCriticalRegion</a>, <a class="el" href="../../d8/d9/ke_2miscc_8c-source.html#l00182">KeQueryTickCount()</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00494">ObDereferenceObject</a>, <a class="el" href="../../d5/d9/ob_8h-source.html#l00514">ObReferenceObject</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d5/d8/ex_8h.html#a329a174">PagedPool</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00151">_DEVICE_NODE::PhysicalDeviceObject</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l09077">PpCreateLegacyDeviceIds()</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a138">PpDeviceRegistration()</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00036">PpRegistryDeviceResource</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00144">_DEVICE_NODE::Problem</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00185">_DEVICE_NODE::ServiceName</a>, <a class="el" href="../../d5/d0/config_2alpha_2init_8c-source.html#l00034">TITLE_INDEX_VALUE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>.
<p>
<pre class="fragment"><div>01561                    :
01562 
01563     PnP device drivers call <span class="keyword">this</span> API to report any device detected.  This routine
01564     creates a <a class="code" href="../../d6/d8/udfstruc_8h.html#a129a115">Physical</a> Device object, reference <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d6/d8/udfstruc_8h.html#a129a115">Physical</a> Device object and
01565     returns back to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> callers.  Once <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> detected device <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> reported, <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> Pnp manager
01566     considers <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device has been fully controlled by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> reporting drivers.  Thus <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a>
01567     will not invoke AddDevice entry and send <a class="code" href="../../d9/d0/pnpiop_8h.html#a391a224">StartDevice</a> irp to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver.
01568 
01569     The driver needs to report <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resources <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> used to detect <span class="keyword">this</span> device such that
01570     pnp manager can perform duplicates detection on <span class="keyword">this</span> device.
01571 
01572     The caller must dereference <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> DeviceObject once <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> no longer needs <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a>.
01573 
01574 Parameters:
01575 
01576     DriverObject - Supplies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver object of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver who detected
01577                    <span class="keyword">this</span> device.
01578 
01579     ResourceList - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resource list which <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver used
01580                    to detect <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device.
01581 
01582     ResourceRequirements - supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resource requirements list
01583                    <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> detected device.  This <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> optional.
01584 
01585     ResourceAssigned - <span class="keywordflow">if</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>, <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver already called <a class="code" href="../../d0/d5/io_8h.html#a542">IoReportResourceUsage</a> or
01586                    IoAssignResource to get <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> ownership of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resources.  Otherwise,
01587                    <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> PnP manager will call <a class="code" href="../../d0/d5/io_8h.html#a542">IoReportResourceUsage</a> to allocate <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a>
01588                    resources <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver.
01589 
01590     DeviceObject - <span class="keywordflow">if</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>, <span class="keyword">this</span> routine will create a PDO and <span class="keywordflow">return</span> <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> thru <span class="keyword">this</span> variable.
01591                    Otherwise, a PDO <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> already created and <span class="keyword">this</span> routine will simply use <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> supplied
01592                    PDO.
01593 
01594 Return Value:
01595 
01596     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> code that indicates whether or not <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> function was successful.
01597 
01598 
01599 --*/
01600 
01601 {
01602     WCHAR buffer[60];
01603     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
01604     UNICODE_STRING deviceName, instanceName, unicodeName, *serviceName, driverName;
01605     <a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a> deviceNode;
01606     ULONG length, i = 0, disposition, tmpValue, listSize = 0;
01607     HANDLE handle, handle1, logConfHandle, controlHandle, hTreeHandle, enumHandle;
01608     PCM_RESOURCE_LIST cmResource;
01609     PWSTR p;
01610     LARGE_INTEGER tickCount;
01611     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> deviceObject;
01612     BOOLEAN newlyCreated = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
01613 
01614     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
01615 
01616     <span class="keywordflow">if</span> (*DeviceObject) {
01617 
01618         deviceObject = *DeviceObject;
01619 
01620         <span class="comment">//</span>
01621         <span class="comment">// The PDO is already known. simply handle the resourcelist and resreq list.</span>
01622         <span class="comment">// This is a hack for NDIS drivers.</span>
01623         <span class="comment">//</span>
01624         deviceNode = (<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a>)(*DeviceObject)-&gt;DeviceObjectExtension-&gt;DeviceNode;
01625         <span class="keywordflow">if</span> (!deviceNode) {
01626             <span class="keywordflow">return</span> STATUS_NO_SUCH_DEVICE;
01627         }
01628 
01629         <a class="code" href="../../d4/d9/ke_8h.html#a28">KeEnterCriticalRegion</a>();
01630         <a class="code" href="../../d5/d8/ex_8h.html#a69">ExAcquireResourceShared</a>(&amp;PpRegistryDeviceResource, TRUE);
01631 
01632         <span class="comment">//</span>
01633         <span class="comment">// Write ResourceList and ResReq list to the device instance</span>
01634         <span class="comment">//</span>
01635 
01636         status = <a class="code" href="../../d0/d2/pri__bld_2pnpsubs_8c.html#a24">IopDeviceObjectToDeviceInstance</a> (*DeviceObject,
01637                                                   &amp;handle,
01638                                                   KEY_ALL_ACCESS
01639                                                   );
01640         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
01641             <a class="code" href="../../d5/d8/ex_8h.html#a66">ExReleaseResource</a>(&amp;PpRegistryDeviceResource);
01642             <a class="code" href="../../d4/d9/ke_8h.html#a29">KeLeaveCriticalRegion</a>();
01643             <span class="keywordflow">return</span> status;
01644         }
01645         <span class="keywordflow">if</span> (ResourceAssigned) {
01646             <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeName, REGSTR_VALUE_NO_RESOURCE_AT_INIT);
01647             tmpValue = 1;
01648             ZwSetValueKey(handle,
01649                           &amp;unicodeName,
01650                           TITLE_INDEX_VALUE,
01651                           REG_DWORD,
01652                           &amp;tmpValue,
01653                           <span class="keyword">sizeof</span>(tmpValue)
01654                           );
01655         }
01656         <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeName, REGSTR_KEY_LOG_CONF);
01657         status = <a class="code" href="../../d9/d1/pnpsubs_8c.html#a8">IopCreateRegistryKeyEx</a>( &amp;logConfHandle,
01658                                          handle,
01659                                          &amp;unicodeName,
01660                                          KEY_ALL_ACCESS,
01661                                          REG_OPTION_NON_VOLATILE,
01662                                          NULL
01663                                          );
01664         ZwClose(handle);
01665         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
01666 
01667             <span class="comment">//</span>
01668             <span class="comment">// Write the ResourceList and and ResourceRequirements to the logconf key under</span>
01669             <span class="comment">// device instance key.</span>
01670             <span class="comment">//</span>
01671 
01672             <span class="keywordflow">if</span> (ResourceList) {
01673                 <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeName, REGSTR_VAL_BOOTCONFIG);
01674                 ZwSetValueKey(
01675                           logConfHandle,
01676                           &amp;unicodeName,
01677                           TITLE_INDEX_VALUE,
01678                           REG_RESOURCE_LIST,
01679                           ResourceList,
01680                           listSize = <a class="code" href="../../d0/d2/pri__bld_2pnpsubs_8c.html#a21">IopDetermineResourceListSize</a>(ResourceList)
01681                           );
01682             }
01683             <span class="keywordflow">if</span> (ResourceRequirements) {
01684                 <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeName, REGSTR_VALUE_BASIC_CONFIG_VECTOR);
01685                 ZwSetValueKey(
01686                           logConfHandle,
01687                           &amp;unicodeName,
01688                           TITLE_INDEX_VALUE,
01689                           REG_RESOURCE_REQUIREMENTS_LIST,
01690                           ResourceRequirements,
01691                           ResourceRequirements-&gt;ListSize
01692                           );
01693             }
01694             ZwClose(logConfHandle);
01695         }
01696         <a class="code" href="../../d5/d8/ex_8h.html#a66">ExReleaseResource</a>(&amp;PpRegistryDeviceResource);
01697         <a class="code" href="../../d4/d9/ke_8h.html#a29">KeLeaveCriticalRegion</a>();
01698         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
01699             <span class="keywordflow">goto</span> checkResource;
01700         } <span class="keywordflow">else</span> {
01701             <span class="keywordflow">return</span> status;
01702         }
01703     }
01704 
01705     <span class="comment">//</span>
01706     <span class="comment">// Normal case: *DeviceObject is NULL</span>
01707     <span class="comment">//</span>
01708 
01709     *DeviceObject = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01710     serviceName = &amp;DriverObject-&gt;DriverExtension-&gt;ServiceKeyName;
01711 
01712     <span class="comment">//</span>
01713     <span class="comment">// Special handling for driver object created thru IoCreateDriver.</span>
01714     <span class="comment">// When a builtin driver calls IoReportDetectedDevice, the ServiceKeyName of</span>
01715     <span class="comment">// the driver object is set to \Driver\DriverName.  To create a detected device</span>
01716     <span class="comment">// instance key, we will take only the DriverName.</span>
01717     <span class="comment">//</span>
01718 
01719     <span class="keywordflow">if</span> (DriverObject-&gt;Flags &amp; <a class="code" href="../../d0/d5/io_8h.html#a145">DRVO_BUILTIN_DRIVER</a>) {
01720         p = serviceName-&gt;Buffer + (serviceName-&gt;Length / <span class="keyword">sizeof</span>(WCHAR)) - 1;
01721         driverName.Length = 0;
01722         <span class="keywordflow">while</span> (*p != <span class="charliteral">'\\'</span> &amp;&amp; (p != serviceName-&gt;Buffer)) {
01723             p--;
01724             driverName.Length += <span class="keyword">sizeof</span>(WCHAR);
01725         }
01726         <span class="keywordflow">if</span> (p == serviceName-&gt;Buffer) {
01727             <span class="keywordflow">return</span> STATUS_UNSUCCESSFUL;
01728         } <span class="keywordflow">else</span> {
01729             p++;
01730             driverName.Buffer = p;
01731             driverName.MaximumLength = driverName.Length + <span class="keyword">sizeof</span>(WCHAR);
01732         }
01733     } <span class="keywordflow">else</span> {
01734 
01735         <span class="comment">//</span>
01736         <span class="comment">// Before doing anything first perform duplicate detection</span>
01737         <span class="comment">//</span>
01738 
01739         status = <a class="code" href="../../d5/d1/pnpres_8c.html#a109">IopDuplicateDetection</a>(
01740                      LegacyBusType,
01741                      BusNumber,
01742                      SlotNumber,
01743                      &amp;deviceNode
01744                  );
01745 
01746         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status) &amp;&amp; deviceNode) {
01747             deviceObject = deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o9">PhysicalDeviceObject</a>;
01748             <span class="keywordflow">if</span> ((deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o6">Flags</a> &amp; <a class="code" href="../../d9/d0/pnpiop_8h.html#a11">DNF_ADDED</a>) ||
01749                 (<a class="code" href="../../d9/d0/pnpiop_8h.html#a77">IopDoesDevNodeHaveProblem</a>(deviceNode) &amp;&amp;
01750                  deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o8">Problem</a> != CM_PROB_NOT_CONFIGURED &amp;&amp;
01751                  deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o8">Problem</a> != CM_PROB_REINSTALL &amp;&amp;
01752                  deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o8">Problem</a> != CM_PROB_FAILED_INSTALL)) {
01753 
01754                 <span class="comment">//</span>
01755                 <span class="comment">// BUGBUG: This assumption may not be true.</span>
01756                 <span class="comment">//</span>
01757 
01758                 <a class="code" href="../../d4/d0/ob_8h.html#a14">ObDereferenceObject</a>(deviceObject);
01759 
01760                 <span class="keywordflow">return</span> STATUS_NO_SUCH_DEVICE;
01761             }
01762 
01763             deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o6">Flags</a> &amp;= ~<a class="code" href="../../d9/d0/pnpiop_8h.html#a30">DNF_HAS_PROBLEM</a>;
01764             deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o8">Problem</a> = 0;
01765 
01766             <a class="code" href="../../d0/d2/pri__bld_2pnpsubs_8c.html#a34">IopDeleteLegacyKey</a>(DriverObject);
01767             <span class="keywordflow">goto</span> checkResource;
01768         }
01769 
01770     }
01771 
01772     <span class="comment">//</span>
01773     <span class="comment">// Create a PDO and its DeviceNode</span>
01774     <span class="comment">//</span>
01775 
01776     <span class="comment">//</span>
01777     <span class="comment">// Madeup a name for the device object.</span>
01778     <span class="comment">//</span>
01779 
01780     <a class="code" href="../../d7/d0/ke_2miscc_8c.html#a4">KeQueryTickCount</a>(&amp;tickCount);
01781     length = _snwprintf(buffer, <span class="keyword">sizeof</span>(buffer) / <span class="keyword">sizeof</span>(WCHAR), L<span class="stringliteral">"\\Device\\%04u%x"</span>, IopNumberDeviceNodes, tickCount.LowPart);
01782     deviceName.MaximumLength = <span class="keyword">sizeof</span>(buffer);
01783     deviceName.Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(length * <span class="keyword">sizeof</span>(WCHAR));
01784     deviceName.Buffer = buffer;                                                           \
01785 
01786     status = <a class="code" href="../../d4/d6/iosubs_8c.html#a45">IoCreateDevice</a>( IoPnpDriverObject,
01787                              <span class="keyword">sizeof</span>(<a class="code" href="../../d5/d1/struct__IOPNP__DEVICE__EXTENSION.html">IOPNP_DEVICE_EXTENSION</a>),
01788                              &amp;deviceName,
01789                              FILE_DEVICE_CONTROLLER,
01790                              0,
01791                              FALSE,
01792                              &amp;deviceObject );
01793 
01794     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
01795         deviceObject-&gt;<a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o8">Flags</a> |= <a class="code" href="../../d0/d5/io_8h.html#a133">DO_BUS_ENUMERATED_DEVICE</a>;   <span class="comment">// Mark this is a PDO</span>
01796         deviceNode = <a class="code" href="../../d9/d0/pnpiop_8h.html#a252">IopAllocateDeviceNode</a>(deviceObject);
01797         <span class="keywordflow">if</span> (deviceNode) {
01798 
01799             <span class="comment">//</span>
01800             <span class="comment">// First delete the Legacy_DriverName key and subkeys from Enum\Root, if exits.</span>
01801             <span class="comment">//</span>
01802 
01803             <span class="keywordflow">if</span> (!(DriverObject-&gt;Flags &amp; <a class="code" href="../../d0/d5/io_8h.html#a145">DRVO_BUILTIN_DRIVER</a>)) {
01804                 <a class="code" href="../../d0/d2/pri__bld_2pnpsubs_8c.html#a34">IopDeleteLegacyKey</a>(DriverObject);
01805             }
01806 
01807             <span class="comment">//</span>
01808             <span class="comment">// Create the compatible id list we'll use for this made-up device.</span>
01809             <span class="comment">//</span>
01810 
01811             status = <a class="code" href="../../d8/d0/pnpioapi_8c.html#a73">PpCreateLegacyDeviceIds</a>(
01812                         deviceObject,
01813                         ((DriverObject-&gt;Flags &amp; DRVO_BUILTIN_DRIVER) ?
01814                             &amp;driverName : serviceName),
01815                         ResourceList);
01816 
01817             <span class="keywordflow">if</span>(!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
01818                 <span class="keywordflow">goto</span> <a class="code" href="../../d9/d1/fedefs_8h.html#a16">exit</a>;
01819             }
01820 
01821             <span class="comment">//</span>
01822             <span class="comment">// Create/Open a registry key for the device instance and</span>
01823             <span class="comment">// write the addr of the device object to registry</span>
01824             <span class="comment">//</span>
01825 
01826             <span class="keywordflow">if</span> (DriverObject-&gt;Flags &amp; <a class="code" href="../../d0/d5/io_8h.html#a145">DRVO_BUILTIN_DRIVER</a>) {
01827                 length = _snwprintf(buffer, <span class="keyword">sizeof</span>(buffer) / <span class="keyword">sizeof</span>(WCHAR), L<span class="stringliteral">"ROOT\\%s"</span>, driverName.Buffer);
01828             } <span class="keywordflow">else</span> {
01829                 length = _snwprintf(buffer, <span class="keyword">sizeof</span>(buffer) / <span class="keyword">sizeof</span>(WCHAR), L<span class="stringliteral">"ROOT\\%s"</span>, serviceName-&gt;Buffer);
01830             }
01831             deviceName.MaximumLength = <span class="keyword">sizeof</span>(buffer);
01832             <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(length &lt;= <span class="keyword">sizeof</span>(buffer) - 10);
01833             deviceName.Length = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)(length * <span class="keyword">sizeof</span>(WCHAR));
01834             deviceName.Buffer = buffer;
01835 
01836             <a class="code" href="../../d4/d9/ke_8h.html#a28">KeEnterCriticalRegion</a>();
01837             <a class="code" href="../../d5/d8/ex_8h.html#a69">ExAcquireResourceShared</a>(&amp;PpRegistryDeviceResource, TRUE);
01838 
01839             status = <a class="code" href="../../d9/d1/pnpsubs_8c.html#a7">IopOpenRegistryKeyEx</a>( &amp;enumHandle,
01840                                            NULL,
01841                                            &amp;CmRegistryMachineSystemCurrentControlSetEnumName,
01842                                            KEY_ALL_ACCESS
01843                                            );
01844             <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
01845                 <span class="keywordflow">goto</span> <a class="code" href="../../d9/d1/fedefs_8h.html#a16">exit</a>;
01846             }
01847 
01848             status = <a class="code" href="../../d9/d1/pnpsubs_8c.html#a8">IopCreateRegistryKeyEx</a>( &amp;handle1,
01849                                              enumHandle,
01850                                              &amp;deviceName,
01851                                              KEY_ALL_ACCESS,
01852                                              REG_OPTION_NON_VOLATILE,
01853                                              &amp;disposition
01854                                              );
01855 
01856             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
01857                 deviceName.Buffer[deviceName.Length / <span class="keyword">sizeof</span>(WCHAR)] =
01858                            OBJ_NAME_PATH_SEPARATOR;
01859                 deviceName.Length += <span class="keyword">sizeof</span>(WCHAR);
01860                 <span class="keywordflow">if</span> (disposition != REG_CREATED_NEW_KEY) {
01861                     <span class="keywordflow">while</span> (<a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>) {
01862                         PiUlongToInstanceKeyUnicodeString(&amp;instanceName,
01863                                                           buffer + deviceName.Length / <span class="keyword">sizeof</span>(WCHAR),
01864                                                           <span class="keyword">sizeof</span>(buffer) - deviceName.Length,
01865                                                           i
01866                                                           );
01867                         status = <a class="code" href="../../d9/d1/pnpsubs_8c.html#a8">IopCreateRegistryKeyEx</a>( &amp;handle,
01868                                                          handle1,
01869                                                          &amp;instanceName,
01870                                                          KEY_ALL_ACCESS,
01871                                                          REG_OPTION_NON_VOLATILE,
01872                                                          &amp;disposition
01873                                                          );
01874                         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
01875                             <span class="keywordflow">if</span> (disposition == REG_CREATED_NEW_KEY) {
01876                                 ZwClose(handle1);
01877                                 <span class="keywordflow">break</span>;
01878                             } <span class="keywordflow">else</span> {
01879                                 <span class="keywordflow">if</span> (<a class="code" href="../../d8/d0/pnpioapi_8c.html#a54">IopIsReportedAlready</a>(handle, serviceName, ResourceList)) {
01880 
01881                                     <span class="comment">//</span>
01882                                     <span class="comment">// Write the reported resources to registry in case the irq changed</span>
01883                                     <span class="comment">//</span>
01884 
01885                                     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeName, REGSTR_KEY_LOG_CONF);
01886                                     status = <a class="code" href="../../d9/d1/pnpsubs_8c.html#a8">IopCreateRegistryKeyEx</a>( &amp;logConfHandle,
01887                                                                      handle,
01888                                                                      &amp;unicodeName,
01889                                                                      KEY_ALL_ACCESS,
01890                                                                      REG_OPTION_NON_VOLATILE,
01891                                                                      NULL
01892                                                                      );
01893                                     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
01894 
01895                                         <span class="comment">//</span>
01896                                         <span class="comment">// Write the ResourceList and and ResourceRequirements to the device instance key</span>
01897                                         <span class="comment">//</span>
01898 
01899                                         <span class="keywordflow">if</span> (ResourceList) {
01900                                             <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeName, REGSTR_VAL_BOOTCONFIG);
01901                                             ZwSetValueKey(
01902                                                       logConfHandle,
01903                                                       &amp;unicodeName,
01904                                                       TITLE_INDEX_VALUE,
01905                                                       REG_RESOURCE_LIST,
01906                                                       ResourceList,
01907                                                       listSize = <a class="code" href="../../d0/d2/pri__bld_2pnpsubs_8c.html#a21">IopDetermineResourceListSize</a>(ResourceList)
01908                                                       );
01909                                         }
01910                                         <span class="keywordflow">if</span> (ResourceRequirements) {
01911                                             <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeName, REGSTR_VALUE_BASIC_CONFIG_VECTOR);
01912                                             ZwSetValueKey(
01913                                                       logConfHandle,
01914                                                       &amp;unicodeName,
01915                                                       TITLE_INDEX_VALUE,
01916                                                       REG_RESOURCE_REQUIREMENTS_LIST,
01917                                                       ResourceRequirements,
01918                                                       ResourceRequirements-&gt;ListSize
01919                                                       );
01920                                         }
01921                                         ZwClose(logConfHandle);
01922                                     }
01923 
01924                                     <a class="code" href="../../d5/d8/ex_8h.html#a66">ExReleaseResource</a>(&amp;PpRegistryDeviceResource);
01925                                     <a class="code" href="../../d4/d9/ke_8h.html#a29">KeLeaveCriticalRegion</a>();
01926                                     <a class="code" href="../../d4/d6/iosubs_8c.html#a55">IoDeleteDevice</a>(deviceObject);
01927                                     ZwClose(handle1);
01928                                     deviceObject = <a class="code" href="../../d0/d2/pri__bld_2pnpsubs_8c.html#a23">IopDeviceObjectFromDeviceInstance</a> (
01929                                                            handle, NULL);  <span class="comment">// Add a reference</span>
01930                                     ZwClose(handle);
01931                                     ZwClose(enumHandle);
01932                                     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(deviceObject);
01933                                     <span class="keywordflow">if</span> (deviceObject == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01934                                         status = STATUS_UNSUCCESSFUL;
01935                                         <span class="keywordflow">return</span> status;
01936                                     }
01937                                     deviceNode = (<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a>)
01938                                                   deviceObject-&gt;<a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o25">DeviceObjectExtension</a>-&gt;<a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o6">DeviceNode</a>;
01939                                     <span class="keywordflow">goto</span> checkResource;
01940                                 } <span class="keywordflow">else</span> {
01941                                     i++;
01942                                     ZwClose(handle);
01943                                     <span class="keywordflow">continue</span>;
01944                                 }
01945                             }
01946                         } <span class="keywordflow">else</span> {
01947                             ZwClose(handle1);
01948                             ZwClose(enumHandle);
01949                             <span class="keywordflow">goto</span> <a class="code" href="../../d9/d1/fedefs_8h.html#a16">exit</a>;
01950                         }
01951                     }
01952                 } <span class="keywordflow">else</span> {
01953 
01954                     <span class="comment">//</span>
01955                     <span class="comment">// This is a new device key.  So, instance is 0.  Create it.</span>
01956                     <span class="comment">//</span>
01957 
01958                     PiUlongToInstanceKeyUnicodeString(&amp;instanceName,
01959                                                       buffer + deviceName.Length / <span class="keyword">sizeof</span>(WCHAR),
01960                                                       <span class="keyword">sizeof</span>(buffer) - deviceName.Length,
01961                                                       i
01962                                                       );
01963                     status = <a class="code" href="../../d9/d1/pnpsubs_8c.html#a8">IopCreateRegistryKeyEx</a>( &amp;handle,
01964                                                      handle1,
01965                                                      &amp;instanceName,
01966                                                      KEY_ALL_ACCESS,
01967                                                      REG_OPTION_NON_VOLATILE,
01968                                                      &amp;disposition
01969                                                      );
01970                     ZwClose(handle1);
01971                     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
01972                         ZwClose(enumHandle);
01973                         <span class="keywordflow">goto</span> <a class="code" href="../../d9/d1/fedefs_8h.html#a16">exit</a>;
01974                     }
01975                     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(disposition == REG_CREATED_NEW_KEY);
01976                 }
01977             } <span class="keywordflow">else</span> {
01978                 ZwClose(enumHandle);
01979                 <span class="keywordflow">goto</span> <a class="code" href="../../d9/d1/fedefs_8h.html#a16">exit</a>;
01980             }
01981 
01982             deviceName.Length += instanceName.Length;
01983             <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(disposition == REG_CREATED_NEW_KEY);
01984             newlyCreated = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
01985 
01986             <span class="comment">//</span>
01987             <span class="comment">// Initialize new device instance registry key</span>
01988             <span class="comment">//</span>
01989 
01990             <span class="keywordflow">if</span> (ResourceAssigned) {
01991                 <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeName, REGSTR_VALUE_NO_RESOURCE_AT_INIT);
01992                 tmpValue = 1;
01993                 ZwSetValueKey(handle,
01994                               &amp;unicodeName,
01995                               TITLE_INDEX_VALUE,
01996                               REG_DWORD,
01997                               &amp;tmpValue,
01998                               <span class="keyword">sizeof</span>(tmpValue)
01999                               );
02000             }
02001             <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeName, REGSTR_KEY_LOG_CONF);
02002             logConfHandle = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02003             status = <a class="code" href="../../d9/d1/pnpsubs_8c.html#a8">IopCreateRegistryKeyEx</a>( &amp;logConfHandle,
02004                                              handle,
02005                                              &amp;unicodeName,
02006                                              KEY_ALL_ACCESS,
02007                                              REG_OPTION_NON_VOLATILE,
02008                                              NULL
02009                                              );
02010 
02011             <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(status == STATUS_SUCCESS);
02012 
02013             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
02014 
02015                 <span class="comment">//</span>
02016                 <span class="comment">// Write the ResourceList and and ResourceRequirements to the logconf key under</span>
02017                 <span class="comment">// device instance key.</span>
02018                 <span class="comment">//</span>
02019 
02020                 <span class="keywordflow">if</span> (ResourceList) {
02021                     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeName, REGSTR_VAL_BOOTCONFIG);
02022                     ZwSetValueKey(
02023                               logConfHandle,
02024                               &amp;unicodeName,
02025                               TITLE_INDEX_VALUE,
02026                               REG_RESOURCE_LIST,
02027                               ResourceList,
02028                               listSize = <a class="code" href="../../d0/d2/pri__bld_2pnpsubs_8c.html#a21">IopDetermineResourceListSize</a>(ResourceList)
02029                               );
02030                 }
02031                 <span class="keywordflow">if</span> (ResourceRequirements) {
02032                     <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeName, REGSTR_VALUE_BASIC_CONFIG_VECTOR);
02033                     ZwSetValueKey(
02034                               logConfHandle,
02035                               &amp;unicodeName,
02036                               TITLE_INDEX_VALUE,
02037                               REG_RESOURCE_REQUIREMENTS_LIST,
02038                               ResourceRequirements,
02039                               ResourceRequirements-&gt;ListSize
02040                               );
02041                 }
02042                 <span class="comment">//ZwClose(logConfHandle);</span>
02043             }
02044 
02045             <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeName, REGSTR_VALUE_CONFIG_FLAGS);
02046             tmpValue = CONFIGFLAG_FINISH_INSTALL;
02047             ZwSetValueKey(handle,
02048                           &amp;unicodeName,
02049                           TITLE_INDEX_VALUE,
02050                           REG_DWORD,
02051                           &amp;tmpValue,
02052                           <span class="keyword">sizeof</span>(tmpValue)
02053                           );
02054 
02055             PiWstrToUnicodeString(&amp;unicodeName, REGSTR_VALUE_LEGACY);
02056             tmpValue = 0;
02057             ZwSetValueKey(
02058                         handle,
02059                         &amp;unicodeName,
02060                         TITLE_INDEX_VALUE,
02061                         REG_DWORD,
02062                         &amp;tmpValue,
02063                         <span class="keyword">sizeof</span>(ULONG)
02064                         );
02065 
02066             <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeName, REGSTR_KEY_CONTROL);
02067             controlHandle = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
02068             <a class="code" href="../../d9/d1/pnpsubs_8c.html#a8">IopCreateRegistryKeyEx</a>( &amp;controlHandle,
02069                                     handle,
02070                                     &amp;unicodeName,
02071                                     KEY_ALL_ACCESS,
02072                                     REG_OPTION_VOLATILE,
02073                                     NULL
02074                                     );
02075 
02076             <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(status == STATUS_SUCCESS);
02077 
02078             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
02079 
02080                 <span class="comment">//</span>
02081                 <span class="comment">// Write DeviceObject reference ...</span>
02082                 <span class="comment">//</span>
02083 
02084                 PiWstrToUnicodeString(&amp;unicodeName, REGSTR_VALUE_DEVICE_REFERENCE);
02085                 status = ZwSetValueKey(controlHandle,
02086                                        &amp;unicodeName,
02087                                        TITLE_INDEX_VALUE,
02088                                        REG_DWORD,
02089                                        (PULONG_PTR)&amp;deviceObject,
02090                                        <span class="keyword">sizeof</span>(ULONG_PTR)
02091                                        );
02092                 PiWstrToUnicodeString(&amp;unicodeName, REGSTR_VALUE_DEVICE_REPORTED);
02093                 tmpValue = 1;
02094                 status = ZwSetValueKey(controlHandle,
02095                                        &amp;unicodeName,
02096                                        TITLE_INDEX_VALUE,
02097                                        REG_DWORD,
02098                                        &amp;tmpValue,
02099                                        <span class="keyword">sizeof</span>(ULONG)
02100                                        );
02101                 status = ZwSetValueKey(handle,
02102                                        &amp;unicodeName,
02103                                        TITLE_INDEX_VALUE,
02104                                        REG_DWORD,
02105                                        &amp;tmpValue,
02106                                        <span class="keyword">sizeof</span>(ULONG)
02107                                        );
02108 
02109                 <span class="comment">//ZwClose(controlHandle);</span>
02110             }
02111 
02112             ZwClose(enumHandle);
02113 
02114             <span class="comment">//</span>
02115             <span class="comment">// Create Service value name and set it to the calling driver's service</span>
02116             <span class="comment">// key name.</span>
02117             <span class="comment">//</span>
02118 
02119             PiWstrToUnicodeString(&amp;unicodeName, REGSTR_VALUE_SERVICE);
02120             p = (PWSTR)<a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(PagedPool, serviceName-&gt;Length + <span class="keyword">sizeof</span>(UNICODE_NULL));
02121             <span class="keywordflow">if</span> (!p) {
02122                 <span class="keywordflow">goto</span> CleanupRegistry;
02123             }
02124             RtlMoveMemory(p, serviceName-&gt;Buffer, serviceName-&gt;Length);
02125             p[serviceName-&gt;Length / <span class="keyword">sizeof</span> (WCHAR)] = UNICODE_NULL;
02126             ZwSetValueKey(
02127                         handle,
02128                         &amp;unicodeName,
02129                         TITLE_INDEX_VALUE,
02130                         REG_SZ,
02131                         p,
02132                         serviceName-&gt;Length + <span class="keyword">sizeof</span>(UNICODE_NULL)
02133                         );
02134             <span class="keywordflow">if</span> (DriverObject-&gt;Flags &amp; <a class="code" href="../../d0/d5/io_8h.html#a145">DRVO_BUILTIN_DRIVER</a>) {
02135                 deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o14">ServiceName</a> = *serviceName;
02136             } <span class="keywordflow">else</span> {
02137                 <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(p);
02138             }
02139 
02140             <a class="code" href="../../d5/d8/ex_8h.html#a66">ExReleaseResource</a>(&amp;PpRegistryDeviceResource);
02141             <a class="code" href="../../d4/d9/ke_8h.html#a29">KeLeaveCriticalRegion</a>();
02142             <span class="comment">//ZwClose(logConfHandle);</span>
02143             <span class="comment">//ZwClose(controlHandle);</span>
02144             <span class="comment">//ZwClose(handle);</span>
02145 
02146             <span class="comment">//</span>
02147             <span class="comment">// Register the device for the driver and save the device</span>
02148             <span class="comment">// instance path in device node.</span>
02149             <span class="comment">//</span>
02150 
02151             <span class="keywordflow">if</span> (!(DriverObject-&gt;Flags &amp; <a class="code" href="../../d0/d5/io_8h.html#a145">DRVO_BUILTIN_DRIVER</a>)) {
02152                 <a class="code" href="../../d6/d9/pnp_8h.html#a138">PpDeviceRegistration</a>( &amp;deviceName,
02153                                       TRUE,
02154                                       &amp;deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o14">ServiceName</a>
02155                                       );
02156             }
02157 
02158             <a class="code" href="../../d0/d2/pri__bld_2pnpsubs_8c.html#a4">IopConcatenateUnicodeStrings</a>(&amp;deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o13">InstancePath</a>, &amp;deviceName, NULL);
02159 
02160             deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o6">Flags</a> = <a class="code" href="../../d9/d0/pnpiop_8h.html#a5">DNF_MADEUP</a> + <a class="code" href="../../d9/d0/pnpiop_8h.html#a9">DNF_ENUMERATED</a> + <a class="code" href="../../d9/d0/pnpiop_8h.html#a8">DNF_PROCESSED</a>;
02161 
02162             <a class="code" href="../../d9/d0/pnpiop_8h.html#a250">IopInsertTreeDeviceNode</a>(IopRootDeviceNode, deviceNode);
02163 
02164             <span class="comment">//</span>
02165             <span class="comment">// Add a reference to the DeviceObject for ourself</span>
02166             <span class="comment">//</span>
02167 
02168             <a class="code" href="../../d4/d0/ob_8h.html#a15">ObReferenceObject</a>(deviceObject);
02169 
02170             <a class="code" href="../../d9/d0/pnpiop_8h.html#a347">IopNotifySetupDeviceArrival</a>(deviceObject, NULL, FALSE);
02171 
02172             <span class="keywordflow">goto</span> checkResource;
02173         } <span class="keywordflow">else</span> {
02174             <a class="code" href="../../d4/d6/iosubs_8c.html#a55">IoDeleteDevice</a>(deviceObject);
02175             status = STATUS_INSUFFICIENT_RESOURCES;
02176         }
02177     }
02178     <span class="keywordflow">return</span> status;
02179 checkResource:
02180 
02181 
02182     <span class="comment">//</span>
02183     <span class="comment">// At this point the *DeviceObject is established.  Check if we need to report resources for</span>
02184     <span class="comment">// the detected device.  If we failed to</span>
02185     <span class="comment">//</span>
02186 
02187     <span class="keywordflow">if</span> (ResourceAssigned) {
02188         <span class="comment">//ASSERT(deviceNode-&gt;ResourceList == NULL);      // make sure we have not reported resources yet.</span>
02189 
02190         <span class="comment">//</span>
02191         <span class="comment">// If the driver specifies it already has acquired the resource.  We will put a flag</span>
02192         <span class="comment">// in the device instance path to not to allocate resources at boot time.  The Driver</span>
02193         <span class="comment">// may do detection and report it again.</span>
02194         <span class="comment">//</span>
02195 
02196         deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o6">Flags</a> |= <a class="code" href="../../d9/d0/pnpiop_8h.html#a15">DNF_NO_RESOURCE_REQUIRED</a>; <span class="comment">// do not need resources for this boot.</span>
02197         <span class="keywordflow">if</span> (ResourceList) {
02198 
02199             <span class="comment">//</span>
02200             <span class="comment">// Write the resource list to the reported device instance key.</span>
02201             <span class="comment">//</span>
02202 
02203             listSize = <a class="code" href="../../d0/d2/pri__bld_2pnpsubs_8c.html#a21">IopDetermineResourceListSize</a>(ResourceList);
02204             <a class="code" href="../../d9/d0/pnpiop_8h.html#a301">IopWriteAllocatedResourcesToRegistry</a> (deviceNode, ResourceList, listSize);
02205         }
02206     } <span class="keywordflow">else</span> {
02207         BOOLEAN conflict;
02208 
02209         <span class="keywordflow">if</span> (ResourceList &amp;&amp; ResourceList-&gt;Count &amp;&amp; ResourceList-&gt;List[0].PartialResourceList.Count) {
02210             <span class="keywordflow">if</span> (listSize == 0) {
02211                 listSize = <a class="code" href="../../d0/d2/pri__bld_2pnpsubs_8c.html#a21">IopDetermineResourceListSize</a>(ResourceList);
02212             }
02213             cmResource = (PCM_RESOURCE_LIST) <a class="code" href="../../d5/d5/cc_8h.html#a10">ExAllocatePool</a>(PagedPool, listSize);
02214             <span class="keywordflow">if</span> (cmResource) {
02215                 RtlCopyMemory(cmResource, ResourceList, listSize);
02216                 <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;unicodeName, PNPMGR_STR_PNP_MANAGER);
02217                 status = <a class="code" href="../../d1/d8/report_8c.html#a14">IoReportResourceUsageInternal</a>(
02218                              ArbiterRequestLegacyReported,
02219                              &amp;unicodeName,       <span class="comment">// DriverClassName OPTIONAL,</span>
02220                              IoPnpDriverObject,  <span class="comment">// DriverObject,</span>
02221                              NULL,               <span class="comment">// DriverList OPTIONAL,</span>
02222                              0,                  <span class="comment">// DriverListSize OPTIONAL,</span>
02223                              deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o9">PhysicalDeviceObject</a>,
02224                                                  <span class="comment">// DeviceObject OPTIONAL,</span>
02225                              cmResource,         <span class="comment">// DeviceList OPTIONAL,</span>
02226                              listSize,           <span class="comment">// DeviceListSize OPTIONAL,</span>
02227                              FALSE,              <span class="comment">// OverrideConflict,</span>
02228                              &amp;conflict           <span class="comment">// ConflictDetected</span>
02229                              );
02230                 <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(cmResource);
02231                 <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status) || conflict) {
02232                     status = STATUS_CONFLICTING_ADDRESSES;
02233                     <a class="code" href="../../d9/d0/pnpiop_8h.html#a80">IopSetDevNodeProblem</a>(deviceNode, CM_PROB_NORMAL_CONFLICT);
02234                 }
02235             } <span class="keywordflow">else</span> {
02236                 status = STATUS_INSUFFICIENT_RESOURCES;
02237                 <a class="code" href="../../d9/d0/pnpiop_8h.html#a80">IopSetDevNodeProblem</a>(deviceNode, CM_PROB_OUT_OF_MEMORY);
02238             }
02239         } <span class="keywordflow">else</span> {
02240             <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(ResourceRequirements == NULL);
02241             deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o6">Flags</a> |= <a class="code" href="../../d9/d0/pnpiop_8h.html#a15">DNF_NO_RESOURCE_REQUIRED</a>; <span class="comment">// do not need resources for this boot.</span>
02242         }
02243     }
02244 
02245     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
02246 
02247         <a class="code" href="../../d9/d0/pnpiop_8h.html#a356">IopDoDeferredSetInterfaceState</a>(deviceNode);
02248 
02249         deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o6">Flags</a> |= <a class="code" href="../../d9/d0/pnpiop_8h.html#a23">DNF_STARTED</a> | <a class="code" href="../../d9/d0/pnpiop_8h.html#a11">DNF_ADDED</a> | <a class="code" href="../../d9/d0/pnpiop_8h.html#a25">DNF_NEED_ENUMERATION_ONLY</a> | <a class="code" href="../../d9/d0/pnpiop_8h.html#a10">DNF_NEED_QUERY_IDS</a>;
02250         *DeviceObject = deviceObject;
02251         <span class="keywordflow">if</span> (newlyCreated) {
02252             <span class="keywordflow">if</span> (controlHandle) {
02253                 ZwClose(controlHandle);
02254             }
02255             <span class="keywordflow">if</span> (logConfHandle) {
02256                 ZwClose(logConfHandle);
02257             }
02258             ZwClose(handle);
02259         }
02260         <span class="keywordflow">return</span> status;
02261 
02262     }
02263 CleanupRegistry:
02264     <a class="code" href="../../d9/d0/pnpiop_8h.html#a279">IopReleaseDeviceResources</a>(deviceNode, FALSE);
02265     <span class="keywordflow">if</span> (newlyCreated) {
02266         <a class="code" href="../../d4/d6/iosubs_8c.html#a55">IoDeleteDevice</a>(deviceObject);
02267         <span class="keywordflow">if</span> (controlHandle) {
02268             ZwDeleteKey(controlHandle);
02269         }
02270         <span class="keywordflow">if</span> (logConfHandle) {
02271             ZwDeleteKey(logConfHandle);
02272         }
02273         <span class="keywordflow">if</span> (handle) {
02274             ZwDeleteKey(handle);
02275         }
02276     }
02277     <span class="keywordflow">return</span> status;
02278 <a class="code" href="../../d9/d1/fedefs_8h.html#a16">exit</a>:
02279     <a class="code" href="../../d5/d8/ex_8h.html#a66">ExReleaseResource</a>(&amp;PpRegistryDeviceResource);
02280     <a class="code" href="../../d4/d9/ke_8h.html#a29">KeLeaveCriticalRegion</a>();
02281     <a class="code" href="../../d4/d6/iosubs_8c.html#a55">IoDeleteDevice</a>(*DeviceObject);
02282     <span class="keywordflow">return</span> status;
02283 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a156" doxytag="pnp.h::IoReportResourceForDetection" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS IoReportResourceForDetection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DriverObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCM_RESOURCE_LIST DriverList&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG DriverListSize&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> DeviceObject&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PCM_RESOURCE_LIST DeviceList&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG DeviceListSize&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PBOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>ConflictDetected</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d2/d7/report_8c-source.html#l00297">297</a> of file <a class="el" href="../../d2/d7/report_8c-source.html">report.c</a>.
<p>
References <a class="el" href="../../d6/d9/pnp_8h.html#a174a129">ArbiterRequestPnpDetected</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00570">DNF_LEGACY_RESOURCE_DEVICENODE</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d2/d7/report_8c-source.html#l00469">IoReportResourceUsageInternal()</a>, <a class="el" href="../../d0/d1/bugcheck_8c-source.html#l00428">KeBugCheckEx()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00632">PNP_ERR_INVALID_PDO</a>.
<p>
<pre class="fragment"><div>00309                    :
00310 
00311     This routine will automatically search through <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> configuration
00312     registry <span class="keywordflow">for</span> resource conflicts between resources requested by a device
00313     and <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resources already claimed by previously installed drivers. The
00314     contents of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> DriverList and <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> DeviceList will be matched against
00315     all <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> other resource list stored in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> registry to determine
00316     conflicts.
00317 
00318     The function may be called more than once <span class="keywordflow">for</span> a given device or driver.
00319     If a <span class="keyword">new</span> resource list <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> given, <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> previous resource list stored in
00320     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> registry will be replaced by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">new</span> list.
00321 
00322     Note, <span class="keyword">this</span> function <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> drivers acquiring resources <span class="keywordflow">for</span> detection.
00323 
00324 Arguments:
00325 
00326     DriverObject - Pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver's driver object.
00327 
00328     DriverList - Optional pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver's resource list.
00329 
00330     DriverListSize - Optional value determining <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver's
00331         resource list.
00332 
00333     DeviceObject - Optional pointer to driver's device object.
00334 
00335     DeviceList - Optional pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device's resource list.
00336 
00337     DriverListSize - Optional value determining <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> size of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device's
00338         resource list.
00339 
00340     ConflictDetected - Supplies a pointer to a <span class="keywordtype">boolean</span> that <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> set to <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>
00341         <span class="keywordflow">if</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> resource list conflicts with an already existing resource
00342         list in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> configuration registry.
00343 
00344 Return Value:
00345 
00346     The status returned <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <span class="keyword">final</span> completion status of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> operation.
00347 
00348 --*/
00349 
00350 {
00351     <span class="comment">//</span>
00352     <span class="comment">// Sanity check that the caller did not pass in a PnP PDO.</span>
00353     <span class="comment">//</span>
00354 
00355     <span class="keywordflow">if</span> (DeviceObject) {
00356 
00357         <span class="keywordflow">if</span> (    DeviceObject-&gt;DeviceObjectExtension-&gt;DeviceNode &amp;&amp;
00358                 !(((<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a>)DeviceObject-&gt;DeviceObjectExtension-&gt;DeviceNode)-&gt;Flags &amp; <a class="code" href="../../d9/d0/pnpiop_8h.html#a34">DNF_LEGACY_RESOURCE_DEVICENODE</a>)) {
00359 
00360             <a class="code" href="../../d9/d1/bugcheck_8c.html#a19">KeBugCheckEx</a>(PNP_DETECTED_FATAL_ERROR, PNP_ERR_INVALID_PDO, (ULONG_PTR)DeviceObject, 0, 0);
00361 
00362         }
00363 
00364     }
00365 
00366     <span class="keywordflow">return</span> <a class="code" href="../../d1/d8/report_8c.html#a14">IoReportResourceUsageInternal</a>(   ArbiterRequestPnpDetected,
00367                                             NULL,
00368                                             DriverObject,
00369                                             DriverList,
00370                                             DriverListSize,
00371                                             DeviceObject,
00372                                             DeviceList,
00373                                             DeviceListSize,
00374                                             FALSE,
00375                                             ConflictDetected);
00376 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a153" doxytag="pnp.h::IoReportTargetDeviceChange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS IoReportTargetDeviceChange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PhysicalDeviceObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>NotificationStructure</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l06017">6017</a> of file <a class="el" href="../../d9/d9/pnpioapi_8c-source.html">pnpioapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00357">ASSERT_PDO</a>, <a class="el" href="../../d7/d5/memprint_8h-source.html#l00079">DbgPrint</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l01005">_TARGET_DEVICE_CUSTOM_NOTIFICATION::Event</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00623">Executive</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l01009">_TARGET_DEVICE_CUSTOM_NOTIFICATION::FileObject</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02070">IopCompareGuid</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01066">KeInitializeEvent</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00624">KernelMode</a>, <a class="el" href="../../d2/d6/wait_8c-source.html#l00810">KeWaitForSingleObject()</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l01016">_TARGET_DEVICE_CUSTOM_NOTIFICATION::NameBufferOffset</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d6/d9/pnp_8h.html#a157">PpSetCustomTargetEvent()</a>, and <a class="el" href="../../d7/d8/pnp_8h-source.html#l01004">_TARGET_DEVICE_CUSTOM_NOTIFICATION::Size</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/fsrtl_2pnp_8c-source.html#l00041">FsRtlNotifyVolumeEvent()</a>, and <a class="el" href="../../d9/d1/qsfs_8c-source.html#l00492">NtSetVolumeInformationFile()</a>.
<p>
<pre class="fragment"><div>06024                    :
06025 
06026     This routine may be used to give notification of 3rd-party target device
06027     change events.  This API will notify every driver that has registered <span class="keywordflow">for</span>
06028     notification on a <a class="code" href="../../d2/d0/nt6_2user32_8def.html#a9">file</a> object associated with PhysicalDeviceObject about
06029     <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> event indicated in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> NotificationStructure.
06030 
06031 Parameters:
06032 
06033     PhysicalDeviceObject - Provides a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> PDO that <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> change begin
06034         reported <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> associated with.
06035 
06036     NotificationStructure - Provides a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> notification structure to be
06037         sent to all parties registered <span class="keywordflow">for</span> notifications about changes to
06038         PhysicalDeviceObject.
06039 
06040 Return Value:
06041 
06042     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> code that indicates whether or not <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> function was successful.
06043 
06044 Note:
06045 
06046     This API may <a class="code" href="../../d3/d0/imm32_8def.html#a1">only</a> be used to report non-PnP target device changes.  In particular,
06047     <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> will fail <span class="keywordflow">if</span> <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a>'s called with <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> NotificationStructure-&gt;Event field set to
06048     GUID_TARGET_DEVICE_QUERY_REMOVE, GUID_TARGET_DEVICE_REMOVE_CANCELLED, or
06049     GUID_TARGET_DEVICE_REMOVE_COMPLETE.
06050 
06051 --*/
06052 {
06053 
06054     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status = STATUS_SUCCESS;
06055     <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> completionEvent;
06056     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> completionStatus;
06057     <a class="code" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html">PTARGET_DEVICE_CUSTOM_NOTIFICATION</a> notifyStruct;
06058     LONG                   dataSize;
06059 
06060     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
06061 
06062     notifyStruct = (<a class="code" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html">PTARGET_DEVICE_CUSTOM_NOTIFICATION</a>)NotificationStructure;
06063 
06064     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(notifyStruct);
06065 
06066     <a class="code" href="../../d9/d0/pnpiop_8h.html#a4">ASSERT_PDO</a>(PhysicalDeviceObject);
06067 
06068     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(NULL == notifyStruct-&gt;<a class="code" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html#o3">FileObject</a>);
06069 
06070 
06071     <span class="keywordflow">if</span> (<a class="code" href="../../d9/d0/pnpiop_8h.html#a109">IopCompareGuid</a>(&amp;notifyStruct-&gt;<a class="code" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html#o2">Event</a>, &amp;GUID_TARGET_DEVICE_QUERY_REMOVE) ||
06072         <a class="code" href="../../d9/d0/pnpiop_8h.html#a109">IopCompareGuid</a>(&amp;notifyStruct-&gt;<a class="code" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html#o2">Event</a>, &amp;GUID_TARGET_DEVICE_REMOVE_CANCELLED) ||
06073         <a class="code" href="../../d9/d0/pnpiop_8h.html#a109">IopCompareGuid</a>(&amp;notifyStruct-&gt;<a class="code" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html#o2">Event</a>, &amp;GUID_TARGET_DEVICE_REMOVE_COMPLETE)) {
06074 
06075         <span class="comment">//</span>
06076         <span class="comment">//  Passed in an illegal value</span>
06077         <span class="comment">//</span>
06078 
06079 <span class="preprocessor">#if DBG</span>
06080 <span class="preprocessor"></span>        <a class="code" href="../../d6/d6/memprint_8h.html#a7">DbgPrint</a>(<span class="stringliteral">"Illegal Event type passed as custom notification\n"</span>);
06081 <span class="preprocessor">#endif</span>
06082 <span class="preprocessor"></span>        <span class="keywordflow">return</span> STATUS_INVALID_DEVICE_REQUEST;
06083 
06084     }
06085 
06086     <span class="keywordflow">if</span> (notifyStruct-&gt;<a class="code" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html#o1">Size</a> &lt; FIELD_OFFSET(<a class="code" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html">TARGET_DEVICE_CUSTOM_NOTIFICATION</a>, CustomDataBuffer)) {
06087 
06088         <span class="keywordflow">return</span> STATUS_INVALID_DEVICE_REQUEST;
06089     }
06090 
06091     dataSize = notifyStruct-&gt;<a class="code" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html#o1">Size</a> - FIELD_OFFSET(<a class="code" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html">TARGET_DEVICE_CUSTOM_NOTIFICATION</a>, CustomDataBuffer);
06092 
06093     <span class="keywordflow">if</span> (notifyStruct-&gt;<a class="code" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html#o4">NameBufferOffset</a> != -1 &amp;&amp; notifyStruct-&gt;<a class="code" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html#o4">NameBufferOffset</a> &gt; dataSize)  {
06094 
06095         <span class="keywordflow">return</span> STATUS_INVALID_DEVICE_REQUEST;
06096     }
06097 
06098     <a class="code" href="../../d4/d9/ke_8h.html#a20">KeInitializeEvent</a>(&amp;completionEvent, NotificationEvent, FALSE);
06099 
06100     status = <a class="code" href="../../d6/d9/pnp_8h.html#a157">PpSetCustomTargetEvent</a>( PhysicalDeviceObject,
06101                                      &amp;completionEvent,
06102                                      &amp;completionStatus,
06103                                      NULL,
06104                                      NULL,
06105                                      notifyStruct);
06106 
06107     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status))  {
06108 
06109         <a class="code" href="../../d1/d7/wait_8c.html#a4">KeWaitForSingleObject</a>( &amp;completionEvent, Executive, KernelMode, FALSE, NULL );
06110 
06111         status = completionStatus;
06112     }
06113 
06114     <span class="keywordflow">return</span> status;
06115 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a155" doxytag="pnp.h::IoReportTargetDeviceChangeAsynchronous" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS IoReportTargetDeviceChangeAsynchronous           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PhysicalDeviceObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>NotificationStructure</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d6/d9/pnp_8h.html#a51">PDEVICE_CHANGE_COMPLETE_CALLBACK</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Callback</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OPTIONAL IN PVOID Context&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a143" doxytag="pnp.h::IoRequestDeviceEject" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI VOID IoRequestDeviceEject           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>PhysicalDeviceObject</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a148" doxytag="pnp.h::IoSetDeviceInterfaceState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS IoSetDeviceInterfaceState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>SymbolicLinkName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Enable</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l03563">3563</a> of file <a class="el" href="../../d9/d9/pnpioapi_8c-source.html">pnpioapi.c</a>.
<p>
References <a class="el" href="../../d6/d7/ex_8h-source.html#l02475">ExAcquireResourceExclusive</a>, <a class="el" href="../../d6/d7/ex_8h-source.html#l02393">ExReleaseResource</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l09922">IopProcessSetInterfaceState()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01598">KeEnterCriticalRegion</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01628">KeLeaveCriticalRegion</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d7/d8/pnp_8h-source.html#l00036">PpRegistryDeviceResource</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l04140">IopUnregisterDeviceInterface()</a>.
<p>
<pre class="fragment"><div>03570                    :
03571 
03572     This DDI allows a device <span class="keyword">class </span>to activate and deactivate an association
03573     previously registered using <a class="code" href="../../d6/d9/pnp_8h.html#a146">IoRegisterDeviceInterface</a>
03574 
03575 Parameters:
03576 
03577     SymbolicLinkName - Supplies a pointer to <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> symbolic link name which was
03578         returned by <a class="code" href="../../d6/d9/pnp_8h.html#a146">IoRegisterDeviceInterface</a> when <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> interface was registered,
03579         or as returned by <a class="code" href="../../d6/d9/pnp_8h.html#a149">IoGetDeviceInterfaces</a>.
03580 
03581     Enable - If <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a> (non-zero), <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> interface will be enabled.  If <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>, <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a>
03582         will be disabled.
03583 
03584 Return Value:
03585 
03586     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> code that indicates whether or not <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> function was successful.
03587 
03588 --*/
03589 
03590 {
03591     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status;
03592 
03593     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
03594 
03595     <span class="comment">//</span>
03596     <span class="comment">// Enter critical section and acquire a lock on the registry.  Both these</span>
03597     <span class="comment">// mechanisms are required to prevent deadlock in the case where an APC</span>
03598     <span class="comment">// routine calls this routine after the registry resource has been claimed</span>
03599     <span class="comment">// in this case it would wait blocking this thread so the registry would</span>
03600     <span class="comment">// never be released -&gt; deadlock.  Critical sectioning the registry manipulation</span>
03601     <span class="comment">// portion solves this problem</span>
03602     <span class="comment">//</span>
03603 
03604     <a class="code" href="../../d4/d9/ke_8h.html#a28">KeEnterCriticalRegion</a>();
03605     <a class="code" href="../../d5/d8/ex_8h.html#a70">ExAcquireResourceExclusive</a>(&amp;PpRegistryDeviceResource, TRUE);
03606 
03607     status = <a class="code" href="../../d9/d0/pnpiop_8h.html#a357">IopProcessSetInterfaceState</a>(SymbolicLinkName, Enable, TRUE);
03608 
03609     <a class="code" href="../../d5/d8/ex_8h.html#a66">ExReleaseResource</a>(&amp;PpRegistryDeviceResource);
03610     <a class="code" href="../../d4/d9/ke_8h.html#a29">KeLeaveCriticalRegion</a>();
03611 
03612     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status) &amp;&amp; !Enable) {
03613         <span class="comment">//</span>
03614         <span class="comment">// If we failed to disable an interface (most likely because the</span>
03615         <span class="comment">// interface keys have already been deleted) report success.</span>
03616         <span class="comment">//</span>
03617         status = STATUS_SUCCESS;
03618     }
03619 
03620     <span class="keywordflow">return</span> status;
03621 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a139" doxytag="pnp.h::IoSynchronousInvalidateDeviceRelations" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS IoSynchronousInvalidateDeviceRelations           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/io_8h.html#a358">DEVICE_RELATION_TYPE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Type</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l01291">1291</a> of file <a class="el" href="../../d9/d9/pnpioapi_8c-source.html">pnpioapi.c</a>.
<p>
References <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00357">ASSERT_PDO</a>, <a class="el" href="../../d0/d5/io_8h.html#a602a412">BusRelations</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l01274">_DEVOBJ_EXTENSION::DeviceNode</a>, <a class="el" href="../../d1/d4/io_8h-source.html#l01210">_DEVICE_OBJECT::DeviceObjectExtension</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00487">DNF_STARTED</a>, <a class="el" href="../../d0/d5/io_8h.html#a602a413">EjectionRelations</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00623">Executive</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l00129">_DEVICE_NODE::Flags</a>, <a class="el" href="../../d7/d9/pnpenum_8c-source.html#l00207">IopRequestDeviceAction()</a>, <a class="el" href="../../d5/d8/ke_8h-source.html#l01066">KeInitializeEvent</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00624">KernelMode</a>, <a class="el" href="../../d2/d6/wait_8c-source.html#l00810">KeWaitForSingleObject()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d2/d9/pnpdata_8c-source.html#l00110">PnPInitialized</a>, <a class="el" href="../../d1/d2/po_8h.html#a65">PoInvalidateDevicePowerRelations()</a>, <a class="el" href="../../d0/d5/io_8h.html#a602a414">PowerRelations</a>, and <a class="el" href="../../d9/d0/pnpiop_8h.html#a391a218">ReenumerateDeviceTree</a>.
<p>
<pre class="fragment"><div>01298                    :
01299 
01300     This API notifies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> system that changes have occurred in <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> device
01301     relations of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> supplied DeviceObject.   All
01302     cached information concerning <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> relationships must be invalidated,
01303     and <span class="keywordflow">if</span> needed re-obtained via <a class="code" href="../../d0/d5/io_8h.html#a72">IRP_MN_QUERY_DEVICE_RELATIONS</a>.
01304 
01305     This routine performs device enumeration synchronously.
01306     Note, <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> driver can NOT call <span class="keyword">this</span> IO api <span class="keywordflow">while</span> processing pnp irps AND
01307     <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> driver can NOT call <span class="keyword">this</span> api from any system thread except <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> system
01308     threads created by <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> driver itself.
01309 
01310 Parameters:
01311 
01312     DeviceObject - <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a> <span class="keywordflow">for</span> which <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> specified relation <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a>
01313                    information has been invalidated.  This pointer <a class="code" href="../../d3/d0/user32_8def.html#a108">is</a> valid
01314                    <span class="keywordflow">for</span> <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> duration of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> call.
01315 
01316     Type - specifies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> <a class="code" href="../../d3/d5/i386_2trapc_8c.html#a9">type</a> of <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> relation being invalidated.
01317 
01318 ReturnValue:
01319 
01320     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> code that indicates whether or not <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> function was successful.
01321 
01322 --*/
01323 
01324 {
01325     <a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a> deviceNode;
01326     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> status = STATUS_SUCCESS;
01327     <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> completionEvent;
01328 
01329     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
01330 
01331     <a class="code" href="../../d9/d0/pnpiop_8h.html#a4">ASSERT_PDO</a>(DeviceObject);
01332 
01333     <span class="keywordflow">switch</span> (Type) {
01334     <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a602a412">BusRelations</a>:
01335 
01336         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0/pnpdata_8c.html#a14">PnPInitialized</a>) {
01337 
01338             deviceNode = (<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html">PDEVICE_NODE</a>)DeviceObject-&gt;<a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html#o25">DeviceObjectExtension</a>-&gt;<a class="code" href="../../d3/d5/struct__DEVOBJ__EXTENSION.html#o6">DeviceNode</a>;
01339 
01340             <span class="keywordflow">if</span> (deviceNode-&gt;<a class="code" href="../../d4/d4/struct__DEVICE__NODE.html#o6">Flags</a> &amp; <a class="code" href="../../d9/d0/pnpiop_8h.html#a23">DNF_STARTED</a>) {
01341 
01342                 <a class="code" href="../../d4/d9/ke_8h.html#a20">KeInitializeEvent</a>( &amp;completionEvent, NotificationEvent, FALSE );
01343 
01344                 status = <a class="code" href="../../d9/d0/pnpiop_8h.html#a305">IopRequestDeviceAction</a>( DeviceObject,
01345                                                  ReenumerateDeviceTree,
01346                                                  &amp;completionEvent,
01347                                                  NULL );
01348 
01349                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(status)) {
01350 
01351                     status = <a class="code" href="../../d1/d7/wait_8c.html#a4">KeWaitForSingleObject</a>( &amp;completionEvent,
01352                                                     Executive,
01353                                                     KernelMode,
01354                                                     FALSE,
01355                                                     NULL);
01356                 }
01357             } <span class="keywordflow">else</span> {
01358                 status = STATUS_UNSUCCESSFUL;
01359             }
01360         } <span class="keywordflow">else</span> {
01361             <span class="comment">//</span>
01362             <span class="comment">// BUGBUG - This check may be too much.  For now ...</span>
01363             <span class="comment">//</span>
01364 
01365             status = STATUS_UNSUCCESSFUL;  <span class="comment">// BUGBUG- better status code</span>
01366         }
01367 
01368 
01369         <span class="keywordflow">break</span>;
01370 
01371     <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a602a413">EjectionRelations</a>:
01372 
01373         <span class="comment">//</span>
01374         <span class="comment">// For Ejection relation change, we will ignore it.  We don't keep track</span>
01375         <span class="comment">// the Ejection relation.  We will query the Ejection relation only when</span>
01376         <span class="comment">// we are requested to eject a device.</span>
01377         <span class="comment">//</span>
01378 
01379         status = STATUS_NOT_SUPPORTED;
01380         <span class="keywordflow">break</span>;
01381 
01382     <span class="keywordflow">case</span> <a class="code" href="../../d0/d5/io_8h.html#a602a414">PowerRelations</a>:
01383 
01384 
01385         <span class="comment">//</span>
01386         <span class="comment">// Call off to Po code, which will do the right thing</span>
01387         <span class="comment">//</span>
01388         <a class="code" href="../../d1/d2/po_8h.html#a65">PoInvalidateDevicePowerRelations</a>(DeviceObject);
01389         <span class="keywordflow">break</span>;
01390     }
01391     <span class="keywordflow">return</span> status;
01392 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a152" doxytag="pnp.h::IoUnregisterPlugPlayNotification" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS IoUnregisterPlugPlayNotification           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PVOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>NotificationEntry</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l05829">5829</a> of file <a class="el" href="../../d9/d9/pnpioapi_8c-source.html">pnpioapi.c</a>.
<p>
References <a class="el" href="../../d7/d4/ntgdi_2icm_2inc_2debug_8h-source.html#l00146">ASSERT</a>, <a class="el" href="../../d7/d2/cmwraper_8c-source.html#l00304">ExFreePool()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02053">IopAcquireNotifyLock</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00199">IopDeferredRegistrationList</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00200">IopDeferredRegistrationLock</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l06600">IopDereferenceNotify()</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02061">IopReleaseNotifyLock</a>, <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02249">_NOTIFY_ENTRY_HEADER::Lock</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00197">_DEFERRED_REGISTRATION_ENTRY::NotifyEntry</a>, <a class="el" href="../../d1/d8/ntosdef_8h-source.html#l00462">PAGED_CODE</a>, <a class="el" href="../../d8/d0/pnpioapi_8c.html#a46">PDEFERRED_REGISTRATION_ENTRY</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00189">PiNotificationInProgress</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00190">PiNotificationInProgressLock</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d0/d0/pnpiop_8h-source.html#l02240">_NOTIFY_ENTRY_HEADER::Unregistered</a>.
<p>
Referenced by <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00248">DeviceCDROMNotify()</a>, and <a class="el" href="../../d6/d8/w32_2ntuser_2kernel_2pnp_8c-source.html#l00981">UnregisterForDeviceChangeNotifications()</a>.
<p>
<pre class="fragment"><div>05835                    :
05836 
05837     This routine unregisters a notification previously registered via
05838     <a class="code" href="../../d6/d9/pnp_8h.html#a151">IoRegisterPlugPlayNotification</a>.  <a class="code" href="../../d2/d1/bench_8h.html#a5">A</a> driver cannot be unloaded until <a class="code" href="../../d1/d9/icmui_8def.html#a4">it</a> has
05839     unregistered all of its notification handles.
05840 
05841 Parameters:
05842 
05843     NotificationEntry - This provices <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> cookie returned by <a class="code" href="../../d6/d9/pnp_8h.html#a151">IoRegisterPlugPlayNotification</a>
05844         which identifies <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> registration in question.
05845 
05846 Return Value:
05847 
05848     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> code that indicates whether or not <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> function was successful.
05849 
05850 --*/
05851 
05852 {
05853     <a class="code" href="../../d0/d4/struct__NOTIFY__ENTRY__HEADER.html">PNOTIFY_ENTRY_HEADER</a> entry;
05854     <a class="code" href="../../d6/d9/struct__FAST__MUTEX.html">PFAST_MUTEX</a> lock;
05855     BOOLEAN wasDeferred = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
05856 
05857     <a class="code" href="../../d0/d9/ntosdef_8h.html#a28">PAGED_CODE</a>();
05858 
05859     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(NotificationEntry);
05860 
05861     entry = (<a class="code" href="../../d0/d4/struct__NOTIFY__ENTRY__HEADER.html">PNOTIFY_ENTRY_HEADER</a>)NotificationEntry;
05862 
05863     lock = entry-&gt;<a class="code" href="../../d0/d4/struct__NOTIFY__ENTRY__HEADER.html#o7">Lock</a>;
05864 
05865     ExAcquireFastMutex(&amp;PiNotificationInProgressLock);
05866     <span class="keywordflow">if</span> (<a class="code" href="../../d8/d0/pnpioapi_8c.html#a43">PiNotificationInProgress</a>) {
05867         <span class="comment">//</span>
05868         <span class="comment">// Before unregistering the entry, we need to make sure that it's not sitting</span>
05869         <span class="comment">// around in the deferred registration list.</span>
05870         <span class="comment">//</span>
05871         <a class="code" href="../../d9/d0/pnpiop_8h.html#a107">IopAcquireNotifyLock</a>(&amp;IopDeferredRegistrationLock);
05872 
05873         <span class="keywordflow">if</span> (!IsListEmpty(&amp;IopDeferredRegistrationList)) {
05874 
05875             PLIST_ENTRY link;
05876             <a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html">PDEFERRED_REGISTRATION_ENTRY</a> deferredNode;
05877 
05878             link = <a class="code" href="../../d8/d0/pnpioapi_8c.html#a47">IopDeferredRegistrationList</a>.Flink;
05879             deferredNode = (<a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html">PDEFERRED_REGISTRATION_ENTRY</a>)link;
05880 
05881             <span class="keywordflow">while</span> (link != (PLIST_ENTRY)&amp;<a class="code" href="../../d8/d0/pnpioapi_8c.html#a47">IopDeferredRegistrationList</a>) {
05882                 <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(deferredNode-&gt;<a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html#o1">NotifyEntry</a>-&gt;<a class="code" href="../../d0/d4/struct__NOTIFY__ENTRY__HEADER.html#o6">Unregistered</a>);
05883                 <span class="keywordflow">if</span> (deferredNode-&gt;<a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html#o1">NotifyEntry</a> == entry) {
05884                     wasDeferred = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
05885                     <span class="keywordflow">if</span> (lock) {
05886                         <a class="code" href="../../d9/d0/pnpiop_8h.html#a107">IopAcquireNotifyLock</a>(lock);
05887                     }
05888                     link = link-&gt;Flink;
05889                     RemoveEntryList((PLIST_ENTRY)deferredNode);
05890                     <a class="code" href="../../d8/d0/pnpioapi_8c.html#a70">IopDereferenceNotify</a>((<a class="code" href="../../d0/d4/struct__NOTIFY__ENTRY__HEADER.html">PNOTIFY_ENTRY_HEADER</a>)deferredNode-&gt;<a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html#o1">NotifyEntry</a>);
05891                     <span class="keywordflow">if</span> (lock) {
05892                         <a class="code" href="../../d9/d0/pnpiop_8h.html#a108">IopReleaseNotifyLock</a>(lock);
05893                     }
05894                     <a class="code" href="../../d5/d8/ex_8h.html#a224">ExFreePool</a>(deferredNode);
05895                     deferredNode = (<a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html">PDEFERRED_REGISTRATION_ENTRY</a>)link;
05896                 } <span class="keywordflow">else</span> {
05897                     link = link-&gt;Flink;
05898                     deferredNode = (<a class="code" href="../../d4/d2/struct__DEFERRED__REGISTRATION__ENTRY.html">PDEFERRED_REGISTRATION_ENTRY</a>)link;
05899                 }
05900             }
05901         }
05902 
05903         <a class="code" href="../../d9/d0/pnpiop_8h.html#a108">IopReleaseNotifyLock</a>(&amp;IopDeferredRegistrationLock);
05904     } <span class="keywordflow">else</span> {
05905         <span class="comment">//</span>
05906         <span class="comment">// If there is currently no notification in progress, the deferred</span>
05907         <span class="comment">// registration list must be empty.</span>
05908         <span class="comment">//</span>
05909         <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(IsListEmpty(&amp;IopDeferredRegistrationList));
05910     }
05911     ExReleaseFastMutex(&amp;PiNotificationInProgressLock);
05912 
05913     <span class="comment">//</span>
05914     <span class="comment">// Acquire lock</span>
05915     <span class="comment">//</span>
05916     <span class="keywordflow">if</span> (lock) {
05917         <a class="code" href="../../d9/d0/pnpiop_8h.html#a107">IopAcquireNotifyLock</a>(lock);
05918     }
05919 
05920     <a class="code" href="../../d6/d5/ntgdi_2icm_2inc_2debug_8h.html#a7">ASSERT</a>(wasDeferred == entry-&gt;<a class="code" href="../../d0/d4/struct__NOTIFY__ENTRY__HEADER.html#o6">Unregistered</a>);
05921 
05922     <span class="keywordflow">if</span> (!entry-&gt;<a class="code" href="../../d0/d4/struct__NOTIFY__ENTRY__HEADER.html#o6">Unregistered</a> || wasDeferred) {
05923         <span class="comment">//</span>
05924         <span class="comment">// Dereference the entry if it is currently registered, or had its</span>
05925         <span class="comment">// registration pending completion of the notification in progress.</span>
05926         <span class="comment">//</span>
05927 
05928         <span class="comment">//</span>
05929         <span class="comment">// Mark the entry as unregistered so we don't notify on it</span>
05930         <span class="comment">//</span>
05931 
05932         entry-&gt;<a class="code" href="../../d0/d4/struct__NOTIFY__ENTRY__HEADER.html#o6">Unregistered</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
05933 
05934         <span class="comment">//</span>
05935         <span class="comment">// Dereference it thus deleting if no longer required</span>
05936         <span class="comment">//</span>
05937 
05938         <a class="code" href="../../d8/d0/pnpioapi_8c.html#a70">IopDereferenceNotify</a>(entry);
05939     }
05940 
05941     <span class="comment">//</span>
05942     <span class="comment">// Release the lock</span>
05943     <span class="comment">//</span>
05944 
05945     <span class="keywordflow">if</span> (lock) {
05946         <a class="code" href="../../d9/d0/pnpiop_8h.html#a108">IopReleaseNotifyLock</a>(lock);
05947     }
05948 
05949     <span class="keywordflow">return</span> STATUS_SUCCESS;
05950 
05951 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a138" doxytag="pnp.h::PpDeviceRegistration" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI NTSTATUS PpDeviceRegistration           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceInstancePath</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Add</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING ServiceKeyName&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d0/d1/pnpsubs_8c-source.html#l00091">IopCreateMadeupNode()</a>, <a class="el" href="../../d8/d9/pnpinit_8c-source.html#l00879">IopInitializeDeviceInstanceKey()</a>, <a class="el" href="../../d0/d5/ioinit_8c-source.html#l04318">IopNotifySetupDevices()</a>, <a class="el" href="../../d7/d9/pnpenum_8c-source.html#l01538">IopProcessNewDeviceNode()</a>, and <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l01548">IoReportDetectedDevice()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a163" doxytag="pnp.h::PpInitializeNotification" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS PpInitializeNotification           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d8/d9/pnpinit_8c-source.html#l00093">IopInitializePlugPlayServices()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a137" doxytag="pnp.h::PpInitSystem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTKERNELAPI BOOLEAN PpInitSystem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a160" doxytag="pnp.h::PpNotifyUserModeRemovalSafe" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS PpNotifyUserModeRemovalSafe           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>DeviceObject</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d1/d0/pnpirp_8c-source.html#l00730">IopEjectDevice()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a157" doxytag="pnp.h::PpSetCustomTargetEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS PpSetCustomTargetEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> SyncEvent&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG Result&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d6/d9/pnp_8h.html#a51">PDEVICE_CHANGE_COMPLETE_CALLBACK</a> Callback&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PVOID Context&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d0/d0/struct__TARGET__DEVICE__CUSTOM__NOTIFICATION.html">PTARGET_DEVICE_CUSTOM_NOTIFICATION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>NotificationStructure</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l06242">IopReportTargetDeviceChangeAsyncWorker()</a>, and <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l06017">IoReportTargetDeviceChange()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a161" doxytag="pnp.h::PpSetDeviceClassChange" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS PpSetDeviceClassChange           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN CONST GUID *&nbsp;</td>
          <td class="mdname" nowrap> <em>EventGuid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN CONST GUID *&nbsp;</td>
          <td class="mdname" nowrap> <em>ClassGuid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING&nbsp;</td>
          <td class="mdname" nowrap> <em>SymbolicLinkName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l09922">IopProcessSetInterfaceState()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a159" doxytag="pnp.h::PpSetDeviceRemovalSafe" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS PpSetDeviceRemovalSafe           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> SyncEvent&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG Result&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d4/d9/pnpdel_8c-source.html#l01417">IopProcessCompletedEject()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a166" doxytag="pnp.h::PpSetHwProfileChangeEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS PpSetHwProfileChangeEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN CONST GUID *&nbsp;</td>
          <td class="mdname" nowrap> <em>EventGuid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> CompletionEvent&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PNTSTATUS CompletionStatus&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PPNP_VETO_TYPE VetoType&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PUNICODE_STRING VetoName&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l06672">IopRequestHwProfileChangeNotification()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a162" doxytag="pnp.h::PpSetPlugPlayEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID PpSetPlugPlayEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN CONST GUID *&nbsp;</td>
          <td class="mdname" nowrap> <em>EventGuid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceObject</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d9/pnpenum_8c-source.html#l01163">IopEnumerateDevice()</a>, and <a class="el" href="../../d7/d9/pnpenum_8c-source.html#l01538">IopProcessNewDeviceNode()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a165" doxytag="pnp.h::PpSetPowerEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS PpSetPowerEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>EventCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> CompletionEvent&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PNTSTATUS CompletionStatus&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PPNP_VETO_TYPE VetoType&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PUNICODE_STRING VetoName&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l09221">IoPnPDeliverServicePowerNotification()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a168" doxytag="pnp.h::PpSetPowerVetoEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS PpSetPowerVetoEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN POWER_ACTION&nbsp;</td>
          <td class="mdname" nowrap> <em>VetoedPowerOperation</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> CompletionEvent&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PNTSTATUS CompletionStatus&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PNP_VETO_TYPE&nbsp;</td>
          <td class="mdname" nowrap> <em>VetoType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PUNICODE_STRING VetoName&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l09171">IoNotifyPowerOperationVetoed()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a158" doxytag="pnp.h::PpSetTargetDeviceRemove" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS PpSetTargetDeviceRemove           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>DeviceObject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>KernelInitiated</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>NoRestart</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>DoEject</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Problem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN <a class="el" href="../../d2/d6/struct__KEVENT.html">PKEVENT</a> SyncEvent&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PULONG Result&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PPNP_VETO_TYPE VetoType&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>OUT PUNICODE_STRING VetoName&nbsp;</td>
          <td class="mdname" nowrap> <em>OPTIONAL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l01520">IopRequestDeviceEjectWorker()</a>, <a class="el" href="../../d4/d9/pnpdel_8c-source.html#l01708">IopRequestDeviceRemoval()</a>, and <a class="el" href="../../d1/d0/pnpirp_8c-source.html#l00510">IopStartDevice()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a164" doxytag="pnp.h::PpShutdownSystem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID PpShutdownSystem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN BOOLEAN&nbsp;</td>
          <td class="mdname" nowrap> <em>Reboot</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>Phase</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN OUT PVOID *&nbsp;</td>
          <td class="mdname" nowrap> <em>Context</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a167" doxytag="pnp.h::PpSynchronizeDeviceEventQueue" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS PpSynchronizeDeviceEventQueue           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="../../d7/d9/pnpenum_8c-source.html#l00307">IopDeviceActionWorker()</a>, and <a class="el" href="../../d7/d9/pnpenum_8c-source.html#l00821">IopProcessStartDevices()</a>.    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a14" doxytag="pnp.h::IoPnpDriverObject" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d4/d9/struct__DRIVER__OBJECT.html">PDRIVER_OBJECT</a> <a class="el" href="../../d1/d0/pnpdata_8c.html#a6">IoPnpDriverObject</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00037">37</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
Referenced by <a class="el" href="../../d6/d0/pnpres_8c-source.html#l05911">IopFindLegacyDeviceNode()</a>, <a class="el" href="../../d8/d9/pnpinit_8c-source.html#l00879">IopInitializeDeviceInstanceKey()</a>, <a class="el" href="../../d8/d9/pnpinit_8c-source.html#l00093">IopInitializePlugPlayServices()</a>, <a class="el" href="../../d6/d0/pnpres_8c-source.html#l06180">IopLegacyResourceAllocation()</a>, <a class="el" href="../../d8/d9/pnpinit_8c-source.html#l00636">IopPnPDriverEntry()</a>, <a class="el" href="../../d3/d9/pnpdd_8c-source.html#l00263">IopReleaseDeviceResources()</a>, <a class="el" href="../../d6/d0/pnpres_8c-source.html#l06083">IopRemoveLegacyDeviceNode()</a>, and <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l01548">IoReportDetectedDevice()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="pnp.h::PpRegistryDeviceResource" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d4/struct__ERESOURCE.html">ERESOURCE</a> <a class="el" href="../../d6/d9/pnp_8h.html#a13">PpRegistryDeviceResource</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/pnp_8h-source.html#l00036">36</a> of file <a class="el" href="../../d7/d8/pnp_8h-source.html">pnp.h</a>.
<p>
Referenced by <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l04946">IoGetDeviceInterfaceAlias()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00373">IoGetDeviceProperty()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l03624">IoOpenDeviceInterfaceRegistryKey()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l00810">IoOpenDeviceRegistryKey()</a>, <a class="el" href="../../d0/d1/pnpsubs_8c-source.html#l00091">IopCreateMadeupNode()</a>, <a class="el" href="../../d0/d1/pnpsubs_8c-source.html#l05453">IopDeleteLegacyKey()</a>, <a class="el" href="../../d4/d9/pnpdel_8c-source.html#l00232">IopDeleteLockedDeviceNode()</a>, <a class="el" href="../../d7/d9/pnpenum_8c-source.html#l00307">IopDeviceActionWorker()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l03708">IopDeviceInterfaceKeysFromSymbolicLink()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l09866">IopDoDeferredSetInterfaceState()</a>, <a class="el" href="../../d0/d1/pnpsubs_8c-source.html#l02779">IopDriverLoadingFailed()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l02707">IopGetDeviceInterfaces()</a>, <a class="el" href="../../d3/d9/pnpdd_8c-source.html#l01411">IopGetDriverDeviceList()</a>, <a class="el" href="../../d8/d9/pnpinit_8c-source.html#l00680">IopGetRootDevices()</a>, <a class="el" href="../../d3/d9/pnpdd_8c-source.html#l02009">IopIsFirmwareDisabled()</a>, <a class="el" href="../../d1/d0/pnpirp_8c-source.html#l01891">IopMakeGloballyUniqueId()</a>, <a class="el" href="../../d0/d1/pnpsubs_8c-source.html#l00753">IopPrepareDriverLoading()</a>, <a class="el" href="../../d7/d9/pnpenum_8c-source.html#l01538">IopProcessNewDeviceNode()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l03929">IopRegisterDeviceInterface()</a>, <a class="el" href="../../d3/d9/pnpdd_8c-source.html#l00263">IopReleaseDeviceResources()</a>, <a class="el" href="../../d7/d9/pnpenum_8c-source.html#l00994">IopStartAndEnumerateDevice()</a>, <a class="el" href="../../d4/d9/pnpdel_8c-source.html#l01572">IopUnlockDeviceRemovalRelations()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l04140">IopUnregisterDeviceInterface()</a>, <a class="el" href="../../d3/d9/pnpdd_8c-source.html#l01931">IopWriteAllocatedResourcesToRegistry()</a>, <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l01548">IoReportDetectedDevice()</a>, and <a class="el" href="../../d9/d9/pnpioapi_8c-source.html#l03563">IoSetDeviceInterfaceState()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:09 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

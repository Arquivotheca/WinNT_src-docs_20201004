<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: rtl/wow.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>wow.c File Reference</h1><code>#include "<a class="el" href="../../d8/d8/wow_8h-source.html">wow.h</a>"</code><br>

<p>
<a href="../../d7/d8/rtl_2wow_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a0">CHECK_RESTRICTED</a>()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a1">GET_CURRENT_CLIENTINFO</a>()&nbsp;&nbsp;&nbsp;pci = GetClientInfo();</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a2">DESKTOPVALIDATE</a>(pci, pobj)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a3">SHAREDVALIDATE</a>(pobj)&nbsp;&nbsp;&nbsp;pobj = REBASESHAREDPTRALWAYS(pobj);</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a4">ValidateHandleMacro</a>(pci, pobj, h, bType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a5">ValidateSharedHandleMacro</a>(pobj, h, bType)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>PVOID FASTCALL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a6">HMValidateHandle</a> (HANDLE h, <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> bType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PVOID FASTCALL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a7">HMValidateHandleNoSecure</a> (HANDLE h, <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> bType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PVOID FASTCALL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a8">HMValidateHandleNoRip</a> (HANDLE h, <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> bType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>PVOID FASTCALL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a9">HMValidateSharedHandle</a> (HANDLE h, <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> bType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d9/structtagITEM.html">PITEM</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a10">MNLookUpItem</a> (<a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a> pMenu, UINT wCmd, BOOL fByPosition, <a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a> *ppMenuItemIsOn)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a11">_GetMenuState</a> (<a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a> pMenu, UINT wId, UINT <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a12">GetPrevPwnd</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndList, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndFind)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a13">_GetWindow</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, UINT cmd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a14">_GetParent</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a15">_GetSubMenu</a> (<a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a> pMenu, int nPos)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a16">_IsChild</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwndParent, <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a17">_IsWindowVisible</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a18">_ClientToScreen</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, PPOINT ppt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a19">_GetClientRect</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, LPRECT prc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a20">_GetWindowRect</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, LPRECT prc)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a21">_ScreenToClient</a> (<a class="el" href="../../d6/d9/structtagWND.html">PWND</a> pwnd, PPOINT ppt)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d5/d6/structtagHOOK.html">PHOOK</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d9/rtl_2wow_8c.html#a22">PhkNextValid</a> (<a class="el" href="../../d5/d6/structtagHOOK.html">PHOOK</a> phk)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="rtl/wow.c::CHECK_RESTRICTED" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CHECK_RESTRICTED          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div><span class="keywordflow">if</span> (pci &amp;&amp; (pci-&gt;dwTIFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a821">TIF_RESTRICTED</a>) &amp;&amp; pobj) {             \
            <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/ntuser_8h.html#a194">NtUserValidateHandleSecure</a>(h))                             \
                pobj = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;                                                \
        }                                                                   \
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00025">25</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00150">HMValidateHandle()</a>, and <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00353">HMValidateHandleNoRip()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="rtl/wow.c::DESKTOPVALIDATE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DESKTOPVALIDATE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pci,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>pobj&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div><span class="keywordflow">if</span> (    pci-&gt;pDeskInfo &amp;&amp;                               \
                pobj &gt;= pci-&gt;pDeskInfo-&gt;pvDesktopBase &amp;&amp;        \
                pobj &lt; pci-&gt;pDeskInfo-&gt;pvDesktopLimit) {        \
            pobj = (KERNEL_PVOID)((KERNEL_ULONG_PTR)pobj - pci-&gt;ulClientDelta);         \
        } <span class="keywordflow">else</span> {                                                \
            pobj = (KERNEL_PVOID)<a class="code" href="../../d5/d0/usercall_8h.html#a2">NtUserCallOneParam</a>((ULONG_PTR)h,                       \
                    SFI__MAPDESKTOPOBJECT);                     \
        }                                                       \
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00076">76</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="rtl/wow.c::GET_CURRENT_CLIENTINFO" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GET_CURRENT_CLIENTINFO          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;pci = GetClientInfo();</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00050">50</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00150">HMValidateHandle()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00353">HMValidateHandleNoRip()</a>, and <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00242">HMValidateHandleNoSecure()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="rtl/wow.c::SHAREDVALIDATE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SHAREDVALIDATE          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pobj&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;pobj = REBASESHAREDPTRALWAYS(pobj);</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00086">86</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="rtl/wow.c::ValidateHandleMacro" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ValidateHandleMacro          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pci,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>pobj,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>h,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>bType&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div><a class="code" href="../../d7/d9/wow_8h.html#a0">StartValidateHandleMacro</a>(h) \
    <a class="code" href="../../d7/d9/wow_8h.html#a1">BeginAliveValidateHandleMacro</a>()  \
    <a class="code" href="../../d7/d9/wow_8h.html#a3">BeginTypeValidateHandleMacro</a>(pobj, bType) \
    <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a2">DESKTOPVALIDATE</a>(pci, pobj) \
    <a class="code" href="../../d7/d9/wow_8h.html#a4">EndTypeValidateHandleMacro</a> \
    <a class="code" href="../../d7/d9/wow_8h.html#a2">EndAliveValidateHandleMacro</a>()  \
    <a class="code" href="../../d7/d9/wow_8h.html#a5">EndValidateHandleMacro</a>
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00102">102</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00150">HMValidateHandle()</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00353">HMValidateHandleNoRip()</a>, and <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00242">HMValidateHandleNoSecure()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="rtl/wow.c::ValidateSharedHandleMacro" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ValidateSharedHandleMacro          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">pobj,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>h,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>bType&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div><a class="code" href="../../d7/d9/wow_8h.html#a0">StartValidateHandleMacro</a>(h)  \
    <a class="code" href="../../d7/d9/wow_8h.html#a1">BeginAliveValidateHandleMacro</a>()  \
    <a class="code" href="../../d7/d9/wow_8h.html#a3">BeginTypeValidateHandleMacro</a>(pobj, bType) \
    <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a3">SHAREDVALIDATE</a>(pobj)        \
    <a class="code" href="../../d7/d9/wow_8h.html#a4">EndTypeValidateHandleMacro</a> \
    <a class="code" href="../../d7/d9/wow_8h.html#a2">EndAliveValidateHandleMacro</a>()  \
    <a class="code" href="../../d7/d9/wow_8h.html#a5">EndValidateHandleMacro</a>
</div></pre>
<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00126">126</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00419">HMValidateSharedHandle()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a18" doxytag="rtl/wow.c::_ClientToScreen" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID _ClientToScreen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PPOINT&nbsp;</td>
          <td class="mdname" nowrap> <em>ppt</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00893">893</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00593">ClientToScreen()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d9/d4/reader_8c-source.html#l00057">ReaderMouseMove()</a>, <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00243">xxxQueryDropObject()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02582">xxxSBWndProc()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l00873">xxxTrackInitSize()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>00896 {
00897     <span class="comment">/*</span>
00898 <span class="comment">     * Client and screen coordinates are the same for the</span>
00899 <span class="comment">     * desktop window.</span>
00900 <span class="comment">     */</span>
00901     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>) {
00902 <span class="preprocessor">#ifdef USE_MIRRORING</span>
00903 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLAYOUTRTL)) {
00904             ppt-&gt;x  = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.right - ppt-&gt;x;
00905         } <span class="keywordflow">else</span>
00906 <span class="preprocessor">#endif</span>
00907 <span class="preprocessor"></span>        {
00908             ppt-&gt;x += pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left;
00909         }
00910         ppt-&gt;y += pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.top;
00911     }
00912 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="rtl/wow.c::_GetClientRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID _GetClientRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>prc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00924">924</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d4/d5/rect_8c-source.html#l00139">OffsetRect()</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00203">SYSMETRTL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02420">WFMINIMIZED</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02319">WFWIN40COMPAT</a>.
<p>
Referenced by <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00361">BNCalcRect()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01338">ButtonWndProcWorker()</a>, <a class="el" href="../../d1/d1/lboxctl3_8c-source.html#l00061">ChopText()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00526">CItemInWindow()</a>, <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00101">CItemInWindowVarOwnerDraw()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l00574">DefWindowProcWorker()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02679">ECInvalidateClient()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02452">ECSetEditClip()</a>, <a class="el" href="../../d6/d3/edecrare_8c-source.html#l00597">ECSize()</a>, <a class="el" href="../../d9/d3/editec_8c-source.html#l02904">EditWndProc()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00608">GetClientRect()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00920">ISelFromPt()</a>, <a class="el" href="../../d2/d1/lboxmult_8c-source.html#l00025">LBCalcItemRowsAndColumns()</a>, <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00198">LBCalcVarITopScrollAmt()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00179">LBGetItemRect()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00102">LBInitDC()</a>, <a class="el" href="../../d4/d1/lboxvar_8c-source.html#l00157">LBPage()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00025">LBSetCItemFullMax()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01965">MLPaint()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02280">SLPaint()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00840">StaticWndProcWorker()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00722">xxxBNDrawText()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l00310">xxxBNOwnerDraw()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01206">xxxBNPaint()</a>, <a class="el" href="../../d9/d0/btnctl_8c-source.html#l01159">xxxDrawButton()</a>, <a class="el" href="../../d5/d8/minmax_8c-source.html#l00032">xxxInitSendValidateMinMaxInfo()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00691">xxxLBoxCtlHScroll()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l00798">xxxLBPaint()</a>, <a class="el" href="../../d3/d1/lboxrare_8c-source.html#l00514">xxxLBSize()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l01106">xxxMNUpdateShownMenu()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l02012">xxxNewITopEx()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l01012">xxxPaintSwitchWindow()</a>, <a class="el" href="../../d6/d4/statctl_8c-source.html#l00419">xxxStaticPaint()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01290">xxxTrackMouse()</a>.
<p>
<pre class="fragment"><div>00927 {
00928     <span class="comment">/*</span>
00929 <span class="comment">     * If this is a 3.1 app, and it's minimized, then we need to return</span>
00930 <span class="comment">     * a rectangle other than the real-client-rect.  This is necessary since</span>
00931 <span class="comment">     * there is no client-rect-size in Win4.0.  Apps such as PackRat 1.0</span>
00932 <span class="comment">     * will GPF if returned a empty-rect.</span>
00933 <span class="comment">     */</span>
00934     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFMINIMIZED) &amp;&amp; !<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFWIN40COMPAT)) {
00935         prc-&gt;left   = 0;
00936         prc-&gt;top    = 0;
00937         prc-&gt;right  = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXMINIMIZED);
00938         prc-&gt;bottom = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYMINIMIZED);
00939 
00940     } <span class="keywordflow">else</span> {
00941 
00942         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>) {
00943             *prc = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>;
00944             <a class="code" href="../../d3/d6/rect_8c.html#a6">OffsetRect</a>(prc, -pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left, -pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.top);
00945         } <span class="keywordflow">else</span> {
00946             <span class="comment">/*</span>
00947 <span class="comment">             * For compatibility, return the rect of the primary</span>
00948 <span class="comment">             * monitor for the desktop window.</span>
00949 <span class="comment">             */</span>
00950             prc-&gt;left = prc-&gt;top = 0;
00951             prc-&gt;right = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXSCREEN);
00952             prc-&gt;bottom = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYSCREEN);
00953         }
00954     }
00955 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="rtl/wow.c::_GetMenuState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT _GetMenuState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00583">583</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02744">tagITEM::fState</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02743">tagITEM::fType</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02619">tagITEM::hbmp</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02609">tagITEM::lpstr</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00486">MNLookUpItem()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00211">REBASEPTR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02606">tagITEM::spSubMenu</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00260">GetMenuState()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00601">xxxDWP_NCMouse()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00402">xxxDWP_SetCursor()</a>, <a class="el" href="../../d5/d7/syscmd_8c-source.html#l00023">xxxHandleNCMouseGuys()</a>, and <a class="el" href="../../d2/d2/mnloop_8c-source.html#l00635">xxxMNLoop()</a>.
<p>
<pre class="fragment"><div>00587 {
00588     <a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a> pItem;
00589     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> fFlags;
00590 
00591     <span class="comment">/*</span>
00592 <span class="comment">     * If the item does not exist, leave</span>
00593 <span class="comment">     */</span>
00594     <span class="keywordflow">if</span> ((pItem = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a10">MNLookUpItem</a>(pMenu, wId, (BOOL) (dwFlags &amp; MF_BYPOSITION), NULL)) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00595         <span class="keywordflow">return</span> (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)-1;
00596 
00597     fFlags = pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o1">fState</a> | pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o0">fType</a>;
00598 
00599 <span class="preprocessor">#ifndef _USERK_</span>
00600 <span class="preprocessor"></span>    <span class="comment">/*</span>
00601 <span class="comment">     * Add old MFT_BITMAP flag to keep old apps happy</span>
00602 <span class="comment">     */</span>
00603     <span class="keywordflow">if</span> ((pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o16">hbmp</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o6">lpstr</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)) {
00604         fFlags |= MFT_BITMAP;
00605     }
00606 <span class="preprocessor">#endif</span>
00607 <span class="preprocessor"></span>
00608     <span class="keywordflow">if</span> (pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o3">spSubMenu</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00609         <span class="comment">/*</span>
00610 <span class="comment">         * If the item is a popup, return item count in high byte and</span>
00611 <span class="comment">         * popup flags in low byte</span>
00612 <span class="comment">         */</span>
00613 
00614         fFlags = ((fFlags | MF_POPUP) &amp; 0x00FF) +
00615             (((<a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a25">REBASEPTR</a>(pMenu, pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o3">spSubMenu</a>))-&gt;cItems &lt;&lt; 8);
00616     }
00617 
00618     <span class="keywordflow">return</span> fFlags;
00619 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="rtl/wow.c::_GetParent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> _GetParent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00762">762</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02561">TestwndChild</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02563">TestwndTiled</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/winable2_8c-source.html#l00460">_GetAncestor()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00319">GetParent()</a>, and <a class="el" href="../../d3/d9/kernel_2help_8c-source.html#l00073">xxxHelpLoop()</a>.
<p>
<pre class="fragment"><div>00764 {
00765     <span class="comment">/*</span>
00766 <span class="comment">     * For 1.03 compatibility reasons, we should return NULL</span>
00767 <span class="comment">     * for top level "tiled" windows and owner for other popups.</span>
00768 <span class="comment">     * pwndOwner is set to NULL in xxxCreateWindow for top level</span>
00769 <span class="comment">     * "tiled" windows.</span>
00770 <span class="comment">     */</span>
00771     <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a737">TestwndTiled</a>(pwnd))) {
00772         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwnd))
00773             pwnd = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00774         <span class="keywordflow">else</span>
00775             pwnd = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndOwner);
00776         <span class="keywordflow">return</span> pwnd;
00777     }
00778 
00779     <span class="comment">/*</span>
00780 <span class="comment">     * The window was not a child window; they may have been just testing</span>
00781 <span class="comment">     * if it was</span>
00782 <span class="comment">     */</span>
00783     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00784 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="rtl/wow.c::_GetSubMenu" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a> _GetSubMenu           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nPos</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00796">796</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">REBASEALWAYS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00211">REBASEPTR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02606">tagITEM::spSubMenu</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00350">GetSubMenu()</a>, <a class="el" href="../../d6/d4/mdimenu_8c-source.html#l00165">MDIAddSysMenu()</a>, <a class="el" href="../../d9/d3/sbctl_8c-source.html#l02444">xxxGetScrollMenu()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00189">xxxGetSysMenu()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00368">xxxGetSystemMenu()</a>, <a class="el" href="../../d3/d6/ntuser_2kernel_2menu_8c-source.html#l01251">xxxMNKeyDown()</a>, and <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00232">xxxSetSysMenu()</a>.
<p>
<pre class="fragment"><div>00799 {
00800     <a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a> pItem;
00801     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a> pPopup = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00802 
00803     <span class="comment">/*</span>
00804 <span class="comment">     * Make sure nPos refers to a valid popup</span>
00805 <span class="comment">     */</span>
00806     <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)nPos &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)((<a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a>)pMenu)-&gt;cItems) {
00807         pItem = &amp;((<a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pMenu, rgItems))[nPos];
00808         <span class="keywordflow">if</span> (pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o3">spSubMenu</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00809             pPopup = (<a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a25">REBASEPTR</a>(pMenu, pItem-&gt;<a class="code" href="../../d0/d9/structtagITEM.html#o3">spSubMenu</a>);
00810 
00811     }
00812 
00813     <span class="keywordflow">return</span> (PVOID)pPopup;
00814 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="rtl/wow.c::_GetWindow" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> _GetWindow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>cmd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00668">668</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l01014">GetAppCompatFlags()</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00631">GetPrevPwnd()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l04543">NtUserCallHwnd()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01513">PtoHq</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00211">REBASEPTR</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01746">tagWND::spwndChild</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01744">tagWND::spwndNext</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01747">tagWND::spwndOwner</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01745">tagWND::spwndParent</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02360">WEFTOPMOST</a>.
<p>
Referenced by <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00099">_GetNextQueueWindow()</a>, <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l02148">CheckOnTop()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l03970">CheckTopmost()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00305">GetWindow()</a>, <a class="el" href="../../d3/d7/swp_8c-source.html#l00821">xxxCalcValidRects()</a>, and <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l01420">xxxMDINext()</a>.
<p>
<pre class="fragment"><div>00671 {
00672     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndT;
00673     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fRebase = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00674 
00675     <span class="comment">/*</span>
00676 <span class="comment">     * If this is a desktop window, return NULL for sibling or</span>
00677 <span class="comment">     * parent information.</span>
00678 <span class="comment">     */</span>
00679     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>) {
00680         <span class="keywordflow">switch</span> (cmd) {
00681         <span class="keywordflow">case</span> GW_CHILD:
00682             <span class="keywordflow">break</span>;
00683 
00684         <span class="keywordflow">default</span>:
00685             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00686             <span class="keywordflow">break</span>;
00687         }
00688     }
00689 
00690     <span class="comment">/*</span>
00691 <span class="comment">     * Rebase the returned window at the end of the routine</span>
00692 <span class="comment">     * to avoid multiple test for pwndT == NULL.</span>
00693 <span class="comment">     */</span>
00694     pwndT = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00695     <span class="keywordflow">switch</span> (cmd) {
00696     <span class="keywordflow">case</span> GW_HWNDNEXT:
00697         pwndT = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o2">spwndNext</a>;
00698         fRebase = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00699         <span class="keywordflow">break</span>;
00700 
00701     <span class="keywordflow">case</span> GW_HWNDFIRST:
00702         <span class="keywordflow">if</span> (pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a>) {
00703             pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00704             pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndT, spwndChild);
00705             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d3/queue_8c.html#a34">GetAppCompatFlags</a>(NULL) &amp; GACF_IGNORETOPMOST) {
00706                 <span class="keywordflow">while</span> (pwndT != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00707                     <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwndT, WEFTOPMOST))
00708                         <span class="keywordflow">break</span>;
00709                     pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndT, spwndNext);
00710                 }
00711             }
00712         }
00713         <span class="keywordflow">break</span>;
00714 
00715     <span class="keywordflow">case</span> GW_HWNDLAST:
00716         pwndT = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a12">GetPrevPwnd</a>(pwnd, NULL);
00717         <span class="keywordflow">break</span>;
00718 
00719     <span class="keywordflow">case</span> GW_HWNDPREV:
00720         pwndT = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a12">GetPrevPwnd</a>(pwnd, pwnd);
00721         <span class="keywordflow">break</span>;
00722 
00723     <span class="keywordflow">case</span> GW_OWNER:
00724         pwndT = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o5">spwndOwner</a>;
00725         fRebase = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00726         <span class="keywordflow">break</span>;
00727 
00728     <span class="keywordflow">case</span> GW_CHILD:
00729         pwndT = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o4">spwndChild</a>;
00730         fRebase = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00731         <span class="keywordflow">break</span>;
00732 
00733 <span class="preprocessor">#if !defined(_USERK_)</span>
00734 <span class="preprocessor"></span>    <span class="keywordflow">case</span> GW_ENABLEDPOPUP:
00735        pwndT = (<a class="code" href="../../d6/d9/structtagWND.html">PWND</a>)<a class="code" href="../../d9/d9/kernel_2ntstubs_8c.html#a175">NtUserCallHwnd</a>(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a449">PtoHq</a>(pwnd), SFI_DWP_GETENABLEDPOPUP);
00736        fRebase = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00737        <span class="keywordflow">break</span>;
00738 <span class="preprocessor">#endif</span>
00739 <span class="preprocessor"></span>
00740     <span class="keywordflow">default</span>:
00741         RIPERR0(ERROR_INVALID_GW_COMMAND, RIP_VERBOSE, <span class="stringliteral">""</span>);
00742         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00743     }
00744 
00745     <span class="keywordflow">if</span> (pwndT != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> &amp;&amp; fRebase)
00746         pwndT = <a class="code" href="../../d6/d0/usercli_8h.html#a25">REBASEPTR</a>(pwnd, pwndT);
00747 
00748     <span class="keywordflow">return</span> pwndT;
00749 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="rtl/wow.c::_GetWindowRect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID _GetWindowRect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPRECT&nbsp;</td>
          <td class="mdname" nowrap> <em>prc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00967">967</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01838">tagWND::rcWindow</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00203">SYSMETRTL</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d9/d2/ntuser_2kernel_2access_8c-source.html#l02943">_UserSoundSentryWorker()</a>, and <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00655">GetWindowRect()</a>.
<p>
<pre class="fragment"><div>00970 {
00971 
00972     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>) {
00973         *prc = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o6">rcWindow</a>;
00974     } <span class="keywordflow">else</span> {
00975         <span class="comment">/*</span>
00976 <span class="comment">         * For compatibility, return the rect of the primary</span>
00977 <span class="comment">         * monitor for the desktop window.</span>
00978 <span class="comment">         */</span>
00979         prc-&gt;left   = 0;
00980         prc-&gt;top    = 0;
00981         prc-&gt;right  = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CXSCREEN);
00982         prc-&gt;bottom = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a19">SYSMETRTL</a>(CYSCREEN);
00983     }
00984 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="rtl/wow.c::_IsChild" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _IsChild           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndParent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00826">826</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02561">TestwndChild</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d1/d2/palette_8c-source.html#l00051">_SelectPalette()</a>, <a class="el" href="../../d9/d3/w32_2ntuser_2kernel_2random_8c-source.html#l00131">CheckPwndFilter()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d4/d8/dlgmgr_8c-source.html#l00460">DefDlgProcWorker()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00508">IsChild()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00230">IsDialogMessageA()</a>, <a class="el" href="../../d6/d8/dlgmgr2_8c-source.html#l00317">IsDialogMessageW()</a>, and <a class="el" href="../../d2/d2/mnloop_8c-source.html#l00635">xxxMNLoop()</a>.
<p>
<pre class="fragment"><div>00829 {
00830     <span class="comment">/*</span>
00831 <span class="comment">     * Don't need a test to get out of the loop because the</span>
00832 <span class="comment">     * desktop is not a child.</span>
00833 <span class="comment">     */</span>
00834     <span class="keywordflow">while</span> (pwnd != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00835         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a735">TestwndChild</a>(pwnd))
00836             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00837 
00838         pwnd = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00839         <span class="keywordflow">if</span> (pwndParent == pwnd)
00840             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00841     }
00842     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00843 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="rtl/wow.c::_IsWindowVisible" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _IsWindowVisible           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pwnd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00860">860</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02419">WFVISIBLE</a>.
<p>
Referenced by <a class="el" href="../../d9/d3/editec_8c-source.html#l02547">ECResetTextInfo()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00551">IsWindowVisible()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00919">MLChangeSelection()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01367">MLDeleteText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03457">MLEditWndProc()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03379">MLEnsureCaretVisible()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l01040">MLInsertText()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03329">MLKillFocus()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l02966">MLScroll()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l00292">MLSetCaretPosition()</a>, <a class="el" href="../../d2/d4/editml_8c-source.html#l03274">MLSetFocus()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00395">SLChangeSelection()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00507">SLDrawLine()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l00737">SLDrawText()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02520">SLEditWndProc()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l02280">SLPaint()</a>, <a class="el" href="../../d4/d4/editsl_8c-source.html#l01225">SLReplaceSel()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l00846">xxxDWPPrint()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03259">xxxLBSetCurSel()</a>, <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l03455">xxxLBSetSel()</a>, and <a class="el" href="../../d0/d1/lboxctl2_8c-source.html#l01265">xxxSetISelBase()</a>.
<p>
<pre class="fragment"><div>00862 {
00863     <span class="comment">/*</span>
00864 <span class="comment">     * Check if this is the iconic window being moved around with a mouse</span>
00865 <span class="comment">     * If so, return a TRUE, though, strictly speaking, it is hidden.</span>
00866 <span class="comment">     * This helps the Tracer guys from going crazy!</span>
00867 <span class="comment">     * Fix for Bug #57 -- SANKAR -- 08-08-89 --</span>
00868 <span class="comment">     */</span>
00869     <span class="keywordflow">if</span> (pwnd == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00870         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00871 
00872     <span class="keywordflow">for</span> (;;) {
00873         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WFVISIBLE))
00874             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00875         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>)
00876             <span class="keywordflow">break</span>;
00877         pwnd = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwnd, spwndParent);
00878     }
00879 
00880     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00881 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="rtl/wow.c::_ScreenToClient" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID _ScreenToClient           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwnd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PPOINT&nbsp;</td>
          <td class="mdname" nowrap> <em>ppt</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00995">995</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00787">FNID_DESKTOP</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00843">GETFNID</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l01839">tagWND::rcClient</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02555">TestWF</a>, and <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>.
<p>
Referenced by <a class="el" href="../../d7/d4/mdiwin_8c-source.html#l02380">ChildMinMaxInfo()</a>, <a class="el" href="../../d2/d3/combo_8c-source.html#l00207">ComboBoxWndProcWorker()</a>, <a class="el" href="../../d7/d0/lb1_8c-source.html#l00032">ListBoxWndProcWorker()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00670">ScreenToClient()</a>, <a class="el" href="../../d8/d8/icons_8c-source.html#l00031">xxxArrangeIconicWindows()</a>, <a class="el" href="../../d9/d2/movesize_8c-source.html#l01562">xxxDrawDragRect()</a>, <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00243">xxxQueryDropObject()</a>, and <a class="el" href="../../d0/d7/kernel_2winmgr_8c-source.html#l00311">xxxSetParent()</a>.
<p>
<pre class="fragment"><div>00998 {
00999     <span class="comment">/*</span>
01000 <span class="comment">     * Client and screen coordinates are the same for the</span>
01001 <span class="comment">     * desktop window.</span>
01002 <span class="comment">     */</span>
01003     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a232">GETFNID</a>(pwnd) != <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a196">FNID_DESKTOP</a>) {
01004 <span class="preprocessor">#ifdef USE_MIRRORING</span>
01005 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a731">TestWF</a>(pwnd, WEFLAYOUTRTL)) {
01006             ppt-&gt;x  = pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.right - ppt-&gt;x;
01007         } <span class="keywordflow">else</span>
01008 <span class="preprocessor">#endif</span>
01009 <span class="preprocessor"></span>        {
01010             ppt-&gt;x -= pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.left;
01011         }
01012         ppt-&gt;y -= pwnd-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o7">rcClient</a>.top;
01013     }
01014 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="rtl/wow.c::GetPrevPwnd" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d6/d9/structtagWND.html">PWND</a> GetPrevPwnd           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndList</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d9/structtagWND.html">PWND</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pwndFind</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00631">631</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00215">REBASEPWND</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01745">tagWND::spwndParent</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00668">_GetWindow()</a>.
<p>
<pre class="fragment"><div>00634 {
00635     <a class="code" href="../../d6/d9/structtagWND.html">PWND</a> pwndFound, pwndNext;
00636 
00637     <span class="keywordflow">if</span> (pwndList == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00638         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00639 
00640     <span class="keywordflow">if</span> (pwndList-&gt;<a class="code" href="../../d6/d9/structtagWND.html#o3">spwndParent</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00641         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00642 
00643     pwndNext = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndList, spwndParent);
00644     pwndNext = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndNext, spwndChild);
00645     pwndFound = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00646 
00647     <span class="keywordflow">while</span> (pwndNext != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00648         <span class="keywordflow">if</span> (pwndNext == pwndFind)
00649             <span class="keywordflow">break</span>;
00650         pwndFound = pwndNext;
00651         pwndNext = <a class="code" href="../../d6/d0/usercli_8h.html#a27">REBASEPWND</a>(pwndNext, spwndNext);
00652     }
00653 
00654     <span class="keywordflow">return</span> (pwndNext == pwndFind) ? pwndFound : <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00655 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="rtl/wow.c::HMValidateHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PVOID FASTCALL HMValidateHandle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>bType</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00150">150</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00025">CHECK_RESTRICTED</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00529">_CLIENTINFO::dwTIFlags</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00034">FASTCALL</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00050">GET_CURRENT_CLIENTINFO</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01473">HMUniqFromHandle</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02827">TIF_16BIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00913">TYPE_ACCELTABLE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00908">TYPE_CURSOR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00910">TYPE_HOOK</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00907">TYPE_MENU</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00917">TYPE_MONITOR</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00909">TYPE_SETWINDOWPOS</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00906">TYPE_WINDOW</a>, and <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00102">ValidateHandleMacro</a>.
<p>
Referenced by <a class="el" href="../../d0/d6/desktop_8c-source.html#l02798">_MapDesktopObject()</a>, <a class="el" href="../../d5/d3/kernel_2acons_8c-source.html#l00319">_SetCursorIconData()</a>, <a class="el" href="../../d8/d5/w32_2ntuser_2imm_2context_8c-source.html#l00718">DestroyInputContext()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01379">ImeIsUsableContext()</a>, <a class="el" href="../../d0/d9/imectl_8c-source.html#l01339">ImeMarkUsedContext()</a>, <a class="el" href="../../d2/d4/ntuser_2imm_2conime_8c-source.html#l00034">ImmCallImeConsoleIME()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00689">ImmLockClientImc()</a>, <a class="el" href="../../d4/d7/winmgrc_8c-source.html#l00475">IsMenu()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l03336">NtUserCreateLocalMemHandle()</a>, <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l07905">NtUserUserHandleGrantAccess()</a>, <a class="el" href="../../d3/d6/class_8c-source.html#l01329">SetClassCursor()</a>, <a class="el" href="../../d8/d2/validate_8c-source.html#l00181">ValidateHmenu()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00028">ValidateHwnd()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l02111">xxxGetDummyPalette()</a>, and <a class="el" href="../../d7/d0/dragdrop_8c-source.html#l00243">xxxQueryDropObject()</a>.
<p>
<pre class="fragment"><div>00153 {
00154     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>       dwError;
00155     KERNEL_PVOID pobj = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00156     <a class="code" href="../../d2/d2/struct__CLIENTINFO.html">PCLIENTINFO</a> pci;
00157 
00158     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a1">GET_CURRENT_CLIENTINFO</a>();
00159 
00160 <span class="preprocessor">#if DBG != 0 &amp;&amp; !defined(_USERK_)</span>
00161 <span class="preprocessor"></span>    <span class="comment">/*</span>
00162 <span class="comment">     * We don't want 32 bit apps passing 16 bit handles</span>
00163 <span class="comment">     *  we should consider failing this before we get</span>
00164 <span class="comment">     *  stuck supporting it (Some VB apps do this).</span>
00165 <span class="comment">     */</span>
00166     <span class="keywordflow">if</span> (pci &amp;&amp; (h != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00167            &amp;&amp; (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a435">HMUniqFromHandle</a>(h) == 0)
00168            &amp;&amp; !(pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o4">dwTIFlags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a796">TIF_16BIT</a>)) {
00169         RIPMSG3(RIP_WARNING, <span class="stringliteral">"HMValidateHandle: 32bit process [%d] using 16 bit handle [%#p] bType:%#lx"</span>,
00170                 HandleToUlong(NtCurrentTeb()-&gt;ClientId.UniqueProcess), h, (DWORD)bType);
00171     }
00172 <span class="preprocessor">#endif</span>
00173 <span class="preprocessor"></span>
00174     <span class="comment">/*</span>
00175 <span class="comment">     * Object can't be located in shared memory.</span>
00176 <span class="comment">     */</span>
00177     UserAssert(bType != TYPE_MONITOR);
00178 
00179     <span class="comment">/*</span>
00180 <span class="comment">     * Validation macro. Falls through if the handle is invalid.</span>
00181 <span class="comment">     */</span>
00182     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a4">ValidateHandleMacro</a>(pci, pobj, h, bType);
00183 
00184     <span class="comment">/*</span>
00185 <span class="comment">     * check for secure process</span>
00186 <span class="comment">     */</span>
00187     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a0">CHECK_RESTRICTED</a>();
00188 
00189     <span class="keywordflow">if</span> (pobj != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00190         <span class="keywordflow">return</span> pobj;
00191     }
00192 
00193     <span class="keywordflow">switch</span> (bType) {
00194 
00195     <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a237">TYPE_WINDOW</a>:
00196         dwError = ERROR_INVALID_WINDOW_HANDLE;
00197         <span class="keywordflow">break</span>;
00198 
00199     <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a238">TYPE_MENU</a>:
00200         dwError = ERROR_INVALID_MENU_HANDLE;
00201         <span class="keywordflow">break</span>;
00202 
00203     <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a239">TYPE_CURSOR</a>:
00204         dwError = ERROR_INVALID_CURSOR_HANDLE;
00205         <span class="keywordflow">break</span>;
00206 
00207     <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a244">TYPE_ACCELTABLE</a>:
00208         dwError = ERROR_INVALID_ACCEL_HANDLE;
00209         <span class="keywordflow">break</span>;
00210 
00211     <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a241">TYPE_HOOK</a>:
00212         dwError = ERROR_INVALID_HOOK_HANDLE;
00213         <span class="keywordflow">break</span>;
00214 
00215     <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a240">TYPE_SETWINDOWPOS</a>:
00216         dwError = ERROR_INVALID_DWP_HANDLE;
00217         <span class="keywordflow">break</span>;
00218 
00219     <span class="keywordflow">default</span>:
00220         dwError = ERROR_INVALID_HANDLE;
00221         <span class="keywordflow">break</span>;
00222     }
00223 
00224     RIPERR2(dwError,
00225             RIP_WARNING,
00226             <span class="stringliteral">"HMValidateHandle: Invalid:%#p Type:%#lx"</span>,
00227             h, (DWORD)bType);
00228 
00229     <span class="comment">/*</span>
00230 <span class="comment">     * If we get here, it's an error.</span>
00231 <span class="comment">     */</span>
00232     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00233 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="rtl/wow.c::HMValidateHandleNoRip" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PVOID FASTCALL HMValidateHandleNoRip           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>bType</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00353">353</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00025">CHECK_RESTRICTED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00034">FASTCALL</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00050">GET_CURRENT_CLIENTINFO</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00917">TYPE_MONITOR</a>, and <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00102">ValidateHandleMacro</a>.
<p>
Referenced by <a class="el" href="../../d2/d3/ddemlsvr_8c-source.html#l00110">_CsDdeUninitialize()</a>, <a class="el" href="../../d2/d3/ddemlsvr_8c-source.html#l00088">_CsUpdateInstance()</a>, <a class="el" href="../../d9/d8/client_2ntstubs_8c-source.html#l00612">_SetWindowLongPtr()</a>, <a class="el" href="../../d1/d8/clmsg_8c-source.html#l01399">CallWindowProcAorW()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01067">DestroyWindowSmIcon()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00674">DrawIconCallBack()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01022">DWP_GetIcon()</a>, <a class="el" href="../../d7/d2/queue_8c-source.html#l03336">FindQMsg()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00335">MungeClipData()</a>, <a class="el" href="../../d0/d6/register_8c-source.html#l00090">ProcessRegistrationMessage()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l00701">UT_FreeCBFormat()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00047">ValidateHwndNoRip()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01223">xxxCreateWindowSmIcon()</a>, <a class="el" href="../../d6/d3/kernel_2ddetrack_8c-source.html#l00618">xxxDDETrackGetMessageHook()</a>, <a class="el" href="../../d9/d2/dwp_8c-source.html#l01109">xxxDWP_SetIcon()</a>, <a class="el" href="../../d2/d7/w32_2ntuser_2kernel_2event_8c-source.html#l00224">xxxEventWndProc()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l01658">xxxGetDummyBitmap()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l01784">xxxGetDummyDib()</a>, <a class="el" href="../../d9/d7/ntuser_2kernel_2clipbrd_8c-source.html#l01907">xxxGetDummyDibV5()</a>, <a class="el" href="../../d2/d2/tmswitch_8c-source.html#l00808">xxxPaintIconsInSwitchWindow()</a>, <a class="el" href="../../d7/d1/mndraw_8c-source.html#l00954">xxxRealDrawMenuItem()</a>, <a class="el" href="../../d3/d6/class_8c-source.html#l00101">xxxRegisterClassEx()</a>, <a class="el" href="../../d3/d6/class_8c-source.html#l01399">xxxSetClassData()</a>, <a class="el" href="../../d1/d4/ntuser_2kernel_2getset_8c-source.html#l00568">xxxSetWindowData()</a>, and <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l00849">xxxWrapCallWindowProc()</a>.
<p>
<pre class="fragment"><div>00356 {
00357     KERNEL_PVOID pobj = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00358     <a class="code" href="../../d2/d2/struct__CLIENTINFO.html">PCLIENTINFO</a> pci;
00359 
00360     <span class="comment">/*</span>
00361 <span class="comment">     * This is the fastest way way to do validation, because</span>
00362 <span class="comment">     *  unlike HMValidateHandle, this function doesn't set the</span>
00363 <span class="comment">     *  last error.</span>
00364 <span class="comment">     *</span>
00365 <span class="comment">     * Validation macro. Falls through if the handle is invalid.</span>
00366 <span class="comment">     */</span>
00367 
00368     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a1">GET_CURRENT_CLIENTINFO</a>();
00369 
00370     <span class="comment">/*</span>
00371 <span class="comment">     * Object can't be located in shared memory.</span>
00372 <span class="comment">     */</span>
00373     UserAssert(bType != TYPE_MONITOR);
00374 
00375     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a4">ValidateHandleMacro</a>(pci, pobj, h, bType);
00376 
00377     <span class="comment">/*</span>
00378 <span class="comment">     * check for secure process</span>
00379 <span class="comment">     */</span>
00380     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a0">CHECK_RESTRICTED</a>();
00381 
00382     <span class="keywordflow">return</span> pobj;
00383 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="rtl/wow.c::HMValidateHandleNoSecure" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PVOID FASTCALL HMValidateHandleNoSecure           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>bType</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00242">242</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00529">_CLIENTINFO::dwTIFlags</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00034">FASTCALL</a>, <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00050">GET_CURRENT_CLIENTINFO</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01473">HMUniqFromHandle</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02827">TIF_16BIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00917">TYPE_MONITOR</a>, and <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00102">ValidateHandleMacro</a>.
<p>
Referenced by <a class="el" href="../../d3/d6/class_8c-source.html#l00211">ValidateAndLockCursor()</a>, and <a class="el" href="../../d2/d4/caption_8c-source.html#l00306">xxxGetWindowSmIcon()</a>.
<p>
<pre class="fragment"><div>00245 {
00246     KERNEL_PVOID pobj = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00247     <a class="code" href="../../d2/d2/struct__CLIENTINFO.html">PCLIENTINFO</a> pci;
00248 
00249     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a1">GET_CURRENT_CLIENTINFO</a>();
00250 
00251 <span class="preprocessor">#if !defined(_USERK_)</span>
00252 <span class="preprocessor"></span>    <span class="comment">/*</span>
00253 <span class="comment">     * We don't want 32 bit apps passing 16 bit handles</span>
00254 <span class="comment">     *  we should consider failing this before we get</span>
00255 <span class="comment">     *  stuck supporting it (Some VB apps do this).</span>
00256 <span class="comment">     */</span>
00257     <span class="keywordflow">if</span> (pci &amp;&amp; (h != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00258            &amp;&amp; (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a435">HMUniqFromHandle</a>(h) == 0)
00259            &amp;&amp; !(pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o4">dwTIFlags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a796">TIF_16BIT</a>)) {
00260         RIPMSG3(RIP_WARNING, <span class="stringliteral">"HMValidateHandle: 32bit process [%d] using 16 bit handle [%#p] bType:%#lx"</span>,
00261                 HandleToUlong(NtCurrentTeb()-&gt;ClientId.UniqueProcess), h, (DWORD)bType);
00262     }
00263 <span class="preprocessor">#endif</span>
00264 <span class="preprocessor"></span>
00265     <span class="comment">/*</span>
00266 <span class="comment">     * Object can't be located in shared memory.</span>
00267 <span class="comment">     */</span>
00268     UserAssert(bType != TYPE_MONITOR);
00269 
00270     <span class="comment">/*</span>
00271 <span class="comment">     * Validation macro.</span>
00272 <span class="comment">     */</span>
00273     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a4">ValidateHandleMacro</a>(pci, pobj, h, bType);
00274 
00275     <span class="keywordflow">return</span> pobj;
00276 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="rtl/wow.c::HMValidateSharedHandle" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PVOID FASTCALL HMValidateSharedHandle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HANDLE&nbsp;</td>
          <td class="mdname" nowrap> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>bType</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00419">419</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l01473">HMUniqFromHandle</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02827">TIF_16BIT</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00917">TYPE_MONITOR</a>, and <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00126">ValidateSharedHandleMacro</a>.
<p>
Referenced by <a class="el" href="../../d8/d2/validate_8c-source.html#l00210">ValidateHmonitor()</a>.
<p>
<pre class="fragment"><div>00422 {
00423     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwError;
00424     KERNEL_PVOID pobj = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00425 
00426 <span class="preprocessor">#if DBG != 0 &amp;&amp; !defined(_USERK_)</span>
00427 <span class="preprocessor"></span>
00428     <span class="comment">/*</span>
00429 <span class="comment">     * We don't want 32 bit apps passing 16 bit handles</span>
00430 <span class="comment">     *  we should consider failing this before we get</span>
00431 <span class="comment">     *  stuck supporting it (Some VB apps do this).</span>
00432 <span class="comment">     */</span>
00433     <span class="keywordflow">if</span> ((h != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00434            &amp;&amp; (<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a435">HMUniqFromHandle</a>(h) == 0)
00435            &amp;&amp; !(<a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>()-&gt;dwTIFlags &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a796">TIF_16BIT</a>)) {
00436         RIPMSG3(RIP_WARNING, <span class="stringliteral">"HMValidateHandle: 32bit process [%d] using 16 bit handle [%#p] bType:%#lx"</span>,
00437                 HandleToUlong(NtCurrentTeb()-&gt;ClientId.UniqueProcess), h, (DWORD)bType);
00438     }
00439 <span class="preprocessor">#endif</span>
00440 <span class="preprocessor"></span>
00441     <span class="comment">/*</span>
00442 <span class="comment">     * Validation macro. Falls through if the handle is invalid.</span>
00443 <span class="comment">     */</span>
00444     <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a5">ValidateSharedHandleMacro</a>(pobj, h, bType);
00445 
00446     <span class="keywordflow">if</span> (pobj != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00447         <span class="keywordflow">return</span> pobj;
00448 
00449     <span class="keywordflow">switch</span> (bType) {
00450         <span class="keywordflow">case</span> <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a248">TYPE_MONITOR</a>:
00451             dwError = ERROR_INVALID_MONITOR_HANDLE;
00452             <span class="keywordflow">break</span>;
00453 
00454         <span class="keywordflow">default</span>:
00455             UserAssertMsg0(0, <span class="stringliteral">"Logic error in HMValidateSharedHandle"</span>);
00456             <span class="keywordflow">break</span>;
00457     }
00458 
00459     RIPERR2(dwError,
00460             RIP_WARNING,
00461             <span class="stringliteral">"HMValidateSharedHandle: Invalid:%#p Type:%#lx"</span>,
00462             h, (DWORD)bType);
00463 
00464     <span class="comment">/*</span>
00465 <span class="comment">     * If we get here, it's an error.</span>
00466 <span class="comment">     */</span>
00467     <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00468 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="rtl/wow.c::MNLookUpItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d9/structtagITEM.html">PITEM</a> MNLookUpItem           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pMenu</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>wCmd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>BOOL&nbsp;</td>
          <td class="mdname" nowrap> <em>fByPosition</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d1/structtagMENU.html">PMENU</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ppMenuItemIsOn</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00486">486</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02791">tagMENU::cItems</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02763">MFMWFP_NOITEM</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">REBASEALWAYS</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00211">REBASEPTR</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l00583">_GetMenuState()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00567">_SetMenuDefaultItem()</a>, <a class="el" href="../../d8/d6/menuc_8c-source.html#l00015">CheckMenuItem()</a>, <a class="el" href="../../d8/d6/menuc_8c-source.html#l00354">CheckMenuRadioItem()</a>, <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00685">EnableMenuItem()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00455">MenuItemState()</a>, <a class="el" href="../../d2/d1/mnaccel_8c-source.html#l00086">UT_FindTopLevelMenuIndex()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00323">xxxInsertMenuItem()</a>, <a class="el" href="../../d6/d6/ntuser_2rtl_2menu_8c-source.html#l00078">xxxMNCanClose()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00644">xxxRemoveDeleteMenuHelper()</a>, <a class="el" href="../../d4/d1/mnchange_8c-source.html#l00146">xxxSetMenuItemInfo()</a>, <a class="el" href="../../d6/d2/mnsys_8c-source.html#l00232">xxxSetSysMenu()</a>, and <a class="el" href="../../d2/d1/mnaccel_8c-source.html#l00145">xxxTA_AccelerateMenu()</a>.
<p>
<pre class="fragment"><div>00491 {
00492     <a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a> pItem;
00493     <a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a> pItemRet = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00494     <a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a>  pItemMaybe;
00495     <a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a>   pMenuMaybe = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00496     <span class="keywordtype">int</span> i;
00497 
00498     <span class="keywordflow">if</span> (ppMenuItemIsOn != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00499         *ppMenuItemIsOn = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00500 
00501     <span class="keywordflow">if</span> (pMenu == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a> || !pMenu-&gt;<a class="code" href="../../d1/d1/structtagMENU.html#o4">cItems</a> || wCmd == <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a778">MFMWFP_NOITEM</a>) {
00502 <span class="comment">//      RIPERR0(ERROR_INVALID_PARAMETER, RIP_WARNING, "MNLookUpItem: invalid item");</span>
00503         <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00504     }
00505 
00506     <span class="comment">/*</span>
00507 <span class="comment">     * dwFlags determines how we do the search</span>
00508 <span class="comment">     */</span>
00509     <span class="keywordflow">if</span> (fByPosition) {
00510         <span class="keywordflow">if</span> (wCmd &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>)pMenu-&gt;<a class="code" href="../../d1/d1/structtagMENU.html#o4">cItems</a>) {
00511             pItemRet = &amp;((<a class="code" href="../../d0/d9/structtagITEM.html">PITEM</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pMenu, rgItems))[wCmd];
00512             <span class="keywordflow">if</span> (ppMenuItemIsOn != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00513                 *ppMenuItemIsOn = pMenu;
00514             <span class="keywordflow">return</span> (pItemRet);
00515         } <span class="keywordflow">else</span>
00516             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00517     }
00518     <span class="comment">/*</span>
00519 <span class="comment">     * Walk down the menu and try to find an item with an ID of wCmd.</span>
00520 <span class="comment">     * The search procedes from the end of the menu (as was done in</span>
00521 <span class="comment">     * assembler).</span>
00522 <span class="comment">     */</span>
00523 
00524 <span class="comment">/* this is the Chicago code, which walks from the front of the menu -- Fritz */</span>
00525 
00526 
00527 <span class="comment">//        for (pItem = &amp;pMenu-&gt;rgItems[i - 1]; pItemRet == NULL &amp;&amp; i--; --pItem) {</span>
00528     <span class="keywordflow">for</span> (i = 0, pItem = <a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(pMenu, rgItems); i &lt; (<span class="keywordtype">int</span>)pMenu-&gt;<a class="code" href="../../d1/d1/structtagMENU.html#o4">cItems</a>;
00529             i++, pItem++) {
00530 
00531         <span class="comment">/*</span>
00532 <span class="comment">         * If the item is a popup, recurse down the tree</span>
00533 <span class="comment">         */</span>
00534         <span class="keywordflow">if</span> (pItem-&gt;spSubMenu != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00535         <span class="comment">//</span>
00536         <span class="comment">// COMPAT:</span>
00537         <span class="comment">// Allow apps to pass in menu handle as ID in menu APIs.  We</span>
00538         <span class="comment">// remember that this popup had a menu handle with the same ID</span>
00539         <span class="comment">// value.  This is a 2nd choice though.  We still want to see</span>
00540         <span class="comment">// if there's some actual command that has this ID value first.</span>
00541         <span class="comment">//</span>
00542             <span class="keywordflow">if</span> (pItem-&gt;wID == wCmd) {
00543                 pMenuMaybe = pMenu;
00544                 pItemMaybe = pItem;
00545             }
00546 
00547             pItemRet = <a class="code" href="../../d6/d9/rtl_2wow_8c.html#a10">MNLookUpItem</a>((<a class="code" href="../../d1/d1/structtagMENU.html">PMENU</a>)<a class="code" href="../../d6/d0/usercli_8h.html#a25">REBASEPTR</a>(pMenu, pItem-&gt;spSubMenu),
00548                     wCmd, FALSE, ppMenuItemIsOn);
00549             <span class="keywordflow">if</span> (pItemRet != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00550                 <span class="keywordflow">return</span> pItemRet;
00551         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pItem-&gt;wID == wCmd) {
00552 
00553                 <span class="comment">/*</span>
00554 <span class="comment">                 * Found the item, now save things for later</span>
00555 <span class="comment">                 */</span>
00556                 <span class="keywordflow">if</span> (ppMenuItemIsOn != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00557                     *ppMenuItemIsOn = pMenu;
00558                 <span class="keywordflow">return</span> pItem;
00559         }
00560     }
00561 
00562     <span class="keywordflow">if</span> (pMenuMaybe) {
00563         <span class="comment">// no non popup menu match found -- use the 2nd choice popup menu</span>
00564         <span class="comment">// match</span>
00565         <span class="keywordflow">if</span> (ppMenuItemIsOn != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00566             *ppMenuItemIsOn = pMenuMaybe;
00567         <span class="keywordflow">return</span>(pItemMaybe);
00568     }
00569 
00570     <span class="keywordflow">return</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>);
00571 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="rtl/wow.c::PhkNextValid" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d5/d6/structtagHOOK.html">PHOOK</a> PhkNextValid           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d6/structtagHOOK.html">PHOOK</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>phk</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html#l01031">1031</a> of file <a class="el" href="../../d7/d8/rtl_2wow_8c-source.html">rtl/wow.c</a>.
<p>
References <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02158">tagDESKTOPINFO::aphkStart</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l01835">CheckCritInShared</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l06024">DbgValidateHooks</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02079">tagHOOK::flags</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00192">GetClientInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02014">HF_DESTROYED</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02007">HF_GLOBAL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l02077">tagHOOK::iHook</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l00530">_CLIENTINFO::pDeskInfo</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00058">PtiCurrent</a>, <a class="el" href="../../d7/d9/usercli_8h-source.html#l00210">REBASEALWAYS</a>, and <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l00514">_CLIENTINFO::ulClientDelta</a>.
<p>
Referenced by <a class="el" href="../../d4/d8/client_2wow_8c-source.html#l00724">CallNextHookEx()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l02151">PhkFirstGlobalValid()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l02183">PhkFirstValid()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l01288">xxxCallHook2()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l00961">xxxCallNextHookEx()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l00404">zzzCancelJournalling()</a>, <a class="el" href="../../d2/d1/hooks_8c-source.html#l01068">zzzUnhookWindowsHook()</a>, and <a class="el" href="../../d2/d1/hooks_8c-source.html#l01126">zzzUnhookWindowsHookEx()</a>.
<p>
<pre class="fragment"><div>01032 {
01033 
01034 <span class="preprocessor">#if DBG</span>
01035 <span class="preprocessor"></span>    <span class="keywordtype">int</span> iHook = phk-&gt;<a class="code" href="../../d5/d6/structtagHOOK.html#o2">iHook</a>;
01036 <span class="preprocessor">#ifdef _USERK_</span>
01037 <span class="preprocessor"></span>    <a class="code" href="../../d4/d1/userk_8h.html#a156">CheckCritInShared</a>();
01038 <span class="preprocessor">#endif</span>
01039 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
01040 <span class="preprocessor"></span>
01041     <span class="keywordflow">do</span> {
01042         <span class="comment">/*</span>
01043 <span class="comment">         * If this hook is marked as destroyed, it must be either</span>
01044 <span class="comment">         *  locked or we should be in the process of destroying it</span>
01045 <span class="comment">         */</span>
01046         UserAssert(!(phk-&gt;<a class="code" href="../../d5/d6/structtagHOOK.html#o4">flags</a> &amp; HF_DESTROYED)
01047                     || (((<a class="code" href="../../d4/d5/struct__HEAD.html">PHEAD</a>)phk)-&gt;cLockObj != 0)
01048                     || (phk-&gt;flags &amp; HF_INCHECKWHF));
01049         <span class="comment">/*</span>
01050 <span class="comment">         * Get the next hook</span>
01051 <span class="comment">         */</span>
01052         <span class="keywordflow">if</span> (phk-&gt;<a class="code" href="../../d5/d6/structtagHOOK.html#o1">phkNext</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01053             phk = <a class="code" href="../../d6/d0/usercli_8h.html#a24">REBASEALWAYS</a>(phk, phkNext);
01054         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(phk-&gt;<a class="code" href="../../d5/d6/structtagHOOK.html#o4">flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a502">HF_GLOBAL</a>)) {
01055 <span class="preprocessor">#ifdef _USERK_</span>
01056 <span class="preprocessor"></span>            phk = <a class="code" href="../../d4/d1/userk_8h.html#a9">PtiCurrent</a>()-&gt;pDeskInfo-&gt;aphkStart[phk-&gt;<a class="code" href="../../d5/d6/structtagHOOK.html#o2">iHook</a> + 1];
01057 <span class="preprocessor">#else</span>
01058 <span class="preprocessor"></span>            <a class="code" href="../../d2/d2/struct__CLIENTINFO.html">PCLIENTINFO</a> pci = <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a16">GetClientInfo</a>();
01059             phk = pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o5">pDeskInfo</a>-&gt;<a class="code" href="../../d1/d3/structtagDESKTOPINFO.html#o4">aphkStart</a>[phk-&gt;<a class="code" href="../../d5/d6/structtagHOOK.html#o2">iHook</a> + 1];
01060             <span class="comment">/*</span>
01061 <span class="comment">             * If it found a pointer, rebase it.</span>
01062 <span class="comment">             */</span>
01063             <span class="keywordflow">if</span> (phk != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
01064                 (KPBYTE)phk -= pci-&gt;<a class="code" href="../../d2/d2/struct__CLIENTINFO.html#o6">ulClientDelta</a>;
01065             }
01066 <span class="preprocessor">#endif</span>
01067 <span class="preprocessor"></span>            UserAssert((phk == NULL) || (phk-&gt;<a class="code" href="../../d5/d6/structtagHOOK.html#o4">flags</a> &amp; HF_GLOBAL));
01068         } <span class="keywordflow">else</span> {
01069             <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
01070         }
01071         <span class="comment">/*</span>
01072 <span class="comment">         * If destroyed, keep looking.</span>
01073 <span class="comment">         */</span>
01074     } <span class="keywordflow">while</span> ((phk != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) &amp;&amp; (phk-&gt;<a class="code" href="../../d5/d6/structtagHOOK.html#o4">flags</a> &amp; <a class="code" href="../../d0/d0/client_2nt6_2user_8h.html#a509">HF_DESTROYED</a>));
01075 
01076 <span class="preprocessor">#ifdef _USERK_</span>
01077 <span class="preprocessor"></span>    <a class="code" href="../../d4/d1/userk_8h.html#a601">DbgValidateHooks</a>(phk, iHook);
01078 <span class="preprocessor">#endif</span>
01079 <span class="preprocessor"></span>
01080     <span class="keywordflow">return</span> phk;
01081 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:46:09 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

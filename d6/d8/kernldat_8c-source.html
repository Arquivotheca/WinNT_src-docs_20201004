<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: kernldat.c Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>kernldat.c</h1><a href="../../d5/d9/kernldat_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*++</span>
00002 <span class="comment"></span>
00003 <span class="comment">Copyright (c) 1989  Microsoft Corporation</span>
00004 <span class="comment"></span>
00005 <span class="comment">Module Name:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    kernldat.c</span>
00008 <span class="comment"></span>
00009 <span class="comment">Abstract:</span>
00010 <span class="comment"></span>
00011 <span class="comment">    This module contains the declaration and allocation of kernel data</span>
00012 <span class="comment">    structures.</span>
00013 <span class="comment"></span>
00014 <span class="comment">Author:</span>
00015 <span class="comment"></span>
00016 <span class="comment">    David N. Cutler (davec) 12-Mar-1989</span>
00017 <span class="comment"></span>
00018 <span class="comment">Revision History:</span>
00019 <span class="comment"></span>
00020 <span class="comment">--*/</span>
00021 <span class="preprocessor">#include "<a class="code" href="../../d0/d0/ki_8h.html">ki.h</a>"</span>
00022 
00023 <span class="comment">//</span>
00024 <span class="comment">// The following data is read/write data that is grouped together for</span>
00025 <span class="comment">// performance. The layout of this data is important and must not be</span>
00026 <span class="comment">// changed.</span>
00027 <span class="comment">//</span>
00028 <span class="comment">// KiDispatcherReadyListHead - This is an array of type list entry. The</span>
00029 <span class="comment">//      elements of the array are indexed by priority. Each element is a list</span>
00030 <span class="comment">//      head for a set of threads that are in a ready state for the respective</span>
00031 <span class="comment">//      priority. This array is used by the find next thread code to speed up</span>
00032 <span class="comment">//      search for a ready thread when a thread becomes unrunnable. See also</span>
00033 <span class="comment">//      KiReadySummary.</span>
00034 <span class="comment">//</span>
00035 
<a name="l00036"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a0">00036</a> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a0">KiDispatcherReadyListHead</a>[MAXIMUM_PRIORITY];
00037 
00038 <span class="comment">//</span>
00039 <span class="comment">// KiIdleSummary - This is the set of processors that are idle. It is used by</span>
00040 <span class="comment">//      the ready thread code to speed up the search for a thread to preempt</span>
00041 <span class="comment">//      when a thread becomes runnable.</span>
00042 <span class="comment">//</span>
00043 
<a name="l00044"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a1">00044</a> KAFFINITY <a class="code" href="../../d5/d9/kernldat_8c.html#a1">KiIdleSummary</a> = 0;
00045 
00046 <span class="comment">//</span>
00047 <span class="comment">// KiReadySummary - This is the set of dispatcher ready queues that are not</span>
00048 <span class="comment">//      empty. A member is set in this set for each priority that has one or</span>
00049 <span class="comment">//      more entries in its respective dispatcher ready queues.</span>
00050 <span class="comment">//</span>
00051 
<a name="l00052"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a2">00052</a> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a2">KiReadySummary</a> = 0;
00053 
00054 <span class="comment">//</span>
00055 <span class="comment">// KiTimerTableListHead - This is a array of list heads that anchor the</span>
00056 <span class="comment">//      individual timer lists.</span>
00057 <span class="comment">//</span>
00058 
<a name="l00059"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a3">00059</a> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a3">KiTimerTableListHead</a>[<a class="code" href="../../d4/d9/ke_8h.html#a10">TIMER_TABLE_SIZE</a>];
00060 
00061 <span class="comment">//</span>
00062 <span class="comment">// KiSwapContextNotifyRoutine - This is the address of a callout routine</span>
00063 <span class="comment">//      which is called at each context switch if the address is not NULL.</span>
00064 <span class="comment">//</span>
00065 
<a name="l00066"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a4">00066</a> <a class="code" href="../../d4/d9/ke_8h.html#a120">PSWAP_CONTEXT_NOTIFY_ROUTINE</a> <a class="code" href="../../d5/d9/kernldat_8c.html#a4">KiSwapContextNotifyRoutine</a>;
00067 
00068 <span class="comment">//</span>
00069 <span class="comment">// KiThreadSelectNotifyRoutine - This is the address of a callout routine</span>
00070 <span class="comment">//      which is called when a thread is being selected for execution if</span>
00071 <span class="comment">//      the address is not NULL.</span>
00072 <span class="comment">//</span>
00073 
<a name="l00074"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a5">00074</a> <a class="code" href="../../d4/d9/ke_8h.html#a121">PTHREAD_SELECT_NOTIFY_ROUTINE</a> <a class="code" href="../../d5/d9/kernldat_8c.html#a5">KiThreadSelectNotifyRoutine</a>;
00075 
00076 <span class="comment">//</span>
00077 <span class="comment">// KiTimeUpdateNotifyRoutine - This is the address of a callout routine</span>
00078 <span class="comment">//      which is called when the runtime for a thread is updated if the</span>
00079 <span class="comment">//      address is not NULL.</span>
00080 <span class="comment">//</span>
00081 
<a name="l00082"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a6">00082</a> <a class="code" href="../../d4/d9/ke_8h.html#a122">PTIME_UPDATE_NOTIFY_ROUTINE</a> <a class="code" href="../../d5/d9/kernldat_8c.html#a6">KiTimeUpdateNotifyRoutine</a>;
00083 
00084 <span class="comment">//</span>
00085 <span class="comment">// Public kernel data declaration and allocation.</span>
00086 <span class="comment">//</span>
00087 <span class="comment">// KeActiveProcessors - This is the set of processors that active in the</span>
00088 <span class="comment">//      system.</span>
00089 <span class="comment">//</span>
00090 
<a name="l00091"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a7">00091</a> KAFFINITY <a class="code" href="../../d4/d9/ke_8h.html#a123">KeActiveProcessors</a> = 0;
00092 
00093 <span class="comment">//</span>
00094 <span class="comment">// KeBootTime - This is the absolute time when the system was booted.</span>
00095 <span class="comment">//</span>
00096 
<a name="l00097"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a8">00097</a> LARGE_INTEGER <a class="code" href="../../d4/d9/ke_8h.html#a124">KeBootTime</a>;
00098 
00099 <span class="comment">//</span>
00100 <span class="comment">// KeBootTimeBias - The time for which KeBootTime has ever been biased</span>
00101 <span class="comment">//</span>
00102 
<a name="l00103"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a9">00103</a> ULONGLONG <a class="code" href="../../d4/d9/ke_8h.html#a125">KeBootTimeBias</a>;
00104 
00105 <span class="comment">//</span>
00106 <span class="comment">// KeInterruptTimeBias - The time for which InterrupTime has ever been biased</span>
00107 <span class="comment">//</span>
00108 
<a name="l00109"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a10">00109</a> ULONGLONG <a class="code" href="../../d4/d9/ke_8h.html#a126">KeInterruptTimeBias</a>;
00110 
00111 <span class="comment">//</span>
00112 <span class="comment">// KeBugCheckCallbackListHead - This is the list head for registered</span>
00113 <span class="comment">//      bug check callback routines.</span>
00114 <span class="comment">//</span>
00115 
<a name="l00116"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a11">00116</a> LIST_ENTRY <a class="code" href="../../d4/d9/ke_8h.html#a127">KeBugCheckCallbackListHead</a>;
00117 
00118 <span class="comment">//</span>
00119 <span class="comment">// KeBugCheckCallbackLock - This is the spin lock that guards the bug</span>
00120 <span class="comment">//      check callback list.</span>
00121 <span class="comment">//</span>
00122 
<a name="l00123"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a12">00123</a> KSPIN_LOCK <a class="code" href="../../d4/d9/ke_8h.html#a128">KeBugCheckCallbackLock</a>;
00124 
00125 <span class="comment">//</span>
00126 <span class="comment">// KeDcacheFlushCount - This is the number of data cache flushes that have</span>
00127 <span class="comment">//      been performed since the system was booted.</span>
00128 <span class="comment">//</span>
00129 
<a name="l00130"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a13">00130</a> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a13">KeDcacheFlushCount</a> = 0;
00131 
00132 <span class="comment">//</span>
00133 <span class="comment">// KeIcacheFlushCount - This is the number of instruction cache flushes that</span>
00134 <span class="comment">//      have been performed since the system was booted.</span>
00135 <span class="comment">//</span>
00136 
<a name="l00137"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a14">00137</a> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a14">KeIcacheFlushCount</a> = 0;
00138 
00139 <span class="comment">//</span>
00140 <span class="comment">// KeGdiFlushUserBatch - This is the address of the GDI user batch flush</span>
00141 <span class="comment">//      routine which is initialized when the win32k subsystem is loaded.</span>
00142 <span class="comment">//</span>
00143 
<a name="l00144"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a15">00144</a> <a class="code" href="../../d4/d9/ke_8h.html#a117">PGDI_BATCHFLUSH_ROUTINE</a> <a class="code" href="../../d4/d9/ke_8h.html#a129">KeGdiFlushUserBatch</a>;
00145 
00146 <span class="comment">//</span>
00147 <span class="comment">// KeLoaderBlock - This is a pointer to the loader parameter block which is</span>
00148 <span class="comment">//      constructed by the OS Loader.</span>
00149 <span class="comment">//</span>
00150 
<a name="l00151"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a16">00151</a> <a class="code" href="../../d1/d2/struct__LOADER__PARAMETER__BLOCK.html">PLOADER_PARAMETER_BLOCK</a> <a class="code" href="../../d4/d9/ke_8h.html#a130">KeLoaderBlock</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00152 
00153 <span class="comment">//</span>
00154 <span class="comment">// KeMinimumIncrement - This is the minimum time between clock interrupts</span>
00155 <span class="comment">//      in 100ns units that is supported by the host HAL.</span>
00156 <span class="comment">//</span>
00157 
<a name="l00158"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a17">00158</a> ULONG <a class="code" href="../../d4/d9/ke_8h.html#a132">KeMinimumIncrement</a>;
00159 
00160 <span class="comment">//</span>
00161 <span class="comment">// KeNumberProcessors - This is the number of processors in the configuration.</span>
00162 <span class="comment">//      If is used by the ready thread and spin lock code to determine if a</span>
00163 <span class="comment">//      faster algorithm can be used for the case of a single processor system.</span>
00164 <span class="comment">//      The value of this variable is set when processors are initialized.</span>
00165 <span class="comment">//</span>
00166 
<a name="l00167"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a18">00167</a> CCHAR <a class="code" href="../../d4/d9/ke_8h.html#a133">KeNumberProcessors</a> = 0;
00168 
00169 <span class="comment">//</span>
00170 <span class="comment">// KeRegisteredProcessors - This is the maxumum number of processors</span>
00171 <span class="comment">//      which should utilized by the system.</span>
00172 <span class="comment">//</span>
00173 
00174 <span class="preprocessor">#if !defined(NT_UP)</span>
00175 <span class="preprocessor"></span>
00176 <span class="preprocessor">#if DBG</span>
00177 <span class="preprocessor"></span>
00178 ULONG <a class="code" href="../../d4/d9/ke_8h.html#a142">KeRegisteredProcessors</a> = 4;
00179 ULONG <a class="code" href="../../d4/d9/ke_8h.html#a143">KeLicensedProcessors</a>;
00180 
00181 <span class="preprocessor">#else</span>
00182 <span class="preprocessor"></span>
<a name="l00183"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a19">00183</a> ULONG <a class="code" href="../../d4/d9/ke_8h.html#a142">KeRegisteredProcessors</a> = 2;
<a name="l00184"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a20">00184</a> ULONG <a class="code" href="../../d4/d9/ke_8h.html#a143">KeLicensedProcessors</a>;
00185 
00186 <span class="preprocessor">#endif</span>
00187 <span class="preprocessor"></span>
00188 <span class="preprocessor">#endif</span>
00189 <span class="preprocessor"></span>
00190 <span class="comment">//</span>
00191 <span class="comment">// KeProcessorArchitecture - Architecture of all processors present in system.</span>
00192 <span class="comment">//      See PROCESSOR_ARCHITECTURE_ defines in ntexapi.h</span>
00193 <span class="comment">//</span>
00194 
<a name="l00195"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a21">00195</a> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d4/d9/ke_8h.html#a134">KeProcessorArchitecture</a> = PROCESSOR_ARCHITECTURE_UNKNOWN;
00196 
00197 <span class="comment">//</span>
00198 <span class="comment">// KeProcessorLevel - Architectural specific processor level of all processors</span>
00199 <span class="comment">//      present in system.</span>
00200 <span class="comment">//</span>
00201 
<a name="l00202"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a22">00202</a> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d4/d9/ke_8h.html#a135">KeProcessorLevel</a> = 0;
00203 
00204 <span class="comment">//</span>
00205 <span class="comment">// KeProcessorRevision - Architectural specific processor revision number that is</span>
00206 <span class="comment">//      the least common denominator of all processors present in system.</span>
00207 <span class="comment">//</span>
00208 
<a name="l00209"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a23">00209</a> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> <a class="code" href="../../d4/d9/ke_8h.html#a136">KeProcessorRevision</a> = 0;
00210 
00211 <span class="comment">//</span>
00212 <span class="comment">// KeFeatureBits - Architectural specific processor features present</span>
00213 <span class="comment">// on all processors.</span>
00214 <span class="comment">//</span>
00215 
<a name="l00216"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a24">00216</a> ULONG <a class="code" href="../../d4/d9/ke_8h.html#a137">KeFeatureBits</a> = 0;
00217 
00218 <span class="comment">//</span>
00219 <span class="comment">// KeServiceDescriptorTable - This is a table of descriptors for system</span>
00220 <span class="comment">//      service providers. Each entry in the table describes the base</span>
00221 <span class="comment">//      address of the dispatch table and the number of services provided.</span>
00222 <span class="comment">//</span>
00223 
<a name="l00224"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a25">00224</a> <a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html">KSERVICE_TABLE_DESCRIPTOR</a> <a class="code" href="../../d4/d9/ke_8h.html#a145">KeServiceDescriptorTable</a>[<a class="code" href="../../d4/d9/ke_8h.html#a13">NUMBER_SERVICE_TABLES</a>];
<a name="l00225"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a26">00225</a> <a class="code" href="../../d9/d7/struct__KSERVICE__TABLE__DESCRIPTOR.html">KSERVICE_TABLE_DESCRIPTOR</a> <a class="code" href="../../d4/d9/ke_8h.html#a146">KeServiceDescriptorTableShadow</a>[<a class="code" href="../../d4/d9/ke_8h.html#a13">NUMBER_SERVICE_TABLES</a>];
00226 
00227 <span class="comment">//</span>
00228 <span class="comment">// KeThreadSwitchCounters - These counters record the number of times a</span>
00229 <span class="comment">//      thread can be scheduled on the current processor, any processor,</span>
00230 <span class="comment">//      or the last processor it ran on.</span>
00231 <span class="comment">//</span>
00232 
<a name="l00233"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a27">00233</a> <a class="code" href="../../d2/d8/struct__KTHREAD__SWITCH__COUNTERS.html">KTHREAD_SWITCH_COUNTERS</a> <a class="code" href="../../d4/d9/ke_8h.html#a141">KeThreadSwitchCounters</a>;
00234 
00235 <span class="comment">//</span>
00236 <span class="comment">// KeTimeIncrement - This is the nominal number of 100ns units that are to</span>
00237 <span class="comment">//      be added to the system time at each interval timer interupt. This</span>
00238 <span class="comment">//      value is set by the HAL and is used to compute the dure time for</span>
00239 <span class="comment">//      timer table entries.</span>
00240 <span class="comment">//</span>
00241 
<a name="l00242"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a28">00242</a> ULONG <a class="code" href="../../d4/d9/ke_8h.html#a153">KeTimeIncrement</a>;
00243 
00244 <span class="comment">//</span>
00245 <span class="comment">// KeTimeSynchronization - This variable controls whether time synchronization</span>
00246 <span class="comment">//      is performed using the realtime clock (TRUE) or whether it is under the</span>
00247 <span class="comment">//      control of a service (FALSE).</span>
00248 <span class="comment">//</span>
00249 
<a name="l00250"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a29">00250</a> BOOLEAN <a class="code" href="../../d4/d9/ke_8h.html#a154">KeTimeSynchronization</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00251 
00252 <span class="comment">//</span>
00253 <span class="comment">// KeUserApcDispatcher - This is the address of the user mode APC dispatch</span>
00254 <span class="comment">//      code. This address is looked up in NTDLL.DLL during initialization</span>
00255 <span class="comment">//      of the system.</span>
00256 <span class="comment">//</span>
00257 
<a name="l00258"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a30">00258</a> PVOID <a class="code" href="../../d4/d9/ke_8h.html#a148">KeUserApcDispatcher</a>;
00259 
00260 <span class="comment">//</span>
00261 <span class="comment">// KeUserCallbackDispatcher - This is the address of the user mode callback</span>
00262 <span class="comment">//      dispatch code. This address is looked up in NTDLL.DLL during</span>
00263 <span class="comment">//      initialization of the system.</span>
00264 <span class="comment">//</span>
00265 
<a name="l00266"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a31">00266</a> PVOID <a class="code" href="../../d4/d9/ke_8h.html#a149">KeUserCallbackDispatcher</a>;
00267 
00268 <span class="comment">//</span>
00269 <span class="comment">// KeUserExceptionDispatcher - This is the address of the user mode exception</span>
00270 <span class="comment">//      dispatch code. This address is looked up in NTDLL.DLL during system</span>
00271 <span class="comment">//      initialization.</span>
00272 <span class="comment">//</span>
00273 
<a name="l00274"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a32">00274</a> PVOID <a class="code" href="../../d4/d9/ke_8h.html#a150">KeUserExceptionDispatcher</a>;
00275 
00276 <span class="comment">//</span>
00277 <span class="comment">// KeRaiseUserExceptionDispatcher - This is the address of the raise user</span>
00278 <span class="comment">//      mode exception dispatch code. This address is looked up in NTDLL.DLL</span>
00279 <span class="comment">//      during system initialization.</span>
00280 <span class="comment">//</span>
00281 
<a name="l00282"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a33">00282</a> PVOID <a class="code" href="../../d4/d9/ke_8h.html#a151">KeRaiseUserExceptionDispatcher</a>;
00283 
00284 <span class="comment">//</span>
00285 <span class="comment">// Private kernel data declaration and allocation.</span>
00286 <span class="comment">//</span>
00287 <span class="comment">// KiBugCodeMessages - Address of where the BugCode messages can be found.</span>
00288 <span class="comment">//</span>
00289 
00290 <span class="preprocessor">#if DEVL</span>
00291 <span class="preprocessor"></span>
00292 PMESSAGE_RESOURCE_DATA KiBugCodeMessages = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00293 
00294 <span class="preprocessor">#endif</span>
00295 <span class="preprocessor"></span>
00296 <span class="comment">//</span>
00297 <span class="comment">// KiDmaIoCoherency - This determines whether the host platform supports</span>
00298 <span class="comment">//      coherent DMA I/O.</span>
00299 <span class="comment">//</span>
00300 
<a name="l00301"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a34">00301</a> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a34">KiDmaIoCoherency</a>;
00302 
00303 <span class="comment">//</span>
00304 <span class="comment">// KiMaximumSearchCount - this is the maximum number of timers entries that</span>
00305 <span class="comment">//      have had to be examined to insert in the timer tree.</span>
00306 <span class="comment">//</span>
00307 
<a name="l00308"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a35">00308</a> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a35">KiMaximumSearchCount</a> = 0;
00309 
00310 <span class="comment">//</span>
00311 <span class="comment">// KiDebugRoutine - This is the address of the kernel debugger. Initially</span>
00312 <span class="comment">//      this is filled with the address of a routine that just returns. If</span>
00313 <span class="comment">//      the system debugger is present in the system, then it sets this</span>
00314 <span class="comment">//      location to the address of the systemn debugger's routine.</span>
00315 <span class="comment">//</span>
00316 
<a name="l00317"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a36">00317</a> <a class="code" href="../../d4/d9/ke_8h.html#a64">PKDEBUG_ROUTINE</a> <a class="code" href="../../d0/d7/kdp_8h.html#a24">KiDebugRoutine</a>;
00318 
00319 <span class="comment">//</span>
00320 <span class="comment">// KiDebugSwitchRoutine - This is the address of the kernel debuggers</span>
00321 <span class="comment">//      processor switch routine.  This is used on an MP system to</span>
00322 <span class="comment">//      switch host processors while debugging.</span>
00323 <span class="comment">//</span>
00324 
<a name="l00325"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a37">00325</a> <a class="code" href="../../d4/d9/ke_8h.html#a65">PKDEBUG_SWITCH_ROUTINE</a> <a class="code" href="../../d0/d7/kdp_8h.html#a25">KiDebugSwitchRoutine</a>;
00326 
00327 <span class="comment">//</span>
00328 <span class="comment">// KiDispatcherLock - This is the spin lock that guards the dispatcher</span>
00329 <span class="comment">//      database.</span>
00330 <span class="comment">//</span>
00331 
<a name="l00332"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a38">00332</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d5/d9/kernldat_8c.html#a38">KiDispatcherLock</a>;
00333 
<a name="l00334"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a39">00334</a> CCHAR <a class="code" href="../../d8/d0/hivecell_8c.html#a5">KiFindFirstSetRight</a>[256] = {
00335         0, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00336         4, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00337         5, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00338         4, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00339         6, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00340         4, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00341         5, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00342         4, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00343         7, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00344         4, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00345         5, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00346         4, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00347         6, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00348         4, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00349         5, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0,
00350         4, 0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2, 0, 1, 0};
00351 
<a name="l00352"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a40">00352</a> CCHAR <a class="code" href="../../d8/d0/hivecell_8c.html#a6">KiFindFirstSetLeft</a>[256] = {
00353         0, 0, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3,
00354         4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
00355         5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,
00356         5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,
00357         6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,
00358         6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,
00359         6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,
00360         6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,
00361         7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
00362         7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
00363         7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
00364         7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
00365         7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
00366         7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
00367         7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
00368         7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7};
00369 
00370 <span class="comment">//</span>
00371 <span class="comment">// KiFreezeExecutionLock - This is the spin lock that guards the freezing</span>
00372 <span class="comment">//      of execution.</span>
00373 <span class="comment">//</span>
00374 
<a name="l00375"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a41">00375</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d4/d4/alpha_2splocks_8c.html#a10">KiFreezeExecutionLock</a>;
00376 
00377 <span class="comment">//</span>
00378 <span class="comment">// KiFreezeLockBackup - For debug builds only.  Allows kernel debugger to</span>
00379 <span class="comment">//      be entered even FreezeExecutionLock is jammed.</span>
00380 <span class="comment">//</span>
00381 
<a name="l00382"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a42">00382</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d4/d4/alpha_2splocks_8c.html#a11">KiFreezeLockBackup</a>;
00383 
00384 <span class="comment">//</span>
00385 <span class="comment">// KiFreezeFlag - For debug builds only.  Flags to track and signal non-</span>
00386 <span class="comment">//      normal freezelock conditions.</span>
00387 <span class="comment">//</span>
00388 
<a name="l00389"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a43">00389</a> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a43">KiFreezeFlag</a>;
00390 
00391 <span class="comment">//</span>
00392 <span class="comment">// KiSuspenState - Flag to track suspend/resume state of processors.</span>
00393 <span class="comment">//</span>
00394 
<a name="l00395"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a44">00395</a> <span class="keyword">volatile</span> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a44">KiSuspendState</a>;
00396 
00397 <span class="comment">//</span>
00398 <span class="comment">// KiFindLeftNibbleBitTable - This a table that is used to find the left most bit in</span>
00399 <span class="comment">//      a 4-bit nibble.</span>
00400 <span class="comment">//</span>
00401 
<a name="l00402"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a45">00402</a> UCHAR <a class="code" href="../../d5/d9/kernldat_8c.html#a45">KiFindLeftNibbleBitTable</a>[] = {0, 0, 1, 1, 2, 2, 2, 2,
00403                                     3, 3, 3, 3, 3, 3, 3, 3};
00404 
00405 <span class="comment">//</span>
00406 <span class="comment">// KiProcessorBlock - This is an array of pointers to processor control blocks.</span>
00407 <span class="comment">//      The elements of the array are indexed by processor number. Each element</span>
00408 <span class="comment">//      is a pointer to the processor control block for one of the processors</span>
00409 <span class="comment">//      in the configuration. This array is used by various sections of code</span>
00410 <span class="comment">//      that need to effect the execution of another processor.</span>
00411 <span class="comment">//</span>
00412 
<a name="l00413"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a46">00413</a> PKPRCB <a class="code" href="../../d4/d9/ke_8h.html#a139">KiProcessorBlock</a>[<a class="code" href="../../d9/d5/ndismain_8h.html#a183">MAXIMUM_PROCESSORS</a>];
00414 
00415 <span class="comment">//</span>
00416 <span class="comment">// KiSwapEvent - This is the event that is used to wake up the balance set</span>
00417 <span class="comment">//      thread to inswap processes, outswap processes, and to inswap kernel</span>
00418 <span class="comment">//      stacks.</span>
00419 <span class="comment">//</span>
00420 
<a name="l00421"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a47">00421</a> <a class="code" href="../../d2/d6/struct__KEVENT.html">KEVENT</a> <a class="code" href="../../d5/d9/kernldat_8c.html#a47">KiSwapEvent</a>;
00422 
00423 <span class="comment">//</span>
00424 <span class="comment">// KiProcessInSwapListHead - This is the list of processes that are waiting</span>
00425 <span class="comment">//      to be inswapped.</span>
00426 <span class="comment">//</span>
00427 
<a name="l00428"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a48">00428</a> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a48">KiProcessInSwapListHead</a>;
00429 
00430 <span class="comment">//</span>
00431 <span class="comment">// KiProcessOutSwapListHead - This is the list of processes that are waiting</span>
00432 <span class="comment">//      to be outswapped.</span>
00433 <span class="comment">//</span>
00434 
<a name="l00435"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a49">00435</a> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a49">KiProcessOutSwapListHead</a>;
00436 
00437 <span class="comment">//</span>
00438 <span class="comment">// KiStackInSwapListHead - This is the list of threads that are waiting</span>
00439 <span class="comment">//      to get their stack inswapped before they can run. Threads are</span>
00440 <span class="comment">//      inserted in this list in ready thread and removed by the balance</span>
00441 <span class="comment">//      set thread.</span>
00442 <span class="comment">//</span>
00443 
<a name="l00444"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a50">00444</a> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a50">KiStackInSwapListHead</a>;
00445 
00446 <span class="comment">//</span>
00447 <span class="comment">// KiProfileSourceListHead - The list of profile sources that are currently</span>
00448 <span class="comment">//      active.</span>
00449 <span class="comment">//</span>
00450 
<a name="l00451"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a51">00451</a> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a51">KiProfileSourceListHead</a>;
00452 
00453 <span class="comment">//</span>
00454 <span class="comment">// KiProfileAlignmentFixup - Indicates whether alignment fixup profiling</span>
00455 <span class="comment">//      is active.</span>
00456 <span class="comment">//</span>
00457 
<a name="l00458"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a52">00458</a> BOOLEAN <a class="code" href="../../d5/d9/kernldat_8c.html#a52">KiProfileAlignmentFixup</a>;
00459 
00460 <span class="comment">//</span>
00461 <span class="comment">// KiProfileAlignmentFixupInterval - Indicates the current alignment fixup</span>
00462 <span class="comment">//      profiling interval.</span>
00463 <span class="comment">//</span>
00464 
<a name="l00465"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a53">00465</a> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a53">KiProfileAlignmentFixupInterval</a>;
00466 
00467 <span class="comment">//</span>
00468 <span class="comment">// KiProfileAlignmentFixupCount - Indicates the current alignment fixup</span>
00469 <span class="comment">//      count.</span>
00470 <span class="comment">//</span>
00471 
<a name="l00472"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a54">00472</a> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a54">KiProfileAlignmentFixupCount</a>;
00473 
00474 <span class="comment">//</span>
00475 <span class="comment">// KiProfileInterval - The profile interval in 100ns units.</span>
00476 <span class="comment">//</span>
00477 
<a name="l00478"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a55">00478</a> ULONG <a class="code" href="../../d5/d9/kernldat_8c.html#a55">KiProfileInterval</a> = DEFAULT_PROFILE_INTERVAL;
00479 
00480 <span class="comment">//</span>
00481 <span class="comment">// KiProfileListHead - This is the list head for the profile list.</span>
00482 <span class="comment">//</span>
00483 
<a name="l00484"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a56">00484</a> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a56">KiProfileListHead</a>;
00485 
00486 <span class="comment">//</span>
00487 <span class="comment">// KiProfileLock - This is the spin lock that guards the profile list.</span>
00488 <span class="comment">//</span>
00489 
<a name="l00490"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a57">00490</a> <span class="keyword">extern</span> KSPIN_LOCK <a class="code" href="../../d4/d4/alpha_2splocks_8c.html#a14">KiProfileLock</a>;
00491 
00492 <span class="comment">//</span>
00493 <span class="comment">// KiTimerExpireDpc - This is the Deferred Procedure Call (DPC) object that</span>
00494 <span class="comment">//      is used to process the timer queue when a timer has expired.</span>
00495 <span class="comment">//</span>
00496 
<a name="l00497"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a58">00497</a> <a class="code" href="../../d1/d6/struct__KDPC.html">KDPC</a> <a class="code" href="../../d5/d9/kernldat_8c.html#a58">KiTimerExpireDpc</a>;
00498 
00499 <span class="comment">//</span>
00500 <span class="comment">// KiTimeIncrementReciprocal - This is the reciprocal fraction of the time</span>
00501 <span class="comment">//      increment value that is specified by the HAL when the system is</span>
00502 <span class="comment">//      booted.</span>
00503 <span class="comment">//</span>
00504 
<a name="l00505"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a59">00505</a> LARGE_INTEGER <a class="code" href="../../d5/d9/kernldat_8c.html#a59">KiTimeIncrementReciprocal</a>;
00506 
00507 <span class="comment">//</span>
00508 <span class="comment">// KiTimeIncrementShiftCount - This is the shift count that corresponds to</span>
00509 <span class="comment">//      the time increment reciprocal value.</span>
00510 <span class="comment">//</span>
00511 
<a name="l00512"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a60">00512</a> CCHAR <a class="code" href="../../d5/d9/kernldat_8c.html#a60">KiTimeIncrementShiftCount</a>;
00513 
00514 <span class="comment">//</span>
00515 <span class="comment">// KiWaitInListHead - This is a list of threads that are waiting with a</span>
00516 <span class="comment">//      resident kernel stack.</span>
00517 <span class="comment">//</span>
00518 
<a name="l00519"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a61">00519</a> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a61">KiWaitInListHead</a>;
00520 
00521 <span class="comment">//</span>
00522 <span class="comment">// KiWaitOutListHead - This is a list of threads that are either waiting</span>
00523 <span class="comment">//      with a kernel stack that is nonresident or are not elligible to</span>
00524 <span class="comment">//      have their stack swapped.</span>
00525 <span class="comment">//</span>
00526 
<a name="l00527"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a62">00527</a> LIST_ENTRY <a class="code" href="../../d5/d9/kernldat_8c.html#a62">KiWaitOutListHead</a>;
00528 
00529 <span class="comment">//</span>
00530 <span class="comment">// Private kernel data declaration and allocation.</span>
00531 <span class="comment">//</span>
00532 <span class="comment">//</span>
00533 <span class="comment">// KiIpiCounts - Instrumentation counters for IPI requests.</span>
00534 <span class="comment">//      Each processor has it's own set.  Intstrumentation build only.</span>
00535 <span class="comment">//</span>
00536 
00537 <span class="preprocessor">#if NT_INST</span>
00538 <span class="preprocessor"></span>
00539 <a class="code" href="../../d1/d7/struct__KIPI__COUNTS.html">KIPI_COUNTS</a> KiIpiCounts[<a class="code" href="../../d9/d5/ndismain_8h.html#a183">MAXIMUM_PROCESSORS</a>];
00540 
00541 <span class="preprocessor">#endif  // NT_INST</span>
00542 <span class="preprocessor"></span>
00543 <span class="comment">//</span>
00544 <span class="comment">// KxUnexpectedInterrupt - This is the interrupt object that is used to</span>
00545 <span class="comment">//      populate the interrupt vector table for interrupt that are not</span>
00546 <span class="comment">//      connected to any interrupt.</span>
00547 <span class="comment">//</span>
00548 
00549 <span class="preprocessor">#if defined(_ALPHA_) || defined(_IA64_)</span>
00550 <span class="preprocessor"></span>
00551 <a class="code" href="../../d0/d7/struct__KINTERRUPT.html">KINTERRUPT</a> KxUnexpectedInterrupt;
00552 
00553 <span class="preprocessor">#endif</span>
00554 <span class="preprocessor"></span>
00555 <span class="comment">//</span>
00556 <span class="comment">// Performance data declaration and allocation.</span>
00557 <span class="comment">//</span>
00558 <span class="comment">// KiFlushSingleCallData - This is the call performance data for the kernel</span>
00559 <span class="comment">//      flush single TB function.</span>
00560 <span class="comment">//</span>
00561 
00562 <span class="preprocessor">#if defined(_COLLECT_FLUSH_SINGLE_CALLDATA_)</span>
00563 <span class="preprocessor"></span>
00564 <a class="code" href="../../d8/d6/struct__CALL__PERFORMANCE__DATA.html">CALL_PERFORMANCE_DATA</a> <a class="code" href="../../d0/d0/ki_8h.html#a46">KiFlushSingleCallData</a>;
00565 
00566 <span class="preprocessor">#endif</span>
00567 <span class="preprocessor"></span>
00568 <span class="comment">//</span>
00569 <span class="comment">// KiSetEventCallData - This is the call performance data for the kernel</span>
00570 <span class="comment">//      set event function.</span>
00571 <span class="comment">//</span>
00572 
00573 <span class="preprocessor">#if defined(_COLLECT_SET_EVENT_CALLDATA_)</span>
00574 <span class="preprocessor"></span>
00575 <a class="code" href="../../d8/d6/struct__CALL__PERFORMANCE__DATA.html">CALL_PERFORMANCE_DATA</a> <a class="code" href="../../d0/d0/ki_8h.html#a65">KiSetEventCallData</a>;
00576 
00577 <span class="preprocessor">#endif</span>
00578 <span class="preprocessor"></span>
00579 <span class="comment">//</span>
00580 <span class="comment">// KiWaitSingleCallData - This is the call performance data for the kernel</span>
00581 <span class="comment">//      wait for single object function.</span>
00582 <span class="comment">//</span>
00583 
00584 <span class="preprocessor">#if defined(_COLLECT_WAIT_SINGLE_CALLDATA_)</span>
00585 <span class="preprocessor"></span>
00586 <a class="code" href="../../d8/d6/struct__CALL__PERFORMANCE__DATA.html">CALL_PERFORMANCE_DATA</a> <a class="code" href="../../d0/d0/ki_8h.html#a79">KiWaitSingleCallData</a>;
00587 
00588 <span class="preprocessor">#endif</span>
00589 <span class="preprocessor"></span>
00590 <span class="comment">//</span>
00591 <span class="comment">// KiEnableTimerWatchdog - Flag to enable/disable timer latency watchdog.</span>
00592 <span class="comment">//</span>
00593 
00594 <span class="preprocessor">#if (DBG)</span>
00595 <span class="preprocessor"></span>ULONG <a class="code" href="../../d8/d0/cmdat3_8c.html#a63">KiEnableTimerWatchdog</a> = 1;
00596 <span class="preprocessor">#else</span>
<a name="l00597"></a><a class="code" href="../../d5/d9/kernldat_8c.html#a63">00597</a> <span class="preprocessor"></span>ULONG <a class="code" href="../../d8/d0/cmdat3_8c.html#a63">KiEnableTimerWatchdog</a> = 0;
00598 <span class="preprocessor">#endif</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:40:35 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

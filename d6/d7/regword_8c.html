<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: regword.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>regword.c File Reference</h1><code>#include "<a class="el" href="../../d9/d2/w32_2ntuser_2imm_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d7/d6/regword_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d7/regword_8c.html#a0">ImmRegisterWordA</a> (HKL hKL, LPCSTR lpszReading, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, LPCSTR lpszString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d7/regword_8c.html#a1">ImmRegisterWordW</a> (HKL hKL, LPCWSTR lpwszReading, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, LPCWSTR lpwszString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d7/regword_8c.html#a2">ImmUnregisterWordA</a> (HKL hKL, LPCSTR lpszReading, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, LPCSTR lpszString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d7/regword_8c.html#a3">ImmUnregisterWordW</a> (HKL hKL, LPCWSTR lpwszReading, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, LPCWSTR lpwszString)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d7/regword_8c.html#a4">ImmGetRegisterWordStyleA</a> (HKL hKL, UINT nItem, LPSTYLEBUFA lpStyleBufA)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d7/regword_8c.html#a5">ImmGetRegisterWordStyleW</a> (HKL hKL, UINT nItem, LPSTYLEBUFW lpStyleBufW)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d7/regword_8c.html#a6">ImmEnumRegisterWordA</a> (HKL hKL, REGISTERWORDENUMPROCA lpfnRegisterWordEnumProcA, LPCSTR lpszReading, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, LPCSTR lpszString, <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> lpData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT WINAPI&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d7/regword_8c.html#a7">ImmEnumRegisterWordW</a> (HKL hKL, REGISTERWORDENUMPROCW lpfnRegisterWordEnumProcW, LPCWSTR lpwszReading, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, LPCWSTR lpwszString, <a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a> lpData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT CALLBACK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d7/regword_8c.html#a8">EnumRegisterWordProcA</a> (LPCSTR lpszReading, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, LPCSTR lpszString, <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">PENUMREGWORDDATA</a> pEnumRegWordData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>UINT CALLBACK&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d7/regword_8c.html#a9">EnumRegisterWordProcW</a> (LPCWSTR lpwszReading, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwStyle, LPCWSTR lpwszString, <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">PENUMREGWORDDATA</a> pEnumRegWordData)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a8" doxytag="regword.c::EnumRegisterWordProcA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT CALLBACK EnumRegisterWordProcA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszReading</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">PENUMREGWORDDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pEnumRegWordData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/regword_8c-source.html#l00749">749</a> of file <a class="el" href="../../d7/d6/regword_8c-source.html">regword.c</a>.
<p>
References <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00048">_ENUMREGWORDDATA::dwCodePage</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00059">ImmAssert</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00047">_ENUMREGWORDDATA::lpData</a>, <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o2">_ENUMREGWORDDATA::lpfn</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d4/d0/immcli_8h.html#a47">PENUMREGWORDDATA</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00642">ImmEnumRegisterWordW()</a>.
<p>
<pre class="fragment"><div>00754 {
00755     LPWSTR lpwszReading;
00756     LPWSTR lpwszString;
00757     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>    cchReading;
00758     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>    cchString;
00759     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>    i;
00760     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>   uRet;
00761 
00762     <a class="code" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>(pEnumRegWordData != NULL);
00763 
00764     <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00765         cchReading = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszReading) + <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>);
00766         lpwszReading = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchReading * <span class="keyword">sizeof</span>(WCHAR));
00767         <span class="keywordflow">if</span> (lpwszReading == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00768             RIPMSG0(RIP_WARNING, <span class="stringliteral">"EnumRegisterWordProcA: memory failure."</span>);
00769             <span class="keywordflow">return</span> 0;
00770         }
00771 
00772         i = MultiByteToWideChar(pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o4">dwCodePage</a>,
00773                                 (DWORD)MB_PRECOMPOSED,
00774                                 (LPSTR)lpszReading,              <span class="comment">// src</span>
00775                                 (INT)<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszReading),
00776                                 (LPWSTR)lpwszReading,            <span class="comment">// dest</span>
00777                                 cchReading);
00778         lpwszReading[i] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00779     }
00780     <span class="keywordflow">else</span> {
00781         lpwszReading = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00782     }
00783 
00784     <span class="keywordflow">if</span> (lpszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00785         cchString  = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszString) + <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>);
00786         lpwszString = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchString * <span class="keyword">sizeof</span>(WCHAR));
00787         <span class="keywordflow">if</span> (lpwszString == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00788             RIPMSG0(RIP_WARNING, <span class="stringliteral">"EnumRegisterWordProcA: memory failure."</span>);
00789             <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00790                 <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszReading);
00791             <span class="keywordflow">return</span> 0;
00792         }
00793 
00794         i = MultiByteToWideChar(pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o4">dwCodePage</a>,
00795                                 (DWORD)MB_PRECOMPOSED,
00796                                 (LPSTR)lpszString,              <span class="comment">// src</span>
00797                                 (INT)<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszString),
00798                                 (LPWSTR)lpwszString,            <span class="comment">// dest</span>
00799                                 cchString);
00800         lpwszString[i] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00801     }
00802     <span class="keywordflow">else</span> {
00803         lpwszString = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00804     }
00805 
00806     uRet = (*pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o2">lpfn</a>.w)(lpwszReading, dwStyle,
00807                             lpwszString, pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o3">lpData</a>);
00808 
00809     <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00810         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszReading);
00811 
00812     <span class="keywordflow">if</span> (lpwszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00813         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszString);
00814 
00815     <span class="keywordflow">return</span> uRet;
00816 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="regword.c::EnumRegisterWordProcW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT CALLBACK EnumRegisterWordProcW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpwszReading</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpwszString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html">PENUMREGWORDDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pEnumRegWordData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/regword_8c-source.html#l00819">819</a> of file <a class="el" href="../../d7/d6/regword_8c-source.html">regword.c</a>.
<p>
References <a class="el" href="../../d5/d9/immcli_8h-source.html#l00048">_ENUMREGWORDDATA::dwCodePage</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00059">ImmAssert</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00047">_ENUMREGWORDDATA::lpData</a>, <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o2">_ENUMREGWORDDATA::lpfn</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00539">ImmEnumRegisterWordA()</a>.
<p>
<pre class="fragment"><div>00824 {
00825     LPSTR lpszReading;
00826     LPSTR lpszString;
00827     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>   cchReading;
00828     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>   cchString;
00829     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>   i;
00830     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>  uRet;
00831 
00832     <a class="code" href="../../d4/d0/immcli_8h.html#a2">ImmAssert</a>(pEnumRegWordData != NULL);
00833 
00834     <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00835         cchReading = (wcslen(lpwszReading) + 1) * <span class="keyword">sizeof</span>(WCHAR);
00836         lpszReading = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchReading);
00837         <span class="keywordflow">if</span> (lpszReading == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00838             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmRegisterWordW: memory failure."</span>);
00839             <span class="keywordflow">return</span> 0;
00840         }
00841 
00842         i = WideCharToMultiByte(pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o4">dwCodePage</a>,
00843                                 (DWORD)0,
00844                                 (LPWSTR)lpwszReading,          <span class="comment">// src</span>
00845                                 (INT)wcslen(lpwszReading),
00846                                 (LPSTR)lpszReading,            <span class="comment">// dest</span>
00847                                 cchReading,
00848                                 (LPSTR)NULL,
00849                                 (LPBOOL)NULL);
00850         lpszReading[i] = <span class="charliteral">'\0'</span>;
00851     }
00852     <span class="keywordflow">else</span> {
00853         lpszReading = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00854     }
00855 
00856     <span class="keywordflow">if</span> (lpwszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00857         cchString  = (wcslen(lpwszString) + 1) * <span class="keyword">sizeof</span>(WCHAR);
00858         lpszString = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchString);
00859         <span class="keywordflow">if</span> (lpszString == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00860             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmRegisterWordW: memory failure."</span>);
00861             <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00862                 <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszReading);
00863             <span class="keywordflow">return</span> 0;
00864         }
00865 
00866         i = WideCharToMultiByte(pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o4">dwCodePage</a>,
00867                                 (DWORD)0,
00868                                 (LPWSTR)lpwszString,          <span class="comment">// src</span>
00869                                 (INT)wcslen(lpwszString),
00870                                 (LPSTR)lpszString,            <span class="comment">// dest</span>
00871                                 cchString,
00872                                 (LPSTR)NULL,
00873                                 (LPBOOL)NULL);
00874         lpszString[i] = <span class="charliteral">'\0'</span>;
00875     }
00876     <span class="keywordflow">else</span> {
00877         lpszString = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00878     }
00879 
00880     uRet = (*pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o2">lpfn</a>.a)(lpszReading, dwStyle,
00881                             lpszString, pEnumRegWordData-&gt;<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o3">lpData</a>);
00882 
00883     <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00884         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszReading);
00885 
00886     <span class="keywordflow">if</span> (lpszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00887         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszString);
00888 
00889     <span class="keywordflow">return</span> uRet;
00890 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="regword.c::ImmEnumRegisterWordA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT WINAPI ImmEnumRegisterWordA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>REGISTERWORDENUMPROCA&nbsp;</td>
          <td class="mdname" nowrap> <em>lpfnRegisterWordEnumProcA</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszReading</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/regword_8c-source.html#l00539">539</a> of file <a class="el" href="../../d7/d6/regword_8c-source.html">regword.c</a>.
<p>
References <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00048">_ENUMREGWORDDATA::dwCodePage</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00819">EnumRegisterWordProcW()</a>, <a class="el" href="../../d4/d0/immcli_8h.html#a46">ENUMREGWORDDATA</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00327">FindOrLoadImeDpi()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00182">IMECodePage</a>, <a class="el" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o18">tagIMEDPI::_tagImeFunctions::ImeEnumRegisterWord</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00642">ImmEnumRegisterWordW()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00047">_ENUMREGWORDDATA::lpData</a>, <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o2">_ENUMREGWORDDATA::lpfn</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00642">ImmEnumRegisterWordW()</a>.
<p>
<pre class="fragment"><div>00546 {
00547     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>         pImeDpi;
00548     LPWSTR          lpwszReading;
00549     LPWSTR          lpwszString;
00550     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>             cchReading;
00551     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>             cchString;
00552     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>             i;
00553     <a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html">ENUMREGWORDDATA</a> erwData;
00554     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>            uRet;
00555 
00556     pImeDpi = <a class="code" href="../../d6/d0/immime_8c.html#a11">FindOrLoadImeDpi</a>(hKL);
00557     <span class="keywordflow">if</span> (pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00558         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmEnumRegisterWordA: no pImeDpi entry."</span>);
00559         <span class="keywordflow">return</span> 0;
00560     }
00561 
00562     <span class="keywordflow">if</span> (!(pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE)) {
00563         <span class="comment">/*</span>
00564 <span class="comment">         * Doesn't need A/W conversion. Calls directly to IME to</span>
00565 <span class="comment">         * enumerate registered strings.</span>
00566 <span class="comment">         */</span>
00567         uRet = (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o18">ImeEnumRegisterWord</a>.a)(lpfnRegisterWordEnumProcA,
00568                                                      lpszReading,
00569                                                      dwStyle,
00570                                                      lpszString,
00571                                                      lpData);
00572         <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00573         <span class="keywordflow">return</span> uRet;
00574     }
00575 
00576     <span class="comment">/*</span>
00577 <span class="comment">     * ANSI caller, Unicode IME. Needs A/W conversion on</span>
00578 <span class="comment">     * lpszReading and lpszString.</span>
00579 <span class="comment">     */</span>
00580     <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00581         cchReading = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszReading) + <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>);
00582         lpwszReading = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchReading * <span class="keyword">sizeof</span>(WCHAR));
00583         <span class="keywordflow">if</span> (lpwszReading == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00584             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmEnumRegisterWordA: memory failure."</span>);
00585             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00586             <span class="keywordflow">return</span> 0;
00587         }
00588 
00589         i = MultiByteToWideChar(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00590                                 (DWORD)MB_PRECOMPOSED,
00591                                 (LPSTR)lpszReading,              <span class="comment">// src</span>
00592                                 (INT)<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszReading),
00593                                 (LPWSTR)lpwszReading,            <span class="comment">// dest</span>
00594                                 cchReading);
00595         lpwszReading[i] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00596     }
00597     <span class="keywordflow">else</span> {
00598         lpwszReading = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00599     }
00600 
00601     <span class="keywordflow">if</span> (lpszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00602         cchString  = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszString)  + <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>);
00603         lpwszString = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchString * <span class="keyword">sizeof</span>(WCHAR));
00604         <span class="keywordflow">if</span> (lpwszString == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00605             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmEnumRegisterWordA: memory failure."</span>);
00606             <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00607                 <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszReading);
00608             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00609             <span class="keywordflow">return</span> 0;
00610         }
00611 
00612         i = MultiByteToWideChar(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00613                                 (DWORD)MB_PRECOMPOSED,
00614                                 (LPSTR)lpszString,              <span class="comment">// src</span>
00615                                 (INT)<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszString),
00616                                 (LPWSTR)lpwszString,            <span class="comment">// dest</span>
00617                                 cchString);
00618         lpwszString[i] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00619     }
00620     <span class="keywordflow">else</span> {
00621         lpwszString = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00622     }
00623 
00624     erwData.<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o2">lpfn</a>.a = lpfnRegisterWordEnumProcA;
00625     erwData.<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o3">lpData</a> = lpData;
00626     erwData.<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o4">dwCodePage</a> = <a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi);
00627 
00628     uRet = <a class="code" href="../../d6/d7/regword_8c.html#a7">ImmEnumRegisterWordW</a>(hKL, EnumRegisterWordProcW,
00629                     lpwszReading, dwStyle, lpwszString, (LPVOID)&amp;erwData);
00630 
00631     <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00632         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszReading);
00633 
00634     <span class="keywordflow">if</span> (lpwszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00635         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszString);
00636 
00637     <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00638     <span class="keywordflow">return</span> uRet;
00639 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="regword.c::ImmEnumRegisterWordW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT WINAPI ImmEnumRegisterWordW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>REGISTERWORDENUMPROCW&nbsp;</td>
          <td class="mdname" nowrap> <em>lpfnRegisterWordEnumProcW</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpwszReading</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpwszString</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a5">LPVOID</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lpData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/regword_8c-source.html#l00642">642</a> of file <a class="el" href="../../d7/d6/regword_8c-source.html">regword.c</a>.
<p>
References <a class="el" href="../../d5/d9/immcli_8h-source.html#l00048">_ENUMREGWORDDATA::dwCodePage</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00749">EnumRegisterWordProcA()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00327">FindOrLoadImeDpi()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00182">IMECodePage</a>, <a class="el" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o18">tagIMEDPI::_tagImeFunctions::ImeEnumRegisterWord</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00539">ImmEnumRegisterWordA()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00047">_ENUMREGWORDDATA::lpData</a>, <a class="el" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o2">_ENUMREGWORDDATA::lpfn</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">LPVOID</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00539">ImmEnumRegisterWordA()</a>.
<p>
<pre class="fragment"><div>00649 {
00650     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>         pImeDpi;
00651     LPSTR           lpszReading;
00652     LPSTR           lpszString;
00653     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>             cchReading;
00654     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>             cchString;
00655     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>             i;
00656     <a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html">ENUMREGWORDDATA</a> erwData;
00657     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>            uRet;
00658 
00659     pImeDpi = <a class="code" href="../../d6/d0/immime_8c.html#a11">FindOrLoadImeDpi</a>(hKL);
00660     <span class="keywordflow">if</span> (pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00661         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmEnumRegisterWordW: no pImeDpi entry."</span>);
00662         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00663     }
00664 
00665     <span class="keywordflow">if</span> (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE) {
00666         <span class="comment">/*</span>
00667 <span class="comment">         * Doesn't need W/A conversion. Calls directly to IME to</span>
00668 <span class="comment">         * enumerate registered strings.</span>
00669 <span class="comment">         */</span>
00670         uRet = (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o18">ImeEnumRegisterWord</a>.w)(lpfnRegisterWordEnumProcW,
00671                                                      lpwszReading,
00672                                                      dwStyle,
00673                                                      lpwszString,
00674                                                      lpData);
00675         <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00676         <span class="keywordflow">return</span> uRet;
00677     }
00678 
00679     <span class="comment">/*</span>
00680 <span class="comment">     * Unicode caller, ANSI IME. Needs W/A conversion on</span>
00681 <span class="comment">     * lpwszReading and lpwszString.</span>
00682 <span class="comment">     */</span>
00683     <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00684         cchReading = (wcslen(lpwszReading) + 1) * <span class="keyword">sizeof</span>(WCHAR);
00685         lpszReading = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchReading);
00686         <span class="keywordflow">if</span> (lpszReading == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00687             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmEnumRegisterWordW: memory failure."</span>);
00688             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00689             <span class="keywordflow">return</span> 0;
00690         }
00691 
00692         i = WideCharToMultiByte(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00693                                 (DWORD)0,
00694                                 (LPWSTR)lpwszReading,          <span class="comment">// src</span>
00695                                 (INT)wcslen(lpwszReading),
00696                                 (LPSTR)lpszReading,            <span class="comment">// dest</span>
00697                                 cchReading,
00698                                 (LPSTR)NULL,
00699                                 (LPBOOL)NULL);
00700         lpszReading[i] = <span class="charliteral">'\0'</span>;
00701     }
00702     <span class="keywordflow">else</span> {
00703         lpszReading = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00704     }
00705 
00706     <span class="keywordflow">if</span> (lpwszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00707         cchString  = (wcslen(lpwszString) + 1) * <span class="keyword">sizeof</span>(WCHAR);
00708         lpszString = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchString);
00709         <span class="keywordflow">if</span> (lpszString == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00710             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmEnumRegisterWordW: memory failure."</span>);
00711             <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00712                 <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszReading);
00713             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00714             <span class="keywordflow">return</span> 0;
00715         }
00716 
00717         i = WideCharToMultiByte(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00718                                 (DWORD)0,
00719                                 (LPWSTR)lpwszString,          <span class="comment">// src</span>
00720                                 (INT)wcslen(lpwszString),
00721                                 (LPSTR)lpszString,            <span class="comment">// dest</span>
00722                                 cchString,
00723                                 (LPSTR)NULL,
00724                                 (LPBOOL)NULL);
00725         lpszString[i] = <span class="charliteral">'\0'</span>;
00726     }
00727     <span class="keywordflow">else</span> {
00728         lpszString = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00729     }
00730 
00731     erwData.<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o2">lpfn</a>.w = lpfnRegisterWordEnumProcW;
00732     erwData.<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o3">lpData</a> = lpData;
00733     erwData.<a class="code" href="../../d7/d3/struct__ENUMREGWORDDATA.html#o4">dwCodePage</a> = <a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi);
00734 
00735     uRet = <a class="code" href="../../d6/d7/regword_8c.html#a6">ImmEnumRegisterWordA</a>(hKL, EnumRegisterWordProcA,
00736                     lpszReading, dwStyle, lpszString, (LPVOID)&amp;erwData);
00737 
00738     <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00739         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszReading);
00740 
00741     <span class="keywordflow">if</span> (lpszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00742         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszString);
00743 
00744     <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00745     <span class="keywordflow">return</span> uRet;
00746 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="regword.c::ImmGetRegisterWordStyleA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT WINAPI ImmGetRegisterWordStyleA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>nItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTYLEBUFA&nbsp;</td>
          <td class="mdname" nowrap> <em>lpStyleBufA</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/regword_8c-source.html#l00397">397</a> of file <a class="el" href="../../d7/d6/regword_8c-source.html">regword.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00327">FindOrLoadImeDpi()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00182">IMECodePage</a>, <a class="el" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o15">tagIMEDPI::_tagImeFunctions::ImeGetRegisterWordStyle</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00469">ImmGetRegisterWordStyleW()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00469">ImmGetRegisterWordStyleW()</a>.
<p>
<pre class="fragment"><div>00401 {
00402     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>     pImeDpi;
00403     LPSTYLEBUFW lpStyleBufW;
00404     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>        uRet;
00405 
00406     pImeDpi = <a class="code" href="../../d6/d0/immime_8c.html#a11">FindOrLoadImeDpi</a>(hKL);
00407     <span class="keywordflow">if</span> (pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00408         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmGetRegisterWordStyleA: no pImeDpi entry."</span>);
00409         <span class="keywordflow">return</span> 0;
00410     }
00411 
00412     <span class="keywordflow">if</span> (!(pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE)) {
00413         <span class="comment">/*</span>
00414 <span class="comment">         * Doesn't need A/W conversion. Calls directly to IME to</span>
00415 <span class="comment">         * get the available style.</span>
00416 <span class="comment">         */</span>
00417         uRet = (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o15">ImeGetRegisterWordStyle</a>.a)(nItem, lpStyleBufA);
00418         <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00419         <span class="keywordflow">return</span> uRet;
00420     }
00421 
00422     <span class="comment">/*</span>
00423 <span class="comment">     * ANSI caller, Unicode IME. Needs A/W conversion on</span>
00424 <span class="comment">     * lpStyleBufA.</span>
00425 <span class="comment">     */</span>
00426     lpStyleBufW = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00427 
00428     <span class="keywordflow">if</span> (nItem != 0) {
00429         lpStyleBufW = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, nItem * <span class="keyword">sizeof</span>(STYLEBUFW));
00430         <span class="keywordflow">if</span> (lpStyleBufW == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00431             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmGetRegisterWordStyleA: memory failure."</span>);
00432             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00433             <span class="keywordflow">return</span> 0;
00434         }
00435     }
00436 
00437     uRet = <a class="code" href="../../d6/d7/regword_8c.html#a5">ImmGetRegisterWordStyleW</a>(hKL, nItem, lpStyleBufW);
00438 
00439     <span class="keywordflow">if</span> (nItem != 0) {
00440         LPSTYLEBUFW lpsbw;
00441         <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> i, j;
00442 
00443         <span class="keywordflow">for</span> (i = 0, lpsbw = lpStyleBufW; i &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)uRet; i++, lpsbw++) {
00444 
00445             lpStyleBufA-&gt;dwStyle = lpsbw-&gt;dwStyle;
00446 
00447             j = WideCharToMultiByte(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00448                                     (DWORD)0,
00449                                     (LPWSTR)lpsbw-&gt;szDescription,          <span class="comment">// src</span>
00450                                     (INT)wcslen(lpsbw-&gt;szDescription),
00451                                     (LPSTR)lpStyleBufA-&gt;szDescription,     <span class="comment">// dest</span>
00452                                     (INT)<span class="keyword">sizeof</span>(lpStyleBufA-&gt;szDescription),
00453                                     (LPSTR)NULL,
00454                                     (LPBOOL)NULL);
00455             lpStyleBufA-&gt;szDescription[j] = <span class="charliteral">'\0'</span>;
00456             lpStyleBufA++;
00457         }
00458     }
00459 
00460     <span class="keywordflow">if</span> (lpStyleBufW != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00461         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpStyleBufW);
00462 
00463     <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00464 
00465     <span class="keywordflow">return</span> uRet;
00466 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="regword.c::ImmGetRegisterWordStyleW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT WINAPI ImmGetRegisterWordStyleW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>nItem</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPSTYLEBUFW&nbsp;</td>
          <td class="mdname" nowrap> <em>lpStyleBufW</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/regword_8c-source.html#l00469">469</a> of file <a class="el" href="../../d7/d6/regword_8c-source.html">regword.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00327">FindOrLoadImeDpi()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00182">IMECodePage</a>, <a class="el" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o15">tagIMEDPI::_tagImeFunctions::ImeGetRegisterWordStyle</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00397">ImmGetRegisterWordStyleA()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>, and <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00026">UINT</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00397">ImmGetRegisterWordStyleA()</a>.
<p>
<pre class="fragment"><div>00473 {
00474     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a>     pImeDpi;
00475     LPSTYLEBUFA lpStyleBufA;
00476     <a class="code" href="../../d9/d5/ndismain_8h.html#a265">UINT</a>        uRet;
00477 
00478     pImeDpi = <a class="code" href="../../d6/d0/immime_8c.html#a11">FindOrLoadImeDpi</a>(hKL);
00479     <span class="keywordflow">if</span> (pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00480         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmGetRegisterWordStyleA: no pImeDpi entry."</span>);
00481         <span class="keywordflow">return</span> 0;
00482     }
00483 
00484     <span class="keywordflow">if</span> (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE) {
00485         <span class="comment">/*</span>
00486 <span class="comment">         * Doesn't need W/A conversion. Calls directly to IME to</span>
00487 <span class="comment">         * get the available style.</span>
00488 <span class="comment">         */</span>
00489         uRet = (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o15">ImeGetRegisterWordStyle</a>.w)(nItem, lpStyleBufW);
00490         <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00491         <span class="keywordflow">return</span> uRet;
00492     }
00493 
00494     <span class="comment">/*</span>
00495 <span class="comment">     * Unicode caller, ANSI IME. Needs W/A conversion on</span>
00496 <span class="comment">     * lpStyleBufW.</span>
00497 <span class="comment">     */</span>
00498     lpStyleBufA = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00499 
00500     <span class="keywordflow">if</span> (nItem != 0) {
00501         lpStyleBufA = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, nItem * <span class="keyword">sizeof</span>(STYLEBUFA));
00502         <span class="keywordflow">if</span> (lpStyleBufA == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00503             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmGetRegisterWordStyleW: memory failure."</span>);
00504             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00505             <span class="keywordflow">return</span> 0;
00506         }
00507     }
00508 
00509     uRet = <a class="code" href="../../d6/d7/regword_8c.html#a4">ImmGetRegisterWordStyleA</a>(hKL, nItem, lpStyleBufA);
00510 
00511     <span class="keywordflow">if</span> (nItem != 0) {
00512         LPSTYLEBUFA lpsba;
00513         <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a> i, j;
00514 
00515         <span class="keywordflow">for</span> (i = 0, lpsba = lpStyleBufA; i &lt; (<a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>)uRet; i++, lpsba++) {
00516 
00517             lpStyleBufW-&gt;dwStyle = lpsba-&gt;dwStyle;
00518 
00519             j = MultiByteToWideChar(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00520                         (DWORD)MB_PRECOMPOSED,
00521                         (LPSTR)lpsba-&gt;szDescription,             <span class="comment">// src</span>
00522                         (INT)<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpsba-&gt;szDescription),
00523                         (LPWSTR)lpStyleBufW-&gt;szDescription,      <span class="comment">// dest</span>
00524                         (INT)(<span class="keyword">sizeof</span>(lpStyleBufW-&gt;szDescription)/<span class="keyword">sizeof</span>(WCHAR)));
00525             lpStyleBufW-&gt;szDescription[j] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00526             lpStyleBufW++;
00527         }
00528     }
00529 
00530     <span class="keywordflow">if</span> (lpStyleBufA != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00531         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpStyleBufA);
00532 
00533     <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00534 
00535     <span class="keywordflow">return</span> uRet;
00536 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="regword.c::ImmRegisterWordA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ImmRegisterWordA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszReading</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/regword_8c-source.html#l00025">25</a> of file <a class="el" href="../../d7/d6/regword_8c-source.html">regword.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00327">FindOrLoadImeDpi()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00182">IMECodePage</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o9">tagIMEDPI::_tagImeFunctions::ImeRegisterWord</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00116">ImmRegisterWordW()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00116">ImmRegisterWordW()</a>.
<p>
<pre class="fragment"><div>00030 {
00031     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi;
00032     LPWSTR  lpwszReading;
00033     LPWSTR  lpwszString;
00034     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     cchReading;
00035     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     cchString;
00036     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     i;
00037     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fRet;
00038 
00039     pImeDpi = <a class="code" href="../../d6/d0/immime_8c.html#a11">FindOrLoadImeDpi</a>(hKL);
00040     <span class="keywordflow">if</span> (pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00041         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmRegisterWordA: no pImeDpi entry."</span>);
00042         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00043     }
00044 
00045     <span class="keywordflow">if</span> (!(pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE)) {
00046         <span class="comment">/*</span>
00047 <span class="comment">         * Doesn't need A/W conversion. Calls directly to IME to</span>
00048 <span class="comment">         * register the string.</span>
00049 <span class="comment">         */</span>
00050         fRet = (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o9">ImeRegisterWord</a>.a)(lpszReading, dwStyle, lpszString);
00051         <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00052         <span class="keywordflow">return</span> fRet;
00053     }
00054 
00055     <span class="comment">/*</span>
00056 <span class="comment">     * ANSI caller, Unicode IME. Needs A/W conversion on</span>
00057 <span class="comment">     * lpszReading and lpszString.</span>
00058 <span class="comment">     */</span>
00059     <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00060         cchReading = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszReading) + <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>);
00061         lpwszReading = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchReading * <span class="keyword">sizeof</span>(WCHAR));
00062         <span class="keywordflow">if</span> (lpwszReading == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00063             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmRegisterWordA: memory failure."</span>);
00064             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00065             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00066         }
00067 
00068         i = MultiByteToWideChar(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00069                                 (DWORD)MB_PRECOMPOSED,
00070                                 (LPSTR)lpszReading,              <span class="comment">// src</span>
00071                                 (INT)<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszReading),
00072                                 (LPWSTR)lpwszReading,            <span class="comment">// dest</span>
00073                                 cchReading);
00074         lpwszReading[i] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00075     }
00076     <span class="keywordflow">else</span> {
00077         lpwszReading = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00078     }
00079 
00080     <span class="keywordflow">if</span> (lpszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00081         cchString  = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszString)  + <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>);
00082         lpwszString = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchString * <span class="keyword">sizeof</span>(WCHAR));
00083         <span class="keywordflow">if</span> (lpwszString == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00084             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmRegisterWordA: memory failure."</span>);
00085             <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00086                 <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszReading);
00087             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00088             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00089         }
00090 
00091         i = MultiByteToWideChar(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00092                                 (DWORD)MB_PRECOMPOSED,
00093                                 (LPSTR)lpszString,              <span class="comment">// src</span>
00094                                 (INT)<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszString),
00095                                 (LPWSTR)lpwszString,            <span class="comment">// dest</span>
00096                                 cchString);
00097         lpwszString[i] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00098     }
00099     <span class="keywordflow">else</span> {
00100         lpwszString = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00101     }
00102 
00103     fRet = <a class="code" href="../../d6/d7/regword_8c.html#a1">ImmRegisterWordW</a>(hKL, lpwszReading, dwStyle, lpwszString);
00104 
00105     <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00106         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszReading);
00107 
00108     <span class="keywordflow">if</span> (lpwszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00109         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszString);
00110 
00111     <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00112     <span class="keywordflow">return</span> fRet;
00113 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="regword.c::ImmRegisterWordW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ImmRegisterWordW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpwszReading</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpwszString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/regword_8c-source.html#l00116">116</a> of file <a class="el" href="../../d7/d6/regword_8c-source.html">regword.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00327">FindOrLoadImeDpi()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00182">IMECodePage</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o9">tagIMEDPI::_tagImeFunctions::ImeRegisterWord</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00025">ImmRegisterWordA()</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00025">ImmRegisterWordA()</a>.
<p>
<pre class="fragment"><div>00121 {
00122     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi;
00123     LPSTR   lpszReading;
00124     LPSTR   lpszString;
00125     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     cchReading;
00126     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     cchString;
00127     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     i;
00128     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fRet;
00129 
00130     pImeDpi = <a class="code" href="../../d6/d0/immime_8c.html#a11">FindOrLoadImeDpi</a>(hKL);
00131     <span class="keywordflow">if</span> (pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00132         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmRegisterWordW: no pImeDpi entry."</span>);
00133         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00134     }
00135 
00136     <span class="keywordflow">if</span> (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE) {
00137         <span class="comment">/*</span>
00138 <span class="comment">         * Doesn't need W/A conversion. Calls directly to IME to</span>
00139 <span class="comment">         * register the string.</span>
00140 <span class="comment">         */</span>
00141         fRet = (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o9">ImeRegisterWord</a>.w)(lpwszReading, dwStyle, lpwszString);
00142         <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00143         <span class="keywordflow">return</span> fRet;
00144     }
00145 
00146     <span class="comment">/*</span>
00147 <span class="comment">     * Unicode caller, ANSI IME. Needs W/A conversion on</span>
00148 <span class="comment">     * lpwszReading and lpwszString.</span>
00149 <span class="comment">     */</span>
00150     <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00151         cchReading = (wcslen(lpwszReading) + 1) * <span class="keyword">sizeof</span>(WCHAR);
00152         lpszReading = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchReading);
00153         <span class="keywordflow">if</span> (lpszReading == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00154             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmRegisterWordW: memory failure."</span>);
00155             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00156             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00157         }
00158 
00159         i = WideCharToMultiByte(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00160                                 (DWORD)0,
00161                                 (LPWSTR)lpwszReading,          <span class="comment">// src</span>
00162                                 (INT)wcslen(lpwszReading),
00163                                 (LPSTR)lpszReading,            <span class="comment">// dest</span>
00164                                 cchReading,
00165                                 (LPSTR)NULL,
00166                                 (LPBOOL)NULL);
00167         lpszReading[i] = <span class="charliteral">'\0'</span>;
00168     }
00169     <span class="keywordflow">else</span> {
00170         lpszReading = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00171     }
00172 
00173     <span class="keywordflow">if</span> (lpwszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00174         cchString  = (wcslen(lpwszString) + 1) * <span class="keyword">sizeof</span>(WCHAR);
00175         lpszString = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchString);
00176         <span class="keywordflow">if</span> (lpszString == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00177             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmRegisterWordW: memory failure."</span>);
00178             <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00179                 <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszReading);
00180             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00181             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00182         }
00183 
00184         i = WideCharToMultiByte(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00185                                 (DWORD)0,
00186                                 (LPWSTR)lpwszString,          <span class="comment">// src</span>
00187                                 (INT)wcslen(lpwszString),
00188                                 (LPSTR)lpszString,            <span class="comment">// dest</span>
00189                                 cchString,
00190                                 (LPSTR)NULL,
00191                                 (LPBOOL)NULL);
00192         lpszString[i] = <span class="charliteral">'\0'</span>;
00193     }
00194     <span class="keywordflow">else</span> {
00195         lpszString = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00196     }
00197 
00198     fRet = <a class="code" href="../../d6/d7/regword_8c.html#a0">ImmRegisterWordA</a>(hKL, lpszReading, dwStyle, lpszString);
00199 
00200     <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00201         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszReading);
00202 
00203     <span class="keywordflow">if</span> (lpszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00204         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszString);
00205 
00206     <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00207     <span class="keywordflow">return</span> fRet;
00208 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="regword.c::ImmUnregisterWordA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ImmUnregisterWordA           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszReading</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpszString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/regword_8c-source.html#l00211">211</a> of file <a class="el" href="../../d7/d6/regword_8c-source.html">regword.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d2/d0/bench_8c-source.html#l00050">CHAR</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00327">FindOrLoadImeDpi()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00182">IMECodePage</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o12">tagIMEDPI::_tagImeFunctions::ImeUnregisterWord</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00302">ImmUnregisterWordW()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>, and <a class="el" href="../../d2/d7/regtest_8c.html#a2">strlen()</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00302">ImmUnregisterWordW()</a>.
<p>
<pre class="fragment"><div>00216 {
00217     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi;
00218     LPWSTR  lpwszReading;
00219     LPWSTR  lpwszString;
00220     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     cchReading;
00221     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     cchString;
00222     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     i;
00223     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fRet;
00224 
00225     pImeDpi = <a class="code" href="../../d6/d0/immime_8c.html#a11">FindOrLoadImeDpi</a>(hKL);
00226     <span class="keywordflow">if</span> (pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00227         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmUnregisterWordA: no pImeDpi entry."</span>);
00228         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00229     }
00230 
00231     <span class="keywordflow">if</span> (!(pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE)) {
00232         <span class="comment">/*</span>
00233 <span class="comment">         * Doesn't need A/W conversion. Calls directly to IME to</span>
00234 <span class="comment">         * un-register the string.</span>
00235 <span class="comment">         */</span>
00236         fRet = (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o12">ImeUnregisterWord</a>.a)(lpszReading, dwStyle, lpszString);
00237         <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00238         <span class="keywordflow">return</span> fRet;
00239     }
00240 
00241     <span class="comment">/*</span>
00242 <span class="comment">     * ANSI caller, Unicode IME. Needs A/W conversion on</span>
00243 <span class="comment">     * lpszReading and lpszString.</span>
00244 <span class="comment">     */</span>
00245     <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00246         cchReading = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszReading) + <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>);
00247         lpwszReading = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchReading * <span class="keyword">sizeof</span>(WCHAR));
00248         <span class="keywordflow">if</span> (lpwszReading == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00249             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmUnregisterWordA: memory failure."</span>);
00250             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00251             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00252         }
00253 
00254         i = MultiByteToWideChar(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00255                                 (DWORD)MB_PRECOMPOSED,
00256                                 (LPSTR)lpszReading,              <span class="comment">// src</span>
00257                                 (INT)<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszReading),
00258                                 (LPWSTR)lpwszReading,            <span class="comment">// dest</span>
00259                                 cchReading);
00260         lpwszReading[i] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00261     }
00262     <span class="keywordflow">else</span> {
00263         lpwszReading = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00264     }
00265 
00266     <span class="keywordflow">if</span> (lpszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00267         cchString  = <a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszString)  + <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d1/bench_8c.html#a16">CHAR</a>);
00268         lpwszString = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchString * <span class="keyword">sizeof</span>(WCHAR));
00269         <span class="keywordflow">if</span> (lpwszString == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00270             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmUnregisterWordA: memory failure."</span>);
00271             <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00272                 <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszReading);
00273             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00274             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00275         }
00276 
00277         i = MultiByteToWideChar(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00278                                 (DWORD)MB_PRECOMPOSED,
00279                                 (LPSTR)lpszString,              <span class="comment">// src</span>
00280                                 (INT)<a class="code" href="../../d2/d7/regtest_8c.html#a2">strlen</a>(lpszString),
00281                                 (LPWSTR)lpwszString,            <span class="comment">// dest</span>
00282                                 cchString);
00283         lpwszString[i] = <a class="code" href="../../d2/d0/aw_8h.html#a3">L</a><span class="charliteral">'\0'</span>;
00284     }
00285     <span class="keywordflow">else</span> {
00286         lpwszString = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00287     }
00288 
00289     fRet = <a class="code" href="../../d6/d7/regword_8c.html#a3">ImmUnregisterWordW</a>(hKL, lpwszReading, dwStyle, lpwszString);
00290 
00291     <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00292         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszReading);
00293 
00294     <span class="keywordflow">if</span> (lpwszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00295         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpwszString);
00296 
00297     <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00298     <span class="keywordflow">return</span> fRet;
00299 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="regword.c::ImmUnregisterWordW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL WINAPI ImmUnregisterWordW           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HKL&nbsp;</td>
          <td class="mdname" nowrap> <em>hKL</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpwszReading</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwStyle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>LPCWSTR&nbsp;</td>
          <td class="mdname" nowrap> <em>lpwszString</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d6/regword_8c-source.html#l00302">302</a> of file <a class="el" href="../../d7/d6/regword_8c-source.html">regword.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d7/d9/immime_8c-source.html#l00327">FindOrLoadImeDpi()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00182">IMECodePage</a>, <a class="el" href="../../d0/d0/immuser_8h-source.html#l00070">tagIMEDPI::ImeInfo</a>, <a class="el" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o12">tagIMEDPI::_tagImeFunctions::ImeUnregisterWord</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00557">ImmLocalAlloc()</a>, <a class="el" href="../../d5/d9/immcli_8h-source.html#l00137">ImmLocalFree</a>, <a class="el" href="../../d6/d9/w32_2ntuser_2imm_2misc_8c-source.html#l00824">ImmUnlockImeDpi()</a>, <a class="el" href="../../d7/d6/regword_8c-source.html#l00211">ImmUnregisterWordA()</a>, <a class="el" href="../../d0/d5/ndismain_8h-source.html#l00025">INT</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d2/d7/structtagIMEDPI.html#o8">tagIMEDPI::pfn</a>.
<p>
Referenced by <a class="el" href="../../d7/d6/regword_8c-source.html#l00211">ImmUnregisterWordA()</a>.
<p>
<pre class="fragment"><div>00307 {
00308     <a class="code" href="../../d2/d7/structtagIMEDPI.html">PIMEDPI</a> pImeDpi;
00309     LPSTR   lpszReading;
00310     LPSTR   lpszString;
00311     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     cchReading;
00312     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     cchString;
00313     <a class="code" href="../../d9/d5/ndismain_8h.html#a263">INT</a>     i;
00314     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>    fRet;
00315 
00316     pImeDpi = <a class="code" href="../../d6/d0/immime_8c.html#a11">FindOrLoadImeDpi</a>(hKL);
00317     <span class="keywordflow">if</span> (pImeDpi == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00318         RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmUnregisterWordW: no pImeDpi entry."</span>);
00319         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00320     }
00321 
00322     <span class="keywordflow">if</span> (pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o3">ImeInfo</a>.fdwProperty &amp; IME_PROP_UNICODE) {
00323         <span class="comment">/*</span>
00324 <span class="comment">         * Doesn't need W/A conversion. Calls directly to IME to</span>
00325 <span class="comment">         * register the string.</span>
00326 <span class="comment">         */</span>
00327         fRet = (*pImeDpi-&gt;<a class="code" href="../../d2/d7/structtagIMEDPI.html#o8">pfn</a>.<a class="code" href="../../d3/d7/structtagIMEDPI_1_1__tagImeFunctions.html#o12">ImeUnregisterWord</a>.w)(lpwszReading, dwStyle, lpwszString);
00328         <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00329         <span class="keywordflow">return</span> fRet;
00330     }
00331 
00332     <span class="comment">/*</span>
00333 <span class="comment">     * Unicode caller, ANSI IME. Needs W/A conversion on</span>
00334 <span class="comment">     * lpwszReading and lpwszString.</span>
00335 <span class="comment">     */</span>
00336     <span class="keywordflow">if</span> (lpwszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00337         cchReading = (wcslen(lpwszReading) + 1) * <span class="keyword">sizeof</span>(WCHAR);
00338         lpszReading = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchReading);
00339         <span class="keywordflow">if</span> (lpszReading == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00340             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmUnregisterWordW: memory failure."</span>);
00341             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00342             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00343         }
00344 
00345         i = WideCharToMultiByte(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00346                                 (DWORD)0,
00347                                 (LPWSTR)lpwszReading,          <span class="comment">// src</span>
00348                                 (INT)wcslen(lpwszReading),
00349                                 (LPSTR)lpszReading,            <span class="comment">// dest</span>
00350                                 cchReading,
00351                                 (LPSTR)NULL,
00352                                 (LPBOOL)NULL);
00353         lpszReading[i] = <span class="charliteral">'\0'</span>;
00354     }
00355     <span class="keywordflow">else</span> {
00356         lpszReading = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00357     }
00358 
00359     <span class="keywordflow">if</span> (lpwszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00360         cchString  = (wcslen(lpwszString) + 1) * <span class="keyword">sizeof</span>(WCHAR);
00361         lpszString = <a class="code" href="../../d5/d0/w32_2ntuser_2imm_2misc_8c.html#a22">ImmLocalAlloc</a>(0, cchString);
00362         <span class="keywordflow">if</span> (lpszString == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00363             RIPMSG0(RIP_WARNING, <span class="stringliteral">"ImmUnregisterWordW: memory failure."</span>);
00364             <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00365                 <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszReading);
00366             <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00367             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00368         }
00369 
00370         i = WideCharToMultiByte(<a class="code" href="../../d4/d0/immcli_8h.html#a25">IMECodePage</a>(pImeDpi),
00371                                 (DWORD)0,
00372                                 (LPWSTR)lpwszString,          <span class="comment">// src</span>
00373                                 (INT)wcslen(lpwszString),
00374                                 (LPSTR)lpszString,            <span class="comment">// dest</span>
00375                                 cchString,
00376                                 (LPSTR)NULL,
00377                                 (LPBOOL)NULL);
00378         lpszString[i] = <span class="charliteral">'\0'</span>;
00379     }
00380     <span class="keywordflow">else</span> {
00381         lpszString = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00382     }
00383 
00384     fRet = <a class="code" href="../../d6/d7/regword_8c.html#a2">ImmUnregisterWordA</a>(hKL, lpszReading, dwStyle, lpszString);
00385 
00386     <span class="keywordflow">if</span> (lpszReading != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00387         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszReading);
00388 
00389     <span class="keywordflow">if</span> (lpszString != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00390         <a class="code" href="../../d4/d0/immcli_8h.html#a8">ImmLocalFree</a>(lpszString);
00391 
00392     <a class="code" href="../../d9/d0/immuser_8h.html#a46">ImmUnlockImeDpi</a>(pImeDpi);
00393     <span class="keywordflow">return</span> fRet;
00394 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:28 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

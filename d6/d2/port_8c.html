<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: port.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>port.c File Reference</h1><code>#include "stdarg.h"</code><br>
<code>#include "stdio.h"</code><br>
<code>#include "ntddk.h"</code><br>
<code>#include "<a class="el" href="../../d8/d7/fsvga_8h-source.html">fsvga.h</a>"</code><br>
<code>#include "fsvgalog.h"</code><br>

<p>
<a href="../../d7/d1/port_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d2/port_8c.html#a0">GetHardwareScrollReg</a> (<a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> deviceExtension)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d2/port_8c.html#a1">SetGRAMWriteMode</a> (<a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> deviceExtension)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d2/port_8c.html#a2">SetGRAMCopyMode</a> (<a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> deviceExtension)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d2/port_8c.html#a3">SetGRAMInvertMode</a> (<a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> deviceExtension)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d2/port_8c.html#a4">set_opaque_bkgnd_proc</a> (<a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> deviceExtension, PUCHAR FrameBuffer, WORD Attributes)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d2/port_8c.html#a5">ColorSetGridMask</a> (<a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> deviceExtension, <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> BitMask)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d2/port_8c.html#a6">ColorSetDirect</a> (<a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a> deviceExtension, PUCHAR FrameBuffer, <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> ColorFg, <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> ColorBg)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a6" doxytag="port.c::ColorSetDirect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ColorSetDirect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>deviceExtension</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FrameBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ColorFg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ColorBg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d1/port_8c-source.html#l00257">257</a> of file <a class="el" href="../../d7/d1/port_8c-source.html">port.c</a>.
<p>
References <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00976">AccessGRAM_WR()</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00132">_DEVICE_EXTENSION::DeviceRegisters</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00178">DR_SET</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00181">DR_XOR</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00171">GRAPH_ADDR_MASK</a>, <a class="el" href="../../d7/d8/fsvga_8h.html#a66a20">GRAPHAddressPort</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00125">IND_DATA_ROTATE</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00140">IND_SET_RESET</a>, and <a class="el" href="../../d2/d5/vga_8h-source.html#l00124">IND_SET_RESET_ENABLE</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00915">FsgWriteToScreenCommonLVB()</a>, and <a class="el" href="../../d7/d1/port_8c-source.html#l00186">set_opaque_bkgnd_proc()</a>.
<p>
<pre class="fragment"><div>00275 {
00276     <span class="comment">//</span>
00277     <span class="comment">// Set up to write data without interacting with the latches.</span>
00278     <span class="comment">//</span>
00279     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00280                       MAKEWORD(IND_DATA_ROTATE, DR_SET));
00281 
00282     <span class="comment">//</span>
00283     <span class="comment">// Put the background color in the Set/Reset register.</span>
00284     <span class="comment">//</span>
00285     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00286                       MAKEWORD(IND_SET_RESET, ColorBg));
00287 
00288     <span class="comment">//</span>
00289     <span class="comment">// That color is used for all planes.</span>
00290     <span class="comment">//</span>
00291     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00292                       MAKEWORD(IND_SET_RESET_ENABLE, GRAPH_ADDR_MASK));
00293 
00294     <span class="comment">//</span>
00295     <span class="comment">// This gets our background color into the latches.</span>
00296     <span class="comment">//</span>
00297     <a class="code" href="../../d7/d8/fsvga_8h.html#a52">AccessGRAM_WR</a>(FrameBuffer, GRAPH_ADDR_MASK);
00298 
00299     <span class="comment">//</span>
00300     <span class="comment">// Change the Set/Reset register to be all zeroes.</span>
00301     <span class="comment">//</span>
00302     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00303                       MAKEWORD(IND_SET_RESET, 0));
00304 
00305     <span class="comment">//</span>
00306     <span class="comment">// The Set/Reset enable register now flags where the foreground/background colors are the same.</span>
00307     <span class="comment">//</span>
00308     ColorFg = ~(ColorFg ^ ColorBg);
00309     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00310                       MAKEWORD(IND_SET_RESET_ENABLE, ColorFg));
00311 
00312     <span class="comment">//</span>
00313     <span class="comment">// Color differences will be xor'd with the latches.</span>
00314     <span class="comment">//</span>
00315     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00316                       MAKEWORD(IND_DATA_ROTATE, DR_XOR));
00317 
00318 
00319 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="port.c::ColorSetGridMask" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID ColorSetGridMask           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>deviceExtension</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>BitMask</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d1/port_8c-source.html#l00225">225</a> of file <a class="el" href="../../d7/d1/port_8c-source.html">port.c</a>.
<p>
References <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00132">_DEVICE_EXTENSION::DeviceRegisters</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00178">DR_SET</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00171">GRAPH_ADDR_MASK</a>, <a class="el" href="../../d7/d8/fsvga_8h.html#a66a20">GRAPHAddressPort</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00129">IND_BIT_MASK</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00125">IND_DATA_ROTATE</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00140">IND_SET_RESET</a>, and <a class="el" href="../../d2/d5/vga_8h-source.html#l00124">IND_SET_RESET_ENABLE</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00915">FsgWriteToScreenCommonLVB()</a>.
<p>
<pre class="fragment"><div>00229 {
00230 
00231     <span class="comment">//</span>
00232     <span class="comment">// That color is used for all planes.</span>
00233     <span class="comment">//</span>
00234     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00235                       MAKEWORD(IND_SET_RESET_ENABLE, GRAPH_ADDR_MASK));
00236 
00237     <span class="comment">//</span>
00238     <span class="comment">// Change the Set/Reset register to be all set.</span>
00239     <span class="comment">//</span>
00240     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00241                       MAKEWORD(IND_SET_RESET, 0x07));
00242 
00243     <span class="comment">//</span>
00244     <span class="comment">// Use specified pixel positions.</span>
00245     <span class="comment">//</span>
00246     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00247                       MAKEWORD(IND_BIT_MASK, BitMask));
00248 
00249     <span class="comment">//</span>
00250     <span class="comment">// Set up to write data without interacting with the latches.</span>
00251     <span class="comment">//</span>
00252     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00253                       MAKEWORD(IND_DATA_ROTATE, DR_SET));
00254 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="port.c::GetHardwareScrollReg" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID GetHardwareScrollReg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>deviceExtension</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d1/port_8c-source.html#l00031">31</a> of file <a class="el" href="../../d7/d1/port_8c-source.html">port.c</a>.
<p>
References <a class="el" href="../../d7/d8/fsvga_8h.html#a66a18">CRTCAddressPortColor</a>, <a class="el" href="../../d7/d8/fsvga_8h.html#a66a19">CRTCDataPortColor</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00132">_DEVICE_EXTENSION::DeviceRegisters</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00153">_DEVICE_EXTENSION::EmulateInfo</a>, <a class="el" href="../../d2/d3/fetypes_8h.html#a457a417">high</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00137">IND_LINE_COMPARE</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00138">IND_LINE_COMPARE8</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00139">IND_LINE_COMPARE9</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00135">IND_START_ADRS_H</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00136">IND_START_ADRS_L</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00091">_EMULATE_BUFFER_INFORMATION::LineCompare</a>, <a class="el" href="../../d2/d3/fetypes_8h.html#a457a418">low</a>, and <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00090">_EMULATE_BUFFER_INFORMATION::StartAddress</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00387">FsgVgaInitializeHWFlags()</a>.
<p>
<pre class="fragment"><div>00037                    :
00038 
00039     This routine gets <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> hardware scrolls <span class="keyword">register</span> value.
00040 
00041 Arguments:
00042 
00043 Return Value:
00044 
00045 --*/
00046 
00047 {
00048     UCHAR <a class="code" href="../../d2/d3/fetypes_8h.html#a457a418">low</a>;
00049     UCHAR <a class="code" href="../../d2/d3/fetypes_8h.html#a457a417">high</a>;
00050     UCHAR mid;
00051 
00052     WRITE_PORT_UCHAR(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[CRTCAddressPortColor],
00053                       IND_START_ADRS_L);
00054     <a class="code" href="../../d2/d3/fetypes_8h.html#a457a418">low</a> = READ_PORT_UCHAR(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[CRTCDataPortColor]);
00055 
00056     WRITE_PORT_UCHAR(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[CRTCAddressPortColor],
00057                       IND_START_ADRS_H);
00058     <a class="code" href="../../d2/d3/fetypes_8h.html#a457a417">high</a> = READ_PORT_UCHAR(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[CRTCDataPortColor]);
00059 
00060     deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o0">StartAddress</a> = MAKEWORD(low, high);
00061 
00062     WRITE_PORT_UCHAR(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[CRTCAddressPortColor],
00063                       IND_LINE_COMPARE);
00064     <a class="code" href="../../d2/d3/fetypes_8h.html#a457a418">low</a> = READ_PORT_UCHAR(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[CRTCDataPortColor]);
00065 
00066     WRITE_PORT_UCHAR(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[CRTCAddressPortColor],
00067                       IND_LINE_COMPARE8);
00068     mid = READ_PORT_UCHAR(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[CRTCDataPortColor]);
00069     mid = (mid &gt;&gt; 4) &amp; 1;
00070 
00071     WRITE_PORT_UCHAR(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[CRTCAddressPortColor],
00072                       IND_LINE_COMPARE9);
00073     <a class="code" href="../../d2/d3/fetypes_8h.html#a457a417">high</a> = READ_PORT_UCHAR(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[CRTCDataPortColor]);
00074     <a class="code" href="../../d2/d3/fetypes_8h.html#a457a417">high</a> = (<a class="code" href="../../d2/d3/fetypes_8h.html#a457a417">high</a> &gt;&gt; 5) &amp; 2;
00075 
00076     <a class="code" href="../../d2/d3/fetypes_8h.html#a457a417">high</a> |= mid;
00077     deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o1">LineCompare</a> = MAKEWORD(low, high);
00078 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="port.c::set_opaque_bkgnd_proc" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID set_opaque_bkgnd_proc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>deviceExtension</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>FrameBuffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>WORD&nbsp;</td>
          <td class="mdname" nowrap> <em>Attributes</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d1/port_8c-source.html#l00186">186</a> of file <a class="el" href="../../d7/d1/port_8c-source.html">port.c</a>.
<p>
References <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">BYTE</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00102">_EMULATE_BUFFER_INFORMATION::ColorBg</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00101">_EMULATE_BUFFER_INFORMATION::ColorFg</a>, <a class="el" href="../../d7/d1/port_8c-source.html#l00257">ColorSetDirect()</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00153">_DEVICE_EXTENSION::EmulateInfo</a>, and <a class="el" href="../../d6/d8/ntrtlp_8h-source.html#l00183">LOBYTE</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00813">FsgWriteToScreen()</a>, and <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00915">FsgWriteToScreenCommonLVB()</a>.
<p>
<pre class="fragment"><div>00203 {
00204     <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> ColorFg = <a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(Attributes) &amp; 0x0f;
00205     <a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> ColorBg = (<a class="code" href="../../d5/d9/ntrtlp_8h.html#a4">LOBYTE</a>(Attributes) &amp; 0xf0) &gt;&gt; 4;
00206 
00207     <span class="keywordflow">if</span> (Attributes &amp; COMMON_LVB_REVERSE_VIDEO)
00208     {
00209         Attributes = ColorBg;
00210         ColorBg = ColorFg;
00211         ColorFg = (<a class="code" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>)Attributes;
00212     }
00213 
00214     <span class="keywordflow">if</span> (deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o7">ColorFg</a> == ColorFg &amp;&amp;
00215         deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o8">ColorBg</a> == ColorBg)
00216         <span class="keywordflow">return</span>;
00217 
00218     deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o7">ColorFg</a> = ColorFg;
00219     deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o52">EmulateInfo</a>.<a class="code" href="../../d1/d3/struct__EMULATE__BUFFER__INFORMATION.html#o8">ColorBg</a> = ColorBg;
00220 
00221     <a class="code" href="../../d6/d2/port_8c.html#a6">ColorSetDirect</a>(deviceExtension, FrameBuffer, ColorFg, ColorBg);
00222 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="port.c::SetGRAMCopyMode" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID SetGRAMCopyMode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>deviceExtension</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d1/port_8c-source.html#l00121">121</a> of file <a class="el" href="../../d7/d1/port_8c-source.html">port.c</a>.
<p>
References <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00132">_DEVICE_EXTENSION::DeviceRegisters</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00178">DR_SET</a>, <a class="el" href="../../d7/d8/fsvga_8h.html#a66a20">GRAPHAddressPort</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00141">IND_COLOR_DONT_CARE</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00125">IND_DATA_ROTATE</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00127">IND_GRAPH_MODE</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00191">M_COLOR_READ</a>, and <a class="el" href="../../d2/d5/vga_8h-source.html#l00187">M_LATCH_WRITE</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00314">MoveGRAM()</a>.
<p>
<pre class="fragment"><div>00127                    :
00128 
00129     This routine sets <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> copy mode of graphics <span class="keyword">register</span>.
00130 
00131 Arguments:
00132 
00133 Return Value:
00134 
00135 --*/
00136 
00137 {
00138     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00139                       MAKEWORD(IND_GRAPH_MODE, M_LATCH_WRITE+M_COLOR_READ));
00140 
00141     <span class="comment">//</span>
00142     <span class="comment">// Set up to write data without interacting with the latches.</span>
00143     <span class="comment">//</span>
00144     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00145                       MAKEWORD(IND_DATA_ROTATE, DR_SET));
00146 
00147     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00148                       MAKEWORD(IND_COLOR_DONT_CARE, 0));
00149 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="port.c::SetGRAMInvertMode" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID SetGRAMInvertMode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>deviceExtension</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d1/port_8c-source.html#l00152">152</a> of file <a class="el" href="../../d7/d1/port_8c-source.html">port.c</a>.
<p>
References <a class="el" href="../../d2/d5/vga_8h-source.html#l00205">BIT_MASK_DEFAULT</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00132">_DEVICE_EXTENSION::DeviceRegisters</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00181">DR_XOR</a>, <a class="el" href="../../d7/d8/fsvga_8h.html#a66a20">GRAPHAddressPort</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00129">IND_BIT_MASK</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00141">IND_COLOR_DONT_CARE</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00125">IND_DATA_ROTATE</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00127">IND_GRAPH_MODE</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00140">IND_SET_RESET</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00189">M_AND_WRITE</a>, and <a class="el" href="../../d2/d5/vga_8h-source.html#l00191">M_COLOR_READ</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00702">FsgInvertCursor()</a>, and <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00609">FsgReverseMousePointer()</a>.
<p>
<pre class="fragment"><div>00158                    :
00159 
00160     This routine sets <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> invert mode of graphics <span class="keyword">register</span>.
00161 
00162 Arguments:
00163 
00164 Return Value:
00165 
00166 --*/
00167 
00168 {
00169     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00170                       MAKEWORD(IND_GRAPH_MODE, M_AND_WRITE+M_COLOR_READ));
00171 
00172     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00173                       MAKEWORD(IND_DATA_ROTATE, DR_XOR));
00174 
00175     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00176                       MAKEWORD(IND_BIT_MASK, BIT_MASK_DEFAULT));
00177 
00178     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00179                       MAKEWORD(IND_COLOR_DONT_CARE, 0));
00180 
00181     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00182                       MAKEWORD(IND_SET_RESET, 0xff));
00183 }

</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="port.c::SetGRAMWriteMode" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID SetGRAMWriteMode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d3/struct__DEVICE__EXTENSION.html">PDEVICE_EXTENSION</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>deviceExtension</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d1/port_8c-source.html#l00081">81</a> of file <a class="el" href="../../d7/d1/port_8c-source.html">port.c</a>.
<p>
References <a class="el" href="../../d2/d5/vga_8h-source.html#l00205">BIT_MASK_DEFAULT</a>, <a class="el" href="../../d8/d7/fsvga_8h-source.html#l00132">_DEVICE_EXTENSION::DeviceRegisters</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00178">DR_SET</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00171">GRAPH_ADDR_MASK</a>, <a class="el" href="../../d7/d8/fsvga_8h.html#a66a20">GRAPHAddressPort</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00129">IND_BIT_MASK</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00125">IND_DATA_ROTATE</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00127">IND_GRAPH_MODE</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00131">IND_MAP_MASK</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00190">M_DATA_READ</a>, <a class="el" href="../../d2/d5/vga_8h-source.html#l00186">M_PROC_WRITE</a>, and <a class="el" href="../../d7/d8/fsvga_8h.html#a66a21">SEQUAddressPort</a>.
<p>
Referenced by <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00702">FsgInvertCursor()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00609">FsgReverseMousePointer()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00387">FsgVgaInitializeHWFlags()</a>, <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00915">FsgWriteToScreenCommonLVB()</a>, and <a class="el" href="../../d3/d1/drawscrn_8c-source.html#l00314">MoveGRAM()</a>.
<p>
<pre class="fragment"><div>00087                    :
00088 
00089     This routine sets <a class="code" href="../../d7/d1/genuedef_8c.html#a2">the</a> write mode of graphics <span class="keyword">register</span>.
00090 
00091 Arguments:
00092 
00093 Return Value:
00094 
00095 --*/
00096 
00097 {
00098     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00099                       MAKEWORD(IND_GRAPH_MODE, M_PROC_WRITE+M_DATA_READ));
00100 
00101     <span class="comment">//</span>
00102     <span class="comment">// Set up to write data without interacting with the latches.</span>
00103     <span class="comment">//</span>
00104     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00105                       MAKEWORD(IND_DATA_ROTATE, DR_SET));
00106 
00107     <span class="comment">//</span>
00108     <span class="comment">// Enable all the available EGA planes.</span>
00109     <span class="comment">//</span>
00110     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[SEQUAddressPort],
00111                       MAKEWORD(IND_MAP_MASK, GRAPH_ADDR_MASK));
00112     <span class="comment">//</span>
00113     <span class="comment">// Use all pixel positions.</span>
00114     <span class="comment">//</span>
00115     WRITE_PORT_USHORT(deviceExtension-&gt;<a class="code" href="../../d8/d3/struct__DEVICE__EXTENSION.html#o48">DeviceRegisters</a>[GRAPHAddressPort],
00116                       MAKEWORD(IND_BIT_MASK, BIT_MASK_DEFAULT));
00117 
00118 }

</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:45:17 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: w32/ntuser/kernel/misc.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>misc.c File Reference</h1><code>#include "<a class="el" href="../../d1/d3/w32_2ntuser_2kernel_2precomp_8h-source.html">precomp.h</a>"</code><br>

<p>
<a href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a1">RemoteConnect</a> (IN <a class="el" href="../../d3/d8/struct__DOCONNECTDATA.html">PDOCONNECTDATA</a> pDoConnectData, IN ULONG DisplayDriverNameLength, IN PWCHAR DisplayDriverName)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a2">xxxRemoteDisconnect</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a3">xxxRemoteReconnect</a> (IN <a class="el" href="../../d4/d8/struct__DORECONNECTDATA.html">PDORECONNECTDATA</a> pDoReconnectData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a4">RemoteLogoff</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a5">xxxRemoteStopScreenUpdates</a> (BOOL fDisableGraphics)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>VOID&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a6">xxxPushKeyEvent</a> (<a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> bVk, <a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a> bScan, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> <a class="el" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a>, <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> dwExtraInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a7">RemoteThinwireStats</a> (OUT PVOID Stats)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a8">RemoteNtSecurity</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a9">xxxRemoteShadowSetup</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a10">RemoteShadowStart</a> (IN PVOID pThinwireData, ULONG ThinwireDataLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a11">xxxRemoteShadowStop</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a12">RemoteShadowCleanup</a> (IN PVOID pThinwireData, ULONG ThinwireDataLength)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a13">xxxRemotePassthruEnable</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a14">RemotePassthruDisable</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>NTSTATUS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a15">CtxDisplayIOCtl</a> (ULONG DisplayIOCtlFlags, PUCHAR pDisplayIOCtlData, ULONG cbDisplayIOCtlData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a16">RemoteConnectState</a> (VOID)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>BOOL&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a17">_GetWinStationInfo</a> (WSINFO *pWsInfo)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>CACHE_STATISTICS&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a0">ThinWireCache</a></td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a17" doxytag="w32/ntuser/kernel/misc.c::_GetWinStationInfo" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> BOOL _GetWinStationInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">WSINFO *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pWsInfo</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00872">872</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l01833">CheckCritIn</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00147">DATAALIGN</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00929">gWinStationInfo</a>, <a class="el" href="../../d0/d4/probe_8c-source.html#l00034">ProbeForWrite()</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00874 {
00875     <a class="code" href="../../d4/d1/userk_8h.html#a154">CheckCritIn</a>();
00876 
00877     <span class="keywordflow">try</span> {
00878 
00879         <a class="code" href="../../d5/d8/ex_8h.html#a259">ProbeForWrite</a>(pWsInfo, <span class="keyword">sizeof</span>(gWinStationInfo), DATAALIGN);
00880         RtlCopyMemory(pWsInfo, &amp;gWinStationInfo, <span class="keyword">sizeof</span>(gWinStationInfo));
00881 
00882     } except (W32ExceptionHandler(FALSE, RIP_WARNING)) {
00883         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00884     }
00885 
00886     <span class="keywordflow">return</span> <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00887 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="w32/ntuser/kernel/misc.c::CtxDisplayIOCtl" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS CtxDisplayIOCtl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>DisplayIOCtlFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>PUCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>pDisplayIOCtlData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>cbDisplayIOCtlData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00814">814</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00464">gpDispInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02094">tagDISPLAYINFO::hDev</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l01634">RemoteRedrawRectangle()</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l07427">TRACE_HYDAPI</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00615">NtUserCtxDisplayIOCtl()</a>.
<p>
<pre class="fragment"><div>00818 {
00819     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fResult;
00820 
00821     <a class="code" href="../../d4/d1/userk_8h.html#a777">TRACE_HYDAPI</a>((<span class="stringliteral">"CtxDisplayIOCtl\n"</span>));
00822 
00823     fResult = bDrvDisplayIOCtl(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o0">hDev</a>, pDisplayIOCtlData, cbDisplayIOCtlData);
00824 
00825     <span class="keywordflow">if</span> (!fResult) {
00826         <span class="keywordflow">return</span> STATUS_CTX_BAD_VIDEO_MODE;
00827     }
00828 
00829     <span class="keywordflow">if</span> ((DisplayIOCtlFlags &amp; DISPLAY_IOCTL_FLAG_REDRAW)) {
00830         <a class="code" href="../../d4/d1/userk_8h.html#a2103">RemoteRedrawRectangle</a>(0,0,0xffff,0xffff);
00831     }
00832 
00833     <span class="keywordflow">return</span> STATUS_SUCCESS;
00834 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="w32/ntuser/kernel/misc.c::RemoteConnect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RemoteConnect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d3/d8/struct__DOCONNECTDATA.html">PDOCONNECTDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pDoConnectData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>DisplayDriverNameLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>IN PWCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>DisplayDriverName</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00020">20</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d5/d7/ex_8c-source.html#l00346">CreateKernelEvent()</a>, <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00953">gbClientDoubleClickSupport</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00965">gbConnected</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00932">gbRemoteSession</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00923">gbVideoInitialized</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00954">gfEnableWindowsKey</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00942">ghRemoteBeepChannel</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00944">ghRemoteKeyboardChannel</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00941">ghRemoteMouseChannel</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00945">ghRemoteThinwireChannel</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00940">ghRemoteVideoChannel</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00958">gpevtDesktopDestroyed</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00943">gpRemoteBeepDevice</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00972">gpThinWireCache</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00946">gRemoteClientKeyboardType</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00967">gstrBaseWinStationName</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00970">gThinwireFileObject</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00969">gVideoFileObject</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00929">gWinStationInfo</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07386">HH_REMOTECONNECT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07404">HYDRA_HINT</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l01738">InitLoadResources()</a>, <a class="el" href="../../d0/d6/kernel_2server_8c-source.html#l01893">InitVideo()</a>, <a class="el" href="../../d5/d5/iosubs_8c-source.html#l07247">IoGetRelatedDeviceObject()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00095">ISCSRSS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00624">KernelMode</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d8/d0/w32_2ntuser_2kernel_2init_8c-source.html#l01820">LW_BrushInit()</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d8/d0/obref_8c-source.html#l00542">ObReferenceObjectByHandle()</a>, <a class="el" href="../../d0/d7/halvprnt_8c-source.html#l00031">PBYTE</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1140">PDOCONNECTDATA</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00018">ThinWireCache</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07427">TRACE_HYDAPI</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00521">NtUserRemoteConnect()</a>.
<p>
<pre class="fragment"><div>00024 {
00025     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>          <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
00026     <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a>      pFileObject = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00027     <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>    pDeviceObject = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00028     PWCHAR            pSep;
00029 
00030     <a class="code" href="../../d4/d1/userk_8h.html#a777">TRACE_HYDAPI</a>((<span class="stringliteral">"RemoteConnect: display %ws\n"</span>, DisplayDriverName));
00031 
00032     <a class="code" href="../../d4/d1/userk_8h.html#a773">HYDRA_HINT</a>(HH_REMOTECONNECT);
00033 
00034     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>());
00035 
00036     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a354">gpThinWireCache</a> = &amp;<a class="code" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a0">ThinWireCache</a>;
00037 
00038     <span class="keywordflow">if</span> (pDoConnectData-&gt;fMouse) {
00039         <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a334">ghRemoteMouseChannel</a> = pDoConnectData-&gt;IcaMouseChannel;
00040     } <span class="keywordflow">else</span> {
00041         <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a334">ghRemoteMouseChannel</a> = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00042     }
00043 
00044     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a333">ghRemoteVideoChannel</a> = pDoConnectData-&gt;IcaVideoChannel;
00045     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a335">ghRemoteBeepChannel</a> = pDoConnectData-&gt;IcaBeepChannel;
00046     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a337">ghRemoteKeyboardChannel</a> = pDoConnectData-&gt;IcaKeyboardChannel;
00047     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a338">ghRemoteThinwireChannel</a> = pDoConnectData-&gt;IcaThinwireChannel;
00048 
00049     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a339">gRemoteClientKeyboardType</a> = pDoConnectData-&gt;ClientKeyboardType;
00050 
00051     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a343">gbClientDoubleClickSupport</a> = pDoConnectData-&gt;fClientDoubleClickSupport;
00052 
00053     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a344">gfEnableWindowsKey</a> = pDoConnectData-&gt;fEnableWindowsKey;
00054 
00055     RtlCopyMemory(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a326">gWinStationInfo</a>.ProtocolName, pDoConnectData-&gt;ProtocolName,
00056                   WPROTOCOLNAME_LENGTH * <span class="keyword">sizeof</span>(WCHAR));
00057 
00058     RtlCopyMemory(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a326">gWinStationInfo</a>.AudioDriverName, pDoConnectData-&gt;AudioDriverName,
00059                   WAUDIONAME_LENGTH * <span class="keyword">sizeof</span>(WCHAR));
00060 
00061     RtlZeroMemory(gstrBaseWinStationName,
00062                   WINSTATIONNAME_LENGTH * <span class="keyword">sizeof</span>(WCHAR));
00063 
00064     RtlCopyMemory(gstrBaseWinStationName, pDoConnectData-&gt;WinStationName,
00065                   <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(WINSTATIONNAME_LENGTH * <span class="keyword">sizeof</span>(WCHAR), <span class="keyword">sizeof</span>(pDoConnectData-&gt;WinStationName)));
00066 
00067     <span class="keywordflow">if</span> (pSep = wcschr(gstrBaseWinStationName, L<span class="charliteral">'#'</span>))
00068         *pSep = UNICODE_NULL;
00069 
00070     <span class="comment">/*</span>
00071 <span class="comment">     * Create the event that is signaled when a desktop does away</span>
00072 <span class="comment">     */</span>
00073     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a346">gpevtDesktopDestroyed</a> = <a class="code" href="../../d4/d1/userk_8h.html#a965">CreateKernelEvent</a>(SynchronizationEvent, FALSE);
00074     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a346">gpevtDesktopDestroyed</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00075         RIPMSG0(RIP_WARNING, <span class="stringliteral">"RemoteConnect couldn't create gpevtDesktopDestroyed"</span>);
00076         <span class="keywordflow">return</span> STATUS_NO_MEMORY;
00077     }
00078 
00079     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a350">gbConnected</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00080 
00081     <span class="comment">/*</span>
00082 <span class="comment">     * WinStations must have the video device handle passed to them.</span>
00083 <span class="comment">     */</span>
00084     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a328">gbRemoteSession</a> &amp;&amp; !<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a352">gVideoFileObject</a>) {
00085 
00086         <a class="code" href="../../d9/d1/struct__FILE__OBJECT.html">PFILE_OBJECT</a>    pFileObject = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00087         <a class="code" href="../../d8/d4/struct__DEVICE__OBJECT.html">PDEVICE_OBJECT</a>  pDeviceObject = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>;
00088 
00089         <span class="comment">//</span>
00090         <span class="comment">// Dereference the file handle</span>
00091         <span class="comment">// and obtain a pointer to the device object for the handle.</span>
00092         <span class="comment">//</span>
00093 
00094         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d1/obref_8c.html#a4">ObReferenceObjectByHandle</a>(ghRemoteVideoChannel,
00095                                            0,
00096                                            NULL,
00097                                            KernelMode,
00098                                            (PVOID*)&amp;pFileObject,
00099                                            NULL);
00100         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00101 
00102             <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a352">gVideoFileObject</a> = pFileObject;
00103 
00104             <span class="comment">//</span>
00105             <span class="comment">// Get a pointer to the device object for this file.</span>
00106             <span class="comment">//</span>
00107             pDeviceObject = <a class="code" href="../../d4/d6/iosubs_8c.html#a76">IoGetRelatedDeviceObject</a>(pFileObject);
00108 
00109             <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d1/obref_8c.html#a4">ObReferenceObjectByHandle</a>(ghRemoteThinwireChannel,
00110                                                0,
00111                                                NULL,
00112                                                KernelMode,
00113                                                (PVOID*)&amp;gThinwireFileObject,
00114                                                NULL);
00115 
00116             <span class="comment">/*</span>
00117 <span class="comment">             * This must be done before any thinwire data.</span>
00118 <span class="comment">             */</span>
00119             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00120 
00121                 <span class="keywordflow">if</span> (!GreMultiUserInitSession(ghRemoteThinwireChannel,
00122                                              (PBYTE)gpThinWireCache,
00123                                              gVideoFileObject,
00124                                              gThinwireFileObject,
00125                                              DisplayDriverNameLength,
00126                                              DisplayDriverName)) {
00127                     RIPMSG0(RIP_WARNING, <span class="stringliteral">"UserInit: GreMultiUserInitSession failed"</span>);
00128                     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_UNSUCCESSFUL;
00129                 } <span class="keywordflow">else</span> {
00130 
00131                     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> BytesReturned;
00132 
00133                     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = GreDeviceIoControl( pDeviceObject,
00134                                  IOCTL_VIDEO_ICA_ENABLE_GRAPHICS,
00135                                  NULL,
00136                                  0,
00137                                  NULL,
00138                                  0,
00139                                  &amp;BytesReturned);
00140                     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00141                         RIPMSG1(RIP_WARNING, <span class="stringliteral">"UserInit: Enable graphics status %08lx"</span>,
00142                                 Status);
00143                     }
00144                 }
00145             }
00146         }
00147     }
00148 
00149     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00150         RIPMSG0(RIP_WARNING, <span class="stringliteral">"RemoteConnect failed"</span>);
00151         <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00152     }
00153 
00154     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d1/userk_8h.html#a1264">InitVideo</a>(FALSE) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00155         <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a350">gbConnected</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00156         RIPMSG0(RIP_WARNING, <span class="stringliteral">"InitVideo failed"</span>);
00157         <span class="keywordflow">return</span> STATUS_UNSUCCESSFUL;
00158     }
00159 
00160     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a1844">LW_BrushInit</a>()) {
00161         RIPMSG0(RIP_WARNING, <span class="stringliteral">"LW_BrushInit failed"</span>);
00162         <span class="keywordflow">return</span> STATUS_NO_MEMORY;
00163     }
00164 
00165     <a class="code" href="../../d9/d6/kernel_2server_8c.html#a71">InitLoadResources</a>();
00166 
00167     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d7/d1/obref_8c.html#a4">ObReferenceObjectByHandle</a>(ghRemoteBeepChannel,
00168                                        0,
00169                                        NULL,
00170                                        KernelMode,
00171                                        (PVOID*)&amp;gpRemoteBeepDevice,
00172                                        NULL);
00173 
00174     <span class="comment">/*</span>
00175 <span class="comment">     * video is initialized at this point</span>
00176 <span class="comment">     */</span>
00177     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00178         <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a323">gbVideoInitialized</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00179     } <span class="keywordflow">else</span> {
00180         RIPMSG0(RIP_WARNING, <span class="stringliteral">"Bad Remote Beep Channel"</span>);
00181     }
00182 
00183     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00184 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="w32/ntuser/kernel/misc.c::RemoteConnectState" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> RemoteConnectState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00843">843</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00965">gbConnected</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00948">gbExitInProgress</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00932">gbRemoteSession</a>, and <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00923">gbVideoInitialized</a>.
<p>
<pre class="fragment"><div>00845 {
00846     <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> state = 0;
00847 
00848     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a328">gbRemoteSession</a>) {
00849 
00850         state = CTX_W32_CONNECT_STATE_CONSOLE;
00851 
00852     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a323">gbVideoInitialized</a>) {
00853 
00854         state = CTX_W32_CONNECT_STATE_IDLE;
00855 
00856     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a340">gbExitInProgress</a>) {
00857 
00858         state = CTX_W32_CONNECT_STATE_EXIT_IN_PROGRESS;
00859 
00860     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a350">gbConnected</a>) {
00861 
00862         state = CTX_W32_CONNECT_STATE_CONNECTED;
00863 
00864     } <span class="keywordflow">else</span> {
00865         state = CTX_W32_CONNECT_STATE_DISCONNECTED;
00866     }
00867 
00868     <span class="keywordflow">return</span> state;
00869 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="w32/ntuser/kernel/misc.c::RemoteLogoff" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RemoteLogoff           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00415">415</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00981">_PostMessage()</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00071">gspwndLogonNotify</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07389">HH_REMOTELOGOFF</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07404">HYDRA_HINT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00095">ISCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l07427">TRACE_HYDAPI</a>.
<p>
<pre class="fragment"><div>00417 {
00418     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
00419 
00420     <a class="code" href="../../d4/d1/userk_8h.html#a777">TRACE_HYDAPI</a>((<span class="stringliteral">"RemoteLogoff\n"</span>));
00421 
00422     <span class="comment">/*</span>
00423 <span class="comment">     * Only allow CSRSS to do this</span>
00424 <span class="comment">     */</span>
00425     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>() || !<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00426         <span class="keywordflow">return</span> STATUS_ACCESS_DENIED;
00427     }
00428 
00429     <a class="code" href="../../d4/d1/userk_8h.html#a773">HYDRA_HINT</a>(HH_REMOTELOGOFF);
00430 
00431     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>());
00432 
00433     <span class="comment">/*</span>
00434 <span class="comment">     * Tell winlogon about the logoff</span>
00435 <span class="comment">     */</span>
00436     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a17">gspwndLogonNotify</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00437         <a class="code" href="../../d4/d1/userk_8h.html#a1642">_PostMessage</a>(gspwndLogonNotify, WM_LOGONNOTIFY,
00438                      SESSION_LOGOFF, EWX_LOGOFF | EWX_FORCE);
00439     }
00440 
00441     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00442 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="w32/ntuser/kernel/misc.c::RemoteNtSecurity" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RemoteNtSecurity           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00582">582</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00981">_PostMessage()</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00071">gspwndLogonNotify</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00095">ISCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l07427">TRACE_HYDAPI</a>.
<p>
<pre class="fragment"><div>00584 {
00585     <a class="code" href="../../d4/d1/userk_8h.html#a777">TRACE_HYDAPI</a>((<span class="stringliteral">"RemoteNtSecurity\n"</span>));
00586 
00587     <span class="comment">/*</span>
00588 <span class="comment">     * Only allow CSRSS to do this</span>
00589 <span class="comment">     */</span>
00590     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>() || !<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00591         <span class="keywordflow">return</span> STATUS_ACCESS_DENIED;
00592     }
00593 
00594     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>());
00595 
00596     UserAssert(gspwndLogonNotify != NULL);
00597 
00598     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a17">gspwndLogonNotify</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00599         <a class="code" href="../../d4/d1/userk_8h.html#a1642">_PostMessage</a>(gspwndLogonNotify, WM_HOTKEY, 0, 0);
00600     }
00601     <span class="keywordflow">return</span> STATUS_SUCCESS;
00602 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="w32/ntuser/kernel/misc.c::RemotePassthruDisable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RemotePassthruDisable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00781">781</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00965">gbConnected</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00945">ghRemoteThinwireChannel</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00964">gnShadowers</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00464">gpDispInfo</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00970">gThinwireFileObject</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02094">tagDISPLAYINFO::hDev</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00095">ISCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l01675">RemoteRedrawScreen()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07427">TRACE_HYDAPI</a>, and <a class="el" href="../../d7/d7/ntinput_8c-source.html#l02985">UpdateKeyLights()</a>.
<p>
<pre class="fragment"><div>00783 {
00784     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fResult;
00785 
00786     <a class="code" href="../../d4/d1/userk_8h.html#a777">TRACE_HYDAPI</a>((<span class="stringliteral">"RemotePassthruDisable\n"</span>));
00787 
00788     <span class="comment">/*</span>
00789 <span class="comment">     * Only allow CSRSS to do this</span>
00790 <span class="comment">     */</span>
00791     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>() || !<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00792         <span class="keywordflow">return</span> STATUS_ACCESS_DENIED;
00793     }
00794 
00795     UserAssert(gnShadowers == 0);
00796     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>());
00797 
00798     fResult = bDrvReconnect(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o0">hDev</a>, ghRemoteThinwireChannel,
00799                             gThinwireFileObject);
00800     <span class="keywordflow">if</span> (!fResult) {
00801         <span class="keywordflow">return</span> STATUS_CTX_BAD_VIDEO_MODE;
00802     }
00803 
00804     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a350">gbConnected</a>) {
00805         <a class="code" href="../../d4/d1/userk_8h.html#a2104">RemoteRedrawScreen</a>();
00806         <a class="code" href="../../d4/d1/userk_8h.html#a1180">UpdateKeyLights</a>(FALSE); <span class="comment">// Make sure LED's are correct</span>
00807     }
00808 
00809     <span class="keywordflow">return</span> STATUS_SUCCESS;
00810 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="w32/ntuser/kernel/misc.c::RemoteShadowCleanup" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RemoteShadowCleanup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>pThinwireData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ThinwireDataLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00700">700</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00965">gbConnected</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00964">gnShadowers</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00464">gpDispInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02094">tagDISPLAYINFO::hDev</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00095">ISCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l01675">RemoteRedrawScreen()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l07427">TRACE_HYDAPI</a>.
<p>
<pre class="fragment"><div>00703 {
00704     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
00705 
00706     <a class="code" href="../../d4/d1/userk_8h.html#a777">TRACE_HYDAPI</a>((<span class="stringliteral">"RemoteShadowCleanup\n"</span>));
00707 
00708     <span class="comment">/*</span>
00709 <span class="comment">     * Only allow CSRSS to do this</span>
00710 <span class="comment">     */</span>
00711     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>() || !<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00712         <span class="keywordflow">return</span> STATUS_ACCESS_DENIED;
00713     }
00714 
00715     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>());
00716 
00717     <span class="comment">/*</span>
00718 <span class="comment">     * Tell the Thinwire driver about it</span>
00719 <span class="comment">     */</span>
00720     bDrvShadowDisconnect(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o0">hDev</a>, pThinwireData,
00721                          ThinwireDataLength);
00722 
00723     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a349">gnShadowers</a> &gt; 0)
00724         <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a349">gnShadowers</a>--;
00725 
00726     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a349">gnShadowers</a> || <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a350">gbConnected</a>) {
00727         <a class="code" href="../../d4/d1/userk_8h.html#a2104">RemoteRedrawScreen</a>();
00728     }
00729     
00730     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00731 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="w32/ntuser/kernel/misc.c::RemoteShadowStart" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RemoteShadowStart           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN PVOID&nbsp;</td>
          <td class="mdname" nowrap> <em>pThinwireData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>ThinwireDataLength</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00635">635</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00464">gpDispInfo</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02094">tagDISPLAYINFO::hDev</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00095">ISCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l01675">RemoteRedrawScreen()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07427">TRACE_HYDAPI</a>, and <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>.
<p>
<pre class="fragment"><div>00638 {
00639     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> fResult;
00640     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
00641 
00642     <a class="code" href="../../d4/d1/userk_8h.html#a777">TRACE_HYDAPI</a>((<span class="stringliteral">"RemoteShadowStart\n"</span>));
00643 
00644     <span class="comment">/*</span>
00645 <span class="comment">     * Only allow CSRSS to do this</span>
00646 <span class="comment">     */</span>
00647     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>() || !<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00648         <span class="keywordflow">return</span> STATUS_ACCESS_DENIED;
00649     }
00650 
00651     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>());
00652 
00653     <span class="comment">/*</span>
00654 <span class="comment">     * Call thinwire driver and check for thinwire mode compatibility</span>
00655 <span class="comment">     */</span>
00656     fResult = bDrvShadowConnect(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o0">hDev</a>, pThinwireData,
00657                                 ThinwireDataLength);
00658 
00659     <span class="comment">// Although originally defined as BOOL, allow more meaningful return codes.</span>
00660     <span class="keywordflow">if</span> (!fResult) {
00661         <span class="keywordflow">return</span> STATUS_CTX_BAD_VIDEO_MODE;
00662     }
00663     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fResult != <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>) {
00664         <span class="keywordflow">return</span> fResult;
00665     }
00666 
00667     <a class="code" href="../../d4/d1/userk_8h.html#a2104">RemoteRedrawScreen</a>();
00668 
00669     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00670 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="w32/ntuser/kernel/misc.c::RemoteThinwireStats" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS RemoteThinwireStats           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OUT PVOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Stats</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00558">558</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d1/d4/perfuser_8c-source.html#l00052">DWORD</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00972">gpThinWireCache</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00095">ISCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, and <a class="el" href="../../d5/d0/userk_8h-source.html#l07427">TRACE_HYDAPI</a>.
<p>
<pre class="fragment"><div>00560 {
00561 <span class="keyword">static</span> <a class="code" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a> sThinwireStatsLength = <span class="keyword">sizeof</span>(CACHE_STATISTICS);
00562 
00563     <a class="code" href="../../d4/d1/userk_8h.html#a777">TRACE_HYDAPI</a>((<span class="stringliteral">"RemoteThinwireStats\n"</span>));
00564 
00565     <span class="comment">/*</span>
00566 <span class="comment">     * Only allow CSRSS to do this</span>
00567 <span class="comment">     */</span>
00568     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>() || !<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00569         <span class="keywordflow">return</span> STATUS_ACCESS_DENIED;
00570     }
00571 
00572     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>());
00573     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a354">gpThinWireCache</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00574         RtlCopyMemory(Stats, gpThinWireCache, sThinwireStatsLength);
00575         <span class="keywordflow">return</span> STATUS_SUCCESS;
00576     }
00577     <span class="keywordflow">return</span> STATUS_NO_SUCH_DEVICE;
00578 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="w32/ntuser/kernel/misc.c::xxxPushKeyEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VOID xxxPushKeyEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>bVk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d7/halvprnt_8c.html#a0">BYTE</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>bScan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d0/d5/perfuser_8c.html#a6">DWORD</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dwExtraInfo</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00536">536</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d4/d7/propapi_8h-source.html#l00043">dwFlags</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d0/d5/gettickc_8c-source.html#l00026">NtGetTickCount()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00064">USHORT</a>, <a class="el" href="../../d2/d7/hal_8h.html#a212">VOID()</a>, and <a class="el" href="../../d7/d7/ntinput_8c-source.html#l01338">xxxKeyEvent()</a>.
<p>
Referenced by <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00446">xxxRemoteStopScreenUpdates()</a>.
<p>
<pre class="fragment"><div>00541 {
00542     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a> usFlaggedVK;
00543 
00544     usFlaggedVK = (<a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a14">USHORT</a>)bVk;
00545 
00546     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; KEYEVENTF_KEYUP)
00547         usFlaggedVK |= KBDBREAK;
00548 
00549     <span class="comment">// IanJa: not all extended keys are numpad, but this seems to work.</span>
00550     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d8/propapi_8h.html#a34">dwFlags</a> &amp; KEYEVENTF_EXTENDEDKEY)
00551         usFlaggedVK |= KBDNUMPAD | KBDEXT;
00552 
00553     <a class="code" href="../../d4/d1/userk_8h.html#a1039">xxxKeyEvent</a>(usFlaggedVK, bScan, <a class="code" href="../../d9/d5/gettickc_8c.html#a0">NtGetTickCount</a>(), dwExtraInfo, FALSE);
00554 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="w32/ntuser/kernel/misc.c::xxxRemoteDisconnect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS xxxRemoteDisconnect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00188">188</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00981">_PostMessage()</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00965">gbConnected</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00945">ghRemoteThinwireChannel</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00964">gnShadowers</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00464">gpDispInfo</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00077">gpEventDiconnectDesktop</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00934">gspdeskDisconnect</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00071">gspwndLogonNotify</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00967">gstrBaseWinStationName</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00970">gThinwireFileObject</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02094">tagDISPLAYINFO::hDev</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07387">HH_REMOTEDISCONNECT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07404">HYDRA_HINT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00095">ISCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00624">KernelMode</a>, <a class="el" href="../../d2/d6/wait_8c-source.html#l00810">KeWaitForSingleObject()</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l01675">RemoteRedrawScreen()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07427">TRACE_HYDAPI</a>, <a class="el" href="../../d4/d9/ke_8h.html#a407a211">WrUserRequest</a>, and <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00446">xxxRemoteStopScreenUpdates()</a>.
<p>
<pre class="fragment"><div>00190 {
00191     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a>      <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
00192     LARGE_INTEGER li;
00193 
00194     <a class="code" href="../../d4/d1/userk_8h.html#a777">TRACE_HYDAPI</a>((<span class="stringliteral">"xxxRemoteDisconnect\n"</span>));
00195 
00196     <span class="comment">/*</span>
00197 <span class="comment">     * Only allow CSRSS to do this</span>
00198 <span class="comment">     */</span>
00199     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>() || !<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00200         <span class="keywordflow">return</span> STATUS_ACCESS_DENIED;
00201     }
00202 
00203     <a class="code" href="../../d4/d1/userk_8h.html#a773">HYDRA_HINT</a>(HH_REMOTEDISCONNECT);
00204 
00205     RtlZeroMemory(gstrBaseWinStationName,
00206                   WINSTATIONNAME_LENGTH * <span class="keyword">sizeof</span>(WCHAR));
00207 
00208     UserAssert(gbConnected);
00209 
00210     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a329">gspdeskDisconnect</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00211         <span class="comment">/*</span>
00212 <span class="comment">         * Convert dwMilliseconds to a relative-time(i.e.  negative)</span>
00213 <span class="comment">         * LARGE_INTEGER.  NT Base calls take time values in 100 nanosecond</span>
00214 <span class="comment">         * units. Timeout after 5 minutes.</span>
00215 <span class="comment">         */</span>
00216         li.QuadPart = Int32x32To64(-10000, 300000);
00217 
00218         <a class="code" href="../../d1/d7/wait_8c.html#a4">KeWaitForSingleObject</a>(gpEventDiconnectDesktop,
00219                               WrUserRequest,
00220                               KernelMode,
00221                               FALSE,
00222                               &amp;li);
00223     }
00224 
00225 
00226     <span class="comment">/*</span>
00227 <span class="comment">     * If the disconnected desktop has not yet be setup.  Do not do any</span>
00228 <span class="comment">     * disconnect processing.  It's better for the thinwire driver to try</span>
00229 <span class="comment">     * and write rather than for the transmit buffers to be freed (trap).</span>
00230 <span class="comment">     */</span>
00231     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a329">gspdeskDisconnect</a>) {
00232 
00233         <span class="comment">/*</span>
00234 <span class="comment">         * Blank the screen</span>
00235 <span class="comment">         *</span>
00236 <span class="comment">         * No need to stop graphics mode for disconnects</span>
00237 <span class="comment">         */</span>
00238         <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d4/d1/userk_8h.html#a2090">xxxRemoteStopScreenUpdates</a>(FALSE);
00239         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00240             <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00241         }
00242 
00243         <span class="comment">/*</span>
00244 <span class="comment">         * If there are any shadow connections, then redraw the screen now.</span>
00245 <span class="comment">         */</span>
00246         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a349">gnShadowers</a>)
00247             <a class="code" href="../../d4/d1/userk_8h.html#a2104">RemoteRedrawScreen</a>();
00248     } <span class="keywordflow">else</span> {
00249         RIPMSG0(RIP_WARNING, <span class="stringliteral">"xxxRemoteDisconnect failed. The disconnect desktop was not created"</span>);
00250         <span class="keywordflow">return</span> STATUS_UNSUCCESSFUL;
00251     }
00252 
00253     <span class="comment">/*</span>
00254 <span class="comment">     * Tell thinwire driver about this</span>
00255 <span class="comment">     */</span>
00256     bDrvDisconnect(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o0">hDev</a>, ghRemoteThinwireChannel,
00257                    gThinwireFileObject);
00258 
00259     
00260     <span class="comment">/*</span>
00261 <span class="comment">     * Tell winlogon about the disconnect</span>
00262 <span class="comment">     */</span>
00263     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a17">gspwndLogonNotify</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00264         <a class="code" href="../../d4/d1/userk_8h.html#a1642">_PostMessage</a>(gspwndLogonNotify, WM_LOGONNOTIFY, SESSION_DISCONNECTED, 0);
00265     }
00266 
00267     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a350">gbConnected</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a457">FALSE</a>;
00268 
00269     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00270 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="w32/ntuser/kernel/misc.c::xxxRemotePassthruEnable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS xxxRemotePassthruEnable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00735">735</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d8/d7/kbd_8c-source.html#l00157">gapulCvt_VK</a>, <a class="el" href="../../d8/d7/kbd_8c-source.html#l00146">gapulCvt_VK_84</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00965">gbConnected</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00974">ghKbdTblBase</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00944">ghRemoteKeyboardChannel</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00945">ghRemoteThinwireChannel</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00964">gnShadowers</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00464">gpDispInfo</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00189">gpKbdTbl</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00970">gThinwireFileObject</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00975">guKbdTblSize</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02094">tagDISPLAYINFO::hDev</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00095">ISCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07427">TRACE_HYDAPI</a>, and <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00446">xxxRemoteStopScreenUpdates()</a>.
<p>
<pre class="fragment"><div>00737 {
00738     IO_STATUS_BLOCK IoStatus;
00739 <span class="keyword">static</span> <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a> KeyboardType101;
00740 
00741     <a class="code" href="../../d4/d1/userk_8h.html#a777">TRACE_HYDAPI</a>((<span class="stringliteral">"xxxRemotePassthruEnable\n"</span>));
00742 
00743     <span class="comment">/*</span>
00744 <span class="comment">     * Only allow CSRSS to do this</span>
00745 <span class="comment">     */</span>
00746     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>() || !<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00747         <span class="keywordflow">return</span> STATUS_ACCESS_DENIED;
00748     }
00749 
00750     UserAssert(gbConnected);
00751     UserAssert(gnShadowers == 0);
00752     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>());
00753 
00754     KeyboardType101 = !(<a class="code" href="../../d7/d8/kbd_8c.html#a13">gapulCvt_VK</a> == <a class="code" href="../../d7/d8/kbd_8c.html#a11">gapulCvt_VK_84</a>);
00755 
00756     ZwDeviceIoControlFile(ghRemoteKeyboardChannel, NULL, NULL, NULL,
00757                           &amp;IoStatus, IOCTL_KEYBOARD_ICA_TYPE,
00758                           &amp;KeyboardType101, <span class="keyword">sizeof</span>(KeyboardType101),
00759                           NULL, 0);
00760 
00761     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a356">guKbdTblSize</a> != 0) {
00762         ZwDeviceIoControlFile(ghRemoteKeyboardChannel, NULL, NULL, NULL,
00763                               &amp;IoStatus, IOCTL_KEYBOARD_ICA_LAYOUT,
00764                               ghKbdTblBase, guKbdTblSize,
00765                               gpKbdTbl, 0);
00766     }
00767 
00768     <a class="code" href="../../d4/d1/userk_8h.html#a2090">xxxRemoteStopScreenUpdates</a>(FALSE);
00769 
00770     <span class="comment">/*</span>
00771 <span class="comment">     * Tell thinwire driver about this</span>
00772 <span class="comment">     */</span>
00773     bDrvDisconnect(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o0">hDev</a>, ghRemoteThinwireChannel,
00774                    gThinwireFileObject);
00775 
00776     <span class="keywordflow">return</span> STATUS_SUCCESS;
00777 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="w32/ntuser/kernel/misc.c::xxxRemoteReconnect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS xxxRemoteReconnect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IN <a class="el" href="../../d4/d8/struct__DORECONNECTDATA.html">PDORECONNECTDATA</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pDoReconnectData</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00273">273</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d6/d2/ntuser_2kernel_2input_8c-source.html#l00981">_PostMessage()</a>, <a class="el" href="../../d5/d4/aug98_2dll32_2icc__i386_8h-source.html#l00057">BOOL</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00953">gbClientDoubleClickSupport</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00965">gbConnected</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00954">gfEnableWindowsKey</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00945">ghRemoteThinwireChannel</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00964">gnShadowers</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00464">gpDispInfo</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00946">gRemoteClientKeyboardType</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00456">grpdeskRitInput</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00071">gspwndLogonNotify</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00967">gstrBaseWinStationName</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00970">gThinwireFileObject</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02094">tagDISPLAYINFO::hDev</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07388">HH_REMOTERECONNECT</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07404">HYDRA_HINT</a>, <a class="el" href="../../d4/d1/userk_8h.html#a1174">InitKeyboard()</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00095">ISCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00624">KernelMode</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d6/d3/acpitabl_8h-source.html#l00366">min</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d0/d0/client_2nt6_2user_8h.html#a1142">PDORECONNECTDATA</a>, <a class="el" href="../../d1/d9/client_2nt6_2user_8h-source.html#l02095">tagDISPLAYINFO::pmdev</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l01675">RemoteRedrawScreen()</a>, <a class="el" href="../../d3/d6/string_8c-source.html#l00148">RtlInitUnicodeString()</a>, <a class="el" href="../../d8/d0/ntuser_2kernel_2cursor_8c-source.html#l00676">SetPointer()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07427">TRACE_HYDAPI</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l02985">UpdateKeyLights()</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l00385">UpdateMouseInfo()</a>, <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00446">xxxRemoteStopScreenUpdates()</a>, and <a class="el" href="../../d4/d1/userk_8h.html#a1758">xxxUserChangeDisplaySettings()</a>.
<p>
<pre class="fragment"><div>00275 {
00276     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
00277     <a class="code" href="../../d4/d5/aug98_2dll32_2icc__i386_8h.html#a11">BOOL</a>     fResult;
00278     PWCHAR   pSep;
00279 
00280     <a class="code" href="../../d4/d1/userk_8h.html#a777">TRACE_HYDAPI</a>((<span class="stringliteral">"xxxRemoteReconnect\n"</span>));
00281 
00282     <span class="comment">/*</span>
00283 <span class="comment">     * Only allow CSRSS to do this</span>
00284 <span class="comment">     */</span>
00285     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>() || !<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00286         <span class="keywordflow">return</span> STATUS_ACCESS_DENIED;
00287     }
00288 
00289     <a class="code" href="../../d4/d1/userk_8h.html#a773">HYDRA_HINT</a>(HH_REMOTERECONNECT);
00290 
00291     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>());
00292 
00293     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a339">gRemoteClientKeyboardType</a> = pDoReconnectData-&gt;ClientKeyboardType;
00294 
00295     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a343">gbClientDoubleClickSupport</a> = pDoReconnectData-&gt;fClientDoubleClickSupport;
00296 
00297     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a344">gfEnableWindowsKey</a> = pDoReconnectData-&gt;fEnableWindowsKey;
00298 
00299     RtlCopyMemory(gstrBaseWinStationName, pDoReconnectData-&gt;WinStationName,
00300                   <a class="code" href="../../d5/d4/acpitabl_8h.html#a69">min</a>(WINSTATIONNAME_LENGTH * <span class="keyword">sizeof</span>(WCHAR), <span class="keyword">sizeof</span>(pDoReconnectData-&gt;WinStationName)));
00301 
00302     <span class="keywordflow">if</span> (pSep = wcschr(gstrBaseWinStationName, L<span class="charliteral">'#'</span>))
00303         *pSep = UNICODE_NULL;
00304 
00305     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a349">gnShadowers</a>)
00306         <a class="code" href="../../d4/d1/userk_8h.html#a2090">xxxRemoteStopScreenUpdates</a>(TRUE);
00307 
00308 
00309     <span class="comment">/*</span>
00310 <span class="comment">     * Call thinwire driver to check for thinwire mode compatibility</span>
00311 <span class="comment">     */</span>
00312     fResult = bDrvReconnect(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o0">hDev</a>, ghRemoteThinwireChannel,
00313                             gThinwireFileObject);
00314 
00315     <span class="keywordflow">if</span> (!fResult) {
00316         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a349">gnShadowers</a>)
00317             <a class="code" href="../../d4/d1/userk_8h.html#a2104">RemoteRedrawScreen</a>();
00318 
00319         <span class="keywordflow">return</span> STATUS_CTX_BAD_VIDEO_MODE;
00320     }
00321 
00322 
00323 
00324     <span class="comment">/*</span>
00325 <span class="comment">     *  If instructed to do so, change Display mode before Reconnecting.</span>
00326 <span class="comment">     *  Use display resolution information from Reconnect data.</span>
00327 <span class="comment">     */</span>
00328 
00329     <span class="keywordflow">if</span> (pDoReconnectData-&gt;fChangeDisplaySettings) {
00330        DEVMODEW devmodew;
00331        UNICODE_STRING ustrDeviceName;
00332        PDEVMODEW pDevmodew = &amp;devmodew;
00333 
00334        RtlZeroMemory(pDevmodew, <span class="keyword">sizeof</span>(DEVMODEW));
00335        pDevmodew-&gt;dmPelsHeight = pDoReconnectData-&gt;drPelsHeight;
00336        pDevmodew-&gt;dmPelsWidth  = pDoReconnectData-&gt;drPelsWidth;
00337        pDevmodew-&gt;dmBitsPerPel = pDoReconnectData-&gt;drBitsPerPel;
00338        pDevmodew-&gt;dmFields     = DM_BITSPERPEL  | DM_PELSWIDTH  | DM_PELSHEIGHT;
00339        pDevmodew-&gt;dmSize       = <span class="keyword">sizeof</span>(DEVMODEW);
00340 
00341        <a class="code" href="../../d2/d7/string_8c.html#a7">RtlInitUnicodeString</a>(&amp;ustrDeviceName, L<span class="stringliteral">"\\\\.\\DISPLAY1"</span>);
00342 
00343 
00344        <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d4/d1/userk_8h.html#a1758">xxxUserChangeDisplaySettings</a>(NULL, <span class="comment">//&amp;ustrDeviceName,</span>
00345                                             &amp;devmodew,
00346                                             NULL,
00347                                             grpdeskRitInput,
00348                                             0,
00349                                             NULL,
00350                                             KernelMode);
00351        <span class="comment">/*</span>
00352 <span class="comment">        * If Display settings change fails, let us disconnect the display driver</span>
00353 <span class="comment">        * as the reconnect is going to be failed anyway.</span>
00354 <span class="comment">        */</span>
00355 
00356 
00357        <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00358           bDrvDisconnect(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o0">hDev</a>, ghRemoteThinwireChannel, gThinwireFileObject);
00359           <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00360        }
00361 
00362        <span class="comment">/*</span>
00363 <span class="comment">        * Code in RemoteRedrawScreen() Expects gpDispInfo-&gt;pmdev to disabled, but</span>
00364 <span class="comment">        * it has been enabled by xxxUserChangeDisplaySettings(), so let's disable it</span>
00365 <span class="comment">        * before calling RemoteRedrawScreen().</span>
00366 <span class="comment">        */</span>
00367        DrvDisableMDEV(<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a179">gpDispInfo</a>-&gt;<a class="code" href="../../d9/d3/structtagDISPLAYINFO.html#o1">pmdev</a>, TRUE);
00368 
00369     }
00370 
00371     <span class="comment">/*</span>
00372 <span class="comment">     * Now we can swicth out from disconnected desktop, to normal</span>
00373 <span class="comment">     * desktop, in order to renable screen update.</span>
00374 <span class="comment">     */</span>
00375 
00376     <a class="code" href="../../d4/d1/userk_8h.html#a2104">RemoteRedrawScreen</a>();
00377 
00378     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a17">gspwndLogonNotify</a> != <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>) {
00379         <a class="code" href="../../d4/d1/userk_8h.html#a1642">_PostMessage</a>(gspwndLogonNotify, WM_LOGONNOTIFY,
00380                      SESSION_RECONNECTED, 0);
00381     }
00382 
00383     <span class="comment">/*</span>
00384 <span class="comment">     * We need to re-init the mouse, especially since we may not have had one before.</span>
00385 <span class="comment">     */</span>
00386     <a class="code" href="../../d6/d8/ntinput_8c.html#a40">UpdateMouseInfo</a>();
00387 
00388     <span class="comment">/*</span>
00389 <span class="comment">     * Re-init'ing the keyboard may not be as neccessary.  Possibly the keyboard</span>
00390 <span class="comment">     * attributes have changed.</span>
00391 <span class="comment">     */</span>
00392     <a class="code" href="../../d4/d1/userk_8h.html#a1174">InitKeyboard</a>();
00393 
00394     <span class="comment">/*</span>
00395 <span class="comment">     * This is neccessary to sync up the client and the host.</span>
00396 <span class="comment">     */</span>
00397     <a class="code" href="../../d4/d1/userk_8h.html#a1180">UpdateKeyLights</a>(FALSE);
00398 
00399     <a class="code" href="../../d4/d1/userk_8h.html#a1790">SetPointer</a>(TRUE);
00400 
00401     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a350">gbConnected</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00402 
00403 
00404 
00405     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00406 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="w32/ntuser/kernel/misc.c::xxxRemoteShadowSetup" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS xxxRemoteShadowSetup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00606">606</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00965">gbConnected</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00964">gnShadowers</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00095">ISCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07427">TRACE_HYDAPI</a>, and <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00446">xxxRemoteStopScreenUpdates()</a>.
<p>
<pre class="fragment"><div>00608 {
00609     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
00610 
00611     <a class="code" href="../../d4/d1/userk_8h.html#a777">TRACE_HYDAPI</a>((<span class="stringliteral">"xxxRemoteShadowSetup\n"</span>));
00612 
00613     <span class="comment">/*</span>
00614 <span class="comment">     * Only allow CSRSS to do this</span>
00615 <span class="comment">     */</span>
00616     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>() || !<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00617         <span class="keywordflow">return</span> STATUS_ACCESS_DENIED;
00618     }
00619 
00620     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>());
00621 
00622     <span class="comment">/*</span>
00623 <span class="comment">     * Blank the screen</span>
00624 <span class="comment">     */</span>
00625     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a349">gnShadowers</a> || <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a350">gbConnected</a>)
00626         <a class="code" href="../../d4/d1/userk_8h.html#a2090">xxxRemoteStopScreenUpdates</a>(FALSE);
00627 
00628     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a349">gnShadowers</a>++;
00629 
00630     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00631 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="w32/ntuser/kernel/misc.c::xxxRemoteShadowStop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS xxxRemoteShadowStop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">VOID&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00674">674</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00095">ISCSRSS</a>, <a class="el" href="../../d2/d9/inc_2user_8h-source.html#l03600">ISTS</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07427">TRACE_HYDAPI</a>, and <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00446">xxxRemoteStopScreenUpdates()</a>.
<p>
<pre class="fragment"><div>00676 {
00677     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
00678 
00679     <a class="code" href="../../d4/d1/userk_8h.html#a777">TRACE_HYDAPI</a>((<span class="stringliteral">"xxxRemoteShadowStop\n"</span>));
00680 
00681     <span class="comment">/*</span>
00682 <span class="comment">     * Only allow CSRSS to do this</span>
00683 <span class="comment">     */</span>
00684     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>() || !<a class="code" href="../../d1/d0/inc_2user_8h.html#a882">ISTS</a>()) {
00685         <span class="keywordflow">return</span> STATUS_ACCESS_DENIED;
00686     }
00687 
00688     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>());
00689 
00690     <span class="comment">/*</span>
00691 <span class="comment">     * Blank the screen</span>
00692 <span class="comment">     */</span>
00693     <a class="code" href="../../d4/d1/userk_8h.html#a2090">xxxRemoteStopScreenUpdates</a>(FALSE);
00694 
00695     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00696 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="w32/ntuser/kernel/misc.c::xxxRemoteStopScreenUpdates" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> NTSTATUS xxxRemoteStopScreenUpdates           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">BOOL&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>fDisableGraphics</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00446">446</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
References <a class="el" href="../../d5/d0/userk_8h-source.html#l01833">CheckCritIn</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00625">FALSE</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00950">gbFreezeScreenUpdates</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00940">ghRemoteVideoChannel</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00199">gptCursorAsync</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00456">grpdeskRitInput</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00934">gspdeskDisconnect</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00149">gwMKButtonState</a>, <a class="el" href="../../d4/d5/ntuser_2kernel_2globals_8c-source.html#l00150">gwMKCurrentButton</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l00095">ISCSRSS</a>, <a class="el" href="../../d3/d9/aw_8h-source.html#l00031">L</a>, <a class="el" href="../../d0/d3/access_8h-source.html#l00099">MOUSE_BUTTON_LEFT</a>, <a class="el" href="../../d0/d3/access_8h-source.html#l00100">MOUSE_BUTTON_RIGHT</a>, <a class="el" href="../../d6/d5/stierr_8h-source.html#l00030">NT_SUCCESS</a>, <a class="el" href="../../d0/d5/gettickc_8c-source.html#l00026">NtGetTickCount()</a>, <a class="el" href="../../d0/d6/iop_8h.html#a144">NTSTATUS()</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00023">NULL</a>, <a class="el" href="../../d9/d7/fullscr_8c-source.html#l01733">RemoteDisableScreen()</a>, <a class="el" href="../../d3/d0/cttoken_8c-source.html#l00135">Status</a>, <a class="el" href="../../d5/d0/userk_8h-source.html#l07427">TRACE_HYDAPI</a>, <a class="el" href="../../d7/d6/halmips_8h-source.html#l00626">TRUE</a>, <a class="el" href="../../d7/d7/ntinput_8c-source.html#l00472">xxxButtonEvent()</a>, and <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00536">xxxPushKeyEvent()</a>.
<p>
Referenced by <a class="el" href="../../d0/d9/kernel_2ntstubs_8c-source.html#l00599">NtUserRemoteStopScreenUpdates()</a>, <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00188">xxxRemoteDisconnect()</a>, <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00735">xxxRemotePassthruEnable()</a>, <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00273">xxxRemoteReconnect()</a>, <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00606">xxxRemoteShadowSetup()</a>, and <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00674">xxxRemoteShadowStop()</a>.
<p>
<pre class="fragment"><div>00448 {
00449     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = STATUS_SUCCESS;
00450     <a class="code" href="../../d0/d6/iop_8h.html#a144">NTSTATUS</a> SaveStatus = STATUS_SUCCESS;
00451     <span class="comment">//ULONG BytesReturned;</span>
00452     WORD NewButtonState;
00453 
00454     <a class="code" href="../../d4/d1/userk_8h.html#a777">TRACE_HYDAPI</a>((<span class="stringliteral">"xxxRemoteStopScreenUpdates fDisableGraphics %d\n"</span>, fDisableGraphics));
00455 
00456     <a class="code" href="../../d4/d1/userk_8h.html#a154">CheckCritIn</a>();
00457 
00458     UserAssert(<a class="code" href="../../d4/d1/userk_8h.html#a20">ISCSRSS</a>());
00459 
00460     <span class="comment">/*</span>
00461 <span class="comment">     * No need to do this multiple times.</span>
00462 <span class="comment">     */</span>
00463     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a341">gbFreezeScreenUpdates</a>)
00464         <span class="keywordflow">return</span> STATUS_SUCCESS;
00465 
00466     <span class="comment">/*</span>
00467 <span class="comment">     * This could be called directly from the command channel.</span>
00468 <span class="comment">     */</span>
00469     <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a329">gspdeskDisconnect</a>)
00470         <span class="keywordflow">return</span> STATUS_SUCCESS;
00471 
00472     <span class="comment">/*</span>
00473 <span class="comment">     * If not connected, forget it</span>
00474 <span class="comment">     */</span>
00475     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a333">ghRemoteVideoChannel</a> == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a3">NULL</a>)
00476         <span class="keywordflow">return</span> STATUS_NO_SUCH_DEVICE;
00477 
00478     <span class="comment">/*</span>
00479 <span class="comment">     * Mouse buttons up.</span>
00480 <span class="comment">     * (Ensures no mouse buttons are left in a down state)</span>
00481 <span class="comment">     */</span>
00482     NewButtonState = <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a53">gwMKButtonState</a> &amp; ~<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a54">gwMKCurrentButton</a>;
00483 
00484     <span class="keywordflow">if</span> ((NewButtonState &amp; <a class="code" href="../../d9/d3/access_8h.html#a24">MOUSE_BUTTON_LEFT</a>) != (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a53">gwMKButtonState</a> &amp; <a class="code" href="../../d9/d3/access_8h.html#a24">MOUSE_BUTTON_LEFT</a>)) {
00485         <a class="code" href="../../d4/d1/userk_8h.html#a1027">xxxButtonEvent</a>(MOUSE_BUTTON_LEFT, gptCursorAsync, TRUE, <a class="code" href="../../d9/d5/gettickc_8c.html#a0">NtGetTickCount</a>(),
00486                     0L, 0L, FALSE);
00487     }
00488 
00489     <span class="keywordflow">if</span> ((NewButtonState &amp; <a class="code" href="../../d9/d3/access_8h.html#a25">MOUSE_BUTTON_RIGHT</a>) != (<a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a53">gwMKButtonState</a> &amp; <a class="code" href="../../d9/d3/access_8h.html#a25">MOUSE_BUTTON_RIGHT</a>)) {
00490         <a class="code" href="../../d4/d1/userk_8h.html#a1027">xxxButtonEvent</a>(MOUSE_BUTTON_RIGHT, gptCursorAsync, TRUE, <a class="code" href="../../d9/d5/gettickc_8c.html#a0">NtGetTickCount</a>(),
00491                     0L, 0L, FALSE);
00492     }
00493     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a53">gwMKButtonState</a> = NewButtonState;
00494 
00495     <span class="comment">/*</span>
00496 <span class="comment">     * Send shift key breaks to win32</span>
00497 <span class="comment">     * (Ensures no shift keys are left on)</span>
00498 <span class="comment">     */</span>
00499 
00500     <span class="comment">// { 0, 0xb8, KEY_BREAK, 0, 0 },           // L alt</span>
00501     <a class="code" href="../../d4/d1/userk_8h.html#a2091">xxxPushKeyEvent</a>(VK_LMENU, 0xb8, KEYEVENTF_KEYUP, 0);
00502 
00503     <span class="comment">// { 0, 0xb8, KEY_BREAK | KEY_E0, 0, 0 },  // R alt</span>
00504     <a class="code" href="../../d4/d1/userk_8h.html#a2091">xxxPushKeyEvent</a>(VK_RMENU, 0xb8, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP, 0);
00505 
00506     <span class="comment">// { 0, 0x9d, KEY_BREAK, 0, 0 },           // L ctrl</span>
00507     <a class="code" href="../../d4/d1/userk_8h.html#a2091">xxxPushKeyEvent</a>(VK_LCONTROL, 0x9d, KEYEVENTF_KEYUP, 0);
00508 
00509     <span class="comment">// { 0, 0x9d, KEY_BREAK | KEY_E0, 0, 0 },  // R ctrl</span>
00510     <a class="code" href="../../d4/d1/userk_8h.html#a2091">xxxPushKeyEvent</a>(VK_RCONTROL, 0x9d, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP, 0);
00511 
00512     <span class="comment">// { 0, 0xaa, KEY_BREAK, 0, 0 },           // L shift</span>
00513     <a class="code" href="../../d4/d1/userk_8h.html#a2091">xxxPushKeyEvent</a>(VK_LSHIFT, 0xaa, KEYEVENTF_KEYUP, 0);
00514 
00515     <span class="comment">// { 0, 0xb6, KEY_BREAK, 0, 0 }            // R shift</span>
00516     <a class="code" href="../../d4/d1/userk_8h.html#a2091">xxxPushKeyEvent</a>(VK_RSHIFT, 0xb6, KEYEVENTF_KEYUP, 0);
00517 
00518     <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a> = <a class="code" href="../../d4/d1/userk_8h.html#a2105">RemoteDisableScreen</a>();
00519 
00520     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d6/stierr_8h.html#a0">NT_SUCCESS</a>(Status)) {
00521        <span class="keywordflow">return</span> STATUS_NO_SUCH_DEVICE;
00522     }
00523 
00524     UserAssert(gspdeskDisconnect != NULL &amp;&amp; grpdeskRitInput == gspdeskDisconnect);
00525 
00526     <a class="code" href="../../d3/d6/ntuser_2kernel_2globals_8c.html#a341">gbFreezeScreenUpdates</a> = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00527 
00528     <span class="keywordflow">return</span> <a class="code" href="../../d1/d0/cmchek_8c.html#a4">Status</a>;
00529     UNREFERENCED_PARAMETER(fDisableGraphics);
00530 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a0" doxytag="w32/ntuser/kernel/misc.c::ThinWireCache" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CACHE_STATISTICS <a class="el" href="../../d6/d0/w32_2ntuser_2kernel_2misc_8c.html#a0">ThinWireCache</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00018">18</a> of file <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html">w32/ntuser/kernel/misc.c</a>.
<p>
Referenced by <a class="el" href="../../d7/d9/w32_2ntuser_2kernel_2misc_8c-source.html#l00020">RemoteConnect()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:43 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
